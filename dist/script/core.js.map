{"version":3,"sources":["webpack:///webpack/bootstrap 142026bf8e2640d692d9","webpack:///../../../../src/.internal/core/Registry.ts","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_export.js","webpack:///../../../../../src/.internal/core/utils/Type.ts","webpack:///../../../../../src/.internal/core/utils/Math.ts","webpack:///../../../../../src/.internal/core/utils/Iterator.ts","webpack:///../../../../src/.internal/core/Container.ts","webpack:///../../../../../src/.internal/core/utils/Utils.ts","webpack:///../../../../../src/.internal/core/utils/List.ts","webpack:///../../../../../src/.internal/core/utils/Percent.ts","webpack:///../../../../../src/.internal/core/utils/InterfaceColorSet.ts","webpack:///../../../../../src/.internal/core/rendering/Path.ts","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_an-object.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_global.js","webpack:///../../../../src/.internal/core/Sprite.ts","webpack:///../../../../../src/.internal/core/utils/Array.ts","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_fails.js","webpack:///../../../../../src/.internal/core/utils/Disposer.ts","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_is-object.js","webpack:///../../../../../src/.internal/core/utils/Color.ts","webpack:///../../../../../src/.internal/core/utils/Object.ts","webpack:///../../../../src/.internal/core/Base.ts","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_wks.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_descriptors.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_object-dp.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_to-length.js","webpack:///../../../../../src/.internal/core/utils/Dictionary.ts","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_to-object.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_a-function.js","webpack:///../../../../../src/.internal/core/utils/Adapter.ts","webpack:///../../../../../src/.internal/core/utils/DOM.ts","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_hide.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_redefine.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_string-html.js","webpack:///../../../../../src/.internal/core/interaction/Interaction.ts","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_has.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_to-iobject.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_object-gopd.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_object-gpo.js","webpack:///../../../../../src/.internal/core/utils/Animation.ts","webpack:///../../../../../src/.internal/core/utils/Ease.ts","webpack:///../../../../../src/.internal/core/elements/Label.ts","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_ctx.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_cof.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_strict-method.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_to-primitive.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_defined.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_to-integer.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_object-sap.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_array-methods.js","webpack:///../../../../../src/.internal/core/elements/RoundedRectangle.ts","webpack:///../../../../../../src/.internal/core/rendering/filters/Filter.ts","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_core.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_typed-array.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_metadata.js","webpack:///../../../../../src/.internal/core/utils/Keyboard.ts","webpack:///../../../../src/.internal/core/Component.ts","webpack:///../../../../../src/.internal/core/utils/EventDispatcher.ts","webpack:///../../../../../src/.internal/core/utils/Language.ts","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_meta.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_add-to-unscopables.js","webpack:///../../../../src/.internal/core/System.ts","webpack:///../../../../../src/.internal/core/utils/Strings.ts","webpack:///../../../../../../src/.internal/core/rendering/fills/LinearGradient.ts","webpack:///../../../../src/.internal/core/DataItem.ts","webpack:///../../../../../src/.internal/core/utils/ColorSet.ts","webpack:///../../../../../src/.internal/charts/axes/ValueAxis.ts","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_property-desc.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_uid.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_library.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_object-keys.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_to-absolute-index.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_object-create.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_object-gopn.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_set-species.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_an-instance.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_for-of.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_redefine-all.js","webpack:///../../../../../src/.internal/charts/axes/AxisRendererY.ts","webpack:///../../../../../src/.internal/core/elements/Button.ts","webpack:///../../../../../src/.internal/core/utils/AsyncPending.ts","webpack:///../../../../../src/.internal/core/utils/Colors.ts","webpack:///../../../../src/.internal/core/Options.ts","webpack:///../../../../../src/.internal/core/interaction/Mouse.ts","webpack:///../../../../../src/.internal/core/elements/Line.ts","webpack:///../../../../../src/.internal/core/rendering/Smoothing.ts","webpack:///../../../../../src/.internal/charts/series/Series.ts","webpack:///../../../../../src/.internal/core/elements/Tooltip.ts","webpack:///../../../../../src/.internal/charts/elements/Bullet.ts","webpack:///../../../../../src/.internal/core/elements/Circle.ts","webpack:///../../../../../src/.internal/core/elements/Slice.ts","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_set-to-string-tag.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_string-trim.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_iterators.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_validate-collection.js","webpack:///../../../../../src/.internal/core/elements/Rectangle.ts","webpack:///../../../../../src/.internal/core/utils/Number.ts","webpack:///../../../../../src/.internal/core/formatters/TextFormatter.ts","webpack:///../../../../../src/.internal/core/formatters/DateFormatter.ts","webpack:///../../../../../src/.internal/core/elements/Polyline.ts","webpack:///../../../../../src/.internal/core/elements/Scrollbar.ts","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_iobject.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_object-pie.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_classof.js","webpack:///../../../../../src/.internal/core/elements/AmChartsLogo.ts","webpack:///../../../../../src/.internal/charts/axes/AxisRenderer.ts","webpack:///../../../../../src/.internal/charts/axes/AxisRendererX.ts","webpack:///../../../../../src/.internal/charts/types/SerialChart.ts","webpack:///../../../../src/.internal/core/SpriteState.ts","webpack:///../../../../../src/.internal/core/utils/String.ts","webpack:///../../../../../src/.internal/core/utils/SortedList.ts","webpack:///../../../../../src/.internal/core/utils/Order.ts","webpack:///../../../../../src/.internal/core/rendering/AMElement.ts","webpack:///../../../../../../src/.internal/core/rendering/fills/Pattern.ts","webpack:///../../../../../src/.internal/core/elements/WavedLine.ts","webpack:///../../../../../src/.internal/charts/axes/Axis.ts","webpack:///../../../../../src/.internal/charts/axes/AxisBreak.ts","webpack:///../../../../../src/.internal/charts/elements/FlowDiagramNode.ts","webpack:///../../../../../src/.internal/charts/elements/FlowDiagramLink.ts","webpack:///../../../../../src/.internal/core/elements/Polyspline.ts","webpack:///../../../../../src/.internal/core/elements/Triangle.ts","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_shared.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_array-includes.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_object-gops.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_is-array.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_is-regexp.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_iter-detect.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_flags.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_fix-re-wks.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_species-constructor.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_collection.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_typed.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_object-forced-pam.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_set-collection-of.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_set-collection-from.js","webpack:///../../../../src/.internal/charts/Chart.ts","webpack:///../../../../../src/.internal/charts/axes/AxisFill.ts","webpack:///../../../../../src/.internal/charts/axes/Grid.ts","webpack:///../../../../../src/.internal/charts/axes/AxisLabel.ts","webpack:///../../../../src/.internal/charts/Legend.ts","webpack:///../../../../../src/.internal/core/utils/Cache.ts","webpack:///../../../../../src/.internal/core/rendering/SVGContainer.ts","webpack:///../../../../../src/.internal/core/rendering/Paper.ts","webpack:///../../../../../src/.internal/core/elements/Popup.ts","webpack:///../../../../../src/.internal/core/elements/Modal.ts","webpack:///../../../../../src/.internal/core/utils/Validatable.ts","webpack:///../../../../../src/.internal/core/data/CSVParser.ts","webpack:///../../../../../src/.internal/core/data/DataParser.ts","webpack:///../../../../../src/.internal/core/data/JSONParser.ts","webpack:///../../../../../src/.internal/charts/elements/Tick.ts","webpack:///../../../../../src/.internal/core/elements/WavedRectangle.ts","webpack:///../../../../../src/.internal/charts/axes/ValueAxisBreak.ts","webpack:///../../../../../../src/.internal/core/rendering/filters/LightenFilter.ts","webpack:///../../../../../src/.internal/charts/types/FlowDiagram.ts","webpack:///../../../../../../src/.internal/core/rendering/fills/LinearGradientModifier.ts","webpack:///../../../../../src/.internal/core/elements/ResizeButton.ts","webpack:///../../../../../../src/.internal/core/rendering/filters/DesaturateFilter.ts","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_dom-create.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_wks-define.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_shared-key.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_enum-bug-keys.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_html.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_set-proto.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_string-ws.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_inherit-if-required.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_string-repeat.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_math-sign.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_math-expm1.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_string-at.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_iter-define.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_iter-create.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_string-context.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_fails-is-regexp.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_is-array-iter.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_create-property.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/core.get-iterator-method.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_array-species-create.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_array-fill.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.array.iterator.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_task.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_microtask.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_new-promise-capability.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_typed-buffer.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_user-agent.js","webpack:///../../../../../src/.internal/core/rendering/Group.ts","webpack:///../../../../../src/.internal/core/defs/SVGDefaults.ts","webpack:///../../../../src/.internal/core/SpriteEvents.ts","webpack:///../../../../../../src/.internal/core/rendering/fills/RadialGradient.ts","webpack:///../../../../../src/.internal/core/interaction/InteractionObject.ts","webpack:///../../../../../src/.internal/core/interaction/InteractionObjectEvents.ts","webpack:///../../../../../src/.internal/core/interaction/InteractionKeyboardObject.ts","webpack:///../../../../../src/.internal/core/interaction/Inertia.ts","webpack:///../../../../../src/.internal/core/formatters/NumberFormatter.ts","webpack:///../../../../../src/.internal/core/formatters/DurationFormatter.ts","webpack:///../../../../../src/.internal/core/export/Export.ts","webpack:///../../../../../src/.internal/core/export/ExportMenu.ts","webpack:///../../../../../src/.internal/core/utils/Net.ts","webpack:///../../../../../src/.internal/core/data/DataSource.ts","webpack:///../../../../../src/.internal/core/data/DataLoader.ts","webpack:///../../../../../src/.internal/core/responsive/Responsive.ts","webpack:///../../../../../src/.internal/charts/axes/AxisLine.ts","webpack:///../../../../../src/.internal/charts/axes/AxisTick.ts","webpack:///../../../../../src/.internal/core/elements/PointedRectangle.ts","webpack:///../../../../../src/.internal/core/elements/PointedShape.ts","webpack:///../../../../../../src/.internal/core/rendering/filters/DropShadowFilter.ts","webpack:///../../../../../src/.internal/core/utils/Time.ts","webpack:///../../../../../src/.internal/core/elements/ZoomOutButton.ts","webpack:///../../../../../src/.internal/core/elements/WavedCircle.ts","webpack:///../../../../../src/.internal/core/elements/Trapezoid.ts","webpack:///../../../../../../src/.internal/core/elements/3d/Slice3D.ts","webpack:///../../../../../../src/.internal/core/rendering/fills/ColorModifier.ts","webpack:///../../../../../src/.internal/charts/types/SankeyDiagram.ts","webpack:///../../../../../src/.internal/charts/elements/SankeyNode.ts","webpack:///../../../../../src/.internal/charts/elements/LabelBullet.ts","webpack:///../../../../../src/.internal/charts/elements/SankeyLink.ts","webpack:///../../../../../../src/.internal/core/elements/3d/Rectangle3D.ts","webpack:///../../../../../src/.internal/charts/elements/HeatLegend.ts","webpack:///../../../../../../src/.internal/core/elements/3d/Cone.ts","webpack:///../../../../../src/.internal/core/elements/Ellipse.ts","webpack:///../../../../../src/.internal/core/elements/TextLink.ts","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_ie8-dom-define.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_wks-ext.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_object-keys-internal.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_object-dps.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_object-gopn-ext.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_object-assign.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_bind.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_invoke.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_parse-int.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_parse-float.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_a-number-value.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_is-integer.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_math-log1p.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_math-fround.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_iter-call.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_array-reduce.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_array-copy-within.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_iter-step.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.regexp.flags.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_perform.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_promise-resolve.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.map.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_collection-strong.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.set.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.weak-map.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_collection-weak.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_to-index.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_own-keys.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_flatten-into-array.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_string-pad.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_object-to-array.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_collection-to-json.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_array-from-iterable.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_math-scale.js","webpack:///../../../../../src/.internal/core/elements/Polyarc.ts","webpack:///../../../../../src/.internal/core/elements/Polygon.ts","webpack:///../../../../../src/.internal/core/utils/Morpher.ts","webpack:///../../../../../src/.internal/core/elements/Preloader.ts","webpack:///../../../../../../src/.internal/core/rendering/filters/FocusFilter.ts","webpack:///../../../../../src/.internal/core/utils/Instance.ts","webpack:///../../../../../src/.internal/core/elements/PopupCSS.ts","webpack:///../../../../src/.internal/lang/en.ts","webpack:///../../../../../src/.internal/core/export/ExportCSS.ts","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/shim.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.symbol.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_enum-keys.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.object.create.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.object.define-property.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.object.define-properties.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.object.get-own-property-descriptor.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.object.get-prototype-of.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.object.keys.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.object.get-own-property-names.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.object.freeze.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.object.seal.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.object.prevent-extensions.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.object.is-frozen.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.object.is-sealed.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.object.is-extensible.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.object.assign.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.object.is.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_same-value.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.object.set-prototype-of.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.object.to-string.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.function.bind.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.function.name.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.function.has-instance.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.parse-int.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.parse-float.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.number.constructor.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.number.to-fixed.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.number.to-precision.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.number.epsilon.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.number.is-finite.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.number.is-integer.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.number.is-nan.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.number.is-safe-integer.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.number.max-safe-integer.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.number.min-safe-integer.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.number.parse-float.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.number.parse-int.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.math.acosh.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.math.asinh.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.math.atanh.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.math.cbrt.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.math.clz32.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.math.cosh.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.math.expm1.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.math.fround.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.math.hypot.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.math.imul.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.math.log10.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.math.log1p.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.math.log2.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.math.sign.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.math.sinh.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.math.tanh.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.math.trunc.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.from-code-point.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.raw.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.trim.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.iterator.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.code-point-at.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.ends-with.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.includes.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.repeat.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.starts-with.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.anchor.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.big.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.blink.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.bold.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.fixed.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.fontcolor.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.fontsize.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.italics.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.link.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.small.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.strike.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.sub.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.sup.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.date.now.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.date.to-json.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.date.to-iso-string.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_date-to-iso-string.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.date.to-string.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.date.to-primitive.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_date-to-primitive.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.array.is-array.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.array.from.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.array.of.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.array.join.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.array.slice.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.array.sort.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.array.for-each.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_array-species-constructor.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.array.map.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.array.filter.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.array.some.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.array.every.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.array.reduce.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.array.reduce-right.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.array.index-of.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.array.last-index-of.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.array.copy-within.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.array.fill.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.array.find.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.array.find-index.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.array.species.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.regexp.constructor.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.regexp.to-string.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.regexp.match.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.regexp.replace.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.regexp.search.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.regexp.split.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.promise.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.weak-set.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.typed.array-buffer.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.typed.data-view.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.typed.int8-array.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.typed.uint8-array.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.typed.uint8-clamped-array.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.typed.int16-array.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.typed.uint16-array.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.typed.int32-array.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.typed.uint32-array.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.typed.float32-array.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.typed.float64-array.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.reflect.apply.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.reflect.construct.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.reflect.define-property.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.reflect.delete-property.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.reflect.enumerate.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.reflect.get.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.reflect.get-own-property-descriptor.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.reflect.get-prototype-of.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.reflect.has.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.reflect.is-extensible.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.reflect.own-keys.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.reflect.prevent-extensions.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.reflect.set.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.reflect.set-prototype-of.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.array.includes.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.array.flat-map.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.array.flatten.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.string.at.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.string.pad-start.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.string.pad-end.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.string.trim-left.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.string.trim-right.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.string.match-all.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.symbol.async-iterator.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.symbol.observable.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.object.get-own-property-descriptors.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.object.values.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.object.entries.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.object.define-getter.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.object.define-setter.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.object.lookup-getter.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.object.lookup-setter.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.map.to-json.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.set.to-json.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.map.of.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.set.of.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.weak-map.of.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.weak-set.of.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.map.from.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.set.from.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.weak-map.from.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.weak-set.from.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.global.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.system.global.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.error.is-error.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.math.clamp.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.math.deg-per-rad.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.math.degrees.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.math.fscale.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.math.iaddh.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.math.isubh.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.math.imulh.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.math.rad-per-deg.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.math.radians.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.math.scale.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.math.umulh.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.math.signbit.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.promise.finally.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.promise.try.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.reflect.define-metadata.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.reflect.delete-metadata.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.reflect.get-metadata.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.reflect.get-metadata-keys.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.reflect.get-own-metadata.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.reflect.get-own-metadata-keys.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.reflect.has-metadata.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.reflect.has-own-metadata.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.reflect.metadata.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.asap.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.observable.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/web.timers.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/web.immediate.js","webpack:///C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/web.dom.iterable.js","webpack:///./core.js","webpack:///../../src/core.ts","webpack:///../../../../../src/.internal/core/elements/Image.ts","webpack:///../../../../../src/.internal/core/elements/Slider.ts","webpack:///../../../../../src/.internal/core/elements/PlayButton.ts","webpack:///../../../../../../src/.internal/core/rendering/fills/LinePattern.ts","webpack:///../../../../../../src/.internal/core/rendering/fills/RectPattern.ts","webpack:///../../../../../../src/.internal/core/rendering/filters/ColorizeFilter.ts","webpack:///../../../../../../src/.internal/core/rendering/filters/BlurFilter.ts","webpack:///external \"jsdom\"","webpack:///external \"xmldom\""],"names":["parentJsonpFunction","window","chunkIds","moreModules","executeModules","moduleId","chunkId","result","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","shift","__webpack_require__","s","installedModules","26","exports","module","l","e","installedChunkData","Promise","resolve","promise","reject","head","document","getElementsByTagName","script","createElement","type","charset","async","timeout","nc","setAttribute","src","p","0","1","2","3","setTimeout","onScriptComplete","onerror","onload","clearTimeout","chunk","Error","undefined","appendChild","m","c","d","name","getter","o","defineProperty","configurable","enumerable","get","n","__esModule","object","property","oe","err","console","error","Registry","this","events","__WEBPACK_IMPORTED_MODULE_0__utils_EventDispatcher__","themes","loadedThemes","_uidCount","registeredClasses","frameRate","invalidSprites","invalidDatas","invalidRawDatas","invalidDataItems","invalidDataRange","invalidPositions","invalidLayouts","uid","getUniqueId","_map","__WEBPACK_IMPORTED_MODULE_1__utils_Dictionary__","setCache","key","value","__WEBPACK_IMPORTED_MODULE_2__utils_Cache__","set","getCache","dispatch","eventType","data","isEnabled","target","dispatchImmediately","registry","global","core","hide","redefine","ctx","$export","source","own","out","exp","IS_FORCED","F","IS_GLOBAL","G","IS_STATIC","S","IS_PROTO","P","IS_BIND","B","expProto","Function","U","W","R","optional","getType","isNaN","t","Array","isArray","number","JSON","stringify","getTime","hasValue","isString","castString","isNumber","__WEBPACK_IMPORTED_MODULE_0__Percent__","indexOf","toNumber","a","defaultValue","Number","toString","converted","replace","min","max","__WEBPACK_IMPORTED_MODULE_0__Type__","fitToRange","from","to","round","Math","tan","RADIANS","values","referenceValue","reduce","prev","curr","abs","range1","range2","start1","start","start2","end1","end","end2","range","startMax","endMin","point1","startPoint1","point2","startPoint2","initialDistance","getDistance","currentDistance","position","x","y","center","angle","getRotation","distance","cos","points","length_1","top_1","left","right","bottom","point","width","height","rectangles","minX","minY","maxX","maxY","rectangle","pointA","pointB","controlPoint","controlPointA","controlPointB","mt1","mt2","mt3","p0","p1","p2","p3","tensionX","tensionY","adjustTension","startAngle","endAngle","temp","normalizeAngle","count","radius","sin","pointA1","pointA2","pointB1","pointB2","PI","HALFPI","DEGREES","precision","pow","minValue","maxValue","sqrt","diff","getAngle","diffX","diffY","atan2","tension","iter","sum","_","fn","fromArray","toArray","sort","args","_i","arguments","go","push2","index","matches","found","output","v","foldl","min2","max2","separator","first","init","array","ListIterator","list","create","createNewItems","_create","reset","_listCopy","iterator","clear","getFirst","returnItem","getLast","find","__WEBPACK_IMPORTED_MODULE_0__Array__","item","removeItem","__WEBPACK_IMPORTED_MODULE_10__utils_Type__","Container","_super","_this","_childrenByLayout","hasFocused","setStateOnChildren","layoutInvalid","_absoluteWidth","_absoluteHeight","className","element","paper","addGroup","pixelPerfect","_positionPrecision","group","add","layout","_fixedWidthGrid","verticalCenter","horizontalCenter","children","on","handleChildAdded","handleChildRemoved","applyTheme","__extends","event","child","newValue","_disposers","addChildren","isDisposed","log","_childAddedDisposer","handleChildTransform","invalidate","invalidateLayout","oldValue","removeDispose","removeElement","isMeasured","disabled","isTemplate","__WEBPACK_IMPORTED_MODULE_8__utils_Array__","__WEBPACK_IMPORTED_MODULE_5__Registry__","deepInvalidate","sortChildren","appendDefs","_children","__WEBPACK_IMPORTED_MODULE_2__utils_List__","getPropertyValue","setPropertyValue","maxWidth","parent","relativeWidth","maxHeight","relativeHeight","moveValue","fixed_1","relative_1","__WEBPACK_IMPORTED_MODULE_7__utils_Iterator__","percentWidth","percentHeight","concat","calculateRelativeSize","totalRelativeWidth","totalRelativeHeight","zindexed","b","zIndex","createChild","classType","sprite","removeChildren","getIndex","removeValue","disposeChildren","dispose","_background","createBackground","processBackground","background","__WEBPACK_IMPORTED_MODULE_3__elements_Rectangle__","fill","__WEBPACK_IMPORTED_MODULE_6__core_utils_InterfaceColorSet__","getFor","validateLayout","_availableWidth","innerWidth","_availableHeight","innerHeight","measuredWidth","measuredHeight","allValid","__WEBPACK_IMPORTED_MODULE_9__utils_Math__","pixelMarginRight","pixelMarginLeft","invalid","validate","pixelMarginTop","pixelMarginBottom","childMeasuredWidth","childMeasuredHeight","align","valign","arrange","innerWidth_1","innerHeight_1","nextX","pixelPaddingLeft","pixelPaddingRight","pixelPaddingTop","pixelPaddingBottom","nextY","row","column","columnWidth","rowHeight","maxCellWidth","minCellWidth","columnCount","fixedWidthGrid","floor","getColumnWidth","contentLeft","contentRight","contentTop","contentBottom","len","childMarginLeft","childMarginRight","childMarginTop","childMarginBottom","childWidth","childHeight","childLeft","childRight","childTop","childBottom","__disabled","maxLeft","maxRight","__WEBPACK_IMPORTED_MODULE_4__utils_Percent__","pixelX","maxTop","maxBottom","pixelY","nextColumnWidth","moveTo","_pixelWidth","minWidth","_pixelHeight","minHeight","dx_1","dy_1","measuredContentWidth","measuredContentHeight","mwa","mha","contentAlign","contentValign","ddx","ddy","oldBBox","bbox","getContainerBBox","prevLeft","prevTop","prevBotttom","prevRight","measure","event_1","dummyData","definedBBox","updateCenter","updateBackground","addToBack","_contentValign","_contentAlign","fitsToBounds","pixelWidth","pixelHeight","copyFrom","clone","shouldClone","preloader","_preloader","tooltipContainer","setPaper","removeFromInvalids","setDataItem","dataItem","_dataItem","measureElement","getTooltipX","getTooltipY","setSVGAttribute","font-size","font-weight","text-decoration","setState","transitionDuration","easing","stateName","__WEBPACK_IMPORTED_MODULE_1__SpriteState__","__WEBPACK_IMPORTED_MODULE_0__Sprite__","__WEBPACK_IMPORTED_MODULE_5__Object__","__WEBPACK_IMPORTED_MODULE_2__utils_Type__","percent","full","subtractIfNegative","str","toLowerCase","arr","split","toUpperCase","join","text","maxChars","ellipsis","fullWords","rtl","splitTextByCharCount","res","trim","char","format","__WEBPACK_IMPORTED_MODULE_4__Strings__","hints","match","stripTags","Infinity","negative","parsed","exec","digits","decimals","exponent","zeros","__WEBPACK_IMPORTED_MODULE_3__String__","slice","Date","num","date","utc","firstWeek","getWeek","getFullYear","getMonth","currentWeek","week","year","weekday","setUTCFullYear","getDay","hours","base","long","savings","wotz","toLocaleString","wtz","timeZoneName","substr","random","gap","toSprite","svgPointToSprite","spritePointToSvg","rect","documentPointToSvg","htmlContainer","svgPointToDocument","clientWidth","clientHeight","currentIndex","words","word","wordLength","reverseString","parts","RegExp","reverse","getYearDay","day","sprites","sprite_1","rotation","relativeX","relativeY","dx","dy","__WEBPACK_IMPORTED_MODULE_1__utils_Math__","scale","svgContainer","getBoundingClientRect","top","IndexedIterable","_array","_start","_end","backwards","ListGrouper","getKey","_getKey","__WEBPACK_IMPORTED_MODULE_3__Iterator__","_insert","_remove","_keys","_groups","_sort","_a","__WEBPACK_IMPORTED_MODULE_2__Array__","index_1","__WEBPACK_IMPORTED_MODULE_0__Disposer__","ListDisposer","disposer","checkBounds","List","initial","__WEBPACK_IMPORTED_MODULE_1__EventDispatcher__","_values","contains","removeIndex","hasIndex","setIndex","insertIndex","_sortQuicksort","low","high","order","_sortPartition","pivot","j","swap","value_a","value_b","toIndex","unshift","pushAll","pop","setAll","newArray","oldArray","Symbol","sent","each","f","ListTemplate","template","_template","make","Percent","__webpack_exports__","_value","__WEBPACK_IMPORTED_MODULE_1__Color__","InterfaceColorSet","_purposes","stroke","primaryButton","primaryButtonHover","primaryButtonDown","primaryButtonActive","primaryButtonText","primaryButtonStroke","secondaryButton","secondaryButtonHover","brighten","secondaryButtonDown","secondaryButtonActive","secondaryButtonText","secondaryButtonStroke","grid","alternativeBackground","alternativeText","disabledBackground","positive","debug","purpose","setFor","color","__WEBPACK_IMPORTED_MODULE_0__Base__","path","lineTo","__WEBPACK_IMPORTED_MODULE_0__utils_Math__","arc","innerRadius","radiusY","cornerRadius","innerCornerRadius","crSin","__WEBPACK_IMPORTED_MODULE_1__utils_Type__","innerRadiusY","cornerRadiusY","innerCornerRadiusY","crAngle","asin","crAngleY","crInnerAngle","crInnerAngleY","middleAngle","mPoint","a0","b0","c0","d0","b1","d1","arcToPoint","arcTo","ccw","L","closePath","segments","ceil","cx","cy","pax","pay","ax","ay","sweepFlag","largeArcFlag","xAxisRotation","Boolean","isObject","it","TypeError","self","__g","__WEBPACK_IMPORTED_MODULE_33__utils_Percent__","visualProperties","Sprite","properties","__WEBPACK_IMPORTED_MODULE_1__SpriteEvents__","adapter","__WEBPACK_IMPORTED_MODULE_3__utils_Adapter__","_bindings","_inited","isHiding","isHidden","isShowing","isStandaloneInstance","_isActive","_mask","__WEBPACK_IMPORTED_MODULE_6__utils_Disposer__","_language","_url","_urlTarget","_rtl","_exporting","_parent","positionInvalid","propertyFields","applyOnClones","_isDragged","_disabled","_internalDisabled","_internalDefaultsApplied","renderingFrequency","renderingFrame","rollOutDelay","isBaseSprite","marginTop","marginBottom","marginLeft","marginRight","paddingTop","paddingBottom","paddingRight","paddingLeft","_prevMeasuredWidth","_prevMeasuredHeight","_measuredWidth","_measuredHeight","hiddenState","states","opacity","visible","__WEBPACK_IMPORTED_MODULE_30__utils_Object__","__WEBPACK_IMPORTED_MODULE_19__Options__","autoSetClassName","setClassName","getCurrentThemes","_themes","parent_1","__WEBPACK_IMPORTED_MODULE_20__Registry__","applyInternalDefaults","__WEBPACK_IMPORTED_MODULE_29__utils_Array__","beforeDraw","draw","afterDraw","invalidatePosition","validatePosition","elementTransformChanged","prevElementTransform","transformString","prevGroupTransform","nonScaling","globalScale","sizeChanged","maskRectangle","_maskRectangle","_clipElement","setSVGAttributes","applyFilters","interactionsEnabled","applyMask","reinit","defaultState","handleGlobalScale","nonScalingStroke","strokeWidth","updateFilterScale","__WEBPACK_IMPORTED_MODULE_32__utils_Iterator__","filters","filter","interactions","configField","tooltip","_tooltip","_showSystemTooltip","showSystemTooltip","__WEBPACK_IMPORTED_MODULE_26__utils_Utils__","fillModifier","strokeModifier","removeChild","parent_2","_svgContainer","_interactionDisposer","_numberFormatter","__WEBPACK_IMPORTED_MODULE_14__utils_Color__","__WEBPACK_IMPORTED_MODULE_31__utils_Type__","id","map","removeKey","_isTemplate","__WEBPACK_IMPORTED_MODULE_8__Container__","topParent","currentPaper","oldParent","_tooltipContainer","filterElement","appendDef","fill_1","modify","stroke_1","_clipPath","__WEBPACK_IMPORTED_MODULE_4__utils_Dictionary__","_id","hasKey","setKey","node","_paper","__WEBPACK_IMPORTED_MODULE_18__System__","ghostPaper","append","_htmlContainer","_titleElement","_descriptionElement","_filters","__WEBPACK_IMPORTED_MODULE_15__rendering_filters_Filter__","__WEBPACK_IMPORTED_MODULE_5__utils_List__","onAll","fillOpacity","strokeOpacity","shapeRendering","strokeDasharray","focusable","tabindex","role","attribute","attr","removeSVGAttribute","removeAttr","classNamePrefix","addClass","uidAttr","updateClipPath","mask","removeClipPath","clip-path","width_1","height_1","removeChildNodes","appendPrimitives","_element","applyAccessibility","svgBBox","getBBox","ex","ey","elementX","elementY","elementWidth","elementHeigth","__WEBPACK_IMPORTED_MODULE_27__utils_Math__","top_2","_measuredWidthSelf","_measuredHeightSelf","svg","matrix","createSVGMatrix","createSVGPoint","p4","pt1","matrixTransform","pt2","pt3","pt4","positionPrecision","insertBefore","insertAfter","getRelativeX","getRelativeY","getPixelX","pixel","relative","getPixelY","isDragged","apply","_isMeasured","hitTest","ax1","ay1","ax2","ay2","bx1","by1","bx2","by2","_states","state","__WEBPACK_IMPORTED_MODULE_0__SpriteState__","processState","tooltipHTML","tooltipText","hoverable","clickable","_animations","__WEBPACK_IMPORTED_MODULE_7__utils_Animation__","getSvgPoint","animate","animationOptions","duration","isHover","isActive","transitionEasing","transitTo","applyCurrentState","animation","isDown","downPointers","isFocused","transition","options","propValues","allValues","propertyName","finalValue","currentValue","option","newFilters_1","stateFilter","newFilter","currentFilter","isInTransition","animations","handleOver","handleOut","handleDown","handleUp","handleFocus","handleBlur","current","setDisabled","display","numberFormatter","__WEBPACK_IMPORTED_MODULE_21__formatters_NumberFormatter__","language","_dateFormatter","dateFormatter","__WEBPACK_IMPORTED_MODULE_22__formatters_DateFormatter__","_durationFormatter","durationFormatter","__WEBPACK_IMPORTED_MODULE_23__formatters_DurationFormatter__","__WEBPACK_IMPORTED_MODULE_24__utils_Language__","ev","populateString","string","tags","tag","getTagValue","tagName","reg","prop","params","reg2","matches2","method","getTagValueFromObject","dataContext","component","formatApplied","part","formatParts","formatterType","__WEBPACK_IMPORTED_MODULE_28__utils_Strings__","config","fieldValue","propValue","transform","clones","bind","bindToProperty","modifier","observe","listener","context","title","readerTitle","description","readerDescription","hidden","readerHidden","checked","readerChecked","controls","readerControls","live","readerLive","labelledByIds","describedByIds","labelledBy","readerLabelledBy","describedBy","readerDescribedBy","titleElement","titleId","textContent","descriptionElement","descriptionId","aria-label","aria-labelledby","aria-describedby","aria-hidden","aria-checked","aria-controls","aria-live","keyboardOptions","_interaction","interaction","__WEBPACK_IMPORTED_MODULE_16__interaction_Interaction__","getInteraction","dom","trackable","draggable","swipeable","resizable","rotatable","wheelable","inert","setEventDisposer","focusFilter","hoverOnFocus","_focusFilter","_tabindex","inertiaOptions","applyCursorStyle","handleDragStart","handleDragMove","handleDragStop","hideTooltip","dragStart","pointer","showTooltip","originalPosition","dragStop","hoverOptions","_outTimeout","handleOutReal","hitOptions","originalAngle","originalScale","togglable","handleToggle","urlEvent","urlHandler","cursorOverStyle","__WEBPACK_IMPORTED_MODULE_17__interaction_Mouse__","url","urlTarget","location","href","open","swipeOptions","handleResize","svgPoint1","svgPoint2","svgMidPoint","parentPoint1","parentPoint2","spritePoint1","spritePoint2","spriteMidPoint","parentPoint","handleRotate","rotate","cursorOptions","style","overStyle","applyCursorOverStyle","downStyle","setInteractionsEnabled","pointerEvents","getExporting","_export","exporting","__WEBPACK_IMPORTED_MODULE_25__export_Export__","container","SVGContainer","modal","_modal","__WEBPACK_IMPORTED_MODULE_13__elements_Modal__","showModal","hideModal","content","show","popups","_popups","popupTemplate","__WEBPACK_IMPORTED_MODULE_12__elements_Popup__","openPopup","popup","closeAllPopups","_relativeHeight","_relativeWidth","margin","padding","fill-opacity","setFill","__WEBPACK_IMPORTED_MODULE_9__rendering_fills_Pattern__","__WEBPACK_IMPORTED_MODULE_10__rendering_fills_LinearGradient__","__WEBPACK_IMPORTED_MODULE_11__rendering_fills_RadialGradient__","setStroke","hex","stroke-opacity","stroke-width","stroke-dasharray","shape-rendering","showReal","_hideAnimation","_showHideDisposer","hideReal","progress","setVisibility","visibility","toFront","toBack","tooltipDataItem","_tooltipDataItem","_tooltipColorSource","colorSource_1","tooltipColorSource_1","tooltipColorSource","getStrokeFromObject","getFillFromObject","clonedFrom","animationDuration","rgb","autoTextColor","label","alternative","html","tooltipPosition","body","pointTooltipTo","globalPoint","tooltipX","tooltipY","instantly","pointTo","raiseCriticalError","message","closable","verbose","processConfig","configOrder","__WEBPACK_IMPORTED_MODULE_2__Base__","__WEBPACK_IMPORTED_MODULE_1__Type__","splice","input","ordering","findIndex","remove","Disposer","_disposed","_dispose","MultiDisposer","disposers","MutableValueDisposer","_disposer","CounterDisposer","_counter","increment","isColor","castColor","Color","__WEBPACK_IMPORTED_MODULE_0__Colors__","_lightColor","r","g","_darkColor","alpha","rgba","lighten","saturate","saturation","darkColor","lightColor","eachContinue","ord","keysOrdered","assign","object1","object2","keys","copyProperties","__WEBPACK_IMPORTED_MODULE_11__utils_Type__","BaseObject","_uid","__WEBPACK_IMPORTED_MODULE_7__Registry__","__WEBPACK_IMPORTED_MODULE_9__utils_Array__","theme","clearCache","cloneId","newObject","constructor","_clones","__WEBPACK_IMPORTED_MODULE_0__utils_List__","_className","__WEBPACK_IMPORTED_MODULE_8__utils_Cache__","delay","__WEBPACK_IMPORTED_MODULE_2__utils_Disposer__","__WEBPACK_IMPORTED_MODULE_10__utils_Object__","configKey","item_1","configValue","hasProperty","createClassInstance","__WEBPACK_IMPORTED_MODULE_4__utils_Adapter__","processAdapters","__WEBPACK_IMPORTED_MODULE_3__utils_EventDispatcher__","processEvents","asIs","entry","listItem","getConfigEntryType","entryKey","entryValue","processDictionaryTemplate","createEntryInstance","__WEBPACK_IMPORTED_MODULE_5__utils_Color__","__WEBPACK_IMPORTED_MODULE_6__utils_Percent__","maybeColorOrPercent","has","callback","priority","field","BaseObjectEvents","store","USE_SYMBOL","anObject","IE8_DOM_DEFINE","toPrimitive","dP","O","Attributes","toInteger","DictionaryDisposer","dict","Dictionary","_dictionary","__WEBPACK_IMPORTED_MODULE_2__Object__","insertKey","updateKey","insertKeyIfEmpty","ifEmpty","_c","_b","__read","sortedIterator","__WEBPACK_IMPORTED_MODULE_4__String__","DictionaryTemplate","defined","__WEBPACK_IMPORTED_MODULE_5__utils_Type__","GlobalAdapter","_callbackId","_callbacks","__WEBPACK_IMPORTED_MODULE_0__SortedList__","__WEBPACK_IMPORTED_MODULE_2__Order__","__WEBPACK_IMPORTED_MODULE_1__Number__","addAll","scope","insert","applyAll","callbacks","globalAdapter","Adapter","__WEBPACK_IMPORTED_MODULE_4__utils_Array__","__WEBPACK_IMPORTED_MODULE_3__utils_Iterator__","addEventListener","removeEventListener","el","__WEBPACK_IMPORTED_MODULE_4__Type__","getElementById","getElementsByClassName","HTMLElement","classList","currentClassName","getAttribute","focus","blur","fo","createElementNS","SVGNS","outerHTML","twrap","tnode","cloneNode","innerHTML","nodeType","compareDocumentPosition","attributes","nodeValue","nodeName","__WEBPACK_IMPORTED_MODULE_1__AsyncPending__","left_1","readyState","listener_1","rootStylesheet","XMLNS","XLINK","getStylesheet","sheet","StyleRule","selector","styles","root","__WEBPACK_IMPORTED_MODULE_3__Array__","cssRules","_rule","deleteRule","insertRule","makeStylesheet","setStyle","selectorText","_setVendorPrefixName","setProperty","styleId","StyleClass","createDesc","SRC","$toString","TPL","inspectSource","val","safe","isFunction","String","fails","quot","createHTML","NAME","test","Interaction","__WEBPACK_IMPORTED_MODULE_13__utils_Type__","_globalEventsAdded","_pointerEvents","pointerdown","pointerup","pointermove","wheel","_usePointerEventsOnly","_passiveSupported","_delayedEvents","overObjects","__WEBPACK_IMPORTED_MODULE_1__utils_List__","downObjects","trackedObjects","transformedObjects","pointers","__WEBPACK_IMPORTED_MODULE_6__utils_Dictionary__","holdTime","doubleHitTime","delayFirstHit","hitTolerance","noFocus","touchOutBehavior","touchOutDelay","time","verticalThreshold","horizontalThreshold","speed","accelleration","accellerationDelay","onmousewheel","factor","__WEBPACK_IMPORTED_MODULE_10__utils_Ease__","target_1","addGlobalEvents","__WEBPACK_IMPORTED_MODULE_8__utils_DOM__","handleGlobalPointerMove","handleGlobalPointerDown","handleGlobalPointerUp","handleGlobalTouchEnd","handleGlobalTouchMove","handleGlobalTouchStart","handleGlobalKeyDown","handleGlobalKeyUp","processClickable","io","processTouchable","processHoverable","eventDisposers","__WEBPACK_IMPORTED_MODULE_3__utils_Disposer__","handleMouseOver","handleMouseOut","processMovable","isGlobalElement","prepElement","processTrackable","processDraggable","processSwipeable","processResizable","processRotatable","processWheelable","handleMouseWheel","processFocusable","handlePointerDown","handleTouchDown","passive","imev","preventDefault","focusedObject","__WEBPACK_IMPORTED_MODULE_9__utils_Keyboard__","isKey","ko","__WEBPACK_IMPORTED_MODULE_5__InteractionKeyboardObject__","keyboardEvent","getEventKey","directionY","directionX","getPointer","addBreadCrumb","handleMove","processDelayed","preventTouchAction","defaultPrevented","changedTouches","button","which","resetPointer","lockWheel","unlockWheel","deltaX","deltaY","WheelEvent","handleWheel","handleHit","now","lastHit","getHitOption","lastHitPointer","pointerExists","overPointers","handleTrack","ignoreBehavior","touch","moved","behavior","getHoverOption","lastOutEvent","stopInertia","lastDownEvent","applyCursorDownStyle","cancelHold","processDragStart","swipeCanceled","__WEBPACK_IMPORTED_MODULE_12__utils_Iterator__","lastEvent","swiping","handleTransform","skipCheck","lastUpEvent","restoreCursorDownStyle","swiped","handleSwipe","handleInertia","processDragStop","startPoint","handleMoveInertia","handleRotateInertia","handleResizeInertia","inertia","__WEBPACK_IMPORTED_MODULE_7__Inertia__","ref","getTrailPoint","getInertiaOption","__WEBPACK_IMPORTED_MODULE_2__utils_Animation__","done","inertias","pointer1","pointer2","singlePoint","pointer1Moved","dragStartEvents","handleTransformMove","pointer2Moved","handleTransformResize","handleTransformRotate","pointerMoved","__WEBPACK_IMPORTED_MODULE_11__utils_Math__","getDragPointer","getPointerId","identifier","pointerId","clientX","clientY","MouseEvent","pointerType","startTime","track","timestamp","lockDocument","unlockDocument","restoreAllStyles","lockElement","unlockElement","wheelLockEvent","permanent","props","setTemporaryStyle","cancelSwipe","getSwipeOption","getKeyboardOption","restoreStyle","setGlobalStyle","restoreGlobalStyle","tolerance","getShift","exists","__WEBPACK_IMPORTED_MODULE_4__InteractionObject__","replacedStyles","delayedEvent","IObject","pIE","toIObject","gOPD","getOwnPropertyDescriptor","toObject","IE_PROTO","ObjectProto","getPrototypeOf","disposed","__WEBPACK_IMPORTED_MODULE_5__utils_AsyncPending__","loop","getProgressNumber","getProgressPercent","getProgressColor","__WEBPACK_IMPORTED_MODULE_3__utils_Color__","__WEBPACK_IMPORTED_MODULE_7__utils_Colors__","getHybridProperty","charAt","AnimationDisposer","Animation","__WEBPACK_IMPORTED_MODULE_6__utils_Ease__","_loop","_pause","pause","_delayTimeout","stopSameAnimations","_startTime","_time","staticOptions","childObject","__WEBPACK_IMPORTED_MODULE_1__defs_SVGDefaults__","updateMethod","convertedFrom","applyStaticOptions","update","resume","setProgress","event_2","stop","skipEvent","event_3","event_4","__WEBPACK_IMPORTED_MODULE_8__utils_Math__","delayed","killed_1","newOptions","oldOptions","polyIn","polyOut","polyInOut","bounceOut","amplitude","period","b2","b3","b4","b5","b6","b7","b8","b9","__WEBPACK_IMPORTED_MODULE_8__utils_Type__","Label","isOversized","_svgLines","__WEBPACK_IMPORTED_MODULE_4__core_utils_InterfaceColorSet__","wrap","truncate","textAlign","textValign","arg","__WEBPACK_IMPORTED_MODULE_6__utils_Utils__","availableWidth","availableHeight","alignSVGText","once","__WEBPACK_IMPORTED_MODULE_1__Registry__","_prevStatus","updateCurrentText","supportsForeignObject","changed","_currentText","_currentFormat","__WEBPACK_IMPORTED_MODULE_5__utils_Math__","status","inited","lines","getAttr","resetBBox","currentHeight","currentFormat","line","chunks","__WEBPACK_IMPORTED_MODULE_2__formatters_TextFormatter__","currentLineHeight","firstChunk","skipTextChunks","lineInfo","getLineInfo","getSVGLineElement","complex","getSvgElement","translateStyleShortcuts","lineText","avgCharWidth","excessChars","addEllipsis","elementText","lastElement_1","lastChild","splitLines","cleanUp","restOfLine","lastElement","addLineInfo","tempElement","offset","hideOversized","hideUnused","foreignObject","lineElement","getHTMLLineElement","tmpBBox","overflow","setStyles","text-anchor","direction","unicode-bidi","div","wordWrap","whiteSpace","unicodeBidi","selectable","addStyle","webkitUserSelect","msUserSelect","removeStyle","initLineCache","_sourceDataItemEvents","__WEBPACK_IMPORTED_MODULE_0__Container__","aFunction","that","valueOf","KEY","toLength","asc","TYPE","$create","IS_MAP","IS_FILTER","IS_SOME","IS_EVERY","IS_FIND_INDEX","NO_HOLES","$this","callbackfn","__WEBPACK_IMPORTED_MODULE_3__utils_Type__","RoundedRectangle","w","h","maxcr","__WEBPACK_IMPORTED_MODULE_2__utils_Math__","crtl","cornerRadiusTopLeft","crtr","cornerRadiusTopRight","crbr","cornerRadiusBottomRight","crbl","cornerRadiusBottomLeft","tl","tr","bl","br","__WEBPACK_IMPORTED_MODULE_5__utils_Iterator__","Filter","_scale","_nonScaling","filterPrimitives","__WEBPACK_IMPORTED_MODULE_3__utils_List__","filterPrimitive","__WEBPACK_IMPORTED_MODULE_4__utils_Object__","__WEBPACK_IMPORTED_MODULE_1__System__","updateScale","setSprite","_sprite","version","__e","LIBRARY","$typed","$buffer","anInstance","propertyDesc","redefineAll","toAbsoluteIndex","classof","isArrayIter","gOPN","getIterFn","wks","createArrayMethod","createArrayIncludes","speciesConstructor","ArrayIterators","Iterators","$iterDetect","setSpecies","arrayFill","arrayCopyWithin","$DP","$GOPD","RangeError","Uint8Array","ArrayProto","$ArrayBuffer","ArrayBuffer","$DataView","DataView","arrayForEach","arrayFilter","arraySome","arrayEvery","arrayFind","arrayFindIndex","arrayIncludes","arrayIndexOf","arrayValues","arrayKeys","arrayEntries","entries","arrayLastIndexOf","lastIndexOf","arrayReduce","arrayReduceRight","reduceRight","arrayJoin","arraySort","arraySlice","arrayToString","arrayToLocaleString","ITERATOR","TAG","TYPED_CONSTRUCTOR","DEF_CONSTRUCTOR","ALL_CONSTRUCTORS","CONSTR","TYPED_ARRAY","TYPED","VIEW","$map","allocate","LITTLE_ENDIAN","Uint16Array","buffer","FORCED_SET","toOffset","BYTES","C","speciesFromList","fromList","addGetter","internal","_d","$from","step","aLen","mapfn","mapping","iterFn","next","$of","TO_LOCALE_BUG","$toLocaleString","proto","copyWithin","every","predicate","forEach","searchElement","includes","middle","some","comparefn","subarray","begin","$begin","byteOffset","BYTES_PER_ELEMENT","$slice","$set","arrayLike","$iterators","isTAIndex","$getDesc","$setDesc","desc","writable","$TypedArrayPrototype$","wrapper","CLAMPED","GETTER","SETTER","TypedArray","Base","TAC","FORCED","ABV","TypedArrayPrototype","addElement","setter","$offset","$length","byteLength","klass","$len","$nativeIterator","CORRECT_ITER_NAME","$iterator","of","Map","shared","getOrCreateMetadataMap","targetKey","targetMetadata","keyMetadata","MetadataKey","metadataMap","MetadataValue","Keyboard","keyCode","eventKey","shiftKey","ctrlKey","altKey","metaKey","keyboard","Component","dataFields","_dataSources","_parseDataFrom","_dataUsers","skipRangeEvent","rangeChangeDuration","rangeChangeEasing","parsingStepDuration","dataInvalid","rawDataInvalid","dataRangeInvalid","dataItemsInvalid","interpolationDuration","interpolationEasing","sequencedInterpolation","sequencedInterpolationDelay","dataValidationProgress","invalidateData","dataUsers","handleDataUserAdded","dataItems","createDataItem","__WEBPACK_IMPORTED_MODULE_6__DataItem__","dataProvider","handleDataItemValueChange","invalidateDataItems","handleDataItemWorkingValueChange","handleDataItemWorkingLocationChange","handleDataItemCalculatedValueChange","handleDataItemPropertyChange","processDataItem","__WEBPACK_IMPORTED_MODULE_13__utils_Object__","fieldName","hasChildren","__WEBPACK_IMPORTED_MODULE_2__utils_SortedList__","handleDataItemAdded","handleDataItemRemoved","rawDataItem","childDataItem","__WEBPACK_IMPORTED_MODULE_14__utils_Type__","updateDataItem","dataContext_1","validateDataElements","startIndex","endIndex","validateDataElement","addData","removeCount","removeData","dataUser","invalidateDataUsers","invalidateDataRange","validateDataRange","_prevStartIndex","_prevEndIndex","rangeChangeUpdate","appendDataItems","sliceData","_workingStartIndex","_workingEndIndex","removeDataItems","appendDataItem","invalidateRawData","validateRawData","validateData","_startIndex","_endIndex","_data","counter","this_1","dataUserDataItem","validateDataItems","getDataSource","__WEBPACK_IMPORTED_MODULE_4__data_DataSource__","setDataSourceEvents","dataSourceDateFields","dataSourceNumberFields","loadData","load","populateDataSourceFields","targetList","ds","_responsive","__WEBPACK_IMPORTED_MODULE_5__responsive_Responsive__","zoom","_finalStart","_finalEnd","maxZoomFactor","rangeChangeAnimation","zoomToIndexes","indexToPosition","_dataItems","_dataMethods","__WEBPACK_IMPORTED_MODULE_3__utils_Dictionary__","bindDataField","invalidateProcessedData","resetProcessedRange","__WEBPACK_IMPORTED_MODULE_11__utils_Utils__","_exportData","__WEBPACK_IMPORTED_MODULE_3__Type__","EventDispatcher","_listeners","_killed","_iterating","_enabled","__WEBPACK_IMPORTED_MODULE_1__Array__","hasListeners","enable","disable","enableType","disableType","amount","_removeListener","_removeExistingListener","info","_shouldDispatch","_eachListener","killed","__WEBPACK_IMPORTED_MODULE_2__AsyncPending__","_on","off","TargetedEventDispatcher","__WEBPACK_IMPORTED_MODULE_4__lang_en__","Language","__WEBPACK_IMPORTED_MODULE_1__Adapter__","_locale","_defaultLocale","getLocale","locale","translate","prompt","rest","translation","getTranslations","__spread","translateEmpty","translateFunc","translateAll","isDefault","translations","META","setDesc","isExtensible","FREEZE","preventExtensions","setMeta","meta","NEED","fastKey","getWeak","onFreeze","UNSCOPABLES","system","System","__WEBPACK_IMPORTED_MODULE_0__Registry__","measureRate","measureCounter","dummyCounter","measureAt","ghostDiv","ghostSvgContainer","__WEBPACK_IMPORTED_MODULE_2__rendering_SVGContainer__","__WEBPACK_IMPORTED_MODULE_5__rendering_Paper__","__WEBPACK_IMPORTED_MODULE_6__utils_AsyncPending__","reportTime","msg","validateLayouts","validatePositions","skippedSprites","__WEBPACK_IMPORTED_MODULE_3__Component__","__WEBPACK_IMPORTED_MODULE_1__Container__","autoResize","__WEBPACK_IMPORTED_MODULE_4__Options__","VERSION","PLACEHOLDER_Q","PX","STRING","NUMBER","DATE","DURATION","PLACEHOLDER","PLACEHOLDER2","PLACEHOLDER3","PLACEHOLDER4","PLACEHOLDER5","PLACEHOLDER_L","PLACEHOLDER_R","__WEBPACK_IMPORTED_MODULE_6__utils_Type__","LinearGradient","_stops","_rotation","__WEBPACK_IMPORTED_MODULE_3__Registry__","x1","y1","x2","y2","gradientElement","__WEBPACK_IMPORTED_MODULE_4__utils_Iterator__","gradientStop","stop-color","stop-opacity","addColor","__WEBPACK_IMPORTED_MODULE_2__System__","stops","DataItem","__WEBPACK_IMPORTED_MODULE_1__utils_Adapter__","hasProperties","categories","dates","locations","workingLocations","_visible","_ignoreMinMax","_valueAnimations","_locationAnimations","fields","_hideDisposer","setWorkingValue","toValue","animation_1","anim","getDuration","getValue","calculated","getWorkingValue","realName","workingValue","setValue","newDuration","setCalculatedValue","handleInterpolationProgress","valueAnimation","setLocation","event_5","setWorkingLocation","workingLocation","locationAnimation","event_6","setDate","parse","getDate","event_7","setCategory","__WEBPACK_IMPORTED_MODULE_3__utils_Utils__","__WEBPACK_IMPORTED_MODULE_5__utils_Object__","event_8","event_9","depth","_dataContext","addSprite","__WEBPACK_IMPORTED_MODULE_4__Utils__","ColorSet","_list","_currentStep","_currentPass","baseColor","stepOptions","passOptions","minColors","minLightness","maxLightness","shuffle","reuse","generate","curColor","currentColor","hsl","__WEBPACK_IMPORTED_MODULE_2__Colors__","hueStep","hue","mods","lightness","hues","applyStepOptions","pass","__WEBPACK_IMPORTED_MODULE_9__core_utils_Utils__","ValueAxisDataItem","endValue","__WEBPACK_IMPORTED_MODULE_0__Axis__","ValueAxis","_stepDecimalPlaces","_strictMinMax","_baseValue","_adjustedStart","_adjustedEnd","_valueToPosition","_positionToValue","fillRule","axis","axisFill","calculateTotals","axisFieldName","createAxisBreak","__WEBPACK_IMPORTED_MODULE_4__ValueAxisBreak__","fixAxisBreaks","getMinMax","minZoomed","positionToValue","maxZoomed","__WEBPACK_IMPORTED_MODULE_8__core_utils_Type__","zoomToValues","processSeriesDataItems","series","total","__WEBPACK_IMPORTED_MODULE_6__core_utils_Iterator__","__WEBPACK_IMPORTED_MODULE_7__core_utils_Object__","calculateZoom","validateAxisElements","hideUnusedDataItems","differece","adjustDifference","minMaxStep","adjustMinMax","_gridCount","__WEBPACK_IMPORTED_MODULE_5__core_utils_Math__","_step","_minZoomed","_maxZoomed","value_1","logarithmic","differencePower","LOG10E","resetIterators","dataItemsIterator_1","_dataItemsIterator","isInBreak","axisBreak","formatLabel","axisBreaks","renderer_1","renderer","breakSize","endPoint","minGridDistance","breakValue_1","adjustedMin","adjustedMax","adjustedStartValue","adjustedEndValue","adjustedStep","valueToPosition","endPosition","fillEndPosition","positionToPoint","tick","updateTickElement","updateGridElement","updateLabelElement","updateFillElement","isRange","baseValue","anyToPosition","valueToPoint","positionToAngle","anyToPoint","min_1","max_1","difference","_difference","startValue","difference_1","value_2","breakStartPosition","startPosition","breakEndPosition","breakStartValue","breakEndValue","xToValue","pointToPosition","yToValue","__WEBPACK_IMPORTED_MODULE_1__AxisRendererY__","POSITIVE_INFINITY","NEGATIVE_INFINITY","_minDefined","_maxDefined","ignoreMinMax","seriesMin","seriesMax","_minReal","_maxReal","dif","fixMin","fixMax","strictMinMax","_minAdjusted","_maxAdjusted","_minMaxAnimation","_finalMin","_finalMax","handleSelectionExtremesChange","gridCount","strictMode","initialMin","initialMax","power","extra","stepPower","stepDivisor","decCount","registerSeries","__WEBPACK_IMPORTED_MODULE_2__core_utils_Disposer__","handleExtremesChange","selectionMin","selectionMax","allHidden","appeared","seriesSelectionMin","seriesSelectionMax","getX","stackKey","stack","getY","getAnyRangePath","getPositionRangePath","getTooltipText","axisBreakDif","axisBreakGridCount","breakMinMaxStep","getPositionLabel","showTooltipAt","showTooltipAtPosition","__WEBPACK_IMPORTED_MODULE_3__core_Registry__","bitmap","px","$keys","enumBugKeys","dPs","Empty","createDict","iframeDocument","iframe","contentWindow","write","lt","close","Properties","hiddenKeys","getOwnPropertyNames","DESCRIPTORS","SPECIES","Constructor","forbiddenField","BREAK","RETURN","iterable","__WEBPACK_IMPORTED_MODULE_7__core_utils_Utils__","AxisRendererY","opposite","__WEBPACK_IMPORTED_MODULE_4__core_utils_Percent__","labels","setAxis","processRenderer","updateTooltip","bbx","bbw","bbh","inside","positionToCoordinate","coordinateToPosition","axisLength","getWidth","__WEBPACK_IMPORTED_MODULE_6__core_rendering_Path__","positionItem","toggleVisibility","tickLength","updateAxisLine","updateBaseGridElement","getHeight","basePoint","baseGrid","gridContainer","minLabelPosition","maxLabelPosition","updateBreakElement","startLine","endLine","fillShape","createBreakSprites","__WEBPACK_IMPORTED_MODULE_1__core_elements_WavedLine__","wavedRectangle","__WEBPACK_IMPORTED_MODULE_2__core_elements_WavedRectangle__","setWavedSides","coordinate","axisFullLength","inversed","__WEBPACK_IMPORTED_MODULE_0__AxisRenderer__","__WEBPACK_IMPORTED_MODULE_4__Registry__","Button","iconPosition","interfaceColors","__WEBPACK_IMPORTED_MODULE_3__core_utils_InterfaceColorSet__","__WEBPACK_IMPORTED_MODULE_1__Label__","hoverState","downState","icon","currentIcon","_label","__WEBPACK_IMPORTED_MODULE_2__elements_RoundedRectangle__","nextQueue","pendFrame","readQueue","writeQueue","idleQueue","pendingFrame","raf","requestAnimationFrame","frameLoop","namedColors","hexToRgb","rgbaToRgb","pad2","rgb1","rgb2","__WEBPACK_IMPORTED_MODULE_0__Math__","getLightnessStep","rgbToHsl","hslToRgb","q","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","parseInt","parseFloat","hue2rgb","commercialLicense","MouseCursorStyle","grab","grabbing","default","horizontalResize","verticalResize","Line","__WEBPACK_IMPORTED_MODULE_1__utils_Color__","__WEBPACK_IMPORTED_MODULE_4__utils_Type__","delta","__WEBPACK_IMPORTED_MODULE_2__rendering_fills_LinearGradient__","waveLength","waveHeight","adjustWaveLength","__WEBPACK_IMPORTED_MODULE_4__utils_Math__","waveLengthX","waveLengthY","__WEBPACK_IMPORTED_MODULE_1__Path__","halfWaveCount","sign_1","Tension","smooth","_tensionX","_tensionY","last","closed","Basis","_closed","x0","NaN","x3","x4","y0","y3","y4","pushCurve","pushPoint","__WEBPACK_IMPORTED_MODULE_2__utils_Array__","__WEBPACK_IMPORTED_MODULE_18__core_utils_Colors__","SeriesDataItem","bullets","__WEBPACK_IMPORTED_MODULE_3__core_utils_Dictionary__","__WEBPACK_IMPORTED_MODULE_4__core_DataItem__","Series","_showBullets","legendSettings","__WEBPACK_IMPORTED_MODULE_8__Legend__","_tmin","_tmax","_smin","_smax","dataItemsByAxis","skipFocusThreshold","axisRanges","__WEBPACK_IMPORTED_MODULE_2__core_utils_List__","processAxisRange","minBulletDistance","mainContainer","__WEBPACK_IMPORTED_MODULE_5__core_Container__","__WEBPACK_IMPORTED_MODULE_1__core_Sprite__","bulletsContainer","__WEBPACK_IMPORTED_MODULE_6__core_elements_Tooltip__","__WEBPACK_IMPORTED_MODULE_13__core_utils_Ease__","appear","__WEBPACK_IMPORTED_MODULE_16__core_utils_Type__","_chart","positionBullet","bullet","processBullet","bulletsList","bulletsLists","itemsFocusable","processValues","getFirstValue","__WEBPACK_IMPORTED_MODULE_12__core_utils_Iterator__","key_1","working","previous","prevValue","__WEBPACK_IMPORTED_MODULE_15__core_utils_Object__","ksum","zeroItem_1","axisRange","setBounds","bulletTemplate","currentDataItem","isDynamic","readerText","itemReaderText","xField","yField","itemWidth","itemHeight","createMask","rangesContainer","contents","getAxisField","xPosition","yPosition","_bullets","__WEBPACK_IMPORTED_MODULE_7__elements_Bullet__","createLegendMarker","marker","_title","_itemReaderText","__WEBPACK_IMPORTED_MODULE_14__core_utils_Utils__","_legendDataItem","itemContainer","updateLegendValue","legendDataItem","valueLabel","itemValueText","itemLabelText","labelText","valueText","__WEBPACK_IMPORTED_MODULE_9__core_Options__","_heatRules","heatRule","dataField_1","dataField","seriesDataItem_1","property_1","foundSprite","__WEBPACK_IMPORTED_MODULE_17__core_utils_Array__","anySprite","anyChild","foundSprite_1","ruleTarget","propertyField","__WEBPACK_IMPORTED_MODULE_11__core_utils_Color__","heatRules","rule","__WEBPACK_IMPORTED_MODULE_0__core_Component__","__WEBPACK_IMPORTED_MODULE_10__core_Registry__","__WEBPACK_IMPORTED_MODULE_8__utils_Utils__","Tooltip","_boundingRect","_pointTo","fitPointerToBounds","_verticalOrientation","__WEBPACK_IMPORTED_MODULE_4__utils_Color__","pointerLength","pointerBaseWidth","__WEBPACK_IMPORTED_MODULE_2__elements_Label__","drawBackground","pointerOrientation","dropShadow","__WEBPACK_IMPORTED_MODULE_5__rendering_filters_DropShadowFilter__","animationEasing","__WEBPACK_IMPORTED_MODULE_7__utils_Ease__","__WEBPACK_IMPORTED_MODULE_1__PointedRectangle__","textX","textY","boundingRect","textW","textH","documentWidth","offsetWidth","offsetHeight","__WEBPACK_IMPORTED_MODULE_6__utils_Math__","textWidth","textHeight","bgWidth","bgX","bgHeight","bgY","boundX1","boundX2","boundY1","boundY2","pointerX","pointerY","_animation","__WEBPACK_IMPORTED_MODULE_3__utils_Animation__","oldRect","_boundingContainer","updateBounds","boundingContainer","__WEBPACK_IMPORTED_MODULE_1__core_Registry__","Bullet","copyToLegendMarker","__WEBPACK_IMPORTED_MODULE_0__core_Container__","Circle","__WEBPACK_IMPORTED_MODULE_1__utils_Percent__","pixelRadius","__WEBPACK_IMPORTED_MODULE_2__Registry__","Slice","shiftRadius","__WEBPACK_IMPORTED_MODULE_1__Sprite__","stroke-linejoin","stroke-linecap","__WEBPACK_IMPORTED_MODULE_4__rendering_Path__","__WEBPACK_IMPORTED_MODULE_3__utils_Math__","ix","iy","def","stat","spaces","space","ltrim","rtrim","exporter","ALIAS","FORCE","_t","Rectangle","formatter","TextFormatter","__WEBPACK_IMPORTED_MODULE_2__utils_Adapter__","formatted","escape","texts","unescape","__WEBPACK_IMPORTED_MODULE_3__utils_Strings__","wrapHtml","wrapSvg","__WEBPACK_IMPORTED_MODULE_1__rendering_AMElement__","styleSvgToHtml","getHtmlElement","quotedBlocks","chunks2","i2","chunk2","isImage","DateFormatter","_dateFormat","_inputDateFormat","_utc","_firstDayOfWeek","_months","_monthsShort","_weekdays","_weekdaysShort","_outputFormat","__WEBPACK_IMPORTED_MODULE_0__utils_Language__","__WEBPACK_IMPORTED_MODULE_4__utils_Utils__","parseFormat","applyFormat","fullYear","month","minutes","seconds","milliseconds","getTimezoneOffset","getUTCFullYear","getUTCMonth","getUTCDay","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","getHours","getMinutes","getSeconds","getMilliseconds","firstDayOfWeek","tz","tzh","tzm","toISOString","toUTCString","inputDateFormat","parsedIndexes","year3","year2","year1","monthShort","monthLong","weekdayShort","weekdayLong","yearDay","hourBase0","hour12Base0","hourBase1","hour12Base1","minute","second","millisecond","millisecondDigits","am","zone","iso","indexAdjust","getStringList","regex","setFullYear","resolveMonth","setUTCMonth","setMonth","resolveShortMonth","setUTCDate","setUTCHours","setHours","isAm","setUTCMinutes","setMinutes","setUTCSeconds","setSeconds","setUTCMilliseconds","setMilliseconds","setTime","dir","hour","invalidateSprite","__WEBPACK_IMPORTED_MODULE_1__Base__","Polyline","makePath","_distance","__WEBPACK_IMPORTED_MODULE_3__rendering_Path__","_realSegments","deltaAngle","totalDistance","positionA","positionB","positionAB","midPoint","__WEBPACK_IMPORTED_MODULE_12__utils_Type__","Scrollbar","_prevStart","_prevEnd","_isBusy","_skipRangeEvents","updateWhileMoving","__WEBPACK_IMPORTED_MODULE_11__utils_Ease__","__WEBPACK_IMPORTED_MODULE_8__core_utils_InterfaceColorSet__","startGrip","__WEBPACK_IMPORTED_MODULE_1__elements_ResizeButton__","endGrip","updateThumb","thumb","_previousStart","dispatchRangeChange","hideGrips","_orientation","orientation","updateSize","updateExtremes","handleBgHit","makeBusy","spritePoint","thumbX","__WEBPACK_IMPORTED_MODULE_10__utils_Math__","_thumbAnimation","thumbY","makeUnbusy","_thumb","_unbusyTimeout","stopAnimations","_zoomAnimation","makeUnbusyReal","_usingGrip","_previousEnd","__WEBPACK_IMPORTED_MODULE_9__utils_Percent__","getPosition","__start","__end","skipRangeEvents","fixRange","__WEBPACK_IMPORTED_MODULE_4__interaction_Mouse__","updateByOrientation","_startGrip","processGrip","_endGrip","handleGripDrag","__WEBPACK_IMPORTED_MODULE_2__elements_Button__","cursorDownStyle","handleThumbPosition","handleDoubleClick","__WEBPACK_IMPORTED_MODULE_3__interaction_Interaction__","__WEBPACK_IMPORTED_MODULE_7__utils_Keyboard__","newStart","newEnd","innerWidth_2","innerHeight_2","__WEBPACK_IMPORTED_MODULE_5__elements_RoundedRectangle__","_hideGrips","_overDisposer","_outDisposer","__WEBPACK_IMPORTED_MODULE_6__Registry__","cof","propertyIsEnumerable","ARG","T","tryGet","callee","__WEBPACK_IMPORTED_MODULE_5__rendering_filters_DesaturateFilter__","AmChartsLogo","aColor","__WEBPACK_IMPORTED_MODULE_1__core_utils_InterfaceColorSet__","aGradient","__WEBPACK_IMPORTED_MODULE_4__rendering_fills_LinearGradient__","aStroke","__WEBPACK_IMPORTED_MODULE_2__Polyspline__","desaturateFilter","desaturateFilterHover","__WEBPACK_IMPORTED_MODULE_10__core_utils_Math__","AxisRenderer","__WEBPACK_IMPORTED_MODULE_1__core_utils_Disposer__","tooltipLocation","fullWidthTooltip","cellStartLocation","cellEndLocation","__WEBPACK_IMPORTED_MODULE_9__core_utils_Percent__","breakContainer","__WEBPACK_IMPORTED_MODULE_2__AxisLine__","ticks","__WEBPACK_IMPORTED_MODULE_4__Grid__","_axis","chart","plotContainer","invalidateAxisItems","minPosition","maxPosition","updatedStart","updatedEnd","_axisFills","__WEBPACK_IMPORTED_MODULE_7__core_utils_List__","createFill","__WEBPACK_IMPORTED_MODULE_3__AxisFill__","_grid","createGrid","_ticks","createTick","__WEBPACK_IMPORTED_MODULE_6__AxisTick__","_labels","createLabel","__WEBPACK_IMPORTED_MODULE_5__AxisLabel__","axisFills","__WEBPACK_IMPORTED_MODULE_8__core_Registry__","AxisRendererX","bby","SerialChartDataItem","__WEBPACK_IMPORTED_MODULE_0__Chart__","SerialChart","colors","__WEBPACK_IMPORTED_MODULE_5__core_utils_ColorSet__","seriesContainer","chartContainer","__WEBPACK_IMPORTED_MODULE_2__core_Container__","_series","__WEBPACK_IMPORTED_MODULE_1__core_utils_List__","createSeries","processSeries","feedLegend","legend","legendData_1","__WEBPACK_IMPORTED_MODULE_7__core_utils_Iterator__","itemContainers","__WEBPACK_IMPORTED_MODULE_3__series_Series__","__WEBPACK_IMPORTED_MODULE_6__core_Registry__","__WEBPACK_IMPORTED_MODULE_9__utils_Type__","SpriteState","__WEBPACK_IMPORTED_MODULE_3__rendering_filters_Filter__","spriteValue","__WEBPACK_IMPORTED_MODULE_8__utils_Object__","__WEBPACK_IMPORTED_MODULE_5__utils_Percent__","OrderedList","__WEBPACK_IMPORTED_MODULE_0__EventDispatcher__","findClosestIndex","closestValue","closestDifference","closestIndex","__WEBPACK_IMPORTED_MODULE_2__Iterator__","SortedList","_ordering","OrderedListTemplate","SortedListTemplate","AMElement","_isDisposed","_x","_y","__WEBPACK_IMPORTED_MODULE_0__utils_DOM__","removeNode","parentNode","transfromString","svgbbox","removeAttribute","attributeName","attrNS","ns","setAttributeNS","getAttrNS","getAttributeNS","getStyle","removeClass","setClass","childNodes","firstChild","__WEBPACK_IMPORTED_MODULE_7__utils_Object__","Pattern","_elements","patternUnits","__WEBPACK_IMPORTED_MODULE_5__utils_InterfaceColorSet__","backgroundFill","backgroundOpacity","patternElement","__WEBPACK_IMPORTED_MODULE_6__utils_Iterator__","WavedLine","__WEBPACK_IMPORTED_MODULE_2__rendering_Smoothing__","__WEBPACK_IMPORTED_MODULE_0__Line__","AxisItemLocation","AxisDataItem","__WEBPACK_IMPORTED_MODULE_15__core_utils_Array__","_tick","_axisFill","_text","_contents","__WEBPACK_IMPORTED_MODULE_1__core_Container__","_axisBreak","appendChildren","__WEBPACK_IMPORTED_MODULE_2__core_DataItem__","Axis","cursorTooltipEnabled","__WEBPACK_IMPORTED_MODULE_10__core_utils_InterfaceColorSet__","__WEBPACK_IMPORTED_MODULE_4__core_elements_Label__","__WEBPACK_IMPORTED_MODULE_11__core_utils_Iterator__","__WEBPACK_IMPORTED_MODULE_5__core_elements_Tooltip__","updateGridCount","_prevLength","initRenderer","validateAxisRanges","validateBreaks","processBreak","__WEBPACK_IMPORTED_MODULE_8__core_utils_Disposer__","_renderer","_cursorTooltipEnabled","toAxisPosition","getCellStartPosition","getCellEndPosition","__WEBPACK_IMPORTED_MODULE_12__core_utils_Math__","currentItemStartPoint","currentItemEndPoint","__WEBPACK_IMPORTED_MODULE_13__core_utils_Utils__","boundingRectangle","roundPosition","_axisRanges","_axisBreaks","__WEBPACK_IMPORTED_MODULE_6__core_utils_SortedList__","__WEBPACK_IMPORTED_MODULE_14__core_utils_Number__","__WEBPACK_IMPORTED_MODULE_3__AxisBreak__","processSeriesDataItem","postProcessSeriesDataItems","postProcessSeriesDataItem","updateAxisBySeries","dataItemsIterator","getSeriesDataItem","dataChangeUpdate","intersection","firstAxisBreak","previousEndValue_1","createSeriesRange","__WEBPACK_IMPORTED_MODULE_9__core_Registry__","AxisBreak","__WEBPACK_IMPORTED_MODULE_3__core_utils_List__","__WEBPACK_IMPORTED_MODULE_2__core_elements_WavedLine__","__WEBPACK_IMPORTED_MODULE_5__core_utils_Color__","_fillShape","_startLine","_endLine","addBreakSprite","breakTemplate","__WEBPACK_IMPORTED_MODULE_4__core_Registry__","__WEBPACK_IMPORTED_MODULE_7__core_utils_Number__","FlowDiagramNode","invalidateLinks","outgoingDataItems","link","colorMode","fromNode","gradient","stop_1","incomingDataItems","toNode","stop_2","_incomingDataItems","sortBy","_incomingSorted","__WEBPACK_IMPORTED_MODULE_4__core_utils_Iterator__","__WEBPACK_IMPORTED_MODULE_5__core_utils_String__","fromName","__WEBPACK_IMPORTED_MODULE_6__core_utils_Order__","_outgoingDataItems","_outgoingSorted","__WEBPACK_IMPORTED_MODULE_2__core_Registry__","__WEBPACK_IMPORTED_MODULE_11__core_utils_Type__","FlowDiagramLink","__WEBPACK_IMPORTED_MODULE_2__core_rendering_fills_LinearGradient__","__WEBPACK_IMPORTED_MODULE_9__core_utils_InterfaceColorSet__","maskBullets","__WEBPACK_IMPORTED_MODULE_0__core_Sprite__","bulletsMask","positionBullets","__WEBPACK_IMPORTED_MODULE_10__core_utils_Iterator__","locationX","locationY","middleLine","rotationField","__WEBPACK_IMPORTED_MODULE_6__core_utils_List__","__WEBPACK_IMPORTED_MODULE_4__elements_Bullet__","__WEBPACK_IMPORTED_MODULE_8__core_elements_Line__","__WEBPACK_IMPORTED_MODULE_7__core_elements_Polyline__","__WEBPACK_IMPORTED_MODULE_3__core_rendering_Path__","Polyspline","realPoints","__WEBPACK_IMPORTED_MODULE_2__core_utils_Math__","stepCount","prevPoint","__WEBPACK_IMPORTED_MODULE_0__Polyline__","__WEBPACK_IMPORTED_MODULE_2__rendering_Path__","Triangle","IS_INCLUDES","fromIndex","getOwnPropertySymbols","MATCH","isRegExp","SAFE_CLOSING","riter","skipClosing","ignoreCase","multiline","unicode","sticky","SYMBOL","fns","strfn","rxfn","D","forOf","setToStringTag","inheritIfRequired","methods","common","IS_WEAK","ADDER","fixMethod","instance","HASNT_CHAINING","THROWS_ON_PRIMITIVES","ACCEPT_ITERABLES","BUGGY_ZERO","$instance","getConstructor","setStrong","Typed","TypedArrayConstructors","K","__defineSetter__","COLLECTION","A","cb","mapFn","nextItem","ChartDataItem","__WEBPACK_IMPORTED_MODULE_5__core_DataItem__","Chart","titles","__WEBPACK_IMPORTED_MODULE_6__core_utils_Percent__","chartAndLegendContainer","__WEBPACK_IMPORTED_MODULE_3__core_Container__","processTitle","updateReaderTitleReferences","fixLayout","titleIds_1","_legend","setLegend","AxisFill","__WEBPACK_IMPORTED_MODULE_2__core_utils_InterfaceColorSet__","__WEBPACK_IMPORTED_MODULE_3__core_utils_Type__","fillPath","Grid","__WEBPACK_IMPORTED_MODULE_2__core_utils_Color__","AxisLabel","__WEBPACK_IMPORTED_MODULE_0__core_elements_Label__","LegendDataItem","__WEBPACK_IMPORTED_MODULE_1__core_DataItem__","LegendSettings","createMarker","Legend","useDefaultMarker","__WEBPACK_IMPORTED_MODULE_4__core_Container__","toggleDataItem","focusedItem","__WEBPACK_IMPORTED_MODULE_8__core_interaction_Interaction__","__WEBPACK_IMPORTED_MODULE_6__core_utils_Keyboard__","disabledColor","activeState","markers","__WEBPACK_IMPORTED_MODULE_3__core_elements_RoundedRectangle__","__WEBPACK_IMPORTED_MODULE_5__core_elements_Label__","valueLabels","__WEBPACK_IMPORTED_MODULE_7__core_Registry__","__WEBPACK_IMPORTED_MODULE_0__Dictionary__","Cache","_storage","ttl","owner","ownerStorage","touched","cacheItem","expired","cache","svgContainers","htmlElement","__WEBPACK_IMPORTED_MODULE_0__utils_Utils__","__WEBPACK_IMPORTED_MODULE_1__utils_DOM__","_container","__WEBPACK_IMPORTED_MODULE_2__utils_DOM__","Paper","createTextNode","defs","elementName","__WEBPACK_IMPORTED_MODULE_0__AMElement__","groupName","__WEBPACK_IMPORTED_MODULE_1__Group__","implementation","hasFeature","Popup","_IOs","_content","_classPrefix","_defaultStyles","_showCurtain","_draggable","_align","_verticalAlign","_shift","_tempShift","_closable","_cssLoaded","_sized","curtain","positionElement","parentElement","_releasePointers","forceResize","_bbox","toStyle","verticalAlign","setupDragging","createContentElement","getClassNames","wrapperClass","classPrefix","titleClass","contentClass","curtainClass","closeClass","classNames","_disablePointers","defaultStyles","loadDefaultCSS","createCurtainElement","_applyEvents","_left","_right","_top","_bottom","__WEBPACK_IMPORTED_MODULE_0__PopupCSS__","__WEBPACK_IMPORTED_MODULE_4__utils_Keyboard__","showCurtain","__WEBPACK_IMPORTED_MODULE_5__utils_Disposer__","_spriteInteractionsEnabled","Modal","__WEBPACK_IMPORTED_MODULE_0__Popup__","Validatable","_invalid","separators","CSVParser","delimiter","skipRows","skipEmpty","useColumnNames","isCSV","getDelimiterFromData","separators_1","__values","separators_1_1","sep","columns","lineColums","csv","col","CSVToArray","empty","emptyAs","numbers","parsableNumbers","parsableDates","cols","dataPoint","maybeToEmpty","maybeToNumber","maybeToDate","objPattern","arrData","arrMatches","strMatchedDelimiter","strMatchedValue","__WEBPACK_IMPORTED_MODULE_0__DataParser__","DataParser","numberFields","__WEBPACK_IMPORTED_MODULE_1__utils_Utils__","dateFields","dateFormat","__WEBPACK_IMPORTED_MODULE_0__formatters_DateFormatter__","JSONParser","isJSON","__WEBPACK_IMPORTED_MODULE_1__utils_Object__","Tick","WavedRectangle","_twaved","_rwaved","_bwaved","_lwaved","td","rd","bd","ld","__WEBPACK_IMPORTED_MODULE_1__rendering_Smoothing__","__WEBPACK_IMPORTED_MODULE_0__Rectangle__","ValueAxisBreak","__WEBPACK_IMPORTED_MODULE_0__AxisBreak__","LightenFilter","feColorMatrix","__WEBPACK_IMPORTED_MODULE_0__Filter__","__WEBPACK_IMPORTED_MODULE_14__core_utils_Order__","FlowDiagramDataItem","toName","__WEBPACK_IMPORTED_MODULE_9__core_utils_Color__","_link","links","FlowDiagram","__WEBPACK_IMPORTED_MODULE_8__core_utils_ColorSet__","nodePadding","minNodeSize","linksContainer","nodesContainer","nodes","sortNodes","__WEBPACK_IMPORTED_MODULE_7__core_rendering_fills_LinearGradientModifier__","opacities","__WEBPACK_IMPORTED_MODULE_12__core_utils_Type__","strNode","getNodeValue","_sorted","__WEBPACK_IMPORTED_MODULE_13__core_utils_Number__","fromSum","toSum","__WEBPACK_IMPORTED_MODULE_11__core_utils_Math__","changeSorting","_nodes","__WEBPACK_IMPORTED_MODULE_2__core_utils_Dictionary__","createNode","__WEBPACK_IMPORTED_MODULE_5__elements_FlowDiagramNode__","_links","createLink","__WEBPACK_IMPORTED_MODULE_6__elements_FlowDiagramLink__","LinearGradientModifier","__WEBPACK_IMPORTED_MODULE_1__LinearGradient__","lightnesses","brightnesses","offsets","_lightnesses","_brightnesses","_opacities","_offsets","brightness","__WEBPACK_IMPORTED_MODULE_0__ColorModifier__","ResizeButton","__WEBPACK_IMPORTED_MODULE_0__Button__","DesaturateFilter","is","wksExt","$Symbol","documentElement","check","setPrototypeOf","buggy","__proto__","sign","$expm1","expm1","TO_STRING","pos","charCodeAt","$iterCreate","BUGGY","returnThis","DEFAULT","IS_SET","IteratorPrototype","getMethod","kind","DEF_VALUES","VALUES_BUG","$native","$default","$entries","$anyNative","descriptor","searchString","re","$defineProperty","getIteratorMethod","original","endPos","addToUnscopables","iterated","_k","Arguments","defer","channel","port","invoke","cel","process","setTask","setImmediate","clearTask","clearImmediate","MessageChannel","Dispatch","queue","run","nextTick","port2","port1","onmessage","postMessage","importScripts","macrotask","Observer","MutationObserver","WebKitMutationObserver","isNode","notify","flush","domain","exit","enter","navigator","standalone","then","toggle","characterData","task","$$resolve","$$reject","PROTOTYPE","WRONG_INDEX","BaseBuffer","LN2","$BUFFER","$LENGTH","$OFFSET","packIEEE754","mLen","nBytes","eLen","eMax","eBias","rt","unpackIEEE754","nBits","unpackI32","bytes","packI8","packI16","packI32","packF64","packF32","view","isLittleEndian","intIndex","pack","conversion","ArrayBufferProto","$setInt8","setInt8","getInt8","setUint8","bufferLength","getUint8","getInt16","getUint16","getInt32","getUint32","getFloat32","getFloat64","setInt16","setUint16","setInt32","setUint32","setFloat32","setFloat64","userAgent","Group","populateChildren","__WEBPACK_IMPORTED_MODULE_0__utils_Color__","SVGDefaults","SpriteEventDispatcher","_interactionEvents","__WEBPACK_IMPORTED_MODULE_0__utils_Dictionary__","_dispatchSpriteEvent","_dispatchSpritePointEvent","svgPoint","_addInteractionObjectEvent","__WEBPACK_IMPORTED_MODULE_1__utils_EventDispatcher__","RadialGradient","fx","fy","_cx","_cy","_fx","_fy","InteractionObject","__WEBPACK_IMPORTED_MODULE_0__InteractionObjectEvents__","_clickable","_hoverable","_trackable","_swipeable","_resizable","_rotatable","_wheelable","_inert","_isHover","_isDown","_isFocused","defaultStyle","__WEBPACK_IMPORTED_MODULE_4__Interaction__","_overPointers","_downPointers","_focusable","_originalPosition","_originalScale","_originalAngle","InteractionObjectEventDispatcher","_domEvents","_addDOMEvent","callback_1","__WEBPACK_IMPORTED_MODULE_1__utils_Disposer__","_dispatchKeyboardEvent","InteractionKeyboardObject","_startedOn","__WEBPACK_IMPORTED_MODULE_0__Interaction__","__WEBPACK_IMPORTED_MODULE_1__utils_Animation__","ms","accelleratedMs","accellerationFactor","Inertia","__WEBPACK_IMPORTED_MODULE_1__Interaction__","NumberFormatter","_negativeBase","_numberFormat","_bigNumberPrefixes","suffix","_smallNumberPrefixes","_bytePrefixes","__WEBPACK_IMPORTED_MODULE_5__utils_Utils__","details","zero","thousands","active","interval","partFormat","mod","modSpacing","prefix","a_1","applyPrefix","a_2","toExponential","ints","ip","intsr","decs","prefixes","newvalue","outputFormat","DurationFormatter","_durationFormat","_baseUnit","_unitValues","M","_unitAliases","Y","H","k","baseUnit","absolute","dirs","tstamp","toTimeStamp","unit","__WEBPACK_IMPORTED_MODULE_15__utils_Utils__","Export","_formatOptions","_removedObjects","_filePrefix","timeoutDelay","quality","fontSize","imageFormat","addURL","indent","useLocale","addColumnNames","printMethod","formatOptions","__WEBPACK_IMPORTED_MODULE_12__utils_Object__","_menu","menu","branch","unsupported","typeSupported","export","obj","__WEBPACK_IMPORTED_MODULE_10__Options__","supported","downloadSupport","print","_getFunction","getImage","getSVG","getPDF","getExcel","getCSV","getJSON","getPrint","showPreloader","hideTimeout","_timeoutTimeout","showTimeout","func","hidePreloader","download","filePrefix","backgroundColor","findBackgroundColor","simplifiedImageExport","font","findFont","findFontSize","canvas","getContext","fillStyle","fillRect","DOMURL","getDOMURL","all","imagesToDataURI","prepForeignObjects","fontStyle","getFontDataURIs","normalizeSVG","serializeElement","Blob","createObjectURL","loadNewImage","img","drawImage","revokeObjectURL","uri","toDataURL","getContentType","restoreRemovedObjects","getImageAdvanced","fabric","fpromise","StaticCanvas","setDimensions","setBackgroundColor","success","loadSVGFromString","objects","fabricOptions","util","groupSVGElements","renderAll","multiplier","enableRetina","prepFabricElement","crossOrigin","images","querySelectorAll","promises","image","svgToDataURI","imageToDataURI","temporarilyRemoveObject","keepTainted","__WEBPACK_IMPORTED_MODULE_13__utils_Net__","btoa","response","placeholder","__WEBPACK_IMPORTED_MODULE_9__Registry__","currentHref","Image","onabort","URL","webkitURL","encodeURIComponent","dimParams","styleParams","normalizeFonts","fonts","items","XMLSerializer","serializeToString","pdfmake","defaultMargins","doc","pageSize","pageOrientation","pageMargins","bold","fit","getPageSizeFit","createPdf","getDataUrl","margins","newMargins","fitSize","4A0","2A0","A0","A1","A2","A3","A4","A5","A6","A7","A8","A9","A10","B0","B1","B2","B3","B4","B5","B6","B7","B8","B9","B10","C0","C1","C2","C3","C4","C5","C6","C7","C8","C9","C10","RA0","RA1","RA2","RA3","RA4","SRA0","SRA1","SRA2","SRA3","SRA4","EXECUTIVE","FOLIO","LEGAL","LETTER","TABLOID","xlsx","XLSX","wbOptions","bookType","bookSST","sheetName","normalizeExcelSheetName","wb","SheetNames","Sheets","getExcelRow","utils","aoa_to_sheet","convertDateValue","getCSVRow","forceQuotes","search","json","isDateField","useTimestamps","fileName","linkDownloadSupport","blobDownloadSupport","click","msSaveBlob","contentType","decodeURIComponent","decoded","atob","chars","charCode","blob","legacyIE","idoc","contentDocument","execCommand","msSaveOrOpenBlob","printViaCSS","printViaIframe","scroll","scrollTop","__WEBPACK_IMPORTED_MODULE_11__utils_DOM__","clipPath","originalTitle","MSStream","currentStyle","getComputedStyle","defaultView","__WEBPACK_IMPORTED_MODULE_8__utils_Color__","parent_3","parent_4","styleSheets","rules","CSSImportRule","css","urls","urlContent","dataURI","_dataFields","generateDataFields","__WEBPACK_IMPORTED_MODULE_5__formatters_DateFormatter__","_dateFields","_backgroundColor","__WEBPACK_IMPORTED_MODULE_6__utils_Language__","__WEBPACK_IMPORTED_MODULE_2__elements_Modal__","_fabric","_pdfmake","vfs_fonts","vfs","pdfMake","_xlsx","setFormatOptions","getFormatOptions","__WEBPACK_IMPORTED_MODULE_0__ExportMenu__","__WEBPACK_IMPORTED_MODULE_7__utils_Validatable__","ExportMenu","closeDelay","__WEBPACK_IMPORTED_MODULE_4__utils_Disposer__","_menuTag","_itemTag","_labelTag","_ignoreNextClose","_items","getMenuItemClass","createMenuElement","drawBranch","menuElement","moveSelection","level","ascendants","createItemElement","createLabelElement","readerLabel","getReaderLabel","typeClickable","hasSubMenu","selectBranch","setFocus","delayUnselectBranch","local_level","submenu","menuTag","itemTag","labelTag","__WEBPACK_IMPORTED_MODULE_0__ExportCSS__","__WEBPACK_IMPORTED_MODULE_5__utils_Language__","_currentSelection","setBlur","__WEBPACK_IMPORTED_MODULE_10__utils_DOM__","closeTimeout","__WEBPACK_IMPORTED_MODULE_9__utils_Iterator__","ascendant","unselectBranch","simple","newSelection","getPrevSibling","getNextSibling","getParentItem","getSiblings","siblings","__WEBPACK_IMPORTED_MODULE_6__utils_Validatable__","xhr","XMLHttpRequest","responseText","getResponseHeader","requestHeaders","header","setRequestHeader","send","DataSource","parser","_requestOptions","__WEBPACK_IMPORTED_MODULE_0__DataLoader__","getParserByType","processData","getParserByData","lastLoad","reloadFrequency","_reloadTimeout","disableCache","timestampUrl","_parser","__WEBPACK_IMPORTED_MODULE_1__JSONParser__","_reloadFrequency","_incremental","__WEBPACK_IMPORTED_MODULE_6__formatters_DateFormatter__","__WEBPACK_IMPORTED_MODULE_2__CSVParser__","__WEBPACK_IMPORTED_MODULE_3__Base__","__WEBPACK_IMPORTED_MODULE_3__utils_Net__","DataLoader","sources","requestOptions","source_1","code","catch","__WEBPACK_IMPORTED_MODULE_0__CSVParser__","dataLoader","Responsive","_rules","_defaultRules","_appliedRules","_useDefault","_noStates","checkRules","_component","_sizeEventDisposer","enabled","applyRules","useDefault","defaultRules","isApplied","ruleId","loadDefaultRules","allRules","rulesChanged","relevant","newTarget","defaultStateApplied","getState","stateId","tmpId","__WEBPACK_IMPORTED_MODULE_5__utils_Array__","AxisLine","AxisTick","__WEBPACK_IMPORTED_MODULE_0__elements_Tick__","PointedRectangle","cr","stemX","stemY","bwh","lineT","lineR","lineB","lineL","d2","__WEBPACK_IMPORTED_MODULE_0__PointedShape__","PointedShape","DropShadowFilter","feGaussianBlur","in","feOffset","feFlood","feComposite","in2","operator","feMerge","__WEBPACK_IMPORTED_MODULE_1__utils_InterfaceColorSet__","flood-color","flood-opacity","stdDeviation","__WEBPACK_IMPORTED_MODULE_0__utils_Type__","timeUnitDurations","checkChange","dateOne","dateTwo","nextUnit","getNextUnit","firstDateOfWeek","weekDay","__WEBPACK_IMPORTED_MODULE_5__core_utils_Type__","ZoomOutButton","__WEBPACK_IMPORTED_MODULE_5__core_rendering_Smoothing__","WavedCircle","getPoints","pixelInnerRadius","circleLength","halfWaveHeight","halfWaveLength","angle1","angle2","__WEBPACK_IMPORTED_MODULE_0__Circle__","__WEBPACK_IMPORTED_MODULE_5__rendering_Path__","Trapezoid","topSide","__WEBPACK_IMPORTED_MODULE_1__core_utils_Percent__","bottomSide","leftSide","rightSide","ts","bs","ls","rs","mt","mr","mb","ml","horizontalNeck","hn","verticalNeck","vn","Slice3D","edge","__WEBPACK_IMPORTED_MODULE_2__Container__","lightenFilter","__WEBPACK_IMPORTED_MODULE_3__rendering_filters_LightenFilter__","sideA","lightenFilterA","sideB","lightenFilterB","__WEBPACK_IMPORTED_MODULE_0__Slice__","ah","bh","ch","dh","pathA","pathB","ColorModifier","__WEBPACK_IMPORTED_MODULE_7__core_utils_Type__","SankeyDiagramDataItem","__WEBPACK_IMPORTED_MODULE_0__FlowDiagram__","SankeyDiagram","valueHeight","nodeAlign","_levelCount","__WEBPACK_IMPORTED_MODULE_5__core_utils_Iterator__","getNodeLevel","__WEBPACK_IMPORTED_MODULE_6__core_utils_Math__","levels","calculateValueHeight","maxSumLevel","_levelSum","_levelNodesCount","maxSum","maxSumLevelNodeCount","nextCoordinate","nodesInLevel","levelCoordinate","nodeHeight","nameLabel","__WEBPACK_IMPORTED_MODULE_3__elements_SankeyNode__","__WEBPACK_IMPORTED_MODULE_4__elements_SankeyLink__","__WEBPACK_IMPORTED_MODULE_3__core_utils_Iterator__","SankeyNode","nextInCoord","nextOutCoord","__WEBPACK_IMPORTED_MODULE_1__LabelBullet__","orientation_1","endX","endY","linkWidth","startX","startY","__WEBPACK_IMPORTED_MODULE_0__FlowDiagramNode__","LabelBullet","__WEBPACK_IMPORTED_MODULE_1__core_elements_Label__","__WEBPACK_IMPORTED_MODULE_3__core_utils_Color__","__WEBPACK_IMPORTED_MODULE_0__Bullet__","__WEBPACK_IMPORTED_MODULE_7__core_rendering_Path__","SankeyLink","controlPointDistance","__WEBPACK_IMPORTED_MODULE_2__core_elements_Polyspline__","xt0","yt0","xt1","yt1","xb0","__WEBPACK_IMPORTED_MODULE_4__core_utils_Math__","xb1","yb0","yb1","xm0","xm1","ym0","ym1","cpd","kxt0","kyt0","kxt1","kyt1","kxm0","kym0","kxm1","kym1","kxb0","kyb0","kxb1","kyb1","__WEBPACK_IMPORTED_MODULE_6__core_rendering_Smoothing__","__WEBPACK_IMPORTED_MODULE_0__FlowDiagramLink__","Rectangle3D","sideBack","lightenFilterBack","__WEBPACK_IMPORTED_MODULE_2__rendering_filters_LightenFilter__","sideBottom","lightenFilterBottom","sideLeft","lightenFilterLeft","sideRight","lightenFilterRight","sideTop","lightenFilterTop","sideFront","__WEBPACK_IMPORTED_MODULE_12__core_elements_RoundedRectangle__","HeatLegend","markerContainer","markerCount","__WEBPACK_IMPORTED_MODULE_4__core_utils_List__","getMinFromRules","minValue_1","__WEBPACK_IMPORTED_MODULE_9__core_utils_Iterator__","getMaxFromRules","maxValue_1","minColor","maxColor","__WEBPACK_IMPORTED_MODULE_10__core_utils_Type__","seriesFill","minOpacity","maxOpacity","minStrokeOpacity","maxStrokeOpacity","minStroke","maxStroke","__WEBPACK_IMPORTED_MODULE_5__core_utils_Percent__","__WEBPACK_IMPORTED_MODULE_1__core_rendering_fills_LinearGradient__","strokeGradient","__WEBPACK_IMPORTED_MODULE_11__core_utils_Colors__","color_1","opacity_1","valueAxis","__WEBPACK_IMPORTED_MODULE_7__charts_axes_AxisRendererX__","__WEBPACK_IMPORTED_MODULE_8__charts_axes_AxisRendererY__","_valueAxis","__WEBPACK_IMPORTED_MODULE_6__charts_axes_ValueAxis__","dataFieldDefined","updateMinMax","__WEBPACK_IMPORTED_MODULE_6__rendering_Path__","Cone","topRadius","__WEBPACK_IMPORTED_MODULE_2__elements_Ellipse__","bodyFillModifier","__WEBPACK_IMPORTED_MODULE_3__rendering_fills_LinearGradientModifier__","radiusBase","Ellipse","rx","ry","TextLink","__WEBPACK_IMPORTED_MODULE_1__core_interaction_Mouse__","names","getKeys","defineProperties","windowNames","getWindowNames","gOPS","$assign","getSymbols","isEnum","factories","partArgs","bound","construct","un","$parseInt","$trim","ws","radix","$parseFloat","isFinite","log1p","EPSILON","EPSILON32","MAX32","MIN32","fround","$abs","$sign","ret","memo","isRight","inc","flags","newPromiseCapability","promiseCapability","strong","getEntry","$iterDefine","SIZE","_f","_l","delete","InternalMap","weak","uncaughtFrozenStore","ufstore","tmp","$WeakMap","freeze","$has","UncaughtFrozenStore","findUncaughtFrozen","Reflect","ownKeys","IS_CONCAT_SPREADABLE","flattenIntoArray","sourceLen","mapper","thisArg","spreadable","targetIndex","sourceIndex","repeat","maxLength","fillString","stringLength","fillStr","intMaxLength","fillLen","stringFiller","isEntries","inLow","inHigh","outLow","outHigh","Polyarc","controlPointPosition","distanceAB","cpDistance","controlPoint1","controlPoint2","i_1","Polygon","_currentPoints","surface","hole","_morpher","__WEBPACK_IMPORTED_MODULE_1__utils_Morpher__","Morpher","morphable","_bboxes","morphDuration","morphEasing","__WEBPACK_IMPORTED_MODULE_3__utils_Ease__","morphToSingle","scaleRatio","morphToPolygon","toPoints","currentPoints","sortPoints","_morphFromPointsReal","_morphToPointsReal","normalizePoints","pointsA","pointsB","surfaceA","holeA","bboxA","middleX","middleY","addPoints","splitAt","newDistance","partA","partB","bbox1","bbox2","bboxes","morphToCircle","commonBBox","fromPoints","realRadius","realAngle","pointOnCircle","mustHaveCount","addToSegmentCount","newPoints","point0","extraPoint","lastPoint","morphToRectangle","realWidth","realHeight","i_2","i_3","_morphProgress","currentArea","surfaceFrom","holeFrom","surfaceTo","holeTo","currentSurface","i_4","currentPoint","currentHole","i_5","morphBack","Preloader","sliceContainer","backgroundSlice","__WEBPACK_IMPORTED_MODULE_2__Slice__","progressSlice","__WEBPACK_IMPORTED_MODULE_3__Label__","_started","FocusFilter","feMorphology","feBlend","mode","outline","classError","__WEBPACK_IMPORTED_MODULE_12__Type__","finalType","__WEBPACK_IMPORTED_MODULE_11__Array__","__WEBPACK_IMPORTED_MODULE_13__DOM__","svgDiv","__WEBPACK_IMPORTED_MODULE_4__rendering_SVGContainer__","__WEBPACK_IMPORTED_MODULE_3__rendering_Paper__","__WEBPACK_IMPORTED_MODULE_9__Percent__","contentContainer","__WEBPACK_IMPORTED_MODULE_5__rendering_filters_FocusFilter__","tooltipContainer_1","__WEBPACK_IMPORTED_MODULE_8__elements_Tooltip__","__WEBPACK_IMPORTED_MODULE_6__elements_Preloader__","__WEBPACK_IMPORTED_MODULE_7__elements_AmChartsLogo__","__WEBPACK_IMPORTED_MODULE_0__System__","z-index","background-color","max-width","max-height","background-size","cursor","_decimalSeparator","_thousandSeparator","_date_millisecond","_date_second","_date_minute","_date_hour","_date_day","_date_week","_date_month","_date_year","_duration_millisecond","_duration_second","_duration_minute","_duration_hour","_duration_day","_duration_week","_duration_month","_duration_year","_era_ad","_era_bc","AM","PM","A.M.","P.M.","January","February","March","April","May","June","July","August","September","October","November","December","Jan","Feb","Mar","Apr","May(short)","Jun","Jul","Aug","Sep","Oct","Nov","Dec","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sun","Mon","Tue","Wed","Thu","Fri","Sat","_dateOrd","Zoom Out","Play","Stop","Click, tap or press ENTER to toggle","Loading","Home","Serial chart","X/Y chart","Pie chart","Gauge chart","Radar chart","Sankey diagram","Chord diagram","Flow diagram","TreeMap chart","Candlestick Series","Column Series","Line Series","Pie Slice Series","X/Y Series","Press ENTER to zoom in","Press ENTER to zoom out","Use arrow keys to zoom in and out","Use plus and minus keys on your keyboard to zoom in and out","Data","Print","Click, tap or press ENTER to open","Click, tap or press ENTER to print.","Click, tap or press ENTER to export as %1.","To save the image, right-click this link and choose \"Save picture as...\"","To save the image, right-click thumbnail on the left and choose \"Save picture as...\"","(Press ESC to close this message)","Image Export Complete","Export operation took longer than expected. Something might have gone wrong.","Saved from","PNG","JPG","GIF","SVG","PDF","CSV","Use TAB to select grip buttons or left and right arrows to change selection","Use left and right arrows to move selection","Use left and right arrows to move left selection","Use left and right arrows to move right selection","Use TAB select grip buttons or up and down arrows to change selection","Use up and down arrows to move selection","Use up and down arrows to move lower selection","Use up and down arrows to move upper selection","From %1 to %2","From %1","To %1","No parser available for file: %1","Error parsing file: %1","Unable to load file: %1","Invalid date","__WEBPACK_IMPORTED_MODULE_2__utils_Dictionary__","newPrefix","colorSet","text-align","border-radius","margin-right","margin-left","list-style","$fails","wksDefine","enumKeys","gOPNExt","$JSON","_stringify","HIDDEN","TO_PRIMITIVE","SymbolRegistry","AllSymbols","OPSymbols","USE_NATIVE","QObject","findChild","setSymbolDesc","protoDesc","sym","isSymbol","$defineProperties","$propertyIsEnumerable","E","$getOwnPropertyDescriptor","$getOwnPropertyNames","$getOwnPropertySymbols","IS_OP","es6Symbols","wellKnownSymbols","for","keyFor","useSetter","useSimple","replacer","$replacer","symbols","$getPrototypeOf","$freeze","$seal","$preventExtensions","$isFrozen","$isSealed","$isExtensible","FProto","nameRE","HAS_INSTANCE","FunctionProto","$Number","BROKEN_COF","TRIM","argument","third","maxCode","aNumberValue","$toFixed","toFixed","ERROR","multiply","c2","divide","numToString","acc","fractionDigits","z","$toPrecision","toPrecision","_isFinite","isInteger","isSafeInteger","MAX_SAFE_INTEGER","MIN_SAFE_INTEGER","$acosh","acosh","MAX_VALUE","$asinh","asinh","$atanh","atanh","cbrt","clz32","LOG2E","cosh","hypot","value1","value2","larg","$imul","imul","xn","yn","xl","yl","log10","log2","sinh","tanh","trunc","fromCharCode","$fromCodePoint","fromCodePoint","raw","callSite","tpl","$at","codePointAt","$endsWith","endsWith","$startsWith","startsWith","size","toJSON","pv","$toISOString","lz","DateProto","hint","createProperty","upTo","cloned","$sort","$forEach","STRICT","$filter","$some","$every","$reduce","$indexOf","NEGATIVE_ZERO","$find","forced","$flags","$RegExp","re1","re2","CORRECT_NEW","tiRE","piRE","fiU","proxy","define","$match","regexp","REPLACE","$replace","searchValue","replaceValue","SEARCH","$search","SPLIT","$split","_split","$push","NPCG","limit","separator2","lastIndex","lastLength","lastLastIndex","splitLimit","separatorCopy","Internal","newGenericPromiseCapability","OwnPromiseCapability","Wrapper","microtask","newPromiseCapabilityModule","perform","promiseResolve","$Promise","FakePromise","PromiseRejectionEvent","isThenable","isReject","_n","chain","_v","ok","_s","reaction","exited","handler","fail","_h","onHandleUnhandled","onUnhandled","unhandled","isUnhandled","emit","onunhandledrejection","reason","onrejectionhandled","$reject","_w","$resolve","executor","onFulfilled","onRejected","capability","remaining","$index","alreadyCalled","race","$isView","isView","final","viewS","viewT","rApply","fApply","thisArgument","argumentsList","rConstruct","NEW_TARGET_BUG","ARGS_BUG","Target","$args","propertyKey","deleteProperty","Enumerate","enumerate","receiver","getProto","V","existingDescriptor","ownDesc","setProto","$includes","arraySpeciesCreate","flatMap","flatten","depthArg","at","$pad","padStart","padEnd","getFlags","RegExpProto","$RegExpStringIterator","_r","matchAll","getOwnPropertyDescriptors","getDesc","$values","__defineGetter__","__lookupGetter__","__lookupSetter__","isError","clamp","lower","upper","DEG_PER_RAD","RAD_PER_DEG","degrees","radians","fscale","iaddh","$x0","$y0","isubh","imulh","u","$u","$v","u0","v0","u1","v1","umulh","signbit","finally","onFinally","try","metadata","toMetaKey","ordinaryDefineOwnMetadata","defineMetadata","metadataKey","metadataValue","deleteMetadata","ordinaryHasOwnMetadata","ordinaryGetOwnMetadata","ordinaryGetMetadata","getMetadata","Set","ordinaryOwnMetadataKeys","ordinaryMetadataKeys","oKeys","pKeys","getMetadataKeys","getOwnMetadata","getOwnMetadataKeys","ordinaryHasMetadata","hasMetadata","hasOwnMetadata","$metadata","asap","OBSERVABLE","cleanupSubscription","subscription","cleanup","subscriptionClosed","_o","closeSubscription","Subscription","observer","subscriber","SubscriptionObserver","unsubscribe","complete","$Observable","subscribe","observable","Observable","MSIE","boundArgs","setInterval","$task","TO_STRING_TAG","ArrayValues","DOMIterables","CSSRuleList","CSSStyleDeclaration","CSSValueList","ClientRectList","DOMRectList","DOMStringList","DOMTokenList","DataTransferItemList","FileList","HTMLAllCollection","HTMLCollection","HTMLFormElement","HTMLSelectElement","MediaList","MimeTypeArray","NamedNodeMap","NodeList","PaintRequestList","Plugin","PluginArray","SVGLengthList","SVGNumberList","SVGPathSegList","SVGPointList","SVGStringList","SVGTransformList","SourceBufferList","StyleSheetList","TextTrackCueList","TextTrackList","TouchList","collections","explicit","Collection","am4core","__WEBPACK_IMPORTED_MODULE_0__es2015_core__","currentScript","scripts","getCurrentScript","__WEBPACK_IMPORTED_MODULE_112__internal_core_utils_Instance__","Slider","__WEBPACK_IMPORTED_MODULE_0__core_elements_Scrollbar__","PlayButton","playIcon","__WEBPACK_IMPORTED_MODULE_4__Triangle__","stopIcon","__WEBPACK_IMPORTED_MODULE_1__RoundedRectangle__","LinePattern","_line","__WEBPACK_IMPORTED_MODULE_0__Pattern__","RectPattern","rectHeight","rectWidth","_rect","ColorizeFilter","intensity","applyFilter","ii","BlurFilter","jsdom","xmldom"],"mappings":"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AAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EA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","file":"core.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tvar parentJsonpFunction = window[\"webpackJsonp\"];\n \twindow[\"webpackJsonp\"] = function webpackJsonpCallback(chunkIds, moreModules, executeModules) {\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [], result;\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(chunkIds, moreModules, executeModules);\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n \t\tif(executeModules) {\n \t\t\tfor(i=0; i < executeModules.length; i++) {\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = executeModules[i]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t};\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// objects to store loaded and loading chunks\n \tvar installedChunks = {\n \t\t26: 0\n \t};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData === 0) {\n \t\t\treturn new Promise(function(resolve) { resolve(); });\n \t\t}\n\n \t\t// a Promise means \"currently loading\".\n \t\tif(installedChunkData) {\n \t\t\treturn installedChunkData[2];\n \t\t}\n\n \t\t// setup Promise in chunk cache\n \t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t});\n \t\tinstalledChunkData[2] = promise;\n\n \t\t// start chunk loading\n \t\tvar head = document.getElementsByTagName('head')[0];\n \t\tvar script = document.createElement('script');\n \t\tscript.type = \"text/javascript\";\n \t\tscript.charset = 'utf-8';\n \t\tscript.async = true;\n \t\tscript.timeout = 120000;\n\n \t\tif (__webpack_require__.nc) {\n \t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t}\n \t\tscript.src = __webpack_require__.p + \"deps/\" + ({\"0\":\"pdfmake\",\"1\":\"xlsx\",\"2\":\"fabric\",\"3\":\"responsivedefaults\"}[chunkId]||chunkId) + \".js\";\n \t\tvar timeout = setTimeout(onScriptComplete, 120000);\n \t\tscript.onerror = script.onload = onScriptComplete;\n \t\tfunction onScriptComplete() {\n \t\t\t// avoid mem leaks in IE.\n \t\t\tscript.onerror = script.onload = null;\n \t\t\tclearTimeout(timeout);\n \t\t\tvar chunk = installedChunks[chunkId];\n \t\t\tif(chunk !== 0) {\n \t\t\t\tif(chunk) {\n \t\t\t\t\tchunk[1](new Error('Loading chunk ' + chunkId + ' failed.'));\n \t\t\t\t}\n \t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t}\n \t\t};\n \t\thead.appendChild(script);\n\n \t\treturn promise;\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 326);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 142026bf8e2640d692d9","/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { ITheme } from \"../themes/ITheme\";\r\nimport { EventDispatcher, AMEvent } from \"./utils/EventDispatcher\";\r\nimport { Dictionary } from \"./utils/Dictionary\";\r\nimport { Sprite } from \"./Sprite\";\r\nimport { Container } from \"./Container\";\r\nimport { Component } from \"./Component\";\r\nimport { cache } from \"./utils/Cache\";\r\nimport * as $type from \"./utils/Type\";\r\n\r\n\r\n/**\r\n * Define events available for [[Registry]]\r\n */\r\nexport interface IRegistryEvents {\r\n\r\n\t/**\r\n\t * Invoked when update cycle starts. Before invalid elements are re-validated.\r\n\t */\r\n\tenterframe: {};\r\n\r\n\t/**\r\n\t * Invoked when udpate cycle ends. After invalid elements have been\r\n\t * re-validated.\r\n\t */\r\n\texitframe: {};\r\n\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Registry is used to store miscellaneous system-wide information, like ids,\r\n * maps, themes, and registered classes.\r\n *\r\n * @ignore Exclude from docs\r\n */\r\nexport class Registry {\r\n\r\n\t/**\r\n\t * Unique ID of the object.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tpublic uid: string;\r\n\r\n\t/**\r\n\t * Event dispacther.\r\n\t *\r\n\t * @type {EventDispatcher}\r\n\t */\r\n\tpublic events: EventDispatcher<AMEvent<Registry, IRegistryEvents>> = new EventDispatcher();\r\n\r\n\t/**\r\n\t * Holds a universal mapping collection, so that elements and their children\r\n\t * can create and look up all kinds of relations between id and object.\r\n\t *\r\n\t * @type {Dictionary<string, any>}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tprotected _map: $type.Optional<Dictionary<string, any>>;\r\n\r\n\t/**\r\n\t * All currently applied themes. All new chart instances created will\r\n\t * automatically inherit and retain System's themes.\r\n\t *\r\n\t * @type {ITheme}\r\n\t */\r\n\tpublic themes: ITheme[] = [];\r\n\r\n\t/**\r\n\t * List of all loaded available themes.\r\n\t *\r\n\t * Whenever a theme loads, it registers itself in System's `loadedThemes`\r\n\t * collection.\r\n\t */\r\n\tpublic loadedThemes: { [index: string]: ITheme } = {};\r\n\r\n\t/**\r\n\t * An indeternal counter used to generate unique IDs.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {number}\r\n\t */\r\n\tprotected _uidCount: number = 0;\r\n\r\n\t/**\r\n\t * Keeps register of class references so that they can be instnatiated using\r\n\t * string key.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic registeredClasses: { [index: string]: any } = {};\r\n\r\n\t/**\r\n\t * Number of times per second charts will be updated.\r\n\t *\r\n\t * This means that each time an element is invalidated it will wait for the\r\n\t * next cycle to be re-validated, and possibly redrawn.\r\n\t *\r\n\t * This happens every `1000 / frameRate` milliseconds.\r\n\t *\r\n\t * Reducing this number may reduce the load on the CPU, but might slightly\r\n\t * reduce smoothness of the animations.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tpublic frameRate: number = 60;\r\n\r\n\t\t/**\r\n\t * A list of invalid(ated) [[Sprite]] objects that need to be re-validated\r\n\t * during next cycle.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Array<Sprite>}\r\n\t */\r\n\tpublic invalidSprites: Array<Sprite> = [];\r\n\r\n\t/**\r\n\t * Components are added to this list when their data provider changes to\r\n\t * a new one or data is added/removed from their data provider.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Array<Component>}\r\n\t */\r\n\tpublic invalidDatas: Array<Component> = [];\r\n\r\n\t/**\r\n\t * Components are added to this list when values of their raw data change.\r\n\t * Used when we want a smooth animation from one set of values to another.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Array<Component>}\r\n\t */\r\n\tpublic invalidRawDatas: Array<Component> = [];\r\n\r\n\t/**\r\n\t * Components are added to this list when values of their data changes\r\n\t * (but not data provider itself).\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Array<Component>}\r\n\t */\r\n\tpublic invalidDataItems: Array<Component> = [];\r\n\r\n\t/**\r\n\t * Components are added to this list when their data range (selection) is\r\n\t * changed, e.g. zoomed.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Array<Component>}\r\n\t */\r\n\tpublic invalidDataRange: Array<Component> = [];\r\n\r\n\t/**\r\n\t * A list of [[Sprite]] objects that have invalid(ated) positions, that need\r\n\t * to be recalculated.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Array<Sprite>}\r\n\t */\r\n\tpublic invalidPositions: Array<Sprite> = [];\r\n\r\n\t/**\r\n\t * A list of [[Container]] objects with invalid(ated) layouts.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Array<Container>}\r\n\t */\r\n\tpublic invalidLayouts: Array<Container> = [];\r\n\r\n\tconstructor() {\r\n\t\tthis.uid = this.getUniqueId();\r\n\t}\r\n\r\n\t/**\r\n\t * Generates a unique chart system-wide ID.\r\n\t *\r\n\t * @return {string} Generated ID\r\n\t */\r\n\tpublic getUniqueId(): string {\r\n\t\tlet uid = this._uidCount;\r\n\t\tthis._uidCount += 1;\r\n\t\treturn \"id-\" + uid;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a universal collection for mapping ids with objects.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {Dictionary<string, any>} Map collection\r\n\t */\r\n\tpublic get map(): Dictionary<string, any> {\r\n\t\tif (!this._map) {\r\n\t\t\tthis._map = new Dictionary<string, any>();\r\n\t\t}\r\n\t\treturn this._map;\r\n\t}\r\n\r\n\t/**\r\n\t * Caches value in object's cache.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {string}  key    Key\r\n\t * @param {any}     value  Value\r\n\t */\r\n\tpublic setCache(key: string, value: any): void {\r\n\t\tcache.set(this.uid, key, value);\r\n\t}\r\n\r\n\t/**\r\n\t * Retrieves cached value.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {string}  key  Key\r\n\t * @return {any}          Value\r\n\t */\r\n\tpublic getCache(key: string): any {\r\n\t\treturn cache.get(this.uid, key);\r\n\t}\r\n\r\n\t/**\r\n\t * Dispatches an event using own event dispatcher. Will automatically\r\n\t * populate event data object with event type and target (this element).\r\n\t * It also checks if there are any handlers registered for this sepecific\r\n\t * event.\r\n\t *\r\n\t * @param {Key} eventType Event type (name)\r\n\t * @param {any}    data      Data to pass into event handler(s)\r\n\t */\r\n\tpublic dispatch<Key extends keyof IRegistryEvents>(eventType: Key, data?: any): void {\r\n\t\t// @todo Implement proper type check\r\n\t\tif (this.events.isEnabled(eventType)) {\r\n\t\t\tif (data) {\r\n\t\t\t\tdata.type = eventType;\r\n\t\t\t\tdata.target = data.target || this;\r\n\t\t\t\t(<any>this.events).dispatch(eventType, {\r\n\t\t\t\t\ttype: eventType,\r\n\t\t\t\t\ttarget: this\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t(<any>this.events).dispatch(eventType, {\r\n\t\t\t\t\ttype: eventType,\r\n\t\t\t\t\ttarget: this\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Works like `dispatch`, except event is triggered immediately, without\r\n\t * waiting for the next frame cycle.\r\n\t *\r\n\t * @param {Key} eventType Event type (name)\r\n\t * @param {any}    data      Data to pass into event handler(s)\r\n\t */\r\n\tpublic dispatchImmediately<Key extends keyof IRegistryEvents>(eventType: Key, data?: any): void {\r\n\t\t// @todo Implement proper type check\r\n\t\tif (this.events.isEnabled(eventType)) {\r\n\t\t\tif (data) {\r\n\t\t\t\tdata.type = eventType;\r\n\t\t\t\tdata.target = data.target || this;\r\n\t\t\t\t(<any>this.events).dispatchImmediately(eventType, data);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t(<any>this.events).dispatchImmediately(eventType, {\r\n\t\t\t\t\ttype: eventType,\r\n\t\t\t\t\ttarget: this\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * A singleton global instance of [[Registry]].\r\n *\r\n * @ignore Exclude from docs\r\n */\r\nexport let registry = new Registry();\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../src/.internal/core/Registry.ts","var global = require('./_global');\nvar core = require('./_core');\nvar hide = require('./_hide');\nvar redefine = require('./_redefine');\nvar ctx = require('./_ctx');\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] || (global[name] = {}) : (global[name] || {})[PROTOTYPE];\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE] || (exports[PROTOTYPE] = {});\n  var key, own, out, exp;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    // export native or passed\n    out = (own ? target : source)[key];\n    // bind timers to global for call from export context\n    exp = IS_BIND && own ? ctx(out, global) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // extend global\n    if (target) redefine(target, key, out, type & $export.U);\n    // export\n    if (exports[key] != out) hide(exports, key, exp);\n    if (IS_PROTO && expProto[key] != out) expProto[key] = out;\n  }\n};\nglobal.core = core;\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_export.js\n// module id = 1\n// module chunks = 26","/**\r\n * A collection of utility functions for various type checks and conversion\r\n * @todo Review unused functions for removal\r\n * @hidden\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { percent, Percent, isPercent } from \"./Percent\";\r\n\r\n/**\r\n * @todo Description\r\n * @ignore Exclude from docs\r\n */\r\nexport type Public<T> = {[P in keyof T]: T[P]};\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * TYPE CHECK\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Returns `true` if value is not a number (NaN).\r\n *\r\n * @param  {number}  value Input value\r\n * @return {boolean}       Is NaN?\r\n * @deprecated Is not used anywhere. JS built-in isNaN is used everywhere. Maybe we don't need this, or if we do, then we should use it everywhere\r\n */\r\nexport function isNaN(value: number): boolean {\r\n\treturn Number(value) !== value;\r\n\t//return value !== value;\r\n}\r\n\r\n/**\r\n * Represents a type for all available JavaScript variable types.\r\n *\r\n * @type {[type]}\r\n */\r\nexport type Type\r\n\t= \"[object Object]\"\r\n\t| \"[object Array]\"\r\n\t| \"[object String]\"\r\n\t| \"[object Number]\"\r\n\t| \"[object Boolean]\"\r\n\t| \"[object Date]\";\r\n\r\n/**\r\n * Returns a type of the value.\r\n *\r\n * @param  {any}   value  Input value\r\n * @return {Type}         Type of the value\r\n */\r\nexport function getType<A>(value: A): Type {\r\n\treturn ({}).toString.call(value);\r\n}\r\n\r\n/**\r\n * Returns a default value if the passed in value is empty.\r\n *\r\n * @param  {any}   value     Input value\r\n * @param  {any}   optional  Default value\r\n * @return {any}             Value or default value whichever is available\r\n * @deprecated Not used anywhere\r\n */\r\nexport function getDefault<A>(value: null | undefined | A, optional: A): A {\r\n\treturn value || optional;\r\n}\r\n\r\n/**\r\n * Checks if the passed in value is a string.\r\n *\r\n * @param  {any}   value  Value\r\n * @return {value}        Is string?\r\n * @throws {Error}\r\n * @deprecated Not used anywhere\r\n */\r\nexport function checkString(value: any): value is string {\r\n\tif (typeof value === \"string\") {\r\n\t\treturn true;\r\n\t} else {\r\n\t\tthrow new Error(\"Expected a string but got \" + getType(value));\r\n\t}\r\n}\r\n\r\n/**\r\n * Checks if the passed in value is a boolean.\r\n *\r\n * @param  {any}   value  Value\r\n * @return {value}        Is boolean?\r\n * @throws {Error}\r\n * @deprecated Not used anywhere\r\n */\r\nexport function checkBoolean(value: any): value is boolean {\r\n\tif (typeof value === \"boolean\") {\r\n\t\treturn true;\r\n\t} else {\r\n\t\tthrow new Error(\"Expected a boolean but got \" + getType(value));\r\n\t}\r\n}\r\n\r\n/**\r\n * Checks if the passed in value is a number.\r\n *\r\n * @param  {any}   value  Value\r\n * @return {value}        Is number?\r\n * @throws {Error}\r\n */\r\nexport function checkNumber(value: any): value is number {\r\n\tif (typeof value === \"number\") {\r\n\t\tif (isNaN(value)) {\r\n\t\t\tthrow new Error(\"Expected a number but got NaN\");\r\n\t\t}\r\n\t} else {\r\n\t\tthrow new Error(\"Expected a number but got \" + getType(value));\r\n\t}\r\n\treturn true;\r\n}\r\n\r\n/**\r\n * Checks if the passed in value is an object.\r\n *\r\n * @param  {any}   value  Value\r\n * @return {value}        Is object?\r\n * @throws {Error}\r\n * @todo Is the input type correct?\r\n * @deprecated Not used anywhere\r\n */\r\nexport function checkObject(value: {}): value is {} {\r\n\tconst t = getType(value);\r\n\r\n\tif (t === \"[object Object]\") {\r\n\t\treturn true;\r\n\r\n\t} else {\r\n\t\tthrow new Error(\"Expected an object but got \" + t);\r\n\t}\r\n}\r\n\r\n/**\r\n * Checks if the passed in value is an array.\r\n *\r\n * @param  {any}   value  Value\r\n * @return {value}        Is array?\r\n * @throws {Error}\r\n * @deprecated Not used anywhere\r\n */\r\nexport function checkArray<A>(value: Array<A>): value is Array<A> {\r\n\tif (Array.isArray(value)) {\r\n\t\treturn true;\r\n\r\n\t} else {\r\n\t\tthrow new Error(\"Expected an array but got \" + getType(value));\r\n\t}\r\n}\r\n\r\n/**\r\n * Checks if the passed in value is a Date object.\r\n *\r\n * @param  {any}   value  Value\r\n * @return {value}        Is Date object?\r\n * @throws {Error}\r\n * @deprecated Not used anywhere\r\n */\r\nexport function checkDate(value: Date): value is Date {\r\n\tconst t = getType(value);\r\n\r\n\tif (t === \"[object Date]\") {\r\n\t\treturn true;\r\n\r\n\t} else {\r\n\t\tthrow new Error(\"Expected a date but got \" + t);\r\n\t}\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * TYPE CASTING\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Casts string or a number into string.\r\n *\r\n * @param  {string | number}  value  Input\r\n * @return {string}                  String value\r\n * @deprecated Not used anywhere\r\n */\r\nexport function castString(value: string | number): string {\r\n\tif (typeof value === \"string\") {\r\n\t\treturn value;\r\n\r\n\t} else if (typeof value === \"number\") {\r\n\t\treturn \"\" + value;\r\n\r\n\t} else {\r\n\t\tthrow new Error(\"Expected a string or number but got \" + getType(value));\r\n\t}\r\n}\r\n\r\n/**\r\n * Casts string or a number into a number.\r\n *\r\n * @param  {string | number | Date}  value   Input value\r\n * @return {number}                  Number  value\r\n * @throws {Error}\r\n */\r\nexport function castNumber(value: string | number | Date): number {\r\n\tif (typeof value === \"string\") {\r\n\t\tconst number = +value;\r\n\r\n\t\tif (isNaN(number)) {\r\n\t\t\tthrow new Error(\"Cannot cast string \" + JSON.stringify(value) + \" to a number\");\r\n\r\n\t\t} else {\r\n\t\t\treturn number;\r\n\t\t}\r\n\r\n\t} else if (typeof value === \"number\") {\r\n\t\tif (isNaN(value)) {\r\n\t\t\tthrow new Error(\"Expected a number but got NaN\");\r\n\r\n\t\t} else {\r\n\t\t\treturn value;\r\n\t\t}\r\n\r\n\t} else {\r\n\t\tconst t = getType(value);\r\n\r\n\t\tif (t === \"[object Date]\") {\r\n\t\t\treturn value.getTime();\r\n\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"Expected a string, number, or date but got \" + t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * Casts number, string or Date into a Date object.\r\n *\r\n * @param  {string | number | Date}   value  Input value\r\n * @return {Date}                            Date object\r\n * @deprecated Not used anywhere\r\n * @throws {Error}\r\n * @hidden\r\n * @deprecated\r\n */\r\n/*export function castDate(value: string | number | Date, formatter?: DateFormatter): Date {\r\n\tif (typeof value === \"string\") {\r\n\t\tif (formatter) {\r\n\t\t\treturn formatter.parse(value);\r\n\t\t}\r\n\t\treturn new Date(value);\r\n\r\n\t} else if (typeof value === \"number\") {\r\n\t\treturn new Date(value);\r\n\r\n\t} else {\r\n\t\tconst t = getType(value);\r\n\r\n\t\tif (t === \"[object Date]\") {\r\n\t\t\treturn value;\r\n\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"Expected a string, number, or date but got \" + t);\r\n\t\t}\r\n\t}\r\n}*/\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * QUICK CONVERSION\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n\r\n/**\r\n * Converts any value into `boolean`.\r\n *\r\n * @param  {any}      value  Source value\r\n * @return {boolean}         `true` or `false`\r\n */\r\nexport function toBoolean(value: any): boolean {\r\n\treturn value ? true : false;\r\n}\r\n\r\n/**\r\n * Converts any value into a `number`.\r\n *\r\n * @param  {any}     value  Source value\r\n * @return {number}         Number representation of value\r\n */\r\nexport function toNumber(value: any): number {\r\n\tif (hasValue(value) && !isNumber(value)) {\r\n\t\tlet converted = Number(value);\r\n\t\tif (isNaN(converted) && isString(value) && value != \"\") {\r\n\t\t\treturn toNumber(value.replace(/[^0-9.\\-]+/g, ''));\r\n\t\t}\r\n\t\treturn converted;\r\n\t}\r\n\treturn value;\r\n}\r\n\r\n/**\r\n * Converts any value into a string (text).\r\n *\r\n * @param  {any}     value  Source value\r\n * @return {string}         String representation of the input\r\n */\r\nexport function toText(value: any): string {\r\n\tif (hasValue(value) && !isString(value)) {\r\n\t\treturn castString(value);\r\n\t}\r\n\treturn value;\r\n}\r\n\r\n/**\r\n * Converts any value to a number or [[Percent]].\r\n *\r\n * If the parameter is a string and contains \"%\", it will\r\n * convert it into a [[Percent]].\r\n *\r\n * Otherwise, it will convert into a number.\r\n *\r\n * @param {number | Percent}   value  Number or percent\r\n * @return {number | Percent}         Percent object\r\n */\r\nexport function toNumberOrPercent(value: any): number | Percent {\r\n\tif (!hasValue(value) || isNumber(value) || isPercent(value)) {\r\n\t\treturn value;\r\n\t}\r\n\tif (isString(value) && value.indexOf(\"%\") != -1) {\r\n\t\treturn percent(toNumber(value));\r\n\t}\r\n\treturn toNumber(value);\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * VALUE PRESENCE CHECK\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines an optional value that can be of any type or `undefined`.\r\n *\r\n * @type {[type]}\r\n */\r\nexport type Optional<A> = A | undefined;\r\n\r\n/**\r\n * Checks if a variable has a value.\r\n *\r\n * @param {Optional<A> | null}  a  Input value\r\n * @returns                        Has value?\r\n */\r\nexport function hasValue<A>(a: Optional<A> | null): a is A {\r\n\treturn a != null;\r\n}\r\n\r\n/**\r\n * Returns a value or throws an {Error} exception if the variable has not\r\n * value.\r\n *\r\n * @param {Optional<A> | null}  a  Input value\r\n * @returns                        Value\r\n */\r\nexport function getValue<A>(a: Optional<A> | null): A {\r\n\tif (hasValue(a)) {\r\n\t\treturn a;\r\n\r\n\t} else {\r\n\t\tthrow new Error(\"Value doesn't exist\");\r\n\t}\r\n}\r\n\r\n/**\r\n * Returns a value, or returns the default value if it doesn't have a value.\r\n *\r\n * @param {Optional<A> | null}  a  Input value\r\n * @returns                        Value\r\n */\r\nexport function getValueDefault<A>(a: Optional<A> | null, defaultValue: A): A {\r\n\tif (hasValue(a)) {\r\n\t\treturn a;\r\n\r\n\t} else {\r\n\t\treturn defaultValue;\r\n\t}\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * TYPE CHECK\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Checks if parameter is `Date`.\r\n *\r\n * @param  {any}    value  Input value\r\n * @return {value}         Is Date?\r\n */\r\nexport function isDate(value: any): value is Date {\r\n\treturn getType(value) === \"[object Date]\";\r\n}\r\n\r\n/**\r\n * Checks if parameter is `string`.\r\n *\r\n * @param  {any}    value  Input value\r\n * @return {value}         Is string?\r\n */\r\nexport function isString(value: any): value is string {\r\n\treturn typeof value === \"string\";\r\n}\r\n\r\n/**\r\n * Checks if parameter is `number`.\r\n *\r\n * @param  {any}    value  Input value\r\n * @return {value}         Is number?\r\n */\r\nexport function isNumber(value: any): value is number {\r\n\treturn typeof value === \"number\" && !isNaN(value);\r\n}\r\n\r\n/**\r\n * Checks if parameter is `object`.\r\n *\r\n * @param  {any}    value  Input value\r\n * @return {value}         Is object?\r\n */\r\nexport function isObject(value: any): value is number {\r\n\treturn typeof value === \"object\";\r\n}\r\n\r\n/**\r\n * Checks if parameter is `Array`.\r\n *\r\n * @param  {any}    value  Input value\r\n * @return {value}         Is Array?\r\n */\r\nexport function isArray(value: any): value is Array<any> {\r\n\treturn Array.isArray(value);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/utils/Type.ts","/**\r\n * A collection of Math-related functions\r\n *\r\n * @todo Comment trigonometric functions?\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { IPoint } from \"../defs/IPoint\";\r\nimport { IRectangle } from \"../defs/IRectangle\";\r\nimport { IRange } from \"../defs/IRange\";\r\nimport * as $type from \"./Type\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * CONSTANTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nexport const PI = Math.PI;\r\nexport const HALFPI = PI / 2;\r\nexport const RADIANS = PI / 180;\r\nexport const DEGREES = 180 / PI;\r\n\r\n/**\r\n * Converts any value and fits it into a specific value range.\r\n *\r\n * @param  {any}     value  Source value\r\n * @param  {number}  min    Minimum allowable value\r\n * @param  {number}  max    Maximum allowable value\r\n * @return {number}         Number\r\n */\r\nexport function toNumberRange(value: any, min: number, max: number): number {\r\n\tif ($type.hasValue(value)) {\r\n\t\tvalue = $type.toNumber(value);\r\n\t\treturn fitToRange(value, min, max);\r\n\t}\r\n\treturn value;\r\n}\r\n\r\n/**\r\n * Rounds the numeric value to whole number or specific precision of set.\r\n *\r\n * @param  {number} value      Value\r\n * @param  {number} precision  Precision (number of decimal points)\r\n * @return {number}            Rounded value\r\n */\r\nexport function round(value: number, precision?: number): number {\r\n\tif (!$type.isNumber(precision) || precision <= 0) {\r\n\t\treturn Math.round(value);\r\n\t}\r\n\telse {\r\n\t\tlet d: number = Math.pow(10, precision);\r\n\t\treturn Math.round(value * d) / d;\r\n\t}\r\n}\r\n\r\n/**\r\n * Stretches `t` so that it will always be between `from` and `to`.\r\n *\r\n * @param  {number} t     Number from 0 to 1\r\n * @param  {number} from  Lowest possible value\r\n * @param  {number} to    Highest possible value\r\n * @return {number}       Adjusted value\r\n */\r\nexport function stretch(t: number, from: number, to: number): number {\r\n\treturn (t * (to - from)) + from;\r\n}\r\n\r\n\r\n/**\r\n * Adjust numeric value so it fits to specific value range.\r\n *\r\n * @param  {number} value     Value\r\n * @param  {Optional<number>} minValue  Lowest possible value\r\n * @param  {Optional<number>} maxValue  Highest possible value\r\n * @return {number}                     Adjusted value\r\n */\r\nexport function fitToRange(value: number, minValue: $type.Optional<number>, maxValue: $type.Optional<number>): number {\r\n\tif ($type.isNumber(minValue)) {\r\n\t\tif ($type.isNumber(maxValue) && maxValue < minValue) {\r\n\t\t\tlet temp = maxValue;\r\n\t\t\tmaxValue = minValue;\r\n\t\t\tminValue = temp;\r\n\t\t}\r\n\r\n\t\tif (value < minValue) {\r\n\t\t\tvalue = minValue;\r\n\t\t}\r\n\t}\r\n\r\n\tif ($type.isNumber(maxValue)) {\r\n\t\tif (value > maxValue) {\r\n\t\t\tvalue = maxValue;\r\n\t\t}\r\n\t}\r\n\r\n\treturn value;\r\n}\r\n\r\n/**\r\n * Returns sine of a number.\r\n *\r\n * @param  {number} value  Value\r\n * @return {number}        Sine\r\n */\r\nexport function sin(value: number): number {\r\n\treturn round(Math.sin(RADIANS * value), 10);\r\n}\r\n\r\n/**\r\n * Returns tan of a number.\r\n *\r\n * @param  {number} value  Value\r\n * @return {number}        Sine\r\n */\r\nexport function tan(value: number): number {\r\n\treturn round(Math.tan(RADIANS * value), 10);\r\n}\r\n\r\n/**\r\n * Returns cosine of a number.\r\n *\r\n * @param  {number} value  Value\r\n * @return {number}        Cosine\r\n */\r\nexport function cos(value: number): number {\r\n\treturn round(Math.cos(RADIANS * value), 10);\r\n}\r\n\r\n/**\r\n * Returns biggest value out of passed in numeric values.\r\n *\r\n * @param  {number}  left   Numeric value\r\n * @param  {number}  right  Numeric value\r\n * @return {number}         Biggest value\r\n */\r\nexport function max(left: number, right: number): number;\r\nexport function max(left: number, right: $type.Optional<number>): number;\r\nexport function max(left: $type.Optional<number>, right: number): number;\r\nexport function max(left: $type.Optional<number>, right: $type.Optional<number>): $type.Optional<number>;\r\nexport function max(left: any, right: any): any {\r\n\tif ($type.isNumber(left)) {\r\n\t\tif ($type.isNumber(right)) {\r\n\t\t\tif (right > left) {\r\n\t\t\t\treturn right;\r\n\r\n\t\t\t} else {\r\n\t\t\t\treturn left;\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\treturn left;\r\n\t\t}\r\n\r\n\t} else if ($type.isNumber(right)) {\r\n\t\treturn right;\r\n\r\n\t} else {\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Returns smallest value out of passed in numeric values.\r\n *\r\n * @param  {number}  left   Numeric value\r\n * @param  {number}  right  Numeric value\r\n * @return {number}         Smallest value\r\n */\r\nexport function min(left: number, right: number): number;\r\nexport function min(left: number, right: $type.Optional<number>): number;\r\nexport function min(left: $type.Optional<number>, right: number): number;\r\nexport function min(left: $type.Optional<number>, right: $type.Optional<number>): $type.Optional<number>;\r\nexport function min(left: any, right: any): any {\r\n\tif ($type.isNumber(left)) {\r\n\t\tif ($type.isNumber(right)) {\r\n\t\t\tif (right < left) {\r\n\t\t\t\treturn right;\r\n\r\n\t\t\t} else {\r\n\t\t\t\treturn left;\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\treturn left;\r\n\t\t}\r\n\r\n\t} else if ($type.isNumber(right)) {\r\n\t\treturn right;\r\n\r\n\t} else {\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n/**\r\n * Returns the closest value from the array of values to the reference value.\r\n *\r\n * @param  {number[]}  values  Array of values\r\n * @param  {number}    value   Reference value\r\n * @return {number}            Closes value from the array\r\n */\r\nexport function closest(values: number[], referenceValue: number): number {\r\n\treturn values.reduce(function(prev, curr) {\r\n\t\treturn (Math.abs(curr - referenceValue) < Math.abs(prev - referenceValue) ? curr : prev);\r\n\t});\r\n}\r\n\r\n/**\r\n * Checks whether two ranges of values intersect.\r\n *\r\n * @param {IRange}    range1  Range 1\r\n * @param {IRange}    range2  Range 2\r\n * @return {boolean}          Any intersecting numbers?\r\n */\r\nexport function intersect(range1: IRange, range2: IRange): boolean {\r\n\tlet start1: number = $type.getValue(range1.start);\r\n\tlet start2: number = $type.getValue(range2.start);\r\n\tlet end1: number = $type.getValue(range1.end);\r\n\tlet end2: number = $type.getValue(range2.end);\r\n\r\n\treturn Math.max(start1, start2) <= Math.min(end1, end2);\r\n}\r\n\r\n/**\r\n * Inverts the range of values.\r\n *\r\n * @param {IRange}  range  Range\r\n */\r\nexport function invertRange(range: IRange) {\r\n\tlet start: number = $type.getValue(range.start);\r\n\tlet end: number = $type.getValue(range.end);\r\n\treturn { start: 1 - end, end: 1 - start };\r\n}\r\n\r\n/**\r\n * Returns an intersection range between two ranges of values.\r\n *\r\n * @param  {IRange}  range1  Range 1\r\n * @param  {IRange}  range2  Range 2\r\n * @return {IRange}          Intersecting value range\r\n */\r\nexport function intersection(range1: IRange, range2: IRange): $type.Optional<IRange> {\r\n\tlet start1: number = $type.getValue(range1.start);\r\n\tlet start2: number = $type.getValue(range2.start);\r\n\tlet end1: number = $type.getValue(range1.end);\r\n\tlet end2: number = $type.getValue(range2.end);\r\n\tlet startMax: number = Math.max(start1, start2);\r\n\tlet endMin: number = Math.min(end1, end2);\r\n\r\n\tif (endMin < startMax) {\r\n\t\treturn undefined;\r\n\t}\r\n\telse {\r\n\t\treturn { start: startMax, end: endMin };\r\n\t}\r\n}\r\n\r\n/**\r\n * Returns pixel \"distance\" between two points.\r\n *\r\n * If second point is not specified, distance from {x:0, y:0} point is\r\n * calculated.\r\n *\r\n * @param  {IPoint}  point1  Point 1\r\n * @param  {IPoint}  point2  Point 2\r\n * @return {number}          Distance in relative pixels\r\n */\r\nexport function getDistance(point1: IPoint, point2?: IPoint): number {\r\n\tif (!point2) {\r\n\t\tpoint2 = { x: 0, y: 0 };\r\n\t}\r\n\treturn Math.sqrt(Math.pow(Math.abs(point1.x - point2.x), 2) + Math.pow(Math.abs(point1.y - point2.y), 2));\r\n}\r\n\r\n/**\r\n * Returns scale based on original and end position of the two points.\r\n *\r\n * @param  {IPoint}  point1       Current position of point 1\r\n * @param  {IPoint}  startPoint1  Start position of point 1\r\n * @param  {IPoint}  point2       Current position of point 1\r\n * @param  {IPoint}  startPoint2  Start position of point 2\r\n * @return {number}  Scale        Calculated scale\r\n */\r\nexport function getScale(point1: IPoint, startPoint1: IPoint, point2: IPoint, startPoint2: IPoint): number {\r\n\tlet initialDistance: number = getDistance(startPoint1, startPoint2);\r\n\tlet currentDistance: number = getDistance(point1, point2);\r\n\r\n\treturn Math.abs(currentDistance / initialDistance);\r\n}\r\n\r\n/**\r\n * Returns an exact mid point between two points.\r\n *\r\n * @param  {IPoint}  point1     Position of point 1\r\n * @param  {IPoint}  point2     Position of point 2\r\n * @return {IPoint}  Mid point  Position of mid-point\r\n */\r\nexport function getMidPoint(point1: IPoint, point2: IPoint, position?: number): IPoint {\r\n\tif (!$type.isNumber(position)) {\r\n\t\tposition = 0.5;\r\n\t}\r\n\r\n\treturn {\r\n\t\t\"x\": (point1.x + (point2.x - point1.x) * position),\r\n\t\t\"y\": (point1.y + (point2.y - point1.y) * position)\r\n\t}\r\n}\r\n\r\n/**\r\n * Returns difference in angles between starting and ending position of two\r\n * vectors.\r\n *\r\n * @param  {IPoint}  point1       Current position of point 1\r\n * @param  {IPoint}  startPoint1  Start position of point 1\r\n * @param  {IPoint}  point2       Current position of point 1\r\n * @param  {IPoint}  startPoint2  Start position of point 2\r\n * @return {number}               Angle difference in degrees\r\n */\r\nexport function getRotation(point1: IPoint, startPoint1: IPoint, point2: IPoint, startPoint2: IPoint): number {\r\n\r\n\t// Get start and end angles\r\n\tlet startAngle: number = getAngle(startPoint1, startPoint2);\r\n\tlet angle: number = getAngle(point1, point2);\r\n\r\n\t// Calculate angle\r\n\tlet diff: number = startAngle - angle;\r\n\tif (diff < 0) {\r\n\t\tdiff += 360;\r\n\t}\r\n\r\n\treturn diff;\r\n}\r\n\r\n/**\r\n * Calculates angle of the vector based on two or one point.\r\n *\r\n * @param  {IPoint}  point1  Point 1\r\n * @param  {IPoint}  point2  Point 2\r\n * @return {number}          Angle in degrees\r\n */\r\nexport function getAngle(point1: IPoint, point2?: IPoint): number {\r\n\tif (!point2) {\r\n\t\tpoint2 = { x: point1.x * 2, y: point1.y * 2 };\r\n\t}\r\n\tlet diffX: number = point2.x - point1.x;\r\n\tlet diffY: number = point2.y - point1.y;\r\n\tlet angle: number = Math.atan2(diffY, diffX) * DEGREES;\r\n\tif (angle < 0) {\r\n\t\tangle += 360;\r\n\t}\r\n\treturn normalizeAngle(angle);\r\n}\r\n\r\n/**\r\n * Returns the shift in coordinates of the center when item is rotated, moved\r\n * and scaled at the same time.\r\n *\r\n * @param  {IPoint}  center       Current center\r\n * @param  {IPoint}  point1       Frst reference point\r\n * @param  {IPoint}  startPoint1  Original position of the first reference point\r\n * @param  {IPoint}  point2       Second reference point\r\n * @param  {IPoint}  startPoint2  Original position of the first reference point\r\n * @return {IPoint}               Shift in center point coordinates\r\n */\r\nexport function getCenterShift(center: IPoint, point1: IPoint, startPoint1: IPoint, point2: IPoint, startPoint2: IPoint): IPoint {\r\n\r\n\t// Get angle\r\n\tlet angle: number = getRotation(point1, startPoint1, point2, startPoint2) - 90;\r\n\tif (angle < 0) {\r\n\t\tangle += 360;\r\n\t}\r\n\r\n\t// Get distance between new position\r\n\tlet distance: number = getDistance(point1, point2);\r\n\r\n\t// Calculate new X\r\n\tlet x: number = Math.cos(angle) / distance + point1.x;\r\n\tlet y: number = Math.cos(angle) / distance + point1.y;\r\n\r\n\tlet shift: IPoint = {\r\n\t\t\"x\": x - center.x,\r\n\t\t\"y\": y - center.y\r\n\t}\r\n\treturn shift;\r\n}\r\n\r\n/**\r\n * Converts an array of points into a bounding box rectangle.\r\n *\r\n * Array can contain any number of points.\r\n *\r\n * @param  {IPoint[]}              points  Points\r\n * @return {Optional<IRectangle>}          Bounding box rectangle\r\n */\r\nexport function getBBox(points: IPoint[]): $type.Optional<IRectangle> {\r\n\tif (points) {\r\n\t\tlet length = points.length;\r\n\r\n\t\tif (length !== 0) {\r\n\t\t\tlet left!: number;\r\n\t\t\tlet right!: number;\r\n\t\t\tlet top!: number;\r\n\t\t\tlet bottom!: number;\r\n\r\n\t\t\tfor (let i: number = 0; i < length; i++) {\r\n\t\t\t\tlet point: IPoint = points[i];\r\n\r\n\t\t\t\tif (!$type.isNumber(right) || (point.x > right)) {\r\n\t\t\t\t\tright = point.x;\r\n\t\t\t\t}\r\n\t\t\t\tif (!$type.isNumber(left) || (point.x < left)) {\r\n\t\t\t\t\tleft = point.x;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!$type.isNumber(top) || (point.y < top)) {\r\n\t\t\t\t\ttop = point.y;\r\n\t\t\t\t}\r\n\t\t\t\tif (!$type.isNumber(bottom) || (point.y > bottom)) {\r\n\t\t\t\t\tbottom = point.y;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn { x: left, y: top, width: right - left, height: bottom - top };\r\n\t\t}\r\n\t}\r\n\r\n\treturn { x: 0, y: 0, width: 0, height: 0 };\r\n}\r\n\r\n/**\r\n * Returns a [[IRectangle]] object representing a common rectangle that fits\r\n * all passed in rectangles in it.\r\n *\r\n * @param {IRectangle[]}           rectangles  An array of rectangles\r\n * @return {Optional<IRectangle>}              Common rectangle\r\n */\r\nexport function getCommonRectangle(rectangles: IRectangle[]): $type.Optional<IRectangle> {\r\n\tlet length = rectangles.length;\r\n\r\n\tif (length !== 0) {\r\n\t\tlet minX!: number;\r\n\t\tlet minY!: number;\r\n\t\tlet maxX!: number;\r\n\t\tlet maxY!: number;\r\n\r\n\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\tlet rectangle = rectangles[i];\r\n\t\t\tminX = min(rectangle.x, minX);\r\n\t\t\tminY = min(rectangle.y, minY);\r\n\t\t\tmaxX = max(rectangle.x + rectangle.width, maxX);\r\n\t\t\tmaxY = max(rectangle.y + rectangle.height, maxY);\r\n\t\t}\r\n\r\n\t\treturn { x: minX, y: minY, width: maxX - minX, height: maxY - minY };\r\n\t}\r\n}\r\n\r\n/**\r\n * [getPointOnQuadraticCurve description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @param  {IPoint}  pointA        [description]\r\n * @param  {IPoint}  pointB        [description]\r\n * @param  {IPoint}  controlPoint  [description]\r\n * @param  {number}  position      [description]\r\n * @return {IPoint}                [description]\r\n */\r\nexport function getPointOnQuadraticCurve(pointA: IPoint, pointB: IPoint, controlPoint: IPoint, position: number): IPoint {\r\n\tlet x: number = (1 - position) * (1 - position) * pointA.x + 2 * (1 - position) * position * controlPoint.x + position * position * pointB.x;\r\n\tlet y: number = (1 - position) * (1 - position) * pointA.y + 2 * (1 - position) * position * controlPoint.y + position * position * pointB.y;\r\n\treturn { x: x, y: y };\r\n}\r\n\r\n/**\r\n * [getPointOnCubicCurve description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @param  {IPoint}  pointA         [description]\r\n * @param  {IPoint}  pointB         [description]\r\n * @param  {IPoint}  controlPointA  [description]\r\n * @param  {IPoint}  controlPointB  [description]\r\n * @param  {number}  position       [description]\r\n * @return {IPoint}                 [description]\r\n */\r\nexport function getPointOnCubicCurve(pointA: IPoint, pointB: IPoint, controlPointA: IPoint, controlPointB: IPoint, position: number): IPoint {\r\n\tlet point: IPoint = { x: 0, y: 0 };\r\n\tlet mt1: number = 1 - position;\r\n\tlet mt2: number = mt1 * mt1;\r\n\tlet mt3: number = mt2 * mt1;\r\n\r\n\tpoint.x = pointA.x * mt3 + controlPointA.x * 3 * mt2 * position + controlPointB.x * 3 * mt1 * position * position + pointB.x * position * position * position;\r\n\tpoint.y = pointA.y * mt3 + controlPointA.y * 3 * mt2 * position + controlPointB.y * 3 * mt1 * position * position + pointB.y * position * position * position;\r\n\r\n\treturn point;\r\n}\r\n\r\n/**\r\n * [getCubicControlPointA description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @param  {IPoint}  p0        [description]\r\n * @param  {IPoint}  p1        [description]\r\n * @param  {IPoint}  p2        [description]\r\n * @param  {IPoint}  p3        [description]\r\n * @param  {number}  tensionX  [description]\r\n * @param  {number}  tensionY  [description]\r\n * @return {IPoint}            [description]\r\n */\r\nexport function getCubicControlPointA(p0: IPoint, p1: IPoint, p2: IPoint, p3: IPoint, tensionX: number, tensionY: number): IPoint {\r\n\ttensionX = adjustTension(tensionX);\r\n\ttensionY = adjustTension(tensionY);\r\n\treturn { x: ((-p0.x + p1.x / tensionX + p2.x) * tensionX), y: ((-p0.y + p1.y / tensionY + p2.y) * tensionY) };\r\n}\r\n\r\n/**\r\n * [getCubicControlPointB description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @param  {IPoint}  p0        [description]\r\n * @param  {IPoint}  p1        [description]\r\n * @param  {IPoint}  p2        [description]\r\n * @param  {IPoint}  p3        [description]\r\n * @param  {number}  tensionX  [description]\r\n * @param  {number}  tensionY  [description]\r\n * @return {IPoint}            [description]\r\n */\r\nexport function getCubicControlPointB(p0: IPoint, p1: IPoint, p2: IPoint, p3: IPoint, tensionX: number, tensionY: number): IPoint {\r\n\ttensionX = adjustTension(tensionX);\r\n\ttensionY = adjustTension(tensionY);\r\n\treturn { x: ((p1.x + p2.x / tensionX - p3.x) * tensionX), y: ((p1.y + p2.y / tensionY - p3.y) * tensionY) };\r\n}\r\n\r\n/**\r\n * [adjustTension description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @param  {number}  tension  [description]\r\n * @return {number}           [description]\r\n */\r\nexport function adjustTension(tension: number): number {\r\n\treturn 1 - tension + 0.00001;\r\n}\r\n\r\n/**\r\n * [normalizeAngle description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @param  {number}  value  [description]\r\n * @return {number}         [description]\r\n */\r\nexport function normalizeAngle(value: number): number {\r\n\tif (value == 360) {\r\n\t\treturn 360;\r\n\t}\r\n\treturn value % 360;\r\n}\r\n\r\n\r\n\r\n/**\r\n * [normalizeAngleToRange description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @todo review this with various angles, can be tested on radar chart with custom start/end angles\r\n * @param {number}   value       [description]\r\n * @param {number}   startAngle  [description]\r\n * @param {number}   endAngle    [description]\r\n * @return {number}              [description]\r\n */\r\nexport function fitAngleToRange(value: number, startAngle: number, endAngle: number): number {\r\n\r\n\tif (startAngle > endAngle) {\r\n\t\tlet temp: number = startAngle;\r\n\t\tstartAngle = endAngle;\r\n\t\tendAngle = temp;\r\n\t}\r\n\r\n\tvalue = normalizeAngle(value);\r\n\r\n\tlet count = (startAngle - normalizeAngle(startAngle)) / 360;\r\n\r\n\tif (value < startAngle) {\r\n\t\tvalue += 360 * (count + 1);\r\n\t}\r\n\r\n\tlet maxEnd: number = startAngle + (endAngle - startAngle) / 2 + 180;\r\n\tlet maxStart: number = startAngle + (endAngle - startAngle) / 2 - 180;\r\n\r\n\tif (value > endAngle) {\r\n\r\n\t\tif (value - 360 > startAngle) {\r\n\t\t\tvalue -= 360;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (value < maxEnd) {\r\n\t\t\t\tvalue = endAngle;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tvalue = startAngle;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tif (value < startAngle) {\r\n\t\tif (value > maxStart) {\r\n\t\t\tvalue = startAngle;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tvalue = endAngle;\r\n\t\t}\r\n\t}\r\n\r\n\treturn value;\r\n}\r\n\r\n\r\n/**\r\n * Returns [[IRectangle]] of an arc in relative values, assuming that the\r\n * center is at the circle center.\r\n *\r\n * Used to find out max radius of an arc.\r\n *\r\n * @ignore Exclude from docs\r\n * @param  {number}      startAngle  Start angle\r\n * @param  {number}      endAngle    End angle\r\n * @param  {number}      radius    \t Relative radius\r\n * @return {IRectangle}              Rectangle\r\n */\r\nexport function getArcRect(startAngle: number, endAngle: number, radius?: number): IRectangle {\r\n\t// do not normalize here!\r\n\t//startAngle = normalizeAngle(startAngle);\r\n\t//endAngle = normalizeAngle(endAngle);\r\n\r\n\tif (!$type.isNumber(radius)) {\r\n\t\tradius = 1;\r\n\t}\r\n\r\n\tif (startAngle == endAngle) {\r\n\t\tendAngle += 360;\r\n\t}\r\n\r\n\tif (startAngle > endAngle) {\r\n\t\tlet temp = endAngle;\r\n\t\tendAngle = startAngle;\r\n\t\tstartAngle = temp;\r\n\t}\r\n\r\n\tlet minX!: number;\r\n\tlet maxX!: number;\r\n\tlet minY!: number;\r\n\tlet maxY!: number;\r\n\r\n\tfor (let angle = startAngle; angle < endAngle; angle += 0.1) {\r\n\t\tminX = min(cos(angle) * radius, minX);\r\n\t\tmaxX = max(cos(angle) * radius, maxX);\r\n\t\tminY = min(sin(angle) * radius, minY);\r\n\t\tmaxY = max(sin(angle) * radius, maxY);\r\n\t}\r\n\r\n\treturn { x: minX, y: minY, width: (maxX - minX), height: (maxY - minY) };\r\n}\r\n\r\n/**\r\n * Returns true if a point is within rectangle\r\n *\r\n * @param  {IPoint}      point\r\n * @param  {IRectangle}  rectangle\r\n * @return {boolean}\r\n */\r\nexport function isInRectangle(point: IPoint, rectangle: IRectangle): boolean {\r\n\tif (point.x >= rectangle.x && point.x <= rectangle.x + rectangle.width && point.y > rectangle.y && point.y < rectangle.y + rectangle.height) {\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\n\r\nexport function getLineIntersection(pointA1: IPoint, pointA2: IPoint, pointB1: IPoint, pointB2: IPoint) {\r\n\tlet x = ((pointA1.x * pointA2.y - pointA2.x * pointA1.y) * (pointB1.x - pointB2.x) - (pointA1.x - pointA2.x) * (pointB1.x * pointB2.y - pointB1.y * pointB2.x)) / ((pointA1.x - pointA2.x) * (pointB1.y - pointB2.y) - (pointA1.y - pointA2.y) * (pointB1.x - pointB2.x));\r\n\tlet y = ((pointA1.x * pointA2.y - pointA2.x * pointA1.y) * (pointB1.y - pointB2.y) - (pointA1.y - pointA2.y) * (pointB1.x * pointB2.y - pointB1.y * pointB2.x)) / ((pointA1.x - pointA2.x) * (pointB1.y - pointB2.y) - (pointA1.y - pointA2.y) * (pointB1.x - pointB2.x));\r\n\treturn { x: x, y: y };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/utils/Math.ts","/**\n * ============================================================================\n * IMPORTS\n * ============================================================================\n * @hidden\n */\nimport { IClone } from \"./Clone\";\nimport { Ordering } from \"./Order\";\nimport * as $array from \"./Array\";\nimport * as $type from \"./Type\";\n\n\n/**\n * ============================================================================\n * UTILITY FUNCTIONS\n * ============================================================================\n * @hidden\n */\n\n/**\n * @ignore Exclude from docs\n * @todo Description\n */\nexport interface Iterator<A> {\n\t(push: (value: A) => boolean): void;\n}\n\n/**\n * @ignore Exclude from docs\n * @todo Description\n */\nexport interface Iterable<A> {\n\titerator(): Iterator<A>;\n}\n\n/**\n * @ignore Exclude from docs\n * @todo Description\n */\nexport function fromArray<A>(array: Array<A>): Iterator<A> {\n\treturn (push) => {\n\t\tconst length = array.length;\n\n\t\tfor (let i = 0; i < length; ++i) {\n\t\t\tif (!push(array[i])) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * @ignore Exclude from docs\n * @todo Description\n */\nexport function length<A>(iter: Iterator<A>): number {\n\tlet sum = 0;\n\n\titer((_) => {\n\t\t++sum;\n\t\treturn true;\n\t});\n\n\treturn sum;\n}\n\n/**\n * @ignore Exclude from docs\n * @todo Description\n */\nexport function toArray<A>(iter: Iterator<A>): Array<A> {\n\tconst output: Array<A> = [];\n\n\titer((value) => {\n\t\toutput.push(value);\n\t\treturn true;\n\t});\n\n\treturn output;\n}\n\n/**\n * [iter description]\n *\n * @ignore Exclude from docs\n * @todo Description\n * @type {Iterator<A>}\n */\nexport function eachContinue<A>(iter: Iterator<A>, fn: (value: A) => boolean): void {\n\treturn iter(fn);\n}\n\n/**\n * [iter description]\n *\n * @ignore Exclude from docs\n * @todo Description\n * @type {Iterator<A>}\n */\nexport function each<A>(iter: Iterator<A>, fn: (value: A) => void): void {\n\treturn iter((value) => {\n\t\tfn(value);\n\t\treturn true;\n\t});\n}\n\n/**\n * [iter description]\n *\n * @ignore Exclude from docs\n * @todo Description\n * @type {Iterator<A>}\n */\nexport function sort<A>(iter: Iterator<A>, fn: (left: A, right: A) => Ordering): Iterator<A> {\n\treturn fromArray(toArray(iter).sort(fn));\n}\n\n/**\n * [A description]\n *\n * @ignore Exclude from docs\n * @todo Description\n * @type {[type]}\n */\nexport function map<A, B>(iter: Iterator<A>, fn: (value: A) => B): Iterator<B> {\n\treturn (push) => iter((value) => push(fn(value)));\n}\n\n/**\n * [iter description]\n *\n * @ignore Exclude from docs\n * @todo Description\n * @type {Iterator<A>}\n */\nexport function filter<A>(iter: Iterator<A>, fn: (value: A) => boolean): Iterator<A> {\n\treturn (push) => iter((value) => {\n\t\tif (fn(value)) {\n\t\t\treturn push(value);\n\n\t\t} else {\n\t\t\treturn true;\n\t\t}\n\t});\n}\n\n/**\n * @ignore Exclude from docs\n * @todo Description\n */\nexport function concat<A>(...args: Array<Iterator<A>>): Iterator<A> {\n\treturn (push) => {\n\t\tlet go = true;\n\n\t\tconst push2 = (value: A) => (go = push(value));\n\n\t\tconst length = args.length;\n\n\t\tfor (let i = 0; i < length; ++i) {\n\t\t\targs[i](push2);\n\n\t\t\tif (!go) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * @ignore Exclude from docs\n * @todo Description\n */\nexport function flatten<A>(iter: Iterator<Iterator<A>>): Iterator<A> {\n\treturn (push) => {\n\t\tlet go = true;\n\n\t\tconst push2 = (value: A) => (go = push(value));\n\n\t\treturn iter((value) => {\n\t\t\tvalue(push2);\n\t\t\treturn go;\n\t\t});\n\t};\n}\n\n/**\n * [number description]\n *\n * @ignore Exclude from docs\n * @todo Description\n * @type {[type]}\n */\nexport function indexed<A>(iter: Iterator<A>): Iterator<[number, A]> {\n\treturn (push) => {\n\t\tlet index = 0;\n\n\t\treturn iter((value) => push([index++, value]));\n\t};\n}\n\n/**\n * [iter description]\n *\n * @ignore Exclude from docs\n * @todo Description\n * @type {Iterator<A>}\n */\nexport function findIndex<A>(iter: Iterator<A>, matches: (value: A) => boolean): number {\n\tlet found = false;\n\tlet i = 0;\n\n\titer((value) => {\n\t\tif (matches(value)) {\n\t\t\tfound = true;\n\t\t\treturn false;\n\n\t\t} else {\n\t\t\t++i;\n\t\t\treturn true;\n\t\t}\n\t});\n\n\treturn (found ? i : -1);\n}\n\n/**\n * [iter description]\n *\n * @ignore Exclude from docs\n * @todo Description\n * @type {Iterator<A>}\n */\nexport function find<A>(iter: Iterator<A>, matches: (value: A) => boolean): A | undefined {\n\tlet output;\n\n\titer((value) => {\n\t\tif (matches(value)) {\n\t\t\toutput = value;\n\t\t\treturn false;\n\n\t\t} else {\n\t\t\treturn true;\n\t\t}\n\t});\n\n\treturn output;\n}\n\n/**\n * [A description]\n *\n * @ignore Exclude from docs\n * @todo Description\n * @type {[type]}\n */\nexport function findMap<A, B>(iter: Iterator<A>, matches: (value: A) => B | null): B | undefined {\n\tlet output;\n\n\titer((value) => {\n\t\tconst v = matches(value);\n\n\t\tif (v !== null) {\n\t\t\toutput = v;\n\t\t\treturn false;\n\n\t\t} else {\n\t\t\treturn true;\n\t\t}\n\t});\n\n\treturn output;\n}\n\n/**\n * [iter description]\n *\n * @ignore Exclude from docs\n * @todo Description\n * @type {Iterator<A>}\n */\nexport function contains<A>(iter: Iterator<A>, matches: (value: A) => boolean): boolean {\n\tlet output = false;\n\n\titer((value) => {\n\t\tif (matches(value)) {\n\t\t\toutput = true;\n\t\t\treturn false;\n\n\t\t} else {\n\t\t\treturn true;\n\t\t}\n\t});\n\n\treturn output;\n}\n\n/**\n * [A description]\n *\n * @ignore Exclude from docs\n * @todo Description\n * @type {[type]}\n */\nexport function foldl<A, B>(iter: Iterator<A>, init: B, fn: (state: B, value: A) => B): B {\n\titer((value) => {\n\t\tinit = fn(init, value);\n\t\treturn true;\n\t});\n\n\treturn init;\n}\n\n/**\n * [min2 description]\n *\n * @ignore Exclude from docs\n * @todo Description\n * @param  {number |     null}        left [description]\n * @param  {number}    right [description]\n * @return {number}          [description]\n */\nfunction min2(left: number | null, right: number): number {\n\tif (left == null || right < left) {\n\t\treturn right;\n\n\t} else {\n\t\treturn left;\n\t}\n}\n\n/**\n * [min description]\n *\n * @ignore Exclude from docs\n * @todo Verify that this works correctly\n * @todo Description\n * @param  {Iterator<number>} a [description]\n * @return {number}             [description]\n */\nexport function min(a: Iterator<number>): number | null {\n\treturn foldl(a, null, min2);\n}\n\n/**\n * [max2 description]\n *\n * @ignore Exclude from docs\n * @todo Description\n * @param  {number |     null}        left [description]\n * @param  {number}    right [description]\n * @return {number}          [description]\n */\nfunction max2(left: number | null, right: number): number {\n\tif (left == null || right > left) {\n\t\treturn right;\n\n\t} else {\n\t\treturn left;\n\t}\n}\n\n/**\n * [max description]\n *\n * @ignore Exclude from docs\n * @todo Verify that this works correctly\n * @todo Description\n * @param  {Iterator<number>} a [description]\n * @return {number}             [description]\n */\nexport function max(a: Iterator<number>): number | null {\n\treturn foldl(a, null, max2);\n}\n\n\n/**\n * [join description]\n *\n * @ignore Exclude from docs\n * @todo Description\n * @param  {Iterator<string>} iter [description]\n * @param  {string        =    \"\"}          separator [description]\n * @return {string}                [description]\n */\nexport function join(iter: Iterator<string>, separator: string = \"\"): string {\n\tlet first = true;\n\tlet init = \"\";\n\n\titer((value) => {\n\t\tif (first) {\n\t\t\tfirst = false;\n\n\t\t} else {\n\t\t\tinit += separator;\n\t\t}\n\n\t\tinit += value;\n\n\t\treturn true;\n\t});\n\n\treturn init;\n}\n\n/**\n * @ignore Exclude from docs\n * @todo Description\n */\nexport class ListIterator<T extends IClone<T>> {\n\tprivate _listCopy!: Array<T>;\n\tprivate _create: () => T;\n\n\tpublic list: Iterable<T>;\n\n\t// flag specifies if iterator should create new list item if it is reqested for a nextItem but there is no more left in the list\n\tpublic createNewItems: boolean = false;\n\n\t/**\n\t * Constructor\n\t * \n\t * @param {Iterable<T>} list [description]\n\t * @param {()       =>   T}           create [description]\n\t */\n\tconstructor(list: Iterable<T>, create: () => T) {\n\t\tthis.list = list;\n\t\tthis._create = create;\n\t\tthis.reset();\n\t}\n\n\treset() {\n\t\tthis._listCopy = toArray(this.list.iterator());\n\t}\n\n\tclear() {\n\t\tthis._listCopy.length = 0;\n\t}\n\n\tgetFirst(): $type.Optional<T> {\n\t\treturn this.returnItem(0);\n\t}\n\n\tgetLast(): $type.Optional<T> {\n\t\treturn this.returnItem(this._listCopy.length - 1);\n\t}\n\n\tfind(fn: (value: T) => boolean): $type.Optional<T> {\n\t\tlet index: number = $array.findIndex(this._listCopy, fn);\n\n\t\tif (index !== -1) {\n\t\t\tlet item = this._listCopy[index];\n\t\t\t// TODO use removeIndex instead ?\n\t\t\t$array.remove(this._listCopy, item);\n\t\t\treturn item;\n\n\t\t} else {\n\t\t\treturn this.getLast();\n\t\t}\n\t}\n\n\tremoveItem(item: T): boolean {\n\t\treturn $array.remove(this._listCopy, item);\n\t}\n\n\tprotected returnItem(index: number): $type.Optional<T> {\n\t\tif (index >= 0 && index < this._listCopy.length) {\n\t\t\tlet item = this._listCopy[index];\n\t\t\t// TODO use removeIndex instead ?\n\t\t\t$array.remove(this._listCopy, item);\n\t\t\treturn item;\n\n\t\t} else if (this.createNewItems) {\n\t\t\treturn this._create();\n\t\t}\n\t}\n\n\titerator() {\n\t\treturn fromArray(this._listCopy);\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/utils/Iterator.ts","/**\r\n * Container module\r\n * @todo Needs description\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Sprite, ISpriteProperties, ISpriteAdapters, ISpriteEvents, SpriteEventDispatcher, AMEvent } from \"./Sprite\";\r\nimport { SpriteState } from \"./SpriteState\";\r\nimport { Animation } from \"./utils/Animation\";\r\nimport { List, IListEvents, ListGrouper } from \"./utils/List\";\r\nimport { VerticalAlign } from \"./defs/VerticalAlign\";\r\nimport { Align } from \"./defs/Align\";\r\nimport { Group } from \"./rendering/Group\";\r\nimport { Rectangle } from \"./elements/Rectangle\";\r\nimport { IPoint } from \"./defs/IPoint\";\r\nimport { Percent } from \"./utils/Percent\";\r\nimport { registry } from \"./Registry\";\r\nimport { Preloader } from \"./elements/Preloader\";\r\nimport { DataItem } from \"./DataItem\";\r\nimport { Optional } from \"./utils/Type\";\r\nimport { InterfaceColorSet } from \"../core/utils/InterfaceColorSet\";\r\nimport { Paper } from \"./rendering/Paper\";\r\nimport * as $iter from \"./utils/Iterator\";\r\nimport * as $array from \"./utils/Array\";\r\nimport * as $math from \"./utils/Math\";\r\nimport * as $type from \"./utils/Type\";\r\nimport { IRectangle } from \"./defs/IRectangle\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines available font weights.\r\n *\r\n * @type {string}\r\n */\r\nexport type FontWeight = \"normal\" | \"bold\" | \"bolder\" | \"lighter\" | \"100\" | \"200\" | \"300\" | \"400\" | \"500\" | \"600\" | \"700\" | \"800\" | \"900\";\r\n\r\n/**\r\n * Defines available text decorations.\r\n *\r\n * @type {string}\r\n */\r\nexport type TextDecoration = \"none\" | \"underline\" | \"overline\" | \"line-through\" | \"blink\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n// Defined in DataItem.ts\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines available [[Container]] layout types\r\n * @type {string}\r\n */\r\nexport type ContainerLayout = \"absolute\" | \"vertical\" | \"horizontal\" | \"grid\" | \"none\";\r\n\r\n/**\r\n * Defines properties for [[Container]]\r\n */\r\nexport interface IContainerProperties extends ISpriteProperties {\r\n\r\n\t/**\r\n\t * Container layout.\r\n\t *\r\n\t * Options: \"absolute\" (default), \"vertical\", \"horizontal\", or \"grid\".\r\n\t *\r\n\t * @default \"absolute\"\r\n\t * @type {ContainerLayout}\r\n\t */\r\n\tlayout?: ContainerLayout;\r\n\r\n\t/**\r\n\t * Default font weight.\r\n\t *\r\n\t * @default \"normal\"\r\n\t * @type {FontWeight}\r\n\t */\r\n\tfontWeight?: FontWeight;\r\n\r\n\t/**\r\n\t * Font size for the text.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tfontSize?: number;\r\n\r\n\t/**\r\n\t * Default font decoration.\r\n\t *\r\n\t * @default \"none\"\r\n\t * @type {TextDecoration}\r\n\t */\r\n\ttextDecoration?: TextDecoration;\r\n\r\n}\r\n\r\n/**\r\n * Defines events for the [[Container]]\r\n */\r\nexport interface IContainerEvents extends ISpriteEvents {\r\n\r\n\t/**\r\n\t * Invoked when a child Sprite is added to Container.\r\n\t */\r\n\tchildadded: {\r\n\t\tnewValue: Sprite;\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when a child Sprite is removed from\r\n\t */\r\n\tchildremoved: {\r\n\t\toldValue: Sprite;\r\n\t};\r\n\r\n};\r\n\r\n/**\r\n * Defines adapters\r\n * Includes both the [[Adapter]] definitions and properties\r\n * @see {@link Adapter}\r\n */\r\nexport interface IContainerAdapters extends ISpriteAdapters, IContainerProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Container can contain multiple sprites and arrange them in various layouts.\r\n *\r\n * @see {@link IContainerEvents} for a list of available events\r\n * @see {@link IContainerAdapters} for a list of available Adapters\r\n * @important\r\n */\r\nexport class Container extends Sprite {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @type {IContainerProperties}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _properties!: IContainerProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @type {IContainerAdapters}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _adapter!: IContainerAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IContainerEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IContainerEvents;\r\n\r\n\t/**\r\n\t * Container children. (sorted by layout)\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {List<Sprite>}\r\n\t */\r\n\tprotected _childrenByLayout: Sprite[] = [];\r\n\r\n\t/**\r\n\t * Available width. (px)\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<number>}\r\n\t */\r\n\tprotected _availableWidth: $type.Optional<number>;\r\n\r\n\t/**\r\n\t * Available height. (px)\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<number>}\r\n\t */\r\n\tprotected _availableHeight: $type.Optional<number>;\r\n\r\n\t/**\r\n\t * [_fixedWidthGrid description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @type {boolean}\r\n\t */\r\n\tprotected _fixedWidthGrid: boolean;\r\n\r\n\t/**\r\n\t * Container's child elements. (sorded by their `zIndex`)\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<List<Sprite>>}\r\n\t */\r\n\tprotected _children: $type.Optional<List<Sprite>>;\r\n\r\n\t/**\r\n\t * Horizontal alignment of Container's items\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<Align>}\r\n\t */\r\n\tprotected _contentAlign: $type.Optional<Align>;\r\n\r\n\t/**\r\n\t * Vertical alignment of Container's items.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<VerticalAlign>}\r\n\t */\r\n\tprotected _contentValign: $type.Optional<VerticalAlign>;\r\n\r\n\t/**\r\n\t * A [[Sprite]] instance to use as Container's background.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Make it protected\r\n\t * @type {Sprite}\r\n\t */\r\n\tpublic _background: Sprite;\r\n\r\n\t/**\r\n\t * A reference to a [[Preloader]] element to show when Container is building\r\n\t * itself.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<Preloader>}\r\n\t */\r\n\tprotected _preloader: $type.Optional<Preloader>;\r\n\r\n\t/**\r\n\t * Indicates if this container contains any focused elements, including\r\n\t * itself.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tpublic hasFocused: boolean = false;\r\n\r\n\t/**\r\n\t * Specifies if, when state is applied on this container, the same state should be applied to container's children\r\n\t * @type {boolean}\r\n\t */\r\n\tpublic setStateOnChildren: boolean = false;\r\n\r\n\t/*\r\n\t * @ignore\r\n\t */\r\n\tpublic layoutInvalid: boolean = false;\r\n\r\n\tprotected _absoluteWidth: number = 0;\r\n\tprotected _absoluteHeight: number = 0;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\r\n\t\t// Init\r\n\t\tsuper();\r\n\t\tthis.className = \"Container\";\r\n\r\n\t\tthis.element = this.paper.addGroup(\"g\");\r\n\r\n\t\tthis.pixelPerfect = false;\r\n\t\tthis._positionPrecision = 4;\r\n\r\n\t\tthis.group.add(this.element);\r\n\r\n\t\tthis.layout = \"absolute\";\r\n\t\tthis._fixedWidthGrid = false;\r\n\r\n\t\tthis.verticalCenter = \"none\";\r\n\t\tthis.horizontalCenter = \"none\";\r\n\r\n\t\tthis.children.events.on(\"inserted\", this.handleChildAdded, this);\r\n\t\tthis.children.events.on(\"removed\", this.handleChildRemoved, this);\r\n\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Handles adding of a new child into `children`. Adding new children might\r\n\t * affect the whole layout so it needs to be revalidated.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {IListEvents<Sprite>[\"inserted\"]} event Event object\r\n\t * @todo Throw an exception on adding a disposed object. Of course it's better NOT TO add disposed objects, so that what we should focus on.\r\n\t */\r\n\tpublic handleChildAdded(event: IListEvents<Sprite>[\"inserted\"]): void {\r\n\t\tlet child: Sprite = event.newValue;\r\n\r\n\t\tthis._disposers.push(child.events.on(\"zIndexChanged\", () => {\r\n\t\t\tthis.addChildren();\r\n\t\t}));\r\n\r\n\t\t// Do not add disposed objects\r\n\t\tif ((<any>child).isDisposed()) {\r\n\t\t\tconsole.log(\"Added to children a disposed object!\");\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this.element) {\r\n\t\t\tlet group = <Group>this.element;\r\n\t\t\tgroup.add(child.group);\r\n\t\t}\r\n\r\n\t\t// TODO this is hacky\r\n\t\tif (!$type.hasValue((<any>child)._childAddedDisposer)) {\r\n\t\t\t// it's not enough to listen to POSITION_CHANGED only, as some extra redrawals will happen.\r\n\t\t\t(<any>child)._childAddedDisposer = child.events.on(\"transformed\", this.handleChildTransform, this);\r\n\t\t\t//@todo: temporary commenting this because of error it causes when I add contents Container in AxisRange constructor. this._disposers.push((<any>child)._childAddedDisposer);\r\n\t\t}\r\n\r\n\t\tthis.invalidate();\r\n\t\tthis.invalidateLayout();\r\n\t}\r\n\r\n\t/**\r\n\t * Handles child removal. Changing size of the child may change the\r\n\t * whole layout of the Container, hence layout needs to be invalidated.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {IListEvents<Sprite>[\"removed\"]} event Event object\r\n\t */\r\n\tpublic handleChildRemoved(event: IListEvents<Sprite>[\"removed\"]): void {\r\n\t\tlet child: Sprite = event.oldValue;\r\n\r\n\t\t// TODO figure out why this is sometimes undefined\r\n\t\t// TODO this is hacky\r\n\t\tif ($type.hasValue((<any>child)._childAddedDisposer)) {\r\n\t\t\tthis.removeDispose((<any>child)._childAddedDisposer);\r\n\t\t\t//(<any>child)._childAddedDisposer.dispose();\r\n\t\t\tdelete (<any>child)._childAddedDisposer;\r\n\t\t}\r\n\r\n\t\tif (this.element) {\r\n\t\t\tlet group = <Group>this.element;\r\n\t\t\tgroup.removeElement(child.group);\r\n\t\t}\r\n\r\n\t\tif (child.isMeasured) {\r\n\t\t\tthis.invalidateLayout();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Handles child transformation. Changing size of the child may change the\r\n\t * whole layout of the Container, hence layout needs to be invalidated.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {AMEvent<Sprite, ISpriteEvents>[\"transformed\"]} event Event object\r\n\t */\r\n\tpublic handleChildTransform(event: AMEvent<Sprite, ISpriteEvents>[\"transformed\"]): void {\r\n\t\tlet child: Sprite = event.target;\r\n\t\tif (child.isMeasured) {\r\n\t\t\tthis.invalidateLayout();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Invalidates Container's layout, causing it to be re-evaluated again.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic invalidateLayout(): void {\r\n\t\tif (this.disabled || this.isTemplate || this.layout == \"none\") {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//this.validateLayout();\r\n\t\tif (!this.layoutInvalid) {\r\n\t\t\tthis.layoutInvalid = true;\r\n\t\t\t$array.add(registry.invalidLayouts, this);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Invalidates the whole element, including layout.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic invalidate(): void {\r\n\t\tsuper.invalidate();\r\n\t\tthis.invalidateLayout();\r\n\t}\r\n\r\n\t/**\r\n\t * Invalidates the whole element, including layout AND all its child\r\n\t * elements.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic deepInvalidate(): void {\r\n\t\tsuper.invalidate();\r\n\t\tthis.sortChildren();\r\n\r\n\t\t$array.each(this._childrenByLayout, (child) => {\r\n\t\t\tif (child instanceof Container) {\r\n\t\t\t\tchild.deepInvalidate();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tchild.invalidate();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.invalidateLayout();\r\n\t}\r\n\r\n\t/**\r\n\t * Appends `<defs>` section to the element. This section holds all the SVG\r\n\t * definitions for the element, such as filters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic appendDefs(): void {\r\n\t\tsuper.appendDefs();\r\n\t\t$array.each(this._childrenByLayout, (child) => {\r\n\t\t\tif (child instanceof Container) {\r\n\t\t\t\tchild.appendDefs();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tchild.appendDefs();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a list of the child [[Sprite]] elements contained in this\r\n\t * Container.\r\n\t *\r\n\t * @return {List<Sprite>} List of child elements (Sprites)\r\n\t */\r\n\tpublic get children(): List<Sprite> {\r\n\t\t// @todo Review if we can add all children to disposers\r\n\t\tif (!this._children) {\r\n\t\t\tthis._children = new List<Sprite>();\r\n\t\t\tthis._children.events.on(\"inserted\", (event) => {\r\n\t\t\t\tthis.dispatchImmediately(\"childadded\", { type: \"childadded\", newValue: event.newValue });\r\n\t\t\t});\r\n\r\n\t\t\tthis._children.events.on(\"inserted\", (event) => {\r\n\t\t\t\tthis.dispatchImmediately(\"childremoved\", { type: \"childremoved\", newValue: event.newValue });\r\n\t\t\t});\r\n\t\t\t//this._disposers.push(new ListDisposer(this._children));\r\n\t\t}\r\n\t\treturn this._children;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets minimum width (px) for the Container. A container will not\r\n\t * auto-shrink beyond this value, even if child elements are smaller.\r\n\t *\r\n\t * @param {Optional<number>} value Width (px)\r\n\t */\r\n\tpublic set minWidth(value: Optional<number>) {\r\n\t\tif (this.setPropertyValue(\"minWidth\", value)) {\r\n\t\t\tthis.invalidateLayout();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Retruns current minimum width. (px)\r\n\t *\r\n\t * @return {Optional<number>} Width (px)\r\n\t */\r\n\tpublic get minWidth(): Optional<number> {\r\n\t\treturn this.getPropertyValue(\"minWidth\");\r\n\t}\r\n\r\n\t/**\r\n\t * Sets minimum height (px) for the Container. A container will not\r\n\t * auto-shrink beyond this value, even if child elements are smaller.\r\n\t * @param {Optional<number>} value Height (px)\r\n\t */\r\n\tpublic set minHeight(value: Optional<number>) {\r\n\t\tif (this.setPropertyValue(\"minHeight\", value)) {\r\n\t\t\tthis.invalidateLayout();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Retruns current minimum height. (px)\r\n\t *\r\n\t * @return {Optional<number>} Height (px)\r\n\t */\r\n\tpublic get minHeight(): Optional<number> {\r\n\t\treturn this.getPropertyValue(\"minHeight\");\r\n\t}\r\n\r\n\t/**\r\n\t * Sets maximum width (px) for the Container. A container will not\r\n\t * grow beyond this value, even if child elements do not fit.\r\n\t *\r\n\t * @param {Optional<number>} value Width (px)\r\n\t */\r\n\tpublic set maxWidth(value: number) {\r\n\t\tif (this.setPropertyValue(\"maxWidth\", value)) {\r\n\t\t\tif ($type.isNumber(this.relativeWidth)) {\r\n\t\t\t\tthis.invalidateLayout();\r\n\t\t\t}\r\n\r\n\t\t\tthis.dispatchImmediately(\"maxsizechanged\");\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Retruns current maximum width. (px)\r\n\t *\r\n\t * @return {Optional<number>} Width (px)\r\n\t */\r\n\tpublic get maxWidth(): number {\r\n\t\tlet maxWidth = this.getPropertyValue(\"maxWidth\");\r\n\r\n\t\tif (!$type.isNumber(maxWidth)) {\r\n\t\t\tif (this.parent) {\r\n\t\t\t\treturn this.parent.maxWidth; // used to be pixelWidth, but this causes problems\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn maxWidth;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets maximum height (px) for the Container. A container will not\r\n\t * grow beyond this value, even if child elements do not fit.\r\n\t *\r\n\t * @param {Optional<number>} value Height (px)\r\n\t */\r\n\tpublic set maxHeight(value: number) {\r\n\t\tif (this.setPropertyValue(\"maxHeight\", value)) {\r\n\t\t\tif ($type.isNumber(this.relativeHeight)) {\r\n\t\t\t\tthis.invalidateLayout();\r\n\t\t\t}\r\n\t\t\tthis.dispatchImmediately(\"maxsizechanged\");\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Retruns current maximum height. (px)\r\n\t *\r\n\t * @return {Optional<number>} Height (px)\r\n\t */\r\n\tpublic get maxHeight(): number {\r\n\t\tlet maxHeight = this.getPropertyValue(\"maxHeight\");\r\n\t\tif (!$type.isNumber(maxHeight)) {\r\n\t\t\tif (this.parent) {\r\n\t\t\t\treturn this.parent.maxHeight; // used to be pixelHeight, but this causes problems\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn maxHeight;\r\n\t}\r\n\r\n\t/**\r\n\t * Overrides the original `removeElement` so that Container's actual element\r\n\t * is not removed. We do not need to remove element of a Container.\r\n\t *\r\n\t * We do this because remove element each time will fail the `getBBox`.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tprotected removeElement(): void {\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sorts Container's children: the ones with variable width and height are\r\n\t * put at the end of the list (depending on layout type), so that fixed-width\r\n\t * ones can be drawn first.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {Sprite[]}  children  Container's children (elements)\r\n\t */\r\n\tpublic sortChildren(children?: Sprite[]): void {\r\n\r\n\t\tif (children) {\r\n\t\t\tlet length = children.length;\r\n\r\n\t\t\tfor (let i = 0; i < length; ++i) {\r\n\t\t\t\tlet child: Sprite = children[i];\r\n\t\t\t\t// TODO don't do anything if the indexes are the same ?\r\n\t\t\t\tif (this.children.indexOf(child) != -1) {\r\n\t\t\t\t\tthis.children.moveValue(child, i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._childrenByLayout = [];\r\n\r\n\t\tif (this.layout == \"none\" || this.layout == \"absolute\" || !this.layout) {\r\n\t\t\t//$iter.each(this.children.iterator(), (child) => {\r\n\t\t\t//\tthis._childrenByLayout.push(child);\r\n\t\t\t//});\r\n\t\t\tthis._childrenByLayout = this.children.values;\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// Assemble fixed-size and relative lists\r\n\t\t\tlet fixed: Sprite[] = [];\r\n\t\t\tlet relative: Sprite[] = [];\r\n\r\n\t\t\t$iter.each(this.children.iterator(), (child) => {\r\n\t\t\t\tif (this.layout == \"horizontal\" || this.layout == \"grid\") {\r\n\t\t\t\t\tif (!$type.isNumber(child.percentWidth)) {\r\n\t\t\t\t\t\tfixed.push(child);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\trelative.push(child);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse if (this.layout == \"vertical\") {\r\n\t\t\t\t\tif (!$type.isNumber(child.percentHeight)) {\r\n\t\t\t\t\t\tfixed.push(child);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\trelative.push(child);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfixed.push(child);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// Concat everything into list\r\n\t\t\tthis._childrenByLayout = fixed.concat(relative);\r\n\t\t}\r\n\r\n\t\tthis.calculateRelativeSize();\r\n\t}\r\n\r\n\t/**\r\n\t * Calculates relative sizes for all Container's children.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Make it protected?\r\n\t */\r\n\tpublic calculateRelativeSize(): void {\r\n\t\tlet totalRelativeWidth: number = 0;\r\n\t\tlet totalRelativeHeight: number = 0;\r\n\r\n\t\t$array.each(this._childrenByLayout, (child) => {\r\n\t\t\t// if child is not measured, we do not care about it at all.\r\n\t\t\tif (child.isMeasured) {\r\n\t\t\t\tif ($type.isNumber(child.percentWidth)) {\r\n\t\t\t\t\ttotalRelativeWidth += child.percentWidth;\r\n\t\t\t\t}\r\n\t\t\t\tif ($type.isNumber(child.percentHeight)) {\r\n\t\t\t\t\ttotalRelativeHeight += child.percentHeight;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t$array.each(this._childrenByLayout, (child) => {\r\n\t\t\tif (child.isMeasured) {\r\n\t\t\t\tif (this.layout == \"horizontal\") {\r\n\t\t\t\t\tif ($type.isNumber(child.percentWidth)) {\r\n\t\t\t\t\t\tchild.relativeWidth = child.percentWidth / totalRelativeWidth;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ($type.isNumber(child.percentHeight)) {\r\n\t\t\t\t\t\t// consider adding a property which would make the container of 100% when it's height is set to % value but there is only one object with percent width set in the parent container\r\n\t\t\t\t\t\tchild.relativeHeight = child.percentHeight / 100;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (this.layout == \"vertical\") {\r\n\t\t\t\t\tif ($type.isNumber(child.percentHeight)) {\r\n\t\t\t\t\t\tchild.relativeHeight = child.percentHeight / totalRelativeHeight;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ($type.isNumber(child.percentWidth)) {\r\n\t\t\t\t\t\t// consider adding a property which would make the container of 100% when it's height is set to % value but there is only one object with percent width set in the parent container\r\n\t\t\t\t\t\tchild.relativeWidth = child.percentWidth / 100;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.layout == \"absolute\" || !child.isMeasured) {\r\n\t\t\t\tif ($type.isNumber(child.percentWidth)) {\r\n\t\t\t\t\t// consider adding a property which would make the container of 100% when it's height is set to % value but there is only one object with percent width set in the parent container\r\n\t\t\t\t\tchild.relativeWidth = child.percentWidth / 100;\r\n\t\t\t\t}\r\n\t\t\t\tif ($type.isNumber(child.percentHeight)) {\r\n\t\t\t\t\t// consider adding a property which would make the container of 100% when it's height is set to % value but there is only one object with percent width set in the parent container\r\n\t\t\t\t\tchild.relativeHeight = child.percentHeight / 100;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Adds all children to Container's SVG element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Make it protected?\r\n\t */\r\n\tpublic addChildren(): void {\r\n\t\t/*\r\n\t\t  Need this check because a child might be assigned to parent even before element is created, for example a theme\r\n\t\t  access scrollbar.thumb\r\n\t\t*/\r\n\t\tif(this.element){\r\n\t\t\tthis.sortChildren();\r\n\t\t\tlet zindexed = $array.copy(this._childrenByLayout);\r\n\t\t\tzindexed.sort((a: Sprite, b: Sprite) => {\r\n\t\t\t\treturn (a.zIndex || 0) - (b.zIndex || 0);\r\n\t\t\t});\r\n\r\n\t\t\t$array.each(zindexed, (child) => {\r\n\t\t\t\tif (child.group) {\r\n\t\t\t\t\tlet group = <Group>this.element;\r\n\t\t\t\t\tgroup.add(child.group);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a new element of specific type and assigns as a child to the\r\n\t * Container.\r\n\t *\r\n\t * @param  {T extends Sprite}  Class type for the new element\r\n\t * @return {T}                 New element\r\n\t */\r\n\tpublic createChild<T extends Sprite>(classType: { new(): T; }): T {\r\n\t\tlet sprite = new classType();\r\n\t\tsprite.parent = this;\r\n\t\treturn sprite;\r\n\t}\r\n\r\n\t/**\r\n\t * Removes all Container's children without actually destroying them.\r\n\t *\r\n\t * To destroy children use `disposeChildren()` instead.\r\n\t */\r\n\tpublic removeChildren(): void {\r\n\t\t// remove all children\r\n\t\t// TODO use iteration instead\r\n\t\twhile (this.children.length > 0) {\r\n\t\t\tlet child = <Sprite>this.children.getIndex(0);\r\n\t\t\tchild.parent = undefined;\r\n\t\t\tthis.children.removeValue(child);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Removes and destroys all Container's children.\r\n\t *\r\n\t * To remove children from Container without destroying them, use\r\n\t * `removeChildren()`.\r\n\t */\r\n\tpublic disposeChildren(): void {\r\n\t\t// TODO use iteration instead\r\n\t\twhile (this.children.length > 0) {\r\n\t\t\tlet child = <Sprite>this.children.getIndex(0);\r\n\t\t\tchild.dispose();\r\n\t\t\tthis.children.removeValue(child);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * An element to use as container background.\r\n\t *\r\n\t * @param {Sprite}  background  Background element\r\n\t */\r\n\tpublic set background(background: this[\"_background\"]) {\r\n\t\tif (this._background && this.background != background) {\r\n\t\t\tthis.removeDispose(this._background);\r\n\t\t}\r\n\r\n\t\tif (background) {\r\n\t\t\tthis._background = background;\r\n\t\t\tthis._disposers.push(background);\r\n\t\t\tthis.processBackground();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Creates and returns a [[Rectangle]] to use as a background for Container.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {this} Background Rectangle element\r\n\t */\r\n\tpublic createBackground(): this[\"_background\"] {\r\n\t\treturn new Rectangle();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Sprite} Background element\r\n\t */\r\n\tpublic get background(): this[\"_background\"] {\r\n\t\tif (!this._background) {\r\n\t\t\tthis._background = this.createBackground();\r\n\t\t\tthis.processBackground();\r\n\t\t}\r\n\r\n\t\treturn this._background;\r\n\t}\r\n\r\n\t/**\r\n\t * Decorates background element with required properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic processBackground(): void {\r\n\t\tlet background = this._background;\r\n\t\tif (background) {\r\n\t\t\tbackground.isMeasured = false;\r\n\t\t\tthis._background.fill = new InterfaceColorSet().getFor(\"background\");\r\n\t\t\tbackground.parent = this;\r\n\t\t\tbackground.isMeasured = false;\r\n\t\t\tthis.children.removeValue(background);\r\n\t\t\tthis._disposers.push(background);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Measures the size of container and informs its children of how much size\r\n\t * they can occupy, by setting their relative `maxWidth` and `maxHeight`\r\n\t * properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic validateLayout(): void {\r\n\r\n\t\t$array.remove(registry.invalidLayouts, this);\r\n\r\n\t\tthis.layoutInvalid = false;\r\n\r\n\t\tthis._availableWidth = this.innerWidth;\r\n\t\tthis._availableHeight = this.innerHeight;\r\n\r\n\t\tlet measuredWidth = 0;\r\n\t\tlet measuredHeight = 0;\r\n\r\n\t\tlet allValid = true;\r\n\r\n\t\tif (this.children) {\r\n\r\n\t\t\tthis.sortChildren();\r\n\r\n\t\t\t// we itterate through list of children, sorted by layout priority. sprites which width non-relative width/height will go first, so we will reduce available width before proceeding to sprites with relative width/height\r\n\t\t\t$array.each(this._childrenByLayout, (child) => {\r\n\t\t\t\tlet maxWidth: number;\r\n\t\t\t\tlet maxHeight: number;\r\n\r\n\t\t\t\tif ($type.isNumber(child.relativeWidth)) {\r\n\t\t\t\t\tmaxWidth = $math.round(this._availableWidth * child.relativeWidth);\r\n\t\t\t\t\tif (this.layout == \"horizontal\") {// || this.layout == \"absolute\") { \r\n\t\t\t\t\t\tmaxWidth -= child.pixelMarginRight + child.pixelMarginLeft;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tif (this.layout == \"horizontal\") {\r\n\t\t\t\t\t\tif (child.invalid) {\r\n\t\t\t\t\t\t\tchild.validate();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ($type.isNumber(child.relativeHeight)) {\r\n\t\t\t\t\tmaxHeight = $math.round(this._availableHeight * child.relativeHeight);\r\n\t\t\t\t\tif (this.layout == \"vertical\") {//  || this.layout == \"absolute\") { \r\n\t\t\t\t\t\tmaxHeight -= child.pixelMarginTop + child.pixelMarginBottom;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tif (this.layout == \"vertical\") {\r\n\t\t\t\t\t\tif (child.invalid) {\r\n\t\t\t\t\t\t\tchild.validate();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// if child is valid\r\n\t\t\t\tif (child.invalid == false) {\r\n\r\n\t\t\t\t\tif ($type.isNumber(child.relativeWidth)) {\r\n\t\t\t\t\t\tchild.maxWidth = maxWidth;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ($type.isNumber(child.relativeHeight)) {\r\n\t\t\t\t\t\tchild.maxHeight = maxHeight;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (child.isMeasured) {\r\n\t\t\t\t\t\t// reduce available width if this is horizontal layout\r\n\t\t\t\t\t\tif (this.layout == \"horizontal\") {\r\n\t\t\t\t\t\t\tif (!$type.isNumber(child.percentWidth)) {\r\n\t\t\t\t\t\t\t\tif (child.measuredWidth > 0) {\r\n\t\t\t\t\t\t\t\t\tthis._availableWidth -= child.measuredWidth + child.pixelMarginLeft + child.pixelMarginRight;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// reduce available height if this is vertical layout\r\n\t\t\t\t\t\tif (this.layout == \"vertical\") {\r\n\t\t\t\t\t\t\tif (!$type.isNumber(child.percentHeight)) {\r\n\t\t\t\t\t\t\t\tif (child.measuredHeight > 0) {\r\n\t\t\t\t\t\t\t\t\tthis._availableHeight -= child.measuredHeight + child.pixelMarginTop + child.pixelMarginBottom;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tlet childMeasuredWidth = child.measuredWidth;\r\n\t\t\t\t\t\tlet childMeasuredHeight = child.measuredHeight;\r\n\r\n\t\t\t\t\t\tif (child.align != \"none\") {\r\n\t\t\t\t\t\t\tchildMeasuredWidth += child.pixelMarginLeft + child.pixelMarginRight;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (child.valign != \"none\") {\r\n\t\t\t\t\t\t\tchildMeasuredHeight += child.pixelMarginTop + child.pixelMarginBottom;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tmeasuredWidth = Math.max(measuredWidth, childMeasuredWidth);\r\n\t\t\t\t\t\tmeasuredHeight = Math.max(measuredHeight, childMeasuredHeight);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// if child is not valid\r\n\t\t\t\telse {\r\n\t\t\t\t\t// tell child what maximum width/ height it can occupy\r\n\t\t\t\t\tif (child.isMeasured) {\r\n\t\t\t\t\t\tif ($type.isNumber(child.relativeWidth)) {\r\n\t\t\t\t\t\t\tif (child.maxWidth != maxWidth) { // need to check this because of allValid\r\n\t\t\t\t\t\t\t\tchild.maxWidth = maxWidth;\r\n\t\t\t\t\t\t\t\tallValid = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ($type.isNumber(child.relativeHeight)) {\r\n\t\t\t\t\t\t\tif (child.maxHeight != maxHeight) { // need to check this because of allValid\r\n\t\t\t\t\t\t\t\tchild.maxHeight = maxHeight;\r\n\t\t\t\t\t\t\t\tallValid = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis._absoluteWidth = measuredWidth;\r\n\t\tthis._absoluteHeight = measuredHeight;\r\n\r\n\t\t// arrange after measuring, only if all children are valid already\r\n\t\tif (allValid) {\r\n\t\t\tthis.arrange();\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Arranges children according to layout specs and available space / child\r\n\t * sizes.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic arrange(): void {\r\n\t\tif (this.children) {\r\n\t\t\t/*\r\n\t\t\t   in this method we not only arrange children but also find out the size of the container\r\n\t\t\t   it might seem it would be easier to get container size using sprite's measure method,\r\n\t\t\t   however it would return only actual size of the bbox. However as each child meight have\r\n\t\t\t   margins set, we need to check each child - we do it here.\r\n\r\n\t\t\t   This method doesn't do anything with DOM, so it's not expensive\r\n\t\t\t*/\r\n\t\t\tlet measuredWidth: number = 0;\r\n\t\t\tlet measuredHeight: number = 0;\r\n\r\n\t\t\t//let innerWidth: number = this.innerWidth; //$math.max(this.innerWidth, this._measuredWidth - paddingLeft - paddingRight);\r\n\t\t\t//let innerHeight: number = this.innerHeight; //$math.max(this.innerHeight, this._measuredHeight - paddingTop - paddingBottom);\r\n\t\t\t// above is wrong, as if a w/h is not specified, it is 0 and alignment doesn't work at all.\r\n\t\t\tlet innerWidth: number = $math.max(this.innerWidth, this._absoluteWidth);\r\n\t\t\tlet innerHeight: number = $math.max(this.innerHeight, this._absoluteHeight);\r\n\r\n\t\t\tlet left: $type.Optional<number>;// = 0;\r\n\t\t\tlet right: $type.Optional<number>;// = innerWidth;\r\n\t\t\tlet top: $type.Optional<number>;// = 0;\r\n\t\t\tlet bottom: $type.Optional<number>;// = innerHeight;\r\n\r\n\t\t\tlet paddingLeft: number = this.pixelPaddingLeft;\r\n\t\t\tlet paddingRight: number = this.pixelPaddingRight;\r\n\t\t\tlet paddingTop: number = this.pixelPaddingTop;\r\n\t\t\tlet paddingBottom: number = this.pixelPaddingBottom;\r\n\r\n\t\t\tlet nextX: number = 0;\r\n\t\t\tlet nextY: number = 0;\r\n\t\t\tlet row: number = 0;\r\n\t\t\tlet column: number = 0;\r\n\r\n\t\t\tlet columnWidth: number[] = [];\r\n\t\t\tlet rowHeight: number[] = [];\r\n\r\n\t\t\tlet maxCellWidth: $type.Optional<number>;\r\n\t\t\tlet minCellWidth: $type.Optional<number>;\r\n\t\t\tlet columnCount: $type.Optional<number>;\r\n\r\n\t\t\t// GRID PRECALCULATIONS\r\n\t\t\tif (this.layout == \"grid\") {\r\n\r\n\t\t\t\tminCellWidth = $math.fitToRange($iter.min($iter.map(this.children.iterator(), (x) => x.measuredWidth)), 1, this.maxWidth);\r\n\t\t\t\tmaxCellWidth = $math.fitToRange($iter.max($iter.map(this.children.iterator(), (x) => x.measuredWidth)), 1, this.maxWidth);\r\n\r\n\t\t\t\tif (this.fixedWidthGrid) {\r\n\t\t\t\t\tcolumnCount = this.maxWidth / maxCellWidth;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tcolumnCount = this.maxWidth / minCellWidth; // predicted number of columns, yes it is usually much more than real number, but we fix that later\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcolumnCount = $math.max(1, Math.floor(columnCount));\r\n\t\t\t\tcolumnWidth = this.getColumnWidth(columnCount, maxCellWidth);\r\n\t\t\t}\r\n\r\n\t\t\tlet contentLeft: $type.Optional<number>;\r\n\t\t\tlet contentRight: $type.Optional<number>;\r\n\t\t\tlet contentTop: $type.Optional<number>;\r\n\t\t\tlet contentBottom: $type.Optional<number>;\r\n\r\n\t\t\t// we itterate through array of children\r\n\t\t\t// TODO use iterator instead\r\n\t\t\tfor (let i: number = 0, len = this.children.length; i < len; i++) {\r\n\t\t\t\tlet child = <Sprite>this.children.getIndex(i);\r\n\r\n\t\t\t\tlet x: $type.Optional<number> = undefined; // must reset\r\n\t\t\t\tlet y: $type.Optional<number> = undefined; // must reset\r\n\r\n\t\t\t\tlet childMarginLeft: number = child.pixelMarginLeft;\r\n\t\t\t\tlet childMarginRight: number = child.pixelMarginRight;\r\n\t\t\t\tlet childMarginTop: number = child.pixelMarginTop;\r\n\t\t\t\tlet childMarginBottom: number = child.pixelMarginBottom;\r\n\r\n\t\t\t\tlet childWidth: number = child.measuredWidth;\r\n\t\t\t\tlet childHeight: number = child.measuredHeight;\r\n\r\n\t\t\t\tlet childLeft: $type.Optional<number>;\r\n\t\t\t\tlet childRight: $type.Optional<number>;\r\n\t\t\t\tlet childTop: $type.Optional<number>;\r\n\t\t\t\tlet childBottom: $type.Optional<number>;\r\n\r\n\t\t\t\tif (child.isMeasured && !child.disabled && !child.__disabled) {\r\n\t\t\t\t\tswitch (this.layout) {\r\n\t\t\t\t\t\t// absolute layout\r\n\t\t\t\t\t\tcase \"absolute\":\r\n\t\t\t\t\t\t\t// horizontal alignment\r\n\t\t\t\t\t\t\tswitch (child.align) {\r\n\t\t\t\t\t\t\t\tcase \"left\":\r\n\t\t\t\t\t\t\t\t\tx = childMarginLeft - child.maxLeft;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase \"center\":\r\n\t\t\t\t\t\t\t\t\tx = (innerWidth - childWidth) / 2 - child.maxLeft;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase \"right\":\r\n\t\t\t\t\t\t\t\t\tx = innerWidth - childMarginRight - child.maxRight;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\tif (!(child.x instanceof Percent)) {\r\n\t\t\t\t\t\t\t\t\t\tx = child.pixelX;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// vertical alignment\r\n\t\t\t\t\t\t\tswitch (child.valign) {\r\n\t\t\t\t\t\t\t\tcase \"top\":\r\n\t\t\t\t\t\t\t\t\ty = childMarginTop - child.maxTop;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase \"middle\":\r\n\t\t\t\t\t\t\t\t\ty = (innerHeight - childHeight) / 2 - child.maxTop;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase \"bottom\":\r\n\t\t\t\t\t\t\t\t\ty = innerHeight - childMarginBottom - child.maxBottom;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\tif (!(child.y instanceof Percent)) {\r\n\t\t\t\t\t\t\t\t\t\ty = child.pixelY;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t// vertical layout\r\n\t\t\t\t\t\tcase \"vertical\":\r\n\t\t\t\t\t\t\t//if ($type.isNumber(child.relativeHeight)) {\r\n\t\t\t\t\t\t\t//\tchildHeight = child.maxHeight;\r\n\t\t\t\t\t\t\t//}\r\n\r\n\t\t\t\t\t\t\tswitch (child.align) {\r\n\t\t\t\t\t\t\t\tcase \"left\":\r\n\t\t\t\t\t\t\t\t\tx = childMarginLeft - child.maxLeft;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase \"center\":\r\n\t\t\t\t\t\t\t\t\tx = (innerWidth - childWidth) / 2 - child.maxLeft;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase \"right\":\r\n\t\t\t\t\t\t\t\t\tx = innerWidth - childMarginRight - child.maxRight;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\tx = child.pixelX;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\ty = nextY + childMarginTop - child.maxTop;\r\n\t\t\t\t\t\t\tnextY = y + child.maxBottom + childMarginBottom;\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t// horizontal layout\r\n\t\t\t\t\t\tcase \"horizontal\":\r\n\r\n\t\t\t\t\t\t\t//if ($type.isNumber(child.relativeHeight)) {\r\n\t\t\t\t\t\t\t//\tchildHeight = child.maxHeight;\r\n\t\t\t\t\t\t\t//}\r\n\r\n\t\t\t\t\t\t\tswitch (child.valign) {\r\n\t\t\t\t\t\t\t\tcase \"top\":\r\n\t\t\t\t\t\t\t\t\ty = childMarginTop - child.maxTop;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase \"middle\":\r\n\t\t\t\t\t\t\t\t\ty = (innerHeight - childHeight) / 2 - child.maxTop;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase \"bottom\":\r\n\t\t\t\t\t\t\t\t\ty = innerHeight - childMarginBottom - child.maxBottom;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\ty = child.pixelY;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tx = nextX + childMarginLeft - child.maxLeft;\r\n\t\t\t\t\t\t\tnextX = x + child.maxRight + childMarginRight;\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase \"grid\":\r\n\t\t\t\t\t\t\tx = nextX + childMarginLeft - child.maxLeft;\r\n\t\t\t\t\t\t\tswitch (child.valign) {\r\n\t\t\t\t\t\t\t\tcase \"top\":\r\n\t\t\t\t\t\t\t\t\ty = nextY + childMarginTop - child.maxTop;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase \"middle\":\r\n\t\t\t\t\t\t\t\t\ty = nextY + (innerHeight - childHeight) / 2 - child.maxTop;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase \"bottom\":\r\n\t\t\t\t\t\t\t\t\ty = nextY + innerHeight - childMarginBottom - child.maxBottom;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\ty = nextY - child.maxTop;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tnextX += columnWidth[column];\r\n\r\n\t\t\t\t\t\t\trowHeight[row] = $math.max(rowHeight[row], childHeight);\r\n\t\t\t\t\t\t\tcolumn++;\r\n\r\n\t\t\t\t\t\t\tlet nextColumnWidth: $type.Optional<number> = columnWidth[column];\r\n\r\n\t\t\t\t\t\t\tif (!$type.isNumber(nextColumnWidth)) {\r\n\t\t\t\t\t\t\t\tnextColumnWidth = maxCellWidth;\r\n\t\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\t\t// here we reduce number of columns\r\n\t\t\t\t\t\t\tif (nextX > $math.min(this.innerWidth, this.maxWidth) - nextColumnWidth && column < columnCount) {\r\n\t\t\t\t\t\t\t\tcolumnCount = column - 1; // cause we added one and we need current item to go to next row\r\n\r\n\t\t\t\t\t\t\t\tnextX = 0;\r\n\t\t\t\t\t\t\t\tnextY = 0;\r\n\r\n\t\t\t\t\t\t\t\trow = 0;\r\n\t\t\t\t\t\t\t\tcolumn = 0;\r\n\r\n\t\t\t\t\t\t\t\tcolumnWidth = this.getColumnWidth(columnCount, maxCellWidth);\r\n\t\t\t\t\t\t\t\trowHeight = [];\r\n\r\n\t\t\t\t\t\t\t\ti = -1;\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (column >= columnCount) {\r\n\t\t\t\t\t\t\t\tcolumn = 0;\r\n\t\t\t\t\t\t\t\tnextY += rowHeight[row];\r\n\t\t\t\t\t\t\t\trow++;\r\n\t\t\t\t\t\t\t\tnextX = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// NaN is handled by setter\r\n\t\t\t\t\tchild.moveTo({ x: x, y: y });\r\n\r\n\t\t\t\t\tchildLeft = x + child.maxLeft - childMarginLeft;\r\n\t\t\t\t\tchildRight = x + child.maxRight + childMarginRight;\r\n\t\t\t\t\tchildTop = y + child.maxTop - childMarginTop;\r\n\t\t\t\t\tchildBottom = y + child.maxBottom + childMarginBottom;\r\n\r\n\t\t\t\t\t/* not good, maybe leave this for absolute layouts only\r\n\t\t\t\t\t\t\t\t\t\tif (child.align == \"none\") {\r\n\t\t\t\t\t\t\t\t\t\t\tchildLeft += childMarginLeft;\r\n\t\t\t\t\t\t\t\t\t\t\tchildRight -= childMarginRight;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tif (child.valign == \"none\") {\r\n\t\t\t\t\t\t\t\t\t\t\tchildTop += childMarginTop;\r\n\t\t\t\t\t\t\t\t\t\t\tchildBottom -= childMarginBottom;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t*/\r\n\r\n\r\n\t\t\t\t\tif (childRight > right || !$type.isNumber(right)) {\r\n\t\t\t\t\t\tright = childRight;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (childLeft < left || !$type.isNumber(left)) {\r\n\t\t\t\t\t\tleft = childLeft;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (childTop < top || !$type.isNumber(top)) {\r\n\t\t\t\t\t\ttop = childTop;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (childBottom > bottom || !$type.isNumber(bottom)) {\r\n\t\t\t\t\t\tbottom = childBottom;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (childRight > contentRight || !$type.isNumber(contentRight)) {\r\n\t\t\t\t\t\tcontentRight = childRight;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (childLeft < contentLeft || !$type.isNumber(contentLeft)) {\r\n\t\t\t\t\t\tcontentLeft = childLeft;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (childTop < contentTop || !$type.isNumber(contentTop)) {\r\n\t\t\t\t\t\tcontentTop = childTop;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (childBottom > contentBottom || !$type.isNumber(contentBottom)) {\r\n\t\t\t\t\t\tcontentBottom = contentBottom;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (!$type.isNumber(left)) {\r\n\t\t\t\tleft = 0;\r\n\t\t\t\tcontentLeft = 0;\r\n\t\t\t}\r\n\r\n\t\t\tif (!$type.isNumber(right)) {\r\n\t\t\t\tright = this._availableWidth;\r\n\t\t\t\tcontentRight = right;\r\n\t\t\t}\r\n\r\n\t\t\tif (!$type.isNumber(top)) {\r\n\t\t\t\ttop = 0;\r\n\t\t\t\tcontentTop = 0;\r\n\t\t\t}\r\n\r\n\t\t\tif (!$type.isNumber(bottom)) {\r\n\t\t\t\tbottom = this._availableHeight;\r\n\t\t\t\tcontentBottom = bottom;\r\n\t\t\t}\r\n\r\n\t\t\tif (!$type.isNumber(contentTop)) {\r\n\t\t\t\tcontentTop = 0;\r\n\t\t\t}\r\n\r\n\t\t\tif (!$type.isNumber(contentBottom)) {\r\n\t\t\t\tcontentBottom = contentTop;\r\n\t\t\t}\r\n\r\n\t\t\tif (!$type.isNumber(contentLeft)) {\r\n\t\t\t\tcontentLeft = 0;\r\n\t\t\t}\r\n\r\n\t\t\tif (!$type.isNumber(contentRight)) {\r\n\t\t\t\tcontentRight = contentLeft;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tmeasuredWidth = right - left;\r\n\t\t\tmeasuredHeight = bottom - top;\r\n\r\n\t\t\tif ($type.isNumber(this.relativeWidth)) {\r\n\t\t\t\tmeasuredWidth = this.maxWidth - this.pixelPaddingLeft - this.pixelPaddingRight;\r\n\t\t\t\tleft = 0;\r\n\t\t\t\tright = measuredWidth;\r\n\t\t\t}\r\n\r\n\t\t\tif ($type.isNumber(this.relativeHeight)) {\r\n\t\t\t\tmeasuredHeight = this.maxHeight - this.pixelPaddingTop - this.pixelPaddingBottom;\r\n\t\t\t\ttop = 0;\r\n\t\t\t\tbottom = measuredHeight;\r\n\t\t\t}\r\n\r\n\t\t\tif ($type.isNumber(this._pixelWidth)) {\r\n\t\t\t\tleft = 0;\r\n\t\t\t\tmeasuredWidth = this._pixelWidth;\r\n\t\t\t}\r\n\r\n\t\t\tif ($type.isNumber(this.minWidth) && measuredWidth < this.minWidth) {\r\n\t\t\t\tleft = 0;\r\n\t\t\t\tmeasuredWidth = this.minWidth;\r\n\t\t\t}\r\n\r\n\t\t\tif ($type.isNumber(this._pixelHeight)) {\r\n\t\t\t\ttop = 0;\r\n\t\t\t\tmeasuredHeight = this._pixelHeight;\r\n\t\t\t}\r\n\r\n\t\t\tif ($type.isNumber(this.minHeight) && measuredHeight < this.minHeight) {\r\n\t\t\t\ttop = 0;\r\n\t\t\t\tmeasuredHeight = this.minHeight;\r\n\t\t\t}\r\n\r\n\t\t\tlet measuredContentWidth = contentRight - contentLeft;\r\n\t\t\tlet measuredContentHeight = contentBottom - contentTop;\r\n\r\n\r\n\r\n\t\t\t/// handle content alignment\r\n\t\t\tlet dx: $type.Optional<number>;\r\n\t\t\tlet dy: $type.Optional<number>;\r\n\r\n\r\n\t\t\tlet mwa = measuredWidth;\r\n\t\t\tlet mha = measuredHeight;\r\n\t\t\tif (mwa < measuredContentWidth) {\r\n\t\t\t\tmwa = measuredContentWidth;\r\n\t\t\t}\r\n\r\n\t\t\tif (mha < measuredContentHeight) {\r\n\t\t\t\tmha = measuredContentHeight;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.contentAlign == \"center\") {\r\n\t\t\t\tdx = (mwa - measuredContentWidth) / 2;\r\n\t\t\t}\r\n\t\t\tif (this.contentAlign == \"right\") {\r\n\t\t\t\tdx = mwa - measuredContentWidth;\r\n\t\t\t}\r\n\t\t\tif (this.contentValign == \"middle\") {\r\n\t\t\t\tdy = (mha - measuredContentHeight) / 2;\r\n\t\t\t}\r\n\t\t\tif (this.contentValign == \"bottom\") {\r\n\t\t\t\tdy = mha - measuredContentHeight;\r\n\t\t\t}\r\n\r\n\t\t\tif ($type.isNumber(dx)) {\r\n\t\t\t\t$iter.each(this.children.iterator(), (child) => {\r\n\t\t\t\t\tlet childLeft: number = child.maxLeft;\r\n\r\n\t\t\t\t\tlet ddx: number = dx;\r\n\r\n\t\t\t\t\tif (this.layout == \"horizontal\") {\r\n\t\t\t\t\t\tchild.x = child.pixelX + ddx;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// individual grid elements can not be aligned vertically, that's why it's different from horizontal\r\n\t\t\t\t\tif (this.layout == \"grid\") {\r\n\t\t\t\t\t\tchild.x = child.pixelX + ddx;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.layout == \"vertical\") {\r\n\t\t\t\t\t\tddx += child.pixelMarginLeft;\r\n\t\t\t\t\t\tif (child.align == \"none\") {\r\n\t\t\t\t\t\t\tchild.x = ddx - childLeft;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (this.layout == \"absolute\") {\r\n\t\t\t\t\t\tddx += child.pixelMarginLeft;\r\n\t\t\t\t\t\tif (child.align == \"none\") {\r\n\t\t\t\t\t\t\tchild.x = ddx - childLeft;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif ($type.isNumber(dy)) {\r\n\t\t\t\t$iter.each(this.children.iterator(), (child) => {\r\n\t\t\t\t\tlet childTop: number = child.maxTop;\r\n\r\n\t\t\t\t\tlet ddy: number = dy;\r\n\r\n\t\t\t\t\tif (this.layout == \"horizontal\") {\r\n\t\t\t\t\t\tddy += child.pixelMarginTop;\r\n\t\t\t\t\t\tif (child.valign == \"none\") {\r\n\t\t\t\t\t\t\tchild.y = ddy - childTop;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// individual grid elements can not be aligned vertically, that's why it's different from horizontal\r\n\t\t\t\t\tif (this.layout == \"grid\") {\r\n\t\t\t\t\t\tddy += child.pixelMarginTop;\r\n\t\t\t\t\t\tchild.y = ddy - childTop;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.layout == \"vertical\") {\r\n\t\t\t\t\t\tchild.y = child.pixelY + ddy;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (this.layout == \"absolute\") {\r\n\t\t\t\t\t\tddy += child.pixelMarginTop;\r\n\r\n\t\t\t\t\t\tif (child.valign == \"none\") {\r\n\t\t\t\t\t\t\tchild.y = ddy - childTop;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tlet oldBBox = this.bbox;\r\n\r\n\r\n\t\t\t// this will mess up maxw/maxh set by container layout, we need a separate min/maxwidth for users\r\n\t\t\t// this prevents invalidating layout in such cases as scrolling category axis, when labels go outside bounds and results transformed event\r\n\t\t\t// todo: need to check if this doesn't cause other problems.\r\n\t\t\t//if (this.maxWidth > 0) {\r\n\t\t\t//measuredWidth = $math.min(measuredWidth, this.maxWidth);\r\n\t\t\t//measuredWidth = $math.max(measuredWidth, this.minWidth);\r\n\t\t\t//}\r\n\r\n\t\t\t//if (this.maxHeight > 0) {\r\n\t\t\t//measuredHeight = $math.min(measuredHeight, this.maxHeight);\r\n\t\t\t//measuredHeight = $math.max(measuredHeight, this.minHeight);\t\t\t\t\r\n\t\t\t//}\r\n\r\n\t\t\tmeasuredWidth = $math.max(measuredWidth, this.minWidth);\r\n\t\t\tmeasuredHeight = $math.max(measuredHeight, this.minHeight);\r\n\r\n\t\t\tthis.bbox = this.getContainerBBox(left, top, measuredWidth, measuredHeight);\r\n\r\n\t\t\tlet prevLeft = this.maxLeft;\r\n\t\t\tlet prevTop = this.maxTop;\r\n\t\t\tlet prevBotttom = this.maxBottom;\r\n\t\t\tlet prevRight = this.maxRight;\r\n\r\n\t\t\tthis.measure();\r\n\r\n\t\t\t//if (!oldBBox || ($math.round(oldBBox.width, 1) != $math.round(measuredWidth, 1) || $math.round(oldBBox.height, 1) != $math.round(measuredHeight, 1))) {\r\n\r\n\t\t\tif (prevLeft != this.maxLeft || prevRight != this.maxRight || prevTop != this.maxTop || prevBotttom != this.maxBottom) {\r\n\t\t\t\tif (this.events.isEnabled(\"transformed\")) {\r\n\t\t\t\t\tlet event: AMEvent<this, IContainerEvents>[\"transformed\"] = {\r\n\t\t\t\t\t\ttype: \"transformed\",\r\n\t\t\t\t\t\ttarget: this\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (oldBBox) {\r\n\t\t\t\t\t\tevent.dummyData = oldBBox.width + \" \" + measuredWidth + \"  \" + oldBBox.height + \" \" + measuredHeight;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.events.dispatchImmediately(\"transformed\", event);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprotected getContainerBBox(x: number, y: number, width: number, height: number): IRectangle {\r\n\t\tif (this.definedBBox) {\r\n\t\t\treturn this.definedBBox;\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn { x: x, y: y, width: width, height: height };\r\n\t\t}\r\n\t}\r\n\r\n\tpublic updateCenter() {\r\n\t\tsuper.updateCenter();\r\n\t\tthis.updateBackground();\r\n\t}\r\n\r\n\t/**\r\n\t * Update the background to fit into specific dimensions.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Make it protected?\r\n\t */\r\n\tpublic updateBackground(): void {\r\n\t\tlet background: Sprite = this._background; // accessing protected, as getter creates instance if it doesn't exist\r\n\t\tif (background) {\r\n\t\t\tbackground.x = this.maxLeft;\r\n\t\t\tbackground.y = this.maxTop;\r\n\t\t\tbackground.width = this.maxRight - this.maxLeft;\r\n\t\t\tbackground.height = this.maxBottom - this.maxTop;\r\n\r\n\t\t\t//console.log(this._right, this._left)\r\n\r\n\t\t\tthis.group.addToBack(background.group);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns widths of all columns in a horizontal Container layout.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {number}    columnCount   Number of columns\r\n\t * @param  {number}    maxCellWidth  Maximum width of one grid cell\r\n\t * @return {number[]}                An array of column widths\r\n\t */\r\n\tpublic getColumnWidth(columnCount: number, maxCellWidth: number): number[] {\r\n\t\tlet columnWidth: number[] = [];\r\n\t\tlet column: number = 0;\r\n\r\n\t\t$iter.each(this.children.iterator(), (child) => {\r\n\t\t\tif (child.isMeasured) {\r\n\t\t\t\tif (this.fixedWidthGrid) {\r\n\t\t\t\t\tcolumnWidth[column] = maxCellWidth;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tcolumnWidth[column] = $math.max(columnWidth[column], child.measuredWidth + child.pixelMarginRight + child.pixelMarginLeft);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcolumn++;\r\n\r\n\t\t\t\tif (column == columnCount) {\r\n\t\t\t\t\tcolumn = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn columnWidth;\r\n\t}\r\n\r\n\t/**\r\n\t * Container layout.\r\n\t *\r\n\t * Options: \"absolute\" (default), \"vertical\", \"horizontal\", \"grid\", \"none\". \"none\" is quite the same as \"absolute\" - the objects will\r\n\t * be positioned at their x, y coordinates, the difference is that with \"absolute\" you can still use align/valign for children and with \"none\" you can not.\r\n\t * Use \"none\" as much as you can as it's most cpu-saving layout.\r\n\t *\r\n\t * @default \"absolute\"\r\n\t * @param {ContainerLayout} value Layout\r\n\t */\r\n\tpublic set layout(value: ContainerLayout) {\r\n\t\tif (this.setPropertyValue(\"layout\", value)) {\r\n\t\t\tthis.invalidateLayout();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {ContainerLayout} Layout\r\n\t */\r\n\tpublic get layout(): ContainerLayout {\r\n\t\treturn this.getPropertyValue(\"layout\");\r\n\t}\r\n\r\n\t/**\r\n\t * Vertical alignment of the elements for the vertical Container.\r\n\t *\r\n\t * This is used when Container is larger than the height of all its children.\r\n\t *\r\n\t * @param {VerticalAlign} value vertical alignment\r\n\t */\r\n\tpublic set contentValign(value: VerticalAlign) {\r\n\t\tthis._contentValign = value;\r\n\t\tthis.invalidateLayout();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {VerticalAlign} Vertical alignment\r\n\t */\r\n\tpublic get contentValign(): VerticalAlign {\r\n\t\treturn this._contentValign;\r\n\t}\r\n\r\n\t/**\r\n\t * Horizontal alignment of the elements for the horizontal Container.\r\n\t *\r\n\t * This is used when Container is larger than the height of all its children.\r\n\t *\r\n\t * @param {Align}  value  Horizontal alignment\r\n\t */\r\n\tpublic set contentAlign(value: Align) {\r\n\t\tthis._contentAlign = value;\r\n\t\tthis.invalidateLayout();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Align} Horizontal alignment\r\n\t */\r\n\tpublic get contentAlign(): Align {\r\n\t\treturn this._contentAlign;\r\n\t}\r\n\r\n\t/**\r\n\t * Controls if the grid of the Container should use fixed width. Fixed width\r\n\t * grid will divide available space to all its columns/rows equally, without\r\n\t * adapting to actual child sizes or size requirements.\r\n\t *\r\n\t * @default false\r\n\t * @param {boolean}  value  Should use fixed width grid?\r\n\t */\r\n\tpublic set fixedWidthGrid(value: boolean) {\r\n\t\tif (this._fixedWidthGrid != value) {\r\n\t\t\tthis._fixedWidthGrid = value;\r\n\t\t\tthis.invalidate();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Should use fixed width grid?\r\n\t */\r\n\tpublic get fixedWidthGrid(): boolean {\r\n\t\treturn this._fixedWidthGrid;\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if point is within bounds of a container.\r\n\t *\r\n\t * @param  {IPoint}   point  A coordinate to check\r\n\t * @return {boolean}         `true` if it fits within container\r\n\t */\r\n\tpublic fitsToBounds(point: IPoint): boolean {\r\n\t\tlet x = point.x;\r\n\t\tlet y = point.y;\r\n\t\tlet deviation = 0.5; // sometimes coordinates are rounded to numbers like .999 so we add deviation here\r\n\t\tif (x >= -deviation && x <= this.pixelWidth + deviation && y >= -deviation && y <= this.pixelHeight + deviation) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Copies all properties from different Container, including background\r\n\t * clone.\r\n\t *\r\n\t * @param {this}  source  Source Container to copy from\r\n\t */\r\n\tpublic copyFrom(source: this) {\r\n\t\tsuper.copyFrom(source);\r\n\t\tthis.layout = source.layout;\r\n\t\tthis.setStateOnChildren = source.setStateOnChildren;\r\n\r\n\t\tif (source._background) {\r\n\t\t\tthis.background = source._background.clone();\r\n\t\t}\r\n\r\n\t\t$iter.each(source.children.iterator(), (child) => {\r\n\t\t\tif (child.shouldClone) {\r\n\t\t\t\tlet clonedChild: Sprite = child.clone();\r\n\t\t\t\tclonedChild.parent = this;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * A [[Preloader]] instance to be used when Container is busy.\r\n\t *\r\n\t * @param {Optional<Preloader>}  preloader  Preloader instance\r\n\t */\r\n\tpublic set preloader(preloader: $type.Optional<Preloader>) {\r\n\t\tif (this._preloader) {\r\n\t\t\tthis.removeDispose(this._preloader);\r\n\t\t}\r\n\t\tthis._preloader = preloader;\r\n\t\tif (preloader) {\r\n\t\t\tpreloader.parent = this.tooltipContainer;\r\n\t\t\tthis._disposers.push(preloader);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Optional<Preloader>} Preloader instance\r\n\t */\r\n\tpublic get preloader(): $type.Optional<Preloader> {\r\n\t\tconst preloader = this._preloader;\r\n\r\n\t\tif (preloader) {\r\n\t\t\treturn preloader;\r\n\t\t}\r\n\t\telse if (this.parent) {\r\n\t\t\treturn this.parent.preloader;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Sets [[Paper]] instance to use to draw elements.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {Paper}  paper  Paper\r\n\t */\r\n\tpublic setPaper(paper: Paper): void {\r\n\t\tsuper.setPaper(paper);\r\n\t\t$array.each(this._childrenByLayout, (child) => {\r\n\t\t\tif (child instanceof Container) {\r\n\t\t\t\tchild.setPaper(paper);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tchild.setPaper(paper);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Removes Container from the system-wide list of invalid Containers.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tprotected removeFromInvalids() {\r\n\t\tsuper.removeFromInvalids();\r\n\t\t$array.remove(registry.invalidLayouts, this);\r\n\t}\r\n\r\n\t/**\r\n\t * Sets a [[DataItem]] to be used as data for the Container.\r\n\t *\r\n\t * @todo Description\r\n\t * @param {DataItem} dataItem DataItem\r\n\t */\r\n\tprotected setDataItem(dataItem: DataItem) {\r\n\t\t// this place is potentially dangerous, as if we set datItem for some dummy container, all children dataItems will be overriden\r\n\t\t// the main reason for doing this is that we need a setDataItem code to be called for each sprite, otherwise property fields won't be\r\n\t\t// applied. Also, getting dataItem from parent all the time is more expensive than saving value.\r\n\t\tif (this._dataItem != dataItem) {\r\n\t\t\t$iter.each(this.children.iterator(), (child) => {\r\n\t\t\t\tchild.dataItem = dataItem;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tsuper.setDataItem(dataItem);\r\n\t}\r\n\r\n\t/**\r\n\t * Measures the element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic measureElement(): void {\r\n\t\tthis.validateLayout();\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Returns Tooltip X coordinate if it's set, or middle of the element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {number} X (px)\r\n\t */\r\n\tprotected getTooltipX(): number {\r\n\t\treturn super.getTooltipX();\r\n\t}\r\n\r\n\t/**\r\n\t * Returns Tooltip Y coordinate if it's set, or middle of the element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {number} Y (px)\r\n\t */\r\n\tprotected getTooltipY(): number {\r\n\t\treturn super.getTooltipY();\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Font size to be used for the text. The size can either be numeric, in\r\n\t * pxels, or other measurements.\r\n\t *\r\n\t * Parts of the text may override this setting using in-line formatting.\r\n\t *\r\n\t * @param {any} value Font size value\r\n\t */\r\n\tpublic set fontSize(value: any) {\r\n\t\tthis.setPropertyValue(\"fontSize\", value, true);\r\n\t\tthis.setSVGAttribute({ \"font-size\": value });\r\n\t}\r\n\r\n\t/**\r\n\t * @return {any} Font size\r\n\t */\r\n\tpublic get fontSize(): any {\r\n\t\treturn this.getPropertyValue(\"fontSize\");\r\n\t}\r\n\r\n\t/**\r\n\t * Font weight to use for text.\r\n\t *\r\n\t * Parts of the text may override this setting using in-line formatting.\r\n\t *\r\n\t * @param {FontWeight} value Font weight\r\n\t */\r\n\tpublic set fontWeight(value: FontWeight) {\r\n\t\tthis.setPropertyValue(\"fontWeight\", value);\r\n\t\tthis.setSVGAttribute({ \"font-weight\": value });\r\n\t}\r\n\r\n\t/**\r\n\t * @return {FontWeight} Font weight\r\n\t */\r\n\tpublic get fontWeight(): FontWeight {\r\n\t\treturn this.getPropertyValue(\"fontWeight\");\r\n\t}\r\n\r\n\t/**\r\n\t * A text decoration to use for text.\r\n\t *\r\n\t * Parts of the text may override this setting using in-line formatting.\r\n\t *\r\n\t * @param {TextDecoration}  value  Decoration\r\n\t */\r\n\tpublic set textDecoration(value: TextDecoration) {\r\n\t\tthis.setPropertyValue(\"textDecoration\", value);\r\n\t\tthis.setSVGAttribute({ \"text-decoration\": value });\r\n\t}\r\n\r\n\t/**\r\n\t * @return {TextDecoration} Decoration\r\n\t */\r\n\tpublic get textDecoration(): TextDecoration {\r\n\t\treturn this.getPropertyValue(\"textDecoration\");\r\n\t}\r\n\r\n\t/**\r\n\t * Disposes (destroys) the element and all its children.\r\n\t */\r\n\tpublic dispose(): void {\r\n\t\tthis.disposeChildren();\r\n\t\tsuper.dispose();\r\n\t}\r\n\r\n\t/**\r\n\t * Applies a [[SpriteState]] on this element.\r\n\t *\r\n\t * The first parameter can either be a name state or a [[SpriteState]]\r\n\t * instance.\r\n\t *\r\n\t * When run, this method will apply SVG properties defined in a\r\n\t * [[SpriteState]], but only those that are relevant to this particular\r\n\t * element, i.e. are in the `properties` array.\r\n\t *\r\n\t * @see {@link SpriteState}\r\n\t * @param {string | SpriteState} value               A state - name key or instance\r\n\t * @param {number}               transitionDuration  Duration of the transition between current and new state\r\n\t * @param {number) => number}    easing              An easing function\r\n\t */\r\n\tpublic setState(value: string | SpriteState<this[\"_properties\"], this[\"_adapter\"]>, transitionDuration?: number, easing?: (value: number) => number): $type.Optional<Animation> {\r\n\r\n\t\tlet stateName = value;\r\n\t\tif (value instanceof SpriteState) {\r\n\t\t\tstateName = value.name;\r\n\t\t}\r\n\r\n\t\tif (this.setStateOnChildren) {\r\n\t\t\t$iter.each(this.children.iterator(), (child) => {\r\n\t\t\t\tchild.setState(stateName, transitionDuration, easing);\r\n\t\t\t})\r\n\r\n\t\t\tthis.background.setState(stateName);\r\n\t\t}\r\n\r\n\t\treturn super.setState(value, transitionDuration, easing);\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ../../../../src/.internal/core/Container.ts","/**\r\n * A collection of universal utility functions.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Sprite } from \"../Sprite\";\r\nimport { IPoint } from \"../defs/IPoint\";\r\nimport { IRectangle } from \"../defs/IRectangle\";\r\nimport { Percent } from \"./Percent\";\r\nimport * as $math from \"../utils/Math\";\r\nimport * as $type from \"../utils/Type\";\r\nimport * as $string from \"./String\";\r\nimport * as $strings from \"./Strings\";\r\nimport * as $object from \"./Object\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MISC FUNCTIONS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Copies all properties of one object to the other, omitting undefined.\r\n *\r\n * @param  {Object}   fromObject  Source object\r\n * @param  {Object}   toObject    Target object\r\n * @return {Object}               Updated target object\r\n * @todo Maybe consolidate with utils.copy?\r\n */\r\nexport function copyProperties(source: Object, target: Object): Object {\r\n\t$object.each(source, (key, value) => {\r\n\t\t// only if value is set\r\n\t\tif ($type.hasValue(value)) {\r\n\t\t\t(<any>target)[key] = value;\r\n\t\t}\r\n\t});\r\n\treturn target;\r\n}\r\n\r\n/**\r\n * Copies all properties of one object to the other.\r\n *\r\n * @param  {Object}  source     Source object\r\n * @param  {Object}  recipient  Target object\r\n * @return {Object}             Updated target object\r\n */\r\nexport function copy(source: Object, target: Object): Object {\r\n\t$object.each(source, (key, value) => {\r\n\t\t(<any>target)[key] = value;\r\n\t});\r\n\treturn target;\r\n}\r\n\r\n/**\r\n * Checks if value is not empty (undefined or zero-length string).\r\n *\r\n * @param  {Optional<string>}  value  Value to check\r\n * @return {boolean}                  `true` if value is not \"empty\"\r\n */\r\nexport function isNotEmpty(value: $type.Optional<string>): value is string {\r\n\treturn $type.hasValue(value) && (value.toString() !== \"\");\r\n}\r\n\r\n/**\r\n * [relativeToValue description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @param  {$type.Optional<number | Percent>}  percent  [description]\r\n * @param  {number}                            full     [description]\r\n * @return {number}                                     [description]\r\n */\r\nexport function relativeToValue(percent: $type.Optional<number | Percent>, full: number): number {\r\n\tif ($type.isNumber(percent)) {\r\n\t\treturn percent;\r\n\r\n\t} else if (percent != null && $type.isNumber(percent.value)) {\r\n\t\treturn full * percent.value;\r\n\r\n\t} else {\r\n\t\treturn 0;\r\n\t}\r\n}\r\n\r\n/**\r\n * [relativeRadiusToValue description]\r\n *\r\n * Differs from relativeToValue so that if a value is negative, it subtracts\r\n * it from full value.\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @param  {$type.Optional<number | Percent>}  percent             [description]\r\n * @param  {number}                            full                [description]\r\n * @param  {boolean}                           subtractIfNegative  [description]\r\n * @return {number}                                                [description]\r\n */\r\nexport function relativeRadiusToValue(percent: $type.Optional<number | Percent>, full: number, subtractIfNegative?: boolean): $type.Optional<number> {\r\n\tlet value: $type.Optional<number>;\r\n\r\n\tif ($type.isNumber(percent)) {\r\n\t\tvalue = percent;\r\n\r\n\t\tif (value < 0) {\r\n\t\t\tif (subtractIfNegative) {\r\n\t\t\t\tvalue = full + value;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tvalue = full - value;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t} else if (percent != null && $type.isNumber(percent.value)) {\r\n\t\tvalue = full * percent.value;\r\n\t}\r\n\r\n\treturn value;\r\n}\r\n\r\n/**\r\n * [valueToRelative description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @param  {number | Percent}  value  [description]\r\n * @param  {number}            full   [description]\r\n * @return {number}                   [description]\r\n */\r\nexport function valueToRelative(value: number | Percent, full: number): number {\r\n\tif (value instanceof Percent) {\r\n\t\treturn value.value;\r\n\t}\r\n\telse {\r\n\t\treturn value / full;\r\n\t}\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * STRING FORMATTING FUNCTIONS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Converts camelCased text to dashed version:\r\n * (\"thisIsString\" > \"this-is-string\")\r\n *\r\n * @param  {string}  str  Input\r\n * @return {string}       Output\r\n */\r\nexport function camelToDashed(str: string): string {\r\n\treturn str.replace(/\\W+/g, '-').replace(/([a-z\\d])([A-Z])/g, '$1-$2').toLowerCase();\r\n}\r\n\r\n/**\r\n * Converts tring to uppercase.\r\n *\r\n * @param  {string}  str  String to convert\r\n * @return {string}       uppercased string\r\n * @todo Maybe make it better\r\n */\r\nexport function capitalize(str: string): string {\r\n\tlet arr: string[] = str.split(\"\");\r\n\tarr[0] = arr[0].toUpperCase();\r\n\treturn arr.join(\"\");\r\n}\r\n\r\n/**\r\n * Converts any value into its string representation.\r\n *\r\n * @param  {any}     value  Value\r\n * @return {string}         String represantation of the value\r\n */\r\nexport function stringify(value: any): string {\r\n\treturn JSON.stringify(value);\r\n}\r\n\r\n/**\r\n * Splits the text into multiple lines, respecting maximum character count.\r\n * Prioretizes splitting on spaces and punctuation. Falls back on splitting\r\n * mid-word if there's no other option.\r\n *\r\n * @param  {string}    text      Text\r\n * @param  {number}    maxChars  Maximum number of characters per line\r\n * @return {string[]}            An array of split text\r\n */\r\nexport function splitTextByCharCount(text: string, maxChars: number, fullWords?: boolean, rtl?: boolean): string[] {\r\n\r\n\t// Maybe the text fits?\r\n\tif (text.length <= maxChars) {\r\n\t\treturn [text];\r\n\t}\r\n\r\n\t// Init result\r\n\tlet res: string[] = [];\r\n\r\n\t// Split by spacing\r\n\tlet currentIndex: number = -1;\r\n\tlet tmpText = text.replace(/([,;:!?\\\\\\/\\.\\s]+)/g, $strings.PLACEHOLDER + \"$1\" + $strings.PLACEHOLDER);\r\n\tlet words = tmpText.split($strings.PLACEHOLDER);\r\n\r\n\t// Process each word\r\n\tfor (let i = 0; i < words.length; i++) {\r\n\r\n\t\t// Get word and symbol count\r\n\t\tlet word: string = words[i];\r\n\t\tlet wordLength: number = word.length;\r\n\r\n\t\t// Ignore empty words\r\n\t\tif (wordLength === 0) {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\r\n\t\t// Check word length\r\n\t\tif ((wordLength > maxChars) && fullWords !== true) {\r\n\t\t\t// A single word is longer than allowed symbol count\r\n\t\t\t// Break it up\r\n\t\t\tif (rtl) {\r\n\t\t\t\tword = reverseString(word);\r\n\t\t\t}\r\n\t\t\tlet parts: RegExpMatchArray | null = word.match(new RegExp(\".{1,\" + maxChars + \"}\", \"g\"));\r\n\r\n\t\t\t// TODO is this correct ?\r\n\t\t\tif (parts) {\r\n\t\t\t\tif (rtl) {\r\n\t\t\t\t\tfor (let x = 0; x < parts.length; x++) {\r\n\t\t\t\t\t\tparts[x] = reverseString(parts[x]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//parts.reverse();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tres = res.concat(parts);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\r\n\t\t\t// Init current line\r\n\t\t\tif (currentIndex === -1) {\r\n\t\t\t\tres.push(\"\");\r\n\t\t\t\tcurrentIndex = 0;\r\n\t\t\t}\r\n\r\n\t\t\t// Check if we need to break into another line\r\n\t\t\tif (((res[currentIndex].length + wordLength + 1) > maxChars) && res[currentIndex] !== \"\") {\r\n\t\t\t\tres.push(\"\");\r\n\t\t\t\tcurrentIndex++;\r\n\t\t\t}\r\n\r\n\t\t\t// Add word\r\n\t\t\tres[currentIndex] += word;\r\n\r\n\t\t}\r\n\r\n\t\t// Update index\r\n\t\tcurrentIndex = res.length - 1;\r\n\t}\r\n\r\n\t// Do we have only one word that does not fit?\r\n\t// Since fullWords is set and we can't split the word, we end up with empty\r\n\t// set.\r\n\tif (res.length == 1 && fullWords && (res[0].length > maxChars)) {\r\n\t\tres = [];\r\n\t}\r\n\r\n\treturn res;\r\n}\r\n\r\n/**\r\n * Truncates the text to certain character count.\r\n *\r\n * Will add ellipsis if the string is truncated. Optionally, can truncate on\r\n * full words only.\r\n *\r\n * For RTL support, pass in the fifth parameter as `true`.\r\n *\r\n * @param  {string}   text       Input text\r\n * @param  {number}   maxChars   Maximum character count of output\r\n * @param  {string}   ellipsis   Ellipsis string, i.e. \"...\"\r\n * @param  {boolean}  fullWords  If `true`, will not break mid-word, unless there's a single word and it does not with into `maxChars`\r\n * @param  {boolean}  rtl        Is this an RTL text?\r\n * @return {string}              Truncated text\r\n */\r\nexport function truncateWithEllipsis(text: string, maxChars: number, ellipsis: string, fullWords?: boolean, rtl?: boolean): string {\r\n\r\n\tif (text.length <= maxChars) {\r\n\t\treturn text;\r\n\t}\r\n\r\n\t// Calc max chars\r\n\tmaxChars -= ellipsis.length;\r\n\tif (maxChars < 1) {\r\n\t\tmaxChars = 1;\r\n\t\t//ellipsis = \"\";\r\n\t}\r\n\r\n\t// Get lines\r\n\tlet lines = splitTextByCharCount(text, maxChars, fullWords, rtl);\r\n\r\n\t// Use first line\r\n\treturn (lines[0] || \"\") + ellipsis;\r\n}\r\n\r\n/**\r\n * Removes whitespace from beginning and end of the string.\r\n *\r\n * @param  {string}  str  Input\r\n * @return {string}       Output\r\n */\r\nexport function trim(str: string): string {\r\n\treturn str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, \"\");\r\n};\r\n\r\n/**\r\n * Removes whitespace from end of the string.\r\n *\r\n * @param  {string}  str  Input\r\n * @return {string}       Output\r\n */\r\nexport function rtrim(str: string): string {\r\n\treturn str.replace(/[\\s\\uFEFF\\xA0]+$/g, \"\");\r\n};\r\n\r\n/**\r\n * Removes whitespace from beginning of the string.\r\n *\r\n * @param  {string}  str  Input\r\n * @return {string}       Output\r\n */\r\nexport function ltrim(str: string): string {\r\n\treturn str.replace(/^[\\s\\uFEFF\\xA0]+/g, \"\");\r\n};\r\n\r\n/**\r\n * Reverses string.\r\n *\r\n * @param  {string}  str  Input\r\n * @return {string}       Output\r\n */\r\nexport function reverseString(str: string): string {\r\n\treturn str.split(\"\").reverse().join(\"\");\r\n}\r\n\r\n/**\r\n * Removes quotes from the string.\r\n *\r\n * @param  {string}  str  Input\r\n * @return {string}       Output\r\n */\r\nexport function unquote(str: string): string {\r\n\tlet res = str.trim();\r\n\tres = str.replace(/^'(.*)'$/, \"$1\");\r\n\tif (res == str) {\r\n\t\tres = str.replace(/^\"(.*)\"$/, \"$1\");\r\n\t}\r\n\treturn res;\r\n}\r\n\r\n/**\r\n * Pads a string with additional characters to certain length.\r\n *\r\n * @param  {any}            value  A numeric value\r\n * @param  {number = 0}     len    Result string length in characters\r\n * @param  {string = \"0\"}   char   A character to use for padding\r\n * @return {string}                Padded value as string\r\n */\r\nexport function padString(value: any, len: number = 0, char: string = \"0\"): string {\r\n\tif (typeof value !== \"string\")\r\n\t\tvalue = value.toString();\r\n\treturn len > value.length ? Array(len - value.length + 1).join(char) + value : value;\r\n}\r\n\r\n/**\r\n * Tries to determine format type.\r\n *\r\n * @ignore Exclude from docs\r\n * @param {string}   format  Format string\r\n * @return {string}          Format type (\"string\" | \"number\" | \"date\" | \"duration\")\r\n */\r\nexport function getFormat(format: string): string {\r\n\r\n\t// Undefined?\r\n\tif (typeof format === \"undefined\")\r\n\t\treturn $strings.STRING;\r\n\r\n\t// Cleanup and lowercase format\r\n\tformat = format.toLowerCase().replace(/^\\[[^\\]]*\\]/, \"\");\r\n\r\n\t// Remove style tags\r\n\tformat = format.replace(/\\[[^\\]]+\\]/, \"\");\r\n\r\n\t// Trim\r\n\tformat = format.trim();\r\n\r\n\t// Check for any explicit format hints (i.e. /Date)\r\n\tlet hints: RegExpMatchArray | null = format.match(/\\/(date|number|duration)$/);\r\n\r\n\tif (hints) {\r\n\t\treturn hints[1];\r\n\t}\r\n\r\n\t// Check for explicit hints\r\n\tif (format === $strings.NUMBER) {\r\n\t\treturn $strings.NUMBER;\r\n\t}\r\n\r\n\tif (format === $strings.DATE) {\r\n\t\treturn $strings.DATE;\r\n\t}\r\n\r\n\tif (format === $strings.DURATION) {\r\n\t\treturn $strings.DURATION;\r\n\t}\r\n\r\n\t// Detect number formatting symbols\r\n\tif (format.match(/[#0]/)) {\r\n\t\treturn $strings.NUMBER;\r\n\t}\r\n\r\n\t// Detect date formatting symbols\r\n\tif (format.match(/[ymwdhnsqaxkzgtei]/)) {\r\n\t\treturn $strings.DATE;\r\n\t}\r\n\r\n\t// Nothing? Let's display as string\r\n\treturn $strings.STRING;\r\n}\r\n\r\n/**\r\n * Cleans up format:\r\n * * Strips out formatter hints\r\n *\r\n * @ignore Exclude from docs\r\n * @param  {string}  format  Format\r\n * @return {string}          Cleaned format\r\n */\r\nexport function cleanFormat(format: string): string {\r\n\treturn format.replace(/\\/(date|number|duration)$/i, \"\");\r\n}\r\n\r\n/**\r\n * Strips all tags from the string.\r\n *\r\n * @param  {string}  text  Source string\r\n * @return {string}        String without tags\r\n */\r\nexport function stripTags(text: string): string {\r\n\treturn text ? text.replace(/<[^>]*>/g, \"\") : text;\r\n}\r\n\r\n/**\r\n * Removes new lines and tags from a string.\r\n *\r\n * @param  {string}  text  String to conver\r\n * @return {string}        Converted string\r\n */\r\nexport function plainText(text: string): string {\r\n\treturn text ? stripTags(text.replace(/[\\n\\r]+/g, \". \")) : text;\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * TYPE CONVERSION FUNCTIONS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Converts numeric value into string. Deals with large or small numbers that\r\n * would otherwise use exponents.\r\n *\r\n * @param  {number}  value  Numeric value\r\n * @return {string}         Numeric value as string\r\n */\r\nexport function numberToString(value: number): string {\r\n\t// TODO handle Infinity and -Infinity\r\n\tif ($type.isNaN(value)) {\r\n\t\treturn \"NaN\";\r\n\t}\r\n\r\n\tif (value === Infinity) {\r\n\t\treturn \"Infinity\";\r\n\t}\r\n\r\n\tif (value === -Infinity) {\r\n\t\treturn \"-Infinity\";\r\n\t}\r\n\r\n\t// Negative 0\r\n\tif ((value === 0) && (1 / value === -Infinity)) {\r\n\t\treturn \"-0\";\r\n\t}\r\n\r\n\t// Preserve negative and deal with absoute values\r\n\tlet negative = value < 0;\r\n\r\n\tvalue = Math.abs(value);\r\n\r\n\t// TODO test this\r\n\tlet parsed = $type.getValue(/^([0-9]+)(?:\\.([0-9]+))?(?:e[\\+\\-]([0-9]+))?$/.exec(\"\" + value));\r\n\tlet digits = parsed[1];\r\n\tlet decimals = parsed[2] || \"\";\r\n\r\n\tlet res: string;\r\n\r\n\t// Leave the nummber as it is if it does not use exponents\r\n\tif (parsed[3] == null) {\r\n\t\tres = (decimals === \"\" ? digits : digits + \".\" + decimals);\r\n\r\n\t} else {\r\n\t\tlet exponent = +parsed[3];\r\n\r\n\t\t// Deal with decimals\r\n\t\tif (value < 1) {\r\n\t\t\tlet zeros = exponent - 1;\r\n\r\n\t\t\tres = \"0.\" + $string.repeat(\"0\", zeros) + digits + decimals;\r\n\r\n\t\t\t// Deal with integers\r\n\t\t} else {\r\n\t\t\tlet zeros = exponent - decimals.length;\r\n\r\n\t\t\tif (zeros === 0) {\r\n\t\t\t\tres = digits + decimals;\r\n\r\n\t\t\t} else if (zeros < 0) {\r\n\t\t\t\tres = digits + decimals.slice(0, zeros) + \".\" + decimals.slice(zeros);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tres = digits + decimals + $string.repeat(\"0\", zeros);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn negative ? \"-\" + res : res;\r\n}\r\n\r\n/**\r\n * Converts anything to Date object.\r\n *\r\n * @param  {Date | number | string}  value  A value of any type\r\n * @return {Date}                           Date object representing a value\r\n */\r\nexport function anyToDate(value: Date | number | string): Date {\r\n\tif ($type.isDate(value)) {\r\n\t\t// TODO maybe don't create a new Date ?\r\n\t\treturn new Date(value);\r\n\t}\r\n\r\n\telse if ($type.isNumber(value)) {\r\n\t\treturn new Date(value);\r\n\t}\r\n\r\n\telse {\r\n\t\t// Try converting to number (assuming timestamp)\r\n\t\tlet num = Number(value);\r\n\r\n\t\tif (!$type.isNumber(num)) {\r\n\t\t\treturn new Date(value);\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn new Date(num);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * Tries converting any value to a number.\r\n *\r\n * @param  {any}     value  Source value\r\n * @return {number}         Number\r\n */\r\nexport function anyToNumber(value: Date | number | string): $type.Optional<number> {\r\n\tif ($type.isDate(value)) {\r\n\t\treturn value.getTime();\r\n\t}\r\n\r\n\telse if ($type.isNumber(value)) {\r\n\t\treturn value;\r\n\t}\r\n\r\n\telse if ($type.isString(value)) {\r\n\t\t// Try converting to number (assuming timestamp)\r\n\t\tlet num = Number(value);\r\n\r\n\t\tif (!$type.isNumber(num)) {\r\n\t\t\t// Failing\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn num;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * DATE-RELATED FUNCTIONS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Returns a year day.\r\n *\r\n * @param  {Date}     date  Date\r\n * @param  {boolean}  utc   Assume UTC dates?\r\n * @return {number}         Year day\r\n * @todo Account for UTC\r\n */\r\nexport function getYearDay(date: Date, utc: boolean = false): number {\r\n\tlet first = new Date(date.getFullYear(), 0, 1, 0, 0, 0, 0);\r\n\treturn Math.floor((date.getTime() - first.getTime()) / 86400000) + 1;\r\n}\r\n\r\n/**\r\n * Returns week number for a given date.\r\n *\r\n * @param  {Date}     date  Date\r\n * @param  {boolean}  utc   Assume UTC dates?\r\n * @return {number}         Week number\r\n * @todo Account for UTC\r\n */\r\nexport function getWeek(date: Date, utc: boolean = false): number {\r\n\tlet day = getYearDay(date, utc) - 1;\r\n\tlet week = Math.floor((day - (date.getDay() || 7) + 10) / 7);\r\n\tif (week === 0) {\r\n\t\tweek = 53;\r\n\t}\r\n\telse if (week === 53) {\r\n\t\tweek = 1;\r\n\t}\r\n\treturn week;\r\n}\r\n\r\n/**\r\n * Returns a week number in the month.\r\n *\r\n * @param  {Date}     date  Source Date\r\n * @param  {boolean}  utc   Assume UTC dates?\r\n * @return {number}         Week number in month\r\n */\r\nexport function getMonthWeek(date: Date, utc: boolean = false): number {\r\n\tlet firstWeek = getWeek(new Date(date.getFullYear(), date.getMonth(), 1), utc);\r\n\tlet currentWeek = getWeek(date, utc);\r\n\tif (currentWeek == 1) {\r\n\t\tcurrentWeek = 53;\r\n\t}\r\n\treturn currentWeek - firstWeek + 1;\r\n}\r\n\r\n/**\r\n * Returns a year day out of the given week number.\r\n *\r\n * @param  {number}   week     Week\r\n * @param  {number}   year     Year\r\n * @param  {number}   weekday  Weekday\r\n * @param  {boolean}  utc      Assume UTC dates\r\n * @return {number}            Day in a year\r\n */\r\nexport function getDayFromWeek(week: number, year: number, weekday: number = 1, utc: boolean = false): number {\r\n\tlet date = new Date(year, 0, 4, 0, 0, 0, 0);\r\n\tif (utc) {\r\n\t\tdate.setUTCFullYear(year);\r\n\t}\r\n\tlet day = week * 7 + weekday - ((date.getDay() || 7) + 3);\r\n\treturn day;\r\n}\r\n\r\n/**\r\n * Returns 12-hour representation out of the 24-hour hours.\r\n *\r\n * @param  {number}  hours  24-hour number\r\n * @return {number}         12-hour number\r\n */\r\nexport function get12Hours(hours: number, base?: number): number {\r\n\tif (hours > 12) {\r\n\t\thours -= 12;\r\n\t}\r\n\telse if (hours === 0) {\r\n\t\thours = 12;\r\n\t}\r\n\treturn $type.hasValue(base) ? hours + (base - 1) : hours;\r\n}\r\n\r\n/**\r\n * Returns a string name of the tome zone.\r\n *\r\n * @param  {Date}     date     Date object\r\n * @param  {boolean}  long     Should return long (\"Pacific Standard Time\") or short abbreviation (\"PST\")\r\n * @param  {boolean}  savings  Include information if it's in daylight savings mode\r\n * @param  {boolean}  utc      Assume UTC dates\r\n * @return {string}            Time zone name\r\n */\r\nexport function getTimeZone(date: Date, long: boolean = false, savings: boolean = false, utc: boolean = false): string {\r\n\tif (utc) {\r\n\t\treturn long ? \"Coordinated Universal Time\" : \"UTC\";\r\n\t}\r\n\tlet wotz = date.toLocaleString(\"UTC\");\r\n\tlet wtz = date.toLocaleString(\"UTC\", { timeZoneName: long ? \"long\" : \"short\" }).substr(wotz.length);\r\n\t//wtz = wtz.replace(/[+-]+[0-9]+$/, \"\");\r\n\tif (savings === false) {\r\n\t\twtz = wtz.replace(/ (standard|daylight|summer|winter) /i, \" \");\r\n\t}\r\n\treturn wtz;\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * NUMBER-RELATED FUNCTIONS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Returns a random number between `from` and `to`.\r\n *\r\n * @param  {number}  from  From number\r\n * @param  {number}  to    To number\r\n * @return {number}        Random number\r\n */\r\nexport function random(from: number, to: number): number {\r\n\treturn Math.floor(Math.random() * to) + from;\r\n}\r\n\r\n/**\r\n * Fits the number into specific `min` and `max` bounds.\r\n *\r\n * @param  {number}  value  Input value\r\n * @param  {number}  min    Minimum value\r\n * @param  {number}  max    Maximum value\r\n * @return {number}         Possibly adjusted value\r\n */\r\nexport function fitNumber(value: number, min: number, max: number): number {\r\n\tif (value > max) {\r\n\t\treturn max;\r\n\t}\r\n\telse if (value < min) {\r\n\t\treturn min;\r\n\t}\r\n\treturn value;\r\n}\r\n\r\n/**\r\n * Fits the number into specific `min` and `max` bounds.\r\n *\r\n * If the value is does not fit withing specified range, it \"wraps\" around the\r\n * values.\r\n *\r\n * For example, if we have input value 10 with min set at 1 and max set at 8,\r\n * the value will not fit. The remainder that does not fit (2) will be added\r\n * to `min`, resulting in 3.\r\n *\r\n * The output of regular `fitNumber()` would return 8 instead.\r\n *\r\n * @param  {number}  value  Input value\r\n * @param  {number}  min    Minimum value\r\n * @param  {number}  max    Maximum value\r\n * @return {number}         Possibly adjusted value\r\n */\r\nexport function fitNumberRelative(value: number, min: number, max: number): number {\r\n\tlet gap = max - min;\r\n\tif (value > max) {\r\n\t\tvalue = min + (value - gap * Math.floor(value / gap));\r\n\t}\r\n\telse if (value < min) {\r\n\t\tvalue = min + (value - gap * Math.floor(value / gap));\r\n\t}\r\n\treturn value;\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * SPRITE-RELATED FUNCTIONS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Converts SVG element coordinates to coordinates within specific [[Sprite]].\r\n *\r\n * @param  {IPoint}  point   SVG coordinates\r\n * @param  {Sprite}  sprite  Sprite\r\n * @return {IPoint}         Sprite coordinates\r\n */\r\nexport function svgPointToSprite(point: IPoint, sprite: Sprite): IPoint {\r\n\tlet x: number = point.x;\r\n\tlet y: number = point.y;\r\n\tlet sprites: Sprite[] = [];\r\n\r\n\twhile ($type.hasValue(sprite.parent)) {\r\n\t\tsprites.push(sprite);\r\n\t\tsprite = sprite.parent as any;\r\n\t}\r\n\r\n\tsprites.reverse();\r\n\r\n\tfor (var i = 0; i < sprites.length; i++) {\r\n\t\tlet sprite: Sprite = sprites[i];\r\n\t\tlet angle: number = sprite.rotation;\r\n\r\n\t\tlet relativeX = x - sprite.pixelX;\r\n\t\tlet relativeY = y - sprite.pixelY;\r\n\r\n\t\tif (sprite.dx) {\r\n\t\t\tx -= sprite.dx;\r\n\t\t}\r\n\t\tif (sprite.dy) {\r\n\t\t\ty -= sprite.dy;\r\n\t\t}\r\n\r\n\t\tx = ($math.cos(-angle) * relativeX - $math.sin(-angle) * relativeY) / sprite.scale - sprite.pixelPaddingLeft;\r\n\t\ty = ($math.cos(-angle) * relativeY + $math.sin(-angle) * relativeX) / sprite.scale - sprite.pixelPaddingTop;\r\n\t}\r\n\r\n\treturn { x: x, y: y };\r\n}\r\n\r\n/**\r\n * Converts coordinates within [[Sprite]] to coordinates relative to the whole\r\n * SVG element.\r\n *\r\n * @param  {IPoint}  point   Sprite coordinates\r\n * @param  {Sprite}  sprite  Sprite\r\n * @return {IPoint}          SVG coordinates\r\n */\r\nexport function spritePointToSvg(point: IPoint, sprite: Sprite): IPoint {\r\n\tlet x: number = point.x;\r\n\tlet y: number = point.y;\r\n\twhile ($type.hasValue(sprite.parent)) {\r\n\t\tlet angle: number = sprite.rotation;\r\n\r\n\t\tx += sprite.pixelPaddingLeft;\r\n\t\ty += sprite.pixelPaddingTop;\r\n\r\n\t\tif (sprite.dx) {\r\n\t\t\tx += sprite.dx;\r\n\t\t}\r\n\t\tif (sprite.dy) {\r\n\t\t\ty += sprite.dy;\r\n\t\t}\r\n\r\n\t\tlet relativeX = sprite.pixelX + ((x * $math.cos(angle) - y * $math.sin(angle))) * sprite.scale;\r\n\t\tlet relativeY = sprite.pixelY + ((x * $math.sin(angle) + y * $math.cos(angle))) * sprite.scale;\r\n\r\n\t\tx = relativeX;\r\n\t\ty = relativeY;\r\n\r\n\t\tsprite = sprite.parent as any;\r\n\t}\r\n\treturn { x: x, y: y };\r\n}\r\n\r\n\r\n/**\r\n * Converts coordinates of one sprite to another.\r\n *\r\n * @param  {IPoint}  point   Sprite coordinates\r\n * @param  {Sprite}  sprite  Sprite\r\n * @param  {Sprite}  toSprite  Sprite\r\n * @return {IPoint}  converted coordinates\r\n */\r\nexport function spritePointToSprite(point: IPoint, sprite: Sprite, toSprite: Sprite): IPoint {\r\n\treturn svgPointToSprite(spritePointToSvg(point, sprite), toSprite);\r\n}\r\n\r\n\r\n/**\r\n * Converts a rectangle expressed in SVG element coordinates to coordinates\r\n * within specific [[Sprite]].\r\n *\r\n * @param  {IRectangle}  rect    SVG rectangle\r\n * @param  {Sprite}      sprite  Sprite\r\n * @return {IRectangle}          Sprite rectangle\r\n */\r\nexport function svgRectToSprite(rect: IRectangle, sprite: Sprite): IRectangle {\r\n\tlet p1: IPoint = svgPointToSprite(rect, sprite);\r\n\tlet p2: IPoint = svgPointToSprite({ x: rect.x + rect.width, y: rect.y + rect.height }, sprite);\r\n\treturn { x: p1.x, y: p1.y, width: p2.x - p1.x, height: p2.y - p1.y };\r\n}\r\n\r\n/**\r\n * Converts a rectangle expressed in [[Sprite]] coordinates to SVG coordinates.\r\n *\r\n * @param  {IRectangle}  rect    Sprite rectangle\r\n * @param  {Sprite}      sprite  Sprite\r\n * @return {IRectangle}          SVG rectangle\r\n */\r\nexport function spriteRectToSvg(rect: IRectangle, sprite: Sprite): IRectangle {\r\n\tlet p1: IPoint = spritePointToSvg(rect, sprite);\r\n\tlet p2: IPoint = spritePointToSvg({ x: rect.x + rect.width, y: rect.y + rect.height }, sprite);\r\n\treturn { x: p1.x, y: p1.y, width: p2.x - p1.x, height: p2.y - p1.y };\r\n}\r\n\r\n/**\r\n * Converts global document-wide coordinates to coordinates within SVG element.\r\n *\r\n * @param  {IPoint}       point         Global coordinates\r\n * @param  {HTMLElement}  svgContainer  SVG element\r\n * @return {IPoint}                     SVG coordinates\r\n */\r\nexport function documentPointToSvg(point: IPoint, svgContainer: HTMLElement): IPoint {\r\n\tlet bbox = svgContainer.getBoundingClientRect();\r\n\r\n\treturn {\r\n\t\t\"x\": point.x - bbox.left,\r\n\t\t\"y\": point.y - bbox.top\r\n\t};\r\n}\r\n\r\n/**\r\n * Converts SVG coordinates to global document-wide coordinates.\r\n *\r\n * @param  {IPoint}       point         SVG coordinates\r\n * @param  {HTMLElement}  svgContainer  SVG element\r\n * @return {IPoint}                     Global coordinates\r\n */\r\nexport function svgPointToDocument(point: IPoint, svgContainer: HTMLElement): IPoint {\r\n\tlet bbox = svgContainer.getBoundingClientRect();\r\n\r\n\treturn {\r\n\t\t\"x\": point.x + bbox.left,\r\n\t\t\"y\": point.y + bbox.top\r\n\t};\r\n}\r\n\r\n/**\r\n * Converts document-wide global coordinates to coordinates within specific\r\n * [[Sprite]].\r\n *\r\n * @param  {IPoint}  point   Global coordinates\r\n * @param  {Sprite}  sprite  Sprite\r\n * @return {IPoint}          Sprite coordinates\r\n */\r\nexport function documentPointToSprite(point: IPoint, sprite: Sprite): IPoint {\r\n\tlet svgPoint: IPoint = documentPointToSvg(point, sprite.htmlContainer);\r\n\treturn svgPointToSprite(svgPoint, sprite);\r\n}\r\n\r\n/**\r\n * Converts coordinates within [[Sprite]] to global document coordinates.\r\n *\r\n * @param  {IPoint}  point   Sprite coordinates\r\n * @param  {Sprite}  sprite  Sprite\r\n * @return {IPoint}          Global coordinates\r\n */\r\nexport function spritePointToDocument(point: IPoint, sprite: Sprite): IPoint {\r\n\tlet svgPoint: IPoint = spritePointToSvg(point, sprite);\r\n\treturn svgPointToDocument(svgPoint, sprite.htmlContainer);\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * DEPRECATED FUNCTIONS\r\n * @todo Review and remove\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Returns element's width.\r\n *\r\n * @ignore Exclude from docs\r\n * @param  {HTMLElement}  element  Element\r\n * @return {number}                Width (px)\r\n * @deprecated Not used anywhere\r\n */\r\nexport function width(element: HTMLElement): number {\r\n\treturn element.clientWidth;\r\n}\r\n\r\n/**\r\n * Returns element's height.\r\n *\r\n * @ignore Exclude from docs\r\n * @param  {HTMLElement}  element  Element\r\n * @return {number}                Height (px)\r\n * @deprecated Not used anywhere\r\n */\r\nexport function height(element: HTMLElement): number {\r\n\treturn element.clientHeight;\r\n}\r\n\r\n/**\r\n * Returns number of decimals\r\n *\r\n * @ignore Exclude from docs\r\n * @param  {number}  number  Input number\r\n * @return {number}          Number of decimals\r\n */\r\nexport function decimalPlaces(number: number): number {\r\n\tvar match = ('' + number).match(/(?:\\.(\\d+))?(?:[eE]([+-]?\\d+))?$/);\r\n\tif (!match) { return 0; }\r\n\treturn Math.max(0, (match[1] ? match[1].length : 0) - (match[2] ? +match[2] : 0));\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/utils/Utils.ts","/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { IClone } from \"./Clone\";\r\nimport { Disposer, MultiDisposer, IDisposer } from \"./Disposer\";\r\nimport { EventDispatcher, AMEvent } from \"./EventDispatcher\";\r\nimport { Ordering } from \"./Order\";\r\nimport * as $array from \"./Array\";\r\nimport * as $iter from \"./Iterator\";\r\nimport * as $type from \"./Type\";\r\n\r\n/**\r\n * @todo Description\r\n */\r\nexport class IndexedIterable<A> {\r\n\r\n\t/**\r\n\t * Item list\r\n\t *\r\n\t * @type {Array<A>}\r\n\t */\r\n\tprivate _array: Array<A>;\r\n\r\n\t/**\r\n\t * Start index.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tprivate _start: number;\r\n\r\n\t/**\r\n\t * End index.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tprivate _end: number;\r\n\r\n\t/**\r\n\t * Constructor.\r\n\t *\r\n\t * @param {Array<A>}  array  List items\r\n\t * @param {number}    start  Start index\r\n\t * @param {number}    end    End index\r\n\t */\r\n\tconstructor(array: Array<A>, start: number, end: number) {\r\n\t\tthis._array = array;\r\n\t\tthis._start = start;\r\n\t\tthis._end = end;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a list item iterator.\r\n\t *\r\n\t * @return {Iterator} Iterator\r\n\t */\r\n\tpublic iterator(): $iter.Iterator<A> {\r\n\t\treturn (push) => {\r\n\t\t\tif (this._start !== this._end) {\r\n\t\t\t\tif (this._start < this._end) {\r\n\t\t\t\t\tfor (let i = this._start; i < this._end; ++i) {\r\n\t\t\t\t\t\tif (!push(this._array[i])) {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfor (let i = this._start - 1; i >= this._end; --i) {\r\n\t\t\t\t\t\tif (!push(this._array[i])) {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\t/**\r\n\t * Returns an interable list sorted backwards than current list.\r\n\t *\r\n\t * @return {IndexedIterable<A>} List\r\n\t */\r\n\tpublic backwards(): IndexedIterable<A> {\r\n\t\treturn new IndexedIterable(this._array, this._end, this._start);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a new list consisting only of specific range of items between\r\n\t * `start` and `end` indexes.\r\n\t *\r\n\t * @param  {number}              start  Start index\r\n\t * @param  {number}              end    End index\r\n\t * @return {IndexedIterable<A>}         List\r\n\t */\r\n\tpublic range(start: number, end: number): IndexedIterable<A> {\r\n\t\tif (start <= end) {\r\n\t\t\tif (this._start === this._end) {\r\n\t\t\t\treturn this;\r\n\r\n\t\t\t} else if (this._start < this._end) {\r\n\t\t\t\tconst diff = end - start;\r\n\r\n\t\t\t\tstart = Math.max(this._start + start, this._start);\r\n\t\t\t\tend = Math.min(start + diff, this._end);\r\n\r\n\t\t\t\treturn new IndexedIterable(this._array, start, end);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tconst diff = end - start;\r\n\r\n\t\t\t\tstart = Math.max(this._start - start, this._end);\r\n\t\t\t\tend = Math.max(start - diff, this._end);\r\n\r\n\t\t\t\treturn new IndexedIterable(this._array, start, end);\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"Start index must be lower than end index\");\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Defines events for the [[List]].\r\n */\r\nexport interface IListEvents<A> {\r\n\t/**\r\n\t * Invoked when item is added to the list.\r\n\t *\r\n\t * @todo remove this later?\r\n\t */\r\n\tinserted: {\r\n\t\tnewValue: A;\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when item is removed from the list.\r\n\t *\r\n\t * @todo remove this later?\r\n\t */\r\n\tremoved: {\r\n\t\toldValue: A;\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when `setAll` method is called.\r\n\t */\r\n\tsetAll: {\r\n\t\toldArray: Array<A>;\r\n\t\tnewArray: Array<A>;\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when `insertIndex` method is called.\r\n\t */\r\n\tinsertIndex: {\r\n\t\tindex: number;\r\n\t\tnewValue: A;\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when `setIndex` method is called.\r\n\t */\r\n\tsetIndex: {\r\n\t\tindex: number;\r\n\t\toldValue: A;\r\n\t\tnewValue: A;\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when item is removed.\r\n\t */\r\n\tremoveIndex: {\r\n\t\tindex: number;\r\n\t\toldValue: A;\r\n\t};\r\n\r\n}\r\n\r\n/**\r\n * ListGrouper organizes [[List]] items into groups.\r\n *\r\n * @ignore Exclude from docs\r\n */\r\nexport class ListGrouper<A> extends MultiDisposer {\r\n\r\n\t/**\r\n\t * Function that can be used to extract a \"value\" of the list element.\r\n\t *\r\n\t * Used for ordering.\r\n\t *\r\n\t * @type {function}\r\n\t */\r\n\tprivate _getKey: (value: A) => number;\r\n\r\n\t/**\r\n\t * A function that  is used to order list groups.\r\n\t *\r\n\t * @type {function}\r\n\t */\r\n\tprivate _sort: (left: number, right: number) => Ordering;\r\n\r\n\t/**\r\n\t * Grouping keys.\r\n\t *\r\n\t * @type {Array<number>}\r\n\t */\r\n\tprivate _keys: Array<number> = [];\r\n\r\n\t/**\r\n\t * List item groups.\r\n\t */\r\n\tprivate _groups: { [key: number]: Array<A> } = {};\r\n\r\n\t/**\r\n\t * Inserts an item (`x`) to a specific group (`key`) and specific `index`.\r\n\t *\r\n\t * @param {A}       x      Item\r\n\t * @param {number}  key    Group name\r\n\t * @param {number}  index  Index\r\n\t */\r\n\tprivate _insert(x: A, key: number, index?: number): void {\r\n\t\tif (this._groups[key] == null) {\r\n\t\t\tthis._groups[key] = [];\r\n\r\n\t\t\t// TODO code duplication with SortedList\r\n\t\t\tconst { found, index } = $array.getSortedIndex(this._keys, this._sort, key);\r\n\r\n\t\t\tif (found) {\r\n\t\t\t\tthrow new Error(\"Key already exists: \" + key);\r\n\r\n\t\t\t} else {\r\n\t\t\t\t$array.insertIndex(this._keys, index, key);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (index == null) {\r\n\t\t\tthis._groups[key].push(x);\r\n\r\n\t\t} else {\r\n\t\t\t$array.insertIndex(this._groups[key], index, x);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Removes an item from the list.\r\n\t *\r\n\t * @param {A} x Item to remove\r\n\t */\r\n\tprivate _remove(x: A): void {\r\n\t\tconst key = this._getKey(x);\r\n\r\n\t\tconst values = this._groups[key];\r\n\r\n\t\tif (values != null) {\r\n\t\t\t$array.remove(values, x);\r\n\r\n\t\t\tif (values.length === 0) {\r\n\t\t\t\tdelete this._groups[key];\r\n\r\n\t\t\t\tconst { found, index } = $array.getSortedIndex(this._keys, this._sort, key);\r\n\r\n\t\t\t\tif (found) {\r\n\t\t\t\t\t$array.removeIndex(this._keys, index);\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthrow new Error(\"Key doesn't exist: \" + key);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Constructor.\r\n\t */\r\n\tconstructor(\r\n\t\tlist: $iter.Iterable<A> & {\r\n\t\t\tevents: EventDispatcher<{\r\n\t\t\t\tinserted: { newValue: A },\r\n\t\t\t\tremoved: { oldValue: A }\r\n\t\t\t}>;\r\n\t\t},\r\n\t\tgetKey: (value: A) => number,\r\n\t\tsort: (left: number, right: number) => Ordering\r\n\t) {\r\n\t\tsuper([\r\n\t\t\tlist.events.on(\"inserted\", (x) => {\r\n\t\t\t\tconst value = x.newValue;\r\n\t\t\t\tconst key = this._getKey(value);\r\n\r\n\t\t\t\tlet index = 0;\r\n\r\n\t\t\t\t$iter.eachContinue(list.iterator(), (x) => {\r\n\t\t\t\t\tif (x === value) {\r\n\t\t\t\t\t\treturn false;\r\n\r\n\t\t\t\t\t} else if (this._getKey(x) === key) {\r\n\t\t\t\t\t\t++index;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis._insert(value, key, index);\r\n\t\t\t}),\r\n\r\n\t\t\tlist.events.on(\"removed\", (x) => {\r\n\t\t\t\tthis._remove(x.oldValue);\r\n\t\t\t})\r\n\t\t]);\r\n\r\n\t\tthis._getKey = getKey;\r\n\t\tthis._sort = sort;\r\n\r\n\t\t$iter.each(list.iterator(), (x) => {\r\n\t\t\tthis._insert(x, getKey(x));\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Returns an iterator for the list.\r\n\t *\r\n\t * The iterator will iterate through all items in all groups.\r\n\t *\r\n\t * @return {.Iterator<A>} Iterator\r\n\t */\r\n\tpublic iterator(): $iter.Iterator<A> {\r\n\t\treturn $iter.flatten($iter.map($iter.fromArray(this._keys), (key) => {\r\n\t\t\treturn $iter.fromArray(this._groups[key]);\r\n\t\t}));\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * @todo Description\r\n * @ignore Exclude from docs\r\n */\r\nexport type ListLike<A> = $iter.Iterable<A> & {\r\n\tevents: EventDispatcher<{ removed: { oldValue: A } }>;\r\n};\r\n\r\n/**\r\n * A disposable list, which when disposed itself will call `dispose()` method\r\n * on all its items.\r\n */\r\nexport class ListDisposer<A extends IDisposer> extends Disposer {\r\n\tconstructor(list: ListLike<A>) {\r\n\t\tconst disposer = list.events.on(\"removed\", (x) => {\r\n\t\t\tx.oldValue.dispose();\r\n\t\t});\r\n\r\n\t\tsuper(() => {\r\n\t\t\tdisposer.dispose();\r\n\r\n\t\t\t// TODO clear the list ?\r\n\t\t\t$iter.each(list.iterator(), (x) => {\r\n\t\t\t\tx.dispose();\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n}\r\n\r\n/**\r\n * Checks if specific index fits into length.\r\n *\r\n * @param {number}  index  Index\r\n * @param {number}  len    Length\r\n */\r\nfunction checkBounds(index: number, len: number): void {\r\n\tif (!(index >= 0 && index < len)) {\r\n\t\tthrow new Error(\"Index out of bounds: \" + index);\r\n\t}\r\n}\r\n\r\n\r\n/**\r\n * A List class is used to hold a number of indexed items of the same type.\r\n */\r\nexport class List<T> {\r\n\r\n\t/**\r\n\t * List values.\r\n\t *\r\n\t * @type {Array<T>}\r\n\t */\r\n\tprivate _values: Array<T>;\r\n\r\n\t/**\r\n\t * Event dispatcher.\r\n\t *\r\n\t * @type {EventDispatcher<AMEvent<this, IListEvents<T>>>}\r\n\t */\r\n\tpublic events: EventDispatcher<AMEvent<this, IListEvents<T>>> = new EventDispatcher();\r\n\r\n\t/**\r\n\t * Constructor\r\n\t *\r\n\t * @param {Array<T>}  initial  Inital list of values to add to list\r\n\t */\r\n\tconstructor(initial: Array<T> = []) {\r\n\t\tthis._values = initial;\r\n\t}\r\n\r\n\t/**\r\n\t * An array of values in the list.\r\n\t *\r\n\t * Do not use this property to add values. Rather use dedicated methods, like\r\n\t * `push()`, `removeIndex()`, etc.\r\n\t *\r\n\t * @readonly\r\n\t * @return {Array<T>} List values\r\n\t */\r\n\tpublic get values(): Array<T> {\r\n\t\treturn this._values;\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if list contains specific item reference.\r\n\t *\r\n\t * @param  {T}        item  Item to search for\r\n\t * @return {boolean}        `true` if found, `false` if not found\r\n\t */\r\n\tpublic contains(value: T): boolean {\r\n\t\treturn this._values.indexOf(value) !== -1;\r\n\t}\r\n\r\n\t/**\r\n\t * Removes specific item from the list.\r\n\t *\r\n\t * @param {T} item An item to remove\r\n\t */\r\n\tpublic removeValue(value: T): void {\r\n\t\tlet index: number;\r\n\r\n\t\twhile ((index = this.indexOf(value)) !== -1) {\r\n\t\t\tthis.removeIndex(index);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Searches the list for specific item and returns its index.\r\n\t *\r\n\t * @param  {T}       item  An item to search for\r\n\t * @return {number}        Index or -1 if not found\r\n\t */\r\n\tpublic indexOf(value: T): number {\r\n\t\treturn $array.indexOf(this._values, value);\r\n\t}\r\n\r\n\t/**\r\n\t * Number of items in list.\r\n\t *\r\n\t * @readonly\r\n\t * @return {number} Number of items\r\n\t */\r\n\tpublic get length(): number {\r\n\t\treturn this._values.length;\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if there's a value at specific index.\r\n\t *\r\n\t * @param  {number}   index  Index\r\n\t * @return {boolean}         Value exists?\r\n\t */\r\n\tpublic hasIndex(index: number): boolean {\r\n\t\treturn index >= 0 && index < this._values.length;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns an item at specified index.\r\n\t *\r\n\t * @param  {number}  index  Index\r\n\t * @return {T}              List item\r\n\t */\r\n\tpublic getIndex(index: number): T | undefined {\r\n\t\treturn this._values[index];\r\n\t}\r\n\r\n\t/**\r\n\t * Sets value at specific index.\r\n\t *\r\n\t * If there's already a value at the index, it is overwritten.\r\n\t *\r\n\t * @param  {number}  index  Index\r\n\t * @param  {T}       value  New value\r\n\t * @return {T}              New value\r\n\t */\r\n\tpublic setIndex(index: number, value: T): T {\r\n\t\tcheckBounds(index, this._values.length);\r\n\r\n\t\tconst oldValue = this._values[index];\r\n\r\n\t\t// Do nothing if the old value and the new value are the same\r\n\t\tif (oldValue !== value) {\r\n\t\t\tthis._values[index] = value;\r\n\r\n\t\t\tif (this.events.isEnabled(\"setIndex\")) {\r\n\t\t\t\tthis.events.dispatchImmediately(\"setIndex\", {\r\n\t\t\t\t\ttype: \"setIndex\",\r\n\t\t\t\t\ttarget: this,\r\n\t\t\t\t\tindex: index,\r\n\t\t\t\t\toldValue: oldValue,\r\n\t\t\t\t\tnewValue: value\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (this.events.isEnabled(\"removed\")) {\r\n\t\t\t\tthis.events.dispatchImmediately(\"removed\", {\r\n\t\t\t\t\ttype: \"removed\",\r\n\t\t\t\t\ttarget: this,\r\n\t\t\t\t\toldValue: oldValue\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (this.events.isEnabled(\"inserted\")) {\r\n\t\t\t\tthis.events.dispatchImmediately(\"inserted\", {\r\n\t\t\t\t\ttype: \"inserted\",\r\n\t\t\t\t\ttarget: this,\r\n\t\t\t\t\tnewValue: value\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn oldValue;\r\n\t}\r\n\r\n\t/**\r\n\t * Adds an item to the list at a specific index, which pushes all the other\r\n\t * items further down the list.\r\n\t *\r\n\t * @param  {number} index Index\r\n\t * @param  {T}      item  An item to add\r\n\t */\r\n\tpublic insertIndex(index: number, value: T): void {\r\n\t\tcheckBounds(index, this._values.length + 1);\r\n\r\n\t\t$array.insertIndex(this._values, index, value);\r\n\r\n\t\tif (this.events.isEnabled(\"insertIndex\")) {\r\n\t\t\tthis.events.dispatchImmediately(\"insertIndex\", {\r\n\t\t\t\ttype: \"insertIndex\",\r\n\t\t\t\ttarget: this,\r\n\t\t\t\tindex: index,\r\n\t\t\t\tnewValue: value\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.events.isEnabled(\"inserted\")) {\r\n\t\t\tthis.events.dispatchImmediately(\"inserted\", {\r\n\t\t\t\ttype: \"inserted\",\r\n\t\t\t\ttarget: this,\r\n\t\t\t\tnewValue: value\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * [_sortQuicksort description]\r\n\t *\r\n\t * @todo Description\r\n\t * @param {number}    low    [description]\r\n\t * @param {number}    high   [description]\r\n\t * @param {function}  order  [description]\r\n\t */\r\n\tprivate _sortQuicksort(low: number, high: number, order: (left: T, right: T) => Ordering): void {\r\n\t\tif (low < high) {\r\n\t\t\tconst p = this._sortPartition(low, high, order);\r\n\t\t\tthis._sortQuicksort(low, p, order);\r\n\t\t\tthis._sortQuicksort(p + 1, high, order);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * [_sortPartition description]\r\n\t *\r\n\t * @todo Description\r\n\t * @param  {number}    low    [description]\r\n\t * @param  {number}    high   [description]\r\n\t * @param  {function}  order  [description]\r\n\t * @return {number}           [description]\r\n\t */\r\n\tprivate _sortPartition(low: number, high: number, order: (left: T, right: T) => Ordering): number {\r\n\t\tconst values = this._values;\r\n\t\tconst pivot = values[low];\r\n\r\n\t\tlet i = low - 1;\r\n\t\tlet j = high + 1;\r\n\r\n\t\tfor (; ;) {\r\n\t\t\tdo {\r\n\t\t\t\t++i;\r\n\t\t\t} while (order(values[i], pivot) < 0);\r\n\r\n\t\t\tdo {\r\n\t\t\t\t--j;\r\n\t\t\t} while (order(values[j], pivot) > 0);\r\n\r\n\t\t\tif (i >= j) {\r\n\t\t\t\treturn j;\r\n\r\n\t\t\t} else {\r\n\t\t\t\tthis.swap(i, j);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Reorders list items according to specific ordering function.\r\n\t *\r\n\t * @param {T) => Ordering}  order  Ordering function\r\n\t */\r\n\tpublic sort(order: (left: T, right: T) => Ordering): void {\r\n\t\t// https://en.wikipedia.org/wiki/Quicksort#Hoare_partition_scheme\r\n\t\t// @todo faster implementation of this\r\n\t\t// @todo test this\r\n\t\tthis._sortQuicksort(0, this._values.length - 1, order);\r\n\t}\r\n\r\n\t/**\r\n\t * Swaps indexes of two items in the list.\r\n\t *\r\n\t * @param {number}  a  Item 1\r\n\t * @param {number}  b  Item 2\r\n\t */\r\n\tpublic swap(a: number, b: number): void {\r\n\t\tconst len = this._values.length;\r\n\r\n\t\tcheckBounds(a, len);\r\n\t\tcheckBounds(b, len);\r\n\r\n\t\tif (a !== b) {\r\n\t\t\tconst value_a = this._values[a];\r\n\t\t\tconst value_b = this._values[b];\r\n\r\n\t\t\tthis._values[a] = value_b;\r\n\r\n\t\t\tif (this.events.isEnabled(\"setIndex\")) {\r\n\t\t\t\tthis.events.dispatchImmediately(\"setIndex\", {\r\n\t\t\t\t\ttype: \"setIndex\",\r\n\t\t\t\t\ttarget: this,\r\n\t\t\t\t\tindex: a,\r\n\t\t\t\t\toldValue: value_a,\r\n\t\t\t\t\tnewValue: value_b\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tthis._values[b] = value_a;\r\n\r\n\t\t\tif (this.events.isEnabled(\"setIndex\")) {\r\n\t\t\t\tthis.events.dispatchImmediately(\"setIndex\", {\r\n\t\t\t\t\ttype: \"setIndex\",\r\n\t\t\t\t\ttarget: this,\r\n\t\t\t\t\tindex: b,\r\n\t\t\t\t\toldValue: value_b,\r\n\t\t\t\t\tnewValue: value_a\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Removes a value at specific index.\r\n\t *\r\n\t * @param  {number}  index  Index of value to remove\r\n\t * @return {T}              Removed value\r\n\t */\r\n\tpublic removeIndex(index: number): T {\r\n\t\tcheckBounds(index, this._values.length);\r\n\r\n\t\tconst oldValue = this._values[index];\r\n\r\n\t\t$array.removeIndex(this._values, index);\r\n\r\n\t\tif (this.events.isEnabled(\"removeIndex\")) {\r\n\t\t\tthis.events.dispatchImmediately(\"removeIndex\", {\r\n\t\t\t\ttype: \"removeIndex\",\r\n\t\t\t\ttarget: this,\r\n\t\t\t\tindex: index,\r\n\t\t\t\toldValue: oldValue\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.events.isEnabled(\"removed\")) {\r\n\t\t\tthis.events.dispatchImmediately(\"removed\", {\r\n\t\t\t\ttype: \"removed\",\r\n\t\t\t\ttarget: this,\r\n\t\t\t\toldValue: oldValue\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn oldValue;\r\n\t}\r\n\r\n\t/**\r\n\t * Moves an item to a specific index within the list\r\n\t *\r\n\t * If the index is not specified it will move the item to the end of the\r\n\t * list.\r\n\t *\r\n\t * @param {T}       value  Item to move\r\n\t * @param {number}  index  Index to place item at\r\n\t */\r\n\tpublic moveValue(value: T, toIndex?: number): void {\r\n\t\t// TODO don't do anything if the desired index is the same as the current index\r\n\t\tlet index = this.indexOf(value);\r\n\r\n\t\t// TODO remove all old values rather than only the first ?\r\n\t\tif (index !== -1) {\r\n\t\t\tconst oldValue = this._values[index];\r\n\r\n\t\t\t$array.removeIndex(this._values, index);\r\n\r\n\t\t\tif (this.events.isEnabled(\"removeIndex\")) {\r\n\t\t\t\tthis.events.dispatchImmediately(\"removeIndex\", {\r\n\t\t\t\t\ttype: \"removeIndex\",\r\n\t\t\t\t\ttarget: this,\r\n\t\t\t\t\tindex: index,\r\n\t\t\t\t\toldValue: oldValue\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (toIndex == null) {\r\n\t\t\ttoIndex = this._values.length;\r\n\t\t\tthis._values.push(value);\r\n\r\n\t\t} else {\r\n\t\t\t$array.insertIndex(this._values, toIndex, value);\r\n\t\t}\r\n\r\n\t\tif (this.events.isEnabled(\"insertIndex\")) {\r\n\t\t\tthis.events.dispatchImmediately(\"insertIndex\", {\r\n\t\t\t\ttype: \"insertIndex\",\r\n\t\t\t\ttarget: this,\r\n\t\t\t\tindex: toIndex,\r\n\t\t\t\tnewValue: value\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (index === -1) {\r\n\t\t\tif (this.events.isEnabled(\"inserted\")) {\r\n\t\t\t\tthis.events.dispatchImmediately(\"inserted\", {\r\n\t\t\t\t\ttype: \"inserted\",\r\n\t\t\t\t\ttarget: this,\r\n\t\t\t\t\tnewValue: value\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Adds an item to the end of the list.\r\n\t *\r\n\t * @param  {T}  item  An item to add\r\n\t */\r\n\tpublic push<K extends T>(value: K): K {\r\n\t\tconst index = this._values.push(value) - 1;\r\n\r\n\t\tif (this.events.isEnabled(\"insertIndex\")) {\r\n\t\t\tthis.events.dispatchImmediately(\"insertIndex\", {\r\n\t\t\t\ttype: \"insertIndex\",\r\n\t\t\t\ttarget: this,\r\n\t\t\t\tindex: index,\r\n\t\t\t\tnewValue: value\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.events.isEnabled(\"inserted\")) {\r\n\t\t\tthis.events.dispatchImmediately(\"inserted\", {\r\n\t\t\t\ttype: \"inserted\",\r\n\t\t\t\ttarget: this,\r\n\t\t\t\tnewValue: value\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn value;\r\n\t}\r\n\r\n\t/**\r\n\t * Adds an item as a first item in the list.\r\n\t *\r\n\t * @param  {T}  item  An item to add\r\n\t */\r\n\tpublic unshift(value: T): void {\r\n\t\treturn this.insertIndex(0, value);\r\n\t}\r\n\r\n\t/**\r\n\t * Adds multiple items to the list.\r\n\t *\r\n\t * @param {Array<T>}  items  An Array of items to add\r\n\t */\r\n\tpublic pushAll(values: Array<T>): void {\r\n\t\t$array.each(values, (value) => {\r\n\t\t\tthis.push(value);\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Copies and adds items from abother list.\r\n\t *\r\n\t * @param {List<T>}  source  A list top copy items from\r\n\t */\r\n\tpublic copyFrom(source: this): void {\r\n\t\tthis.pushAll(source._values);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the last item from the list, and removes it.\r\n\t *\r\n\t * @return {T} Item\r\n\t */\r\n\tpublic pop(): $type.Optional<T> {\r\n\t\tlet index = this._values.length - 1;\r\n\t\treturn index < 0 ? undefined : this.removeIndex(this._values.length - 1);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the first item from the list, and removes it.\r\n\t *\r\n\t * @return {T} Item\r\n\t */\r\n\tpublic shift(): $type.Optional<T> {\r\n\t\treturn this._values.length ? this.removeIndex(0) : undefined;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets multiple items to the list.\r\n\t *\r\n\t * All current items are removed.\r\n\t *\r\n\t * @param {Array<T>}  newArray  New items\r\n\t */\r\n\tpublic setAll(newArray: Array<T>): void {\r\n\t\t// @tod if a value exists in both the new and old arrays, don't send remove/insert events\r\n\t\tconst oldArray = $array.copy(this._values);\r\n\r\n\t\tthis._values.length = 0;\r\n\r\n\t\t$array.each(newArray, (value) => {\r\n\t\t\tthis._values.push(value);\r\n\t\t});\r\n\r\n\t\tif (this.events.isEnabled(\"setAll\")) {\r\n\t\t\tthis.events.dispatchImmediately(\"setAll\", {\r\n\t\t\t\ttype: \"setAll\",\r\n\t\t\t\ttarget: this,\r\n\t\t\t\toldArray: oldArray,\r\n\t\t\t\tnewArray: this._values // TODO make a copy ?\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.events.isEnabled(\"removed\")) {\r\n\t\t\t$array.each(oldArray, (x) => {\r\n\t\t\t\tthis.events.dispatchImmediately(\"removed\", {\r\n\t\t\t\t\ttype: \"removed\",\r\n\t\t\t\t\ttarget: this,\r\n\t\t\t\t\toldValue: x\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.events.isEnabled(\"inserted\")) {\r\n\t\t\t$array.each(this._values, (x) => {\r\n\t\t\t\tthis.events.dispatchImmediately(\"inserted\", {\r\n\t\t\t\t\ttype: \"inserted\",\r\n\t\t\t\t\ttarget: this,\r\n\t\t\t\t\tnewValue: x\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Removes all items from the list.\r\n\t */\r\n\tpublic clear(): void {\r\n\t\tthis.setAll([]);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a list iterator.\r\n\t *\r\n\t * @return {Iterator} Iterator\r\n\t */\r\n\tpublic iterator(): $iter.Iterator<T> {\r\n\t\treturn $iter.fromArray(this._values);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns an ES6 iterator for the list.\r\n\t */\r\n\tpublic *[Symbol.iterator](): Iterator<T> {\r\n\t\tconst length = this._values.length;\r\n\r\n\t\tfor (let i = 0; i < length; ++i) {\r\n\t\t\tyield this._values[i];\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Calls `f` for each element in the list.\r\n\t */\r\n\tpublic each(f: (value: T) => void): void {\r\n\t\t$array.each(this._values, f);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a specific range of list items, which can be iterated.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Code duplication with IndexedIterable\r\n\t * @param  {number}              start  Start index\r\n\t * @param  {number}              end    End index\r\n\t * @return {IndexedIterable<T>}         Range\r\n\t */\r\n\tpublic range(start: number, end: number): IndexedIterable<T> {\r\n\t\tif (start <= end) {\r\n\t\t\tconst diff = end - start;\r\n\r\n\t\t\tstart = Math.max(start, 0);\r\n\t\t\tend = Math.min(start + diff, this._values.length);\r\n\r\n\t\t\treturn new IndexedIterable(this._values, start, end);\r\n\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"Start index must be lower than end index\");\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns an iterator that has list items sorted backwards.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {IndexedIterable<T>} List\r\n\t */\r\n\tpublic backwards(): IndexedIterable<T> {\r\n\t\treturn new IndexedIterable(this._values, this._values.length, 0);\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * A version of a [[List]] that has a \"template\".\r\n *\r\n * A template is an instance of an object, that can be used to create new\r\n * elements in the list without actually needing to create instances for those.\r\n *\r\n * When new element is created in the list, e.g. by calling its `create()`\r\n * method, an exact copy of the element is created (including properties and\r\n * other attributes), inserted into the list and returned.\r\n */\r\nexport class ListTemplate<T extends IClone<T> & { isTemplate: boolean }> extends List<T> implements IClone<ListTemplate<T>> {\r\n\t/**\r\n\t * A template object.\r\n\t *\r\n\t * @todo Make this private\r\n\t * @type {T}\r\n\t */\r\n\tpublic _template!: T;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t *\r\n\t * @param {T} t Template object\r\n\t */\r\n\tpublic constructor(t: T) {\r\n\t\tsuper();\r\n\t\tthis.template = t;\r\n\t}\r\n\r\n\t/**\r\n\t * A \"template\" object to copy all properties from when creating new list\r\n\t * items.\r\n\t *\r\n\t * @param {T}  v  Template object\r\n\t */\r\n\tpublic set template(v: T) {\r\n\t\tv.isTemplate = true;\r\n\t\tthis._template = v;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {T} Template object\r\n\t */\r\n\tpublic get template(): T {\r\n\t\treturn this._template;\r\n\t}\r\n\r\n\t/**\r\n\t * Copies all elements from other list.\r\n\t *\r\n\t * @param {ListTemplate}  source  Source list\r\n\t */\r\n\tpublic copyFrom(source: this): void {\r\n\t\t$iter.each(source.iterator(), (value) => {\r\n\t\t\tthis.push(value.clone());\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Instantiates a new object of the specified type, adds it to the end of\r\n\t * the list, and returns it.\r\n\t *\r\n\t * @param make  Item type to use. Will use the default type for the list if not specified.\r\n\t * @return      Newly created item\r\n\t */\r\n\tpublic create(make: { new(): T; }): T;\r\n\tpublic create(): T;\r\n\tpublic create(make?: { new(): T; }): T {\r\n\t\tconst clone =\r\n\t\t\t(make != null\r\n\t\t\t\t? new make()\r\n\t\t\t\t: this.template.clone());\r\n\r\n\t\tthis.push(clone);\r\n\r\n\t\treturn clone;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates an exact clone of the list, including its items and template.\r\n\t *\r\n\t * @return {ListTemplate<T>} New list\r\n\t */\r\n\tpublic clone(): ListTemplate<T> {\r\n\t\tconst out = new ListTemplate(this.template);\r\n\r\n\t\tconst values = this.values;\r\n\r\n\t\tconst length = values.length;\r\n\r\n\t\tfor (let i = 0; i < length; ++i) {\r\n\t\t\tout.push(values[i].clone());\r\n\t\t}\r\n\r\n\t\treturn out;\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/utils/List.ts","/**\n * ============================================================================\n * MAIN CLASS\n * ============================================================================\n * @hidden\n */\n\n/**\n * Represents a relative value. (percent)\n */\nexport class Percent {\n\n\t/**\n\t * Value in percent.\n\t *\n\t * @type {number}\n\t */\n\tprotected _value: number;\n\n\t/**\n\t * Constructor.\n\t *\n\t * @param {number}  percent  Percent value\n\t */\n\tconstructor(percent: number) {\n\t\tthis._value = percent;\n\t}\n\n\t/**\n\t * Relative value.\n\t *\n\t * E.g. 100% is 1, 50% is 0.5, etc.\n\t *\n\t * This is useful to apply transformations to other values. E.g.:\n\t *\n\t * ```TypeScript\n\t * let value = 256;\n\t * let percent = new am4core.Percent(50);\n\t * console.log(value * percent.value); // outputs 128\n\t * ```\n\t * ```JavaScript\n\t * var value = 256;\n\t * var percent = new am4core.Percent(50);\n\t * console.log(value * percent.value); // outputs 128\n\t * ```\n\t *\n\t * @readonly\n\t * @return {number} Relative value\n\t */\n\tpublic get value(): number {\n\t\treturn this._value / 100;\n\t}\n\n\t/**\n\t * Value in percent.\n\t *\n\t * @return {number} Percent\n\t */\n\tpublic get percent(): number {\n\t\treturn this._value;\n\t}\n\n\t/*public toString(): string {\n\t\treturn \"\" + this._value + \"%\";\n\t}\n\n\tpublic toNumber(): number {\n\t\treturn this.percent;\n\t}*/\n\n}\n\n\n/**\n * Converts numeric percent value to a proper [[Percent]] object.\n *\n * ```TypeScript\n * pieSeries.radius = am4core.percent(80);\n * ```\n * ```JavaScript\n * pieSeries.radius = am4core.percent(80);\n * ```\n *\n * @param  {number}   value  Percent\n * @return {Percent}         Percent object\n */\nexport function percent(value: number): Percent {\n\treturn new Percent(value);\n}\n\n\n/**\n * Checks if value is a [[Percent]] object.\n *\n * @ignore Exclude from docs\n * @param  {any}      value  Input value\n * @return {boolean}         Is percent?\n */\nexport function isPercent(value: any): boolean {\n\treturn value instanceof Percent;\n}\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/utils/Percent.ts","/**\r\n * This module contains a version of ColorSet that can (and should) be used for\r\n * coloring UI elements.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { BaseObject } from \"../Base\";\r\nimport { Color, color } from \"./Color\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines available color purposes and their relation with the color set color\r\n * index.\r\n */\r\nexport interface ColorPurpose {\r\n\tstroke: Color,\r\n\tfill: Color,\r\n\r\n\tprimaryButton: Color,\r\n\tprimaryButtonHover: Color,\r\n\tprimaryButtonDown: Color,\r\n\tprimaryButtonActive: Color,\r\n\tprimaryButtonText: Color,\r\n\tprimaryButtonStroke: Color,\r\n\r\n\tsecondaryButton: Color,\r\n\tsecondaryButtonHover: Color,\r\n\tsecondaryButtonDown: Color,\r\n\tsecondaryButtonActive: Color,\r\n\tsecondaryButtonText: Color,\r\n\tsecondaryButtonStroke: Color,\r\n\r\n\tgrid: Color,\r\n\tbackground: Color,\r\n\talternativeBackground: Color,\r\n\ttext: Color,\r\n\talternativeText: Color,\r\n\tdisabledBackground: Color,\r\n\r\n\tpositive: Color,\r\n\tnegative: Color\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * This module contains a version of ColorSet that can (and should) be used for\r\n * coloring UI elements.\r\n *\r\n * The main difference from the basic [[ColorSet]] is that instead of sequenced\r\n * colors, it uses a concept of named colors.\r\n *\r\n * This way, every element in the UI can extract an exact color theme author\r\n * meant for the specific purpose, like strokes, backgrounds, etc.\r\n */\r\nexport class InterfaceColorSet extends BaseObject {\r\n\r\n\t/**\r\n\t * Maps the list of purposes (like \"stroke\") to an index of color of the\r\n\t * color set.\r\n\t */\r\n\tprotected _purposes: ColorPurpose = {\r\n\t\tstroke: color(\"#e5e5e5\"),\r\n\t\tfill: color(\"#f3f3f3\"),\r\n\r\n\t\tprimaryButton: color(\"#6794dc\"),\r\n\t\tprimaryButtonHover: color(\"#6771dc\"),\r\n\t\tprimaryButtonDown: color(\"#68dc75\"),\r\n\t\tprimaryButtonActive: color(\"#68dc75\"),\r\n\t\tprimaryButtonText: color(\"#FFFFFF\"),\r\n\t\tprimaryButtonStroke: color(\"#FFFFFF\"),\r\n\r\n\t\tsecondaryButton: color(\"#d9d9d9\"),\r\n\t\tsecondaryButtonHover: color(\"#d9d9d9\").brighten(-0.25),\r\n\t\tsecondaryButtonDown: color(\"#d9d9d9\").brighten(-0.35),\r\n\t\tsecondaryButtonActive: color(\"#d9d9d9\").brighten(0.35),\r\n\t\tsecondaryButtonText: color(\"#000000\"),\r\n\r\n\t\tsecondaryButtonStroke: color(\"#FFFFFF\"),\r\n\r\n\t\tgrid: color(\"#000000\"),\r\n\t\tbackground: color(\"#ffffff\"),\r\n\t\talternativeBackground: color(\"#000000\"),\r\n\t\ttext: color(\"#000000\"),\r\n\t\talternativeText: color(\"#FFFFFF\"),\r\n\t\tdisabledBackground: color(\"#999999\"),\r\n\t\tpositive: color(\"#67dc75\"),\r\n\t\tnegative: color(\"#dc6788\")\r\n\t};\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"InterfaceColorSet\";\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\tprotected debug(): void {}\r\n\r\n\t/**\r\n\t * Returns a color to be used for the specific purpose.\r\n\t *\r\n\t * ```TypeScript\r\n\t * let uicolors = new am4core.InterfaceColorSet();\r\n\t * console.log(uicolors.getFor(\"stroke\"));\r\n\t * ```\r\n\t * ```JavaScript\r\n\t * var uicolors = new am4core.InterfaceColorSet();\r\n\t * console.log(uicolors.getFor(\"stroke\"));\r\n\t * ```\r\n\t *\r\n\t * @param  {keyof ColorPurpose}  purpose  Color use purpuse\r\n\t * @return {Color}                        Color\r\n\t */\r\n\tpublic getFor(purpose: keyof ColorPurpose): Color {\r\n\t\treturn this._purposes[purpose];\r\n\t}\r\n\r\n\t/**\r\n\t * Sets color to be used for the specific purpose.\r\n\t *\r\n\t * @param {keyof ColorPurpose}  purpose  Color use purpose\r\n\t * @param {Color}               color    Color\r\n\t */\r\n\tpublic setFor(purpose: keyof ColorPurpose, color: Color): void {\r\n\t\tthis._purposes[purpose] = color;\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/utils/InterfaceColorSet.ts","/**\r\n * A collection of functions that deals with path calculations.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { IPoint } from \"../defs/IPoint\";\r\nimport { IRectangle } from \"../defs/IRectangle\";\r\nimport * as $math from \"../utils/Math\";\r\nimport * as $type from \"../utils/Type\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * PATH FUNCTIONS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Returns an SVG path from a number of points.\r\n *\r\n * @ignore Exclude from docs\r\n * @param  {IPoint[]}  points  An array of line elbow points\r\n * @return {string}            SVG path\r\n */\r\nexport function polyline(points: IPoint[]): string {\r\n\tlet path = lineTo(points[0]);\r\n\tfor (let i: number = 0; i < points.length; i++) {\r\n\t\tpath += lineTo(points[i]);\r\n\t}\r\n\treturn path;\r\n}\r\n\r\n\r\n/**\r\n * Returns a starting point of an SVG path.\r\n *\r\n * @ignore Exclude from docs\r\n * @param  {IPoint}  point  Starting point\r\n * @return {string}         SVG path\r\n */\r\nexport function moveTo(point: IPoint): string {\r\n\treturn \" M\" + $math.round(point.x, 4) + \",\" + $math.round(point.y, 4) + \" \";\r\n}\r\n\r\n/**\r\n * Returns a line part of SVG path.\r\n *\r\n * @ignore Exclude from docs\r\n * @param  {IPoint}  point  SVG path\r\n * @return {string}         SVG path\r\n */\r\nexport function lineTo(point: IPoint): string {\r\n\treturn \" L\" + $math.round(point.x, 4) + \",\" + $math.round(point.y, 4) + \" \";\r\n}\r\n\r\n/**\r\n * Returns a quadratic curve part of an SVG path.\r\n *\r\n * @ignore Exclude from docs\r\n * @param  {IPoint}  point         End point of the curve\r\n * @param  {IPoint}  controlPoint  Control point\r\n * @return {string}                SVG path\r\n */\r\nexport function quadraticCurveTo(point: IPoint, controlPoint: IPoint): string {\r\n\treturn \" Q\" + $math.round(controlPoint.x, 4)\r\n\t\t+ \",\" + $math.round(controlPoint.y, 4) + \" \" + $math.round(point.x, 4)\r\n\t\t+ \",\" + $math.round(point.y, 4);\r\n}\r\n\r\n/**\r\n * Returns a cubic curve part of an SVG path.\r\n *\r\n * @ignore Exclude from docs\r\n * @param  {IPoint}  point          End point of the curve\r\n * @param  {IPoint}  controlPointA  Control point A\r\n * @param  {IPoint}  controlPointB  Control point B\r\n * @return {string}                 SVG path\r\n */\r\nexport function cubicCurveTo(point: IPoint, controlPointA: IPoint, controlPointB: IPoint): string {\r\n\treturn \" C\" + $math.round(controlPointA.x, 4)\r\n\t\t+ \",\" + $math.round(controlPointA.y, 4) + \" \" + $math.round(controlPointB.x, 4)\r\n\t\t+ \",\" + $math.round(controlPointB.y, 4) + \" \" + $math.round(point.x, 4)\r\n\t\t+ \",\" + $math.round(point.y, 4);\r\n}\r\n\r\n/**\r\n * Returns a terminator for an SVG path.\r\n *\r\n * @ignore Exclude from docs\r\n * @return {string} SVG path\r\n */\r\nexport function closePath(): string {\r\n\treturn \" Z\";\r\n}\r\n\r\n/**\r\n * Returns an arc part of an SVG path.\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Better parameter descriptions\r\n * @param  {number}  startAngle  Starting angle\r\n * @param  {number}  arc         Arc\r\n * @param  {number}  radius      Radius\r\n * @param  {number}  radiusY     Vertical radius\r\n * @return {string}              SVG path\r\n */\r\nexport function arcTo(startAngle: number, arc: number, radius: number, radiusY?: number): string {\r\n\r\n\tif (arc == 0) {\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\tif (!$type.isNumber(radiusY)) {\r\n\t\tradiusY = radius;\r\n\t}\r\n\r\n\tlet path = \"\";\r\n\tlet c = \",\";\r\n\tlet segments = Math.ceil(Math.abs(arc) / 180);\r\n\tlet l = 1;\r\n\r\n\tif (arc < 0) {\r\n\t\tl = 0;\r\n\t}\r\n\r\n\t// center\r\n\tlet cx: number = -$math.cos(startAngle) * radius;\r\n\tlet cy: number = -$math.sin(startAngle) * radiusY;\r\n\r\n\t// previous, as we use a not A\r\n\tlet pax: number = 0;\r\n\tlet pay: number = 0;\r\n\r\n\tfor (let i = 0; i < segments; i++) {\r\n\t\tlet endAngle = startAngle + arc / segments * (i + 1);\r\n\r\n\t\tlet ax = $math.round($math.cos(endAngle) * radius + cx - pax, 4);\r\n\t\tlet ay = $math.round($math.sin(endAngle) * radiusY + cy - pay, 4);\r\n\r\n\t\tpath += \" a\" + radius + c + radiusY + c + 0 + c + 0 + c + l + c + ax + c + ay;\r\n\r\n\t\tpax = ax;\r\n\t\tpay = ay;\r\n\t}\r\n\treturn path;\r\n}\r\n\r\n/**\r\n * Creates an arc path.\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @param  {number}  startAngle         [description]\r\n * @param  {number}  arc                [description]\r\n * @param  {number}  radius             [description]\r\n * @param  {number}  innerRadius        [description]\r\n * @param  {number}  radiusY            [description]\r\n * @param  {number}  cornerRadius       [description]\r\n * @param  {number}  innerCornerRadius  [description]\r\n * @return {string}                     SVG path\r\n */\r\nexport function arc(startAngle: number, arc: number, radius: number, innerRadius?: number, radiusY?: number, cornerRadius?: number, innerCornerRadius?: number): string {\r\n\tif (arc == 0 || radius <= 0) {\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\tif(radius < innerRadius){\r\n\t\tlet temp = radius;\r\n\t\tradius = innerRadius;\r\n\t\tinnerRadius = temp;\r\n\r\n\t\tradiusY = radiusY / innerRadius * radius;\r\n\t}\t\r\n\r\n\tarc = $math.min(arc, 360);\r\n\r\n\tif (arc == 360) {\r\n\t\tcornerRadius = 0;\r\n\t\tinnerCornerRadius = 0;\r\n\t}\r\n\r\n\tlet endAngle = startAngle + arc;\r\n\tlet crSin = $math.sin($math.min(arc, 45) / 2);\r\n\r\n\tinnerRadius = innerRadius || 0\r\n\tradiusY = $type.isNumber(radiusY) ? radiusY : radius;\r\n\tcornerRadius = cornerRadius || 0;\r\n\tinnerCornerRadius = $type.isNumber(innerCornerRadius) ? innerCornerRadius : cornerRadius;\r\n\r\n\tlet innerRadiusY = (radiusY / radius) * innerRadius;\r\n\r\n\tlet cornerRadiusY = (radiusY / radius) * cornerRadius;\r\n\tlet innerCornerRadiusY = (radiusY / radius) * innerCornerRadius;\r\n\r\n\tcornerRadius = $math.fitToRange(cornerRadius, 0, (radius - innerRadius) / 2);\r\n\tcornerRadiusY = $math.fitToRange(cornerRadiusY, 0, (radiusY - innerRadiusY) / 2);\r\n\r\n\tinnerCornerRadius = $math.fitToRange(innerCornerRadius, 0, (radius - innerRadius) / 2);\r\n\tinnerCornerRadiusY = $math.fitToRange(innerCornerRadiusY, 0, (radiusY - innerRadiusY) / 2);\r\n\r\n\tcornerRadius = $math.round($math.fitToRange(cornerRadius, 0, radius * crSin), 4);\r\n\tcornerRadiusY = $math.round($math.fitToRange(cornerRadiusY, 0, radiusY * crSin), 4);\r\n\r\n\tinnerCornerRadius = $math.round($math.fitToRange(innerCornerRadius, 0, innerRadius * crSin), 4);\r\n\tinnerCornerRadiusY = $math.round($math.fitToRange(innerCornerRadiusY, 0, innerRadiusY * crSin), 4);\r\n\r\n\tlet crAngle: number = Math.asin(cornerRadius / radius / 2) * $math.DEGREES * 2;\r\n\tlet crAngleY: number = Math.asin(cornerRadiusY / radiusY / 2) * $math.DEGREES * 2;\r\n\r\n\tif (innerRadius < innerCornerRadius) {\r\n\t\tinnerRadius = innerCornerRadius;\r\n\t}\r\n\r\n\tif (innerRadiusY < innerCornerRadiusY) {\r\n\t\tinnerRadiusY = innerCornerRadiusY;\r\n\t}\r\n\r\n\tlet crInnerAngle: number = Math.asin(innerCornerRadius / innerRadius / 2) * $math.DEGREES * 2;\r\n\tlet crInnerAngleY: number = Math.asin(innerCornerRadiusY / innerRadiusY / 2) * $math.DEGREES * 2;\r\n\r\n\tif (!$type.isNumber(crInnerAngle)) {\r\n\t\tcrInnerAngle = 0;\r\n\t}\r\n\tif (!$type.isNumber(crInnerAngleY)) {\r\n\t\tcrInnerAngleY = 0;\r\n\t}\r\n\r\n\tlet middleAngle = startAngle + arc / 2;\r\n\tlet mPoint = { x: $math.round($math.cos(middleAngle) * innerRadius, 4), y: $math.sin(middleAngle) * innerRadiusY };\r\n\r\n\tlet a0 = { x: $math.cos(startAngle) * (innerRadius + innerCornerRadius), y: $math.sin(startAngle) * (innerRadiusY + innerCornerRadiusY) };\r\n\tlet b0 = { x: $math.cos(startAngle) * (radius - cornerRadius), y: $math.sin(startAngle) * (radiusY - cornerRadiusY) };\r\n\tlet c0 = { x: $math.cos(endAngle) * (radius - cornerRadius), y: $math.sin(endAngle) * (radiusY - cornerRadiusY) };\r\n\tlet d0 = { x: $math.cos(endAngle) * (innerRadius + innerCornerRadius), y: $math.sin(endAngle) * (innerRadiusY + innerCornerRadiusY) };\r\n\r\n\tlet b1 = { x: $math.cos(startAngle + crAngle) * radius, y: $math.sin(startAngle + crAngleY) * radiusY };\r\n\tlet d1 = { x: $math.cos(endAngle - crInnerAngle) * innerRadius, y: $math.sin(endAngle - crInnerAngleY) * innerRadiusY };\r\n\r\n\t// some magic math\r\n\tinnerCornerRadius += innerCornerRadius * $math.sin(crInnerAngle / 2);\r\n\tinnerCornerRadiusY += innerCornerRadiusY * $math.sin(crInnerAngleY / 2);\r\n\r\n\tif (crInnerAngle > (endAngle - startAngle) / 2) {\r\n\t\td1 = mPoint;\r\n\t}\r\n\r\n\tlet path: string = \"\";\r\n\t// start from b if this is full circle\r\n\tif (arc == 360) {\r\n\t\tpath = moveTo(b0);\r\n\t}\r\n\t// otherwise start from a\r\n\telse {\r\n\t\tpath = moveTo(a0);\r\n\t\tpath += lineTo(b0);\r\n\t\tpath += arcToPoint(b1, cornerRadius, cornerRadiusY, true);\r\n\t}\r\n\r\n\t// draw arc\r\n\tpath += arcTo(startAngle + crAngle, arc - 2 * crAngle, radius, radiusY);\r\n\r\n\t// draw inner arc\r\n\tif ($type.isNumber(innerRadius) && innerRadius != 0) {\r\n\r\n\t\t// move to B if this is full circle\r\n\t\tif (arc == 360 && cornerRadius == 0) {\r\n\t\t\tpath += moveTo(d0);\r\n\t\t}\r\n\t\t// draw line otherwise\r\n\t\telse {\r\n\t\t\tpath += arcToPoint(c0, cornerRadius, cornerRadiusY, true);\r\n\t\t\tpath += lineTo(d0);\r\n\t\t\tpath += arcToPoint(d1, innerCornerRadius, innerCornerRadiusY, true);\r\n\t\t}\r\n\r\n\t\tpath += arcTo(endAngle - crInnerAngle, -(arc - 2 * crInnerAngle), innerRadius, innerRadiusY);\r\n\t\tif (arc < 360 || cornerRadius > 0) {\r\n\t\t\tpath += arcToPoint(a0, innerCornerRadius, innerCornerRadiusY, true);\r\n\t\t}\r\n\t\tpath += lineTo(a0);\r\n\t}\r\n\telse{\r\n\t\tpath += arcToPoint(c0, cornerRadius, cornerRadiusY, true);\r\n\t\tif (arc < 360){\r\n\t\t\tpath += lineTo(a0);\r\n\t\t}\r\n\t}\r\n\r\n\treturn path;\r\n}\r\n\r\n/**\r\n * Creates a path for an arc to specific coordinate.\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @param  {IPoint}  point         Reference point\r\n * @param  {number}  radius        Radius\r\n * @param  {number}  radiusY       Vertical radius (for skewed arcs)\r\n * @param  {boolean} sweepFlag     [description]\r\n * @param  {boolean} largeArcFlag  [description]\r\n * @param  {number}  xAxisRotation [description]\r\n * @return {string}                Arc path\r\n */\r\nexport function arcToPoint(point: IPoint, radius: number, radiusY?: number, sweepFlag?: boolean, largeArcFlag?: boolean, xAxisRotation?: number): string {\r\n\tif (radius == 0) {\r\n\t\treturn \"\";\r\n\t}\r\n\txAxisRotation = xAxisRotation || 0;\r\n\tlargeArcFlag = Boolean(largeArcFlag);\r\n\tsweepFlag = Boolean(sweepFlag);\r\n\r\n\tlet c = \",\";\r\n\tlet sweepFlagValue: number = +sweepFlag; // converts to 1 or 0\r\n\tlet largeArcFlagValue: number = +largeArcFlag;  // converts to 1 or 0\r\n\r\n\treturn \" A\" + radius + c + radiusY + c + xAxisRotation + c + largeArcFlagValue + c + sweepFlagValue + c + $math.round(point.x, 4) + c + $math.round(point.y, 4);\r\n}\r\n\r\n/**\r\n * Creates a new rectangle.\r\n *\r\n * @ignore Exclude from docs\r\n * @param  {number}  width   Width (px)\r\n * @param  {number}  height  Height (px)\r\n * @param  {number}  x       X position\r\n * @param  {number}  y       Y position\r\n * @return {string}          Rectangle\r\n */\r\nexport function rectangle(width: number, height: number, x?: number, y?: number): string {\r\n\tif (!$type.isNumber(x)) {\r\n\t\tx = 0;\r\n\t}\r\n\tif (!$type.isNumber(y)) {\r\n\t\ty = 0;\r\n\t}\r\n\treturn moveTo({ x: x, y: y }) + lineTo({ x: x + width, y: y }) + lineTo({ x: x + width, y: y + height }) + lineTo({ x: x, y: y + height }) + closePath();\r\n}\r\n\r\n/**\r\n * Converts a rectangle to an SVG path.\r\n *\r\n * @ignore Exclude from docs\r\n * @param  {IRectangle}  rect  Rectangle\r\n * @param  {boolean}     ccw   Counter-clockwise?\r\n * @return {string}            SVG path\r\n */\r\nexport function rectToPath(rect: IRectangle, ccw?: boolean): string {\r\n\tlet c = \",\";\r\n\tlet L = \" L\";\r\n\tif (ccw) {\r\n\t\treturn \"M\" + rect.x\r\n\t\t\t+ c + rect.y + L + rect.x\r\n\t\t\t+ c + (rect.y + rect.height) + L + (rect.x + rect.width)\r\n\t\t\t+ c + (rect.y + rect.height) + L + (rect.x + rect.width)\r\n\t\t\t+ c + rect.y + L + rect.x\r\n\t\t\t+ c + rect.y;\r\n\t}\r\n\telse {\r\n\t\treturn \"M\" + rect.x\r\n\t\t\t+ c + rect.y + L + (rect.x + rect.width)\r\n\t\t\t+ c + rect.y + L + (rect.x + rect.width)\r\n\t\t\t+ c + (rect.y + rect.height) + L + rect.x\r\n\t\t\t+ c + (rect.y + rect.height) + L + rect.x\r\n\t\t\t+ c + rect.y;\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/rendering/Path.ts","var isObject = require('./_is-object');\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_an-object.js\n// module id = 11\n// module chunks = 26","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_global.js\n// module id = 12\n// module chunks = 26","/**\r\n * This is the main class that encapsulates every object on the chart.\r\n *\r\n * If it's an element that is to be displayed on the screen at some point, its\r\n * class must extend [[Sprite]] class.\r\n */\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { SpriteState } from \"./SpriteState\";\r\nimport { ISpriteEvents, SpriteEventDispatcher, AMEvent } from \"./SpriteEvents\";\r\nexport { ISpriteEvents, SpriteEventDispatcher, AMEvent };\r\n\r\nimport { BaseObjectEvents } from \"./Base\";\r\nimport { Adapter } from \"./utils/Adapter\";\r\nimport { ITheme } from \"../themes/ITheme\";\r\nimport { Dictionary, IDictionaryEvents, DictionaryTemplate, DictionaryDisposer } from \"./utils/Dictionary\";\r\nimport { ListTemplate, ListDisposer } from \"./utils/List\";\r\nimport { EventDispatcher } from \"./utils/EventDispatcher\";\r\nimport { MultiDisposer, IDisposer, Disposer, MutableValueDisposer } from \"./utils/Disposer\";\r\nimport { Animation, IAnimatable, IAnimationOptions, AnimationDisposer } from \"./utils/Animation\";\r\nimport { Optional } from \"./utils/Type\";\r\nimport { Group } from \"./rendering/Group\";\r\nimport { Paper } from \"./rendering/Paper\";\r\nimport { DataItem } from \"./DataItem\";\r\nimport { Container } from \"./Container\";\r\nimport { Pattern } from \"./rendering/fills/Pattern\";\r\nimport { LinearGradient } from \"./rendering/fills/LinearGradient\";\r\nimport { RadialGradient } from \"./rendering/fills/RadialGradient\";\r\nimport { SVGContainer } from \"./rendering/SVGContainer\";\r\nimport { Align } from \"./defs/Align\";\r\nimport { Roles, AriaLive } from \"./defs/Accessibility\";\r\nimport { Popup } from \"./elements/Popup\";\r\nimport { Modal } from \"./elements/Modal\";\r\nimport { Color, color, toColor } from \"./utils/Color\";\r\nimport { Ordering } from \"./utils/Order\";\r\n\r\nimport { HorizontalCenter } from \"./defs/HorizontalCenter\";\r\nimport { VerticalCenter } from \"./defs/VerticalCenter\";\r\nimport { VerticalAlign } from \"./defs/VerticalAlign\";\r\nimport { ShapeRendering } from \"./defs/ShapeRendering\";\r\nimport { AMElement } from \"./rendering/AMElement\";\r\nimport { Filter } from \"./rendering/filters/Filter\";\r\n\r\nimport { ColorModifier } from \"./rendering/fills/ColorModifier\";\r\n\r\nimport { getInteraction } from \"./interaction/Interaction\";\r\nimport { InteractionObject } from \"./interaction/InteractionObject\";\r\n\r\nimport { IInertiaOptions, ISwipeOptions, IHitOptions, IHoverOptions, ICursorOptions, IKeyboardOptions } from \"./interaction/InteractionOptions\";\r\nimport { IPointer } from \"./interaction/Pointer\";\r\nimport { MouseCursorStyle } from \"./interaction/Mouse\";\r\nimport { InertiaTypes } from \"./interaction/Inertia\";\r\nimport { IStyleProperty } from \"./defs/IStyleProperty\";\r\n\r\nimport { getSystem } from \"./System\";\r\nimport { options } from \"./Options\";\r\nimport { registry } from \"./Registry\";\r\nimport { IPoint } from \"./defs/IPoint\";\r\nimport { IRectangle } from \"./defs/IRectangle\";\r\nimport { Tooltip } from \"./elements/Tooltip\";\r\n\r\nimport { NumberFormatter } from \"./formatters/NumberFormatter\";\r\nimport { DateFormatter } from \"./formatters/DateFormatter\";\r\nimport { DurationFormatter } from \"./formatters/DurationFormatter\";\r\nimport { Language } from \"./utils/Language\";\r\nimport { Export } from \"./export/Export\";\r\n\r\n\r\nimport { ISVGAttribute } from \"./rendering/AMElement\";\r\n\r\nimport * as $utils from \"./utils/Utils\";\r\nimport * as $math from \"./utils/Math\";\r\nimport * as $strings from \"./utils/Strings\";\r\nimport * as $array from \"./utils/Array\";\r\nimport * as $object from \"./utils/Object\";\r\nimport * as $type from \"./utils/Type\";\r\nimport * as $iter from \"./utils/Iterator\";\r\n\r\nimport { Percent } from \"./utils/Percent\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[Sprite]]\r\n */\r\nexport interface ISpriteProperties {\r\n\tdisabled?: boolean;\r\n\tx?: number | Percent;\r\n\ty?: number | Percent;\r\n\twidth?: number | string;\r\n\theight?: number | string;\r\n\tscale?: number;\r\n\trotation?: number;\r\n\tpixelPerfect?: boolean;\r\n\tmarginLeft?: number;\r\n\tmarginRight?: number;\r\n\tmarginTop?: number;\r\n\tmarginBottom?: number;\r\n\tfillOpacity?: number;\r\n\tfill?: Color | LinearGradient | RadialGradient | Pattern;\r\n\topacity?: number;\r\n\tstroke?: Color | LinearGradient | RadialGradient | Pattern;\r\n\tstrokeOpacity?: number;\r\n\tstrokeWidth?: number;\r\n\tstrokeDasharray?: number[];\r\n\tshapeRendering?: ShapeRendering;\r\n\tdraggable?: boolean;\r\n\tinert?: boolean;\r\n\tresizable?: boolean;\r\n\trotatable?: boolean;\r\n\tswipeable?: boolean;\r\n\ttrackable?: boolean;\r\n\thoverable?: boolean;\r\n\tclickable?: boolean;\r\n\ttogglable?: boolean;\r\n\trightClickable?: boolean;\r\n\tlongClickable?: boolean;\r\n\twheelable?: boolean;\r\n\tfocusable?: boolean;\r\n\ttabindex?: number;\r\n\tvisible?: boolean;\r\n\ttooltipText?: string;\r\n\ttooltipHTML?: string;\r\n\ttooltipX?: number;\r\n\ttooltipY?: number;\r\n\ttooltipPosition?: \"fixed\" | \"pointer\";\r\n\tinteractionsEnabled?: boolean;\r\n\thorizontalCenter?: HorizontalCenter;\r\n\tverticalCenter?: VerticalCenter;\r\n\talign?: Align;\r\n\tvalign?: VerticalAlign;\r\n\tpaddingLeft?: number;\r\n\tpaddingRight?: number;\r\n\tpaddingTop?: number;\r\n\tpaddingBottom?: number;\r\n\tminX?: number;\r\n\tminY?: number;\r\n\tmaxX?: number;\r\n\tmaxY?: number;\r\n\tdx?: number;\r\n\tdy?: number;\r\n\trole?: string;\r\n\treaderDescribedBy?: string;\r\n\treaderLabelledBy?: string;\r\n\treaderLive?: AriaLive;\r\n\treaderControls?: string;\r\n\treaderChecked?: boolean;\r\n\treaderHidden?: boolean;\r\n\treaderDescription?: string;\r\n\treaderTitle?: string;\r\n\tnonScaling?: boolean;\r\n\tnonScalingStroke?: boolean;\r\n\tzIndex?: number;\r\n\tminWidth?: number;\r\n\tmaxWidth?: number;\r\n\tminHeight?: number;\r\n\tmaxHeight?: number;\r\n\tfillModifier?: ColorModifier;\r\n\tstrokeModifier?: ColorModifier;\r\n\thoverOnFocus?: boolean;\r\n}\r\n\r\n/**\r\n * Defines animation options\r\n */\r\nexport interface ISpriteAnimationOptions {\r\n\tfrom?: Percent | Color | number | string;\r\n\tto: Percent | Color | number | string;\r\n\tproperty: any; // todo: this[\"_properties\"] can not be used here, think.\r\n}\r\n\r\n/**\r\n * Defines list ofvisual properties\r\n */\r\nexport const visualProperties: (keyof ISpriteProperties)[] = [\"fill\", \"fillOpacity\", \"stroke\", \"strokeOpacity\", \"strokeWidth\", \"strokeDasharray\"]; // do not add opacity here, as it is used for showing/hiding\r\n\r\n/**\r\n * Represents a list of available adapters for [[Sprite]]\r\n */\r\nexport interface ISpriteAdapters extends ISpriteProperties {\r\n\r\n\tpixelHeight: number;\r\n\tpixelWidth: number;\r\n\trelativeHeight: number\r\n\trelativeWidth: number;\r\n\tmeasuredHeight: number;\r\n\tmeasuredWidth: number;\r\n\touterHeight: number;\r\n\touterWidth: number;\r\n\tinnerHeight: number;\r\n\tinnerWidth: number;\r\n\tglobalScale: number;\r\n\tpixelMarginRight: number;\r\n\trelativeMarginRight: number;\r\n\tpixelMarginLeft: number;\r\n\trelativeMarginLeft: number;\r\n\tpixelMarginTop: number;\r\n\trelativeMarginTop: number;\r\n\tpixelMarginBottom: number;\r\n\trelativeMarginBottom: number;\r\n\tpixelX: number;\r\n\trelativeX: number;\r\n\tpixelY: number;\r\n\trelativeY: number;\r\n\tmask: Sprite;\r\n\r\n};\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Sprite represents any displayable element.\r\n *\r\n * This is the main class that encapsulates every object on the chart.\r\n *\r\n * If it's an element that is to be displayed on the screen at some point, its\r\n * class must extend [[Sprite]] class.\r\n *\r\n * [[Sprite]] class represents the a hierarchical structure. Every object that\r\n * extends [[Sprite]] can have children, that would inherit their properties,\r\n * such as language, formatters, etc.\r\n *\r\n * @see {@link SpriteState}\r\n * @see {@link ISpriteEvents} for a list of available events\r\n * @see {@link ISpriteAdapters} for a list of available Adapters\r\n *\r\n * @todo Review child elements that need to go into `_disposers`\r\n * @important\r\n */\r\nexport class Sprite extends BaseObjectEvents implements IAnimatable {\r\n\r\n\t/**\r\n\t * Defines property types.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ISpriteProperties}\r\n\t */\r\n\tpublic _properties!: ISpriteProperties;\r\n\r\n\t/**\r\n\t * Defines state type.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {SpriteState}\r\n\t */\r\n\t//public _state: SpriteState;\r\n\r\n\t/**\r\n\t * Defines type used in the Sprite.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ISpriteAdapters}\r\n\t */\r\n\tpublic _adapter!: ISpriteAdapters;\r\n\r\n\t/**\r\n\t * Holds values for Sprite's properties.\r\n\t */\r\n\tpublic properties: this[\"_properties\"] = {};\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {ISpriteEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: ISpriteEvents;\r\n\r\n\t/**\r\n\t * Event dispacther.\r\n\t *\r\n\t * @see {@link https://www.amcharts.com/docs/v4/concepts/event-listeners/} for more info about Events\r\n\t * @type {SpriteEventDispatcher<AMEvent<Sprite, ISpriteEvents>>} Event dispatcher instance\r\n\t */\r\n\tpublic events: SpriteEventDispatcher<AMEvent<this, this[\"_events\"]>> = new SpriteEventDispatcher(this);\r\n\r\n\t/**\r\n\t * Holds Adapter.\r\n\t *\r\n\t * @see {@link https://www.amcharts.com/docs/v4/concepts/adapters/} for more info about Adapters\r\n\t * @type {Adapter<Sprite, ISpriteAdapters>}\r\n\t */\r\n\tpublic adapter = new Adapter<this, this[\"_adapter\"]>(this);\r\n\r\n\t/**\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t */\r\n\tprivate _bindings: { [key: string]: IDisposer } = {};\r\n\r\n\t/**\r\n\t * Holds indicator if this Sprite is a \"template\" to be used for creating\r\n\t * other Sprites from and should not be treated as full-fledged element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<boolean>}\r\n\t */\r\n\tprotected _isTemplate: $type.Optional<boolean>;\r\n\r\n\t/**\r\n\t * Holds collection of Sprite States.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<DictionaryTemplate<string, SpriteState<this[\"_properties\"], this[\"_adapter\"]>>>}\r\n\t */\r\n\tpublic _states: $type.Optional<DictionaryTemplate<string, SpriteState<this[\"_properties\"], this[\"_adapter\"]>>>;\r\n\r\n\t/**\r\n\t * Holds indicator whether this sprite was already initialized.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {boolean}\r\n\t */\r\n\tprotected _inited: boolean = false;\r\n\r\n\t/**\r\n\t * A reference to a Tooltip for this Sprite.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<Tooltip>}\r\n\t */\r\n\tprotected _tooltip: $type.Optional<Tooltip>;\r\n\r\n\t/**\r\n\t * A special data item which tooltip will use when formatting data. In case\r\n\t * it is not set, dataItem will be used.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<DataItem>}\r\n\t */\r\n\tprotected _tooltipDataItem: $type.Optional<DataItem>;\r\n\r\n\t/**\r\n\t * A reference to another sprite or sprite template from which tooltip should take colors if getFillFromObject or getStrokeFromObject are set to true.\r\n\t * Mostly used when we need to adjust tooltip color for a series, depending on column or bullet color.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<Sprite>}\r\n\t */\r\n\tprotected _tooltipColorSource: $type.Optional<Sprite>;\r\n\r\n\t/**\r\n\t * If `sprite.hide()` is called and we have \"hidden\" state and\r\n\t * `transitionDuration > 0`, we set `isHiding` flag to `true` in order to\r\n\t * avoid restarting animations in case `hide()` method is called multiple\r\n\t * times.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tpublic isHiding: boolean = false;\r\n\r\n\t/**\r\n\t * If `sprite.hide()` is called, we set isHidden to true when sprite is hidden.\r\n\t * This was added becaus hidden state might have visibility set to true and so\r\n\t * there would not be possible to find out if a sprite is technically hidden or not.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tpublic isHidden: boolean = false;\r\n\r\n\t/**\r\n\t * This property indicates if Sprite is currently being revealed from hidden\r\n\t * state. This is used to prevent multiple calls to `sprite.show()` to\r\n\t * restart reveal animation. (if enabled)\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tpublic isShowing: boolean = false;\r\n\r\n\t/**\r\n\t * Indicates if this element is a standalone instance. A \"standalone\r\n\t * instance\" means this is a autonomous object which maintains its own\r\n\t * set of controls like Preloader, Export, etc.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {boolean}\r\n\t */\r\n\tpublic isStandaloneInstance: boolean = false;\r\n\r\n\t/**\r\n\t * Indicates if togglable Sprite is currently active (toggled on).\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {boolean}\r\n\t */\r\n\tprotected _isActive: boolean = false;\r\n\r\n\t/**\r\n\t * A Sprite element to use as a mask for this Sprite.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {MutableValueDisposer}\r\n\t */\r\n\tprotected _mask = new MutableValueDisposer<Sprite>();\r\n\r\n\t/**\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @type {Optional<Group>}\r\n\t */\r\n\tprotected _clipPath: Optional<Group>;\r\n\r\n\t/**\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @type {Optional<AMElement>}\r\n\t */\r\n\tprotected _clipElement: $type.Optional<AMElement>;\r\n\r\n\t/**\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\tprotected _positionPrecision: number = 3;\r\n\r\n\t/**\r\n\t * Holds reference to Sprite's [[InteractionObject]]. Sprite does not\r\n\t * perform any user interactions directly, it happens via [[InteractionObject]].\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<InteractionObject>}\r\n\t */\r\n\tprotected _interaction: $type.Optional<InteractionObject>;\r\n\r\n\t/**\r\n\t * An instance of [[Language]].\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Language}\r\n\t */\r\n\tprotected _language = new MutableValueDisposer<Language>();\r\n\r\n\t/**\r\n\t * An instance of [[NumberFormatter]].\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<NumberFormatter>}\r\n\t */\r\n\tprotected _numberFormatter: $type.Optional<NumberFormatter>;\r\n\r\n\t/**\r\n\t * An instance of [[DateFormatter]].\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<DateFormatter>}\r\n\t */\r\n\tprotected _dateFormatter: $type.Optional<DateFormatter>;\r\n\r\n\t/**\r\n\t * An instance of [[DurationFormatter]].\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<DurationFormatter>}\r\n\t */\r\n\tprotected _durationFormatter: $type.Optional<DurationFormatter>;\r\n\r\n\t/**\r\n\t * An HTML element to which [[svgContainer]] is added.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<HTMLElement>}\r\n\t */\r\n\tprotected _htmlContainer: $type.Optional<HTMLElement>;\r\n\r\n\t/**\r\n\t * An HTML element to which all chart elements are added.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<SVGContainer>}\r\n\t */\r\n\tprotected _svgContainer: $type.Optional<SVGContainer>;\r\n\r\n\t/**\r\n\t * A [[Container]] instance to place this element's [[Tooltip]] elements in\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<Container>}\r\n\t */\r\n\tprotected _tooltipContainer: $type.Optional<Container>;\r\n\r\n\t/**\r\n\t * An URL to go to when user clicks on a this Sprite.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {string}\r\n\t */\r\n\tprotected _url = new MutableValueDisposer<string>();\r\n\r\n\t/**\r\n\t * URL target to use.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {string}\r\n\t */\r\n\tprotected _urlTarget: string = \"_self\";\r\n\r\n\t/**\r\n\t * Should this element be measured when measuring its parent container's\r\n\t * dimentions?\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<boolean>}\r\n\t */\r\n\tprotected _isMeasured: $type.Optional<boolean>;\r\n\r\n\t/**\r\n\t * Indicates if the chart should follow righ-to-left rules.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {boolean}\r\n\t */\r\n\tprotected _rtl: boolean = false;\r\n\r\n\t/**\r\n\t * Holds [[Export]] object.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Export}\r\n\t */\r\n\tprotected _exporting = new MutableValueDisposer<Export>();\r\n\r\n\t/**\r\n\t * Holds [[Modal]] object.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<Modal>}\r\n\t */\r\n\tprotected _modal: $type.Optional<Modal>;\r\n\r\n\t/**\r\n\t * Holds [[Popup]] objects.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<ListTemplate<Popup>>}\r\n\t */\r\n\tprotected _popups: $type.Optional<ListTemplate<Popup>>;\r\n\r\n\t/**\r\n\t * A reference to a top-level SVG node for this Sprite element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<AMElement>}\r\n\t */\r\n\tprotected _element: Optional<AMElement>;\r\n\r\n\t/**\r\n\t * Holds Sprite's main SVG group (`<g>`) element. Other Sprite's elements\r\n\t * are all placed in this group.\r\n\t * @type {Group}\r\n\t */\r\n\tpublic group: Group;\r\n\r\n\t/**\r\n\t * A reference to [[Paper]] SVG renderer used to create SVG nodes.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<Paper>}\r\n\t */\r\n\tprotected _paper: $type.Optional<Paper>;\r\n\r\n\t/**\r\n\t * Data item assigned to the sprite. It might contain information defining\r\n\t * some style properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<DataItem>}\r\n\t */\r\n\tpublic _dataItem: $type.Optional<DataItem>;\r\n\r\n\t/**\r\n\t * Parent container.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {MutableValueDisposer}\r\n\t */\r\n\tprotected _parent = new MutableValueDisposer<Container>();\r\n\r\n\t/**\r\n\t * Defines bounding box (square) for this element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IRectangle}\r\n\t */\r\n\tpublic bbox: IRectangle = { x: 0, y: 0, width: 0, height: 0 };\r\n\r\n\t/**\r\n\t * Base tab index for the Sprite. Used for TAB-key selection order.\r\n\t *\r\n\t * Use accessors `tabIndex` to set and retrieve.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<number>}\r\n\t */\r\n\tprotected _tabindex: $type.Optional<number>;\r\n\r\n\t/**\r\n\t * Should system tooltips be allowed to be displayed if the element has\r\n\t * `readerTitle` set?\r\n\t *\r\n\t * Use accessors `showSystemTooltip` to set and retrieve.\r\n\t *\r\n\t * This is an accessibility feature.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<boolean>}\r\n\t */\r\n\tprotected _showSystemTooltip: $type.Optional<boolean>;\r\n\r\n\t/**\r\n\t * List of animations currently playing for this Sprite.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<Array<Animation>>}\r\n\t */\r\n\tprotected _animations: $type.Optional<Array<Animation>>;\r\n\r\n\t/**\r\n\t * A link to [[Disposer]] for event handler which is attached to hide\r\n\t * animation. In some cases we need to cancel this event. This property is\r\n\t * used to hold the reference to disposer of this event so that we can\r\n\t * cancel it by calling its `dispose()` method.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<IDisposer>}\r\n\t */\r\n\tprotected _showHideDisposer: $type.Optional<IDisposer>;\r\n\r\n\t/**\r\n\t * If element is currently hiding, this property will hold a reference to\r\n\t * [[Animation]] instance, which is handling hiding animation.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<Animation>}\r\n\t */\r\n\tprotected _hideAnimation: $type.Optional<Animation>;\r\n\r\n\t/**\r\n\t * List of [[Filter]] items that are currently applied to the element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<ListTemplate<Filter>>}\r\n\t */\r\n\tprotected _filters: $type.Optional<ListTemplate<Filter>>;\r\n\r\n\t/**\r\n\t * A shortcut to the special \"Focus\" filter which is applied when the element\r\n\t * gains focus.\r\n\t *\r\n\t * This is an accessibility feature.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<Filter>}\r\n\t */\r\n\tprotected _focusFilter: $type.Optional<Filter>;\r\n\r\n\t/**\r\n\t * Indicates if this element is invalid and should be re-validated (redrawn).\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {boolean}\r\n\t */\r\n\tpublic invalid: boolean = false;\r\n\r\n\t/**\r\n\t * Indicates if this elements position is invalid and should be repositioned\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {boolean}\r\n\t */\r\n\tpublic positionInvalid: boolean = false;\r\n\r\n\t/**\r\n\t * A collection of key/value pairs that can be used to bind specific Sprite\r\n\t * properties to [[DataItem]].\r\n\t *\r\n\t * For example: `fill` property can be bound to `myCustomColor` field in\r\n\t * DataItem. The Sprite will automatically get the value for `fill` from its\r\n\t * DataItem.\r\n\t *\r\n\t * Can be set for each [[SpriteState]] individually to override default\r\n\t * bindings.\r\n\t *\r\n\t * @see {@link SpriteState}\r\n\t * @type {Object}\r\n\t */\r\n\tpublic propertyFields: { [index in keyof this[\"_properties\"]]?: string } = {};\r\n\t//public propertyFields: Dictionary<keyof this[\"_properties\"], string> = new Dictionary<keyof this[\"_properties\"], string>();\r\n\r\n\t/**\r\n\t * Element's relative width.\r\n\t *\r\n\t * Do not set this property directly. Use `width` accessor with [[Percent]]\r\n\t * value instead.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {$type.Optional<number>}\r\n\t */\r\n\tpublic percentWidth: $type.Optional<number>;\r\n\r\n\t/**\r\n\t * Element's relative height.\r\n\t *\r\n\t * Do not set this property directly. Use `height` accessor with [[Percent]]\r\n\t * value instead.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {$type.Optional<number>}\r\n\t */\r\n\tpublic percentHeight: $type.Optional<number>;\r\n\r\n\t/**\r\n\t * An SVG group element that is used to put all SVG filters to.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<Group>}\r\n\t */\r\n\tpublic filterElement: $type.Optional<Group>;\r\n\r\n\t/**\r\n\t * A field in data context of element's `dataItem` that holds config values\r\n\t * for this element.\r\n\t *\r\n\t * This is a very powerful feature, allowing changing virtually any setting,\r\n\t * including those for element's children, for the element via data.\r\n\t *\r\n\t * Example data:\r\n\t *\r\n\t * ```JSON\r\n\t * {\r\n\t *   \"value\": 100,\r\n\t *   \"config\": {\r\n\t *     \"fill\": \"#F00\"\r\n\t *   }\r\n\t * }\r\n\t * ```\r\n\t *\r\n\t * If you set element's `configField = \"config\"`, the element for this\r\n\t * specific data point will have a red fill.\r\n\t *\r\n\t * @type {Optional<string>}\r\n\t */\r\n\tpublic configField: $type.Optional<string>;\r\n\r\n\t/**\r\n\t * Reference to element's `<title>` element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<SVGTitleElement>}\r\n\t */\r\n\tprotected _titleElement: Optional<AMElement>;\r\n\r\n\t/**\r\n\t * Reference to element's `<description>` element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<SVGDescElement>}\r\n\t */\r\n\tprotected _descriptionElement: Optional<AMElement>;\r\n\r\n\r\n\t/**\r\n\t * Specifies if a property changes on this object should be propaged to the\r\n\t * objects cloned from this object.\r\n\t *\r\n\t * This setting affects property chanegs *after* cloning, since at the moment\r\n\t * of cloning all of properties from source object are copied to the clone\r\n\t * anyway.\r\n\t *\r\n\t * @default false\r\n\t */\r\n\tpublic applyOnClones: boolean = false;\r\n\r\n\t/**\r\n\t * Internal storage properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\r\n\tprotected _measuredWidth: number;\r\n\tprotected _measuredHeight: number;\r\n\r\n\tprotected _measuredWidthSelf: number;\r\n\tprotected _measuredHeightSelf: number;\r\n\r\n\tprotected _prevMeasuredWidth: number;\r\n\tprotected _prevMeasuredHeight: number;\r\n\r\n\tprotected _pixelWidth: $type.Optional<number>;\r\n\tprotected _pixelHeight: $type.Optional<number>;\r\n\r\n\tprotected _relativeWidth: $type.Optional<number>;\r\n\tprotected _relativeHeight: $type.Optional<number>;\r\n\r\n\t// read only, sprite extreme coordinates\r\n\t/**\r\n\t * @ignore\r\n\t */\r\n\tpublic maxLeft: number = 0;\r\n\t/**\r\n\t * @ignore\r\n\t */\r\n\tpublic maxRight: number = 0;\r\n\t/**\r\n\t * @ignore\r\n\t */\r\n\tpublic maxTop: number = 0;\r\n\t/**\r\n\t * @ignore\r\n\t */\r\n\tpublic maxBottom: number = 0;\r\n\r\n\tprotected _isDragged: boolean = false;\r\n\r\n\t/**\r\n\t * @deprecated Moved to [[SpriteProperties]]\r\n\t * @type {boolean}\r\n\t */\r\n\tprotected _disabled: boolean = false;\r\n\r\n\tprotected _internalDisabled: boolean = false;\r\n\r\n\tprotected _maskRectangle: $type.Optional<IRectangle>;\r\n\r\n\tprotected _internalDefaultsApplied: boolean = false;\r\n\r\n\tprotected _interactionDisposer: $type.Optional<IDisposer>;\r\n\r\n\tpublic definedBBox: IRectangle;\r\n\r\n\t/**\r\n\t * Sets frequency at which this element should be rendered. Used to save CPU,\r\n\t * mostly for text elements.\r\n\t *\r\n\t * Higher number means this element will render more sluggishly by skipping\r\n\t * frames, but in doing so will use less resources.\r\n\t *\r\n\t * E.g. setting to 2 will make this element's renderer skip one frame, so any\r\n\t * changes to the element will be rendered 1/60 second later than it would\r\n\t * at default setting of 1.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tpublic renderingFrequency: number = 1;\r\n\r\n\t/**\r\n\t * Used to track frame number when `renderingFrequency` is > 2.\r\n\t * When `renderingFrame == 1`, Sprite renders.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic renderingFrame: number = 1;\r\n\r\n\t/**\r\n\t * Time in milliseconds after which rollout event happens when user rolls-out of the sprite. This helps to avoid flickering in some cases.\r\n\t * @type {number}\r\n\t */\r\n\tpublic rollOutDelay: number = 0;\r\n\r\n\t/**\r\n\t * @ignore\r\n\t */\r\n\tprotected _outTimeout: $type.Optional<IDisposer>;\r\n\r\n\r\n\t/**\r\n\t * @ignore\r\n\t * this flag is set to true for the initial sprite you create and place to the div so that we could clear all additional sprites/containers when this sprite is disposed\r\n\t */\r\n\r\n\tpublic isBaseSprite: boolean = false;\r\n\r\n\t/**\r\n\t * Whether this sprite should be cloned when clonning it's parent container. We set this to falsse in those cases when a sprite is created by the class, so that when clonning\r\n\t * a duplicate sprite would not appear.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tpublic shouldClone: boolean = true;\r\n\r\n\r\n\t/**\r\n\t * A property which you can use to store any data you want.\r\n\t * @type {any}\r\n\t */\r\n\tpublic dummyData: any;\r\n\r\n\t/**\r\n\t * Constructor:\r\n\t * * Creates initial node\r\n\t * * Sets default properties\r\n\t * * Creates required default states\r\n\t * * Inits accessibility\r\n\t */\r\n\tconstructor() {\r\n\r\n\t\t// Init\r\n\t\tsuper();\r\n\r\n\t\tthis.className = \"Sprite\";\r\n\r\n\t\t// Generate a unique ID\r\n\t\tthis.uid;\r\n\r\n\t\t// Create SVG group to hold everything in\r\n\t\tthis.group = this.paper.addGroup(\"g\");\r\n\r\n\t\t// Set defaults\r\n\t\tthis.scale = 1;\r\n\t\tthis.rotation = 0;\r\n\r\n\t\tthis.align = \"none\";\r\n\t\tthis.valign = \"none\";\r\n\r\n\t\tthis.pixelPerfect = false;\r\n\r\n\t\tthis.marginTop = 0;\r\n\t\tthis.marginBottom = 0;\r\n\t\tthis.marginLeft = 0;\r\n\t\tthis.marginRight = 0;\r\n\r\n\t\tthis.paddingTop = 0;\r\n\t\tthis.paddingBottom = 0;\r\n\t\tthis.paddingRight = 0;\r\n\t\tthis.paddingLeft = 0;\r\n\r\n\t\tthis._prevMeasuredWidth = 0;\r\n\t\tthis._prevMeasuredHeight = 0;\r\n\t\tthis._measuredWidth = 0;\r\n\t\tthis._measuredHeight = 0;\r\n\r\n\t\tthis.verticalCenter = \"none\";\r\n\t\tthis.horizontalCenter = \"none\";\r\n\r\n\t\t// never do this!\r\n\t\t//this.verticalCenter = \"top\";\r\n\t\t//this.horizontalCenter = \"left\";\r\n\r\n\t\tthis.isMeasured = true;\r\n\r\n\t\t// Invalidate the Sprite so that renderer knows it needs to be drawn\r\n\t\tthis.invalidate();\r\n\r\n\t\t// Create default and hidden states as they are two states that are used\r\n\t\t// extensively\r\n\t\tlet hiddenState = this.states.create(\"hidden\");\r\n\t\thiddenState.properties.opacity = 0;\r\n\t\thiddenState.properties.visible = false;\r\n\r\n\t\tthis.states.create(\"default\").properties.opacity = 1;\r\n\r\n\t\t// Apply the theme\r\n\t\tthis.applyTheme();\r\n\r\n\t\t//this._disposers.push(this._clickable);\r\n\r\n\t\t// Decorate adapter with events so that we can apply its settings whenever\r\n\t\t// it is modified\r\n\t\t// @todo Think what to do here. We can't just apply the adapter value to\r\n\t\t// property since not all of those are for properties. Commented out for\r\n\t\t// now.\r\n\t\t/*this.adapter.events.on(\"inserted\", (ev: any) => {\r\n\t\t\t(<any>this)[ev.newValue.key] = (<any>this)[ev.newValue.key];\r\n\t\t});\r\n\t\tthis.adapter.events.on(\"removed\", (ev: any) => {\r\n\t\t\t(<any>this)[ev.newValue.key] = (<any>this)[ev.newValue.key];\r\n\t\t});*/\r\n\r\n\t\t// Add disposable dependencies to `_disposers` so they are automatically\r\n\t\t// disposed of when this object is disposed\r\n\t\tthis._disposers.push(this.events);\r\n\t\tthis._disposers.push(this.group);\r\n\t\tthis._disposers.push(this._url);\r\n\t\tthis._disposers.push(this._mask);\r\n\t\tthis._disposers.push(this._language);\r\n\t\tthis._disposers.push(this._exporting);\r\n\t\tthis._disposers.push(this._parent);\r\n\t\t//this._disposers.push(this._modal);\r\n\r\n\t\tthis._disposers.push(new Disposer(() => {\r\n\t\t\t$object.each(this._bindings, (key, value) => {\r\n\t\t\t\tvalue.dispose();\r\n\t\t\t});\r\n\t\t}));\r\n\r\n\t\t// better than doing this.interactionsEnabled = true;\r\n\t\tthis.setPropertyValue(\"interactionsEnabled\", true);\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * ==========================================================================\r\n\t * ELEMENT VALIDATION, INIT, AND DRAWING STUFF\r\n\t * ==========================================================================\r\n\t * @hidden\r\n\t */\r\n\r\n\t/**\r\n\t * Applies properties from all assigned themes.\r\n\t *\r\n\t * We do this here so that we can apply class names as well.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic applyTheme(): void {\r\n\t\tsuper.applyTheme();\r\n\t\tif (options.autoSetClassName) {\r\n\t\t\tthis.setClassName();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns theme(s) used by this object either set explicitly on this\r\n\t * element, inherited from parent, or inherited from [[System]].\r\n\t *\r\n\t * @return {ITheme} An array of theme references\r\n\t */\r\n\tpublic getCurrentThemes(): ITheme[] {\r\n\t\tconst themes = this._themes;\r\n\r\n\t\tif (themes) {\r\n\t\t\treturn themes;\r\n\r\n\t\t} else {\r\n\t\t\tconst parent = this.parent;\r\n\r\n\t\t\tif (parent) {\r\n\t\t\t\treturn parent.getCurrentThemes();\r\n\r\n\t\t\t} else {\r\n\t\t\t\treturn registry.themes;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Called just before element's validation, this function allows setting\r\n\t * defaults.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tprotected applyInternalDefaults(): void {\r\n\r\n\t\t// Nothing here, but extending classes might override this function\r\n\t\t// so that they can set their defaults\r\n\t\tthis._internalDefaultsApplied = true;\r\n\t}\r\n\r\n\t/**\r\n\t * Invalidates element.\r\n\t *\r\n\t * Object will be redrawn during the next update cycle.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic invalidate(): void {\r\n\t\tif (this.disabled || this.isTemplate) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// We no longer reset this on each invalidate, so that they are applied\r\n\t\t// only once, and do not overwrite user-defined settings\r\n\t\t//this._internalDefaultsApplied = false;\r\n\r\n\t\tif (!this.invalid) {\r\n\t\t\tthis.invalid = true;\r\n\t\t\t$array.add(registry.invalidSprites, this);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Validates element:\r\n\t * * Triggers events\r\n\t * * Redraws the element\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic validate(): void {\r\n\t\tthis.dispatchImmediately(\"beforevalidated\");\r\n\r\n\t\tthis.renderingFrame = this.renderingFrequency;\r\n\r\n\t\t// Set internal defaults\r\n\t\tif (!this._internalDefaultsApplied) {\r\n\t\t\tthis.applyInternalDefaults();\r\n\t\t}\r\n\r\n\t\tthis.beforeDraw();\r\n\t\tthis.draw();\r\n\r\n\t\tthis.invalid = false;\r\n\t\t$array.remove(registry.invalidSprites, this);\r\n\t\tthis.afterDraw();\r\n\t}\r\n\r\n\t/**\r\n\t * Invalidates element's position.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic invalidatePosition(): void {\r\n\t\tif (this.disabled || this.isTemplate) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!this.positionInvalid) {\r\n\t\t\tthis.positionInvalid = true;\r\n\t\t\t$array.move(registry.invalidPositions, this);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Transforms the element.\r\n\t *\r\n\t * @todo Description (review)\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic validatePosition(): void {\r\n\t\tlet x: number = this.pixelX + this.dx;\r\n\t\tlet y: number = this.pixelY + this.dy;\r\n\r\n\t\tif (!this.invalid) {\r\n\t\t\tlet elementTransformChanged: boolean = false;\r\n\t\t\tif (this.element) {\r\n\r\n\t\t\t\tlet prevElementTransform: string = this.element.transformString;\r\n\r\n\t\t\t\tthis.updateCenter();\r\n\r\n\t\t\t\tif (prevElementTransform != this.element.transformString) {\r\n\t\t\t\t\telementTransformChanged = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tlet prevGroupTransform: string = this.group.transformString;\r\n\r\n\t\t\tthis.group.moveTo({ x: x, y: y });\r\n\t\t\tthis.group.rotation = this.rotation;\r\n\t\t\tif (this.nonScaling) {\r\n\t\t\t\tthis.group.scale = this.scale / this.globalScale;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.group.scale = this.scale;\r\n\t\t\t}\r\n\r\n\t\t\tlet sizeChanged: boolean = this.measure();\r\n\r\n\t\t\tif (prevGroupTransform != this.group.transformString || elementTransformChanged || sizeChanged) {\r\n\t\t\t\tthis.dispatchImmediately(\"transformed\");\r\n\t\t\t\t// TODO clear existing positionchanged dispatches ?\r\n\t\t\t\tthis.dispatch(\"positionchanged\");\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.updateCenter();\r\n\t\t}\r\n\t\t// it might happen that x and y changed again, so we only remove if they didn't\r\n\t\tif (this.pixelX + this.dx == x && this.pixelY + this.dy == y) {\r\n\t\t\t$array.remove(registry.invalidPositions, this);\r\n\t\t\tthis.positionInvalid = false;\r\n\t\t}\r\n\t\tlet maskRectangle = this._maskRectangle;\r\n\t\t// todo: verify this\r\n\t\tif (maskRectangle) {\r\n\t\t\tthis._clipElement.moveTo({ x: maskRectangle.x - this.pixelX, y: maskRectangle.y - this.pixelY });\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * A placeholder method that is called **before** element begins to be drawn.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tprotected beforeDraw(): void {\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * A placeholder method that draws the element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tprotected draw(): void {\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * A placeholder method that is called **after** element finishes drawing\r\n\t * itself.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tprotected afterDraw(): void {\r\n\t\tif (this.isMeasured || this.horizontalCenter !== \"none\" || this.verticalCenter !== \"none\") {\r\n\t\t\tthis.measureElement();\r\n\t\t}\r\n\r\n\t\tthis.setSVGAttributes();\r\n\t\tthis.dispatchImmediately(\"validated\");\r\n\r\n\t\tif (!this._inited) {\r\n\r\n\t\t\tthis.applyFilters();\r\n\r\n\t\t\tthis.visible = this.visible;\r\n\t\t\tthis.interactionsEnabled = this.interactionsEnabled;\r\n\r\n\t\t\tthis._inited = true;\r\n\t\t\tthis.dispatchImmediately(\"inited\");\r\n\t\t}\r\n\r\n\t\tthis.validatePosition();\r\n\r\n\t\tthis.applyMask();\r\n\t}\r\n\r\n\t/**\r\n\t * Triggers a re-initialization of this element.\r\n\t *\r\n\t * Will result in complete redrawing of the element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic reinit(): void {\r\n\t\tthis._inited = false;\r\n\t\tthis.setState(this.defaultState);\r\n\t\tthis.invalidate();\r\n\t}\r\n\r\n\t/**\r\n\t * Handles the situation where parent element is resized.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic handleGlobalScale(): void {\r\n\t\tthis.dispatch(\"globalscalechanged\");\r\n\r\n\t\tif (this.nonScalingStroke) {\r\n\t\t\tthis.strokeWidth = this.strokeWidth;\r\n\t\t}\r\n\r\n\t\tif (this.nonScaling) {\r\n\t\t\tthis.invalidatePosition();\r\n\t\t}\r\n\r\n\t\tthis.updateFilterScale();\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Updates filter properties which might depend on scale\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tprotected updateFilterScale(): void {\r\n\t\t$iter.each(this.filters.iterator(), (filter) => {\r\n\t\t\tfilter.scale = this.globalScale;\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Removes itself from system's invalid lists.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tprotected removeFromInvalids() {\r\n\t\t$array.remove(registry.invalidSprites, this);\r\n\t\t$array.remove(registry.invalidPositions, this);\r\n\t}\r\n\r\n\t/**\r\n\t * Copies all parameters from another [[Sprite]].\r\n\t *\r\n\t * @param {Sprite} source Source Sprite\r\n\t */\r\n\tpublic copyFrom(source: this): void {\r\n\t\tsuper.copyFrom(source);\r\n\r\n\t\tthis.events.copyFrom(source.events);\r\n\r\n\t\tthis.isMeasured = source.isMeasured;\r\n\r\n\t\tthis.states.copyFrom(source.states);\r\n\r\n\t\tthis.filters.copyFrom(source.filters);\r\n\r\n\t\tthis.adapter.copyFrom(source.adapter);\r\n\r\n\t\tthis.interactions.copyFrom(source.interactions);\r\n\r\n\t\tthis.configField = source.configField;\r\n\r\n\t\tthis.applyOnClones = source.applyOnClones;\r\n\r\n\t\tthis.renderingFrequency = source.renderingFrequency;\r\n\r\n\t\t// this.numberFormatter = source.numberFormatter; // todo: this creates loose number formatter and copies it to all clones. somehow we need to know if source had numberFormatter explicitly created and not just because a getter was called.\r\n\r\n\t\t//this.mask = source.mask; need to think about this, generally this causes a lot of problems\r\n\t\tthis.disabled = source.disabled;\r\n\r\n\r\n\t\t//@todo: create tooltip if it's on source but not on this?\r\n\t\tconst tooltip = this._tooltip;\r\n\t\tif (tooltip) {\r\n\t\t\ttooltip.copyFrom(source.tooltip);\r\n\t\t}\r\n\r\n\t\tthis._showSystemTooltip = source.showSystemTooltip;\r\n\r\n\t\t$utils.copyProperties(source.propertyFields, this.propertyFields);\r\n\t\t$utils.copyProperties(source.properties, this);\r\n\r\n\t\tif (source.fillModifier) {\r\n\t\t\tthis.fillModifier = source.fillModifier.clone();\r\n\t\t}\r\n\r\n\t\tif (source.strokeModifier) {\r\n\t\t\tthis.strokeModifier = source.strokeModifier.clone();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic dispose(): void {\r\n\t\tif (this.isBaseSprite) {\r\n\t\t\tif (this.htmlContainer) {\r\n\t\t\t\twhile (this.htmlContainer.children.length > 0) {\r\n\t\t\t\t\tthis.htmlContainer.removeChild(this.htmlContainer.children[0]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.isBaseSprite = false;\r\n\r\n\t\t\tconst parent = this.parent.parent;\r\n\r\n\t\t\tif (parent) {\r\n\t\t\t\tparent.dispose();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsuper.dispose();\r\n\r\n\t\tif (this._svgContainer) {\r\n\t\t\tthis._svgContainer.dispose();\r\n\t\t}\r\n\r\n\t\tif (this._interactionDisposer) {\r\n\t\t\tthis._interactionDisposer.dispose();\r\n\t\t}\r\n\r\n\t\tthis.removeFromInvalids();\r\n\r\n\t\tif (this.element) {\r\n\t\t\tthis.element.dispose();\r\n\t\t}\r\n\t\tif (this.group) {\r\n\t\t\tthis.group.dispose();\r\n\t\t}\r\n\r\n\t\tif (this._numberFormatter) {\r\n\t\t\tthis._numberFormatter.dispose();\r\n\t\t}\r\n\r\n\t\t// TODO a bit hacky\r\n\t\tif (this.fill && !(this.fill instanceof Color)) {\r\n\t\t\tthis.fill.dispose();\r\n\t\t}\r\n\r\n\t\tthis.parent = undefined;\r\n\r\n\t\twhile (this.filters.length > 0) {\r\n\t\t\tlet filter = <Filter>this.filters.getIndex(0);\r\n\t\t\tfilter.dispose();\r\n\t\t\tthis.filters.removeValue(filter);\r\n\t\t}\r\n\t\t// remove from map\r\n\t\tif ($type.hasValue(this.id)) {\r\n\t\t\tthis.map.removeKey(this.id);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates if this element is a \"template\".\r\n\t *\r\n\t * Template Sprites act only as a holders for config for other \"real\"\r\n\t * elements to be cloned from.\r\n\t *\r\n\t * Templates are treated differently, as they are not validated, redrawn, or\r\n\t * otherwise are processed.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {boolean} value Is template?\r\n\t */\r\n\tpublic set isTemplate(value: boolean) {\r\n\t\tvalue = $type.toBoolean(value);\r\n\t\tif (this._isTemplate != value) {\r\n\t\t\tthis._isTemplate = value;\r\n\r\n\t\t\tif (this instanceof Container) {\r\n\t\t\t\t$iter.each(this.children.iterator(), (child) => {\r\n\t\t\t\t\tchild.isTemplate = true;\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tif (value) {\r\n\t\t\t\tthis.parent = this.parent;\r\n\t\t\t\tthis.removeFromInvalids();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.invalidate();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore Exclude from docs\r\n\t * @return {boolean} Is template?\r\n\t */\r\n\tpublic get isTemplate(): boolean {\r\n\t\treturn this._isTemplate;\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether the element should attempt to construct itself in a way\r\n\t * so that system tooltip is shown if its `readerTitle` is set.\r\n\t *\r\n\t * @param {boolean} value Show system tooltip?\r\n\t */\r\n\tpublic set showSystemTooltip(value: boolean) {\r\n\t\tvalue = $type.toBoolean(value);\r\n\t\tthis._showSystemTooltip = value;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Show system tooltip?\r\n\t */\r\n\tpublic get showSystemTooltip(): boolean {\r\n\t\tif (!$type.hasValue(this._showSystemTooltip)) {\r\n\t\t\tif (this.parent) {\r\n\t\t\t\treturn this.parent.showSystemTooltip;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this._showSystemTooltip;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * ==========================================================================\r\n\t * HIERARCHY AND STRUCTURE RELATED STUFF\r\n\t * ==========================================================================\r\n\t * @hidden\r\n\t */\r\n\r\n\t/**\r\n\t * Elements's top-level [[Container]].\r\n\t *\r\n\t * In most cases that will be a Chart.\r\n\t *\r\n\t * @return {Optional<Container>} Top-level ascendant\r\n\t */\r\n\tpublic get topParent(): Optional<Container> {\r\n\t\tif (this.parent) {\r\n\t\t\tif (this.parent.parent) {\r\n\t\t\t\treturn this.parent.topParent;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn this.parent;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Elements' parent [[Container]].\r\n\t *\r\n\t * @param {Optional<Container>}  parent  Parent container\r\n\t */\r\n\tpublic set parent(parent: Optional<Container>) {\r\n\t\tif (this.disabled || this.isTemplate) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet currentPaper = this.paper;\r\n\t\tlet oldParent = this._parent.get();\r\n\t\tif (oldParent != parent) {\r\n\t\t\tif (oldParent) {\r\n\t\t\t\toldParent.children.removeValue(this);\r\n\t\t\t}\r\n\r\n\t\t\tif (parent) {\r\n\r\n\t\t\t\tif (parent.isTemplate) {\r\n\t\t\t\t\tthis.isTemplate = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.paper = parent.paper;\r\n\r\n\t\t\t\tparent.children.moveValue(this);\r\n\t\t\t\tparent.addChildren();\r\n\r\n\t\t\t\tif (this._tooltip && !this._tooltipContainer) {\r\n\t\t\t\t\tthis._tooltip.parent = parent.tooltipContainer;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._parent.set(parent, parent.events.on(\"globalscalechanged\", this.handleGlobalScale, this));\r\n\r\n\t\t\t\tif (!this._dataItem) {\r\n\t\t\t\t\tthis.dataItem = parent.dataItem;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (currentPaper != parent.paper) {\r\n\t\t\t\t\tthis.appendDefs();\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\t\t\t\tthis._parent.reset();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Optional<Container>} Parent container\r\n\t */\r\n\tpublic get parent(): Optional<Container> {\r\n\t\treturn this._parent ? this._parent.get() : undefined;\r\n\t}\r\n\r\n\t/**\r\n\t * Moves `<defs>` to correct place in DOM.\r\n\t *\r\n\t * Some elements are initially created in \"ghost\" container. When moving\r\n\t * those into proper place in DOM, their respective `<defs>` need to be moved\r\n\t * as well.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic appendDefs(): void {\r\n\r\n\t\tif (this.filterElement) {\r\n\t\t\tthis.paper.appendDef(this.filterElement);\r\n\t\t}\r\n\r\n\t\tlet fill = <any>this.fill;\r\n\r\n\t\tif (fill && fill.element) {\r\n\t\t\tthis.paper.appendDef(fill.element);\r\n\t\t}\r\n\r\n\t\tlet stroke = <any>this.stroke;\r\n\t\tif (stroke && stroke.element) {\r\n\t\t\tthis.paper.appendDef(stroke.element);\r\n\t\t}\r\n\r\n\t\tif (this.fillModifier && this.fill instanceof Color) {\r\n\t\t\tlet fill = <any>this.fillModifier.modify(this.fill);\r\n\t\t\tif (fill && fill.element) {\r\n\t\t\t\tthis.paper.appendDef(fill.element);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this.strokeModifier && this.stroke instanceof Color) {\r\n\t\t\tlet stroke = <any>this.fillModifier.modify(this.stroke);\r\n\t\t\tif (stroke && stroke.element) {\r\n\t\t\t\tthis.paper.appendDef(stroke.element);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this._clipPath) {\r\n\t\t\tthis.paper.appendDef(this._clipPath);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a [[Dictionary]] which maps object ids with their respective\r\n\t * objects.\r\n\t *\r\n\t * Can be used to retrieve any object by id, e.g.:\r\n\t *\r\n\t * ```TypeScript\r\n\t * console.log(mySprite.map.getKey(\"myid\"));\r\n\t * ```\r\n\t * ```JavaScript\r\n\t * console.log(mySprite.map.getKey(\"myid\"));\r\n\t * ```\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {Dictionary<string, any>} Map collection\r\n\t */\r\n\tpublic get map(): Dictionary<string, any> {\r\n\t\tconst top = this.topParent;\r\n\r\n\t\tif (top) {\r\n\t\t\treturn top.map;\r\n\t\t} else if (!this._map) {\r\n\t\t\tthis._map = new Dictionary<string, any>();\r\n\t\t}\r\n\r\n\t\treturn this._map;\r\n\t}\r\n\r\n\t/**\r\n\t * Element's user-defined ID.\r\n\t *\r\n\t * Will throw an Error if there already is an object with the same ID.\r\n\t *\r\n\t * Please note that above check will be performed withing the scope of the\r\n\t * current chart instance. It will not do checks across other chart instances\r\n\t * or in globally in DOM.\r\n\t *\r\n\t * Make sure the IDs are unique.\r\n\t *\r\n\t * @param {string} value ID\r\n\t */\r\n\tpublic set id(value: string) {\r\n\t\tif (this._id != value) {\r\n\t\t\tthis._id = value;\r\n\t\t\tif (this.map.hasKey(value)) {\r\n\t\t\t\tthrow Error(\"Duplicate id (\" + value + \") used on multiple objects.\");\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.map.setKey(value, this);\r\n\t\t\t}\r\n\t\t\tif (options.autoSetClassName) {\r\n\t\t\t\tthis.setClassName();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {string} ID\r\n\t */\r\n\tpublic get id(): string {\r\n\t\treturn this._id;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * ==========================================================================\r\n\t * ELEMENT AND DOM TREE MANIPULATION AND MEASURING\r\n\t * ==========================================================================\r\n\t * @hidden\r\n\t */\r\n\r\n\t/**\r\n\t * Returns DOM element reference associated with this element.\r\n\t *\r\n\t * @readonly\r\n\t * @return {SVGSVGElement} DOM element\r\n\t */\r\n\tpublic get dom(): SVGSVGElement {\r\n\t\treturn this.group.node;\r\n\t}\r\n\r\n\t/**\r\n\t * A [[Paper]] instance to place elements on.\r\n\t *\r\n\t * If there's no Paper set for this element, it goes up the ascendant tree\r\n\t * until it finds one.\r\n\t *\r\n\t * This method is used by important `addChild()` method, so it's essential\r\n\t * to have a [[Paper]] instance.\r\n\t *\r\n\t * If this element has a separate `htmlContainer` set, it will have a\r\n\t * [[Paper]] instance itself.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {Paper}  paper  Paper\r\n\t */\r\n\tpublic set paper(paper: Paper) {\r\n\t\tthis.setPaper(paper);\r\n\t}\r\n\r\n\tpublic setPaper(paper: Paper) {\r\n\t\tlet oldPaper = this.paper;\r\n\t\tif (oldPaper != paper) {\r\n\t\t\tthis._paper = paper;\r\n\t\t\tpaper.append(this.group);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore Exclude from docs\r\n\t * @return {Paper} Paper\r\n\t */\r\n\tpublic get paper(): Paper {\r\n\t\tif (this._paper) {\r\n\t\t\treturn this._paper;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (this.parent) {\r\n\t\t\t\treturn this.parent.paper;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn getSystem().ghostPaper;\r\n\t}\r\n\r\n\t/**\r\n\t * An HTML element to be used when placing wrapper element (`<div>`)\r\n\t * for the whole chart.\r\n\t *\r\n\t * This is the same for **all** elements within the same chart.\r\n\t *\r\n\t * @param {Optional<HTMLElement>} htmlContainer HTML element\r\n\t */\r\n\tpublic set htmlContainer(htmlContainer: $type.Optional<HTMLElement>) {\r\n\t\tthis._htmlContainer = htmlContainer;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Optional<HTMLElement>} HTML element\r\n\t */\r\n\tpublic get htmlContainer(): $type.Optional<HTMLElement> {\r\n\t\tif (this._htmlContainer) {\r\n\t\t\treturn this._htmlContainer;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (this.parent) {\r\n\t\t\t\treturn this.parent.htmlContainer;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Creates (if not yet created) and returns element's `<title>` element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {AMElement} Title element\r\n\t */\r\n\tpublic get titleElement(): AMElement {\r\n\t\tif (!this._titleElement) {\r\n\t\t\tthis._titleElement = this.paper.add(\"title\");\r\n\t\t\tthis.group.add(this._titleElement);\r\n\t\t}\r\n\t\treturn this._titleElement;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates (if not yet created) and returns element's `<desc>` element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {AMElement} Desc element\r\n\t */\r\n\tpublic get descriptionElement(): AMElement {\r\n\t\tif (!this._descriptionElement) {\r\n\t\t\tthis._descriptionElement = this.paper.add(\"desc\");\r\n\t\t\tthis.group.add(this._descriptionElement);\r\n\t\t}\r\n\t\treturn this._descriptionElement;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns list of SVG filters (effects) applied to element. If the filter\r\n\t * list is not yet initilized, creates and returns an empty one.\r\n\t * Note, not all filters combine well with one another. We recommend using one filter per sprite.\r\n\t *\r\n\t * @return {ListTemplate<Filter>} List of filters\r\n\t */\r\n\tpublic get filters(): ListTemplate<Filter> {\r\n\t\tif (!this._filters) {\r\n\t\t\tconst template = new Filter();\r\n\t\t\tthis._filters = new ListTemplate<Filter>(template);\r\n\t\t\t// TODO only add certain events ?\r\n\t\t\tthis._disposers.push(this._filters.events.onAll(this.applyFilters, this));\r\n\t\t\tthis._disposers.push(new ListDisposer(this._filters));\r\n\t\t\tthis._disposers.push(template);\r\n\t\t}\r\n\t\treturn this._filters;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets required SVG attributes. Must be called every time an element is\r\n\t * redrawn so that attributes are (re)applied.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tprotected setSVGAttributes(): void {\r\n\t\tthis.fill = this.fill;\r\n\t\tthis.opacity = this.opacity;\r\n\t\tthis.fillOpacity = this.fillOpacity;\r\n\t\tthis.stroke = this.stroke;\r\n\t\tthis.strokeOpacity = this.strokeOpacity;\r\n\t\tthis.shapeRendering = this.shapeRendering;\r\n\t\tthis.strokeDasharray = this.strokeDasharray;\r\n\t\tthis.focusable = this.focusable;\r\n\t\tthis.tabindex = this.tabindex;\r\n\t\tthis.role = this.role;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets an attribute directly on an SVG element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {ISVGAttribute} attribute Attribute object\r\n\t */\r\n\tprotected setSVGAttribute(attribute: ISVGAttribute): void {\r\n\t\tthis.group.attr(attribute);\r\n\t}\r\n\r\n\t/**\r\n\t * Removes an attribute directly from SVG element.\r\n\t *\r\n\t * @param {string} attribute Attribute key to remove\r\n\t */\r\n\tprotected removeSVGAttribute(attribute: string): void {\r\n\t\tthis.group.removeAttr(attribute);\r\n\t}\r\n\r\n\t/**\r\n\t * Sets `class` attribute of the elements SVG node.\r\n\t *\r\n\t * Uses `am4core.options.classNamePrefix`.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic setClassName(): void {\r\n\r\n\t\tlet className = this.className;\r\n\t\tlet classNamePrefix = options.classNamePrefix;\r\n\r\n\t\tif (this.element) {\r\n\t\t\tthis.element.addClass(classNamePrefix + className);\r\n\t\t}\r\n\r\n\t\tthis.group.addClass(classNamePrefix + className + \"-group\");\r\n\r\n\t\tif ($type.hasValue(this.id)) {\r\n\t\t\tthis.group.addClass(classNamePrefix + this.id);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Adds an `id` attribute the the element and returns the id.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {string} Element's ID\r\n\t */\r\n\tpublic uidAttr(): string {\r\n\t\tthis.element.attr({ \"id\": this.uid });\r\n\t\treturn this.uid;\r\n\t}\r\n\r\n\t/**\r\n\t * [updateClipPath description]\r\n\t *\r\n\t * @todo Description\r\n\t */\r\n\tprotected updateClipPath(): void {\r\n\t\tconst element = this._clipElement;\r\n\r\n\t\tif (element) {\r\n\t\t\telement.moveTo({ x: this.mask.pixelX, y: this.mask.pixelY });\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Applies the mask Sprite.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tprotected applyMask(): void {\r\n\t\tthis.removeClipPath();\r\n\t\tlet mask = this.mask;\r\n\t\tlet maskRectangle = this._maskRectangle;\r\n\t\tif (mask || maskRectangle) {\r\n\t\t\tif (!this._clipPath) {\r\n\t\t\t\tthis._clipPath = this.paper.addGroup(\"clipPath\");\r\n\t\t\t\tthis._disposers.push(this._clipPath);\r\n\t\t\t}\r\n\t\t\tif (this._maskRectangle) {\r\n\t\t\t\tthis._clipElement = this.paper.add(\"rect\");\r\n\t\t\t\tthis._clipElement.attr({ \"width\": maskRectangle.width, \"height\": maskRectangle.height });\r\n\t\t\t}\r\n\t\t\tif (mask) {\r\n\t\t\t\t// Container\r\n\t\t\t\tif (mask instanceof Container) {\r\n\t\t\t\t\t// create clip path\r\n\t\t\t\t\tthis._clipElement = this.paper.add(\"rect\");\r\n\t\t\t\t\tthis._clipElement.attr({ \"width\": mask.pixelWidth, \"height\": mask.pixelHeight });\r\n\t\t\t\t}\r\n\t\t\t\t// Sprite\r\n\t\t\t\telse {\r\n\t\t\t\t\tif (mask.element) {\r\n\t\t\t\t\t\tthis._clipElement = mask.element;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (this._clipElement) {\r\n\t\t\t\tthis._clipPath.add(this._clipElement);\r\n\t\t\t}\r\n\r\n\t\t\tlet id: string = registry.getUniqueId();\r\n\t\t\tthis._clipPath.attr({ \"id\": id });\r\n\t\t\tthis.group.attr({ \"clip-path\": \"url(#\" + id + \")\" });\r\n\t\t\tthis.paper.appendDef(this._clipPath);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Applies filters to the element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tprotected applyFilters(): void {\r\n\t\t// we create a separate filter for each sprite as otherwise it would be impossible to animate filter.\r\n\t\t// svg doesn't support multiple filters applied to one element, so we put all the primitives to one filterElement of a sprite.\r\n\t\tif (this.filters.length > 0) {\r\n\t\t\tlet width = 100;\r\n\t\t\tlet height = 100;\r\n\r\n\t\t\tif (!this.filterElement) {\r\n\t\t\t\tthis.filterElement = this.paper.addGroup(\"filter\");\r\n\t\t\t\tthis._disposers.push(this.filterElement);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.filterElement.removeChildNodes();\r\n\t\t\t}\r\n\r\n\t\t\tthis.paper.appendDef(this.filterElement);\r\n\r\n\t\t\tlet id: string = \"filter-\" + this.uid;\r\n\t\t\tthis.filterElement.attr({ \"id\": id });\r\n\r\n\t\t\t$iter.each(this.filters.iterator(), (filter) => {\r\n\t\t\t\tfilter.sprite = this;\r\n\t\t\t\tfilter.paper = this.paper;\r\n\r\n\t\t\t\tfilter.appendPrimitives(this.filterElement);\r\n\r\n\t\t\t\tif (filter.width > width) {\r\n\t\t\t\t\twidth = filter.width;\r\n\t\t\t\t}\r\n\t\t\t\tif (filter.height > height) {\r\n\t\t\t\t\theight = filter.height;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfilter.scale = this.globalScale;\r\n\t\t\t});\r\n\r\n\t\t\tthis.filterElement.attr({ \"width\": width + \"%\", \"height\": height + \"%\", \"x\": -(width - 100) / 2 + \"%\", \"y\": -(height - 100) / 2 + \"%\" });\r\n\r\n\t\t\tthis.group.attr({ \"filter\": \"url(#\" + id + \")\" });\r\n\t\t}\r\n\t\telse if (this.filterElement) {\r\n\t\t\tthis.group.removeAttr(\"filter\");\r\n\t\t\tthis.filterElement.removeChildNodes();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * [removeClipPath description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t */\r\n\tprotected removeClipPath(): void {\r\n\t\tif (this._clipPath) {\r\n\t\t\t//this._clipPath.dispose();\r\n\t\t\tthis.removeDispose(this._clipPath);\r\n\t\t\tthis._clipPath = undefined;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * The main element for this Sprite, usually an SVG `<g>`.\r\n\t *\r\n\t * All other sub-elements are created in it.\r\n\t *\r\n\t * @param {Optional<AMElement>}  element  Element\r\n\t */\r\n\tpublic set element(element: Optional<AMElement>) {\r\n\r\n\t\t// Destroy previous element if there was one before\r\n\t\tthis.removeElement();\r\n\r\n\t\t// Set new element\r\n\t\tthis._element = element;\r\n\r\n\t\t// Add element to group\r\n\t\t// Since we are adding Element to group, which is already in the\r\n\t\t// `.disposers` it will be removed automatically when Sprite is disposed\r\n\t\t// of\r\n\t\tthis.group.add(element);\r\n\r\n\t\t// This is needed if someone is setting element not in draw method but\r\n\t\t// from outside\r\n\t\tif (!this.invalid) {\r\n\t\t\tthis.validate();\r\n\t\t}\r\n\r\n\t\tif (options.autoSetClassName) {\r\n\t\t\tthis.setClassName();\r\n\t\t}\r\n\t\tthis.setSVGAttributes();\r\n\t\tthis.applyAccessibility();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {AMElement} Element\r\n\t */\r\n\tpublic get element(): Optional<AMElement> {\r\n\t\treturn this._element;\r\n\t}\r\n\r\n\t/**\r\n\t * HTML container (`<div>`) which is used to place chart's `<svg>` element\r\n\t * in.\r\n\t *\r\n\t * @return {Optional<SVGContainer>} Container for chart elements\r\n\t */\r\n\tpublic get svgContainer(): $type.Optional<SVGContainer> {\r\n\t\tif (this._svgContainer) {\r\n\t\t\treturn this._svgContainer;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (this.parent) {\r\n\t\t\t\treturn this.parent.svgContainer;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Sets HTML container to add SVG and other chart elements to.\r\n\t *\r\n\t * @param {Optional<SVGContainer>} svgContainer Container for chart elements\r\n\t */\r\n\tpublic set svgContainer(svgContainer: $type.Optional<SVGContainer>) {\r\n\t\tthis._svgContainer = svgContainer;\r\n\t}\r\n\r\n\t/**\r\n\t * Measures main element.\r\n\t *\r\n\t * Saves measurements into private `_bbox` property.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tprotected measureElement() {\r\n\t\tif (this.element) {\r\n\t\t\tlet svgBBox: IRectangle = this.element.getBBox();\r\n\r\n\t\t\tif (this.definedBBox) {\r\n\t\t\t\tthis.bbox = this.definedBBox;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.bbox = { x: svgBBox.x, y: svgBBox.y, width: svgBBox.width, height: svgBBox.height };\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\t/**\r\n\t * Positions element according its center settings.\r\n\t *\r\n\t * @todo Description (review)\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic updateCenter() {\r\n\t\tif (this.element) {\r\n\t\t\tlet bbox = this.bbox;\r\n\r\n\t\t\tlet ex = 0;\r\n\t\t\tlet ey = 0;\r\n\r\n\t\t\tlet elementX = bbox.x;\r\n\t\t\tlet elementY = bbox.y;\r\n\r\n\t\t\tlet elementWidth = bbox.width;\r\n\t\t\tlet elementHeigth = bbox.height;\r\n\r\n\t\t\tlet pixelPaddingLeft = this.pixelPaddingLeft;\r\n\t\t\tlet pixelPaddingRight = this.pixelPaddingRight;\r\n\t\t\tlet pixelPaddingTop = this.pixelPaddingTop;\r\n\t\t\tlet pixelPaddingBottom = this.pixelPaddingBottom;\r\n\r\n\t\t\t// add padding to the measured size\r\n\t\t\tlet measuredWidth = bbox.width + this.pixelPaddingLeft + this.pixelPaddingRight;\r\n\t\t\tlet measuredHeight = bbox.height + this.pixelPaddingTop + this.pixelPaddingBottom;\r\n\r\n\t\t\t// extremes\r\n\t\t\tlet left = bbox.x;\r\n\t\t\tlet right = bbox.x + measuredWidth;\r\n\r\n\t\t\tlet top = bbox.y;\r\n\t\t\tlet bottom = bbox.y + measuredHeight;\r\n\r\n\t\t\tswitch (this.horizontalCenter) {\r\n\t\t\t\tcase \"none\":\r\n\t\t\t\t\tex = elementX + pixelPaddingLeft;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"left\":\r\n\t\t\t\t\tex = pixelPaddingLeft;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"middle\":\r\n\t\t\t\t\tex = pixelPaddingLeft - (elementWidth + pixelPaddingRight + pixelPaddingLeft) / 2;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"right\":\r\n\t\t\t\t\tex = -pixelPaddingRight - elementWidth;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tswitch (this.verticalCenter) {\r\n\t\t\t\tcase \"none\":\r\n\t\t\t\t\tey = elementY + pixelPaddingTop;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"top\":\r\n\t\t\t\t\tey = pixelPaddingTop;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"middle\":\r\n\t\t\t\t\tey = pixelPaddingTop - (elementHeigth + pixelPaddingBottom + pixelPaddingTop) / 2;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"bottom\":\r\n\t\t\t\t\tey = -pixelPaddingBottom - elementHeigth;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tthis._measuredHeight = measuredHeight;\r\n\t\t\tthis._measuredWidth = measuredWidth;\r\n\r\n\t\t\tlet x: number = $math.round(ex - elementX, this._positionPrecision);\r\n\t\t\tlet y: number = $math.round(ey - elementY, this._positionPrecision);\r\n\r\n\t\t\tthis.maxLeft = left + x - pixelPaddingLeft;\r\n\t\t\tthis.maxRight = right + x - pixelPaddingLeft;\r\n\r\n\t\t\tthis.maxTop = top + y - pixelPaddingTop;\r\n\t\t\tthis.maxBottom = bottom + y - pixelPaddingTop;\r\n\r\n\t\t\tif (this.pixelPerfect) {\r\n\t\t\t\tx -= 0.5;\r\n\t\t\t\ty -= 0.5;\r\n\t\t\t}\r\n\r\n\t\t\tthis.element.moveTo({ x: x, y: y });\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Measures the whole element.\r\n\t *\r\n\t * Returns `true` if the size has changed from the last measurement.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {boolean} Did the size chance from the last measurement?\r\n\t */\r\n\tpublic measure(): boolean {\r\n\r\n\t\tthis.updateCenter();\r\n\r\n\t\tlet bbox = this.bbox;\r\n\r\n\t\tif (bbox) {\r\n\t\t\tlet measuredWidth = this._measuredWidth;\r\n\t\t\tlet measuredHeight = this._measuredHeight;\r\n\r\n\t\t\t// extremes\r\n\t\t\tlet left = this.maxLeft;\r\n\t\t\tlet right = this.maxRight;\r\n\r\n\t\t\tlet top = this.maxTop;\r\n\t\t\tlet bottom = this.maxBottom;\r\n\r\n\t\t\t// non-parent wise size\r\n\t\t\tthis._measuredWidthSelf = measuredWidth;\r\n\t\t\tthis._measuredHeightSelf = measuredHeight;\r\n\r\n\t\t\t// if a sprite is rotated or scaled, calculate measured size after transformations\r\n\t\t\tif (this.rotation !== 0 || this.scale !== 1) {\r\n\t\t\t\tlet svg = this.paper.svg;\r\n\r\n\t\t\t\tlet matrix: SVGMatrix = svg.createSVGMatrix();\r\n\t\t\t\tlet rotation: number = this.rotation;\r\n\r\n\t\t\t\tmatrix.a = $math.cos(rotation) * this.scale;\r\n\t\t\t\tmatrix.c = - $math.sin(rotation) * this.scale;\r\n\t\t\t\tmatrix.e = 0;\r\n\t\t\t\tmatrix.b = $math.sin(rotation) * this.scale;\r\n\t\t\t\tmatrix.d = $math.cos(rotation) * this.scale;\r\n\t\t\t\tmatrix.f = 0;\r\n\r\n\t\t\t\tlet p1: SVGPoint = svg.createSVGPoint();\r\n\t\t\t\tp1.x = left;\r\n\t\t\t\tp1.y = top;\r\n\r\n\t\t\t\tlet p2: SVGPoint = svg.createSVGPoint();\r\n\t\t\t\tp2.x = right;\r\n\t\t\t\tp2.y = top;\r\n\r\n\t\t\t\tlet p3: SVGPoint = svg.createSVGPoint();\r\n\t\t\t\tp3.x = right;\r\n\t\t\t\tp3.y = bottom;\r\n\r\n\t\t\t\tlet p4: SVGPoint = svg.createSVGPoint();\r\n\t\t\t\tp4.x = left;\r\n\t\t\t\tp4.y = bottom;\r\n\r\n\t\t\t\tlet pt1: SVGPoint = p1.matrixTransform(matrix);\r\n\t\t\t\tlet pt2: SVGPoint = p2.matrixTransform(matrix);\r\n\t\t\t\tlet pt3: SVGPoint = p3.matrixTransform(matrix);\r\n\t\t\t\tlet pt4: SVGPoint = p4.matrixTransform(matrix);\r\n\r\n\t\t\t\tleft = Math.min(pt1.x, pt2.x, pt3.x, pt4.x);\r\n\t\t\t\tright = Math.max(pt1.x, pt2.x, pt3.x, pt4.x);\r\n\t\t\t\ttop = Math.min(pt1.y, pt2.y, pt3.y, pt4.y);\r\n\t\t\t\tbottom = Math.max(pt1.y, pt2.y, pt3.y, pt4.y);\r\n\r\n\t\t\t\tmeasuredWidth = right - left;\r\n\t\t\t\tmeasuredHeight = bottom - top;\r\n\t\t\t}\r\n\r\n\t\t\tlet positionPrecision = this._positionPrecision;\r\n\r\n\t\t\tthis.maxLeft = $math.round(left, positionPrecision);\r\n\t\t\tthis.maxRight = $math.round(right, positionPrecision);\r\n\t\t\tthis.maxTop = $math.round(top, positionPrecision);\r\n\t\t\tthis.maxBottom = $math.round(bottom, positionPrecision);\r\n\r\n\t\t\tthis._measuredWidth = $math.round(measuredWidth, positionPrecision);\r\n\t\t\tthis._measuredHeight = $math.round(measuredHeight, positionPrecision);\r\n\t\t}\r\n\r\n\t\t// dispatch event\r\n\t\tif (this._measuredWidth != this._prevMeasuredWidth || this._measuredHeight != this._prevMeasuredHeight) {\r\n\t\t\tthis._prevMeasuredHeight = this._measuredHeight;\r\n\t\t\tthis._prevMeasuredWidth = this._measuredWidth;\r\n\r\n\t\t\t// TODO clear existing sizechanged dispatches ?\r\n\t\t\tthis.dispatch(\"sizechanged\");\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\t/**\r\n\t * Insert this element before sibling element.\r\n\t *\r\n\t * @param  {Sprite}  sprite  Target element\r\n\t * @return {Sprite}          This element\r\n\t */\r\n\tpublic insertBefore(sprite: Sprite): Sprite {\r\n\t\tlet parent = this._parent.get();\r\n\r\n\t\tif (parent) {\r\n\t\t\tlet index: number = parent.children.indexOf(sprite);\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\tparent.children.moveValue(this, index);\r\n\t\t\t\tparent.sortChildren();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * Insert this element after sibling element.\r\n\t *\r\n\t * @param  {Sprite}  sprite  Target element\r\n\t * @return {Sprite}          This element\r\n\t */\r\n\tpublic insertAfter(sprite: Sprite): Sprite {\r\n\t\tlet parent = this._parent.get();\r\n\r\n\t\tif (parent) {\r\n\t\t\tlet index: number = parent.children.indexOf(sprite);\r\n\t\t\tif (index !== -1) {\r\n\t\t\t\tparent.children.moveValue(this, index + 1);\r\n\t\t\t\tparent.sortChildren();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * Removes the main SVG element.\r\n\t *\r\n\t * This does not destroy the whole Sprite element. To do that use\r\n\t * `dispose()` instead.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tprotected removeElement() {\r\n\t\t// remove visual element\r\n\t\tif (this._element) {\r\n\t\t\tthis.removeDispose(this._element);\r\n\t\t\tthis._element = undefined;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns relative (percent) value of the X coordindate within this element.\r\n\t *\r\n\t * A relative value is a hundredth of a percent. So 100% would result in a 1\r\n\t * as relative value.\r\n\t *\r\n\t * @param  {number | Percent}  value  Absolute or relative X coordinate\r\n\t * @return {number}                   Relative value\r\n\t */\r\n\tpublic getRelativeX(value: number | Percent): number {\r\n\t\tif (value instanceof Percent) {\r\n\t\t\treturn value.value;\r\n\t\t}\r\n\t\telse if (this.parent) {\r\n\t\t\treturn value / this.parent.innerWidth;\r\n\t\t}\r\n\t\treturn 0;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns relative (percent) value of the Y coordindate within this element.\r\n\t *\r\n\t * A relative value is a hundredth of a percent. So 100% would result in a 1\r\n\t * as relative value.\r\n\t *\r\n\t * @param  {number | Percent}  value  Absolute or relative Y coordinate\r\n\t * @return {number}                   Relative value\r\n\t */\r\n\tpublic getRelativeY(value: number | Percent): number {\r\n\t\tif (value instanceof Percent) {\r\n\t\t\treturn value.value;\r\n\t\t}\r\n\t\telse if (this.parent) {\r\n\t\t\treturn value / this.parent.innerHeight;\r\n\t\t}\r\n\t\treturn 0;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns an X coordinate in pixel within the element.\r\n\t *\r\n\t * If number is passed in as parameter, the same number will be returned\r\n\t * back.\r\n\t *\r\n\t * If [[Percent]] is passed in, it will be recalculated to pixels.\r\n\t *\r\n\t * @param  {number | Percent}  value  Absolute or relative X coordinate\r\n\t * @return {number}                   X coordinate in pixels\r\n\t */\r\n\tpublic getPixelX(value: number | Percent): number {\r\n\r\n\t\t// we don't use $utils.valueToRelative as this would mean that we should access parent.innerWidth\r\n\t\t// all the time and this would result chain of the same actions and will slow down the system a lot\r\n\r\n\t\tlet pixel: number = 0;\r\n\t\tif ($type.isNumber(value)) {\r\n\t\t\tpixel = value;\r\n\t\t}\r\n\t\telse if (value instanceof Percent) {\r\n\t\t\tlet relative: number = value.value;\r\n\r\n\t\t\tif (this.parent) {\r\n\t\t\t\tpixel = this.parent.innerWidth * relative;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn $math.round(pixel, this._positionPrecision);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns an Y coordinate in pixel within the element.\r\n\t *\r\n\t * If number is passed in as parameter, the same number will be returned\r\n\t * back.\r\n\t *\r\n\t * If [[Percent]] is passed in, it will be recalculated to pixels.\r\n\t *\r\n\t * @param  {number | Percent}  value  Absolute or relative Y coordinate\r\n\t * @return {number}                   Y coordinate in pixels\r\n\t */\r\n\tpublic getPixelY(value: number | Percent): number {\r\n\r\n\t\t// we don't use $utils.valueToRelative as this would mean that we should access parent.innerWidth\r\n\t\t// all the time and this would result chain of the same actions and will slow down the system a lot\r\n\r\n\t\tlet pixel: number = 0;\r\n\t\tif ($type.isNumber(value)) {\r\n\t\t\tpixel = value;\r\n\t\t}\r\n\t\telse if (value instanceof Percent) {\r\n\t\t\tlet relative: number = value.value;\r\n\r\n\t\t\tif (this.parent) {\r\n\t\t\t\tpixel = this.parent.innerHeight * relative;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn $math.round(pixel, this._positionPrecision);\r\n\t}\r\n\r\n\t/**\r\n\t * Moves the element to a specified coordinates.\r\n\t *\r\n\t * Using this method is preferred method of moving element, as it saves some\r\n\t * CPU processing power over setting `x` and `y` properties separately.\r\n\t *\r\n\t * The method respects element's center settings. The element will be\r\n\t * positioned so that `point` coordinates come in whatever \"center\" of the\r\n\t * element is, as set in `horizontalCenter` and `verticalCenter`.\r\n\t *\r\n\t * Besides moving the element, you can also at the same time scale and\r\n\t * rotate the element.\r\n\t *\r\n\t * @param {IPoint}  point     New coordinates\r\n\t * @param {number}  rotation  New rotation\r\n\t * @param {number}  scale     New Scale\r\n\t */\r\n\tpublic moveTo(point: IPoint, rotation?: number, scale?: number, isDragged?: boolean): void {\r\n\t\tif (this.isDragged && !isDragged) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (point) {\r\n\t\t\tif ($type.isNumber(point.x)) {\r\n\t\t\t\tthis.setPropertyValue(\"x\", point.x);\r\n\t\t\t}\r\n\t\t\tif ($type.isNumber(point.y)) {\r\n\t\t\t\tthis.setPropertyValue(\"y\", point.y);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ($type.isNumber(rotation)) {\r\n\t\t\tthis.setPropertyValue(\"rotation\", rotation);\r\n\t\t}\r\n\r\n\t\tif ($type.isNumber(scale)) {\r\n\t\t\tthis.setPropertyValue(\"scale\", scale);\r\n\t\t}\r\n\t\tthis.invalidatePosition();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets another [[Sprite]] element as this elements mask.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {Optional<Sprite>} mask A [[Sprite]] to use as mask\r\n\t */\r\n\tpublic set mask(mask: Optional<Sprite>) {\r\n\t\tif (this._mask.get() !== mask) {\r\n\t\t\t// this is good\r\n\t\t\tif (mask) {\r\n\t\t\t\tif (!(mask instanceof Container)) {\r\n\t\t\t\t\tmask.isMeasured = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._mask.set(mask, new MultiDisposer([\r\n\t\t\t\t\t//mask.addEventListener(SpriteEvent.TRANSFORMED, this.applyMask, false, this);\r\n\t\t\t\t\tmask.events.on(\"maxsizechanged\", this.applyMask, this),\r\n\t\t\t\t\tmask.events.on(\"validated\", this.applyMask, this)\r\n\t\t\t\t]));\r\n\r\n\t\t\t\tthis.applyMask();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._mask.reset();\r\n\t\t\t\tthis.group.removeAttr(\"clip-path\");\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns [[Sprite]] element currently used as mask for this element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {Optional<Sprite>} A [[Sprite]] to use as mask\r\n\t */\r\n\tpublic get mask(): Optional<Sprite> {\r\n\t\treturn this.adapter.apply(\"mask\", this._mask.get());\r\n\t}\r\n\r\n\t// you can set IRectangle as a mask instead o a sprite. Note, the changes of the object won't be monitored\r\n\r\n\t/**\r\n\t * Instead of creating a [[Sprite]] for mask, you can just use a\r\n\t * [[Rectangle]] by setting this accessor.\r\n\t *\r\n\t * Please note that the element will not monitor any changes to the mask\r\n\t * rectangle.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {IRectangle} rect Mask Rectangle\r\n\t */\r\n\tpublic set maskRectangle(rect: IRectangle) {\r\n\t\tthis._maskRectangle = rect;\r\n\t\tthis.applyMask();\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore Exclude from docs\r\n\t * @return {IRectangle} Mask Rectangle\r\n\t */\r\n\tpublic get maskRectangle(): IRectangle {\r\n\t\treturn this._maskRectangle;\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates if this element was already measured.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {boolean} value Was element already measured?\r\n\t */\r\n\tpublic set isMeasured(value: boolean) {\r\n\t\tvalue = $type.toBoolean(value);\r\n\r\n\t\tif (!value) {\r\n\t\t\tthis._measuredWidth = 0;\r\n\t\t\tthis._measuredHeight = 0;\r\n\t\t\t//this._pixelHeight = 0;\r\n\t\t\t//this._pixelWidth = 0;\r\n\t\t}\r\n\r\n\t\tif (this._isMeasured != value) {\r\n\t\t\tthis._isMeasured = value;\r\n\t\t\tthis.invalidatePosition();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore Exclude from docs\r\n\t * @return {boolean} Was element already measured?\r\n\t */\r\n\tpublic get isMeasured(): boolean {\r\n\t\treturn this._isMeasured;\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if the this element has any of its parts overlapping with another\r\n\t * element.\r\n\t *\r\n\t * @todo Description (review)\r\n\t * @param  {Sprite}   sprite  Second element to test again\r\n\t * @return {boolean}          Overlapping?\r\n\t */\r\n\tpublic hitTest(sprite: Sprite): boolean {\r\n\t\t// validate, otherwise we will not know measuredWidth and measuredHeight\r\n\t\tif (this.invalid) {\r\n\t\t\tthis.validate();\r\n\t\t}\r\n\t\tif (sprite.invalid) {\r\n\t\t\tsprite.validate();\r\n\t\t}\r\n\r\n\t\tlet ax1 = this.pixelX;\r\n\t\tlet ay1 = this.pixelY;\r\n\t\tlet ax2 = ax1 + this.measuredWidth;\r\n\t\tlet ay2 = ay1 + this.measuredHeight;\r\n\r\n\t\tlet bx1 = sprite.pixelX;\r\n\t\tlet by1 = sprite.pixelY;\r\n\t\tlet bx2 = bx1 + sprite.measuredWidth;\r\n\t\tlet by2 = by1 + sprite.measuredHeight;\r\n\r\n\t\treturn !(bx1 > ax2 || bx2 < ax1 || by1 > ay2 || by2 < ay1);\r\n\t}\r\n\r\n\t/**\r\n\t * ==========================================================================\r\n\t * STATE-RELATED\r\n\t * ==========================================================================\r\n\t * @hidden\r\n\t */\r\n\r\n\t/**\r\n\t * Returns `true` if Sprite has already finished initializing.\r\n\t *\r\n\t * @return {boolean} Initialized?\r\n\t */\r\n\tpublic get inited(): boolean {\r\n\t\treturn this._inited;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a collection of element's available [[SpriteState]] entries.\r\n\t *\r\n\t * @see {@link SpriteState}\r\n\t * @return {DictionaryTemplate<string, SpriteState>} States\r\n\t */\r\n\tpublic get states(): DictionaryTemplate<string, SpriteState<this[\"_properties\"], this[\"_adapter\"]>> {\r\n\t\tif (!this._states) {\r\n\t\t\tconst state = new SpriteState<this[\"_properties\"], this[\"_adapter\"]>();\r\n\r\n\t\t\t// works\r\n\t\t\tthis._states = new DictionaryTemplate<string, SpriteState<this[\"_properties\"], this[\"_adapter\"]>>(state);\r\n\r\n\t\t\t// TODO what about removeKey ?\r\n\t\t\tthis._disposers.push(this._states.events.on(\"insertKey\", this.processState, this));\r\n\t\t\tthis._disposers.push(this._states.events.on(\"setKey\", this.processState, this));\r\n\r\n\t\t\tthis._disposers.push(new DictionaryDisposer(this._states));\r\n\t\t\tthis._disposers.push(state);\r\n\t\t}\r\n\t\treturn this._states;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a [[SpriteState]] object for \"hidden\" state.\r\n\t *\r\n\t * This is a shortcut to `this.states.getKey(\"hidden\")`.\r\n\t *\r\n\t * @return {SpriteState} Hidden state\r\n\t */\r\n\tpublic get hiddenState(): SpriteState<this[\"_properties\"], this[\"_adapter\"]> {\r\n\t\treturn this.states.getKey(\"hidden\");\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a [[SpriteState]] object for \"default\" state.\r\n\t *\r\n\t * This is a shortcut to `this.states.getKey(\"default\")`.\r\n\t *\r\n\t * @return {SpriteState} Hidden state\r\n\t */\r\n\tpublic get defaultState(): SpriteState<this[\"_properties\"], this[\"_adapter\"]> {\r\n\t\treturn this.states.getKey(\"default\");\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if some key states are defined and updates Sprite properties\r\n\t * accordingly.\r\n\t *\r\n\t * For example if there's a state \"down\" defined for Sprite, we automatically\r\n\t * make it \"clickable\".\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {IDictionaryEvents<string, SpriteState>[\"insertKey\" | \"setKey\"]} event An event which caused state list update\r\n\t */\r\n\tprotected processState(event: IDictionaryEvents<string, SpriteState<this[\"_properties\"], this[\"_adapter\"]>>[\"insertKey\" | \"setKey\"]): void {\r\n\t\tlet state: SpriteState<this[\"_properties\"], this[\"_adapter\"]> = event.newValue;\r\n\t\tstate.sprite = this;\r\n\t\tstate.name = event.key;\r\n\r\n\t\tif (this.states.hasKey(\"hover\") || $type.hasValue(this.tooltipHTML) || $type.hasValue(this.tooltipText)) {\r\n\t\t\tthis.hoverable = true;\r\n\t\t}\r\n\r\n\t\tif (this.states.hasKey(\"down\")) {\r\n\t\t\tthis.clickable = true;\r\n\t\t}\r\n\r\n\t\tif (this.states.hasKey(\"focus\")) {\r\n\t\t\tthis.focusable = true;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a list elements's animations currently being played.\r\n\t *\r\n\t * If the list has not been initialized it is created.\r\n\t *\r\n\t * @return {Array<Animation>} List of animations\r\n\t */\r\n\tpublic get animations(): Array<Animation> {\r\n\t\tif (!this._animations) {\r\n\t\t\tthis._animations = [];\r\n\t\t\tthis._disposers.push(new AnimationDisposer(this._animations));\r\n\t\t}\r\n\t\treturn this._animations;\r\n\t}\r\n\r\n\t/**\r\n\t * Converts element's local coordinates to the coordinates within the main\r\n\t * chart container.\r\n\t *\r\n\t * @param  {IPoint}  point  Local point\r\n\t * @return {IPoint}         Global point\r\n\t */\r\n\tpublic getSvgPoint(point: IPoint): IPoint {\r\n\t\t// Calculate SVG point\r\n\t\tlet bbox = this.htmlContainer.getBoundingClientRect();\r\n\r\n\t\treturn {\r\n\t\t\t\"x\": point.x - bbox.left,\r\n\t\t\t\"y\": point.y - bbox.top\r\n\t\t};\r\n\t}\r\n\r\n\t/**\r\n\t * Creates and starts an [[Animation]] with given `animationOptions`.\r\n\t *\r\n\t * @see {@link Animation} for additional information about available options\r\n\t * @param  {ISpriteAnimationOptions[] | ISpriteAnimationOptions}  animationOptions  Animation options\r\n\t * @param  {number}                                               duration          Duration in milliseconds\r\n\t * @param  {(number) => number}                                   easing            Easing function\r\n\t * @return {Animation}                                                              Animation instance\r\n\t */\r\n\tpublic animate(animationOptions: ISpriteAnimationOptions[] | ISpriteAnimationOptions, duration: number, easing?: (value: number) => number): Animation {\r\n\t\treturn new Animation(this, animationOptions, duration, easing).start();\r\n\t}\r\n\r\n\t/**\r\n\t * Applies a [[SpriteState]] on this element.\r\n\t *\r\n\t * The first parameter can either be a name state or a [[SpriteState]]\r\n\t * instance.\r\n\t *\r\n\t * When run, this method will apply SVG properties defined in a\r\n\t * [[SpriteState]], but only those that are relevant to this particular\r\n\t * element, i.e. are in the `properties` array.\r\n\t *\r\n\t * @see {@link SpriteState}\r\n\t * @param {string | SpriteState} value               A state - name key or instance\r\n\t * @param {number}               transitionDuration  Duration of the transition between current and new state\r\n\t * @param {number) => number}    easing              An easing function\r\n\t */\r\n\tpublic setState(value: string | SpriteState<this[\"_properties\"], this[\"_adapter\"]>, transitionDuration?: number, easing?: (value: number) => number): $type.Optional<Animation> {\r\n\t\tlet state: Optional<SpriteState<this[\"_properties\"], this[\"_adapter\"]>>;\r\n\t\tif (value instanceof SpriteState) {\r\n\t\t\tthis.states.setKey(value.name, value);\r\n\t\t\tstate = value;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tstate = this.states.getKey(value);\r\n\t\t\tif (!state) {\r\n\t\t\t\treturn;\r\n\t\t\t\t//throw Error(\"no such state\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// stop previous transition\r\n\t\t// not good - foe expample, we are animating to some \"active\" state and in them middle \"hover\" state happens. then \"active\" stat won't be applied\r\n\t\t//if (this._transition) {\r\n\t\t//this._transition.stop();\r\n\t\t//}\r\n\r\n\t\tif (state.name == \"hover\") {\r\n\t\t\tthis.isHover = true;\r\n\t\t}\r\n\r\n\t\tif (state.name == \"hidden\") {\r\n\t\t\tthis.isHiding = true;\r\n\t\t}\r\n\r\n\t\tif (state.name == \"active\") {\r\n\t\t\tthis.isActive = true;\r\n\t\t}\r\n\r\n\t\tif (!$type.isNumber(transitionDuration)) {\r\n\t\t\ttransitionDuration = state.transitionDuration;\r\n\t\t}\r\n\r\n\t\tif (!$type.hasValue(easing)) {\r\n\t\t\teasing = state.transitionEasing;\r\n\t\t}\r\n\r\n\t\treturn this.transitTo(state, transitionDuration, easing);\r\n\t}\r\n\r\n\t/**\r\n\t * Applies proper state based on the condition of the element. A condition is\r\n\t * deducted in this order:\r\n\t * * \"hover\" if Sprite has currently any pointers over it\r\n\t * * \"down\" if Sprite has any pointers (touch or mouse) currently pressed over it\r\n\t * * \"focus\" if Sprite has currently got focus (accessibility)\r\n\t * * \"hidden\" if Sprite is currently hidden\r\n\t *\r\n\t * Returns an [[Animation]] object, which is handling gradual transition from\r\n\t * current values of properties, to the new target state(s).\r\n\t *\r\n\t * @param  {number}     duration  Duration for the animation (ms)\r\n\t * @return {Optional<Animation>}  [[Animation]] object which is handling the transition\r\n\t */\r\n\tpublic applyCurrentState(duration?: number): $type.Optional<Animation> {\r\n\t\tlet animation: $type.Optional<Animation> = this.setState(this.defaultState, duration);\r\n\r\n\t\tif (this.isHover) {\r\n\t\t\tanimation = this.setState(\"hover\", duration);\r\n\t\t}\r\n\r\n\t\tif (this.isDown && this.interactions.downPointers.length) {\r\n\t\t\tanimation = this.setState(\"down\", duration);\r\n\t\t}\r\n\r\n\t\tthis.isFocused = this.isFocused;\r\n\r\n\t\tif (this.isActive) {\r\n\t\t\tanimation = this.setState(\"active\", duration);\r\n\t\t}\r\n\t\treturn animation;\r\n\t}\r\n\r\n\t/**\r\n\t * Starts an [[Animation]] of the properties to specific values as they are\r\n\t * set in `state`.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {SpriteState}         state     Target State\r\n\t * @param  {number}              duration  Duration in milliseconds\r\n\t * @param  {(number) => number}  easing    Easing function\r\n\t * @return {Animation}                     Transition Animation\r\n\t */\r\n\tprotected transitTo(state: SpriteState<this[\"_properties\"], this[\"_adapter\"]>, duration: number, easing?: (value: number) => number): Optional<Animation> {\r\n\t\t// Init\r\n\t\tlet options: ISpriteAnimationOptions[] = [],\r\n\t\t\tpropValues = state.allValues,\r\n\t\t\ttransition: Optional<Animation>;\r\n\r\n\t\t// todo: do this for numeric/color properties only?\r\n\t\t// @todo use state.getPropertyValue instead\r\n\t\t$object.each(propValues, (propertyName, finalValue) => {\r\n\t\t\tlet currentValue: any = (<any>this)[propertyName];\r\n\t\t\t// save current value to default state. this solves a big problem where values must be set both on sprite and default state\r\n\t\t\tif (finalValue != currentValue && this.defaultState.properties[propertyName] == undefined) {\r\n\t\t\t\tthis.defaultState.properties[propertyName] = currentValue;\r\n\t\t\t}\r\n\r\n\t\t\t//if (finalValue != currentValue && $type.hasValue(finalValue)) {\r\n\t\t\tif ($type.hasValue(finalValue)) {\r\n\t\t\t\tlet option: ISpriteAnimationOptions = { from: currentValue, to: <any>finalValue, property: propertyName };\r\n\t\t\t\toptions.push(option);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif (options.length > 0) {\r\n\t\t\ttransition = this.animate(options, duration, easing);\r\n\r\n\t\t\t// TODO should this use events.once ?\r\n\t\t\t// TODO push onto _disposers array ?\r\n\t\t\tthis._disposers.push(transition.events.on(\"animationended\", () => {\r\n\t\t\t\tthis.dispatchImmediately(\"transitionended\");\r\n\t\t\t}));\r\n\t\t}\r\n\r\n\t\t// apply filters if set\r\n\t\tif (state.filters.length > 0) {\r\n\t\t\tlet newFilters: Filter[] = [];\r\n\t\t\t// check for the same filters\r\n\t\t\t$iter.each(state.filters.iterator(), (stateFilter) => {\r\n\t\t\t\tlet newFilter: Filter = <Filter>stateFilter.clone();\r\n\t\t\t\tnewFilters.push(newFilter);\r\n\t\t\t\tlet animationOptions: IAnimationOptions[] = [];\r\n\r\n\t\t\t\t$iter.each(this.filters.iterator(), (currentFilter) => {\r\n\t\t\t\t\t// if we have the same filters\r\n\t\t\t\t\tif (currentFilter.className == newFilter.className) {\r\n\r\n\t\t\t\t\t\tif (!$iter.contains(this.defaultState.filters.iterator(), (x) => x.className === newFilter.className)) {\r\n\t\t\t\t\t\t\tthis.defaultState.filters.push(currentFilter);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t$object.each(newFilter.properties, (propertyName, newValue) => {\r\n\t\t\t\t\t\t\tlet currentValue = (<any>currentFilter).properties[propertyName];\r\n\t\t\t\t\t\t\t// if values are not the same, push to animation options array\r\n\t\t\t\t\t\t\tif (currentValue != newValue) {\r\n\t\t\t\t\t\t\t\tanimationOptions.push({ property: propertyName, from: currentValue, to: newValue });\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t// animate to new value\r\n\t\t\t\tnewFilter.animate(animationOptions, duration, easing);\r\n\t\t\t});\r\n\t\t\tthis.filters.clear();\r\n\t\t\tthis.filters.pushAll(newFilters);\r\n\t\t}\r\n\r\n\t\treturn transition;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns `true` if Sprite is currently transiting from one state/value to\r\n\t * another.\r\n\t *\r\n\t * @return {boolean} Is in transition?\r\n\t */\r\n\tpublic isInTransition(): boolean {\r\n\t\treturn this.animations.length > 0;\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates if this element has a mouse pointer currently hovering\r\n\t * over it, or if it has any touch pointers pressed on it.\r\n\t *\r\n\t * @param {boolean} value Is hovered?\r\n\t */\r\n\tpublic set isHover(value: boolean) {\r\n\t\tvalue = $type.toBoolean(value);\r\n\t\tif (value !== this.isHover) {\r\n\t\t\tthis.interactions.isHover = value;\r\n\t\t\tif (value) {\r\n\t\t\t\tthis.handleOver();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.handleOut();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Retruns indicator if this element has a mouse pointer currently hovering\r\n\t * over it, or if it has any touch pointers pressed on it.\r\n\t *\r\n\t * @return {boolean} Is hovered?\r\n\t */\r\n\tpublic get isHover(): boolean {\r\n\t\treturn this.interactions.isHover;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns indicator if this element is being dragged at the moment.\r\n\t *\r\n\t * @return {boolean} Is dragged?\r\n\t */\r\n\tpublic get isDragged(): boolean {\r\n\t\treturn this._isDragged;\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates if this element has any pointers (mouse or touch) pressing down\r\n\t * on it.\r\n\t *\r\n\t * @param {boolean} value Is down?\r\n\t */\r\n\tpublic set isDown(value: boolean) {\r\n\t\tvalue = $type.toBoolean(value);\r\n\t\tif (this.isDown != value) {\r\n\t\t\tthis.interactions.isDown = value;\r\n\t\t\tif (value) {\r\n\t\t\t\tthis.handleDown();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.handleUp();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Is down?\r\n\t */\r\n\tpublic get isDown(): boolean {\r\n\t\treturn this.interactions.isDown;\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates if this element is focused (possibly by tab navigation).\r\n\t *\r\n\t * @param {boolean} value Is focused?\r\n\t */\r\n\tpublic set isFocused(value: boolean) {\r\n\t\tvalue = $type.toBoolean(value);\r\n\t\tif (this.focusable && this.isFocused != value) {\r\n\t\t\tthis.interactions.isFocused = value;\r\n\t\t\tif (value === true) {\r\n\t\t\t\tthis.handleFocus();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.handleBlur();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Is focused?\r\n\t */\r\n\tpublic get isFocused(): boolean {\r\n\t\treturn this.interactions.isFocused;\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates if this element is currently active (toggled on) or not\r\n\t * (toggled off).\r\n\t *\r\n\t * @param {boolean} value Is active?\r\n\t */\r\n\tpublic set isActive(value: boolean) {\r\n\t\tvalue = $type.toBoolean(value);\r\n\t\tif (this._isActive !== value) {\r\n\t\t\tthis._isActive = value;\r\n\t\t\tif (value && this.states.hasKey(\"active\")) {\r\n\t\t\t\tthis.setState(\"active\");\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.applyCurrentState();\r\n\t\t\t}\r\n\r\n\t\t\tthis.dispatchImmediately(\"toggled\");\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Is active?\r\n\t */\r\n\tpublic get isActive(): boolean {\r\n\t\treturn this._isActive;\r\n\t}\r\n\r\n\t/**\r\n\t * Controls if element is disabled.\r\n\t *\r\n\t * A disabled element is hidden, and is removed from any processing, layout\r\n\t * calculations, and generally treated like if it does not existed.\r\n\t *\r\n\t * The element itself is not destroyed, though. Setting this back to `false`,\r\n\t * will \"resurrect\" the element.\r\n\t *\r\n\t * @param {boolean}  value  Disabled?\r\n\t */\r\n\tpublic set disabled(value: boolean) {\r\n\t\tthis.setDisabled(value);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Disabled?\r\n\t */\r\n\tpublic get disabled(): boolean {\r\n\t\t//if(this._internalDisabled){\r\n\t\t//\treturn true;\r\n\t\t//}\r\n\t\tlet current = this.getPropertyValue(\"disabled\");\r\n\t\tif ($type.hasValue(current)) {\r\n\t\t\treturn current;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (this.parent) {\r\n\t\t\t\treturn this.parent.disabled;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tprotected setDisabled(value: boolean) {\r\n\t\tvalue = $type.toBoolean(value);\r\n\t\tlet current = this.getPropertyValue(\"disabled\");\r\n\t\tif (current != value) {\r\n\t\t\tthis.setPropertyValue(\"disabled\", value, true);\r\n\t\t\tif (value) {\r\n\t\t\t\tthis.parent = this.parent;\r\n\t\t\t\tthis.removeFromInvalids();\r\n\t\t\t\tthis.group.attr({ \"display\": \"none\" });\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (this instanceof Container) {\r\n\t\t\t\t\tthis.deepInvalidate();\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.invalidate();\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.__disabled) {\r\n\t\t\t\t\tthis.removeSVGAttribute(\"display\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.dispatch(\"transformed\");\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\t/**\r\n\t * Internal disable method.\r\n\t *\r\n\t * Do not use it for disabling elements. Use `disabled` accessor instead.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {boolean} value Disabled?\r\n\t */\r\n\tpublic set __disabled(value: boolean) {\r\n\t\tif (this._internalDisabled != value) {\r\n\t\t\tthis._internalDisabled = value;\r\n\r\n\t\t\tif (value) {\r\n\t\t\t\tthis.group.attr({ \"display\": \"none\" })\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (!this.disabled) {\r\n\t\t\t\t\tthis.removeSVGAttribute(\"display\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * ==========================================================================\r\n\t * FORMATTERS AND OTHER EXTERNAL HELPERS\r\n\t * ==========================================================================\r\n\t * @hidden\r\n\t */\r\n\r\n\t/**\r\n\t * A [[NumberFormatter]] instance.\r\n\t *\r\n\t * This is used to format numbers.\r\n\t *\r\n\t * ```TypeScript\r\n\t * chart.numberFormatter.numberFormat = \"#,###.#####\";\r\n\t * ```\r\n\t * ```JavaScript\r\n\t * chart.numberFormatter.numberFormat = \"#,###.#####\";\r\n\t * ```\r\n\t * ```JSON\r\n\t * {\r\n\t *   // ...\r\n\t *   \"numberFormatter\": {\r\n\t *     \"numberFormat\": \"#,###.#####\"\r\n\t *   }\r\n\t * }\r\n\t * ```\r\n\t *\r\n\t * You can set a separate instance of formatter for each\r\n\t * individual element. However that would be unnecessary overhead as\r\n\t * all elements would automatically inherit formatter from their parents,\r\n\t * all the way up to the chart itself.\r\n\t *\r\n\t *\r\n\t * @see {@link NumberFormatter} for more info on formatting numbers\r\n\t * @param {NumberFormatter}  value  An instance of NumberFormatter\r\n\t */\r\n\tpublic set numberFormatter(value: NumberFormatter) {\r\n\t\tthis._numberFormatter = value;\r\n\t\tthis._numberFormatter.language = this.language;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {NumberFormatter} A [[NumberFormatter]] instance to be used\r\n\t */\r\n\tpublic get numberFormatter(): NumberFormatter {\r\n\t\tif (this._numberFormatter) {\r\n\t\t\treturn this._numberFormatter;\r\n\t\t}\r\n\t\telse if (this.parent) {\r\n\t\t\treturn this.parent.numberFormatter;\r\n\t\t}\r\n\t\tthis._numberFormatter = new NumberFormatter();\r\n\t\tthis._numberFormatter.language = this.language;\r\n\t\treturn this.numberFormatter;\r\n\t}\r\n\r\n\t/**\r\n\t * A [[DateFormatter]] instance.\r\n\t *\r\n\t * This is used to format dates, e.g. on a date axes, balloons, etc.\r\n\t *\r\n\t * ```TypeScript\r\n\t * chart.dateFormatter.dateFormat = \"yyyy-MM-dd\";\r\n\t * ```\r\n\t * ```JavaScript\r\n\t * chart.dateFormatter.dateFormat = \"yyyy-MM-dd\";\r\n\t * ```\r\n\t * ```JSON\r\n\t * {\r\n\t *   // ...\r\n\t *   \"dateFormatter\": {\r\n\t *     \"dateFormat\": \"yyyy-MM-dd\"\r\n\t *   }\r\n\t * }\r\n\t * ```\r\n\t *\r\n\t * You can set a separate instance of formatter for each\r\n\t * individual element. However that would be unnecessary overhead as\r\n\t * all elements would automatically inherit formatter from their parents,\r\n\t * all the way up to the chart itself.\r\n\t *\r\n\t * @see {@link DateFormatter} for more info on dates formatting\r\n\t * @param {DateFormatter}  value  An instance of DateFormatter\r\n\t */\r\n\tpublic set dateFormatter(value: DateFormatter) {\r\n\t\tthis._dateFormatter = value;\r\n\t\tthis._dateFormatter.language = this.language;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {DateFormatter} An instance of DateFormatter\r\n\t */\r\n\tpublic get dateFormatter(): DateFormatter {\r\n\t\tif (this._dateFormatter) {\r\n\t\t\treturn this._dateFormatter;\r\n\t\t}\r\n\t\telse if (this.parent) {\r\n\t\t\treturn this.parent.dateFormatter;\r\n\t\t}\r\n\t\tthis._dateFormatter = new DateFormatter();\r\n\t\tthis._dateFormatter.language = this.language;\r\n\t\treturn this.dateFormatter;\r\n\t}\r\n\r\n\t/**\r\n\t * A [[DurationFormatter]] instance.\r\n\t *\r\n\t * This is used to format numbers as durations, e.g. on a value axes.\r\n\t *\r\n\t * You can set a separate instance of formatter for each\r\n\t * individual element. However that would be unnecessary overhead as\r\n\t * all elements would automatically inherit formatter from their parents,\r\n\t * all the way up to the chart itself.\r\n\t *\r\n\t * @see {@link DurationFormatter} for more info on durations\r\n\t * @param {DurationFormatter}  value  An instance of DurationFormatter\r\n\t */\r\n\tpublic set durationFormatter(value: DurationFormatter) {\r\n\t\tthis._durationFormatter = value;\r\n\t\tthis._durationFormatter.language = this.language;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {DurationFormatter} An instance of DurationFormatter\r\n\t */\r\n\tpublic get durationFormatter(): DurationFormatter {\r\n\t\tif (this._durationFormatter) {\r\n\t\t\treturn this._durationFormatter;\r\n\t\t}\r\n\t\telse if (this.parent) {\r\n\t\t\treturn this.parent.durationFormatter;\r\n\t\t}\r\n\t\tthis._durationFormatter = new DurationFormatter();\r\n\t\tthis._durationFormatter.language = this.language;\r\n\t\treturn this.durationFormatter;\r\n\t}\r\n\r\n\t/**\r\n\t * A [[Language]] instance to use for translations.\r\n\t *\r\n\t * Normally it is enough to set language for the top-most element - chart.\r\n\t *\r\n\t * All other element child elements will automatically re-use that language\r\n\t * object.\r\n\t *\r\n\t * @param {Language}  value  An instance of Language\r\n\t */\r\n\tpublic set language(value: Language) {\r\n\t\tif (this._language.get() !== value) {\r\n\t\t\tthis._language.set(value, value.events.on(\"localechanged\", (ev) => {\r\n\t\t\t\tif (this instanceof Container) {\r\n\t\t\t\t\tthis.deepInvalidate();\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Language} An instance of Language\r\n\t */\r\n\tpublic get language(): Language {\r\n\t\tlet language = this._language.get();\r\n\t\tif (language) {\r\n\t\t\treturn language;\r\n\t\t}\r\n\t\telse if (this.parent) {\r\n\t\t\treturn this.parent.language;\r\n\t\t}\r\n\t\tlanguage = new Language();\r\n\t\tthis.language = language;\r\n\t\treturn language;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * ==========================================================================\r\n\t * DATA-RELATED STUFF\r\n\t * ==========================================================================\r\n\t * @hidden\r\n\t */\r\n\r\n\t/**\r\n\t * Parses the string for meta tags `{tag}` and replaces them with a real\r\n\t * value. Supports straight up tags referring to the field in data, i.e.\r\n\t * `{value}` or tags with additional formatting info. E.g.:\r\n\t *\r\n\t * ```Text\r\n\t * {myfield.formatDate(\"yyyy-MM-dd\")}\r\n\t * {myfield.formatDate()}\r\n\t * {myfield.formatNumber(\"#,####.00\")}\r\n\t * {myfield.formatNumber()}\r\n\t * {myField.formatDuration(\"mm:ss\")}\r\n\t * ```\r\n\t *\r\n\t * Etc.\r\n\t *\r\n\t * This method Will automatically detect and use proper formatter for the\r\n\t * value.\r\n\t *\r\n\t * The source value will be looked up in various places: (in order)\r\n\t * * Sprite's own `dataItem`\r\n\t * * Sprite's properties\r\n\t * * Parent's `dataItem`\r\n\t * * Parent's properties\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {string}    string            A string to format\r\n\t * @param  {DataItem}  dataItem          DataItem\r\n\t * @return {string}                      Formatted string\r\n\t */\r\n\r\n\tpublic populateString(string: string, dataItem?: DataItem): string {\r\n\t\tif ($type.hasValue(string)) {\r\n\t\t\tstring = $type.castString(string);\r\n\t\t\tlet tags = string.match(/\\{([^}]+)\\}/g);\r\n\t\t\tlet i;\r\n\t\t\tif (tags) {\r\n\t\t\t\tfor (i = 0; i < tags.length; i++) {\r\n\t\t\t\t\tlet tag = tags[i].replace(/\\{([^}]+)\\}/, \"$1\");\r\n\t\t\t\t\tlet value = this.getTagValue(tag, \"\", dataItem);\r\n\r\n\t\t\t\t\tif (!$type.hasValue(value)) {\r\n\t\t\t\t\t\tvalue = \"\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tstring = string.split(tags[i]).join(value);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tstring = \"\";\r\n\t\t}\r\n\t\treturn string;\r\n\t}\r\n\r\n\t/**\r\n\t * Gets the value from data item and formats it according to specified format.\r\n\t *\r\n\t * If `format` is specified, it will use its contents to choose formatter for\r\n\t * the value. Otherwise it will select formatter accordingly to actual value\r\n\t * type.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Ability to force certain formatter on known numeric and date values\r\n\t * @see {@link NumberFormatter}\r\n\t * @see {@link DateFormatter}\r\n\t * @see {@link DurationFormatter}\r\n\t * @param  {string}    tagName           Tag name to replace\r\n\t * @param  {string}    format            Format to use\r\n\t * @param  {DataItem}  dataItem          DataItem\r\n\t * @return {string}                      Formatted value\r\n\t */\r\n\tpublic getTagValue(tagName: string, format?: string, dataItem?: DataItem): string {\r\n\t\tlet value: any;\r\n\t\tif (!$type.hasValue(dataItem)) {\r\n\t\t\tdataItem = this.dataItem;\r\n\t\t}\r\n\r\n\t\t// Parse parts\r\n\t\tlet parts: any[] = [];\r\n\t\tlet reg = /([^.]+)\\(([^)]*)\\)|([^.]+)/g;;\r\n\t\tlet matches;\r\n\t\twhile ((matches = reg.exec(tagName)) !== null) {\r\n\t\t\tif (matches[3]) {\r\n\t\t\t\t// Simple property\r\n\t\t\t\tparts.push({\r\n\t\t\t\t\tprop: matches[3]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// Method\r\n\t\t\t\t// Parse parameters\r\n\t\t\t\tlet params: any[] = [];\r\n\t\t\t\tif ($utils.trim(matches[2]) != \"\") {\r\n\t\t\t\t\tlet reg2 = /'([^']*)'|\"([^\"]*)\"|([0-9\\-]+)/g;\r\n\t\t\t\t\tlet matches2;\r\n\t\t\t\t\twhile ((matches2 = reg2.exec(matches[2])) !== null) {\r\n\t\t\t\t\t\tparams.push(matches2[1] || matches2[2] || matches2[3])\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tparts.push({\r\n\t\t\t\t\tmethod: matches[1],\r\n\t\t\t\t\tparams: params\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t// Check if we can retrieve the value from data item\r\n\t\tif (dataItem) {\r\n\r\n\t\t\t// Check values\r\n\t\t\tvalue = this.getTagValueFromObject(parts, dataItem.values);\r\n\r\n\t\t\t// Check properties\r\n\t\t\tif (!$type.hasValue(value) || $type.isObject(value)) { // isObject helps to solve problem with date axis, as for example dateX will get dateX from values object and wont't get to the dateX date.\r\n\t\t\t\tvalue = this.getTagValueFromObject(parts, dataItem);\r\n\t\t\t}\r\n\r\n\t\t\t// Check data context\r\n\t\t\tlet dataContext: any = dataItem.dataContext;\r\n\t\t\tif (!$type.hasValue(value) && dataContext) {\r\n\t\t\t\tvalue = this.getTagValueFromObject(parts, dataItem.dataContext);\r\n\r\n\t\t\t\t// scond data context level sometimes exist (tree map)\r\n\t\t\t\tif (!$type.hasValue(value) && dataContext.dataContext) {\r\n\t\t\t\t\tvalue = this.getTagValueFromObject(parts, dataContext.dataContext);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Check component's data item\r\n\t\t\tif (!$type.hasValue(value) && dataItem.component && dataItem.component.dataItem !== dataItem) {\r\n\t\t\t\tvalue = dataItem.component.getTagValue(tagName, format);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Check sprite's properties\r\n\t\tif (!$type.hasValue(value)) {\r\n\t\t\tvalue = this.getTagValueFromObject(parts, this);\r\n\t\t}\r\n\r\n\t\t// Finally, check the parent\r\n\t\tif (!$type.hasValue(value) && this.parent) {\r\n\t\t\tvalue = this.parent.getTagValue(tagName, format);\r\n\t\t}\r\n\r\n\t\treturn value;\r\n\t}\r\n\r\n\t/**\r\n\t * Tries to retrieve values from properties of any object, then applies\r\n\t * proper formatting to it.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description (improve)\r\n\t * @param  {any[]}   parts   Properties ant methods to access\r\n\t * @param  {any}     object  Source object\r\n\t * @param  {string}  format  A specific format to apply\r\n\t * @return {any}             Formatted value\r\n\t */\r\n\tpublic getTagValueFromObject(parts: any[], object: any, format?: string): any {\r\n\t\tlet current: any = object;\r\n\t\tlet formatApplied = false;\r\n\t\tfor (let i = 0, len = parts.length; i < len; i++) {\r\n\t\t\tlet part = parts[i];\r\n\t\t\tif (part.prop) {\r\n\t\t\t\t// Regular property\r\n\t\t\t\tcurrent = current[part.prop];\r\n\t\t\t\tif (!$type.hasValue(current)) {\r\n\t\t\t\t\t// Not set, return undefined\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// Method\r\n\t\t\t\tswitch (part.method) {\r\n\t\t\t\t\tcase \"formatNumber\":\r\n\t\t\t\t\t\tcurrent = this.numberFormatter.format(\r\n\t\t\t\t\t\t\t$utils.anyToNumber(current),\r\n\t\t\t\t\t\t\tformat || part.params[0] || undefined\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tformatApplied = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"formatDate\":\r\n\t\t\t\t\t\tcurrent = this.dateFormatter.format(\r\n\t\t\t\t\t\t\t$utils.anyToDate(current),\r\n\t\t\t\t\t\t\tformat || part.params[0] || undefined\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tformatApplied = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"formatDuration\":\r\n\t\t\t\t\t\tcurrent = this.durationFormatter.format(\r\n\t\t\t\t\t\t\t$utils.anyToNumber(current),\r\n\t\t\t\t\t\t\tformat || part.params[0] || undefined,\r\n\t\t\t\t\t\t\tpart.params[1] || undefined\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tformatApplied = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tif (current[part.method]) {\r\n\t\t\t\t\t\t\tcurrent[part.method].apply(this, part.params);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Apply default format if it wasn't applied explicitly\r\n\t\tif (!formatApplied) {\r\n\r\n\t\t\tlet formatParts = [{\r\n\t\t\t\tmethod: \"\",\r\n\t\t\t\tparams: format\r\n\t\t\t}];\r\n\r\n\t\t\tif (!$type.hasValue(format)) {\r\n\r\n\t\t\t\t// Format is not set\r\n\t\t\t\t// Determine from the type of the value\r\n\t\t\t\tif ($type.isNumber(current)) {\r\n\t\t\t\t\tformatParts[0].method = \"formatNumber\";\r\n\t\t\t\t\tformatParts[0].params = \"\";\r\n\t\t\t\t}\r\n\t\t\t\telse if ($type.isDate(current)) {\r\n\t\t\t\t\tformatParts[0].method = \"formatDate\";\r\n\t\t\t\t\tformatParts[0].params = \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\telse {\r\n\r\n\t\t\t\t// Format set\r\n\t\t\t\t// Try to determine formatter based on the format\r\n\t\t\t\tlet formatterType: string = $utils.getFormat(format);\r\n\r\n\t\t\t\t// format\r\n\t\t\t\tif (formatterType === $strings.NUMBER) {\r\n\t\t\t\t\tformatParts[0].method = \"formatNumber\";\r\n\t\t\t\t}\r\n\t\t\t\telse if (formatterType === $strings.DATE) {\r\n\t\t\t\t\tformatParts[0].method = \"formatDate\";\r\n\t\t\t\t}\r\n\t\t\t\telse if (formatterType === $strings.DURATION) {\r\n\t\t\t\t\tformatParts[0].method = \"formatDuration\";\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Apply format\r\n\t\t\tif (formatParts[0].method) {\r\n\t\t\t\tcurrent = this.getTagValueFromObject(formatParts, current);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn current;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * A [[DataItem]] to use as element's data source.\r\n\t *\r\n\t * @todo Review type\r\n\t * @param {this[\"_dataItem\"]}  dataItem  DataItem\r\n\t */\r\n\tpublic set dataItem(dataItem: this[\"_dataItem\"]) {\r\n\t\t//an not use this[\"_dataItem\"] here, as we return parent data item if this sprite doesn't have one.\r\n\t\t// @todo:think about it\r\n\t\tthis.setDataItem(dataItem);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {this} [[DataItem]]\r\n\t */\r\n\tpublic get dataItem(): this[\"_dataItem\"] {\r\n\t\tif (!this._dataItem) {\r\n\t\t\tif (this.parent) {\r\n\t\t\t\treturn this.parent.dataItem;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this._dataItem;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets currently used [[DataItem]].\r\n\t *\r\n\t * If the element has also `configField` set, it will also look for any\r\n\t * config in DataItem's data context to apply to this element.\r\n\t *\r\n\t * @param {DataItem} dataItem DataItem\r\n\t */\r\n\tprotected setDataItem(dataItem: DataItem) {\r\n\t\tif (this._dataItem != dataItem) {\r\n\t\t\tthis._dataItem = dataItem;\r\n\r\n\t\t\tif (this.configField) {\r\n\t\t\t\tif (dataItem.dataContext) {\r\n\t\t\t\t\tthis.config = (<any>dataItem.dataContext)[this.configField];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet dataContext = <any>dataItem.dataContext;\r\n\r\n\t\t\tif (dataContext) {\r\n\t\t\t\tfor (let propertyName in this.propertyFields) {\r\n\t\t\t\t\tlet fieldValue = this.propertyFields[propertyName];\r\n\t\t\t\t\tif ($type.hasValue(dataContext[fieldValue])) {\r\n\t\t\t\t\t\tlet anyThis = <any>this;\r\n\t\t\t\t\t\tanyThis[propertyName] = dataContext[fieldValue];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.invalidate();\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * ==========================================================================\r\n\t * PROPERTY UTILITIES\r\n\t * ==========================================================================\r\n\t * @hidden\r\n\t */\r\n\r\n\t/**\r\n\t * Returns element's property value.\r\n\t *\r\n\t * Will check if there are any bindings with [[DataItem]].\r\n\t *\r\n\t * Will also apply any adapters bound to `propertyName`.\r\n\t *\r\n\t * @param  {ISpriteProperties}  propertyName  Property name\r\n\t * @return {any}                              Property value\r\n\t */\r\n\tpublic getPropertyValue(propertyName: keyof this[\"_properties\"]): any {\r\n\t\tlet propValue = this.properties[propertyName];\r\n\t\t// Apply adapter\r\n\t\t// @todo get rid of <any>\r\n\t\tif (!this.isTemplate) {\r\n\t\t\tpropValue = this.adapter.apply(<any>propertyName, propValue);\r\n\t\t}\r\n\r\n\t\treturn propValue;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets elements's property value. Will also propagate the same property value\r\n\t * on all element's clones.\r\n\t *\r\n\t * @param  {this[\"_properties\"]}  property    Property\r\n\t * @param  {any}                  value       Value\r\n\t * @param  {boolean}              invalidate  Should the sprite be invalidated, cause it's re-rendering\r\n\t * @param  {boolean}              transform   Re-apply positioning of the element\r\n\t * @return {boolean}                          Did the value change? It will return `true` if the new value and the old value of the property are not the same\r\n\t * @todo Review propagation to clones. Right now we simply check if clone is disposed before setting the same property on it. It's better to remove from clone list altogether.\r\n\t */\r\n\tpublic setPropertyValue<Key extends keyof this[\"properties\"]>(property: Key, value: any, invalidate?: boolean, transform?: boolean): boolean {\r\n\t\tlet currentValue = this.properties[property];\r\n\t\tif (this.properties[property] !== value) {\r\n\r\n\t\t\t//@todo: create some method like setPercentPropertyValue to save some cpu\r\n\t\t\tif (value instanceof Percent && currentValue instanceof Percent && value.value == currentValue.value) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tthis.properties[property] = value;\r\n\r\n\t\t\tif (this.events.isEnabled(\"propertychanged\")) {\r\n\t\t\t\tconst event: AMEvent<this, ISpriteEvents>[\"propertychanged\"] = {\r\n\t\t\t\t\ttype: \"propertychanged\",\r\n\t\t\t\t\ttarget: this,\r\n\t\t\t\t\tproperty: <string>property\r\n\t\t\t\t};\r\n\t\t\t\tthis.events.dispatchImmediately(\"propertychanged\", event);\r\n\t\t\t}\r\n\r\n\t\t\tif (invalidate) {\r\n\t\t\t\tthis.invalidate();\r\n\t\t\t}\r\n\t\t\t// else, as both applySVGAttr and transform is done after invalidation.\r\n\t\t\telse {\r\n\t\t\t\tif (transform) {\r\n\t\t\t\t\tthis.invalidatePosition();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (this.applyOnClones) {\r\n\t\t\t\tconst clones = this.clones.values;\r\n\t\t\t\tconst length = clones.length;\r\n\r\n\t\t\t\tfor (let i = 0; i < length; ++i) {\r\n\t\t\t\t\tconst clone = clones[i];\r\n\r\n\t\t\t\t\tif (!clone.isDisposed()) {\r\n\t\t\t\t\t\t//(<Sprite>clone).setPropertyValue(<any>property, value, invalidate, transform);\r\n\t\t\t\t\t\t(<any>clone)[property] = value;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore Exclude from docs\r\n\t * @todo Verify this\r\n\t */\r\n\tpublic bind<\r\n\t\tS extends { cloneId: string, events: EventDispatcher<{ propertychanged: { property: string } }> },\r\n\t\tFrom extends (keyof S & keyof this),\r\n\t\tTo extends keyof this\r\n\t\t>(\r\n\t\t\tproperty: To,\r\n\t\t\tsource: S,\r\n\t\t\tbindToProperty: From,\r\n\t\t\tmodifier?: (value: this[From]) => this[To]\r\n\t\t): void;\r\n\tpublic bind<\r\n\t\tS extends { cloneId: string, events: EventDispatcher<{ propertychanged: { property: string } }> },\r\n\t\tKey extends (keyof S & keyof this)\r\n\t\t>(\r\n\t\t\tproperty: Key,\r\n\t\t\tsource: S,\r\n\t\t\tmodifier?: (value: this[Key]) => this[Key]\r\n\t\t): void;\r\n\tpublic bind<\r\n\t\tS extends this & { cloneId: string, events: EventDispatcher<{ propertychanged: { property: string } }> },\r\n\t\tKey extends (keyof S & keyof this)\r\n\t\t>(\r\n\t\t\tproperty: Key,\r\n\t\t\tsource: S,\r\n\t\t\tbindToProperty: Key = property,\r\n\t\t\tmodifier?: (value: this[Key]) => this[Key]\r\n\t\t): void {\r\n\t\tif ($type.hasValue(this._bindings[<string>property])) {\r\n\t\t\tthis._bindings[<string>property].dispose();\r\n\t\t}\r\n\r\n\t\t// set current value\r\n\t\tthis[property] = source[bindToProperty];\r\n\r\n\t\t//source.addEventListener(AMEvent.PROPERTY_CHANGED, this.handleBindings, false, this);\r\n\t\tthis._bindings[<string>property] = source.events.on(\"propertychanged\", (event) => {\r\n\t\t\tif (event.property === bindToProperty) {\r\n\t\t\t\tlet value: this[Key] = source[bindToProperty];\r\n\r\n\t\t\t\tif (modifier) {\r\n\t\t\t\t\tvalue = modifier(value);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// TODO clonesById\r\n\t\t\t\tthis[property] = value;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Sets up and obeserver function to monitor changes in particular property\r\n\t * or properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param   {string | string[]}  property  Element's property name\r\n\t * @param   {function}           listener  Handler function\r\n\t * @param   {C}                  context   Context for handler function\r\n\t * @returns {IDisposer}                    Event Disposer\r\n\t */\r\n\tpublic observe<C>(property: string | string[], listener: (this: C, event: AMEvent<Sprite, ISpriteEvents>[\"propertychanged\"]) => void, context?: C): IDisposer {\r\n\t\treturn new MultiDisposer($array.map($array.toArray(property), (prop) => {\r\n\t\t\treturn this.events.on(\"propertychanged\", (e) => {\r\n\t\t\t\tif (e.property === prop) {\r\n\t\t\t\t\tlistener.call(context, e);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}));\r\n\t}\r\n\r\n\t/**\r\n\t * ==========================================================================\r\n\t * ACCESSIBILITY-RELATED PROPERTIES\r\n\t * ==========================================================================\r\n\t * @hidden\r\n\t */\r\n\r\n\t/**\r\n\t * Applies accessibility to the SVG element.\r\n\t *\r\n\t * Adds `<title>` and `<description>` elements as well as `aria-labelledby`\r\n\t * and `role` properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tprotected applyAccessibility(): void {\r\n\r\n\t\t// Check if we need to add label and description\r\n\t\tlet title = this.readerTitle,\r\n\t\t\tdescription = this.readerDescription,\r\n\t\t\trole = this.role,\r\n\t\t\thidden = this.readerHidden,\r\n\t\t\tchecked = this.readerChecked,\r\n\t\t\tcontrols = this.readerControls,\r\n\t\t\tlive = this.readerLive;\r\n\r\n\t\t// Init label/describe ids\r\n\t\tlet labelledByIds: string[] = [],\r\n\t\t\tdescribedByIds: string[] = [];\r\n\r\n\t\tlet labelledBy: string = this.readerLabelledBy;\r\n\t\tif (labelledBy) {\r\n\t\t\tlabelledByIds.push(labelledBy);\r\n\t\t}\r\n\r\n\t\tlet describedBy: string = this.readerDescribedBy;\r\n\t\tif (describedBy) {\r\n\t\t\tdescribedByIds.push(describedBy);\r\n\t\t}\r\n\r\n\t\t// If we have only label, we use `aria-label` attribute.\r\n\t\t// If there are both label and description, we'll go with separate tags and\r\n\t\t// use `aria-labelledby`\r\n\t\tif (title && !description && !this.showSystemTooltip) {\r\n\r\n\t\t\t// Only label is set, use attribute\r\n\t\t\tthis.setSVGAttribute({\r\n\t\t\t\t\"aria-label\": title\r\n\t\t\t});\r\n\r\n\t\t\t// Remove previous elements\r\n\t\t\tthis.removeSVGAttribute(\"aria-description\");\r\n\t\t\tif (this._titleElement) {\r\n\t\t\t\tthis.group.removeElement(this._titleElement);\r\n\t\t\t\tthis._titleElement = undefined;\r\n\t\t\t}\r\n\t\t\tif (this._descriptionElement) {\r\n\t\t\t\tthis.group.removeElement(this._descriptionElement);\r\n\t\t\t\tthis._descriptionElement = undefined;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\telse {\r\n\r\n\t\t\tif (title) {\r\n\t\t\t\tlet titleElement = this.titleElement;\r\n\t\t\t\tlet titleId = this.uid + \"-title\";\r\n\t\t\t\tif (titleElement.node.textContent != title) {\r\n\t\t\t\t\ttitleElement.node.textContent = title;\r\n\t\t\t\t\ttitleElement.attr({ id: titleId });\r\n\t\t\t\t}\r\n\t\t\t\tlabelledByIds.push(titleId);\r\n\t\t\t}\r\n\t\t\telse if (this._titleElement) {\r\n\t\t\t\tthis.group.removeElement(this._titleElement);\r\n\t\t\t\tthis._titleElement = undefined;\r\n\t\t\t}\r\n\r\n\t\t\tif (description) {\r\n\t\t\t\tlet descriptionElement = this.descriptionElement;\r\n\t\t\t\tlet descriptionId = this.uid + \"-description\";\r\n\t\t\t\tif (descriptionElement.node.textContent != description) {\r\n\t\t\t\t\tdescriptionElement.node.textContent = description;\r\n\t\t\t\t\tdescriptionElement.attr({ id: descriptionId });\r\n\t\t\t\t}\r\n\t\t\t\tlabelledByIds.push(descriptionId);\r\n\t\t\t}\r\n\t\t\telse if (this._descriptionElement) {\r\n\t\t\t\tthis.group.removeElement(this._descriptionElement);\r\n\t\t\t\tthis._descriptionElement = undefined;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Add label and described properties\r\n\t\tif (labelledByIds.length) {\r\n\t\t\tthis.setSVGAttribute({ \"aria-labelledby\": labelledByIds.join(\" \") });\r\n\t\t}\r\n\t\tif (describedByIds.length) {\r\n\t\t\tthis.setSVGAttribute({ \"aria-describedby\": describedByIds.join(\" \") });\r\n\t\t}\r\n\r\n\t\t// Apply role\r\n\t\tif (role) {\r\n\t\t\tthis.setSVGAttribute({ \"role\": role });\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.removeSVGAttribute(\"role\");\r\n\t\t}\r\n\r\n\t\t// Apply aria-hidden\r\n\t\tif (hidden) {\r\n\t\t\tthis.setSVGAttribute({ \"aria-hidden\": \"true\" });\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.removeSVGAttribute(\"aria-hidden\");\r\n\t\t}\r\n\r\n\t\t// Apply aria-checked\r\n\t\tif (checked) {\r\n\t\t\tthis.setSVGAttribute({ \"aria-checked\": \"true\" });\r\n\t\t}\r\n\t\telse if (checked === false) {\r\n\t\t\tthis.setSVGAttribute({ \"aria-checked\": \"false\" });\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.removeSVGAttribute(\"aria-checked\");\r\n\t\t}\r\n\r\n\t\t// Apply aria-controls\r\n\t\tif (controls) {\r\n\t\t\tthis.setSVGAttribute({ \"aria-controls\": controls });\r\n\t\t} else {\r\n\t\t\tthis.removeSVGAttribute(\"aria-controls\");\r\n\t\t}\r\n\r\n\t\t// Apply aria-live\r\n\t\tif (live) {\r\n\t\t\tthis.setSVGAttribute({ \"aria-live\": live });\r\n\t\t} else {\r\n\t\t\tthis.removeSVGAttribute(\"aria-live\");\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Screen reader title of the element.\r\n\t *\r\n\t * @param {string} value Title\r\n\t */\r\n\tpublic set readerTitle(value: string) {\r\n\t\tvalue = $type.toText(value);\r\n\t\tif (this.setPropertyValue(\"readerTitle\", value)) {\r\n\t\t\tthis.applyAccessibility();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {string} Title\r\n\t */\r\n\tpublic get readerTitle(): string {\r\n\t\treturn this.getPropertyValue(\"readerTitle\");\r\n\t}\r\n\r\n\t/**\r\n\t * Screen reader description of the element.\r\n\t *\r\n\t * @param {string} value Description\r\n\t */\r\n\tpublic set readerDescription(value: string) {\r\n\t\tvalue = $type.toText(value);\r\n\t\tif (this.setPropertyValue(\"readerDescription\", value)) {\r\n\t\t\tthis.applyAccessibility();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {string} Description\r\n\t */\r\n\tpublic get readerDescription(): string {\r\n\t\treturn this.getPropertyValue(\"readerDescription\");\r\n\t}\r\n\r\n\t/**\r\n\t * A WAI-ARIA role for the element.\r\n\t *\r\n\t * @see {@link https://www.w3.org/TR/wai-aria-1.1/#role_definitions} for more information on WAI-ARIA roles\r\n\t * @param {Roles}  value  Role\r\n\t */\r\n\tpublic set role(value: Roles) {\r\n\t\tvalue = <Roles>$type.toText(value);\r\n\t\tif (this.setPropertyValue(\"role\", value)) {\r\n\t\t\tthis.applyAccessibility();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Roles} Role\r\n\t */\r\n\tpublic get role(): Roles {\r\n\t\treturn this.getPropertyValue(\"role\");\r\n\t}\r\n\r\n\t/**\r\n\t * Controls if element should be hidden from screen readers.\r\n\t *\r\n\t * @see {@link https://www.w3.org/TR/wai-aria-1.1/#aria-hidden} for more information\r\n\t * @param {boolean}  value  Hidden?\r\n\t */\r\n\tpublic set readerHidden(value: boolean) {\r\n\t\tvalue = $type.toBoolean(value);\r\n\t\tif (this.setPropertyValue(\"readerHidden\", value)) {\r\n\t\t\tthis.applyAccessibility();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Hidden?\r\n\t */\r\n\tpublic get readerHidden(): boolean {\r\n\t\treturn this.getPropertyValue(\"readerHidden\");\r\n\t}\r\n\r\n\t/**\r\n\t * Controls if element is currently marked as \"checked\".\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @see {@link https://www.w3.org/TR/wai-aria-1.1/#aria-checked} for more information\r\n\t * @param {boolean} value Checked?\r\n\t */\r\n\tpublic set readerChecked(value: boolean) {\r\n\t\tvalue = $type.toBoolean(value);\r\n\t\tif (this.setPropertyValue(\"readerChecked\", value)) {\r\n\t\t\tthis.applyAccessibility();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore Exclude from docs\r\n\t * @return {boolean} Checked?\r\n\t */\r\n\tpublic get readerChecked(): boolean {\r\n\t\treturn this.getPropertyValue(\"readerChecked\");\r\n\t}\r\n\r\n\t/**\r\n\t * A `uid` of an element this element controls.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @see {@link https://www.w3.org/TR/wai-aria-1.1/#aria-controls} for more information\r\n\t * @param {string} value Setting value\r\n\t */\r\n\tpublic set readerControls(value: string) {\r\n\t\tvalue = $type.toText(value);\r\n\t\tif (this.setPropertyValue(\"readerControls\", value)) {\r\n\t\t\tthis.applyAccessibility();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore Exclude from docs\r\n\t * @return {string} Setting value\r\n\t */\r\n\tpublic get readerControls(): string {\r\n\t\treturn this.getPropertyValue(\"readerControls\");\r\n\t}\r\n\r\n\t/**\r\n\t * Controls accessibility setting \"aria-live\" for the element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @see {@link https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Live_Regions} for more information\r\n\t * @param {AriaLive} value Setting value\r\n\t */\r\n\tpublic set readerLive(value: AriaLive) {\r\n\t\tvalue = <AriaLive>$type.toText(value);\r\n\t\tif (this.setPropertyValue(\"readerLive\", value)) {\r\n\t\t\tthis.applyAccessibility();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore Exclude from docs\r\n\t * @return {AriaLive} Setting value\r\n\t */\r\n\tpublic get readerLive(): AriaLive {\r\n\t\treturn this.getPropertyValue(\"readerLive\");\r\n\t}\r\n\r\n\t/**\r\n\t * A `uid` of an element that describes this element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @see {@link https://www.w3.org/TR/wai-aria-1.1/#aria-labelledby} for more information\r\n\t * @param {Sprite} value Target element\r\n\t */\r\n\tpublic set readerLabelledBy(value: string) {\r\n\t\tvalue = $type.toText(value);\r\n\t\tif (this.setPropertyValue(\"readerLabelledBy\", value)) {\r\n\t\t\tthis.applyAccessibility();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore Exclude from docs\r\n\t * @return {Sprite} Target element\r\n\t */\r\n\tpublic get readerLabelledBy(): string {\r\n\t\treturn this.getPropertyValue(\"readerLabelledBy\");\r\n\t}\r\n\r\n\t/**\r\n\t * A `uid` of an element that describes this element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @see {@link https://www.w3.org/TR/wai-aria-1.1/#aria-describedby} for more information\r\n\t * @param {Sprite} value Target element\r\n\t */\r\n\tpublic set readerDescribedBy(value: string) {\r\n\t\tvalue = $type.toText(value);\r\n\t\tif (this.setPropertyValue(\"readerDescribedBy\", value)) {\r\n\t\t\tthis.applyAccessibility();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore Exclude from docs\r\n\t * @return {Sprite} Target element\r\n\t */\r\n\tpublic get readerDescribedBy(): string {\r\n\t\treturn this.getPropertyValue(\"readerDescribedBy\");\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * ==========================================================================\r\n\t * USER INTERACTIONS\r\n\t * ==========================================================================\r\n\t * @hidden\r\n\t */\r\n\r\n\t/**\r\n\t * Returns elements keyboard options.\r\n\t *\r\n\t * @return {IKeyboardOptions} Keyboard options\r\n\t */\r\n\tpublic get keyboardOptions(): IKeyboardOptions {\r\n\t\tif (!this.interactions.keyboardOptions) {\r\n\t\t\tif (this.parent) {\r\n\t\t\t\treturn this.parent.keyboardOptions;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this.interactions.keyboardOptions;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns (creates if necessary) an [[InteractionObject]] associated with\r\n\t * this element.\r\n\t *\r\n\t * [[InteractionObject]] is used to attach all kinds of user-interactions to\r\n\t * the element, e.g. click/touch, dragging, hovering, and similar events.\r\n\t *\r\n\t * @return {InteractionObject} Interaction object\r\n\t */\r\n\tpublic get interactions(): InteractionObject {\r\n\t\tif (!this._interaction) {\r\n\t\t\tconst interaction = getInteraction().getInteraction(this.dom);\r\n\t\t\tthis._interaction = interaction;\r\n\t\t\tthis._interaction.clickable = this.clickable;\r\n\t\t\tthis._interaction.hoverable = this.hoverable;\r\n\t\t\tthis._interaction.trackable = this.trackable;\r\n\t\t\tthis._interaction.draggable = this.draggable;\r\n\t\t\tthis._interaction.swipeable = this.swipeable;\r\n\t\t\tthis._interaction.resizable = this.resizable;\r\n\t\t\tthis._interaction.rotatable = this.resizable;\r\n\t\t\tthis._interaction.wheelable = this.wheelable;\r\n\t\t\tthis._interaction.inert = this.inert;\r\n\t\t\tthis._disposers.push(this._interaction);\r\n\t\t}\r\n\t\treturn this._interaction;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * ==========================================================================\r\n\t * ELEMENT FOCUS-RELATED STUFF\r\n\t * ==========================================================================\r\n\t * @hidden\r\n\t */\r\n\r\n\t/**\r\n\t * Controls if the element can gain focus.\r\n\t *\r\n\t * Focusable element will be selectable via TAB key.\r\n\t *\r\n\t * Please note, clicking it with a mouse or touching will not add focus to\r\n\t * it.\r\n\t *\r\n\t * Focused element will show a system-specific highlight, which might ruin\r\n\t * the overal look. This is why we don't focus element on click/touch.\r\n\t *\r\n\t * A default setting varies for different elements. By default all elements\r\n\t * are not focusable, except certain items like buttons, legend items, etc.\r\n\t *\r\n\t * @default undefined (auto)\r\n\t * @param {Optional<boolean>}  value  Can element be focused?\r\n\t */\r\n\tpublic set focusable(value: Optional<boolean>) {\r\n\t\tvalue = $type.toBoolean(value);\r\n\t\tif (value !== this.focusable) {\r\n\t\t\tthis.setPropertyValue(\"focusable\", value);\r\n\t\t\tif (value) {\r\n\t\t\t\tthis.setSVGAttribute({ \"focusable\": value });\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.removeSVGAttribute(\"focusable\");\r\n\t\t\t}\r\n\r\n\t\t\tthis.interactions.focusable = value;\r\n\r\n\t\t\t// Set focus events that would apply \"focus\" state\r\n\t\t\tthis.interactions.setEventDisposer(\"sprite-focusable\", value, () => new MultiDisposer([\r\n\t\t\t\tthis.events.on(\"blur\", this.handleBlur, this),\r\n\t\t\t\tthis.events.on(\"focus\", this.handleFocus, this)\r\n\t\t\t]));\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Optional<boolean>} Can element be focused?\r\n\t */\r\n\tpublic get focusable(): Optional<boolean> {\r\n\t\treturn this.getPropertyValue(\"focusable\");\r\n\t}\r\n\r\n\t/**\r\n\t * Applies filters (if set) when element gains focus.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {AMEvent<Sprite, ISpriteEvents>[\"focus\"]} ev Original event\r\n\t */\r\n\tpublic handleFocus(ev?: AMEvent<Sprite, ISpriteEvents>[\"focus\"]): void {\r\n\t\tif (this.focusable) {\r\n\t\t\tif (this.topParent) {\r\n\t\t\t\tthis.topParent.hasFocused = true;\r\n\t\t\t}\r\n\t\t\tif (this.focusFilter) {\r\n\t\t\t\t// Any `filters` manipulation will trigger `applyFilters()` so we don't\r\n\t\t\t\t// need to call it here\r\n\t\t\t\tthis.filters.push(this.focusFilter);\r\n\t\t\t}\r\n\t\t\tif (this.hoverOnFocus) {\r\n\t\t\t\t// Trigger a hover event as well\r\n\t\t\t\tthis.isHover = true;\r\n\t\t\t\tthis.handleOver();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Removes focus filter (if set) when elementloses focus.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {AMEvent<Sprite, ISpriteEvents>[\"blur\"]} ev Original event\r\n\t */\r\n\tpublic handleBlur(ev?: AMEvent<Sprite, ISpriteEvents>[\"blur\"]): void {\r\n\t\tif (this.focusable) {\r\n\t\t\tif (this.topParent) {\r\n\t\t\t\tthis.topParent.hasFocused = false;\r\n\t\t\t}\r\n\t\t\tif (this.focusFilter) {\r\n\t\t\t\t// Any `filters` manipulation will trigger `applyFilters()` so we don't\r\n\t\t\t\t// need to call it here\r\n\t\t\t\tthis.filters.removeValue(this.focusFilter);\r\n\t\t\t}\r\n\t\t\tif (this.hoverOnFocus) {\r\n\t\t\t\t// Trigger a out event as well\r\n\t\t\t\tthis.isHover = false;\r\n\t\t\t\tthis.handleOut();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * A reference to a [[Filter]] to apply to element when it gains focus.\r\n\t *\r\n\t * Normally, browsers will draw a default ugly square around focused element,\r\n\t * which totally makes sense because its purpose is to help identify active\r\n\t * element for visually impaired people.\r\n\t *\r\n\t * However, if you would rather apply a filter, so you can modify how focused\r\n\t * element looks like, use `focusFilter`.\r\n\t *\r\n\t * Simply set it to an anstance of [[FocusFilter]], or any other filter\r\n\t * object.\r\n\t *\r\n\t * ```TypeScript\r\n\t * chart.focusFilter = new am4core.FocusFilter();\r\n\t * ```\r\n\t * ```JavaScript\r\n\t * chart.focusFilter = new am4core.FocusFilter();\r\n\t * ```\r\n\t * ```JSON\r\n\t * {\r\n\t *   // ...\r\n\t *   \"focusFilter\": {\r\n\t *     \"type\": \"FocusFilter\"\r\n\t *   },\r\n\t *   // ...\r\n\t * }\r\n\t * ```\r\n\t *\r\n\t * @see {@link Filter}\r\n\t * @ignore Exclude from docs\r\n\t * @return {Optional<Filter>} Focused element filter\r\n\t * @todo This is still experimental, use at your own risk.\r\n\t */\r\n\tpublic get focusFilter(): $type.Optional<Filter> {\r\n\t\t/*if (!this._focusFilter) {\r\n\t\t\tthis._focusFilter = new FocusFilter();\r\n\t\t\tthis._disposers.push(this._focusFilter);\r\n\t\t}*/\r\n\t\t//return this._focusFilter;\r\n\r\n\t\tconst focusFilter = this._focusFilter;\r\n\r\n\t\tif (focusFilter) {\r\n\t\t\treturn focusFilter;\r\n\r\n\t\t} else if (this.parent) {\r\n\t\t\treturn this.parent.focusFilter;\r\n\t\t}\r\n\r\n\t\t//this._focusFilter = new FocusFilter();\r\n\t\t//this._disposers.push(this._focusFilter);\r\n\t}\r\n\r\n\t/**\r\n\t * @see {@link Filter}\r\n\t * @ignore Exclude from docs\r\n\t * @todo This is still experimental, don't use it\r\n\t */\r\n\tpublic set focusFilter(value: $type.Optional<Filter>) {\r\n\t\tthis._focusFilter = value;\r\n\t}\r\n\r\n\t/**\r\n\t * If set to `true`, this element will also trigger `\"over\"` event with all\r\n\t * the related consequences, like \"hover\" state being applied and tooltip\r\n\t * being shown.\r\n\t *\r\n\t * Useful as an accessibility feature to display rollover tooltips on items\r\n\t * selected via keyboard.\r\n\t *\r\n\t * @param {boolean}  value  Trigger hover on focus?\r\n\t * @default false\r\n\t */\r\n\tpublic set hoverOnFocus(value: boolean) {\r\n\t\tif (value !== this.hoverOnFocus) {\r\n\t\t\tthis.setPropertyValue(\"hoverOnFocus\", value);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Trigger hover on focus?\r\n\t */\r\n\tpublic get hoverOnFocus(): boolean {\r\n\t\treturn this.getPropertyValue(\"hoverOnFocus\");\r\n\t}\r\n\r\n\t/**\r\n\t * Sets TAB index.\r\n\t *\r\n\t * Tab index maintains the order in which focusable elements gain focus when\r\n\t * TAB key is pressed.\r\n\t *\r\n\t * Please note, tab index is not local to the chart. It affects the whole\r\n\t * of the page, including non-SVG elements. Maintain extreme causion when\r\n\t * setting tab indexes, as it affects the user experience for the whole\r\n\t * web page.\r\n\t *\r\n\t * @param {number} value TAB index\r\n\t */\r\n\tpublic set tabindex(value: number) {\r\n\t\tvalue = $type.toNumber(value);\r\n\t\tif (value !== this.tabindex) {\r\n\t\t\tif (this.setPropertyValue(\"tabindex\", value)) {\r\n\t\t\t\tthis.interactions.tabindex = value;\r\n\t\t\t\tthis.setSVGAttribute({ \"tabindex\": value });\r\n\t\t\t\tif (value > -1) {\r\n\t\t\t\t\tthis.focusable = true;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.focusable = undefined;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns current TAB index for focusable item.\r\n\t *\r\n\t * @return {number} TAB index\r\n\t */\r\n\tpublic get tabindex(): $type.Optional<number> {\r\n\t\tconst index = this._tabindex;\r\n\r\n\t\tif (index != null) {\r\n\t\t\treturn index;\r\n\r\n\t\t} else if (this.parent) {\r\n\t\t\treturn this.parent.tabindex;\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * ==========================================================================\r\n\t * DRAGGING AND RELATED STUFF\r\n\t * ==========================================================================\r\n\t * @hidden\r\n\t */\r\n\r\n\t/**\r\n\t * Returns element's options to be used for inertia. This setting is\r\n\t * inheritable, meaning that if not set directly, it will search in all its\r\n\t * ascendants until very top.\r\n\t *\r\n\t * Inertia is used only if element's `inert` is set to `true`.\r\n\t *\r\n\t * \"Inert\" element, when dragged and released, will carry the momentum of the\r\n\t * movement, and will continue moving in the same drag direction, gradually\r\n\t * reducing in speed until finally stops.\r\n\t *\r\n\t * Check [[IInertiaOptions]] for how you tweak inertia animations.\r\n\t *\r\n\t * @return {Dictionary<InertiaTypes, IInertiaOptions>} Inertia options\r\n\t */\r\n\tpublic get inertiaOptions(): Dictionary<InertiaTypes, IInertiaOptions> {\r\n\t\tif (!this.interactions.inertiaOptions) {\r\n\t\t\tif (this.parent) {\r\n\t\t\t\treturn this.parent.inertiaOptions;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this.interactions.inertiaOptions;\r\n\t}\r\n\r\n\t/**\r\n\t * Controls if the element is draggable.\r\n\t *\r\n\t * @param {boolean}  value  `true` if element can be dragged\r\n\t */\r\n\tpublic set draggable(value: boolean) {\r\n\t\tvalue = $type.toBoolean(value);\r\n\t\tif (value !== this.draggable) {\r\n\t\t\tthis.setPropertyValue(\"draggable\", value);\r\n\t\t\tthis.applyCursorStyle();\r\n\t\t\tthis.interactions.draggable = value;\r\n\t\t\t//interaction.processDraggable(this);\r\n\r\n\t\t\t// Add events\r\n\t\t\t// @todo Maybe attach to InteractionObject's multidisposer so that\r\n\t\t\t// sprites events get disposed together with them?\r\n\t\t\t// this.interactions.disposers.getItem(\"movable\")\r\n\t\t\tthis.interactions.setEventDisposer(\"sprite-draggable\", value, () => new MultiDisposer([\r\n\t\t\t\tthis.events.on(\"down\", this.handleDown, this),\r\n\t\t\t\tthis.events.on(\"dragstart\", this.handleDragStart, this),\r\n\t\t\t\tthis.events.on(\"drag\", this.handleDragMove, this),\r\n\t\t\t\tthis.events.on(\"dragstop\", this.handleDragStop, this)\r\n\t\t\t]));\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} `true` if element can be dragged\r\n\t */\r\n\tpublic get draggable(): boolean {\r\n\t\treturn this.getPropertyValue(\"draggable\");\r\n\t}\r\n\r\n\t/**\r\n\t * Executes when dragged element is being started to drag.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tprotected handleDragStart(): void {\r\n\t\tthis._isDragged = true;\r\n\t\tthis.hideTooltip(0);\r\n\t}\r\n\r\n\t/**\r\n\t * Tell this element to start being dragged. This is useful if you want to\r\n\t * drag items by interactions performed not directly on the target element.\r\n\t *\r\n\t * Parameter `pointer` is highly recommended. By passing in the Pointer you\r\n\t * will ensure that movement is tracked for the pointer that you want. If not\r\n\t * supplied, the system will try to determine the most logical pointer.\r\n\t *\r\n\t * However this may fail if you have more than one pointer active, which\r\n\t * might happen if you have several objects being dragged on a touch device.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {IPointer} pointer Pointer to use for movement\r\n\t */\r\n\tpublic dragStart(pointer?: IPointer): void {\r\n\t\t//this.dragStop(pointer);\r\n\t\t//this.draggable = true;\r\n\t\tthis._isDragged = true;\r\n\t\tgetInteraction().dragStart(this.interactions, pointer);\r\n\t}\r\n\r\n\t/**\r\n\t * Executes when dragged element is being dropped.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tprotected handleDragStop(): void {\r\n\t\tthis._isDragged = false;\r\n\t\tthis.showTooltip();\r\n\t\tthis.interactions.originalPosition = undefined;\r\n\t}\r\n\r\n\t/**\r\n\t * Stops manually initiated dragging of the element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {IPointer} pointer Pointer to use as a reference\r\n\t */\r\n\tpublic dragStop(pointer?: IPointer): void {\r\n\t\t//this.draggable = false;\r\n\t\tthis._isDragged = false;\r\n\t\tgetInteraction().dragStop(this.interactions, pointer);\r\n\t\t//this.handleDragStop();\r\n\t}\r\n\r\n\t/**\r\n\t * Executes when {Sprite} is being dragged.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {InteractionEvent} ev Event object\r\n\t * @todo Implement parent position offset calculation\r\n\t */\r\n\tpublic handleDragMove(ev: AMEvent<Sprite, ISpriteEvents>[\"drag\"]): void {\r\n\t\tlet point: Optional<IPoint> = this.interactions.originalPosition;\r\n\r\n\t\tif (point) {\r\n\t\t\tlet globalScale = this.parent.globalScale;\r\n\t\t\tthis.moveTo({ x: point.x + ev.shift.x / globalScale, y: point.y + ev.shift.y / globalScale }, undefined, undefined, true);\r\n\t\t\t//this.dispatchImmediately(\"drag\", ev);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Controls if the element should use inertia when interacted with.\r\n\t *\r\n\t * \"Inert\" element, when dragged and released, will carry the momentum of the\r\n\t * movement, and will continue moving in the same drag direction, gradually\r\n\t * reducing in speed until finally stops.\r\n\t *\r\n\t * @default false\r\n\t * @param {boolean} value `true` if element should use inertia when animated\r\n\t */\r\n\tpublic set inert(value: boolean) {\r\n\t\tvalue = $type.toBoolean(value);\r\n\t\tif (value !== this.inert) {\r\n\t\t\tthis.setPropertyValue(\"inert\", value);\r\n\t\t\tthis.interactions.inert = true;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} `true` if element should use inertia when animated\r\n\t */\r\n\tpublic get inert(): boolean {\r\n\t\treturn this.getPropertyValue(\"inert\");\r\n\t}\r\n\r\n\t/**\r\n\t * ==========================================================================\r\n\t * HOVERING\r\n\t * ==========================================================================\r\n\t * @hidden\r\n\t */\r\n\r\n\t/**\r\n\t * Returns Sprite's hover options.\r\n\t *\r\n\t * @see {@link IHoverOptions} for available options.\r\n\t * @return {IHoverOptions} Options\r\n\t */\r\n\tpublic get hoverOptions(): IHoverOptions {\r\n\t\tif (!this.interactions.hoverOptions) {\r\n\t\t\tif (this.parent) {\r\n\t\t\t\treturn this.parent.hoverOptions;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this.interactions.hoverOptions;\r\n\t}\r\n\r\n\t/**\r\n\t * Controls if the element is hoverable (hover events are registered).\r\n\t *\r\n\t * Use `over` and `out` events, to watch for those respective actions.\r\n\t *\r\n\t * @default false\r\n\t * @param {boolean} value `true` if element can be hovered\r\n\t */\r\n\tpublic set hoverable(value: boolean) {\r\n\t\tvalue = $type.toBoolean(value);\r\n\t\tif (value !== this.hoverable) {\r\n\t\t\tthis.setPropertyValue(\"hoverable\", value);\r\n\t\t\tthis.applyCursorStyle();\r\n\t\t\tthis.interactions.hoverable = value;\r\n\t\t\t//interaction.processHoverable(this);\r\n\r\n\t\t\tthis.interactions.setEventDisposer(\"sprite-hoverable\", value, () => new MultiDisposer([\r\n\t\t\t\tthis.events.on(\"over\", this.handleOver, this),\r\n\t\t\t\tthis.events.on(\"out\", this.handleOut, this),\r\n\t\t\t]));\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} `true` if element is hoverable\r\n\t */\r\n\tpublic get hoverable(): boolean {\r\n\t\treturn this.getPropertyValue(\"hoverable\");\r\n\t}\r\n\r\n\t/**\r\n\t * Handles tasks when element becomes hovered:\r\n\t * * Shows [[Tooltip]] if applicable\r\n\t * * Applies \"hover\" state\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {AMEvent<Sprite, ISpriteEvents>[\"over\"]} ev Event object\r\n\t */\r\n\tpublic handleOver(ev?: AMEvent<Sprite, ISpriteEvents>[\"over\"]): void {\r\n\t\tif (this._outTimeout) {\r\n\t\t\tthis._outTimeout.dispose();\r\n\t\t}\r\n\r\n\t\tif (this.isHover) {\r\n\t\t\tif (this.states.hasKey(\"hover\")) {\r\n\t\t\t\t//this.setState(\"hover\");\r\n\t\t\t\t// This will check `isHover` and will set \"hover\" state\r\n\t\t\t\tthis.applyCurrentState();\r\n\t\t\t}\r\n\t\t\tthis.showTooltip();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.hideTooltip();\r\n\t\t\tif (this.states.hasKey(\"hover\")) {\r\n\t\t\t\tthis.applyCurrentState();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Handles tasks when element loses hover:\r\n\t * * Hides [[Tooltip]]\r\n\t * * Applys default state\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {AMEvent<Sprite, ISpriteEvents>[\"out\"]} ev [description]\r\n\t */\r\n\tpublic handleOut(ev?: AMEvent<Sprite, ISpriteEvents>[\"out\"]): void {\r\n\t\tthis.hideTooltip();\r\n\t\tthis._outTimeout = this.setTimeout(this.handleOutReal.bind(this), this.rollOutDelay);\r\n\t}\r\n\r\n\tpublic handleOutReal() {\r\n\t\tif (this.states.hasKey(\"hover\")) {\r\n\t\t\tthis.applyCurrentState();\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * ==========================================================================\r\n\t * CLICKING/TAPPING AND TOGGLING STUFF\r\n\t * ==========================================================================\r\n\t * @hidden\r\n\t */\r\n\r\n\t/**\r\n\t * Returns Sprite's click (hit) options.\r\n\t *\r\n\t * Click (hit) options control things like double-click, timeouts, etc.\r\n\t *\r\n\t * @see {@link IHitOptions} for available options.\r\n\t * @return {IHitOptions} Options\r\n\t */\r\n\tpublic get hitOptions(): IHitOptions {\r\n\t\tif (!this.interactions.hitOptions) {\r\n\t\t\tif (this.parent) {\r\n\t\t\t\treturn this.parent.hitOptions;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this.interactions.hitOptions;\r\n\t}\r\n\r\n\t/**\r\n\t * Prepares element's after `down` event.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {AMEvent<Sprite, ISpriteEvents>[\"rotate\"]} ev Event\r\n\t */\r\n\tpublic handleDown(ev?: AMEvent<Sprite, ISpriteEvents>[\"down\"]): void {\r\n\t\tif (this.interactions.downPointers.length === 1) {\r\n\t\t\tthis.interactions.originalPosition = {\r\n\t\t\t\tx: this.pixelX,\r\n\t\t\t\ty: this.pixelY\r\n\t\t\t};\r\n\t\t\tthis.interactions.originalAngle = this.rotation;\r\n\t\t\tthis.interactions.originalScale = this.scale;\r\n\t\t\tif (this.states.hasKey(\"down\")) {\r\n\t\t\t\tthis.setState(\"down\");\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Prepares element's after `up` event.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {AMEvent<Sprite, ISpriteEvents>[\"rotate\"]} ev Event\r\n\t */\r\n\tpublic handleUp(ev?: AMEvent<Sprite, ISpriteEvents>[\"up\"]): void {\r\n\t\t/*if (!this.isDown) {\r\n\t\t\tthis.interactions.originalPosition = null;\r\n\t\t\tthis.interactions.originalAngle = null;\r\n\t\t\tthis.interactions.originalScale = null;\r\n\t\t}*/\r\n\t\tif (this.states.hasKey(\"down\")) {\r\n\t\t\tthis.applyCurrentState();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates if the element is clickable.\r\n\t *\r\n\t * Some times of the elements, like buttons are clickable by default.\r\n\t *\r\n\t * Most of the elements are not clickable by default.\r\n\t *\r\n\t * Use `hit`, `doublehit`, `up`, `down`, `toggled` events to watch for\r\n\t * respective click/touch actions.\r\n\t *\r\n\t * @param {boolean} value `true` if element can be clicked\r\n\t */\r\n\tpublic set clickable(value: boolean) {\r\n\t\tvalue = $type.toBoolean(value);\r\n\t\tif (value !== this.clickable) {\r\n\t\t\tthis.setPropertyValue(\"clickable\", value);\r\n\t\t\tthis.applyCursorStyle();\r\n\t\t\tthis.interactions.clickable = value;\r\n\t\t\t//interaction.processClickable(this);\r\n\r\n\t\t\tthis.interactions.setEventDisposer(\"sprite-clickable\", value, () => new MultiDisposer([\r\n\t\t\t\tthis.events.on(\"down\", this.handleDown, this),\r\n\t\t\t\tthis.events.on(\"up\", this.handleUp, this)\r\n\t\t\t]));\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean}\r\n\t */\r\n\tpublic get clickable(): boolean {\r\n\t\treturn this.getPropertyValue(\"clickable\");\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates if element can be toggled on and off by subsequent clicks/taps.\r\n\t *\r\n\t * Togglable element will alternate its `isActive` property between `true`\r\n\t * and `false` with each click.\r\n\t *\r\n\t * @param {boolean} value Is togglable?\r\n\t */\r\n\tpublic set togglable(value: boolean) {\r\n\t\tvalue = $type.toBoolean(value);\r\n\t\tif (value !== this.togglable) {\r\n\t\t\tthis.setPropertyValue(\"togglable\", value);\r\n\t\t\tthis.interactions.setEventDisposer(\"sprite-togglable\", value, () => this.events.on(\"hit\", this.handleToggle, this));\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Is togglable?\r\n\t */\r\n\tpublic get togglable(): boolean {\r\n\t\treturn this.getPropertyValue(\"togglable\");\r\n\t}\r\n\r\n\t/**\r\n\t * Handles toggling of the element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {AMEvent<Sprite, ISpriteEvents>[\"hit\"]} ev Event\r\n\t */\r\n\tpublic handleToggle(ev: AMEvent<Sprite, ISpriteEvents>[\"hit\"]) {\r\n\t\tthis.isActive = !this.isActive;\r\n\t}\r\n\r\n\t/**\r\n\t * Click-through URL for this element.\r\n\t *\r\n\t * If set, clicking/tapping this element will open the new URL in a target\r\n\t * window/tab as set by `urlTarget`.\r\n\t *\r\n\t * @param {Optional<string>} value URL\r\n\t */\r\n\tpublic set url(value: $type.Optional<string>) {\r\n\t\t// If URL is not empty, set up events\r\n\t\tif ($utils.isNotEmpty(value)) {\r\n\t\t\tlet urlEvent = this.events.on(\"hit\", this.urlHandler, this);\r\n\t\t\tthis._disposers.push(urlEvent);\r\n\t\t\tthis._url.set(value, urlEvent);\r\n\r\n\t\t\t// Set other required parameters\r\n\t\t\tthis.clickable = true;\r\n\t\t\tthis.cursorOverStyle = MouseCursorStyle.pointer;\r\n\r\n\t\t} else {\r\n\t\t\t// TODO is this correct ? maybe it should set to \"\" instead\r\n\t\t\tthis._url.set(value, undefined);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Optional<string>} URL\r\n\t */\r\n\tpublic get url(): $type.Optional<string> {\r\n\t\treturn this._url.get();\r\n\t}\r\n\r\n\t/**\r\n\t * Target to use for URL clicks:\r\n\t * \r\n\t * * _blank\r\n\t * * _self (default)\r\n\t * * _parent\r\n\t * * _top\r\n\t * * Name of the window/frame\r\n\t *\r\n\t * Ignored if `url` is not set.\r\n\t *\r\n\t * @param {string} value URL target\r\n\t */\r\n\tpublic set urlTarget(value: string) {\r\n\t\tthis._urlTarget = value;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {string} URL target\r\n\t */\r\n\tpublic get urlTarget(): string {\r\n\t\treturn this._urlTarget;\r\n\t}\r\n\r\n\t/**\r\n\t * Handles URL transition on element click.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {InteractionEvent} ev An event object\r\n\t */\r\n\tpublic urlHandler(ev: AMEvent<Sprite, ISpriteEvents>[\"hit\"]): void {\r\n\t\t// Is URL set?\r\n\t\tif ($utils.isNotEmpty(this.url)) {\r\n\t\t\t// Proceed to the URL\r\n\t\t\tif (this.urlTarget === \"_self\") {\r\n\t\t\t\twindow.location.href = this.url;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\twindow.open(this.url, this.urlTarget);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * ==========================================================================\r\n\t * SWIPING GESTURE TRACKING\r\n\t * ==========================================================================\r\n\t * @hidden\r\n\t */\r\n\r\n\t/**\r\n\t * Returns element's swipe gesture options.\r\n\t *\r\n\t * @return {ISwipeOptions} Swipe gesture options\r\n\t */\r\n\tpublic get swipeOptions(): ISwipeOptions {\r\n\t\tif (!this.interactions.swipeOptions) {\r\n\t\t\tif (this.parent) {\r\n\t\t\t\treturn this.parent.swipeOptions;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this.interactions.swipeOptions;\r\n\t}\r\n\r\n\t/**\r\n\t * Controls if element is swipeable.\r\n\t *\r\n\t * Swipable element will invoke `swipe`, `swipeleft` and `swiperight` events,\r\n\t * when quick horizontal drag action is performed with either mouse or touch.\r\n\t *\r\n\t * Please note that combining swipe and drag is possible, however will incur\r\n\t * a slight but noticeable delay in drag start.\r\n\t *\r\n\t * @param {boolean}  value  Element swipable?\r\n\t */\r\n\tpublic set swipeable(value: boolean) {\r\n\t\tvalue = $type.toBoolean(value);\r\n\t\tif (value !== this.swipeable) {\r\n\t\t\tthis.setPropertyValue(\"swipeable\", value);\r\n\t\t\tthis.applyCursorStyle();\r\n\t\t\tthis.interactions.swipeable = value;\r\n\t\t\t//interaction.processSwipeable(this);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Element swipable?\r\n\t */\r\n\tpublic get swipeable(): boolean {\r\n\t\treturn this.getPropertyValue(\"swipeable\");\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * ==========================================================================\r\n\t * POINTER TRACKING\r\n\t * ==========================================================================\r\n\t * @hidden\r\n\t */\r\n\r\n\t/**\r\n\t * Indicates if the element is trackable (mouse position over it is reported to\r\n\t * event listeners).\r\n\t *\r\n\t * Will invoke `track` events whenever pointer (cursor) changes position\r\n\t * while over element.\r\n\t *\r\n\t * Please note, touch devices will also invoke `track` events when touch\r\n\t * point is moved while holding down on a trackable element.\r\n\t *\r\n\t * @param {boolean} value Track cursor movement over element?\r\n\t */\r\n\tpublic set trackable(value: boolean) {\r\n\t\tvalue = $type.toBoolean(value);\r\n\t\tif (value !== this.trackable) {\r\n\t\t\tthis.setPropertyValue(\"trackable\", value);\r\n\t\t\tthis.applyCursorStyle();\r\n\t\t\tthis.interactions.trackable = value;\r\n\t\t\t//interaction.processTrackable(this);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Track cursor movement over element?\r\n\t */\r\n\tpublic get trackable(): boolean {\r\n\t\treturn this.getPropertyValue(\"trackable\");\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * ==========================================================================\r\n\t * MOUSE-WHEEL RELATED\r\n\t * ==========================================================================\r\n\t * @hidden\r\n\t */\r\n\r\n\t/**\r\n\t * Indicates if the element can be interacted with mouse wheel.\r\n\t *\r\n\t * Will invoke `wheel`, `wheelup`, `wheeldown`, `wheelleft`, and `wheelright`\r\n\t * events when using mouse wheel over the element.\r\n\t *\r\n\t * @param {boolean} value Mouse wheel events enabled?\r\n\t */\r\n\tpublic set wheelable(value: boolean) {\r\n\t\tif (value !== this.wheelable) {\r\n\t\t\tthis.setPropertyValue(\"wheelable\", value);\r\n\t\t\tthis.applyCursorStyle();\r\n\t\t\tthis.interactions.wheelable = value;\r\n\t\t\t//interaction.processWheelable(this);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Mouse wheel events enabled?\r\n\t */\r\n\tpublic get wheelable(): boolean {\r\n\t\treturn this.getPropertyValue(\"wheelable\");\r\n\t}\r\n\r\n\t/**\r\n\t * ==========================================================================\r\n\t * RESIZE\r\n\t * ==========================================================================\r\n\t * @hidden\r\n\t */\r\n\r\n\t/**\r\n\t * Indicates if this element is resizable.\r\n\t *\r\n\t * Enabling resize will turn on various interactions on the element. Their\r\n\t * actual functionality will depend on other properties.\r\n\t *\r\n\t * If the element also `draggable`, resize will only happen with two points\r\n\t * of contact on a touch device.\r\n\t *\r\n\t * If the element is not draggable, resize can be performed with just one\r\n\t * point of contact, touch or mouse.\r\n\t *\r\n\t * Will invoke `resize` event every time the size of the element changes.\r\n\t *\r\n\t * @param {boolean}  value  Element resizable?\r\n\t */\r\n\tpublic set resizable(value: boolean) {\r\n\t\tvalue = $type.toBoolean(value);\r\n\t\tif (value !== this.resizable) {\r\n\t\t\tthis.setPropertyValue(\"resizable\", value);\r\n\t\t\tthis.applyCursorStyle();\r\n\t\t\tthis.interactions.resizable = value;\r\n\t\t\t//interaction.processResizable(this);\r\n\r\n\t\t\tthis.interactions.setEventDisposer(\"sprite-resizable\", value, () => new MultiDisposer([\r\n\t\t\t\tthis.events.on(\"down\", this.handleDown, this),\r\n\t\t\t\tthis.events.on(\"resize\", this.handleResize, this)\r\n\t\t\t]));\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Element resizable?\r\n\t */\r\n\tpublic get resizable(): boolean {\r\n\t\treturn this.getPropertyValue(\"resizable\");\r\n\t}\r\n\r\n\t/**\r\n\t * Handles resize intermediate step.\r\n\t *\r\n\t * By default this method resizes actual element. Each element, can override\r\n\t * this method to implement their own resize logic.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {InteractionEvent} ev Event object\r\n\t */\r\n\tpublic handleResize(ev: AMEvent<Sprite, ISpriteEvents>[\"resize\"]): void {\r\n\t\tthis.scale = this.interactions.originalScale * ev.scale;\r\n\t\tthis.validatePosition();\r\n\t\t/*center: (io.draggable\r\n\t\t? $math.getMidPoint(point1, point2)\r\n\t\t: {\r\n\t\t\t\"x\": io.originalPosition.x,\r\n\t\t\t\"y\": io.originalPosition.y\r\n\t\t})*/\r\n\t\t//this.moveTo(this.originalPosition.x + ev.shift.x, this.originalPosition.y + ev.shift.y);\r\n\t\tif (this.draggable) {\r\n\t\t\tlet svgPoint1: IPoint = $utils.documentPointToSvg(ev.point1, this.htmlContainer);\r\n\t\t\tlet svgPoint2: IPoint = $utils.documentPointToSvg(ev.point2, this.htmlContainer);\r\n\t\t\tlet svgMidPoint: IPoint = $math.getMidPoint(svgPoint1, svgPoint2);\r\n\r\n\t\t\tlet parentPoint1: IPoint = $utils.documentPointToSprite(ev.startPoint1, this.parent);\r\n\t\t\tlet parentPoint2: IPoint = $utils.documentPointToSprite(ev.startPoint2, this.parent);\r\n\r\n\t\t\tlet originalPosition: Optional<IPoint> = this.interactions.originalPosition;\r\n\t\t\tlet originalScale: number = this.interactions.originalScale;\r\n\r\n\t\t\tif (originalPosition) {\r\n\t\t\t\tlet spritePoint1: IPoint = { x: (parentPoint1.x - originalPosition.x) / originalScale, y: (parentPoint1.y - originalPosition.y) / originalScale };\r\n\t\t\t\tlet spritePoint2: IPoint = { x: (parentPoint2.x - originalPosition.x) / originalScale, y: (parentPoint2.y - originalPosition.y) / originalScale };\r\n\r\n\t\t\t\tlet spriteMidPoint: IPoint = $math.getMidPoint(spritePoint1, spritePoint2);\r\n\r\n\t\t\t\tlet parentPoint: IPoint = $utils.svgPointToSprite(svgMidPoint, this.parent);\r\n\t\t\t\tthis.moveTo({ x: parentPoint.x - spriteMidPoint.x * this.scale, y: parentPoint.y - spriteMidPoint.y * this.scale });\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * ==========================================================================\r\n\t * ROTATION\r\n\t * ==========================================================================\r\n\t * @hidden\r\n\t */\r\n\r\n\t/**\r\n\t * Controls if the element can be rotated.\r\n\t *\r\n\t * If enabled, the element can be rotated using various interactions.\r\n\t *\r\n\t * If the element also `draggable`, rotation can be performed using two\r\n\t * points of contact, i.e. on touch devices only.\r\n\t *\r\n\t * If the element is not `draggable`, rotation can be performed using one\r\n\t * point of contact, e.g. mouse or touch.\r\n\t *\r\n\t * Rotation will happen around configured center of the element, as set in\r\n\t * `horizontalCenter` and `verticalCenter`.\r\n\t *\r\n\t * Invokes `rotate` event when rotation angle changes.\r\n\t *\r\n\t * @param {boolean}  value  Can be rotated?\r\n\t */\r\n\tpublic set rotatable(value: boolean) {\r\n\t\tvalue = $type.toBoolean(value);\r\n\t\tif (value !== this.rotatable) {\r\n\t\t\tthis.setPropertyValue(\"rotatable\", value);\r\n\t\t\tthis.interactions.rotatable = value;\r\n\t\t\t//interaction.processRotatable(this);\r\n\r\n\t\t\tthis.interactions.setEventDisposer(\"sprite-rotatable\", value, () => new MultiDisposer([\r\n\t\t\t\tthis.events.on(\"down\", this.handleDown, this),\r\n\t\t\t\tthis.events.on(\"rotate\", this.handleRotate, this)\r\n\t\t\t]));\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Can be rotated?\r\n\t */\r\n\tpublic get rotatable(): boolean {\r\n\t\treturn this.getPropertyValue(\"rotatable\");\r\n\t}\r\n\r\n\t/**\r\n\t * Handles rotate intermediate step.\r\n\t *\r\n\t * By default this method will rotate the actual element.\r\n\t *\r\n\t * Extending classes might override this method to implement their own\r\n\t * rotation logic.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {InteractionEvent} ev Event object\r\n\t */\r\n\tpublic handleRotate(ev: AMEvent<Sprite, ISpriteEvents>[\"rotate\"]): void {\r\n\t\tthis.rotate(ev.angle + this.interactions.originalAngle);\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * ==========================================================================\r\n\t * MOUSE-RELATED\r\n\t * ==========================================================================\r\n\t * @hidden\r\n\t */\r\n\r\n\t/**\r\n\t * Returns element's cursor options.\r\n\t *\r\n\t * Cursor options usually define cursor style for various states of the\r\n\t * hovered element.\r\n\t *\r\n\t * Elements inherit `cursorOptions` from their parents if they don't have\r\n\t * them set explicitly.\r\n\t *\r\n\t * @see {@link ICursorOptions} for a list of available options\r\n\t * @return {ICursorOptions} Cursor options\r\n\t */\r\n\tpublic get cursorOptions(): ICursorOptions {\r\n\t\tif (!this.interactions.cursorOptions) {\r\n\t\t\tif (this.parent) {\r\n\t\t\t\treturn this.parent.cursorOptions;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this.interactions.cursorOptions;\r\n\t}\r\n\r\n\t/**\r\n\t * A shortcut to setting mouse cursor on hover.\r\n\t *\r\n\t * @param {Array<IStyleProperty>} style An array of styles to apply onhover\r\n\t */\r\n\tpublic set cursorOverStyle(style: Array<IStyleProperty>) {\r\n\t\tthis.cursorOptions.overStyle = style;\r\n\t\tgetInteraction().applyCursorOverStyle(this.interactions);\r\n\t}\r\n\r\n\t/**\r\n\t * A shortcut to setting mouse cursor when button is pressed down.\r\n\t *\r\n\t * @param {Array<IStyleProperty>} style An array of styles to apply onhover\r\n\t */\r\n\tpublic set cursorDownStyle(style: Array<IStyleProperty>) {\r\n\t\tthis.cursorOptions.downStyle = style;\r\n\t}\r\n\r\n\t/**\r\n\t * Applies default cursor styles for interactable elements.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Determine if this is necessary. Maybe let's not apply any cursor styles by default\r\n\t */\r\n\tpublic applyCursorStyle(): void {\r\n\r\n\t\t// Draggable styles\r\n\t\t/*if (this.draggable) {\r\n\r\n\t\t\tif (!$type.hasValue(this.cursorOptions.overStyle)) {\r\n\t\t\t\tthis.cursorOptions.overStyle = MouseCursorStyle.grab;\r\n\t\t\t}\r\n\r\n\t\t\tif (!$type.hasValue(this.cursorOptions.downStyle)) {\r\n\t\t\t\tthis.cursorOptions.downStyle = MouseCursorStyle.grabbing;\r\n\t\t\t}\r\n\t\t}*/\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Setting this to `false` will effectively disable all interactivity on the\r\n\t * element.\r\n\t *\r\n\t * @param {boolean}  value  Is interaction enabled for this element?\r\n\t */\r\n\tpublic set interactionsEnabled(value: boolean) {\r\n\t\tvalue = $type.toBoolean(value);\r\n\t\tthis.setInteractionsEnabled(value)\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Is interaction enabled for this element?\r\n\t */\r\n\tpublic get interactionsEnabled(): boolean {\r\n\t\tlet value = this.getPropertyValue(\"interactionsEnabled\");\r\n\t\tif (value === false) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (this.parent) {\r\n\t\t\treturn this.parent.interactionsEnabled;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets up the element to either ignore all interactivity, or not.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {boolean}  value  Interactivity enabled?\r\n\t * @return {string}          Current event handlers for the element\r\n\t */\r\n\tpublic setInteractionsEnabled(value: boolean): string {\r\n\t\tthis.setPropertyValue(\"interactionsEnabled\", value);\r\n\t\tlet pointerEvents = null; // must be null, not \"null\"!\r\n\t\tif (!value) {\r\n\t\t\tpointerEvents = \"none\";\r\n\t\t}\r\n\t\tthis.group.node.style.pointerEvents = pointerEvents;\r\n\r\n\t\treturn pointerEvents;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * ==========================================================================\r\n\t * EXPORT-RELATED STUFF\r\n\t * ==========================================================================\r\n\t * @hidden\r\n\t */\r\n\r\n\t/**\r\n\t * An [[Export]] instance.\r\n\t *\r\n\t * Used to access API of the chart export functionality.\r\n\t *\r\n\t * If `exporting` is not set, the element inherits [[Export]] instance from\r\n\t * its parents.\r\n\t *\r\n\t * Upon request, if no parent has such instance, a new one is created, using\r\n\t * default settings, what in most cases is just enough.\r\n\t *\r\n\t * @see {@link https://www.amcharts.com/docs/v4/concepts/exporting/} for more info about exporting\r\n\t * @param {Export}  exp  Export\r\n\t */\r\n\tpublic set exporting(exp: Export) {\r\n\t\tthis._exporting.set(exp, exp);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Export} Export instance\r\n\t */\r\n\tpublic get exporting(): Export {\r\n\t\treturn this.getExporting();\r\n\t}\r\n\r\n\t/**\r\n\t * This is here as a method so that inheriting classes could override it.\r\n\t *\r\n\t * @return {Export} Export instance\r\n\t */\r\n\tprotected getExporting(): Export {\r\n\t\tlet _export = this._exporting.get();\r\n\r\n\t\tif (_export) {\r\n\t\t\treturn _export;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (this.isStandaloneInstance || !this.parent) {\r\n\t\t\t\t_export = new Export();\r\n\t\t\t\t_export.container = this.svgContainer.SVGContainer;\r\n\t\t\t\t_export.sprite = this;\r\n\t\t\t\t_export.language = this.language;\r\n\t\t\t\t_export.dateFormatter = this.dateFormatter;\r\n\t\t\t\tthis._exporting.set(_export, _export);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn this.parent.exporting;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn _export;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * ==========================================================================\r\n\t * MODAL/POPUP RELATED STUFF\r\n\t * ==========================================================================\r\n\t * @hidden\r\n\t */\r\n\r\n\t/**\r\n\t * Returns a [[Modal]] instance, associated with this chart.\r\n\t * (elements top parent)\r\n\t *\r\n\t * Accessing modal does not make it appear. To make a modal appear, use\r\n\t * `showModal()` method.\r\n\t *\r\n\t * @see {@link Modal} for more information about using Modal windows\r\n\t * @return {Modal} Modal instance\r\n\t */\r\n\tpublic get modal(): Modal {\r\n\t\tconst topParent = this.topParent;\r\n\r\n\t\tif (topParent) {\r\n\t\t\t// We always use top parent's modal\r\n\t\t\treturn topParent.modal;\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// We are a top parent, let's check if we have a modal\r\n\t\t\tif (!$type.hasValue(this._modal)) {\r\n\r\n\t\t\t\t// Create new modal\r\n\t\t\t\tthis._modal = new Modal();\r\n\t\t\t\tthis._modal.container = this.svgContainer.SVGContainer;\r\n\r\n\t\t\t\t// Prefix with Sprite's class name\r\n\t\t\t\tthis._modal.adapter.add(\"classPrefix\", (value) => {\r\n\t\t\t\t\tvalue = options.classNamePrefix + value;\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Add to disposers\r\n\t\t\t\tthis._disposers.push(this._modal);\r\n\t\t\t}\r\n\t\t\treturn this._modal;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Opens a modal window with specific content (`text` parameter) and,\r\n\t * optionally, `title`.\r\n\t *\r\n\t * The `text` parameter can contain HTML content.\r\n\t *\r\n\t * @see {@link Modal} for more information about using Modal windows\r\n\t * @param {string}  text   Modal contents\r\n\t * @param {string}  title  Title for the modal window\r\n\t */\r\n\tpublic showModal(text: string, title?: string): void {\r\n\r\n\t\t// Hide previous modal\r\n\t\tthis.hideModal();\r\n\r\n\t\t// Create modal\r\n\t\tlet modal = this.modal;\r\n\t\tmodal.content = text;\r\n\t\tmodal.readerTitle = title;\r\n\t\tmodal.show();\r\n\t}\r\n\r\n\t/**\r\n\t * Hides modal window if there is one currently open.\r\n\t */\r\n\tpublic hideModal(): void {\r\n\t\tif (this._modal) {\r\n\t\t\tthis.modal.hide();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * A list of popups for this chart.\r\n\t *\r\n\t * @return {ListTemplate<Popup>} Popups\r\n\t */\r\n\tpublic get popups(): ListTemplate<Popup> {\r\n\t\tconst topParent = this.topParent;\r\n\r\n\t\tif (topParent != null) {\r\n\t\t\t// We always use top parent's popups\r\n\t\t\treturn topParent.popups;\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// We are a top parent, let's check if we have a modal\r\n\t\t\tif (!$type.hasValue(this._popups)) {\r\n\r\n\t\t\t\t// Create popup template\r\n\t\t\t\tlet popupTemplate = new Popup();\r\n\t\t\t\tpopupTemplate.container = this.svgContainer.SVGContainer;\r\n\t\t\t\tpopupTemplate.sprite = this;\r\n\r\n\t\t\t\t// Prefix with Sprite's class name\r\n\t\t\t\tpopupTemplate.adapter.add(\"classPrefix\", (value) => {\r\n\t\t\t\t\tvalue = options.classNamePrefix + value;\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Create the list\r\n\t\t\t\tthis._popups = new ListTemplate(popupTemplate);\r\n\r\n\t\t\t\t// Add to disposers\r\n\t\t\t\tthis._disposers.push(new ListDisposer(this._popups));\r\n\t\t\t\tthis._disposers.push(this._popups.template);\r\n\t\t\t}\r\n\t\t\treturn this._popups;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Creates, opens, and returns a new [[Popup]] window.\r\n\t *\r\n\t * `text` can be any valid HTML.\r\n\t *\r\n\t * `title` is currently not supported.\r\n\t *\r\n\t * @param  {string}  text   Popup contents\r\n\t * @param  {string}  title  Popup title\r\n\t * @return {Popup}          Popup instance\r\n\t */\r\n\tpublic openPopup(text: string, title?: string): Popup {\r\n\t\tlet popup = this.popups.create();\r\n\t\tpopup.content = text;\r\n\t\tif ($type.hasValue(title)) {\r\n\t\t\tpopup.title = title;\r\n\t\t}\r\n\t\tpopup.show();\r\n\t\treturn popup;\r\n\t}\r\n\r\n\t/**\r\n\t * Closes all currently open popup windows\r\n\t */\r\n\tpublic closeAllPopups(): void {\r\n\t\t$iter.each(this.popups.iterator(), (popup) => {\r\n\t\t\tpopup.hide();\r\n\t\t});\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * ==========================================================================\r\n\t * POSITIONAL PROPERTIES AND RELATED STUFF\r\n\t * ==========================================================================\r\n\t * @hidden\r\n\t */\r\n\r\n\t/**\r\n\t * Element's absolute or relative X coordinate.\r\n\t *\r\n\t * If setting both X and Y, please consider using `moveTo()` method instead,\r\n\t * as it will be faster to set both coordinates at once.\r\n\t *\r\n\t * @param {number | Percent} value X coordinate\r\n\t */\r\n\tpublic set x(value: number | Percent) {\r\n\t\tif (!this.isDragged) {\r\n\t\t\tvalue = $type.toNumberOrPercent(value);\r\n\t\t\tthis.setPropertyValue(\"x\", value, false, true);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number | Percent} X coordinate\r\n\t */\r\n\tpublic get x(): number | Percent {\r\n\t\treturn this.getPropertyValue(\"x\");\r\n\t}\r\n\r\n\t/**\r\n\t * Returns element's current absolute X coordinate in pixels.\r\n\t *\r\n\t * @readonly\r\n\t * @return {number} X coordinate (px)\r\n\t */\r\n\tpublic get pixelX(): number {\r\n\t\treturn this.adapter.apply(\r\n\t\t\t\"pixelX\",\r\n\t\t\t$math.fitToRange(this.getPixelX(this.x), this.minX, this.maxX)\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns element's current relative X coordinate in [[Percent]].\r\n\t *\r\n\t * @return {number} X coordinate ([[Percent]])\r\n\t */\r\n\tpublic get relativeX(): number {\r\n\t\treturn this.adapter.apply(\"relativeX\", this.getRelativeX(this.x));\r\n\t}\r\n\r\n\t/**\r\n\t * The smallest allowable absolute X coordinate for this element.\r\n\t *\r\n\t * This is used to contain element movement within certain boundaries.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {number} value Min X (px)\r\n\t */\r\n\tpublic set minX(value: number) {\r\n\t\tif ($type.isNumber(value)) {\r\n\t\t\tvalue = $math.round(value, this._positionPrecision);\r\n\t\t\tthis.setPropertyValue(\"minX\", value, false, true);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore Exclude from docs\r\n\t * @return {number} Min X (px)\r\n\t */\r\n\tpublic get minX(): number {\r\n\t\treturn this.getPropertyValue(\"minX\");\r\n\t}\r\n\r\n\t/**\r\n\t * The biggest allowable absolute X coordinate for this element.\r\n\t *\r\n\t * This is used to contain element movement within certain boundaries.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {number} value Max X (px)\r\n\t */\r\n\tpublic set maxX(value: number) {\r\n\t\tif ($type.isNumber(value)) {\r\n\t\t\tvalue = $math.round(value, this._positionPrecision);\r\n\t\t\tthis.setPropertyValue(\"maxX\", value, false, true);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore Exclude from docs\r\n\t * @return {number} Max X (px)\r\n\t */\r\n\tpublic get maxX(): number {\r\n\t\treturn this.getPropertyValue(\"maxX\");\r\n\t}\r\n\r\n\t/**\r\n\t * Element's absolute or relative Y coordinate.\r\n\t *\r\n\t * If setting both X and Y, please consider using `moveTo()` method instead,\r\n\t * as it will be faster to set both coordinates at once.\r\n\t *\r\n\t * @param {number | Percent}  value  Y coordinate\r\n\t */\r\n\tpublic set y(value: number | Percent) {\r\n\t\tif (!this.isDragged) {\r\n\t\t\tvalue = $type.toNumberOrPercent(value);\r\n\t\t\tthis.setPropertyValue(\"y\", value, false, true);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number | Percent} Y coordinate\r\n\t */\r\n\tpublic get y(): number | Percent {\r\n\t\treturn this.getPropertyValue(\"y\");\r\n\t}\r\n\r\n\t/**\r\n\t * Returns element's current absolute Y coordinate in pixels.\r\n\t *\r\n\t * @readonly\r\n\t * @return {number} Y coordinate (px)\r\n\t */\r\n\tpublic get pixelY(): number {\r\n\t\treturn this.adapter.apply(\r\n\t\t\t\"pixelY\",\r\n\t\t\t$math.fitToRange(this.getPixelY(this.y), this.minY, this.maxY)\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns element's current relative Y coordinate in [[Percent]].\r\n\t *\r\n\t * @readonly\r\n\t * @return {number} Y coordinate ([[Percent]])\r\n\t */\r\n\tpublic get relativeY(): number {\r\n\t\treturn this.adapter.apply(\"relativeY\", this.getRelativeX(this.y));\r\n\t}\r\n\r\n\t/**\r\n\t * The smallest allowable absolute Y coordinate for this element.\r\n\t *\r\n\t * This is used to contain element movement within certain boundaries.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {number} value Min Y (px)\r\n\t */\r\n\tpublic set minY(value: number) {\r\n\t\tif ($type.isNumber(value)) {\r\n\t\t\tvalue = $math.round(value, this._positionPrecision);\r\n\t\t\tthis.setPropertyValue(\"minY\", value, false, true);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore Exclude from docs\r\n\t * @return {number} Min Y (px)\r\n\t */\r\n\tpublic get minY(): number {\r\n\t\treturn this.getPropertyValue(\"minY\");\r\n\t}\r\n\r\n\t/**\r\n\t * The biggest allowable absolute Y coordinate for this element.\r\n\t *\r\n\t * This is used to contain element movement within certain boundaries.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {number}  value  Max Y (px)\r\n\t */\r\n\tpublic set maxY(value: number) {\r\n\t\tif ($type.isNumber(value)) {\r\n\t\t\tvalue = $math.round(value, this._positionPrecision);\r\n\t\t\tthis.setPropertyValue(\"maxY\", value, false, true);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore Exclude from docs\r\n\t * @return {number} Max Y (px)\r\n\t */\r\n\tpublic get maxY(): number {\r\n\t\treturn this.getPropertyValue(\"maxY\");\r\n\t}\r\n\r\n\t/**\r\n\t * A horizontal offset for the element in pixels.\r\n\t *\r\n\t * Can be negative value for offset to the left.\r\n\t *\r\n\t * @param {number}  value  Horizontal offset (px)\r\n\t */\r\n\tpublic set dx(value: number) {\r\n\t\tif ($type.isNumber(value)) {\r\n\t\t\tvalue = $math.round(value, this._positionPrecision);\r\n\t\t\tthis.setPropertyValue(\"dx\", value, false, true);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Horizontal offset (px)\r\n\t */\r\n\tpublic get dx(): number {\r\n\t\tlet value = this.getPropertyValue(\"dx\");\r\n\t\tif (!$type.isNumber(value)) {\r\n\t\t\tvalue = 0;\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\t/**\r\n\t * A vertical offset for the element in pixels.\r\n\t *\r\n\t * Can be negative value for offset upwards.\r\n\t *\r\n\t * @param {number}  value  Vertical offset (px)\r\n\t */\r\n\tpublic set dy(value: number) {\r\n\t\tif ($type.isNumber(value)) {\r\n\t\t\tvalue = $math.round(value, this._positionPrecision);\r\n\t\t\tthis.setPropertyValue(\"dy\", value, false, true);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Vertical offset (px)\r\n\t */\r\n\tpublic get dy(): number {\r\n\t\tlet value = this.getPropertyValue(\"dy\");\r\n\t\tif (!$type.isNumber(value)) {\r\n\t\t\tvalue = 0;\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\t/**\r\n\t * Rotation of the element in degrees. (0-360)\r\n\t *\r\n\t * @param {number}  value  Rotation (0-360)\r\n\t */\r\n\tpublic set rotation(value: number) {\r\n\t\tvalue = $type.toNumber(value);\r\n\t\tif (!$type.isNumber(value)) {\r\n\t\t\tvalue = 0;\r\n\t\t}\r\n\t\tthis.setPropertyValue(\"rotation\", value, false, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Rotation (0-360)\r\n\t */\r\n\tpublic get rotation(): number {\r\n\t\treturn this.getPropertyValue(\"rotation\");\r\n\t}\r\n\r\n\t/**\r\n\t * Rotates the element to certain `angle`.\r\n\t *\r\n\t * Set `rotation` property instead.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {number} angle Rotation angle (0-360)\r\n\t */\r\n\tpublic rotate(angle: number): void {\r\n\t\tthis.rotation = angle;\r\n\t}\r\n\r\n\t/**\r\n\t * Controls horizontal alignment of the element.\r\n\t *\r\n\t * This is used by parent [[Container]] when layouting its children.\r\n\t *\r\n\t * @param {Align}  value  Horizontal align\r\n\t */\r\n\tpublic set align(value: Align) {\r\n\t\tvalue = <Align>$type.toText(value);\r\n\t\tthis.setPropertyValue(\"align\", value, false, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Align} Horizontal align\r\n\t */\r\n\tpublic get align(): Align {\r\n\t\treturn this.getPropertyValue(\"align\");\r\n\t}\r\n\r\n\t/**\r\n\t * Controls vertical alignment of the element.\r\n\t *\r\n\t * This is used by parent [[Container]] when layouting its children.\r\n\t *\r\n\t * @param {VerticalAlign}  value  Vertical align\r\n\t */\r\n\tpublic set valign(value: VerticalAlign) {\r\n\t\tvalue = <VerticalAlign>$type.toText(value);\r\n\t\tthis.setPropertyValue(\"valign\", value, false, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {VerticalAlign} Vertical align\r\n\t */\r\n\tpublic get valign(): VerticalAlign {\r\n\t\treturn this.getPropertyValue(\"valign\");\r\n\t}\r\n\r\n\t/**\r\n\t * Controls which part of the element to treat as a horizontal center.\r\n\t *\r\n\t * The setting will be used when positioning, resizing and rotating the\r\n\t * element.\r\n\t *\r\n\t * @param {HorizontalCenter}  value  Horizontal center\r\n\t */\r\n\tpublic set horizontalCenter(value: HorizontalCenter) {\r\n\t\tvalue = <HorizontalCenter>$type.toText(value);\r\n\t\tthis.setPropertyValue(\"horizontalCenter\", value, false, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {HorizontalCenter} Horizontal center\r\n\t */\r\n\tpublic get horizontalCenter(): HorizontalCenter {\r\n\t\treturn this.getPropertyValue(\"horizontalCenter\");\r\n\t}\r\n\r\n\t/**\r\n\t * Controls which part of the element to treat as a vertical center.\r\n\t *\r\n\t * The setting will be used when positioning, resizing and rotating the\r\n\t * element.\r\n\t *\r\n\t * @param {VerticalCenter}  value  Vertical center\r\n\t */\r\n\tpublic set verticalCenter(value: VerticalCenter) {\r\n\t\tvalue = <VerticalCenter>$type.toText(value);\r\n\t\tthis.setPropertyValue(\"verticalCenter\", value, false, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {VerticalCenter} Vertical center\r\n\t */\r\n\tpublic get verticalCenter(): VerticalCenter {\r\n\t\treturn this.getPropertyValue(\"verticalCenter\");\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * ==========================================================================\r\n\t * DIMENSIONAL PROPERTIES AND RELATED STUFF\r\n\t * ==========================================================================\r\n\t * @hidden\r\n\t */\r\n\r\n\t/**\r\n\t * Maximum allowed width for the element in pixels.\r\n\t *\r\n\t * @param {number}  value  Maximum width (px)\r\n\t */\r\n\tpublic set maxWidth(value: number) {\r\n\t\tif (this.setPropertyValue(\"maxWidth\", value)) {\r\n\t\t\tif ($type.isNumber(this.relativeWidth)) {\r\n\t\t\t\tthis.invalidate();\r\n\t\t\t}\r\n\r\n\t\t\tthis.dispatchImmediately(\"maxsizechanged\");\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Maximum width (px)\r\n\t */\r\n\tpublic get maxWidth(): number {\r\n\t\tlet maxWidth = this.getPropertyValue(\"maxWidth\");\r\n\r\n\t\tif (!$type.isNumber(maxWidth)) {\r\n\t\t\tif (this.parent) {\r\n\t\t\t\treturn this.parent.maxWidth;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn maxWidth;\r\n\t}\r\n\r\n\t/**\r\n\t * Maximum allowed height for the element in pixels.\r\n\t *\r\n\t * @param {number}  value  Maximum height (px)\r\n\t */\r\n\tpublic set maxHeight(value: number) {\r\n\t\tif (this.setPropertyValue(\"maxHeight\", value)) {\r\n\t\t\tif ($type.isNumber(this.relativeHeight)) {\r\n\t\t\t\tthis.invalidate();\r\n\t\t\t}\r\n\r\n\t\t\tthis.dispatchImmediately(\"maxsizechanged\");\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Maximum height (px)\r\n\t */\r\n\tpublic get maxHeight(): number {\r\n\t\tlet maxHeight = this.getPropertyValue(\"maxHeight\");\r\n\t\tif (!$type.isNumber(maxHeight)) {\r\n\t\t\tif (this.parent) {\r\n\t\t\t\treturn this.parent.maxHeight;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn maxHeight;\r\n\t}\r\n\r\n\t/**\r\n\t * Minimum width of the element in pixels.\r\n\t *\r\n\t * Set to `undefined` to remove the limit.\r\n\t *\r\n\t * @param {Optional<number>}  value  Minimum width (px)\r\n\t */\r\n\tpublic set minWidth(value: Optional<number>) {\r\n\t\tthis.setPropertyValue(\"minWidth\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Optional<number>} Minimum width (px)\r\n\t */\r\n\tpublic get minWidth(): Optional<number> {\r\n\t\treturn this.getPropertyValue(\"minWidth\");\r\n\t}\r\n\r\n\t/**\r\n\t * Minimum height for the element in pixels.\r\n\t *\r\n\t * Set to `undefined` to remove the limit.\r\n\t *\r\n\t * @param {Optional<number>}  value  Minimum height (px)\r\n\t */\r\n\tpublic set minHeight(value: Optional<number>) {\r\n\t\tthis.setPropertyValue(\"minHeight\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Optional<number>} Minimum height (px)\r\n\t */\r\n\tpublic get minHeight(): Optional<number> {\r\n\t\treturn this.getPropertyValue(\"minHeight\");\r\n\t}\r\n\r\n\t/**\r\n\t * Element's absolute or relative width.\r\n\t *\r\n\t * The width can either be absolute, set in numer pixels, or relative, set\r\n\t * in [[Percent]].\r\n\t *\r\n\t * Relative width will be calculated using closest measured ancestor\r\n\t * [[Container]].\r\n\t *\r\n\t * @param {number | Percent}  value  Width (numeric in pixels or relative)\r\n\t */\r\n\tpublic set width(value: number | Percent) {\r\n\r\n\t\tvalue = $type.toNumberOrPercent(value);\r\n\r\n\t\t//let maxWidth = this.maxWidth;\r\n\t\t//if ($type.isNumber(value) && $type.isNumber(maxWidth) && value > maxWidth) {\r\n\t\t//\tvalue = maxWidth;\r\n\t\t//}\r\n\t\tlet changed: boolean = this.setPropertyValue(\"width\", value, true);\r\n\r\n\t\tif (changed) {\r\n\t\t\tthis.percentWidth = undefined;\r\n\t\t\tthis.relativeWidth = undefined;\r\n\r\n\t\t\tif (value instanceof Percent) {\r\n\t\t\t\tthis.percentWidth = value.percent;\r\n\t\t\t\tthis._pixelWidth = undefined;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._pixelWidth = Number(value);\r\n\t\t\t\tthis.maxWidth = this._pixelWidth;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number | Percent} Width (absolute or relative)\r\n\t */\r\n\tpublic get width(): number | Percent {\r\n\t\treturn this.getPropertyValue(\"width\");\r\n\t}\r\n\r\n\t/**\r\n\t * Element's absolute or relative height.\r\n\t *\r\n\t * The height can either be absolute, set in numer pixels, or relative, set\r\n\t * in [[Percent]].\r\n\t *\r\n\t * Relative height will be calculated using closest measured ancestor\r\n\t * [[Container]].\r\n\t *\r\n\t * @param {number | Percent}  value  Height (numeric in pixels or relative)\r\n\t */\r\n\tpublic set height(value: number | Percent) {\r\n\r\n\t\tvalue = $type.toNumberOrPercent(value);\r\n\r\n\r\n\t\t// this approach didn't work well. the legend positioned to right/left expands through all the container\r\n\t\t//let maxHeight = this.maxHeight;\r\n\t\t//if (value > maxHeight) {\r\n\t\t//\tvalue = maxHeight;\r\n\t\t//}\r\n\r\n\t\tlet changed = this.setPropertyValue(\"height\", value, true);\r\n\t\tif (changed) {\r\n\t\t\tthis.percentHeight = undefined;\r\n\t\t\tthis._relativeHeight = undefined;\r\n\r\n\t\t\tif (value instanceof Percent) {\r\n\t\t\t\tthis.percentHeight = value.percent;\r\n\t\t\t\tthis._pixelHeight = undefined;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._pixelHeight = Number(value);\r\n\t\t\t\tthis.maxHeight = this._pixelHeight; // yes, we reset maxWidth\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number | Percent} height (absolute or relative)\r\n\t */\r\n\tpublic get height(): number | Percent {\r\n\t\treturn this.getPropertyValue(\"height\");\r\n\t}\r\n\r\n\t/**\r\n\t * Returns element's width in pixels, if width was set. For actual width use measuredWidth property.\r\n\t *\r\n\t * @readonly\r\n\t * @return {number} Width (px)\r\n\t */\r\n\tpublic get pixelWidth(): number {\r\n\t\tlet width: number;\r\n\t\tif ($type.isNumber(this.percentWidth)) {\r\n\t\t\twidth = this.maxWidth;\r\n\t\t}\r\n\t\telse if ($type.isNumber(this._pixelWidth)) {\r\n\t\t\twidth = this._pixelWidth;\r\n\t\t}\r\n\t\telse {\r\n\t\t\twidth = 0;\r\n\t\t}\r\n\r\n\t\tconst minWidth = this.minWidth;\r\n\r\n\t\tif (minWidth != null && width < minWidth) {\r\n\t\t\twidth = minWidth;\r\n\t\t}\r\n\r\n\t\treturn this.adapter.apply(\r\n\t\t\t\"pixelWidth\",\r\n\t\t\t$math.round(width, this._positionPrecision)\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns element's height in pixels. For actual height use measuredHeight property.\r\n\t *\r\n\t * @readonly\r\n\t * @return {number} Height (px)\r\n\t */\r\n\tpublic get pixelHeight(): number {\r\n\t\tlet height: number;\r\n\t\tif ($type.isNumber(this.percentHeight)) {\r\n\t\t\theight = this.maxHeight;\r\n\t\t}\r\n\t\telse if ($type.isNumber(this._pixelHeight)) {\r\n\t\t\theight = this._pixelHeight;\r\n\t\t}\r\n\t\telse {\r\n\t\t\theight = 0//this._measuredHeightSelf;\r\n\t\t}\r\n\r\n\t\tconst minHeight = this.minHeight;\r\n\r\n\t\tif (minHeight != null && height < minHeight) {\r\n\t\t\theight = minHeight;\r\n\t\t}\r\n\r\n\t\treturn this.adapter.apply(\r\n\t\t\t\"pixelHeight\",\r\n\t\t\t$math.round(height, this._positionPrecision)\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * Element's relative width in [[Percent]].\r\n\t * @ignore\r\n\t *\r\n\t * @param {$type.Optional<number>}  value  Relative width\r\n\t */\r\n\tpublic set relativeWidth(value: $type.Optional<number>) {\r\n\t\tif (this._relativeWidth != value) {\r\n\t\t\tthis._relativeWidth = value;\r\n\t\t\t//\t\t\tthis.invalidate();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {$type.Optional<number>} Relative width\r\n\t * @ignore\r\n\t */\r\n\tpublic get relativeWidth(): $type.Optional<number> {\r\n\t\tconst relativeWidth = this._relativeWidth;\r\n\r\n\t\tif ($type.isNumber(relativeWidth)) {\r\n\t\t\treturn this.adapter.apply(\"relativeWidth\", relativeWidth);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Element's relative height in [[Percent]].\r\n\t *\r\n\t * @param {$type.Optional<number>}  value  Relative height\r\n\t * @ignore\r\n\t */\r\n\tpublic set relativeHeight(value: $type.Optional<number>) {\r\n\t\tif (this._relativeHeight != value) {\r\n\t\t\tthis._relativeHeight = value;\r\n\t\t\t//\t\t\tthis.invalidate();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {$type.Optional<number>} Relative height\r\n\t * @ignore\r\n\t */\r\n\tpublic get relativeHeight(): $type.Optional<number> {\r\n\t\tconst relativeHeight = this._relativeHeight;\r\n\r\n\t\tif ($type.isNumber(relativeHeight)) {\r\n\t\t\treturn this.adapter.apply(\"relativeHeight\", relativeHeight);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns element's measured width in pixels.\r\n\t *\r\n\t * A measured width is actual width of contents plus `paddingRight` and* `paddingLeft`, relative to sprite parent, meaning that\r\n\t * rotation and scale is taken into account.\r\n\t *\r\n\t * @readonly\r\n\t * @return {number} Width (px)\r\n\t */\r\n\tpublic get measuredWidth(): number {\r\n\r\n\t\tif (this.disabled || this.__disabled) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\treturn this.adapter.apply(\"measuredWidth\", this._measuredWidth);\r\n\t\t// it's not good to fit to min/max range as then rotations and scale won't be taken into account\r\n\t\t//return this.adapter.apply(\"measuredWidth\", $math.fitToRange(this._measuredWidth, this.minWidth, this.maxWidth));\r\n\t}\r\n\r\n\t/**\r\n\t * Returns elements's measured height in pixels.\r\n\t *\r\n\t * A measured height is actual height of contents plus `paddingTop` and `paddingBottom`, relative to sprite parent, meaning that\r\n\t * rotation and scale taken into account.\r\n\t *\r\n\t * @readonly\r\n\t * @return {number} Height (px)\r\n\t */\r\n\tpublic get measuredHeight(): number {\r\n\r\n\t\tif (this.disabled || this.__disabled) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\t// it's not good to fit to min/max range as then rotations and scale won't be taken into account\r\n\t\t//return this.adapter.apply(\"measuredHeight\", $math.fitToRange(this._measuredHeight, this.minHeight, this.maxHeight));\r\n\t\treturn this.adapter.apply(\"measuredHeight\", this._measuredHeight);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns element's measured width plus its left and right margins in\r\n\t * pixels.\r\n\t *\r\n\t * @readonly\r\n\t * @return {number} Outer width (px)\r\n\t */\r\n\tpublic get outerWidth(): number {\r\n\t\treturn this.adapter.apply(\r\n\t\t\t\"outerWidth\",\r\n\t\t\tthis.pixelWidth + this.pixelMarginRight + this.pixelMarginLeft\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns element's measured height plus its top and bottom margins in\r\n\t * pixels.\r\n\t *\r\n\t * @readonly\r\n\t * @return {number} Outer height (px)\r\n\t */\r\n\tpublic get outerHeight(): number {\r\n\t\treturn this.adapter.apply(\r\n\t\t\t\"outerHeight\",\r\n\t\t\tthis.pixelHeight + this.pixelMarginTop + this.pixelMarginBottom\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns element's measured inner width in pixels.\r\n\t *\r\n\t * Inner width is actual available space for content, e.g. element's width\r\n\t * minus horizontal padding.\r\n\t *\r\n\t * @readonly\r\n\t * @return {number} Inner width (px)\r\n\t */\r\n\tpublic get innerWidth(): number {\r\n\t\treturn this.adapter.apply(\r\n\t\t\t\"innerWidth\",\r\n\t\t\tMath.max(0, this.pixelWidth - this.pixelPaddingRight - this.pixelPaddingLeft)\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns element's measured inner height in pixels.\r\n\t *\r\n\t * Inner height is actual available space for content, e.g. element's height\r\n\t * minus vertical padding.\r\n\t *\r\n\t * @readonly\r\n\t * @return {number} Inner height (px)\r\n\t */\r\n\tpublic get innerHeight(): number {\r\n\t\treturn this.adapter.apply(\r\n\t\t\t\"innerHeight\",\r\n\t\t\tMath.max(0, this.pixelHeight - this.pixelPaddingTop - this.pixelPaddingBottom)\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns element's current \"global\" scale.\r\n\t *\r\n\t * Scale values accumulate over hierarchy of elements.\r\n\t *\r\n\t * E.g. if a [[Container]] has `scale = 2` and it's child has a `scale = 2`,\r\n\t * the child's `globalScale` will be 4. (a multitude of `2 x 2`)\r\n\t *\r\n\t * @readonly\r\n\t * @return {number} Global scale\r\n\t */\r\n\tpublic get globalScale(): number {\r\n\t\tlet scale: number = this.scale;\r\n\t\tif (this.parent) {\r\n\t\t\tscale = scale * this.parent.globalScale;\r\n\t\t}\r\n\t\treturn this.adapter.apply(\"globalScale\", scale);\r\n\t}\r\n\r\n\t/**\r\n\t * Scale of the element.\r\n\t *\r\n\t * The scale is set from 0 (element reduced to nothing) to 1 (default size).\r\n\t * * 2 will mean element is increased twice.\r\n\t * * 0.5 - reduced by 50%.\r\n\t *\r\n\t * Etc.\r\n\t *\r\n\t * @param {number}  value  Scale (0-1)\r\n\t */\r\n\tpublic set scale(value: number) {\r\n\t\tvalue = $type.toNumber(value);\r\n\t\tif (value < 0) {\r\n\t\t\tvalue = 0;\r\n\t\t}\r\n\t\tif (value != this.getPropertyValue(\"scale\")) {\r\n\t\t\tthis.dispatch(\"globalscalechanged\");\r\n\t\t}\r\n\r\n\t\tthis.setPropertyValue(\"scale\", value, false, true);\r\n\r\n\t\tthis.strokeWidth = this.strokeWidth; // to handle nonScalingStroke\r\n\r\n\t\tthis.updateFilterScale();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Scale (0-1)\r\n\t */\r\n\tpublic get scale(): number {\r\n\t\treturn this.getPropertyValue(\"scale\");\r\n\t}\r\n\r\n\t/**\r\n\t * Sets all four margins for the element at once.\r\n\t *\r\n\t * Margins are set in pixels.\r\n\t *\r\n\t * @param  {number}  top     Top margin\r\n\t * @param  {number}  right   Right margin\r\n\t * @param  {number}  bottom  Bottom margin\r\n\t * @param  {number}  left    Left margin\r\n\t * @return {Sprite}          Current element\r\n\t */\r\n\tpublic margin(top: number, right: number, bottom: number, left: number): Sprite {\r\n\t\tthis.marginTop = top;\r\n\t\tthis.marginRight = right;\r\n\t\tthis.marginBottom = bottom;\r\n\t\tthis.marginLeft = left;\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * Left margin - absolute (px) or relative ([[Percent]]).\r\n\t *\r\n\t * @param {number | Percent}  value  Margin value\r\n\t */\r\n\tpublic set marginLeft(value: number | Percent) {\r\n\t\tvalue = $type.toNumberOrPercent(value);\r\n\t\tthis.setPropertyValue(\"marginLeft\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number | Percent} Margin value\r\n\t */\r\n\tpublic get marginLeft(): number | Percent {\r\n\t\treturn this.getPropertyValue(\"marginLeft\");\r\n\t}\r\n\r\n\t/**\r\n\t * Right margin - absolute (px) or relative ([[Percent]]).\r\n\t *\r\n\t * @param {number | Percent}  value  Margin value\r\n\t */\r\n\tpublic set marginRight(value: number | Percent) {\r\n\t\tvalue = $type.toNumberOrPercent(value);\r\n\t\tthis.setPropertyValue(\"marginRight\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number | Percent} Margin value\r\n\t */\r\n\tpublic get marginRight(): number | Percent {\r\n\t\treturn this.getPropertyValue(\"marginRight\");\r\n\t}\r\n\r\n\t/**\r\n\t * Top margin - absolute (px) or relative ([[Percent]]).\r\n\t *\r\n\t * @param {number | Percent}  value  Margin value\r\n\t */\r\n\tpublic set marginTop(value: number | Percent) {\r\n\t\tvalue = $type.toNumberOrPercent(value);\r\n\t\tthis.setPropertyValue(\"marginTop\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number | Percent} Margin value\r\n\t */\r\n\tpublic get marginTop(): number | Percent {\r\n\t\treturn this.getPropertyValue(\"marginTop\");\r\n\t}\r\n\r\n\t/**\r\n\t * Bottom margin - absolute (px) or relative ([[Percent]]).\r\n\t *\r\n\t * @param {number | Percent}  value  Margin value\r\n\t */\r\n\tpublic set marginBottom(value: number | Percent) {\r\n\t\tvalue = $type.toNumberOrPercent(value);\r\n\t\tthis.setPropertyValue(\"marginBottom\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number | Percent} Margin value\r\n\t */\r\n\tpublic get marginBottom(): number | Percent {\r\n\t\treturn this.getPropertyValue(\"marginBottom\");\r\n\t}\r\n\r\n\t/**\r\n\t * Returns current right margin in pixels.\r\n\t *\r\n\t * @readonly\r\n\t * @return {number} Right margin (px)\r\n\t */\r\n\tpublic get pixelMarginRight(): number {\r\n\t\treturn this.adapter.apply(\"pixelMarginRight\", this.getPixelX(this.marginRight));\r\n\t}\r\n\r\n\t/**\r\n\t * Returns current relative right margin.\r\n\t *\r\n\t * @readonly\r\n\t * @return {number} Relative right margin\r\n\t */\r\n\tpublic get relativeMarginRight(): number {\r\n\t\t// @todo Maybe use [[Percent]]?\r\n\t\treturn this.adapter.apply(\"relativeMarginRight\", this.getRelativeX(this.marginRight));\r\n\t}\r\n\r\n\t/**\r\n\t * Returns current left margin in pixels.\r\n\t *\r\n\t * @readonly\r\n\t * @return {number} Left margin (px)\r\n\t */\r\n\tpublic get pixelMarginLeft(): number {\r\n\t\treturn this.adapter.apply(\"pixelMarginLeft\", this.getPixelX(this.marginLeft));\r\n\t}\r\n\r\n\t/**\r\n\t * Returns current relative left margin.\r\n\t *\r\n\t * @readonly\r\n\t * @return {number} Relative left margin\r\n\t */\r\n\tpublic get relativeMarginLeft(): number {\r\n\t\t//@todo Maybe use [[Percent]]?\r\n\t\treturn this.adapter.apply(\"relativeMarginLeft\", this.getRelativeX(this.marginLeft));\r\n\t}\r\n\r\n\t/**\r\n\t * Returns current top margin in pixels.\r\n\t *\r\n\t * @readonly\r\n\t * @return {number} Top margin (px)\r\n\t */\r\n\tpublic get pixelMarginTop(): number {\r\n\t\treturn this.adapter.apply(\"pixelMarginTop\", this.getPixelY(this.marginTop));\r\n\t}\r\n\r\n\t/**\r\n\t * Returns current relative top margin.\r\n\t *\r\n\t * @readonly\r\n\t * @return {number} Relative top margin\r\n\t */\r\n\tpublic get relativeMarginTop(): number {\r\n\t\t// @todo Maybe use [[Percent]]?\r\n\t\treturn this.adapter.apply(\"relativeMarginTop\", this.getRelativeY(this.marginTop));\r\n\t}\r\n\r\n\t/**\r\n\t * Returns current bottom margin in pixels.\r\n\t *\r\n\t * @readonly\r\n\t * @return {number} Bottom margin (px)\r\n\t */\r\n\tpublic get pixelMarginBottom(): number {\r\n\t\treturn this.adapter.apply(\"pixelMarginBottom\", this.getPixelY(this.marginBottom));\r\n\t}\r\n\r\n\t/**\r\n\t * Returns current relative bottom margin.\r\n\t *\r\n\t * @readonly\r\n\t * @return {number} Relative bottom margin\r\n\t */\r\n\tpublic get relativeMarginBottom(): number {\r\n\t\t// @todo Maybe use [[Percent]]?\r\n\t\treturn this.adapter.apply(\"relativeMarginBottom\", this.getRelativeY(this.marginBottom));\r\n\t}\r\n\r\n\t/**\r\n\t * Sets padding for the element in pixels.\r\n\t *\r\n\t * @param  {number}  top     Top padding (px)\r\n\t * @param  {number}  right   Right padding (px)\r\n\t * @param  {number}  bottom  Bottom padding (px)\r\n\t * @param  {number}  left    Left padding (px)\r\n\t * @return {Sprite}          Element\r\n\t */\r\n\tpublic padding(top: number, right: number, bottom: number, left: number): Sprite {\r\n\t\tthis.paddingTop = top;\r\n\t\tthis.paddingRight = right;\r\n\t\tthis.paddingBottom = bottom;\r\n\t\tthis.paddingLeft = left;\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * Left padding - absolute (px) or relative ([[Percent]]).\r\n\t *\r\n\t * @param {number | Percent}  value  Padding value\r\n\t */\r\n\tpublic set paddingLeft(value: number | Percent) {\r\n\t\tvalue = $type.toNumberOrPercent(value);\r\n\t\tthis.setPropertyValue(\"paddingLeft\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number | Percent} Padding value\r\n\t */\r\n\tpublic get paddingLeft(): number | Percent {\r\n\t\treturn this.getPropertyValue(\"paddingLeft\");\r\n\t}\r\n\r\n\t/**\r\n\t * Right padding - absolute (px) or relative ([[Percent]]).\r\n\t *\r\n\t * @param {number | Percent}  value  Padding value\r\n\t */\r\n\tpublic set paddingRight(value: number | Percent) {\r\n\t\tvalue = $type.toNumberOrPercent(value);\r\n\t\tthis.setPropertyValue(\"paddingRight\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number | Percent} Padding value\r\n\t */\r\n\tpublic get paddingRight(): number | Percent {\r\n\t\treturn this.getPropertyValue(\"paddingRight\");\r\n\t}\r\n\r\n\t/**\r\n\t * Top padding - absolute (px) or relative ([[Percent]]).\r\n\t *\r\n\t * @param {number | Percent}  value  Padding value\r\n\t */\r\n\tpublic set paddingTop(value: number | Percent) {\r\n\t\tvalue = $type.toNumberOrPercent(value);\r\n\t\tthis.setPropertyValue(\"paddingTop\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number | Percent} Padding value\r\n\t */\r\n\tpublic get paddingTop(): number | Percent {\r\n\t\treturn this.getPropertyValue(\"paddingTop\");\r\n\t}\r\n\r\n\t/**\r\n\t * Bottom padding - absolute (px) or relative ([[Percent]]).\r\n\t *\r\n\t * @param {number | Percent}  value  Padding value\r\n\t */\r\n\tpublic set paddingBottom(value: number | Percent) {\r\n\t\tvalue = $type.toNumberOrPercent(value);\r\n\t\tthis.setPropertyValue(\"paddingBottom\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number | Percent} Padding value\r\n\t */\r\n\tpublic get paddingBottom(): number | Percent {\r\n\t\treturn this.getPropertyValue(\"paddingBottom\");\r\n\t}\r\n\r\n\t/**\r\n\t * Returns current right padding in pixels.\r\n\t *\r\n\t * @readonly\r\n\t * @return {number} Right padding (px)\r\n\t */\r\n\tpublic get pixelPaddingRight(): number {\r\n\t\treturn this.getPixelX(this.paddingRight);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns current relative right padding.\r\n\t *\r\n\t * @readonly\r\n\t * @return {number} Relative right padding\r\n\t */\r\n\tpublic get relativePaddingRight(): number {\r\n\t\t// @todo Maybe use [[Percent]]?\r\n\t\treturn this.getRelativeX(this.paddingRight);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns current left padding in pixels.\r\n\t *\r\n\t * @readonly\r\n\t * @return {number} Left padding (px)\r\n\t */\r\n\tpublic get pixelPaddingLeft(): number {\r\n\t\treturn this.getPixelX(this.paddingLeft);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns current relative left padding.\r\n\t *\r\n\t * @readonly\r\n\t * @return {number} Relative left padding\r\n\t */\r\n\tpublic get relativePaddingLeft(): number {\r\n\t\t// @todo Maybe use [[Percent]]?\r\n\t\treturn this.getRelativeX(this.paddingLeft);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns current top padding in pixels.\r\n\t *\r\n\t * @readonly\r\n\t * @return {number} Top padding (px)\r\n\t */\r\n\tpublic get pixelPaddingTop(): number {\r\n\t\treturn this.getPixelY(this.paddingTop);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns current relative top padding.\r\n\t *\r\n\t * @readonly\r\n\t * @return {number} Relative top padding\r\n\t */\r\n\tpublic get relativePaddingTop(): number {\r\n\t\t// @todo Maybe use [[Percent]]?\r\n\t\treturn this.getRelativeY(this.paddingTop);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns current bottom padding in pixels.\r\n\t *\r\n\t * @readonly\r\n\t * @return {number} Bottom padding (px)\r\n\t */\r\n\tpublic get pixelPaddingBottom(): number {\r\n\t\treturn this.getPixelY(this.paddingBottom);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns current relative bottom padding.\r\n\t *\r\n\t * @readonly\r\n\t * @return {number} Relative bottom padding\r\n\t */\r\n\tpublic get relativePaddingBottom(): number {\r\n\t\t// @todo Maybe use [[Percent]]?\r\n\t\treturn this.getRelativeY(this.paddingBottom);\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * ==========================================================================\r\n\t * APPEARANCE-RELATED PROPERTIES AND RELATED STUFF\r\n\t * ==========================================================================\r\n\t * @hidden\r\n\t */\r\n\r\n\t/**\r\n\t * [[ColorModifier]] that can be used to modify color and pattern of the\r\n\t * element's fill, e.g. create gradients.\r\n\t *\r\n\t * @param {ColorModifier}  value  Fill color modifiier\r\n\t */\r\n\tpublic set fillModifier(value: ColorModifier) {\r\n\t\tthis.setPropertyValue(\"fillModifier\", value);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {ColorModifier} Fill color modifier\r\n\t */\r\n\tpublic get fillModifier(): ColorModifier {\r\n\t\treturn this.getPropertyValue(\"fillModifier\");\r\n\t}\r\n\r\n\t/**\r\n\t * [[ColorModifier]] that can be used to modify color and pattern of the\r\n\t * element's stroke (outline), e.g. create gradients.\r\n\t *\r\n\t * @param {ColorModifier}  value  Stroke color modifier\r\n\t */\r\n\tpublic set strokeModifier(value: ColorModifier) {\r\n\t\tthis.setPropertyValue(\"strokeModifier\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {ColorModifier} Stroke color modifier\r\n\t */\r\n\tpublic get strokeModifier(): ColorModifier {\r\n\t\treturn this.getPropertyValue(\"strokeModifier\");\r\n\t}\r\n\r\n\t/**\r\n\t * Element's fill opacity.\r\n\t *\r\n\t * Opacity ranges from 0 (fully transparent) to 1 (fully opaque).\r\n\t *\r\n\t * @param {number}  value  Opacity (0-1)\r\n\t */\r\n\tpublic set fillOpacity(value: number) {\r\n\t\tvalue = $math.toNumberRange(value, 0, 1);\r\n\t\tif (this.setPropertyValue(\"fillOpacity\", value)) {\r\n\t\t\tthis.setSVGAttribute({ \"fill-opacity\": value });\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Opacity (0-9)\r\n\t */\r\n\tpublic get fillOpacity(): number {\r\n\t\treturn this.getPropertyValue(\"fillOpacity\");\r\n\t}\r\n\r\n\t/**\r\n\t * Element's fill color or pattern.\r\n\t *\r\n\t * @param {Color | Pattern | LinearGradient | RadialGradient}  value  Fill\r\n\t */\r\n\tpublic set fill(value: Color | Pattern | LinearGradient | RadialGradient) {\r\n\t\tthis.setFill(value);\r\n\t}\r\n\r\n\t/**\r\n\t * Sets actual `fill` property on the SVG element, including applicable color\r\n\t * modifiers.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {Color | Pattern | LinearGradient | RadialGradient}  value  Fill\r\n\t */\r\n\tprotected setFill(value: Color | Pattern | LinearGradient | RadialGradient): void {\r\n\r\n\t\tif (!$type.isObject(value)) {\r\n\t\t\tvalue = toColor(value);\r\n\t\t}\r\n\r\n\t\tif (this.setPropertyValue(\"fill\", value) || this.fillModifier) {\r\n\t\t\t// this can not go into next if, as value is turned to Gradient\r\n\t\t\tif (value instanceof Color) {\r\n\t\t\t\tif (this.fillModifier) {\r\n\t\t\t\t\tvalue = this.fillModifier.modify(value);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// todo: review this place when some Color type will be added\r\n\t\t\tif (value instanceof Color) {\r\n\r\n\t\t\t\tthis.setSVGAttribute({ \"fill\": value.toString() });\r\n\t\t\t}\r\n\t\t\telse if (!$type.hasValue(value)) {\r\n\t\t\t\tthis.removeSVGAttribute(\"fill\");\r\n\t\t\t}\r\n\t\t\telse if (<any>value instanceof Pattern || <any>value instanceof LinearGradient || <any>value instanceof RadialGradient) {\r\n\t\t\t\tlet fill = value;\r\n\t\t\t\tfill.paper = this.paper;\r\n\t\t\t\tthis.setSVGAttribute({ \"fill\": \"url(#\" + fill.id + \")\" });\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Color} Fill\r\n\t */\r\n\tpublic get fill(): Color | Pattern | LinearGradient | RadialGradient {\r\n\t\treturn this.getPropertyValue(\"fill\");\r\n\t}\r\n\r\n\t/**\r\n\t * Element's opacity.\r\n\t *\r\n\t * Opacity setting can range from 0 (fully transparent) to 1 (fully opaque).\r\n\t *\r\n\t * ATTENTION: It is highly not recommended to use `opacity` directly on the\r\n\t * element. The charts use `opacity` to hide/show elements, so your setting\r\n\t * might be lost if element is hidden and then later shown.\r\n\t *\r\n\t * Instead use methods `hide()` and `show()` to completely toggle off and on\r\n\t * the element.\r\n\t *\r\n\t * Or, use properties `fillOpacity` and `strokeOpacity`, if you need to make\r\n\t * the element semi-transparent.\r\n\t *\r\n\t * @param {number} value Opacity (0-1)\r\n\t */\r\n\tpublic set opacity(value: number) {\r\n\t\tvalue = $math.toNumberRange(value, 0, 1);\r\n\t\tif (this.setPropertyValue(\"opacity\", value)) {\r\n\t\t\tthis.setSVGAttribute({ \"opacity\": value });\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Opacity (0-1)\r\n\t */\r\n\tpublic get opacity(): number {\r\n\t\treturn this.getPropertyValue(\"opacity\");\r\n\t}\r\n\r\n\t/**\r\n\t * Element's stroke (outline) color or pattern.\r\n\t *\r\n\t * @param {Color | Pattern | LinearGradient | RadialGradient}  value  Stroke setting\r\n\t */\r\n\tpublic set stroke(value: Color | Pattern | LinearGradient | RadialGradient) {\r\n\t\tthis.setStroke(value);\r\n\t}\r\n\r\n\t/**\r\n\t * Sets actual `stroke` property on the SVG element, including applicable\r\n\t * color modifiers.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {Color | Pattern | LinearGradient | RadialGradient} value Stroke setting\r\n\t */\r\n\tprotected setStroke(value: Color | Pattern | LinearGradient | RadialGradient) {\r\n\t\tif (!$type.isObject(value)) {\r\n\t\t\tvalue = toColor(value);\r\n\t\t}\r\n\r\n\t\tif (this.setPropertyValue(\"stroke\", value) || this.strokeModifier) {\r\n\t\t\t// this can not go into next if, as value is turned to Gradient\r\n\t\t\tif (value instanceof Color) {\r\n\t\t\t\tif (this.strokeModifier) {\r\n\t\t\t\t\tvalue = this.strokeModifier.modify(value);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (value instanceof Color) {\r\n\t\t\t\tif (value.hex == \"none\") {\r\n\t\t\t\t\tthis.removeSVGAttribute(\"stroke\");\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.setSVGAttribute({ \"stroke\": value.toString() });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (!$type.hasValue(value)) {\r\n\t\t\t\tthis.removeSVGAttribute(\"stroke\");\r\n\t\t\t}\r\n\t\t\telse if (<any>value instanceof Pattern || <any>value instanceof LinearGradient || <any>value instanceof RadialGradient) {\r\n\t\t\t\tlet stroke = value;\r\n\t\t\t\tstroke.paper = this.paper;\r\n\t\t\t\tthis.setSVGAttribute({ \"stroke\": \"url(#\" + stroke.id + \")\" });\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Color} Stroke setting\r\n\t */\r\n\tpublic get stroke(): Color | Pattern | LinearGradient | RadialGradient {\r\n\t\treturn this.getPropertyValue(\"stroke\");\r\n\t}\r\n\r\n\t/**\r\n\t * Stroke (outline) opacity.\r\n\t *\r\n\t * The values may range from 0 (fully transparent) to 1 (fully opaque).\r\n\t *\r\n\t * @param {number}  value  Opacity (0-1)\r\n\t */\r\n\tpublic set strokeOpacity(value: number) {\r\n\t\tvalue = $math.toNumberRange(value, 0, 1);\r\n\t\tif (this.setPropertyValue(\"strokeOpacity\", value)) {\r\n\t\t\tthis.setSVGAttribute({ \"stroke-opacity\": value });\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Opacity (0-1)\r\n\t */\r\n\tpublic get strokeOpacity(): number {\r\n\t\treturn this.getPropertyValue(\"strokeOpacity\");\r\n\t}\r\n\r\n\t/**\r\n\t * Controls if the element's stroke (outline) should remain keep constant\r\n\t * thicnkess and do not scale when the whole element is resized.\r\n\t *\r\n\t * @param {boolean}  value  Do not scale stroke (outline)\r\n\t */\r\n\tpublic set nonScalingStroke(value: boolean) {\r\n\t\tvalue = $type.toBoolean(value);\r\n\t\tthis.setPropertyValue(\"nonScalingStroke\", value);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Do not scale stroke (outline)\r\n\t */\r\n\tpublic get nonScalingStroke(): boolean {\r\n\t\treturn this.getPropertyValue(\"nonScalingStroke\");\r\n\t}\r\n\r\n\t/**\r\n\t * Controls if element should keep constant size and not scale even if there is\r\n\t * space available, or it does not fit.\r\n\t *\r\n\t * @param {boolean}  value  Is element scaleable?\r\n\t */\r\n\tpublic set nonScaling(value: boolean) {\r\n\t\t// @todo Description (review)\r\n\t\tvalue = $type.toBoolean(value);\r\n\t\tthis.setPropertyValue(\"nonScaling\", value);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Is element scaleable?\r\n\t */\r\n\tpublic get nonScaling(): boolean {\r\n\t\treturn this.getPropertyValue(\"nonScaling\");\r\n\t}\r\n\r\n\t/**\r\n\t * Stroke (outline) thickness in pixels.\r\n\t *\r\n\t * @param {number}  value  Thickness (px)\r\n\t */\r\n\tpublic set strokeWidth(value: number) {\r\n\t\tvalue = $type.toNumber(value);\r\n\t\tthis.setPropertyValue(\"strokeWidth\", value, true);\r\n\r\n\t\tif (this.nonScalingStroke) {\r\n\t\t\tif (!$type.isNumber(value)) {\r\n\t\t\t\tvalue = 1;\r\n\t\t\t}\r\n\t\t\tvalue = value / this.globalScale;\r\n\t\t}\r\n\r\n\t\tthis.setSVGAttribute({ \"stroke-width\": value });\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Thickness (px)\r\n\t */\r\n\tpublic get strokeWidth(): number {\r\n\t\treturn this.getPropertyValue(\"strokeWidth\");\r\n\t}\r\n\r\n\t/**\r\n\t * A `stroke-dasharray` for the stroke (outline).\r\n\t *\r\n\t * \"Dasharray\" allows setting rules to make lines dashed, dotted, etc.\r\n\t *\r\n\t * @see {@link https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-dasharray} for more info on `stroke-dasharray`\r\n\t * @param {string}  value  `stroke-dasharray`\r\n\t */\r\n\tpublic set strokeDasharray(value: string) {\r\n\t\tvalue = $type.toText(value);\r\n\t\tif (this.setPropertyValue(\"strokeDasharray\", value)) {\r\n\t\t\tthis.setSVGAttribute({ \"stroke-dasharray\": value });\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {string} `stroke-dasharray`\r\n\t */\r\n\tpublic get strokeDasharray(): string {\r\n\t\treturn this.getPropertyValue(\"strokeDasharray\");\r\n\t}\r\n\r\n\t/**\r\n\t * An SVG-specific `shape-rendering` value.\r\n\t *\r\n\t * `shape-rendering` controls how vector graphics are drawn and rendered.\r\n\t *\r\n\t * @see {@link https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/shape-rendering} for more information about `shape-rendering`\r\n\t * @default \"auto\"\r\n\t * @param {ShapeRendering}  value  'shape-rendering' value\r\n\t */\r\n\tpublic set shapeRendering(value: ShapeRendering) {\r\n\t\tvalue = <ShapeRendering>$type.toText(value);\r\n\t\tif (this.setPropertyValue(\"shapeRendering\", value)) {\r\n\t\t\tthis.setSVGAttribute({ \"shape-rendering\": value });\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {ShapeRendering} 'shape-rendering' value\r\n\t */\r\n\tpublic get shapeRendering(): ShapeRendering {\r\n\t\treturn this.getPropertyValue(\"shapeRendering\");\r\n\t}\r\n\r\n\t/**\r\n\t * Controls if SVG vectors should be drawn with \"pixel\" precision, producing\r\n\t * perfectly crisp lines on retina displays.\r\n\t *\r\n\t * Setting this to `true` might improve visual quality, but may have a\r\n\t * negative effect on performance.\r\n\t *\r\n\t * Different elements use different default setting for `pixelPerfect`.\r\n\t *\r\n\t * We recommend leaving this at their default settings, unless there's a\r\n\t * specific need.\r\n\t *\r\n\t * @param {boolean}  value  Use pixel perfect?\r\n\t */\r\n\tpublic set pixelPerfect(value: boolean) {\r\n\t\tvalue = $type.toBoolean(value);\r\n\t\tif (value) {\r\n\t\t\tthis._positionPrecision = 0;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis._positionPrecision = 8;\r\n\t\t}\r\n\r\n\t\tthis.setPropertyValue(\"pixelPerfect\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Use pixel perfect?\r\n\t */\r\n\tpublic get pixelPerfect(): boolean {\r\n\t\treturn this.getPropertyValue(\"pixelPerfect\");\r\n\t}\r\n\r\n\t/**\r\n\t * An RTL (righ-to-left) setting.\r\n\t *\r\n\t * RTL may affect alignment, text, and other visual properties.\r\n\t *\r\n\t * @param {DateFormatter}  value  `true` for to use RTL\r\n\t */\r\n\tpublic set rtl(value: boolean) {\r\n\t\tvalue = $type.toBoolean(value);\r\n\t\tthis._rtl = value;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} RTL?\r\n\t */\r\n\tpublic get rtl(): boolean {\r\n\t\tif ($type.hasValue(this._rtl)) {\r\n\t\t\treturn this._rtl;\r\n\t\t}\r\n\t\telse if (this.parent) {\r\n\t\t\treturn this.parent.rtl;\r\n\t\t}\r\n\t\tthis.rtl = false;\r\n\t\treturn this.rtl;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * ==========================================================================\r\n\t * VISIBILITY AND ORDER PROPERTIES AND RELATED STUFF\r\n\t * ==========================================================================\r\n\t * @hidden\r\n\t */\r\n\r\n\t/**\r\n \t * Reveals (fades in) hidden element.\r\n \t *\r\n \t * Has no effect if element is already visible.\r\n \t *\r\n \t * If `duration` is not specified, it will use default.\r\n \t *\r\n \t * @param  {number}  duration  Fade in duration (ms)\r\n \t * @return {Optional<Animation>} Animation object if such object was created\r\n \t */\r\n\tpublic show(duration?: number): $type.Optional<Animation> {\r\n\t\treturn this.showReal(duration);\r\n\t}\r\n\r\n\t/**\r\n\t * Performs actual operations to reveal this element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {number} duration Fade in duration (ms)\r\n\t * @return {number}          Fade in duration (ms)\r\n\t */\r\n\tprotected showReal(duration?: number): $type.Optional<Animation> {\r\n\t\tlet transition: $type.Optional<Animation>;\r\n\r\n\t\tconst properties = this.defaultState.properties;\r\n\r\n\t\tif (!this.disabled && (this.isHidden || !this.visible || this.isHiding || (properties.opacity != null && this.opacity < properties.opacity && !this.isShowing))) {\r\n\r\n\t\t\tif (!$type.isNumber(duration)) {\r\n\t\t\t\tduration = this.defaultState.transitionDuration;\r\n\t\t\t}\r\n\t\t\tthis.isHidden = false;\r\n\t\t\tthis.isHiding = false;\r\n\t\t\tthis.isShowing = true;\r\n\r\n\t\t\tif (this._hideAnimation) {\r\n\t\t\t\tthis._hideAnimation.dispose();\r\n\t\t\t\tthis._hideAnimation = null;\r\n\t\t\t}\r\n\r\n\t\t\t// Cancel hide handler just in case it was there\r\n\t\t\tif (this._showHideDisposer) {\r\n\t\t\t\tthis.removeDispose(this._showHideDisposer);\r\n\t\t\t}\r\n\r\n\t\t\t// Apply current state\r\n\t\t\ttransition = this.applyCurrentState(duration);\r\n\r\n\t\t\tif (transition) {\r\n\t\t\t\tthis._showHideDisposer = transition.events.on(\"animationended\", () => {\r\n\t\t\t\t\tthis.isShowing = false;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis._disposers.push(this._showHideDisposer);\r\n\t\t\t}\r\n\t\t\t// Make it visible\r\n\t\t\tlet visible = this.defaultState.properties.visible;\r\n\t\t\tif (!$type.hasValue(visible)) {\r\n\t\t\t\tvisible = true;\r\n\t\t\t}\r\n\t\t\tthis.visible = visible;\r\n\r\n\t\t\t// Dispatch \"show\" event\r\n\t\t\tthis.dispatchImmediately(\"shown\");\r\n\t\t}\r\n\r\n\t\treturn transition;\r\n\t}\r\n\r\n\t/**\r\n\t * Initiates hiding of Sprite.\r\n\t * When called it will fade out the the Sprite to transparency, then make it\r\n\t * invisible.\r\n\t * @param {number} duration Duration in millisecons\r\n\t */\r\n\r\n\t/**\r\n\t * Hides (fades out) the element, and applies `hidden` state.\r\n\t *\r\n\t * Has no effect if element is already hidden.\r\n \t *\r\n \t * If `duration` is not specified, it will use default.\r\n \t *\r\n \t * While element is fading out, its `isHiding` property will resolve to\r\n \t * `true`.\r\n \t *\r\n \t * When element is hidden, its `visible` property will resolve to `false`.\r\n\t *\r\n\t * @param  {number}  duration  Fade out duration (ms)\r\n\t * @return {Optional<Animation>} hide Animation object if such object was created\r\n\t */\r\n\tpublic hide(duration?: number): $type.Optional<Animation> {\r\n\t\treturn this.hideReal(duration);\r\n\t}\r\n\r\n\t/**\r\n\t * Hides actual SVG elements and handles hiding animations.\r\n\t *\r\n\t * @param  {number}  duration  Fade out duration (ms)\r\n\t * @return {Animation}            Fade out duration (ms)\r\n\t * @ignore\r\n\t */\r\n\tprotected hideReal(duration?: number): $type.Optional<Animation> {\r\n\t\tlet transition: $type.Optional<Animation>;\r\n\r\n\t\tif (!this.isHiding && this.visible) {\r\n\r\n\t\t\tthis.hideTooltip(0);\r\n\r\n\t\t\tthis.isShowing = false;\r\n\r\n\t\t\tif (this._hideAnimation != null) {\r\n\t\t\t\tthis._hideAnimation.dispose();\r\n\t\t\t\tthis._hideAnimation = null;\r\n\t\t\t}\r\n\r\n\t\t\t// Cancel hide handler just in case it was there\r\n\t\t\tif (this._showHideDisposer) {\r\n\t\t\t\tthis.removeDispose(this._showHideDisposer);\r\n\t\t\t}\r\n\r\n\t\t\t// Get state\r\n\t\t\tlet hiddenState = this.states.getKey(\"hidden\");\r\n\r\n\t\t\t// Transition to \"hidden\" state, provided Sprite has one set\r\n\t\t\tif (hiddenState) {\r\n\t\t\t\t// Yes, we have a \"hidden\" state\r\n\t\t\t\t// `setState` will return an `Animation` object which we can set\r\n\t\t\t\t// events on\r\n\t\t\t\ttransition = this.setState(hiddenState, duration, undefined);\r\n\t\t\t\tif (transition) {\r\n\t\t\t\t\tthis._hideAnimation = transition;\r\n\t\t\t\t\tthis._showHideDisposer = transition.events.on(\"animationended\", () => {\r\n\t\t\t\t\t\tthis.isHiding = false;\r\n\t\t\t\t\t\tthis.isHidden = true;\r\n\t\t\t\t\t}, this);\r\n\r\n\t\t\t\t\tthis._disposers.push(this._showHideDisposer);\r\n\r\n\t\t\t\t\t// Thrown everything into `_disposers` just in case Sprite gets\r\n\t\t\t\t\t// destroyed in the meantime\r\n\t\t\t\t\tthis._disposers.push(transition);\r\n\r\n\t\t\t\t\tif (transition.progress == 1) {\r\n\t\t\t\t\t\tthis.isHiding = false;\r\n\t\t\t\t\t\tthis.isHidden = true;\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// No hidden state, let's just set `visible` and call it a day\r\n\t\t\t\tthis.visible = false;\r\n\t\t\t\tthis.isHiding = false;\r\n\t\t\t\tthis.isHidden = true;\r\n\t\t\t}\r\n\r\n\t\t\t// Dispach \"hidden\" event\r\n\t\t\tthis.dispatchImmediately(\"hidden\");\r\n\t\t\tthis.invalidate(); // hide it at once to avoid flickers // validate() causes SO\r\n\t\t}\r\n\r\n\t\tif (!$type.isNumber(duration)) {\r\n\t\t\tduration = this.hiddenState.transitionDuration;\r\n\t\t}\r\n\r\n\t\treturn transition;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets visibility of the element.\r\n\t *\r\n\t * @param {boolean} value Visible?\r\n\t */\r\n\tpublic set visible(value: boolean) {\r\n\t\tvalue = $type.toBoolean(value);\r\n\t\tthis.setVisibility(value);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns current visibility of the element.\r\n\t *\r\n\t * @return {boolean} Visible?\r\n\t */\r\n\tpublic get visible(): boolean {\r\n\t\tlet value = this.getPropertyValue(\"visible\");\r\n\t\tif (!$type.hasValue(value)) {\r\n\t\t\tvalue = true;\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Sets `visibility` property:\r\n\t *\r\n\t * * `true` - visible\r\n\t * * `false` - hidden\r\n\t *\r\n\t * @param  {boolean}  value  `true` - visible, `false` - hidden\r\n\t * @return {string}          Current visibility\r\n\t */\r\n\tpublic setVisibility(value: boolean) {\r\n\t\tif (this.setPropertyValue(\"visible\", value)) {\r\n\t\t\tif (value) {\r\n\t\t\t\tthis.group.removeAttr(\"visibility\");\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.group.attr({ \"visibility\": \"hidden\" });\r\n\t\t\t}\r\n\t\t\tthis.invalidatePosition();\r\n\r\n\t\t\tthis.dispatchImmediately(\"visibilitychanged\");\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * A \"zIndex\" of the element.\r\n\t *\r\n\t * \"zIndex\" determines the order of how elements are placed over each other.\r\n\t *\r\n\t * Higher \"zIndex\" will mean the element will be draw on top of elements\r\n\t * with lower \"zIndexes\".\r\n\t *\r\n\t * @param {number}  value  zIndex\r\n\t */\r\n\tpublic set zIndex(value: number) {\r\n\t\tvalue = $type.toNumber(value);\r\n\t\tif (this.setPropertyValue(\"zIndex\", value)) {\r\n\t\t\tthis.dispatchImmediately(\"zIndexChanged\");\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} zIndex\r\n\t */\r\n\tpublic get zIndex(): number {\r\n\t\treturn this.getPropertyValue(\"zIndex\");\r\n\t}\r\n\r\n\t/**\r\n\t * Moves the element to the very top in element order, so that it appears\r\n\t * in front of other elements.\r\n\t */\r\n\tpublic toFront(): void {\r\n\t\tlet parent = this.parent;\r\n\t\tif (parent && parent.children.indexOf(this) != parent.children.length - 1) {\r\n\t\t\tparent.children.moveValue(this, parent.children.length - 1);\r\n\t\t\tthis.dispatchImmediately(\"zIndexChanged\");\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Moves the element to the very bottom in the element order, so that it\r\n\t * appears behind other elements.\r\n\t */\r\n\tpublic toBack(): void {\r\n\t\tlet parent = this.parent;\r\n\t\tif (parent && parent.children.indexOf(this) != 0) {\r\n\t\t\tparent.children.moveValue(this, 0);\r\n\t\t\tthis.dispatchImmediately(\"zIndexChanged\");\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * ==========================================================================\r\n\t * TOOLTIP-RELATED PROPERTIES STUFF\r\n\t * ==========================================================================\r\n\t * @hidden\r\n\t */\r\n\r\n\t/**\r\n\t * A [[Tooltip]] object to be used when displayed rollover information for\r\n\t * the element.\r\n\t *\r\n\t * @param {Tooltip}  tooltip  Tooltip\r\n\t */\r\n\tpublic set tooltip(tooltip: $type.Optional<Tooltip>) {\r\n\t\tif (this._tooltip) {\r\n\t\t\t//this._tooltip.dispose();\r\n\t\t\tthis.removeDispose(this._tooltip);\r\n\t\t}\r\n\r\n\t\tthis._tooltip = tooltip;\r\n\r\n\t\tif (tooltip) {\r\n\t\t\ttooltip.parent = this.tooltipContainer;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Optional<Tooltip>} Tooltip\r\n\t */\r\n\tpublic get tooltip(): $type.Optional<Tooltip> {\r\n\t\tif (this._tooltip) {\r\n\t\t\treturn this._tooltip;\r\n\r\n\t\t} else if (this.parent) {\r\n\t\t\treturn this.parent.tooltip;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * A [[DataItem]] to use when populating content for the element's\r\n\t * [[Tooltip]].\r\n\t *\r\n\t * @see {@link Tooltip}\r\n\t * @see {@link DataItem}\r\n\t * @param {DataItem}  value  Tooltip data item\r\n\t */\r\n\tpublic set tooltipDataItem(value: DataItem) {\r\n\t\t// important: do not dispose tooltip dataItem, as it is some actual data item from data!\r\n\t\tthis._tooltipDataItem = value;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {DataItem} Tooltip data item\r\n\t */\r\n\tpublic get tooltipDataItem(): DataItem {\r\n\t\tconst tooltipDataItem = this._tooltipDataItem;\r\n\r\n\t\tif (tooltipDataItem) {\r\n\t\t\treturn tooltipDataItem;\r\n\r\n\t\t} else {\r\n\t\t\treturn this.dataItem;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * A [[Sprite]] or sprite template to use when getting colors for tooltip. If a template is set,\r\n\t * tooltip will look for a clone in tooltipDataItem.sprites. If no clone is found, then template colors will be used.\r\n\t *\r\n\t * @see {@link Tooltip}\r\n\t * @see {@link Sprite}\r\n\t * @param {Optional<Sprite>}  sprite Sprite\r\n\t */\r\n\tpublic set tooltipColorSource(sprite: $type.Optional<Sprite>) {\r\n\t\tthis._tooltipColorSource = sprite;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Optional<Sprite>} Tooltip color source\r\n\t */\r\n\tpublic get tooltipColorSource(): $type.Optional<Sprite> {\r\n\t\treturn this._tooltipColorSource;\r\n\t}\r\n\r\n\t/**\r\n\t * Shows the element's [[Tooltip]].\r\n\t *\r\n\t * A tooltip will be populated using text templates in either `tooltipHTML`\r\n\t * or `tooltipText` as well as data in `tooltipDataItem`.\r\n\t *\r\n\t * @see {@link Tooltip}\r\n\t * @return {boolean} returns true if the tooltip was shown and false if it wasn't (no text was found)\r\n\t */\r\n\tpublic showTooltip(): boolean {\r\n\t\tif ($type.hasValue(this.tooltipText) || $type.hasValue(this.tooltipHTML)) {\r\n\t\t\tlet tooltip = this.tooltip;\r\n\t\t\tlet tooltipDataItem = this.tooltipDataItem;\r\n\r\n\t\t\tif (tooltip) {\r\n\t\t\t\tlet colorSource: Sprite = this;\r\n\t\t\t\tlet tooltipColorSource = this.tooltipColorSource;\r\n\t\t\t\tif ((tooltip.getStrokeFromObject || tooltip.getFillFromObject) && tooltipColorSource) {\r\n\t\t\t\t\tif (tooltipColorSource.isTemplate) {\r\n\t\t\t\t\t\tif (tooltipDataItem) {\r\n\t\t\t\t\t\t\t$array.eachContinue(tooltipDataItem.sprites, (sprite) => {\r\n\t\t\t\t\t\t\t\tif (sprite.clonedFrom == tooltipColorSource) {\r\n\t\t\t\t\t\t\t\t\tcolorSource = sprite;\r\n\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tcolorSource = tooltipColorSource;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tif (tooltip.getStrokeFromObject) {\r\n\t\t\t\t\tlet stroke = this.stroke;\r\n\t\t\t\t\tlet source: Sprite = colorSource;\r\n\r\n\t\t\t\t\twhile (source.parent != undefined) {\r\n\t\t\t\t\t\tstroke = source.stroke;\r\n\t\t\t\t\t\tif (stroke == undefined) {\r\n\t\t\t\t\t\t\tsource = source.parent;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (stroke != undefined) {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (stroke instanceof Color) {\r\n\t\t\t\t\t\ttooltip.background.animate({ property: \"stroke\", to: stroke }, tooltip.animationDuration);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\ttooltip.background.stroke = stroke;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Set data item\r\n\t\t\t\ttooltip.dataItem = tooltipDataItem;\r\n\r\n\t\t\t\tif (tooltip.getFillFromObject) {\r\n\r\n\t\t\t\t\tlet fill = this.fill;\r\n\r\n\t\t\t\t\tlet source: Sprite = colorSource;\r\n\r\n\t\t\t\t\twhile (source.parent != undefined) {\r\n\t\t\t\t\t\tfill = source.fill;\r\n\t\t\t\t\t\tif (fill == undefined || (fill instanceof Color && fill.rgb == undefined)) {\r\n\t\t\t\t\t\t\tsource = source.parent;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (fill != undefined) {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (fill == undefined) {\r\n\t\t\t\t\t\tfill = color(\"#000000\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (fill instanceof Color) {\r\n\t\t\t\t\t\tif (!tooltip.visible) {\r\n\t\t\t\t\t\t\ttooltip.background.fill = fill;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\ttooltip.background.animate({ property: \"fill\", to: fill }, tooltip.animationDuration);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\ttooltip.background.fill = fill;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (tooltip.autoTextColor && fill instanceof Color) {\r\n\t\t\t\t\t\ttooltip.label.fill = fill.alternative;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Apply tooltip text\r\n\t\t\t\tlet text = \"\";\r\n\t\t\t\tif (this.tooltipHTML) {\r\n\t\t\t\t\ttooltip.html = this.tooltipHTML;\r\n\t\t\t\t\ttext = this.tooltipHTML;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.tooltipText) {\r\n\t\t\t\t\ttooltip.text = this.tooltipText;\r\n\t\t\t\t\ttext = this.tooltipText;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.tooltipPosition == \"pointer\") {\r\n\t\t\t\t\tthis._interactionDisposer = getInteraction().body.events.on(\"track\", (ev) => {\r\n\t\t\t\t\t\tthis.pointTooltipTo($utils.documentPointToSvg(ev.point, this.svgContainer.SVGContainer), true);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t// Point to the X/Y of this Sprite\r\n\t\t\t\t\tlet globalPoint = $utils.spritePointToSvg({\r\n\t\t\t\t\t\t\"x\": this.tooltipX,\r\n\t\t\t\t\t\t\"y\": this.tooltipY\r\n\t\t\t\t\t}, this);\r\n\r\n\t\t\t\t\tthis.pointTooltipTo(globalPoint);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Set accessibility option\r\n\t\t\t\ttooltip.readerDescribedBy = this.uidAttr();\r\n\r\n\t\t\t\tif (text != undefined && text != \"\") {\r\n\r\n\t\t\t\t\t//@todo: think of how to solve this better\r\n\t\t\t\t\tif (tooltip && !tooltip.parent) {\r\n\t\t\t\t\t\ttooltip.parent = this.tooltipContainer;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Reveal tooltip\r\n\t\t\t\t\ttooltip.show();\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the point the [[Tooltip]] should point to.\r\n\t *\r\n\t * @param {IPoint}   point      Coordinates to point to\r\n\t * @param {boolean}  instantly  Move instantly without animation\r\n\t */\r\n\tprotected pointTooltipTo(point: IPoint, instantly?: boolean): void {\r\n\t\tlet tooltip = this.tooltip;\r\n\t\tif (tooltip) {\r\n\t\t\ttooltip.pointTo(point, instantly);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Hides element's [[Tooltip]].\r\n\t *\r\n\t * @see {@link Tooltip}\r\n\t */\r\n\tpublic hideTooltip(duration?: number): void {\r\n\t\tlet tooltip = this.tooltip;\r\n\t\tif (tooltip) {\r\n\t\t\ttooltip.hide(duration);\r\n\t\t\tif (this._interactionDisposer) {\r\n\t\t\t\tthis._interactionDisposer.dispose();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * An HTML template to be used to populate [[Tooltip]] contents.\r\n\t *\r\n\t * If element has `tooltipDataItem` or `dataItem` set, this will be parsed\r\n\t * for any data values to be replaced with the values from respective data\r\n\t * items.\r\n\t *\r\n\t * @param {string} value Tooltip HTML content template\r\n\t */\r\n\tpublic set tooltipHTML(value: string) {\r\n\t\tvalue = $type.toText(value);\r\n\t\tthis.hoverable = true;\r\n\t\tthis.setPropertyValue(\"tooltipHTML\", value);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {string} Tooltip HTML content template\r\n\t */\r\n\tpublic get tooltipHTML(): string {\r\n\t\treturn this.getPropertyValue(\"tooltipHTML\");\r\n\t}\r\n\r\n\t/**\r\n\t * A text template to be used to populate Tooltip's contents.\r\n\t *\r\n\t * If element has `tooltipDataItem` or `dataItem` set, this will be parsed\r\n\t * for any data values to be replaced with the values from respective data\r\n\t * items.\r\n\t *\r\n\t * This template will also be parsed for any special formatting tags.\r\n\t *\r\n\t * @param {string} value Tooltip content template\r\n\t * @see {@link TextFormatter}\r\n\t */\r\n\tpublic set tooltipText(value: string) {\r\n\t\tvalue = $type.toText(value);\r\n\t\tif (value) {\r\n\t\t\tthis.hoverable = true;\r\n\t\t}\r\n\t\tthis.setPropertyValue(\"tooltipText\", value);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {string} Tooltip content template\r\n\t */\r\n\tpublic get tooltipText(): string {\r\n\t\treturn this.getPropertyValue(\"tooltipText\");\r\n\t}\r\n\r\n\t/**\r\n\t * A container reference that should be used to place element's\r\n\t * [[Tooltip]] in.\r\n\t *\r\n\t * Will use parent's container if does not have one set.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {Container} value Container\r\n\t * @todo Dispose of the old _tooltipContainer ?\r\n\t */\r\n\tpublic set tooltipContainer(value: $type.Optional<Container>) {\r\n\t\tthis._tooltipContainer = value;\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore Exclude from docs\r\n\t * @return {Optional<Container>} Container\r\n\t */\r\n\tpublic get tooltipContainer(): $type.Optional<Container> {\r\n\t\tif (this._tooltipContainer) {\r\n\t\t\treturn this._tooltipContainer;\r\n\r\n\t\t} else if (this.parent) {\r\n\t\t\treturn this.parent.tooltipContainer;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * X coordinate the [[Tooltip]] should be shown at.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {number}  value  Tooltip X (px)\r\n\t */\r\n\tpublic set tooltipX(value: number) {\r\n\t\tvalue = $type.toNumber(value);\r\n\t\tif (this.setPropertyValue(\"tooltipX\", value) && this.tooltip) {\r\n\t\t\tthis.tooltip.invalidate();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore Exclude from docs\r\n\t * @return {number} Tooltip X (px)\r\n\t */\r\n\tpublic get tooltipX(): number {\r\n\t\treturn this.getTooltipX();\r\n\t}\r\n\r\n\t/**\r\n\t * Specifies if [[Tooltip]] should follow the mouse or touch pointer or stay\r\n\t * at the fixed position.\r\n\t *\r\n\t * @param { \"fixed\" | \"pointer\" }  value  Position\r\n\t */\r\n\tpublic set tooltipPosition(value: \"fixed\" | \"pointer\") {\r\n\t\tthis.setPropertyValue(\"tooltipPosition\", value);\r\n\t}\r\n\r\n\t/**\r\n\t * @type {\"fixed\" | \"pointer\"} Position\r\n\t */\r\n\tpublic get tooltipPosition(): \"fixed\" | \"pointer\" {\r\n\t\treturn this.getPropertyValue(\"tooltipPosition\");\r\n\t}\r\n\r\n\t/**\r\n\t * Y coordinate the [[Tooltip]] should be shown at.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {number}  value  Tooltip Y (px)\r\n\t */\r\n\tpublic set tooltipY(value: number) {\r\n\t\tvalue = $type.toNumber(value);\r\n\r\n\t\tif (this.setPropertyValue(\"tooltipY\", value) && this.tooltip) {\r\n\t\t\tthis.tooltip.invalidate();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore Exclude from docs\r\n\t * @return {number} Tooltip Y (px)\r\n\t */\r\n\tpublic get tooltipY(): number {\r\n\t\treturn this.getTooltipY();\r\n\t}\r\n\r\n\t/**\r\n\t * Returns Tooltip X coordinate if it's set, or middle of the element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {number} X (px)\r\n\t */\r\n\tprotected getTooltipX(): number {\r\n\r\n\t\tlet x = this.getPropertyValue(\"tooltipX\");\r\n\r\n\t\tif (!$type.isNumber(x)) {\r\n\t\t\tx = this.maxLeft + this.measuredWidth / 2 - this.pixelPaddingLeft; // overflow is know only for measured items, so this is not always good\r\n\t\t}\r\n\r\n\t\treturn x;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns Tooltip Y coordinate if it's set, or middle of the element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {number} Y (px)\r\n\t */\r\n\tprotected getTooltipY(): number {\r\n\t\tlet y = this.getPropertyValue(\"tooltipY\");\r\n\t\tif (!$type.isNumber(y)) {\r\n\t\t\ty = this.maxTop + this.measuredHeight / 2 - this.pixelPaddingTop;  // overflow is know only for measured items, so this is not always good\r\n\t\t}\r\n\r\n\t\treturn y;\r\n\t}\r\n\r\n\t/**\r\n\t * Displays a modal or console message with error, and halts any further\r\n\t * processing of this item.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {Error} e Error\r\n\t * @todo Implement from applying further actions to this item\r\n\t */\r\n\tpublic raiseCriticalError(e: Error) {\r\n\r\n\t\tif (this.svgContainer) {\r\n\t\t\tthis.modal.content = e.message;\r\n\t\t\tthis.modal.closable = false;\r\n\t\t\tthis.modal.show();\r\n\t\t\tthis.disabled = true;\r\n\t\t}\r\n\r\n\t\tif (options.verbose) {\r\n\t\t\tconsole.log(e);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n * Processes JSON-based config before it is applied to the object.\r\n *\r\n * @ignore Exclude from docs\r\n * @param {object}  config  Config\r\n */\r\n\tpublic processConfig(config?: { [index: string]: any }): void {\r\n\r\n\t\tif (config) {\r\n\r\n\t\t\tif ($type.hasValue(config.tooltipColorSource) && $type.isString(config.tooltipColorSource) && this.map.hasKey(config.tooltipColorSource)) {\r\n\t\t\t\tconfig.tooltipColorSource = this.map.getKey(config.tooltipColorSource);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tsuper.processConfig(config);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * This function is used to sort element's JSON config properties, so that\r\n\t * some properties that absolutely need to be processed last, can be put at\r\n\t * the end.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {string}  a  Element 1\r\n\t * @param  {string}  b  Element 2\r\n\t * @return {Ordering}   Sorting number\r\n\t */\r\n\tprotected configOrder(a: string, b: string): Ordering {\r\n\t\tif (a == b) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\t// Must come last\r\n\t\telse if (a == \"tooltipColorSource\") {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t\telse if (b == \"tooltipColorSource\") {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn super.configOrder(a, b);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../src/.internal/core/Sprite.ts","/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Ordering } from \"./Order\";\r\nimport { Optional } from \"./Type\";\r\nimport * as $math from \"./Math\";\r\nimport * as $type from \"./Type\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * UTILITY FUNCTIONS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Searches `array` for `value`.\r\n *\r\n * Returns -1 if not found.\r\n *\r\n * @param   {ArrayLike<A>}  array  Source array\r\n * @param   {A}             value  Value to search\r\n * @returns {number}               Index\r\n */\r\nexport function indexOf<A>(array: ArrayLike<A>, value: A): number {\r\n\tconst length = array.length;\r\n\r\n\tfor (let i = 0; i < length; ++i) {\r\n\t\t// TODO handle NaN\r\n\t\tif (array[i] === value) {\r\n\t\t\treturn i;\r\n\t\t}\r\n\t}\r\n\r\n\treturn -1;\r\n}\r\n\r\n/**\r\n * Calls `fn` function for every member of array and returns a new array out\r\n * of all outputs.\r\n *\r\n * @param   {ArrayLike<A>}  array  Source array\r\n * @param   {function}      fn     Callback function\r\n * @returns {number}               New array\r\n */\r\nexport function map<A, B>(array: ArrayLike<A>, fn: (value: A, index: number) => B): Array<B> {\r\n\tconst length = array.length;\r\n\tconst output = new Array(length);\r\n\r\n\tfor (let i = 0; i < length; ++i) {\r\n\t\toutput[i] = fn(array[i], i);\r\n\t}\r\n\r\n\treturn output;\r\n}\r\n\r\n/**\r\n * Iterates thorugh all items in array and calls `fn` function for each of\r\n * them.\r\n *\r\n * @param   {ArrayLike<A>}  array  Source array\r\n * @param   {function}      fn     Callback function\r\n */\r\nexport function each<A>(array: ArrayLike<A>, fn: (value: A, index: number) => void): void {\r\n\tconst length = array.length;\r\n\r\n\tfor (let i = 0; i < length; ++i) {\r\n\t\tfn(array[i], i);\r\n\t}\r\n}\r\n\r\n/**\r\n * Iterates thorugh all items in array in reverse order and calls `fn` function for each of\r\n * them.\r\n *\r\n * @param   {ArrayLike<A>}  array  Source array\r\n * @param   {function}      fn     Callback function\r\n */\r\nexport function eachReverse<A>(array: ArrayLike<A>, fn: (value: A, index: number) => void): void {\r\n\tlet i = array.length;\r\n\r\n\twhile (i--) {\r\n\t\tfn(array[i], i);\r\n\t}\r\n}\r\n\r\n/**\r\n * Iterates thorugh all items in array and calls `fn` function for each of\r\n * them.\r\n *\r\n * If `fn` call evaluates to `false`, further iteration is cancelled.\r\n *\r\n * @param   {ArrayLike<A>}  array  Source array\r\n * @param   {function}      fn     Callback function\r\n */\r\nexport function eachContinue<A>(array: ArrayLike<A>, fn: (value: A, index: number) => boolean): void {\r\n\tconst length = array.length;\r\n\r\n\tfor (let i = 0; i < length; ++i) {\r\n\t\tif (!fn(array[i], i)) {\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * Shifts an item at `index` towards beginning of the array.\r\n *\r\n * @param {ArrayLike<A>}  array  Source array\r\n * @param {number}        index  Target element index\r\n */\r\nexport function shiftLeft<A>(array: Array<A>, index: number): void {\r\n\tconst length = array.length;\r\n\r\n\tfor (let i = index; i < length; ++i) {\r\n\t\tarray[i - index] = array[i];\r\n\t}\r\n\r\n\tarray.length = length - index;\r\n}\r\n\r\n/**\r\n * Returns the last item of the array.\r\n *\r\n * @param   {ArrayLike<A>}  array  Source array\r\n * @returns {A}                    Last item\r\n */\r\nexport function last<A>(array: Array<A>): Optional<A> {\r\n\tconst length = array.length;\r\n\treturn length ? array[length - 1] : undefined;\r\n}\r\n\r\n/**\r\n * Returns the first item of the array.\r\n *\r\n * @param   {ArrayLike<A>}  array  Source array\r\n * @returns {A}                    Last item\r\n */\r\nexport function first<A>(array: Array<A>): Optional<A> {\r\n\treturn array[0];\r\n}\r\n\r\n/**\r\n * Inserts `element` into `array` at `index`.\r\n *\r\n * Caps `index` to be between `0` and `array.length`\r\n *\r\n * @param {ArrayLike<A>}  array    Source array\r\n * @param {ArrayLike<A>}  element  Item to insert\r\n * @param {ArrayLike<A>}  array    Index to insert item at\r\n */\r\nexport function insert<A>(array: Array<A>, element: A, index: number): void {\r\n\t//if (array) {\r\n\tindex = $math.fitToRange(index, 0, array.length);\r\n\tarray.splice(index, 0, element);\r\n\t//}\r\n}\r\n\r\n/**\r\n * Removes all copies of `element` from `array` (if they exist) and then\r\n * inserts `element` at `index`.\r\n *\r\n * @param {ArrayLike<A>}  array    Source array\r\n * @param {ArrayLike<A>}  element  Item\r\n * @param {ArrayLike<A>}  array    Index to move item to\r\n */\r\nexport function setIndex<A>(array: Array<A>, element: A, index: number): void {\r\n\tremove(array, element);\r\n\tinsert(array, element, index);\r\n}\r\n\r\n\r\n/**\r\n * Removes `element` from `array`.\r\n *\r\n * If there are multiple copies of `element`, they are all removed.\r\n *\r\n * @param {ArrayLike<A>}  array    Source array\r\n * @param {ArrayLike<A>}  element  Item to remove\r\n */\r\nexport function remove<A>(array: Array<A>, element: A): boolean {\r\n\tlet found:boolean = false;\r\n\tif (array) {\r\n\t\tlet index: number;\r\n\r\n\t\twhile ((index = array.indexOf(element)) !== -1) {\r\n\t\t\tarray.splice(index, 1);\r\n\t\t\tfound = true;\r\n\t\t}\r\n\t}\r\n\treturn found;\r\n}\r\n\r\n/**\r\n * Adds an `element` to `array`.\r\n *\r\n * If array already contains and item like this, it is removed before adding\r\n * it again.\r\n *\r\n * Optionally `toIndex` can be specified to add element at specific index.\r\n *\r\n * @param {ArrayLike<A>}  array    Source array\r\n * @param {ArrayLike<A>}  element  Item to add\r\n * @param {ArrayLike<A>}  array    Index to move item to\r\n */\r\nexport function move<A>(array: Array<A>, element: A, toIndex?: number): void {\r\n\t// @todo this implementation must be the same as the List.moveValue method\r\n\t// @todo don't do anything if the desired index is the same as the current index\r\n\tlet index = indexOf(array, element);\r\n\r\n\t// @todo remove all old values rather than only the first ?\r\n\tif (index !== -1) {\r\n\t\tremoveIndex(array, index);\r\n\t}\r\n\r\n\tif (toIndex == null) {\r\n\t\tarray.push(element);\r\n\t} else {\r\n\t\tinsertIndex(array, toIndex, element);\r\n\t}\r\n}\r\n\r\n\r\n/**\r\n * Inserts `element` into `array` at `index`.\r\n *\r\n * If `index` is not provided, it will insert `element` at the end of `array`.\r\n *\r\n * @param {ArrayLike<A>}  array    Source array\r\n * @param {ArrayLike<A>}  element  Item to add\r\n * @param {ArrayLike<A>}  array    Index to add item at\r\n */\r\nexport function add<A>(array: Array<A>, element: A, index?: number): void {\r\n\t// Append to the end if index is not set\r\n\tif (!$type.isNumber(index)) {\r\n\t\tarray.push(element);\r\n\t}\r\n\r\n\t// Add to the beginning of array if index is 0\r\n\telse if (index === 0) {\r\n\t\tarray.unshift(element);\r\n\t}\r\n\t// Add to indicated place if index is set\r\n\telse {\r\n\t\tarray.splice(index, 0, element);\r\n\t}\r\n}\r\n\r\n/**\r\n * Removes `element` from `array` (if it exists) and then inserts `element` at\r\n * `index`.\r\n *\r\n * If `index` is not provided, it will insert `element` at the end of `array`.\r\n *\r\n * @param {ArrayLike<A>}  array    Source array\r\n * @param {ArrayLike<A>}  element  Item to remove\r\n * @param {ArrayLike<A>}  array    Index to move item to\r\n */\r\nexport function replace<A>(array: Array<A>, element: A, index?: number): void {\r\n\t// check if exists\r\n\tlet ind: number = array.indexOf(element);\r\n\r\n\t// remove if exists\r\n\tif (ind !== -1) {\r\n\t\tarray.splice(ind, 1);\r\n\t}\r\n\r\n\t// add to end if index is not set\r\n\tif (!$type.isNumber(index)) {\r\n\t\tarray.push(element);\r\n\t}\r\n\t// add to indicated place if index is set\r\n\telse {\r\n\t\tarray.splice(index, 0, element);\r\n\t}\r\n}\r\n\r\n/**\r\n * Wraps `input` in an array, if it isn't already an array.\r\n *\r\n * @param {Array<A> | A}  input  Source value\r\n * @return {Array<A>} An array\r\n */\r\nexport function toArray<A>(input: Array<A> | A): Array<A> {\r\n\tif (Array.isArray(input)) {\r\n\t\treturn input;\r\n\t}\r\n\telse {\r\n\t\treturn [input];\r\n\t}\r\n}\r\n\r\n/**\r\n * Returns `true` if `element` exists in `array`.\r\n *\r\n * @param   {ArrayLike<A>}  array    Source array\r\n * @param   {ArrayLike<A>}  element  Item to search for\r\n * @returns {boolean}                Item in array?\r\n */\r\nexport function has<A>(array: ArrayLike<A>, element: A): boolean {\r\n\treturn indexOf(array, element) !== -1;\r\n}\r\n\r\n/**\r\n * Returns a shallow copy of `array`.\r\n *\r\n * @param   {ArrayLike<A>}  array  Source array\r\n * @returns {boolean}              Copy of the array\r\n */\r\nexport function copy<A>(array: ArrayLike<A>): Array<A> {\r\n\tconst length = array.length;\r\n\r\n\t// It's faster to create the array with a pre-defined length\r\n\tconst output = new Array(length);\r\n\r\n\tfor (let i = 0; i < length; ++i) {\r\n\t\t// Because the array has a pre-defined length, we have to assign rather than push\r\n\t\t// This is also faster than pushing\r\n\t\toutput[i] = array[i];\r\n\t}\r\n\r\n\treturn output;\r\n}\r\n\r\n\r\n/**\r\n * Returns a copy of `array` which contains all the elements between `start`\r\n * and `end`. (including `start` and excluding `end`)\r\n *\r\n * If `end` is not provided, it defaults to `array.length`.\r\n *\r\n * @param   {ArrayLike<A>}  array  Source array\r\n * @param   {number}        start  Start index\r\n * @param   {number}        end    End index\r\n * @returns {Array<A>}             Part of the array\r\n */\r\nexport function slice<A>(array: ArrayLike<A>, start: number, end: number = array.length): Array<A> {\r\n\tconst output = new Array(end - start);\r\n\r\n\tfor (let i = start; i < end; ++i) {\r\n\t\toutput[i - start] = array[i];\r\n\t}\r\n\r\n\treturn output;\r\n}\r\n\r\n/**\r\n * Inserts a value into array at specific index.\r\n *\r\n * @param {Array<A>}  array  Source array\r\n * @param {number}    index  Index\r\n * @param {A}         value  Value to insert\r\n */\r\nexport function insertIndex<A>(array: Array<A>, index: number, value: A): void {\r\n\tarray.splice(index, 0, value);\r\n}\r\n\r\n/**\r\n * Removes a value from array at specific index.\r\n *\r\n * @param {Array<A>}  array  Source array\r\n * @param {number}    index  Index\r\n */\r\nexport function removeIndex<A>(array: Array<A>, index: number): void {\r\n\tarray.splice(index, 1);\r\n}\r\n\r\n/**\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n */\r\nexport interface SortResult {\r\n\tfound: boolean;\r\n\tindex: number\r\n}\r\n\r\n/**\r\n * Orders an array using specific `ordering` function and returns index of\r\n * the `value`.\r\n *\r\n * @ignore Exclude from docs\r\n * @param   {ArrayLike<A>}  array     Source array\r\n * @param   {function}      ordering  An ordering function\r\n * @param   {ArrayLike<A>}  value     Value to search for\r\n * @returns {SortResult}              Result of the search\r\n */\r\nexport function getSortedIndex<A>(array: ArrayLike<A>, ordering: (left: A, right: A) => Ordering, value: A): SortResult {\r\n\tlet start = 0;\r\n\tlet end   = array.length;\r\n\tlet found = false;\r\n\r\n\twhile (start < end) {\r\n\t\t// TODO is this faster/slower than using Math.floor ?\r\n\t\tconst pivot = (start + end) >> 1;\r\n\r\n\t\tconst order = ordering(value, array[pivot]);\r\n\r\n\t\t// less\r\n\t\tif (order < 0) {\r\n\t\t\tend = pivot;\r\n\r\n\t\t// equal\r\n\t\t} else if (order === 0) {\r\n\t\t\tfound = true;\r\n\t\t\tstart = pivot + 1;\r\n\r\n\t\t// more\r\n\t\t} else {\r\n\t\t\tstart = pivot + 1;\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tfound: found,\r\n\t\tindex: (found ? start - 1 : start)\r\n\t};\r\n}\r\n\r\n/**\r\n * Searches the array using custom function and returns index of the item if\r\n * found.\r\n *\r\n * Will call `matches` function on all items of the array. If return value\r\n * evaluates to `true`, index is returned.\r\n *\r\n * Otherwise returns -1.\r\n *\r\n * @param   {ArrayLike<A>}  array    Source array\r\n * @param   {function}      matches  Search function\r\n * @returns {number}                 Index of the item if found\r\n */\r\nexport function findIndex<A>(array: ArrayLike<A>, matches: (value: A, index: number) => boolean): number {\r\n\tconst length = array.length;\r\n\r\n\tfor (let i = 0; i < length; ++i) {\r\n\t\tif (matches(array[i], i)) {\r\n\t\t\treturn i;\r\n\t\t}\r\n\t}\r\n\r\n\treturn -1;\r\n}\r\n\r\n/**\r\n * Searches the array using custom function and returns item if found.\r\n *\r\n * Will call `matches` function on all items of the array. If return value\r\n * evaluates to `true`, index is returned.\r\n *\r\n * Otherwise returns `undefined`.\r\n *\r\n * @param   {ArrayLike<A>}  array    Source array\r\n * @param   {function}      matches  Search function\r\n * @returns {number}                 Item if found\r\n */\r\nexport function find<A>(array: ArrayLike<A>, matches: (value: A, index: number) => boolean): A | undefined {\r\n\tconst index = findIndex(array, matches);\r\n\r\n\tif (index !== -1) {\r\n\t\treturn array[index];\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/utils/Array.ts","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_fails.js\n// module id = 15\n// module chunks = 26","/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport * as $array from \"./Array\";\r\nimport * as $type from \"./Type\";\r\nimport { Optional } from \"./Type\";\r\n\r\n/**\r\n * Defines interface for disposable objects.\r\n *\r\n * @ignore Exclude from docs\r\n */\r\nexport interface IDisposer {\r\n\tisDisposed(): boolean;\r\n\tdispose(): void;\r\n}\r\n\r\n/**\r\n * A base class for disposable objects.\r\n *\r\n * @ignore Exclude from docs\r\n */\r\nexport class Disposer implements IDisposer {\r\n\r\n\t/**\r\n\t * Is object disposed?\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tprivate _disposed: boolean;\r\n\r\n\t/**\r\n\t * Method that disposes the object.\r\n\t *\r\n\t * @type {function}\r\n\t */\r\n\tprivate _dispose: () => void;\r\n\r\n\t/**\r\n\t * Constructor.\r\n\t *\r\n\t * @param {function}  dispose  Function that disposes object\r\n\t */\r\n\tconstructor(dispose: () => void) {\r\n\t\tthis._disposed = false;\r\n\t\tthis._dispose = dispose;\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if object is disposed.\r\n\t *\r\n\t * @return {boolean} Disposed?\r\n\t */\r\n\tpublic isDisposed(): boolean {\r\n\t\treturn this._disposed;\r\n\t}\r\n\r\n\t/**\r\n\t * Disposes the object.\r\n\t */\r\n\tpublic dispose(): void {\r\n\t\tif (!this._disposed) {\r\n\t\t\tthis._disposed = true;\r\n\t\t\tthis._dispose();\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * A collection of related disposers that can be disposed in one go.\r\n *\r\n * @ignore Exclude from docs\r\n */\r\nexport class MultiDisposer extends Disposer {\r\n\tconstructor(disposers: Array<IDisposer>) {\r\n\t\tsuper(() => {\r\n\t\t\t$array.each(disposers, (x) => {\r\n\t\t\t\tx.dispose();\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n}\r\n\r\n/**\r\n * A special kind of Disposer that has attached value set.\r\n *\r\n * If a new value is set using `set()` method, the old disposer value is\r\n * disposed.\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n */\r\nexport class MutableValueDisposer<T> extends Disposer {\r\n\r\n\t/**\r\n\t * Current disposer.\r\n\t *\r\n\t * @type {Optional<IDisposer>}\r\n\t */\r\n\tprivate _disposer: Optional<IDisposer>;\r\n\r\n\t/**\r\n\t * Current value.\r\n\t *\r\n\t * @type {Optional<T>}\r\n\t */\r\n\tprivate _value: Optional<T>;\r\n\r\n\t/**\r\n\t * Constructor.\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper(() => {\r\n\t\t\tif ($type.hasValue(this._disposer)) {\r\n\t\t\t\tthis._disposer.dispose();\r\n\t\t\t\tthis._disposer = undefined;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis._disposer = undefined;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns current value.\r\n\t *\r\n\t * @return {Optional<T>} Value\r\n\t */\r\n\tpublic get(): Optional<T> {\r\n\t\treturn this._value;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets value and disposes previous value if it was set.\r\n\t *\r\n\t * @param {Optional<T>}          value     New value\r\n\t * @param {Optional<IDisposer>}  disposer  Disposer\r\n\t */\r\n\tpublic set(value: Optional<T>, disposer: Optional<IDisposer>): void {\r\n\t\tif ($type.hasValue(this._disposer)) {\r\n\t\t\tthis._disposer.dispose();\r\n\t\t}\r\n\r\n\t\tthis._disposer = disposer;\r\n\t\tthis._value = value;\r\n\t}\r\n\r\n\t/**\r\n\t * Resets the disposer value.\r\n\t */\r\n\tpublic reset(): void {\r\n\t\tthis.set(undefined, undefined);\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n */\r\nexport class CounterDisposer extends Disposer {\r\n\r\n\t/**\r\n\t * [_counter description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\tprivate _counter: number = 0;\r\n\r\n\t/**\r\n\t * [increment description]\r\n\t *\r\n\t * @todo Description\r\n\t */\r\n\tpublic increment() {\r\n\t\t// TODO throw an error if it is disposed\r\n\t\t++this._counter;\r\n\r\n\t\t// TODO make this more efficient\r\n\t\treturn new Disposer(() => {\r\n\t\t\t--this._counter;\r\n\r\n\t\t\tif (this._counter === 0) {\r\n\t\t\t\tthis.dispose();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/utils/Disposer.ts","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_is-object.js\n// module id = 17\n// module chunks = 26","/**\r\n * This module contains Color object definition\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { iRGB, iHSV, iHSL } from \"./Colors\";\r\nimport * as $colors from \"./Colors\";\r\nimport * as $type from \"./Type\";\r\n\r\n// Re-export\r\nexport { iRGB, iHSV, iHSL };\r\n\r\n/**\r\n * Represents a color.\r\n *\r\n * `Color` accepts value only in [[iRGB]] object format. To create `Color`\r\n * object by parsing it from any supported string-based formats, use helper\r\n * [[color]] function:\r\n *\r\n * ```TypeScript\r\n * am4core.color(\"#ff0000\");\r\n * am4core.color(\"#f00\");\r\n * am4core.color(\"rgb(255, 0, 0)\");\r\n * am4core.color(\"rgba(255, 0, 0, 0.5)\");\r\n * am4core.color({ r: 255, g: 0, b: 0 });\r\n * am4core.color(\"red\");\r\n * ```\r\n * ```JavaScript\r\n * am4core.color(\"#ff0000\");\r\n * am4core.color(\"#f00\");\r\n * am4core.color(\"rgb(255, 0, 0)\");\r\n * am4core.color(\"rgba(255, 0, 0, 0.5)\");\r\n * am4core.color({ r: 255, g: 0, b: 0 });\r\n * am4core.color(\"red\");\r\n * ```\r\n */\r\nexport class Color {\r\n\r\n\t/**\r\n\t * Light color (used when light contrasting color is required).\r\n\t *\r\n\t * @param {Color}\r\n\t * @ignore\r\n\t */\r\n\tprotected _lightColor: $type.Optional<Color>;\r\n\r\n\t/**\r\n\t * Dark color (used when dark contrasting color is required).\r\n\t *\r\n\t * @param {Color}\r\n\t * @ignore\r\n\t */\r\n\tprotected _darkColor: $type.Optional<Color>;\r\n\r\n\t/**\r\n\t * Holds RGB value of the color.\r\n\t *\r\n\t * @type {iRGB}\r\n\t */\r\n\tprotected _value: $type.Optional<iRGB>;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t *\r\n\t * @param {iRGB} color Source color\r\n\t */\r\n\tconstructor(color: $type.Optional<iRGB>) {\r\n\t\tthis._value = color;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns [[iRGB]] representation of the color.\r\n\t *\r\n\t * @return {iRGB} RGB object\r\n\t */\r\n\tpublic get rgb(): $type.Optional<iRGB> {\r\n\t\treturn this._value;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns color hex value string, e.g. \"#FF0000\".\r\n\t *\r\n\t * @return {string} Hex color code\r\n\t */\r\n\tpublic get hex(): string {\r\n\t\treturn this._value ? $colors.rgbToHex(this._value) : \"none\";\r\n\t}\r\n\r\n\t/**\r\n\t * Returns an `rgba()` representation of the color, e.g.:\r\n\t * `rgba(255, 0, 0, 0.5)`.\r\n\t *\r\n\t * @return {string} rgba color string\r\n\t */\r\n\tpublic get rgba(): string {\r\n\t\treturn this._value ? $colors.rgbToRGBA(this._value) : \"none\";\r\n\t}\r\n\r\n\t/**\r\n\t * Set alpha (transparency) of the color.\r\n\t *\r\n\t * @param {number} value Alpha (0-1)\r\n\t */\r\n\tpublic set alpha(value: number) {\r\n\t\tif (this._value) {\r\n\t\t\tthis._value.a = value;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns current transparency.\r\n\t *\r\n\t * @return {number} Alpha (0-1)\r\n\t */\r\n\tpublic get alpha(): number {\r\n\t\tif (this._value != null && this._value.a != null) {\r\n\t\t\treturn this._value.a;\r\n\r\n\t\t} else {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Sets \"light\" color. Used when determining contrasting color.\r\n\t *\r\n\t * @param {Color} color Color\r\n\t */\r\n\tpublic set lightColor(color: Color) {\r\n\t\tthis._lightColor = color;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns current light color setting.\r\n\t *\r\n\t * @return {Color} Color\r\n\t */\r\n\tpublic get lightColor(): Color {\r\n\t\tif (!this._lightColor) {\r\n\t\t\tthis._lightColor = new Color({ r: 255, g: 255, b: 255 });\r\n\t\t}\r\n\t\treturn this._lightColor;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets \"dark\" color. Used when determining contrasting color.\r\n\t *\r\n\t * @param {Color} color Color\r\n\t */\r\n\tpublic set darkColor(color: Color) {\r\n\t\tthis._darkColor = color;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns current dark color setting.\r\n\t *\r\n\t * @return {Color} Color\r\n\t */\r\n\tpublic get darkColor(): Color {\r\n\t\tif (!this._darkColor) {\r\n\t\t\tthis._darkColor = new Color({ r: 0, g: 0, b: 0 });\r\n\t\t}\r\n\t\treturn this._darkColor;\r\n\t}\r\n\r\n\t/**\r\n\t * Overrides `toString` method so that [[Color]] object can be used as\r\n\t * string.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {string} String represantion of color (usable in CSS)\r\n\t */\r\n\tpublic toString(): string {\r\n\t\treturn this.alpha < 1 ? this.rgba : this.hex;\r\n\t}\r\n\r\n\t/**\r\n\t * Retruns a new [[Color]] which is percent lighter (positivive value),\r\n\t * or darker (negative value).\r\n\t *\r\n\t * Parameter is in the scale of -1 to 1.\r\n\t *\r\n\t * @param  {number}  percent  Increase/decrease lightness by X\r\n\t * @return {Color}            New Color\r\n\t */\r\n\tpublic lighten(percent: number): Color {\r\n\t\treturn new Color($colors.lighten(this.rgb, percent));\r\n\t}\r\n\r\n\t/**\r\n\t * Retruns a new [[Color]] which is percent brighter (positivive value),\r\n\t * or darker (negative value).\r\n\t *\r\n\t * Parameter is in the scale of -1 to 1.\r\n\t *\r\n\t * @param  {number}  percent  Increase/decrease brightness by X\r\n\t * @return {Color}            New Color\r\n\t */\r\n\tpublic brighten(percent: number): Color {\r\n\t\treturn new Color($colors.brighten(this.rgb, percent));\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a new [[Color]] based on current color with specific saturation\r\n\t * applied.\r\n\t *\r\n\t * `saturation` can be in the range of 0 (fully desaturated) to 1 (fully\r\n\t * saturated).\r\n\t *\r\n\t * @param  {number}  saturation  Saturation (0-1)\r\n\t * @return {Color}               New (saturated) color\r\n\t */\r\n\tpublic saturate(saturation: number): Color {\r\n\t\treturn new Color($colors.saturate(this.rgb, saturation));\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a either light or dark color that contrasts specifically with\r\n\t * this color.\r\n\t *\r\n\t * Uses properties `darkColor` (default black) and `lightColor` (default\r\n\t * white).\r\n\t *\r\n\t * Useful when determining which color label should be on a colored\r\n\t * background, so that it stands out.\r\n\t *\r\n\t * @return {Color} Contrasting color\r\n\t */\r\n\tpublic get alternative(): Color {\r\n\t\tif (this.rgb != null) {\r\n\t\t\treturn $colors.isLight(this.rgb) ? this.darkColor : this.lightColor;\r\n\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"Color does not exist\");\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * Resolves an input variable to a normal [[iRGB]] color and creates [[Color]]\r\n * object for it.\r\n *\r\n * @param  {string | iRGB | Color}  value  Input value\r\n * @param  {number}                 alpha  Alpha (0-1)\r\n * @return {Color}                         Color object\r\n */\r\nexport function color(value?: string | iRGB | Color, alpha?: number): Color {\r\n\r\n\tif (!$type.hasValue(value)) {\r\n\t\treturn new Color(undefined);\r\n\t}\r\n\r\n\tif (typeof value == \"string\") {\r\n\t\treturn new Color($colors.rgb(value, alpha));\r\n\t}\r\n\r\n\t// Check if it's already a Color object\r\n\tif (value instanceof Color) {\r\n\t\tif ($type.hasValue(alpha)) {\r\n\t\t\tvalue.alpha = alpha;\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\t// Not a string or Color instance, it's the iRGB object then\r\n\treturn new Color(value);\r\n}\r\n\r\n/**\r\n * Checks if supplied argument is instance of [[Color]].\r\n *\r\n * @param  {any}      value  Input value\r\n * @return {boolean}         Is Color?\r\n */\r\nexport function isColor(value: any): boolean {\r\n\treturn value instanceof Color;\r\n}\r\n\r\n/**\r\n * Converts any value to [[Color]].\r\n *\r\n * @param  {any}    value  Input value\r\n * @return {Color}         Color\r\n */\r\nexport function castColor(value: any): Color {\r\n\treturn color(value);\r\n}\r\n\r\n/**\r\n * Converts any value into a [[Color]].\r\n *\r\n * @param  {any}    value  Source value\r\n * @return {Color}         Color object\r\n */\r\nexport function toColor(value: any): Color {\r\n\tif ($type.hasValue(value) && !isColor(value)) {\r\n\t\treturn castColor(value);\r\n\t}\r\n\treturn value;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/utils/Color.ts","/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport * as $array from \"./Array\";\r\nimport * as $iter from \"./Iterator\";\r\nimport * as $type from \"./Type\";\r\nimport { Ordering } from \"./Order\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * UTILITY FUNCTIONS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Returns an iterator for all entries in object.\r\n *\r\n * Can be used to safely iterate through all properties of the object.\r\n * \r\n * @param   {object}    object  Source object\r\n * @returns {Iterator}          Iterator\r\n */\r\nexport function entries<Object, Key extends keyof Object>(object: Object): $iter.Iterator<[Key, Object[Key]]> {\r\n\treturn (push) => {\r\n\t\t// TODO make this more efficient ?\r\n\t\tfor (let key in object) {\r\n\t\t\tif (hasKey(object, key)) {\r\n\t\t\t\tif (!push([<Key>key, <Object[Key]>object[key]])) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\n/**\r\n * Returns an array of object's property names.\r\n *\r\n * @param   {object}        object  Source object\r\n * @returns {Array<string}          Object property names\r\n */\r\nexport function keys<Object>(object: Object): Array<keyof Object> {\r\n\treturn <Array<keyof Object>>Object.keys(object);\r\n}\r\n\r\n/**\r\n * Returns an array of object's property names ordered using specific ordering\r\n * function.\r\n *\r\n * @param   {object}        object  Source object\r\n * @param   {function}      order   Ordering function\r\n * @returns {Array<string}          Object property names\r\n */\r\nexport function keysOrdered<Object>(object: Object, order: <A extends keyof Object, B extends keyof Object>(a: A, b: B) => Ordering): Array<keyof Object> {\r\n\treturn (<Array<keyof Object>>Object.keys(object)).sort(order);\r\n}\r\n\r\n/**\r\n * Checks if `object` has a specific `key`.\r\n * \r\n * @param   {object}   object  Source object\r\n * @param   {string}   key     Property name\r\n * @returns {boolean}          Has key?\r\n */\r\nexport function hasKey<Object, Key extends keyof Object>(object: Object, key: Key): boolean {\r\n\treturn {}.hasOwnProperty.call(object, key);\r\n}\r\n\r\n/**\r\n * Returns value of the specific `key`.\r\n * \r\n * @param   {object}   object  Source object\r\n * @param   {string}   key     Property name\r\n * @returns {any}              Key value\r\n */\r\nexport function getKey<Object, Key extends keyof Object>(object: Object, key: Key): Object[Key] {\r\n\treturn object[key];\r\n}\r\n\r\n/**\r\n * Iterates through all properties of the object calling `fn` for each of them.\r\n *\r\n * If return value of the function evaluates to `false` further iteration is\r\n * cancelled.\r\n * \r\n * @param {object}   object  Source object\r\n * @param {function} fn      Callback function\r\n */\r\nexport function eachContinue<Object>(object: Object, fn: <Key extends keyof Object>(key: Key, value: Object[Key]) => boolean): void {\r\n\tfor (let key in object) {\r\n\t\tif (hasKey(object, key)) {\r\n\t\t\tif (!fn(key, object[key])) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * Iterates through all properties of the object calling `fn` for each of them.\r\n *\r\n * @param {object}   object  Source object\r\n * @param {function} fn      Callback function\r\n */\r\nexport function each<Object>(object: Object, fn: <Key extends keyof Object>(key: Key, value: Object[Key]) => void): void {\r\n\teachContinue(object, (key, value) => {\r\n\t\tfn(key, value);\r\n\t\treturn true;\r\n\t});\r\n}\r\n\r\n/**\r\n * Orders object properties using custom `ord` function and iterates through\r\n * them calling `fn` for each of them.\r\n *\r\n * @param {object}    object  Source object\r\n * @param {function}  fn      Callback function\r\n * @param {function}  order   Ordering function\r\n */\r\nexport function eachOrdered<Object>(object: Object, fn: <Key extends keyof Object>(key: Key, value: Object[Key]) => void, ord: <A extends keyof Object, B extends keyof Object>(a: A, b: B) => Ordering): void {\r\n\t$array.each(keysOrdered(object, ord), (key) => {\r\n\t\tfn(key, object[key]);\r\n\t});\r\n}\r\n\r\n/**\r\n * Returns a copy of the object.\r\n *\r\n * @param   {object} object  Source object\r\n * @returns {object}         Copy of the object\r\n */\r\nexport function copy<Object>(object: Object): Object {\r\n\treturn Object.assign({}, object);\r\n}\r\n\r\n/**\r\n * Merges two objects and returns a new object that contains properties from\r\n * both source objects.\r\n * \r\n * @param   {object} object1  Source object #1\r\n * @param   {object} object2  Source object #2\r\n * @returns {object}          Combined object\r\n */\r\nexport function merge<Object1, Object2>(object1: Object1, object2: Object2): Object1 & Object2 {\r\n\treturn Object.assign({}, object1, object2);\r\n}\r\n\r\n/**\r\n * Copies a list of properties from one object to another.\r\n *\r\n * Will not copy empty properties.\r\n * \r\n * @param {object}         from  Source object\r\n * @param {object}         to    Target object\r\n * @param {Array<string>}  keys  List of keys to copy\r\n */\r\nexport function copyProperties(from: { [key: string]: any }, to: { [key: string]: any }, keys: Array<string>): void {\r\n\t$array.each(keys, (key) => {\r\n\t\tif ($type.hasValue(from[key])) {\r\n\t\t\tto[key] = from[key];\r\n\t\t}\r\n\t});\r\n}\r\n\r\n/**\r\n * Copies a list of properties from one object to another.\r\n *\r\n * Will copy empty properties.\r\n * \r\n * @param {object}         from  Source object\r\n * @param {object}         to    Target object\r\n * @param {Array<string>}  keys  List of keys to copy\r\n */\r\nexport function forceCopyProperties(from: { [key: string]: any }, to: { [key: string]: any }, keys: Array<string>): void {\r\n\t$array.each(keys, (key) => {\r\n\t\tto[key] = from[key];\r\n\t});\r\n}\r\n\r\n/**\r\n * Copies all properties from one object to another.\r\n *\r\n * @param {object}  from  Source object\r\n * @param {object}  to    Target object\r\n */\r\nexport function copyAllProperties(from: { [key: string]: any }, to: { [key: string]: any }): void {\r\n\tcopyProperties(from, to, keys(from));\r\n}\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/utils/Object.ts","/**\r\n * Base functionality\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { IClone } from \"./utils/Clone\";\r\nimport { List, ListTemplate } from \"./utils/List\";\r\nimport { Dictionary, DictionaryTemplate } from \"./utils/Dictionary\";\r\nimport { Disposer, IDisposer } from \"./utils/Disposer\";\r\nimport { EventDispatcher, AMEvent } from \"./utils/EventDispatcher\";\r\nimport { Adapter } from \"./utils/Adapter\";\r\nimport { Color, color } from \"./utils/Color\";\r\nimport { Percent, percent } from \"./utils/Percent\";\r\nimport { ITheme } from \"../themes/ITheme\";\r\nimport { Ordering } from \"./utils/Order\";\r\n\r\nimport { registry } from \"./Registry\";\r\nimport { cache } from \"./utils/Cache\";\r\n\r\nimport * as $array from \"./utils/Array\";\r\nimport * as $object from \"./utils/Object\";\r\nimport * as $type from \"./utils/Type\";\r\n\r\n//import * as $debug from \"./utils/Debug\";\r\n\r\n/**\r\n * Provides base functionality for all derivative objects, like generating ids,\r\n * handling cache, etc.\r\n */\r\nexport class BaseObject implements IClone<BaseObject>, IDisposer {\r\n\r\n\t/**\r\n\t * A unique ID for this object.\r\n\t *\r\n\t * Generated on first access by `uid()` getter.\r\n\t *\r\n\t * @type {Optional<string>}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tprotected _uid: $type.Optional<string>;\r\n\r\n\t/**\r\n\t * Indicates if this object has already been deleted. Any\r\n\t * destruction/disposal code should take this into account when deciding\r\n\t * wheter to run potentially costly disposal operations if they already have\r\n\t * been run.\r\n\t *\r\n\t * @type {boolean}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tprotected _disposed: boolean = false;\r\n\r\n\t/**\r\n\t * List of IDisposer which will be disposed when the BaseObject is disposed.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tprotected _disposers: Array<IDisposer> = [];\r\n\r\n\t/**\r\n\t * User-defined id of the object.\r\n\t *\r\n\t * @type {Optional<string>}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tprotected _id: $type.Optional<string>;\r\n\r\n\t/**\r\n\t * Holds a universal mapping collection, so that elements and their children\r\n\t * can create and look up all kinds of relations between id and object.\r\n\t *\r\n\t * @type {Optional<Dictionary<string, any>>}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tprotected _map: $type.Optional<Dictionary<string, any>>;\r\n\r\n\t/**\r\n\t * The theme used by this object.\r\n\t *\r\n\t * @type {Optional<ITheme[]>}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tprotected _themes: $type.Optional<ITheme[]>;\r\n\r\n\t// @review\r\n\t/**\r\n\t * A list of objects that are clones of this object. An object needs to\r\n\t * maintain a list of its clones so that properties can be re-applied to\r\n\t * clones whenever property on the object they were cloned from changes.\r\n\t *\r\n\t * @type {Optional<Dictionary<string, this>>}\r\n\t */\r\n\tprotected _clones: $type.Optional<List<this>>;\r\n\r\n\r\n\t// @review\r\n\t/**\r\n\t * Reference to the original object this object was cloned from. We need to\r\n\t * keep this so we can disassociate it from source object when this object\r\n\t * is disposed.\r\n\t *\r\n\t * @type {Optional<this>}\r\n\t */\r\n\tpublic clonedFrom: $type.Optional<this>;\r\n\r\n\t/**\r\n\t * A class name for the object.\r\n\t *\r\n\t * This property is used by deriving classes to identify which class it is.\r\n\t * We could derive the class name from the object itself, however method of\r\n\t * doing so is too costly, so we are relying on this property to quickly\r\n\t * access type of class.\r\n\t *\r\n\t * @type {Optional<string>}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tprotected _className: $type.Optional<string>;\r\n\r\n\t/**\r\n\t * [cloneId description]\r\n\t *\r\n\t * @type {Optional<string>}\r\n\t * @todo Needs description\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic cloneId: $type.Optional<string>;\r\n\r\n\t//protected _classes: { [index: string]: any } = {};\r\n\r\n\t/**\r\n\t * Constructor\r\n\t * * Sets class name\r\n\t */\r\n\tconstructor() {\r\n\t\tthis.className = \"BaseObject\";\r\n\t\tthis.debug();\r\n\t}\r\n\r\n\tprotected debug(): void {\r\n\t\t//$debug.debug(this);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns object's internal unique ID.\r\n\t *\r\n\t * @return {string} Unique ID\r\n\t */\r\n\tpublic get uid(): string {\r\n\t\tif (!this._uid) {\r\n\t\t\tthis._uid = registry.getUniqueId();\r\n\t\t\tregistry.map.setKey(this._uid, this);\r\n\t\t}\r\n\t\treturn this._uid;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the user-defined id of the element.\r\n\t *\r\n\t * @param {Optional<string>} value Id\r\n\t */\r\n\tpublic set id(value: $type.Optional<string>) {\r\n\t\t//registry.map.setKey(value, this); // registry.map only stores by uid\r\n\t\tthis._id = value;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Optional<string>} Id\r\n\t */\r\n\tpublic get id(): $type.Optional<string> {\r\n\t\treturn this._id;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a universal collection for mapping ids with objects.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {Dictionary<string, any>} Map collection\r\n\t */\r\n\tpublic get map(): Dictionary<string, any> {\r\n\t\tif (!this._map) {\r\n\t\t\tthis._map = new Dictionary<string, any>();\r\n\t\t}\r\n\t\treturn this._map;\r\n\t}\r\n\r\n\t/**\r\n\t * Applies properties from all assigned themes.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic applyTheme(): void {\r\n\t\t// TODO is this needed ?\r\n\t\tif (registry) {\r\n\t\t\tlet themes = this.getCurrentThemes();\r\n\r\n\t\t\t// TODO is this needed ?\r\n\t\t\tif (themes) {\r\n\t\t\t\t$array.each(themes, (theme, index) => {\r\n\t\t\t\t\ttheme(this);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * A list of themes to be used for this element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {Optional<ITheme[]>} value An array of themes\r\n\t */\r\n\tpublic set themes(value: $type.Optional<ITheme[]>) {\r\n\t\tthis._themes = value;\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore Exclude from docs\r\n\t * @return {Optional<ITheme[]>} An array of themes\r\n\t */\r\n\tpublic get themes(): $type.Optional<ITheme[]> {\r\n\t\treturn this._themes;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a list of themes that should be applied to this element. It could\r\n\t * either be a list of themes set explicitly on this element, or system-wide.\r\n\t *\r\n\t * @return {ITheme[]} List of themes\r\n\t */\r\n\tpublic getCurrentThemes(): ITheme[] {\r\n\t\treturn this.themes || registry.themes;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns if this object has been already been disposed.\r\n\t *\r\n\t * @return {boolean} Is disposed?\r\n\t */\r\n\tpublic isDisposed(): boolean {\r\n\t\treturn this._disposed;\r\n\t}\r\n\r\n\t/**\r\n\t * Destroys this object and all related data.\r\n\t */\r\n\tpublic dispose(): void {\r\n\t\tif (!this._disposed) {\r\n\t\t\tthis._disposed = true;\r\n\r\n\t\t\tconst a = this._disposers;\r\n\r\n\t\t\tthis._disposers = <any>null;\r\n\r\n\t\t\twhile (a.length !== 0) {\r\n\t\t\t\tconst disposer = a.shift();\r\n\t\t\t\tdisposer.dispose();\r\n\t\t\t}\r\n\r\n\t\t\t// Clear cache\r\n\t\t\tthis.clearCache();\r\n\r\n\t\t\t// remove from clones list\r\n\t\t\tif (this.clonedFrom) {\r\n\t\t\t\tthis.clonedFrom.clones.removeValue(this);\r\n\t\t\t}\r\n\r\n\t\t\tconst uid = this._uid;\r\n\r\n\t\t\tif (uid != null) {\r\n\t\t\t\tregistry.map.removeKey(uid);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Disposes disposable object and removes it from `_disposers`.\r\n\t *\r\n\t * @param {IDisposer} target Object to dispose\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic removeDispose(target: IDisposer): void {\r\n\t\t//if(target){\r\n\t\tif (!this._disposed) {\r\n\t\t\tlet index = $array.indexOf(this._disposers, target);\r\n\t\t\tif (index > -1) {\r\n\t\t\t\tthis._disposers.splice(index, 1);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\ttarget.dispose();\r\n\t\t//}\r\n\t}\r\n\r\n\t/**\r\n\t * Makes a copy of this object and returns the clone. Try to avoid clonning complex objects like chart, create new instances if you need them.\r\n\t *\r\n\t * @param   {string}  cloneId  An id to use for clone (if not set a unique id will be generated)\r\n\t * @returns {Object}           Clone\r\n\t */\r\n\tpublic clone<A extends this>(cloneId?: string): this {\r\n\t\tif (!cloneId) {\r\n\t\t\tcloneId = \"clone-\" + registry.getUniqueId();\r\n\t\t}\r\n\r\n\t\tlet newObject: this = new (<{ new(): A; }>this.constructor)();\r\n\t\tnewObject.cloneId = cloneId;\r\n\r\n\t\tnewObject.copyFrom(this);\r\n\r\n\t\t// add to clones list\r\n\t\t// this.clones.push(newObject); // moved this to copyFrom\r\n\r\n\r\n\t\treturn newObject;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a collection of object's clones.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {Dictionary<string, this>} Clones\r\n\t */\r\n\tpublic get clones(): List<this> {\r\n\t\tif (!this._clones) {\r\n\t\t\tthis._clones = new List<this>();\r\n\t\t}\r\n\t\treturn this._clones;\r\n\t}\r\n\r\n\t/**\r\n\t * Copies all properties and related data from different element.\r\n\t *\r\n\t * @param {this} object Source element\r\n\t */\r\n\tpublic copyFrom(object: this): void {\r\n\t\tobject.clones.moveValue(this);\r\n\t\tthis.clonedFrom = object;\r\n\t}\r\n\r\n\t/**\r\n\t * Element's class name. (a class that was used to instantiate the element)\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {string}  value  Class name\r\n\t */\r\n\tpublic set className(value: $type.Optional<string>) {\r\n\t\tthis._className = value;\r\n\t\t/*if (registry) {\r\n\t\t\tregistry.registeredClasses[value] = typeof this;\r\n\t\t}*/\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore Exclude from docs\r\n\t * @return {string} Class name\r\n\t */\r\n\tpublic get className(): $type.Optional<string> {\r\n\t\treturn this._className;\r\n\t}\r\n\r\n\t/**\r\n\t * Caches value in object's cache.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {string}  key    Key\r\n\t * @param {any}     value  Value\r\n\t */\r\n\tpublic setCache(key: string, value: any): void {\r\n\t\tcache.set(this.uid, key, value);\r\n\t}\r\n\r\n\t/**\r\n\t * Retrieves cached value.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {string}  key  Key\r\n\t * @return {any}          Value\r\n\t */\r\n\tpublic getCache(key: string): any {\r\n\t\treturn cache.get(this.uid, key);\r\n\t}\r\n\r\n\t/**\r\n\t * Clears object's local cache.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic clearCache(): void {\r\n\t\tcache.clear(this.uid);\r\n\t}\r\n\r\n\t/**\r\n\t * Creates [[Disposer]] for `setTimeout` function call. This ensures that all\r\n\t * timeouts created by the object will be cleared when object itself is\r\n\t * disposed.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {() => void}  fn     Callback function\r\n\t * @param  {number}      delay  Timeout (ms)\r\n\t * @return {IDisposer}          Disposer for timeout\r\n\t */\r\n\tpublic setTimeout(fn: () => void, delay: number): IDisposer {\r\n\t\tconst id = setTimeout(() => {\r\n\t\t\tthis.removeDispose(disposer);\r\n\t\t\tfn();\r\n\t\t}, delay);\r\n\r\n\t\tconst disposer = new Disposer(() => {\r\n\t\t\tclearTimeout(id);\r\n\t\t});\r\n\r\n\t\tthis._disposers.push(disposer);\r\n\t\treturn disposer;\r\n\t}\r\n\r\n\t/**\r\n\t * ==========================================================================\r\n\t * JSON-BASED CONFIG PROCESSING\r\n\t * ==========================================================================\r\n\t * @hidden\r\n\t */\r\n\r\n\t/**\r\n\t * Use this property to set JSON-based config. When set, triggers processing\r\n\t * routine, which will go thorugh all properties, and try to apply values,\r\n\t * create instances, etc.\r\n\t *\r\n\t * Use this with caution, as it is a time-consuming process. It's used for\r\n\t * initialchart setup only, not routine operations.\r\n\t *\r\n\t * @param {object} json JSON config\r\n\t */\r\n\tpublic set config(config: object) {\r\n\t\ttry {\r\n\t\t\tthis.processConfig(config);\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\t/*if (this instanceof Sprite) {\r\n\t\t\t\tthis.raiseCriticalError(e);\r\n\t\t\t}*/\r\n\t\t\t(<any>this).raiseCriticalError(e);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Processes the JSON config.\r\n\t *\r\n\t * @param {object}  json  JSON config\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tprotected processConfig(config?: object): void {\r\n\r\n\t\tif (!config) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Get target\r\n\t\tlet target = <any>this;\r\n\r\n\t\t// Iterate through all of the items\r\n\t\t$object.eachOrdered(config, (configKey, value) => {\r\n\t\t\tlet configValue: any = value;\r\n\r\n\t\t\t// Check if there's a property in target\r\n\t\t\tif (this.hasProperty(configKey)) {\r\n\r\n\t\t\t\tlet item: any;\r\n\r\n\t\t\t\t// Do we have instructions to create an object?\r\n\t\t\t\tif ($type.isObject(configValue) && $type.hasValue((<any>configValue)[\"type\"])) {\r\n\t\t\t\t\t// Create new instance\r\n\t\t\t\t\tif (item = this.createClassInstance((<any>configValue)[\"type\"])) {\r\n\t\t\t\t\t\ttarget[configKey] = item;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\titem = target[configKey];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t// Get item from the object\r\n\t\t\t\t\titem = target[configKey];\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * It is...\r\n\t\t\t\t * --------------------------------------------------------------------\r\n\t\t\t\t */\r\n\r\n\t\t\t\tif (item instanceof Adapter) {\r\n\r\n\t\t\t\t\t// ... an Adapter, try to add handlers to it\r\n\t\t\t\t\t// ------------------------------------------------------------------\r\n\t\t\t\t\tthis.processAdapters(item, configValue);\r\n\r\n\t\t\t\t}\r\n\t\t\t\telse if (item instanceof EventDispatcher) {\r\n\r\n\t\t\t\t\t// ... an EventDispatcher, try to add handlers to it\r\n\t\t\t\t\t// ------------------------------------------------------------------\r\n\t\t\t\t\tthis.processEvents(item, configValue);\r\n\r\n\t\t\t\t}\r\n\t\t\t\telse if (this.asIs(configKey)) {\r\n\r\n\t\t\t\t\t// ... a special field, just set it to new value\r\n\t\t\t\t\t// ------------------------------------------------------------------\r\n\t\t\t\t\t// (no need to add each indvidual item)\r\n\t\t\t\t\ttarget[configKey] = configValue;\r\n\r\n\t\t\t\t}\r\n\t\t\t\telse if (<any>configValue instanceof BaseObject) {\r\n\r\n\t\t\t\t\t// ... a BaseObject object, we just going to use it as it is\r\n\t\t\t\t\t// ------------------------------------------------------------------\r\n\t\t\t\t\ttarget[configKey] = configValue;\r\n\r\n\t\t\t\t}\r\n\t\t\t\telse if (item instanceof BaseObject) {\r\n\r\n\t\t\t\t\t// ... another child BaseObject\r\n\t\t\t\t\t// ------------------------------------------------------------------\r\n\t\t\t\t\t// Let's just pass in config part in and let itself deal with it\r\n\t\t\t\t\titem.config = configValue;\r\n\r\n\t\t\t\t}\r\n\t\t\t\telse if (item instanceof ListTemplate) {\r\n\r\n\t\t\t\t\t// ... a list with template\r\n\t\t\t\t\t// ------------------------------------------------------------------\r\n\r\n\t\t\t\t\t// Let's see what we can do with it\r\n\t\t\t\t\tif ($type.isArray(configValue)) {\r\n\r\n\t\t\t\t\t\t// It's an array.\r\n\t\t\t\t\t\t// Create a list item for entry, or try to apply properties to an\r\n\t\t\t\t\t\t// existing entry if possible and it is present.\r\n\t\t\t\t\t\t$array.each(configValue, (entry, index) => {\r\n\t\t\t\t\t\t\tlet type = this.getConfigEntryType(entry);\r\n\t\t\t\t\t\t\tlet listItem;\r\n\t\t\t\t\t\t\tif (item.hasIndex(index)) {\r\n\t\t\t\t\t\t\t\tlistItem = item.getIndex(index);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse if (<any>entry instanceof BaseObject) {\r\n\t\t\t\t\t\t\t\t// Item is already a BaseObject, no need to process it further\r\n\t\t\t\t\t\t\t\titem.push(entry);\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse if (type) {\r\n\t\t\t\t\t\t\t\tlistItem = item.create(type);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tlistItem = item.create();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif ($type.isObject(entry)) {\r\n\r\n\t\t\t\t\t\t\t\t// If the list item is BaseObject, we just need to let it\r\n\t\t\t\t\t\t\t\t// deal if its own config\r\n\t\t\t\t\t\t\t\tif (listItem instanceof BaseObject) {\r\n\t\t\t\t\t\t\t\t\t(<any>listItem).config = entry;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse if ($type.isObject(listItem) && $type.isObject(entry)) {\r\n\t\t\t\t\t\t\t\t\t$object.copyAllProperties(<Object>entry, <Object>listItem);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\titem.setIndex(item.indexOf(listItem), entry);\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// Truncate the list if it contains less items than the config\r\n\t\t\t\t\t\t// array\r\n\t\t\t\t\t\twhile (configValue.length > item.length) {\r\n\t\t\t\t\t\t\titem.pop();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if ($type.isObject(configValue)) {\r\n\r\n\r\n\t\t\t\t\t\t// It's a single oject.\r\n\t\t\t\t\t\t// Treat it as a template.\r\n\t\t\t\t\t\tif (<any>configValue instanceof BaseObject) {\r\n\t\t\t\t\t\t\t// Item is already a BaseObject, no need to process it further\r\n\t\t\t\t\t\t\titem.template = configValue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t$object.each(configValue, (entryKey, entryValue) => {\r\n\r\n\t\t\t\t\t\t\t\tlet listItem = (<any>item.template)[entryKey];\r\n\t\t\t\t\t\t\t\tif (listItem instanceof Adapter) {\r\n\t\t\t\t\t\t\t\t\tthis.processAdapters(listItem, entryValue);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse if (listItem instanceof EventDispatcher) {\r\n\t\t\t\t\t\t\t\t\tthis.processEvents(listItem, entryValue);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse if (listItem instanceof DictionaryTemplate) {\r\n\t\t\t\t\t\t\t\t\tthis.processDictionaryTemplate(listItem, entryValue);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse if (item.template[entryKey] instanceof BaseObject) {\r\n\t\t\t\t\t\t\t\t\t// Template is a BaseObject. Let it deal with its own config.\r\n\t\t\t\t\t\t\t\t\t(<any>item.template[entryKey]).config = entryValue;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\t// Aything else. Just assing and be done with it.\r\n\t\t\t\t\t\t\t\t\titem.template[entryKey] = entryValue;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\r\n\t\t\t\t\t\t// Something else?\r\n\t\t\t\t\t\t// Not sure what to do with it on a list - ignore\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\telse if (item instanceof List) {\r\n\r\n\t\t\t\t\t// ... a list\r\n\t\t\t\t\t// ------------------------------------------------------------------\r\n\r\n\t\t\t\t\t// Convert to array if necessary\r\n\t\t\t\t\tif (!$type.isArray(configValue)) {\r\n\t\t\t\t\t\tconfigValue = [configValue];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// It's an array\r\n\t\t\t\t\t// Create a list item for entry\r\n\t\t\t\t\t$array.each(configValue, (entry, index) => {\r\n\r\n\t\t\t\t\t\tif ($type.isObject(entry)) {\r\n\r\n\t\t\t\t\t\t\t// An object.\r\n\t\t\t\t\t\t\t//\r\n\t\t\t\t\t\t\t// Let's see if we can instantiate a class out of it, or we need\r\n\t\t\t\t\t\t\t// to push it into list as it is.\r\n\t\t\t\t\t\t\t//\r\n\t\t\t\t\t\t\t// If there are items already at the specified index in the list,\r\n\t\t\t\t\t\t\t// apply properties rather than create a new one.\r\n\r\n\t\t\t\t\t\t\tlet listItem;\r\n\t\t\t\t\t\t\tif (item.hasIndex(index)) {\r\n\t\t\t\t\t\t\t\tlistItem = item.getIndex(index);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse if (<any>entry instanceof BaseObject) {\r\n\t\t\t\t\t\t\t\t// Item is already a BaseObject, no need to process it further\r\n\t\t\t\t\t\t\t\titem.push(entry);\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tlistItem = this.createEntryInstance(entry);\r\n\t\t\t\t\t\t\t\titem.push(listItem);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// If the list item is BaseObject, we just need to let it\r\n\t\t\t\t\t\t\t// deal if its own config\r\n\t\t\t\t\t\t\tif (listItem instanceof BaseObject) {\r\n\t\t\t\t\t\t\t\t(<any>listItem).config = entry;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\r\n\t\t\t\t\t\t\t// Basic value.\r\n\t\t\t\t\t\t\t// Just push it into list, or override existing value\r\n\t\t\t\t\t\t\tif (item.hasIndex(index)) {\r\n\t\t\t\t\t\t\t\titem.setIndex(index, entry);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\titem.push(entry);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t// Truncate the list if it contains less items than the config\r\n\t\t\t\t\t// array\r\n\t\t\t\t\twhile (configValue.length > item.length) {\r\n\t\t\t\t\t\titem.pop();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\telse if (item instanceof DictionaryTemplate) {\r\n\r\n\t\t\t\t\t// ... a dictionary with template\r\n\t\t\t\t\t// ------------------------------------------------------------------\r\n\r\n\t\t\t\t\tthis.processDictionaryTemplate(item, configValue);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\telse if (item instanceof Dictionary) {\r\n\r\n\t\t\t\t\t// ... a dictionary\r\n\t\t\t\t\t// ------------------------------------------------------------------\r\n\t\t\t\t\t// @todo\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\telse if (item instanceof Color || item instanceof Percent) {\r\n\r\n\t\t\t\t\t// ... it's a Color or Percent\r\n\t\t\t\t\t// ------------------------------------------------------------------\r\n\t\t\t\t\ttarget[configKey] = configValue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\telse if ($type.isObject(item) && $type.isObject(configValue)) {\r\n\r\n\t\t\t\t\t// ... a regular object\r\n\t\t\t\t\t// ------------------------------------------------------------------\r\n\r\n\t\t\t\t\t$object.copyAllProperties(<Object>configValue, <Object>item);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\telse {\r\n\r\n\t\t\t\t\t// ... something else - probably a simple property or object\r\n\t\t\t\t\t// ------------------------------------------------------------------\r\n\r\n\t\t\t\t\t// Maybe convert to `Percent` or `Color`?\r\n\t\t\t\t\tconfigValue = this.maybeColorOrPercent(configValue);\r\n\r\n\t\t\t\t\t// Assign\r\n\t\t\t\t\ttarget[configKey] = configValue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}, this.configOrder);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Tries to detect if value is color or percent and converts to proper object\r\n\t * if necessary.\r\n\t *\r\n\t * Returns the same source value if no color/percent detected\r\n\t *\r\n\t * @param  {any}  value  Source value\r\n\t * @return {any}         Converted value\r\n\t */\r\n\tprotected maybeColorOrPercent(value: any): any {\r\n\t\tif ($type.isString(value)) {\r\n\t\t\tif (value.match(/^[0-9.\\-]+\\%$/)) {\r\n\t\t\t\treturn percent($type.toNumber(value));\r\n\t\t\t}\r\n\t\t\telse if (value.match(/^\\#[0-9abcdef]{3,}$/i)) {\r\n\t\t\t\treturn color(value);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\tprotected processAdapters(item: Adapter<any, any>, config: any): void {\r\n\t\tif ($type.isObject(config)) {\r\n\t\t\t$object.each(config, (key, entry) => {\r\n\t\t\t\tif (!item.has(key, entry)) {\r\n\t\t\t\t\titem.add(key, entry);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\telse if ($type.isArray(config)) {\r\n\t\t\t$array.each(config, (entry: { type: string, callback: any, priority?: number }, index) => {\r\n\t\t\t\titem.add(entry.type, entry.callback, entry.priority || 0, this);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tprotected processEvents(item: EventDispatcher<any>, config: any): void {\r\n\t\tif ($type.isObject(config)) {\r\n\t\t\t$object.each(config, (key, entry) => {\r\n\t\t\t\tif (!item.has(key, entry)) {\r\n\t\t\t\t\titem.on(key, entry);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\telse if ($type.isArray(config)) {\r\n\t\t\t$array.each(config, (entry: { type: string, callback: any }, index) => {\r\n\t\t\t\titem.on(entry.type, entry.callback, this);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Processes JSON config for a [[DictionaryTemplate]] item.\r\n\t *\r\n\t * @todo Description\r\n\t * @param {DictionaryTemplate<any, any>}  item    Item\r\n\t * @param {any}                           config  Config\r\n\t */\r\n\tprotected processDictionaryTemplate(item: DictionaryTemplate<any, any>, config: any): void {\r\n\r\n\t\t// We can only process object\r\n\t\t// Not sure what to do with other types - ignore\r\n\t\tif ($type.isObject(config)) {\r\n\r\n\t\t\t// Create an entry for each item, or override properties for\r\n\t\t\t// existing one.\r\n\t\t\t$object.each(config, (entryKey, entryValue) => {\r\n\t\t\t\tlet listItem;\r\n\r\n\t\t\t\t// Get existing one, or create a new one\r\n\t\t\t\tif (entryKey == \"template\") {\r\n\t\t\t\t\tlistItem = item.template;\r\n\t\t\t\t}\r\n\t\t\t\telse if (item.hasKey(entryKey)) {\r\n\t\t\t\t\tlistItem = item.getKey(entryKey);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tlistItem = item.create(entryKey);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Set data\r\n\t\t\t\tif (listItem instanceof BaseObject) {\r\n\t\t\t\t\tlistItem.config = entryValue;\r\n\t\t\t\t}\r\n\t\t\t\telse if ($type.isObject(listItem) && $type.isObject(entryValue)) {\r\n\t\t\t\t\t$object.copyAllProperties(<Object>entryValue, <Object>listItem);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tlistItem.setKey(entryKey, entryValue);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * This function is used to sort element's JSON config properties, so that\r\n\t * some properties that absolutely need to be processed last, can be put at\r\n\t * the end.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {string}  a  Element 1\r\n\t * @param  {string}  b  Element 2\r\n\t * @return {Ordering}   Sorting number\r\n\t */\r\n\tprotected configOrder(a: string, b: string): Ordering {\r\n\t\tif (a == b) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\t// Language must come first, so it's all set up when the rest of the\r\n\t\t// elements are being instantiated\r\n\t\telse if (a == \"language\") {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\telse if (b == \"language\") {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\r\n\t\telse {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if field should be just assigned as is, without any checking when\r\n\t * processing JSON config.\r\n\t *\r\n\t * Extending functions can override this function to do their own checks.\r\n\t *\r\n\t * @param  {string}   field  Field name\r\n\t * @return {boolean}         Assign as is?\r\n\t */\r\n\tprotected asIs(field: string): boolean {\r\n\t\treturn $array.indexOf([\"locale\"], field) != -1;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a relevant class instance if such class definition exists.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {string}  className  Class name\r\n\t * @return {Object}             Instance\r\n\t */\r\n\tprotected createClassInstance(className: string): Object {\r\n\t\tif ($type.hasValue(registry.registeredClasses[className])) {\r\n\t\t\treturn new registry.registeredClasses[className]();\r\n\t\t}\r\n\t\treturn;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a class instance for a config entry using it's type. (as set in\r\n\t * `type` property)\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {any}  config  Config part\r\n\t * @return {any}          Instance\r\n\t */\r\n\tprotected createEntryInstance(config: any): any {\r\n\t\tlet res: Object;\r\n\t\tif ($type.hasValue(config[\"type\"])) {\r\n\t\t\tres = this.createClassInstance(config[\"type\"]);\r\n\t\t}\r\n\t\tif (!res) {\r\n\t\t\treturn config;\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * Determines config object type.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {any}  config  Config part\r\n\t * @return {any}          Type\r\n\t */\r\n\tprotected getConfigEntryType(config: any): any {\r\n\t\tif ($type.hasValue(config[\"type\"])) {\r\n\t\t\tif ($type.hasValue(registry.registeredClasses[config[\"type\"]])) {\r\n\t\t\t\treturn registry.registeredClasses[config[\"type\"]];\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthrow Error(\"Invalid type: \\\"\" + config[\"type\"] + \"\\\".\");\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn;\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if this element has a property.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {string}   prop  Property name\r\n\t * @return {boolean}        Has property?\r\n\t */\r\n\tprotected hasProperty(prop: string): boolean {\r\n\t\treturn prop in this ? true : false;\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Defines events for [[BaseObjectEvents]].\r\n */\r\nexport interface IBaseObjectEvents { };\r\n\r\n/**\r\n * A version of [[BaseObject]] with events properties and methods.\r\n * Classes that use [[EventDispatcher]] should extend this instead of\r\n * [[BaseObject]] directly.\r\n */\r\nexport class BaseObjectEvents extends BaseObject {\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"BaseObjectEvents\";\r\n\t\tthis._disposers.push(this.events);\r\n\t}\r\n\r\n\tpublic _events!: IBaseObjectEvents;\r\n\r\n\t/**\r\n\t * An [[EventDispatcher]] instance\r\n\t */\r\n\tpublic events: EventDispatcher<AMEvent<this, this[\"_events\"]>> = new EventDispatcher();\r\n\r\n\t/**\r\n\t * Dispatches an event using own event dispatcher. Will automatically\r\n\t * populate event data object with event type and target (this element).\r\n\t * It also checks if there are any handlers registered for this sepecific\r\n\t * event.\r\n\t *\r\n\t * @param {Key} eventType Event type (name)\r\n\t * @param {any}    data      Data to pass into event handler(s)\r\n\t */\r\n\tpublic dispatch<Key extends keyof this[\"_events\"]>(eventType: Key, data?: any): void {\r\n\t\t// @todo Implement proper type check\r\n\t\tif (this.events.isEnabled(eventType)) {\r\n\t\t\tif (data) {\r\n\t\t\t\tdata.type = eventType;\r\n\t\t\t\tdata.target = data.target || this;\r\n\t\t\t\t(<any>this.events).dispatch(eventType, {\r\n\t\t\t\t\ttype: eventType,\r\n\t\t\t\t\ttarget: this\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t(<any>this.events).dispatch(eventType, {\r\n\t\t\t\t\ttype: eventType,\r\n\t\t\t\t\ttarget: this\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Works like `dispatch`, except event is triggered immediately, without\r\n\t * waiting for the next frame cycle.\r\n\t *\r\n\t * @param {Key} eventType Event type (name)\r\n\t * @param {any}    data      Data to pass into event handler(s)\r\n\t */\r\n\tpublic dispatchImmediately<Key extends keyof this[\"_events\"]>(eventType: Key, data?: any): void {\r\n\t\t// @todo Implement proper type check\r\n\t\tif (this.events.isEnabled(eventType)) {\r\n\t\t\tif (data) {\r\n\t\t\t\tdata.type = eventType;\r\n\t\t\t\tdata.target = data.target || this;\r\n\t\t\t\t(<any>this.events).dispatchImmediately(eventType, data);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t(<any>this.events).dispatchImmediately(eventType, {\r\n\t\t\t\t\ttype: eventType,\r\n\t\t\t\t\ttarget: this\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../src/.internal/core/Base.ts","var store = require('./_shared')('wks');\nvar uid = require('./_uid');\nvar Symbol = require('./_global').Symbol;\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_wks.js\n// module id = 21\n// module chunks = 26","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_descriptors.js\n// module id = 22\n// module chunks = 26","var anObject = require('./_an-object');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar toPrimitive = require('./_to-primitive');\nvar dP = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_object-dp.js\n// module id = 23\n// module chunks = 26","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer');\nvar min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_to-length.js\n// module id = 24\n// module chunks = 26","/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { IDisposer, Disposer } from \"./Disposer\";\r\nimport { EventDispatcher, AMEvent } from \"./EventDispatcher\";\r\nimport { Optional } from \"./Type\";\r\nimport { IClone } from \"./Clone\";\r\nimport * as $object from \"./Object\";\r\nimport * as $iter from \"./Iterator\";\r\nimport * as $string from \"./String\";\r\n\r\n/**\r\n * Defines events from [[Dictionary]].\r\n */\r\nexport interface IDictionaryEvents<Key, Value> {\r\n\r\n\t/**\r\n\t * Invoked when an item is removed from the dictionary.\r\n\t */\r\n\tremoved: {\r\n\r\n\t\t/**\r\n\t\t * Removed value.\r\n\t\t *\r\n\t\t * @type {Value}\r\n\t\t */\r\n\t\toldValue: Value;\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when dictionary is cleared.\r\n\t */\r\n\tcleared: {};\r\n\r\n\t/**\r\n\t * Invoked when `insertKey()` method is called.\r\n\t */\r\n\tinsertKey: {\r\n\r\n\t\t/**\r\n\t\t * Key.\r\n\t\t *\r\n\t\t * @type {Key}\r\n\t\t */\r\n\t\tkey: Key;\r\n\r\n\t\t/**\r\n\t\t * Added value.\r\n\t\t *\r\n\t\t * @type {Value}\r\n\t\t */\r\n\t\tnewValue: Value;\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when `setKey()` method is called.\r\n\t */\r\n\tsetKey: {\r\n\r\n\t\t/**\r\n\t\t * Key.\r\n\t\t *\r\n\t\t * @type {Key}\r\n\t\t */\r\n\t\tkey: Key;\r\n\r\n\t\t/**\r\n\t\t * Removed value. (if overwriting)\r\n\t\t *\r\n\t\t * @type {Value}\r\n\t\t */\r\n\t\toldValue: Value;\r\n\r\n\t\t/**\r\n\t\t * Added value.\r\n\t\t *\r\n\t\t * @type {Value}\r\n\t\t */\r\n\t\tnewValue: Value;\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when `removeKey()` method is called.\r\n\t */\r\n\tremoveKey: {\r\n\r\n\t\t/**\r\n\t\t * Key.\r\n\t\t *\r\n\t\t * @type {Key}\r\n\t\t */\r\n\t\tkey: Key;\r\n\r\n\t\t/**\r\n\t\t * Removed value.\r\n\t\t *\r\n\t\t * @type {Value}\r\n\t\t */\r\n\t\toldValue: Value;\r\n\r\n\t};\r\n\r\n}\r\n\r\n/**\r\n * [K description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Descirption\r\n */\r\nexport type DictionaryLike<K, A> = $iter.Iterable<[K, A]> & {\r\n\tevents: EventDispatcher<{ removed: { oldValue: A } }>;\r\n};\r\n\r\n/**\r\n * A disposable dictionary, which when disposed itself will call `dispose()`\r\n * method on all its items.\r\n */\r\nexport class DictionaryDisposer<K, A extends IDisposer> extends Disposer {\r\n\tconstructor(dict: DictionaryLike<K, A>) {\r\n\t\tconst disposer = dict.events.on(\"removed\", (x) => {\r\n\t\t\tx.oldValue.dispose();\r\n\t\t});\r\n\r\n\t\tsuper(() => {\r\n\t\t\tdisposer.dispose();\r\n\r\n\t\t\t// TODO clear the dictionary ?\r\n\t\t\t$iter.each(dict.iterator(), (a) => {\r\n\t\t\t\tconst v = a[1];\r\n\t\t\t\tv.dispose();\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n}\r\n\r\n/**\r\n * A Dictionary is collection where values of some type can be mapped to\r\n * string keys.\r\n *\r\n * You might call it an \"associative list\" or \"associative array\".\r\n */\r\nexport class Dictionary<Key extends string, T> {\r\n\r\n\t/**\r\n\t * Key/value pairs\r\n\t */\r\n\tprivate _dictionary: { [key: string]: T };\r\n\r\n\t/**\r\n\t * Event dispatcher.\r\n\t *\r\n\t * @type {EventDispatcher<AMEvent<Dictionary<Key, T>, IDictionaryEvents<Key, T>>>}\r\n\t */\r\n\tpublic events: EventDispatcher<AMEvent<Dictionary<Key, T>, IDictionaryEvents<Key, T>>> = new EventDispatcher();\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tthis._dictionary = {};\r\n\t}\r\n\r\n\t/**\r\n\t * Returns `true` if key exists in Dictionary.\r\n\t *\r\n\t * @param  {Key}      key  The key to search for\r\n\t * @return {boolean}       `true` if key exists, `false` if it doesn't\r\n\t */\r\n\tpublic hasKey(key: Key): boolean {\r\n\t\treturn $object.hasKey(this._dictionary, key);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the value for a specific key.\r\n\t *\r\n\t * @param  {Key}          key  The key to search for\r\n\t * @return {Optional<T>}       Value for the key, or `undefined` if it doesn't exist\r\n\t */\r\n\tpublic getKey(key: Key): Optional<T> {\r\n\t\treturn this._dictionary[key];\r\n\t}\r\n\r\n\t/**\r\n\t * Inserts value at specific key.\r\n\t *\r\n\t * Will thrown an exception if the key already exists in the dictionary.\r\n\t *\r\n\t * @param {Key}  key    Key\r\n\t * @param {T}    value  Value\r\n\t */\r\n\tpublic insertKey(key: Key, value: T): void {\r\n\t\tif ($object.hasKey(this._dictionary, key)) {\r\n\t\t\tthrow new Error(\"Key \" + key + \" already exists in dictionary\");\r\n\r\n\t\t} else {\r\n\t\t\tthis._dictionary[key] = value;\r\n\r\n\t\t\tif (this.events.isEnabled(\"insertKey\")) {\r\n\t\t\t\tthis.events.dispatchImmediately(\"insertKey\", {\r\n\t\t\t\t\ttype: \"insertKey\",\r\n\t\t\t\t\ttarget: this,\r\n\t\t\t\t\tkey: key,\r\n\t\t\t\t\tnewValue: value\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Adds or updates key/value into dictionary.\r\n\t *\r\n\t * If the key already exists, the old value will be overwritten.\r\n\t *\r\n\t * @param  {Key}  key    Key\r\n\t * @param  {T}    value  Value\r\n\t */\r\n\tpublic setKey(key: Key, value: T): void {\r\n\t\tif ($object.hasKey(this._dictionary, key)) {\r\n\t\t\tconst oldValue = this._dictionary[key];\r\n\r\n\t\t\tthis._dictionary[key] = value;\r\n\r\n\t\t\tif (this.events.isEnabled(\"setKey\")) {\r\n\t\t\t\tthis.events.dispatchImmediately(\"setKey\", {\r\n\t\t\t\t\ttype: \"setKey\",\r\n\t\t\t\t\ttarget: this,\r\n\t\t\t\t\tkey: key,\r\n\t\t\t\t\toldValue: oldValue,\r\n\t\t\t\t\tnewValue: value\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (this.events.isEnabled(\"removed\")) {\r\n\t\t\t\tthis.events.dispatchImmediately(\"removed\", {\r\n\t\t\t\t\ttype: \"removed\",\r\n\t\t\t\t\ttarget: this,\r\n\t\t\t\t\toldValue: oldValue\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\tthis._dictionary[key] = value;\r\n\r\n\t\t\tif (this.events.isEnabled(\"insertKey\")) {\r\n\t\t\t\tthis.events.dispatchImmediately(\"insertKey\", {\r\n\t\t\t\t\ttype: \"insertKey\",\r\n\t\t\t\t\ttarget: this,\r\n\t\t\t\t\tkey: key,\r\n\t\t\t\t\tnewValue: value\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the value at specific `key` using custom function.\r\n\t *\r\n\t * Passes in current value into the function, and uses its output as a new\r\n\t * value.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {Key}       key  Key\r\n\t * @param {function}  fn   Function to transform the value\r\n\t */\r\n\tpublic updateKey(key: Key, fn: (value: T) => T): void {\r\n\t\tif ($object.hasKey(this._dictionary, key)) {\r\n\t\t\tconst oldValue = this._dictionary[key];\r\n\t\t\tconst newValue = fn(oldValue);\r\n\r\n\t\t\tthis._dictionary[key] = newValue;\r\n\r\n\t\t\tif (this.events.isEnabled(\"setKey\")) {\r\n\t\t\t\tthis.events.dispatchImmediately(\"setKey\", {\r\n\t\t\t\t\ttype: \"setKey\",\r\n\t\t\t\t\ttarget: this,\r\n\t\t\t\t\tkey: key,\r\n\t\t\t\t\toldValue: oldValue,\r\n\t\t\t\t\tnewValue: newValue\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (this.events.isEnabled(\"removed\")) {\r\n\t\t\t\tthis.events.dispatchImmediately(\"removed\", {\r\n\t\t\t\t\ttype: \"removed\",\r\n\t\t\t\t\ttarget: this,\r\n\t\t\t\t\toldValue: oldValue\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"Key \" + key + \" doesn't exist in dictionary\");\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Removes value at specific `key` from dictionary.\r\n\t *\r\n\t * @param {Key}  key  Key to remove\r\n\t */\r\n\tpublic removeKey(key: Key): void {\r\n\t\tif ($object.hasKey(this._dictionary, key)) {\r\n\t\t\tconst oldValue = this._dictionary[key];\r\n\r\n\t\t\tdelete this._dictionary[key];\r\n\r\n\t\t\tif (this.events.isEnabled(\"removeKey\")) {\r\n\t\t\t\tthis.events.dispatchImmediately(\"removeKey\", {\r\n\t\t\t\t\ttype: \"removeKey\",\r\n\t\t\t\t\ttarget: this,\r\n\t\t\t\t\tkey: key,\r\n\t\t\t\t\toldValue: oldValue\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (this.events.isEnabled(\"removed\")) {\r\n\t\t\t\tthis.events.dispatchImmediately(\"removed\", {\r\n\t\t\t\t\ttype: \"removed\",\r\n\t\t\t\t\ttarget: this,\r\n\t\t\t\t\toldValue: oldValue\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * [insertKeyIfEmpty description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo description\r\n\t * @param  {Key}       key      [description]\r\n\t * @param  {function}  ifEmpty  [description]\r\n\t * @return {T}                  [description]\r\n\t */\r\n\tpublic insertKeyIfEmpty(key: Key, ifEmpty: () => T): T {\r\n\t\tif (!this.hasKey(key)) {\r\n\t\t\tthis.insertKey(key, ifEmpty());\r\n\t\t}\r\n\r\n\t\treturn <T>this.getKey(key);\r\n\t}\r\n\r\n\t/**\r\n\t * Removes all items from the dictionary.\r\n\t */\r\n\tpublic clear(): void {\r\n\t\t// TODO dispatch this after clear\r\n\t\tif (this.events.isEnabled(\"removed\")) {\r\n\t\t\t$object.each(this._dictionary, (key, value) => {\r\n\t\t\t\tthis.events.dispatchImmediately(\"removed\", {\r\n\t\t\t\t\ttype: \"removed\",\r\n\t\t\t\t\ttarget: this,\r\n\t\t\t\t\toldValue: value\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis._dictionary = {};\r\n\r\n\t\tif (this.events.isEnabled(\"cleared\")) {\r\n\t\t\tthis.events.dispatchImmediately(\"cleared\", {\r\n\t\t\t\ttype: \"cleared\",\r\n\t\t\t\ttarget: this\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Copies items from another Dictionary.\r\n\t *\r\n\t * @param {Dictionary<Key, T>}  source  A Dictionary to copy items from\r\n\t */\r\n\tpublic copyFrom(source: this): void {\r\n\t\t$iter.each(source.iterator(), (a) => {\r\n\t\t\t// TODO fix this type cast\r\n\t\t\tthis.setKey(<Key>a[0], a[1]);\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Returns an interator that can be used to iterate through all items in\r\n\t * the dictionary.\r\n\t *\r\n\t * @return {Iterator} Iterator\r\n\t */\r\n\tpublic iterator(): $iter.Iterator<[Key, T]> {\r\n\t\t// @todo fix this type after the Iterator bug is fixed\r\n\t\t// https://github.com/Microsoft/TypeScript/issues/16730\r\n\t\treturn $object.entries(this._dictionary);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns an ES6 iterator for the keys/values of the dictionary.\r\n\t */\r\n\tpublic *[Symbol.iterator](): Iterator<[Key, T]> {\r\n\t\t// TODO make this more efficient ?\r\n\t\tfor (let key in this._dictionary) {\r\n\t\t\tif ($object.hasKey(this._dictionary, key)) {\r\n\t\t\t\tyield [<Key>key, this._dictionary[key]];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Calls `f` for each key/value in the dictionary.\r\n\t */\r\n\tpublic each(f: (key: Key, value: T) => void): void {\r\n\t\t$iter.each(this.iterator(), ([key, value]) => f(key, value));\r\n\t}\r\n\r\n\t/**\r\n\t * Returns an iterator that can be used to iterate through all items in\r\n\t * the dictionary, ordered by key.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {Iterator} Iterator\r\n\t */\r\n\tpublic sortedIterator(): $iter.Iterator<[Key, T]> {\r\n\t\treturn $iter.sort(this.iterator(), (x, y) => $string.order(x[0], y[0]));\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * A version of a [[Dictionary]] that has a \"template\".\r\n *\r\n * A template is an instance of an object, that can be used to create new\r\n * elements in the list without actually needing to create instances for those.\r\n *\r\n * When new element is created in the list, e.g. by calling its `create()`\r\n * method, an exact copy of the element is created (including properties and\r\n * other attributes), inserted into the list and returned.\r\n */\r\nexport class DictionaryTemplate<Key extends string, T extends IClone<T> & { isTemplate: boolean }> extends Dictionary<Key, T> {\r\n\t/**\r\n\t * A template object.\r\n\t *\r\n\t * @todo Make this private\r\n\t * @type {T}\r\n\t */\r\n\tpublic _template!: T;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t *\r\n\t * @param {T} t Template object\r\n\t */\r\n\tpublic constructor(t: T) {\r\n\t\tsuper();\r\n\t\tthis.template = t;\r\n\t}\r\n\r\n\t/**\r\n\t * A \"template\" object to copy all properties from when creating new list\r\n\t * items.\r\n\t *\r\n\t * @param {T}  v  Template object\r\n\t */\r\n\tpublic set template(v: T) {\r\n\t\tv.isTemplate = true;\r\n\t\tthis._template = v;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {T} Template object\r\n\t */\r\n\tpublic get template(): T {\r\n\t\treturn this._template;\r\n\t}\r\n\r\n\t/**\r\n\t * Copies all elements from other dictionary.\r\n\t *\r\n\t * @param {DictionaryTemplate}  source  Source dictionary\r\n\t */\r\n\tpublic copyFrom(source: this): void {\r\n\t\t$iter.each(source.iterator(), (a) => {\r\n\t\t\t// TODO fix this type cast\r\n\t\t\t// TODO why does this need to clone ?\r\n\t\t\tthis.setKey(<Key>a[0], a[1].clone());\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Instantiates a new object of the specified type, adds it to specified\r\n\t * `key` in the dictionary, and returns it.\r\n\t *\r\n\t * @param make  Item type to use. Will use the default type for the dictionary if not specified.\r\n\t * @return      Newly created item\r\n\t */\r\n\tpublic create(key: Key): T {\r\n\t\treturn this.insertKeyIfEmpty(key, () => this.template.clone());\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/utils/Dictionary.ts","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_to-object.js\n// module id = 26\n// module chunks = 26","module.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_a-function.js\n// module id = 27\n// module chunks = 26","/**\r\n * An Adapter can be used to apply chained synchronous transformations to any\r\n * value at runtime.\r\n *\r\n * Each type class using Adapters must have `adapters` property and adapter\r\n * interface defined.\r\n *\r\n * Adapters can be used to allow external code to apply transformations to any\r\n * value at any time.\r\n *\r\n * For example we have a Weather class which has a method `now()` which returns\r\n * current temperature.\r\n *\r\n * ```\r\n * function now() {\r\n *   // ... calculate temperature\r\n *   let temp = \"Temperature now is \" + degrees + \"F\";\r\n *   return temp;\r\n * }\r\n * ```\r\n *\r\n * Now, supposed we want to let other classes to modify the output of the\r\n * `now()`? We just apply an adapter to the `temp` before it is returned:\r\n *\r\n * ```\r\n * temp = this.adapters.apply(\"now\", {\r\n *   temp: temp,\r\n *   degrees: degrees\r\n * }).temp;\r\n * ```\r\n *\r\n * Some other class might tap onto it by defining an Adapter that calculates\r\n * the temperature in Celsius:\r\n *\r\n * weather.adapters.add(\"now\", (arg) => {\r\n *   arg.temp += \"(\" + farenheitToCelsius(arg.degrees) + \"C)\";\r\n *   return arh;\r\n * });\r\n *\r\n * Furthermore some time-related class could add time:\r\n *\r\n * weather.adapters.add(\"now\", (arg) => {\r\n *   arg.temp += \"; the time now is \" + (new Date().toLocaleString());\r\n *   return arh;\r\n * });\r\n *\r\n * So without adapters we would get output like this:\r\n *\r\n * ```\r\n * Temperature now is 90F\r\n * ```\r\n *\r\n * With adapters applied we now have:\r\n *\r\n * ```\r\n * Temperature now is 90F (32C); the time now is 12/11/2012, 7:00:00 PM\r\n * ```\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { SortedList } from \"./SortedList\";\r\nimport { EventDispatcher } from \"./EventDispatcher\";\r\nimport * as $number from \"./Number\";\r\nimport * as $order from \"./Order\";\r\nimport * as $iter from \"../utils/Iterator\";\r\nimport * as $array from \"../utils/Array\";\r\nimport * as $type from \"../utils/Type\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Adapter interface.\r\n */\r\ninterface IAdapterCallback<Target, T> {\r\n\tid: number;\r\n\tkey: keyof T;\r\n\tcallback: (value: T[keyof T], target: Target, key?: keyof T) => T[keyof T];\r\n\tscope: any;\r\n\tpriority: number;\r\n}\r\n\r\n/**\r\n * Defines an interface for a global adapter.\r\n */\r\ninterface IGlobalAdapterCallback {\r\n\tid: number;\r\n\tkey: string;\r\n\tcallback: <T, Target, Key extends keyof T, C>(this: C, value: T[Key], target: Target, key?: keyof T) => T[Key];\r\n\tscope: any;\r\n\tpriority: number;\r\n\ttype: { new(): any };\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * GLOBAL ADAPTER\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * A global adapter is an adpater that is attached to a class type rather than\r\n * specific object instance.\r\n *\r\n * @ignore Exclude from docs\r\n */\r\nexport class GlobalAdapter {\r\n\r\n\t/**\r\n\t * Callback id iterator.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tprivate _callbackId: number = 0;\r\n\r\n\t/**\r\n\t * A list of if callbacks (adapters).\r\n\t *\r\n\t */\r\n\tprivate _callbacks = new SortedList<IGlobalAdapterCallback>((left, right) => {\r\n\t\treturn $order.or($number.order(left.priority, right.priority),\r\n\t\t\t$number.order(left.id, right.id));\r\n\t});\r\n\r\n\tpublic addAll<T, Target, Key extends keyof T>(\r\n\t\ttype: { new(): Target },\r\n\t\tkey: Key,\r\n\t\tcallback: (value: T[Key], target: Target, key: keyof T) => T[Key],\r\n\t\tpriority?: number\r\n\t): void;\r\n\r\n\tpublic addAll<T, Target, Key extends keyof T, C>(\r\n\t\ttype: { new(): Target },\r\n\t\tkey: Key,\r\n\t\tcallback: (this: C, value: T[Key], target: Target, key: keyof T) => T[Key],\r\n\t\tpriority?: number,\r\n\t\tscope?: C\r\n\t): void;\r\n\r\n\t/**\r\n\t * Adds a global callback which is not specific to any particular object.\r\n\t * Whenever an adapter in any object of the specific class type is invoked\r\n\t * global adapters will kick in.\r\n\t *\r\n\t * @param {any}         type      Class type\r\n\t * @param {any}         key       Adapter key\r\n\t * @param {any}         callback  Callback function\r\n\t * @param {number = 0}  priority  Priority (higher priority meaning adapter will be applied later)\r\n\t * @param {any}         scope     Callback function scaope\r\n\t */\r\n\tpublic addAll(type: any, key: any, callback: any, priority: number = 0, scope?: any): void {\r\n\t\tthis._callbacks.insert({\r\n\t\t\tid: ++this._callbackId,\r\n\t\t\tkey: key,\r\n\t\t\tcallback: callback,\r\n\t\t\tpriority: priority,\r\n\t\t\tscope: scope,\r\n\t\t\ttype: type\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Returns if there are adapters for specific type available.\r\n\t *\r\n\t * @param  {Target}   type  Adapter type\r\n\t * @param  {Key}      key   Adapter key\r\n\t * @return {boolean}\r\n\t */\r\n\tpublic isEnabled<T, Target, Key extends keyof T>(type: Target, key: Key): boolean {\r\n\t\t// TODO check the type and key\r\n\t\treturn this._callbacks.length > 0;\r\n\t}\r\n\r\n\t/**\r\n\t * Applies global adapters for the object of the specific type.\r\n\t *\r\n\t * @param {any}  type   Class type\r\n\t * @param {any}  key    Adapter key\r\n\t * @param {any}  value  Value\r\n\t */\r\n\tpublic applyAll<T, Target, Key extends keyof T = keyof T>(type: Target, key: Key, value: T[Key]): T[Key] {\r\n\t\t// This is needed to improve the performance and reduce garbage collection\r\n\t\tconst callbacks = this._callbacks.values;\r\n\t\tconst length = callbacks.length;\r\n\r\n\t\t// Cycle through all callbacks and find the ones we need to use\r\n\t\tfor (let i = 0; i < length; ++i) {\r\n\t\t\tconst item = callbacks[i];\r\n\r\n\t\t\tif (item.key === key && type instanceof item.type) {\r\n\t\t\t\tvalue = item.callback.call(item.scope, value, type, key);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn value;\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * A global Adapter for plugins that want to add specific\r\n * functionality for any chart, not just specific instance.\r\n *\r\n * If you want to add an adapter which applies to all instances of the same\r\n * object type, like, for instance all slices in PieSeries, you can use\r\n * global adapter.\r\n *\r\n * Global adapter is a system-wide instance, accessible via `globalAdapter`.\r\n *\r\n * ```TypeScript\r\n * am4core.globalAdapter.addAll<am4charts.IPieSeriesAdapters, am4charts.PieSeries, \"fill\">(am4charts.PieSeries, \"fill\", (value, target, key) => {\r\n *   return am4core.color(\"#005500\");\r\n * });\r\n * ```\r\n * ```JavaScript\r\n * am4core.globalAdapter.addAll(am4charts.PieSeries, \"fill\", (value, target, key) => {\r\n *   return am4core.color(\"#005500\");\r\n * });\r\n * ```\r\n *\r\n * @todo Description (improve)\r\n */\r\nexport let globalAdapter: GlobalAdapter = new GlobalAdapter();\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REGULAR ADAPTER\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Adapter allows adding ordered callback functions and associating them with a\r\n * string-based key. An Adapter user can then easily invoke those callbacks to\r\n * apply custom functions on its input, output or intermediate values.\r\n *\r\n * Custom code and plugins can add their own callbacks to modify and enhance\r\n * core functionality.\r\n *\r\n * See the description of `add()` for an example.\r\n *\r\n * Almost any object in amCharts4 has own adapter, accessible with `adapter`\r\n * property.\r\n *\r\n * Any adapters added to it will be applied to that object only.\r\n *\r\n * ### Global Adapters\r\n *\r\n * If you want to add an adapter which applies to all instances of the same\r\n * object type, like, for instance all slices in PieSeries, you can use\r\n * global adapter.\r\n *\r\n * Global adapter is a system-wide instance, accessible via `globalAdapter`.\r\n *\r\n * ```TypeScript\r\n * am4core.globalAdapter.addAll<am4charts.IPieSeriesAdapters, am4charts.PieSeries, \"fill\">(am4charts.PieSeries. \"fill\", (value, target, key) => {\r\n *   return am4core.color(\"#005500\");\r\n * });\r\n * ```\r\n * ```JavaScript\r\n * am4core.globalAdapter.addAll(am4charts.PieSeries. \"fill\", (value, target, key) => {\r\n *   return am4core.color(\"#005500\");\r\n * });\r\n * ```\r\n *\r\n * {@link https://www.amcharts.com/docs/v4/reference/adapter_module/#globalAdapter_property More info}.\r\n *\r\n * @important\r\n */\r\nexport class Adapter<Target, T> {\r\n\r\n\t/**\r\n\t * Internal counter for callback ids.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tprivate _callbackId: number = 0;\r\n\r\n\t/**\r\n\t * A list of adapter callbacks.\r\n\t *\r\n\t * @param {[type]} $number.order(left.priority, right.priority) [description]\r\n\t * @param {[type]} $number.order(left.id,       right.id));\t}  [description]\r\n\t */\r\n\tprivate _callbacks = new SortedList<IAdapterCallback<Target, T>>((left, right) => {\r\n\t\treturn $order.or($number.order(left.priority, right.priority),\r\n\t\t\t$number.order(left.id, right.id));\r\n\t});\r\n\r\n\t/**\r\n\t * Holds an object reference this Adapter is for.\r\n\t *\r\n\t * @type {T}\r\n\t */\r\n\tpublic object: Target;\r\n\r\n\t/**\r\n\t * Event dispatcher.\r\n\t */\r\n\tpublic events: EventDispatcher<{\r\n\t\tinserted: {};\r\n\t\tremoved: {};\r\n\t}>;\r\n\r\n\t/**\r\n\t * Constructor, sets the object referece this Adapter should be used for.\r\n\t *\r\n\t * @param {T} c Object\r\n\t */\r\n\tconstructor(c: Target) {\r\n\t\tthis.object = c;\r\n\r\n\t\t// TODO this exposes the internal events\r\n\t\tthis.events = this._callbacks.events;\r\n\t}\r\n\r\n\t/**\r\n\t * Adds a callback for a specific key.\r\n\t *\r\n\t * ```TypeScript\r\n\t * // Override fill color value and make all slices green\r\n\t * chart.series.template.adapter.add(\"fill\", (value, target, key) => {\r\n\t *   return am4core.color(\"#005500\");\r\n\t * });\r\n\t * ```\r\n\t * ```JavaScript\r\n\t * // Override fill color value and make all slices green\r\n\t * chart.series.template.adapter.add(\"fill\", function(value, target, key) {\r\n\t *   return am4core.color(\"#005500\");\r\n\t * });\r\n\t * ```\r\n\t * ```JSON\r\n\t * {\r\n\t *   // ...\r\n\t *   \"series\": [{\r\n\t *     // ...\r\n\t *     \"adapter\": {\r\n\t *     \t// Override fill color value and make all slices green\r\n\t *     \t\"fill\": function(value, target, key) {\r\n\t *     \t  return am4core.color(\"#005500\");\r\n\t *     \t}\r\n\t *     }\r\n\t *   }]\r\n\t * }\r\n\t * ```\r\n\t *\r\n\t * The above will call user-defined function (adapter) whenever `fill` value\r\n\t * is requested from the Pie series, allowing it to override the default\r\n\t * using custom code and any fuzzy logic.\r\n\t *\r\n\t * There can be any number of adapters set on one property key.\r\n\t *\r\n\t * In this case adapters will be applied in daisy-chain fashion. The first\r\n\t * adapter in queue will make its transformation. The next one will have\r\n\t * the output of the first adapter as a starting value, etc.\r\n\t *\r\n\t * The order of the adapters are determined either by the order they were\r\n\t * added in, or their `priority` value.\r\n\t *\r\n\t * The heigher the `priority`, the later in the game adapter will be applied.\r\n\t *\r\n\t * @param {string}         key       Key\r\n\t * @param {any[]) => any}  callback  A callback function\r\n\t * @param {number}         priority  The higher priority, the more chance the adapter will be applied last\r\n\t * @param {any}            scope     Scope for the callback function\r\n\t */\r\n\tpublic add<Key extends keyof T, C>(key: Key, callback: (this: C, value: T[Key], target: Target, key: keyof T) => T[Key], priority: number = 0, scope?: C): void {\r\n\t\tthis._callbacks.insert({\r\n\t\t\tid: ++this._callbackId,\r\n\t\t\tkey: key,\r\n\t\t\tcallback: callback,\r\n\t\t\tpriority: priority,\r\n\t\t\tscope: scope\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Checks whether specific adapter is already set.\r\n\t *\r\n\t * @param   {string}         key       Key\r\n\t * @param   {any[]) => any}  callback  A callback function\r\n\t * @param   {number}         priority  The higher priority, the more chance the adapter will be applied last\r\n\t * @param   {any}            scope     Scope for the callback function\r\n\t * @returns                            Adapter set?\r\n\t */\r\n\tpublic has<Key extends keyof T, C>(key: Key, callback: (this: C, value: T[Key], target: Target, key: keyof T) => T[Key], priority: number = 0, scope?: C): boolean {\r\n\t\t// @todo Implement actual check\r\n\t\treturn false;\r\n\t}\r\n\r\n\t/**\r\n\t * Removes adapter callbacks for the specific `key`.\r\n\t *\r\n\t * If `priority` is specified, only callbacks for that priority are removed.\r\n\t *\r\n\t * @param {string} key      Key\r\n\t * @param {number} priority Priority\r\n\t * @todo Implement\r\n\t */\r\n\tpublic remove(key: string, priority?: number): void {\r\n\t\t// It has to make a copy because it removes the elements while iterating\r\n\t\t// TODO inefficient\r\n\t\t$array.each($iter.toArray(this._callbacks.iterator()), (item) => {\r\n\t\t\t// TODO test this\r\n\t\t\tif (item.key === key && (!$type.isNumber(priority) || priority === item.priority)) {\r\n\t\t\t\tthis._callbacks.remove(item);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Returns if there are any adapters set for the specific `key`.\r\n\t *\r\n\t * @returns {boolean} Are there any adapters for the key?\r\n\t */\r\n\tpublic isEnabled<Key extends keyof T>(key: Key): boolean {\r\n\t\t// TODO check the key\r\n\t\treturn this._callbacks.length > 0 || globalAdapter.isEnabled<T, Target, Key>(this.object, key);\r\n\t}\r\n\r\n\t/**\r\n\t * Passes the input value through all the callbacks for the defined `key`.\r\n\t *\r\n\t * @param  {string}  key      Key\r\n\t * @param  {any}     value    Input value\r\n\t * @param  {any[]}   ...rest  Rest of the parameters to be passed into callback\r\n\t * @return {any}              Output value\r\n\t */\r\n\tpublic apply<Key extends keyof T>(key: Key, value: T[Key]): T[Key] {\r\n\t\t// This is needed to improve the performance and reduce garbage collection\r\n\t\tconst callbacks = this._callbacks.values;\r\n\t\tconst length = callbacks.length;\r\n\r\n\t\tfor (let i = 0; i < length; ++i) {\r\n\t\t\tconst item = callbacks[i];\r\n\r\n\t\t\tif (item.key === key) {\r\n\t\t\t\tvalue = item.callback.call(item.scope, value, this.object, key);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Apply global adapters\r\n\t\tvalue = globalAdapter.applyAll<T, Target, Key>(this.object, key, value);\r\n\r\n\t\treturn value;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns all adapter keys that are currently in effect.\r\n\t *\r\n\t * @return {string[]} Adapter keys\r\n\t */\r\n\tpublic keys(): Array<keyof T> {\r\n\t\t// TODO inefficient\r\n\t\treturn $iter.toArray($iter.map(this._callbacks.iterator(), (x) => x.key));\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Copies all the adapter callbacks from `source`.\r\n\t *\r\n\t * @param {Adapter<Target, T>}  source  An Adapter to copy items from\r\n\t */\r\n\tpublic copyFrom(source: this): void {\r\n\t\t$iter.each(source._callbacks.iterator(), (x) => {\r\n\t\t\tthis.add(x.key, x.callback, x.priority, x.scope);\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/utils/Adapter.ts","/**\n * A collection of DOM-related functions.\n */\n\n/**\n * ============================================================================\n * IMPORTS\n * ============================================================================\n * @hidden\n */\nimport { Disposer, IDisposer } from \"./Disposer\";\nimport { readFrame, writeFrame } from \"./AsyncPending\";\nimport * as $object from \"./Object\";\nimport * as $array from \"./Array\";\nimport * as $type from \"./Type\";\n\n/**\n * SVG namespace.\n *\n * @ignore Exclude from docs\n * @type {string}\n */\nexport const SVGNS: string = \"http://www.w3.org/2000/svg\";\n\n/**\n * XML namespace.\n *\n * @ignore Exclude from docs\n * @type {string}\n */\nexport const XMLNS: string = \"http://www.w3.org/2000/xmlns/\";\n\n/**\n * XLINK namespace.\n *\n * @ignore Exclude from docs\n * @type {string}\n */\nexport const XLINK: string = \"http://www.w3.org/1999/xlink\";\n\n\n/**\n * Function that adds a disposable event listener directly to a DOM element.\n *\n * @ignore Exclude from docs\n * @param {EventTarget}   dom       A DOM element to add event to\n * @param {string}        type      Event type\n * @param {Function}      listener  Event listener\n * @returns {IDisposer}             Disposable event\n */\nexport function addEventListener<E extends Event>(dom: EventTarget, type: string, listener: (event: E) => void, options?: any): IDisposer {\n\t//@todo proper type check for options: EventListenerOptions | boolean (TS for some reason gives error on passive parameter)\n\t//console.log(type, dom);\n\tdom.addEventListener(type, <EventListener>listener, options || false);\n\n\treturn new Disposer(() => {\n\t\tdom.removeEventListener(type, <EventListener>listener, options || false);\n\t});\n}\n\n/**\n * Finds and returns an element reference using following logic:\n * * If we pass in an element instance, we just return it back.\n * * If we pass in a string, the function looks for an element with such id.\n * * If no element with such id is found, we grab the first element with a tag name like this.\n *\n * @ignore Exclude from docs\n * @param  {Optional<HTMLElement | string>}  el  Element definition (reference, or id, or tag name)\n * @return {Optional<HTMLElement>}               Element reference\n * @todo Review this function as it seems pretty fuzzy and hacky\n */\nexport function getElement(el: $type.Optional<HTMLElement | string>): $type.Optional<HTMLElement> {\n\tif ($type.isString(el)) {\n\t\tlet e: Element | null = document.getElementById(el);\n\n\t\tif (e == null) {\n\t\t\te = document.getElementsByClassName(el)[0];\n\t\t}\n\n\t\tif (e instanceof HTMLElement) {\n\t\t\treturn e;\n\t\t}\n\n\t} else if (el instanceof HTMLElement) {\n\t\treturn el;\n\t}\n}\n\n/**\n * Adds a class name to an HTML or SVG element.\n *\n * @ignore Exclude from docs\n * @param {HTMLElement | SVGSVGElement}  element    Element\n * @param {string}                       className  Class name to add\n */\nexport function addClass(element: HTMLElement | SVGSVGElement, className: string): void {\n\tif (element.classList) {\n\t\telement.classList.add(className);\n\t}\n\telse {\n\t\tlet currentClassName = element.getAttribute(\"class\");\n\t\tif (currentClassName) {\n\t\t\telement.setAttribute(\"class\", currentClassName.split(\" \").filter((item) => {\n\t\t\t\treturn item !== className;\n\t\t\t}).join(\" \") + \" \" + className);\n\t\t}\n\t\telse {\n\t\t\telement.setAttribute(\"class\", className);\n\t\t}\n\t\t//element.className = element.className.replace(new RegExp(\"^\" + className + \"| \" + className), \"\") + \" \" + className;\n\t}\n}\n\n/**\n * Removes a class name from an HTML or SVG element.\n *\n * @ignore Exclude from docs\n * @param {HTMLElement | SVGSVGElement}  element    Element\n * @param {string}                       className  Class name to add\n */\nexport function removeClass(element: HTMLElement | SVGSVGElement, className: string): void {\n\tif (element.classList) {\n\t\telement.classList.remove(className);\n\t}\n\telse {\n\t\tlet currentClassName = element.getAttribute(\"class\");\n\t\tif (currentClassName) {\n\t\t\telement.setAttribute(\"class\", currentClassName.split(\" \").filter((item) => {\n\t\t\t\treturn item !== className;\n\t\t\t}).join(\" \"));\n\t\t}\n\t\t//element.className = element.className.replace(new RegExp(\"^\" + className + \"| \" + className), \"\");\n\t}\n}\n\n/**\n * Sets style property on DOM element.\n *\n * @ignore Exclude from docs\n * @todo Still needed?\n */\nexport function setStyle(element: HTMLElement | SVGSVGElement, property: string, value: string): void {\n\t(<any>element.style)[property] = value;\n}\n\n/**\n * Removes focus from any element by shifting focus to body.\n *\n * @ignore Exclude from docs\n */\nexport function blur(): void {\n\tlet input = document.createElement(\"input\");\n\tinput.style.position = \"fixed\";\n\tinput.style.top = \"0px\";\n\tinput.style.left = \"-10000px\";\n\tdocument.body.appendChild(input);\n\tinput.focus();\n\tinput.blur();\n\tdocument.body.removeChild(input);\n}\n\n/**\n * Tries to focus the element.\n *\n * @ignore Exlude from docs\n * @param {HTMLElement | SVGSVGElement}  element  Element to focus\n */\nexport function focus(element: HTMLElement | SVGSVGElement): void {\n\n\tif (element instanceof HTMLElement) {\n\t\telement.focus();\n\t}\n\telse {\n\t\tlet input = document.createElement(\"input\");\n\t\tlet fo = <SVGSVGElement>document.createElementNS(SVGNS, \"foreignObject\");\n\t\tfo.appendChild(input);\n\t\telement.appendChild(fo);\n\t\tinput.focus();\n\t\tinput.disabled = true;\n\t\tfo.remove();\n\t}\n\n\t/*if ((<any>element).focus != undefined) {\n\t\t(<any>element).focus();\n\t}\n\telse if (element instanceof SVGSVGElement) {\n\t\t// Not implemented\n\t\t// @todo implement focus fallback\n\t}*/\n}\n\n/**\n * Returns markup for the element including the element tag itself.\n * SVG elements do not support `outerHTML` so this functions applies of\n * a workaround which creates a new temporary wrapper, clones element and uses\n * wrapper's `innerHTML`.\n *\n * @ignore Exclude from docs\n * @param  {HTMLElement | SVGSVGElement}  element  Element to get full markup for\n * @return {string}                                Markup\n * @deprecated Not in use anywhere\n */\nexport function outerHTML(element: HTMLElement | SVGSVGElement): string {\n\tif (element.outerHTML) {\n\t\treturn element.outerHTML;\n\t}\n\telse {\n\t\tlet twrap = document.createElement(\"div\");\n\t\tlet tnode = element.cloneNode(true);\n\t\ttwrap.appendChild(tnode);\n\t\tlet content = twrap.innerHTML;\n\t\treturn content;\n\t}\n}\n\n/**\n * Checks if element is a valid DOM node.\n *\n * @ignore Exclude from docs\n * @param  {HTMLElement}  el  Element\n * @return {boolean}          `true` if element is a valid DOM node\n */\nexport function isElement(el: HTMLElement): boolean {\n\treturn el instanceof Object && el && el.nodeType === 1;\n}\n\n/**\n * Checks of element `a` contains element `b`.\n * \n * @param  {HTMLElement | SVGSVGElement}  a  Aleged ascendant\n * @param  {HTMLElement | SVGSVGElement}  b  Aleged descendant\n * @return {boolean}                         Contains?\n */\nexport function contains(a: HTMLElement | SVGSVGElement, b: HTMLElement | SVGSVGElement): boolean {\n\treturn a !== b && (a.contains\n\t\t? a.contains(b)\n\t\t: a.compareDocumentPosition\n\t\t\t? !!(a.compareDocumentPosition(b) & 16)\n\t\t\t: true);\n}\n\n/**\n * Copies attributes from one element to another.\n *\n * @ignore Exclude from docs\n * @param {Element | HTMLElement |  SVGSVGElement}  source  Element to copy attributes from\n * @param {HTMLElement | SVGSVGElement}          target  Element to copy attributes to\n */\nexport function copyAttributes(source: Element | HTMLElement | SVGSVGElement, target: HTMLElement | SVGSVGElement): void {\n\tfor (let attr in source.attributes) {\n\t\tlet value = source.attributes[attr].nodeValue;\n\n\t\t// TODO what if it's null ?\n\t\tif (value != null) {\n\t\t\ttarget.setAttribute(source.attributes[attr].nodeName, value);\n\t\t}\n\t}\n}\n\n/**\n * [fixPixelPerfect description]\n *\n * @ignore Exclude from docs\n * @todo Description\n * @param {HTMLElement}  el  Element\n */\nexport function fixPixelPerfect(el: HTMLElement): void {\n\treadFrame(() => {\n\t\t// sometimes IE doesn't like this\n\t\t// TODO figure out a way to remove this\n\t\ttry {\n\t\t\tconst rect = el.getBoundingClientRect();\n\n\t\t\tconst left = rect.left - Math.round(rect.left);\n\t\t\tconst top = rect.top - Math.round(rect.top);\n\n\t\t\tif (left !== 0) {\n\t\t\t\twriteFrame(() => {\n\t\t\t\t\tel.style.left = left + \"px\";\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (top !== 0) {\n\t\t\t\twriteFrame(() => {\n\t\t\t\t\tel.style.top = top + \"px\";\n\t\t\t\t});\n\t\t\t}\n\n\t\t} catch (e) { }\n\t});\n}\n\n/**\n * [rootStylesheet description]\n *\n * @ignore Exclude from docs\n * @todo Description\n * @type {Optional<CSSStyleSheet>}\n */\nlet rootStylesheet: $type.Optional<CSSStyleSheet>;\n\n/**\n * [getStylesheet description]\n *\n * @ignore Exclude from docs\n * @todo Description\n * @return {CSSStyleSheet} [description]\n */\nfunction getStylesheet(): CSSStyleSheet {\n\tif (!$type.hasValue(rootStylesheet)) {\n\t\t// TODO use createElementNS ?\n\t\tconst e = document.createElement(\"style\");\n\t\te.type = \"text/css\";\n\t\tdocument.head.appendChild(e);\n\t\trootStylesheet = e.sheet as CSSStyleSheet;\n\t}\n\n\treturn rootStylesheet;\n}\n\n/**\n * [makeStylesheet description]\n *\n * @ignore Exclude from docs\n * @todo Description\n * @param  {string}        selector  [description]\n * @return {CSSStyleRule}            [description]\n */\nfunction makeStylesheet(selector: string): CSSStyleRule {\n\tconst root = getStylesheet();\n\n\tconst index = root.cssRules.length;\n\n\troot.insertRule(selector + \"{}\", index);\n\n\treturn root.cssRules[index] as CSSStyleRule;\n}\n\n/**\n * Defines a class for a CSS rule.\n *\n * Can be used to dynamically add CSS to the document.\n */\nexport class StyleRule extends Disposer {\n\n\t/**\n\t * CSS rule.\n\t *\n\t * @type {CSSStyleRule}\n\t */\n\tprivate _rule: CSSStyleRule;\n\n\t/**\n\t * A CSS selector text.\n\t *\n\t * E.g.: `.myClass p`\n\t *\n\t * @param {string}  selector  CSS selector\n\t */\n\tpublic set selector(selector: string) {\n\t\tthis._rule.selectorText = selector;\n\t}\n\n\t/**\n\t * @return {string} CSS selector\n\t */\n\tpublic get selector(): string {\n\t\treturn this._rule.selectorText;\n\t}\n\n\t/**\n\t * Constructor.\n\t *\n\t * @param {string}  selector  CSS selector\n\t * @param {object}  styles    An object of style attribute - value pairs\n\t */\n\tconstructor(selector: string, styles: { [name: string]: string }) {\n\t\t// TODO test this\n\t\tsuper(() => {\n\t\t\tconst root = getStylesheet();\n\n\t\t\t// TODO a bit hacky\n\t\t\tconst index = $array.indexOf(root.cssRules, this._rule);\n\n\t\t\tif (index === -1) {\n\t\t\t\tthrow new Error(\"Could not dispose StyleRule\");\n\n\t\t\t} else {\n\t\t\t\troot.deleteRule(index);\n\t\t\t}\n\t\t});\n\n\t\tthis._rule = makeStylesheet(selector);\n\n\t\t$object.each(styles, (key, value) => {\n\t\t\tthis.setStyle(key, value);\n\t\t});\n\t}\n\n\t/**\n\t * Sets the same style properties with browser-speicifc prefixes.\n\t *\n\t * @param {string}  name   Attribute name\n\t * @param {string}  value  Attribute value\n\t */\n\tprivate _setVendorPrefixName(name: string, value: string): void {\n\t\tconst style = this._rule.style;\n\t\tstyle.setProperty(\"-webkit-\" + name, value, \"\");\n\t\tstyle.setProperty(\"-moz-\" + name, value, \"\");\n\t\tstyle.setProperty(\"-ms-\" + name, value, \"\");\n\t\tstyle.setProperty(\"-o-\" + name, value, \"\");\n\t\tstyle.setProperty(name, value, \"\");\n\t}\n\n\t/**\n\t * Sets a value for specific style attribute.\n\t *\n\t * @param {string}  name   Attribute\n\t * @param {string}  value  Value\n\t */\n\tpublic setStyle(name: string, value: string): void {\n\t\tif (name === \"transition\") {\n\t\t\tthis._setVendorPrefixName(name, value);\n\n\t\t} else {\n\t\t\tthis._rule.style.setProperty(name, value, \"\");\n\t\t}\n\t}\n\n}\n\n/**\n * An internal counter for unique style ids.\n *\n * @ignore Exclude from docs\n * @type {number}\n */\nlet styleId: number = 0;\n\n/**\n * @ignore Exclude from docs\n * @todo Description\n */\nexport class StyleClass extends StyleRule {\n\n\t/**\n\t * Class name.\n\t *\n\t * @type {string}\n\t */\n\tprivate _className: string;\n\n\t/**\n\t * Constructor.\n\t *\n\t * @param {object}  styles  An object of style attribute - value pairs\n\t * @param {string}  name    Class name\n\t */\n\tconstructor(styles: { [name: string]: string }, name?: string) {\n\t\tconst className =\n\t\t\t(!$type.hasValue(name)\n\t\t\t\t// TODO generate the classname randomly\n\t\t\t\t? \"__style_\" + (++styleId) + \"__\"\n\t\t\t\t: name);\n\n\t\tsuper(\".\" + className, styles);\n\n\t\tthis._className = className;\n\t}\n\n\t/**\n\t * Class name.\n\t *\n\t * @param {string}  name  Class name\n\t */\n\tpublic set className(name: string) {\n\t\tthis._className = name;\n\t\tthis.selector = \".\" + name;\n\t}\n\n\t/**\n\t * @return {string} Class name\n\t */\n\tpublic get className(): string {\n\t\treturn this._className;\n\t}\n\n\t/**\n\t * Converts the whole class to\n\t * @ignore Exclude from docs\n\t */\n\tpublic toString(): string {\n\t\treturn this._className;\n\t}\n\n}\n\n\nexport function ready(f: () => void): void {\n\tif (document.readyState !== \"loading\") {\n\t\tf();\n\n\t} else {\n\t\tconst listener = () => {\n\t\t\tif (document.readyState !== \"loading\") {\n\t\t\t\tdocument.removeEventListener(\"readystatechange\", listener);\n\t\t\t\tf();\n\t\t\t}\n\t\t};\n\n\t\tdocument.addEventListener(\"readystatechange\", listener);\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/utils/DOM.ts","var dP = require('./_object-dp');\nvar createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_hide.js\n// module id = 30\n// module chunks = 26","var global = require('./_global');\nvar hide = require('./_hide');\nvar has = require('./_has');\nvar SRC = require('./_uid')('src');\nvar TO_STRING = 'toString';\nvar $toString = Function[TO_STRING];\nvar TPL = ('' + $toString).split(TO_STRING);\n\nrequire('./_core').inspectSource = function (it) {\n  return $toString.call(it);\n};\n\n(module.exports = function (O, key, val, safe) {\n  var isFunction = typeof val == 'function';\n  if (isFunction) has(val, 'name') || hide(val, 'name', key);\n  if (O[key] === val) return;\n  if (isFunction) has(val, SRC) || hide(val, SRC, O[key] ? '' + O[key] : TPL.join(String(key)));\n  if (O === global) {\n    O[key] = val;\n  } else if (!safe) {\n    delete O[key];\n    hide(O, key, val);\n  } else if (O[key]) {\n    O[key] = val;\n  } else {\n    hide(O, key, val);\n  }\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n})(Function.prototype, TO_STRING, function toString() {\n  return typeof this == 'function' && this[SRC] || $toString.call(this);\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_redefine.js\n// module id = 31\n// module chunks = 26","var $export = require('./_export');\nvar fails = require('./_fails');\nvar defined = require('./_defined');\nvar quot = /\"/g;\n// B.2.3.2.1 CreateHTML(string, tag, attribute, value)\nvar createHTML = function (string, tag, attribute, value) {\n  var S = String(defined(string));\n  var p1 = '<' + tag;\n  if (attribute !== '') p1 += ' ' + attribute + '=\"' + String(value).replace(quot, '&quot;') + '\"';\n  return p1 + '>' + S + '</' + tag + '>';\n};\nmodule.exports = function (NAME, exec) {\n  var O = {};\n  O[NAME] = exec(createHTML);\n  $export($export.P + $export.F * fails(function () {\n    var test = ''[NAME]('\"');\n    return test !== test.toLowerCase() || test.split('\"').length > 3;\n  }), 'String', O);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_string-html.js\n// module id = 32\n// module chunks = 26","/**\r\n * Interaction manages all aspects of user interaction - mouse move,\r\n * click, hover, drag events, touch gestures.\r\n *\r\n * [[InteractionObject]] elements that want to use certain events, must attach event\r\n * listeners to Interaction instance.\r\n *\r\n * Interaction itself will not modify [[InteractionObject]] elements, it will be up to\r\n * those elements to handle interaction information received via event triggers.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { BaseObjectEvents, IBaseObjectEvents } from \"../Base\";\r\nimport { List } from \"../utils/List\";\r\nimport { EventDispatcher, AMEvent } from \"../utils/EventDispatcher\";\r\nimport { Animation } from \"../utils/Animation\";\r\nimport { IInertiaOptions, ISwipeOptions, IHitOptions, IHoverOptions, ICursorOptions, IKeyboardOptions } from \"./InteractionOptions\";\r\nimport { MultiDisposer } from \"../utils/Disposer\";\r\nimport { InteractionObject, IInteractionObjectEvents } from \"./InteractionObject\";\r\nimport { InteractionKeyboardObject } from \"./InteractionKeyboardObject\";\r\nimport { Dictionary } from \"../utils/Dictionary\";\r\nimport { Inertia, InertiaTypes } from \"./Inertia\";\r\nimport { IPointer, IBreadcrumb } from \"./Pointer\";\r\nimport { addEventListener } from \"../utils/DOM\";\r\nimport { IPoint } from \"../defs/IPoint\";\r\nimport { IStyleProperty } from \"../defs/IStyleProperty\";\r\nimport { keyboard } from \"../utils/Keyboard\";\r\nimport * as $ease from \"../utils/Ease\";\r\nimport * as $math from \"../utils/Math\";\r\nimport * as $dom from \"../utils/DOM\";\r\nimport * as $iter from \"../utils/Iterator\";\r\nimport * as $type from \"../utils/Type\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Represents an Event object that comes from [[Interaction]]\r\n */\r\nexport interface IInteractionEvents extends IBaseObjectEvents {\r\n\r\n\ttrack: {\r\n\t\tpointer: IPointer;\r\n\t\tevent: MouseEvent | TouchEvent;\r\n\t};\r\n\r\n\tdown: {\r\n\t\tpointer: IPointer;\r\n\t\tevent: MouseEvent | TouchEvent;\r\n\t};\r\n\r\n\tup: {\r\n\t\tpointer: IPointer;\r\n\t\tevent: MouseEvent | TouchEvent;\r\n\t};\r\n\r\n\tfocus: {\r\n\t\tevent: FocusEvent;\r\n\t}\r\n}\r\n\r\n/**\r\n * Interface representing a delayed event\r\n *\r\n * @ignore Exclude from docs\r\n */\r\nexport interface IDelayedEvent {\r\n\ttype: keyof IInteractionObjectEvents;\r\n\tio: InteractionObject;\r\n\tpointer: IPointer;\r\n\tevent: MouseEvent | TouchEvent;\r\n\ttimeout?: number;\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n\r\n/**\r\n * Interaction manages all aspects of user interaction - mouse move,\r\n * click, hover, drag events, touch gestures.\r\n *\r\n * [[InteractionObject]] elements that want to use certain events, must attach event\r\n * listeners to Interaction instance.\r\n *\r\n * Interaction itself will not modify [[InteractionObject]] elements, it will be up to\r\n * those elements to handle interaction information received via event triggers.\r\n *\r\n * @see {@link IInteractionEvents} for a list of available events\r\n * @todo Throw exceptions on errors\r\n */\r\nexport class Interaction extends BaseObjectEvents {\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IInteractionEvents}\r\n\t * @ignore Exclude from docs\r\n\t * @deprecated Use inetraction.body.events instead\r\n\t */\r\n\tpublic _events!: IInteractionEvents;\r\n\r\n\t/**\r\n\t * A reference to an [[Interaction]] object for document's body.\r\n\t *\r\n\t * Users can use it to add global, non-chart related events, that will be\r\n\t * applicable to the whole document.\r\n\t *\r\n\t * @type {InteractionObject}\r\n\t */\r\n\tpublic body: InteractionObject;\r\n\r\n\t/**\r\n\t * An indicator of global events were already initialized.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tprotected _globalEventsAdded: boolean = false;\r\n\r\n\t/**\r\n\t * Holds which mouse event listeners to use.\r\n\t *\r\n\t * @type {Object}\r\n\t */\r\n\tprotected _pointerEvents = {\r\n\t\t\"pointerdown\": \"mousedown\",\r\n\t\t\"pointerup\": \"mouseup\",\r\n\t\t\"pointermove\": \"mousemove\",\r\n\t\t\"wheel\": \"wheel\"\r\n\t};\r\n\r\n\t/**\r\n\t * Indicates if Interaction should use only \"pointer\" type events, like\r\n\t * \"pointermove\", available in all modern browsers, ignoring \"legacy\"\r\n\t * events, like \"touchmove\".\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tprotected _usePointerEventsOnly: boolean = false;\r\n\r\n\t/**\r\n\t * Indicates if passive mode options is supported by this browser.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tprotected _passiveSupported: boolean = false;\r\n\r\n\t/**\r\n\t * Holds list of delayed events\r\n\t *\r\n\t * @type {IDelayedEvent[]}\r\n\t */\r\n\tprotected _delayedEvents: { out: IDelayedEvent[] } = { out: [] };\r\n\r\n\t/**\r\n\t * List of objects that current have a pointer hovered over them.\r\n\t *\r\n\t * @type {List<InteractionObject>}\r\n\t */\r\n\tpublic overObjects: List<InteractionObject> = new List<InteractionObject>();\r\n\r\n\t/**\r\n\t * List of objects that currently has a pressed pointer.\r\n\t *\r\n\t * @type {List<InteractionObject>}\r\n\t */\r\n\tpublic downObjects: List<InteractionObject> = new List<InteractionObject>();\r\n\r\n\t/**\r\n\t * List of objects that need mouse position to be reported to them.\r\n\t *\r\n\t * @type {List<InteractionObject>}\r\n\t */\r\n\tpublic trackedObjects: List<InteractionObject> = new List<InteractionObject>();\r\n\r\n\t/**\r\n\t * List of objects that are currently being dragged.\r\n\t *\r\n\t * @type {List<InteractionObject>}\r\n\t */\r\n\tpublic transformedObjects: List<InteractionObject> = new List<InteractionObject>();\r\n\r\n\t/**\r\n\t * An object that currently has focus. Usually set automatically via\r\n\t * [[InteractionObject]] `isFocus` method.\r\n\t *\r\n\t * @type {Optional<InteractionObject>}\r\n\t */\r\n\tpublic focusedObject: $type.Optional<InteractionObject>;\r\n\r\n\t/**\r\n\t * Holds all known pointers.\r\n\t *\r\n\t * @type {Dictionary<string, IPointer>}\r\n\t */\r\n\tpublic pointers = new Dictionary<string, IPointer>();\r\n\r\n\t/**\r\n\t * Inertia options that need to be applied to after element drag, if it's\r\n\t * `inert = true`.\r\n\t *\r\n\t * This is just a default, which can and probably will be overridden by\r\n\t * actual elements.\r\n\t *\r\n\t * @type {Dictionary}\r\n\t */\r\n\tpublic inertiaOptions = new Dictionary<InertiaTypes, IInertiaOptions>();\r\n\r\n\t/**\r\n\t * Default options for click events. These can be overridden in\r\n\t * [[InteractionObject]].\r\n\t *\r\n\t * @type {IHitOptions}\r\n\t */\r\n\tpublic hitOptions: IHitOptions = {\r\n\t\t\"holdTime\": 1000,\r\n\t\t\"doubleHitTime\": 300,\r\n\t\t\"delayFirstHit\": false,\r\n\t\t\"hitTolerance\": 10,\r\n\t\t\"noFocus\": true\r\n\t};\r\n\r\n\t/**\r\n\t * Default options for hover events. These can be overridden in\r\n\t * [[InteractionObject]].\r\n\t *\r\n\t * @type {IHoverOptions}\r\n\t */\r\n\tpublic hoverOptions: IHoverOptions = {\r\n\t\t\"touchOutBehavior\": \"leave\",\r\n\t\t\"touchOutDelay\": 1000\r\n\t};\r\n\r\n\t/**\r\n\t * Default options for detecting a swipe gesture. These can be overridden in\r\n\t * [[InteractionObject]].\r\n\t *\r\n\t * @type {ISwipeOptions}\r\n\t */\r\n\tpublic swipeOptions: ISwipeOptions = {\r\n\t\t\"time\": 500,\r\n\t\t\"verticalThreshold\": 75,\r\n\t\t\"horizontalThreshold\": 30\r\n\t};\r\n\r\n\t/**\r\n\t * Default options for keyboard operations. These can be overridden in\r\n\t * [[InteractionObject]].\r\n\t *\r\n\t * @type {IKeyboarOptions}\r\n\t */\r\n\tpublic keyboardOptions: IKeyboardOptions = {\r\n\t\t\"speed\": 0.1,\r\n\t\t\"accelleration\": 1.2,\r\n\t\t\"accellerationDelay\": 1000\r\n\t};\r\n\r\n\r\n\t/**\r\n\t * Constructor. Sets up universal document-wide move events to handle stuff\r\n\t * outside particular chart container.\r\n\t */\r\n\tconstructor() {\r\n\r\n\t\t// Call super\r\n\t\tsuper();\r\n\r\n\t\t// Set class name\r\n\t\tthis.className = \"Interaction\";\r\n\r\n\t\t// Create InteractionObject for <body>\r\n\t\tthis.body = this.getInteraction(document.body);\r\n\r\n\t\tthis._disposers.push(this.body);\r\n\r\n\t\t// Detect browser capabilities and determine what event listeners to use\r\n\t\tif (window.hasOwnProperty(\"PointerEvent\")) {\r\n\t\t\t// IE10+/Edge without touch controls enabled\r\n\t\t\tthis._pointerEvents.pointerdown = \"pointerdown\";\r\n\t\t\tthis._pointerEvents.pointerup = \"pointerup\";\r\n\t\t\tthis._pointerEvents.pointermove = \"pointermove\";\r\n\t\t\tthis._usePointerEventsOnly = true;\r\n\t\t} else if (window.hasOwnProperty(\"MSPointerEvent\")) {\r\n\t\t\t// IE9\r\n\t\t\tthis._pointerEvents.pointerdown = \"MSPointerDown\";\r\n\t\t\tthis._pointerEvents.pointerup = \"MSPointerUp\";\r\n\t\t\tthis._pointerEvents.pointermove = \"MSPointerMove\";\r\n\t\t\tthis._usePointerEventsOnly = true;\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// uses defaults for normal browsers\r\n\t\t}\r\n\r\n\t\t// Detect proper mouse wheel events\r\n\t\tif (\"onwheel\" in document.createElement(\"div\")) {\r\n\t\t\t// Modern browsers\r\n\t\t\tthis._pointerEvents.wheel = \"wheel\";\r\n\t\t}\r\n\t\telse if ($type.hasValue(document.onmousewheel)) {\r\n\t\t\t// Webkit and IE support at least \"mousewheel\"\r\n\t\t\tthis._pointerEvents.wheel = \"mousewheel\";\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// The rest of the legacy browsers\r\n\t\t\tthis._pointerEvents.wheel = \"DOMMouseScroll\";\r\n\t\t}\r\n\r\n\t\t// Set up default inertia options\r\n\t\tthis.inertiaOptions.setKey(\"move\", {\r\n\t\t\t\"time\": 100,\r\n\t\t\t\"duration\": 500,\r\n\t\t\t\"factor\": 1,\r\n\t\t\t\"easing\": $ease.polyOut3\r\n\t\t});\r\n\t\tthis.inertiaOptions.setKey(\"resize\", {\r\n\t\t\t\"time\": 100,\r\n\t\t\t\"duration\": 500,\r\n\t\t\t\"factor\": 1,\r\n\t\t\t\"easing\": $ease.polyOut3\r\n\t\t});\r\n\t\tthis.inertiaOptions.setKey(\"rotate\", {\r\n\t\t\t\"time\": 100,\r\n\t\t\t\"duration\": 500,\r\n\t\t\t\"factor\": 1,\r\n\t\t\t\"easing\": $ease.polyOut3\r\n\t\t});\r\n\r\n\t\t// Check for passive mode support\r\n\t\ttry {\r\n\t\t\tlet target = this;\r\n\t\t\tlet options = Object.defineProperty({}, \"passive\", {\r\n\t\t\t\tget: function() {\r\n\t\t\t\t\ttarget._passiveSupported = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\twindow.addEventListener(\"test\", options, options);\r\n\t\t\twindow.removeEventListener(\"test\", options, options);\r\n\t\t} catch (err) {\r\n\t\t\tthis._passiveSupported = false;\r\n\t\t}\r\n\r\n\t\t// Apply theme\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\tprotected debug(): void {}\r\n\r\n\r\n\t/**\r\n\t * ==========================================================================\r\n\t * Processing\r\n\t * ==========================================================================\r\n\t * @hidden\r\n\t */\r\n\r\n\t/**\r\n\t * Sets up global events.\r\n\t *\r\n\t * We need this so that we can track drag movement beyond chart's container.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic addGlobalEvents(): void {\r\n\t\tif (!this._globalEventsAdded) {\r\n\t\t\tthis._disposers.push(addEventListener(\r\n\t\t\t\tdocument,\r\n\t\t\t\tthis._pointerEvents.pointermove,\r\n\t\t\t\t(ev: MouseEvent) => { this.handleGlobalPointerMove(ev) }\r\n\t\t\t));\r\n\r\n\t\t\tthis._disposers.push(addEventListener(\r\n\t\t\t\tdocument,\r\n\t\t\t\tthis._pointerEvents.pointerdown,\r\n\t\t\t\t(ev: MouseEvent) => { this.handleGlobalPointerDown(ev) }\r\n\t\t\t));\r\n\r\n\t\t\tthis._disposers.push(addEventListener(\r\n\t\t\t\tdocument,\r\n\t\t\t\tthis._pointerEvents.pointerup,\r\n\t\t\t\t(ev: MouseEvent) => { this.handleGlobalPointerUp(ev) }\r\n\t\t\t));\r\n\r\n\t\t\tthis._disposers.push(addEventListener(\r\n\t\t\t\tdocument,\r\n\t\t\t\t\"touchend\",\r\n\t\t\t\t(ev: TouchEvent) => { this.handleGlobalTouchEnd(ev) }\r\n\t\t\t));\r\n\r\n\t\t\tif (!this._usePointerEventsOnly) {\r\n\t\t\t\tthis._disposers.push(addEventListener(\r\n\t\t\t\t\tdocument,\r\n\t\t\t\t\t\"touchmove\",\r\n\t\t\t\t\t(ev: TouchEvent) => { this.handleGlobalTouchMove(ev) }\r\n\t\t\t\t));\r\n\r\n\t\t\t\tthis._disposers.push(addEventListener(\r\n\t\t\t\t\tdocument,\r\n\t\t\t\t\t\"touchstart\",\r\n\t\t\t\t\t(ev: TouchEvent) => { this.handleGlobalTouchStart(ev) }\r\n\t\t\t\t));\r\n\t\t\t}\r\n\r\n\t\t\tthis._disposers.push(addEventListener(\r\n\t\t\t\tdocument,\r\n\t\t\t\t\"keydown\",\r\n\t\t\t\t(ev: KeyboardEvent) => { this.handleGlobalKeyDown(ev) }\r\n\t\t\t));\r\n\r\n\t\t\tthis._disposers.push(addEventListener(\r\n\t\t\t\tdocument,\r\n\t\t\t\t\"keyup\",\r\n\t\t\t\t(ev: KeyboardEvent) => { this.handleGlobalKeyUp(ev) }\r\n\t\t\t));\r\n\r\n\t\t\tthis._globalEventsAdded = true;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Sets if [[InteractionObject]] is clickable.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {InteractionObject} io [[InteractionObject]] instance\r\n\t */\r\n\tpublic processClickable(io: InteractionObject): void {\r\n\t\t// Add or remove touch events\r\n\t\tthis.processTouchable(io);\r\n\t}\r\n\r\n\t/**\r\n\t * Sets if [[InteractionObject]] is hoverable.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {InteractionObject} io [[InteractionObject]] instance\r\n\t */\r\n\tpublic processHoverable(io: InteractionObject): void {\r\n\t\tif (io.hoverable || io.trackable) {\r\n\r\n\t\t\t// Add global events\r\n\t\t\tthis.addGlobalEvents();\r\n\r\n\t\t\t// Add hover styles\r\n\t\t\tthis.applyCursorOverStyle(io);\r\n\r\n\t\t\t// Add local events\r\n\t\t\tif (!io.eventDisposers.hasKey(\"hoverable\")) {\r\n\t\t\t\tio.eventDisposers.setKey(\"hoverable\", new MultiDisposer([\r\n\t\t\t\t\taddEventListener<MouseEvent>(io.element, \"mouseover\", (e) => this.handleMouseOver(io, e)),\r\n\t\t\t\t\taddEventListener<MouseEvent>(io.element, \"mouseout\", (e) => this.handleMouseOut(io, e))\r\n\t\t\t\t]));\r\n\t\t\t}\r\n\r\n\t\t\tif (io.trackable) {\r\n\t\t\t\t//sprite.addEventListener(\"touchmove\", this.handleTouchMove, false, this);\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\tconst disposer = io.eventDisposers.getKey(\"hoverable\");\r\n\r\n\t\t\tif (disposer != null) {\r\n\t\t\t\tdisposer.dispose();\r\n\t\t\t\tio.eventDisposers.removeKey(\"hoverable\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Add or remove touch events\r\n\t\tthis.processTouchable(io);\r\n\t}\r\n\r\n\t/**\r\n\t * Sets up [[InteractionObject]] as movable. Movable can be any\r\n\t * transformation, e.g. drag, swipe, resize, track, or rotate.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {InteractionObject}  io  Element\r\n\t */\r\n\tpublic processMovable(io: InteractionObject) {\r\n\r\n\t\t// Add unified events\r\n\t\tif (io.draggable || io.swipeable || io.trackable || io.resizable || io.rotatable) {\r\n\r\n\t\t\t// Prep the element\r\n\t\t\tif (!this.isGlobalElement(io)) {\r\n\t\t\t\tthis.prepElement(io);\r\n\t\t\t}\r\n\r\n\t\t\t// Add hover styles\r\n\t\t\tthis.applyCursorOverStyle(io);\r\n\r\n\t\t}\r\n\r\n\t\t// Add or remove touch events\r\n\t\tthis.processTouchable(io);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if [[InteractionObject]] is trackable and sets relative events.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {InteractionObject}  io  Element\r\n\t */\r\n\tpublic processTrackable(io: InteractionObject): void {\r\n\t\tthis.processHoverable(io);\r\n\t\tthis.processMovable(io);\r\n\t\tthis.trackedObjects.moveValue(io);\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if [[InteractionObject]] is draggable.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {InteractionObject}  io  Element\r\n\t */\r\n\tpublic processDraggable(io: InteractionObject): void {\r\n\t\tthis.processMovable(io);\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if [[InteractionObject]] is swipeable and sets relative events.\r\n\t *\r\n\t * A swipe event is triggered when a horizontal drag of 75px or more (and\r\n\t * less than 30px vertically) occurs within 700 milliseconds. This can be\r\n\t * overridden in sprites [[swipeOptions]].\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {InteractionObject}  io  Element\r\n\t */\r\n\tpublic processSwipeable(io: InteractionObject): void {\r\n\t\tthis.processMovable(io);\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if [[InteractionObject]] is resizable and attaches required events\r\n\t * to it.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {InteractionObject}  io  Element\r\n\t */\r\n\tpublic processResizable(io: InteractionObject): void {\r\n\t\tthis.processMovable(io);\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if [[InteractionObject]] is rotatable and attaches required events\r\n\t * to it.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {InteractionObject}  io  Element\r\n\t */\r\n\tpublic processRotatable(io: InteractionObject): void {\r\n\t\tthis.processMovable(io);\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if [[InteractionObject]] is supposed to capture mouse wheel events\r\n\t * and prepares it to catch those events.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {InteractionObject}  io  Element\r\n\t */\r\n\tpublic processWheelable(io: InteractionObject): void {\r\n\t\tif (io.wheelable) {\r\n\t\t\tio.hoverable = true;\r\n\t\t\tif (!io.eventDisposers.hasKey(\"wheelable\")) {\r\n\t\t\t\tio.eventDisposers.setKey(\"wheelable\", addEventListener<WheelEvent>(io.element, this._pointerEvents.wheel, (e) => this.handleMouseWheel(io, e)));\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\tconst disposer = io.eventDisposers.getKey(\"wheelable\");\r\n\r\n\t\t\tif (disposer != null) {\r\n\t\t\t\tdisposer.dispose();\r\n\t\t\t\tio.eventDisposers.removeKey(\"wheelable\");\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if [[InteractionObject]] is focusable. A focusable element is an\r\n\t * element that will be highlighted when users presses TAB key. If the\r\n\t * element is focusable, this function will attach relative focus/blur\r\n\t * events to it.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {InteractionObject}  io  Element\r\n\t */\r\n\tpublic processFocusable(io: InteractionObject): void {\r\n\t\tif (io.focusable === true && (io.tabindex > -1)) {\r\n\t\t\tif (!io.eventDisposers.hasKey(\"focusable\")) {\r\n\t\t\t\tio.eventDisposers.setKey(\"focusable\", new MultiDisposer([\r\n\t\t\t\t\taddEventListener<FocusEvent>(io.element, \"focus\", (e) => this.handleFocus(io, e)),\r\n\t\t\t\t\taddEventListener<FocusEvent>(io.element, \"blur\", (e) => this.handleBlur(io, e))\r\n\t\t\t\t]));\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tconst disposer = io.eventDisposers.getKey(\"focusable\");\r\n\r\n\t\t\tif (disposer != null) {\r\n\t\t\t\tdisposer.dispose();\r\n\t\t\t\tio.eventDisposers.removeKey(\"focusable\");\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if [[InteractionObject]] is \"touchable\". It means any interaction\r\n\t * whatsoever: mouse click, touch screen tap, swipe, drag, resize, etc.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {InteractionObject}  io  Element\r\n\t */\r\n\tpublic processTouchable(io: InteractionObject): void {\r\n\t\t// Add unified events\r\n\t\tif (io.clickable || io.hoverable || io.trackable || io.draggable || io.swipeable || io.resizable || io.rotatable) {\r\n\r\n\t\t\t// Add global events\r\n\t\t\tthis.addGlobalEvents();\r\n\r\n\t\t\t// Add local events\r\n\t\t\tif (!io.eventDisposers.hasKey(\"touchable\")) {\r\n\t\t\t\tio.eventDisposers.setKey(\"touchable\", new MultiDisposer([\r\n\r\n\t\t\t\t\taddEventListener<MouseEvent>(\r\n\t\t\t\t\t\tio.element,\r\n\t\t\t\t\t\tthis._pointerEvents.pointerdown,\r\n\t\t\t\t\t\t(e) => this.handlePointerDown(io, e)\r\n\t\t\t\t\t),\r\n\r\n\t\t\t\t\taddEventListener<TouchEvent>(\r\n\t\t\t\t\t\tio.element,\r\n\t\t\t\t\t\t\"touchstart\",\r\n\t\t\t\t\t\t(e) => this.handleTouchDown(io, e),\r\n\t\t\t\t\t\tthis._passiveSupported ? { passive: false } : false\r\n\t\t\t\t\t)\r\n\r\n\t\t\t\t]));\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\tconst disposer = io.eventDisposers.getKey(\"touchable\");\r\n\r\n\t\t\tif (disposer != null) {\r\n\t\t\t\tdisposer.dispose();\r\n\t\t\t\tio.eventDisposers.removeKey(\"touchable\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * ==========================================================================\r\n\t * Non-pointer events\r\n\t * ==========================================================================\r\n\t * @hidden\r\n\t */\r\n\r\n\t/**\r\n\t * Dispatches \"focus\" event when element gains focus.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {InteractionObject}  io  Element\r\n\t * @param {FocusEvent}         ev  Original event\r\n\t */\r\n\tpublic handleFocus(io: InteractionObject, ev: FocusEvent): void {\r\n\t\tif (!io.focusable) {\r\n\t\t\tev.preventDefault();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tio.isFocused = true;\r\n\t\tif (io.events.isEnabled(\"focus\")) {\r\n\t\t\tlet imev: AMEvent<InteractionObject, IInteractionObjectEvents>[\"focus\"] = {\r\n\t\t\t\ttype: \"focus\",\r\n\t\t\t\ttarget: io,\r\n\t\t\t\tevent: ev\r\n\t\t\t};\r\n\t\t\tio.events.dispatchImmediately(\"focus\", imev);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Dispatches \"blur\" event when element loses focus.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {InteractionObject}  io  Element\r\n\t * @param {FocusEvent}         ev  Original event\r\n\t */\r\n\tpublic handleBlur(io: InteractionObject, ev: FocusEvent): void {\r\n\t\tif (!io.focusable) {\r\n\t\t\tev.preventDefault();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tio.isFocused = false;\r\n\t\tif (io.events.isEnabled(\"blur\")) {\r\n\t\t\tlet imev: AMEvent<InteractionObject, IInteractionObjectEvents>[\"blur\"] = {\r\n\t\t\t\ttype: \"blur\",\r\n\t\t\t\ttarget: io,\r\n\t\t\t\tevent: ev\r\n\t\t\t};\r\n\t\t\tio.events.dispatchImmediately(\"blur\", imev);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * ==========================================================================\r\n\t * Global keyboard-related even handlers\r\n\t * ==========================================================================\r\n\t * @hidden\r\n\t */\r\n\r\n\t/**\r\n\t * Checks if there is an item that has currently focus and that they key is\r\n\t * one of the directional keys. If both of the conditions are true, it\r\n\t * creates an object to simulate movement of dragable element with keyboard.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {KeyboardEvent} ev An original keyboard event\r\n\t */\r\n\tpublic handleGlobalKeyDown(ev: KeyboardEvent): void {\r\n\r\n\t\tif (this.focusedObject) {\r\n\t\t\tif (keyboard.isKey(ev, \"esc\")) {\r\n\t\t\t\t// ESC removes focus\r\n\t\t\t\t$dom.blur();\r\n\t\t\t}\r\n\t\t\telse if (this.focusedObject.draggable && keyboard.isKey(ev, [\"up\", \"down\", \"left\", \"right\"])) {\r\n\r\n\t\t\t\t// Prevent scrolling of the document\r\n\t\t\t\tev.preventDefault();\r\n\r\n\t\t\t\t// Get focused object\r\n\t\t\t\tlet io = this.focusedObject;\r\n\r\n\t\t\t\t// Get particular key\r\n\t\t\t\tlet disposerKey = \"interactionKeyboardObject\";\r\n\r\n\t\t\t\t// If such disposer already exists we know the event is going on so we\r\n\t\t\t\t// just move on\r\n\t\t\t\tif (io.eventDisposers.hasKey(disposerKey)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Create a keyboard mover\r\n\t\t\t\tlet ko = new InteractionKeyboardObject(io);\r\n\t\t\t\tio.eventDisposers.setKey(disposerKey, ko);\r\n\t\t\t\tko.keyboardEvent = ev;\r\n\t\t\t\tswitch (keyboard.getEventKey(ev)) {\r\n\t\t\t\t\tcase \"up\":\r\n\t\t\t\t\t\tko.directionY = -1;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"down\":\r\n\t\t\t\t\t\tko.directionY = 1;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"left\":\r\n\t\t\t\t\t\tko.directionX = -1;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"right\":\r\n\t\t\t\t\t\tko.directionX = 1;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Dispatches related events when the keyboard key is realeasd.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {KeyboardEvent} ev An original keyboard event\r\n\t */\r\n\tpublic handleGlobalKeyUp(ev: KeyboardEvent): void {\r\n\t\tlet disposerKey = \"interactionKeyboardObject\";\r\n\t\tif (this.focusedObject) {\r\n\t\t\tconst disposer = this.focusedObject.eventDisposers.getKey(disposerKey);\r\n\r\n\t\t\tif (disposer != null) {\r\n\t\t\t\t// Prevent scrolling of the document\r\n\t\t\t\tev.preventDefault();\r\n\r\n\t\t\t\t// Dispose stuff\r\n\t\t\t\tdisposer.dispose();\r\n\t\t\t\tthis.focusedObject.eventDisposers.removeKey(disposerKey);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * ==========================================================================\r\n\t * Global pointer-related even handlers\r\n\t * ==========================================================================\r\n\t * @hidden\r\n\t */\r\n\r\n\t/**\r\n\t * Handler for a global \"pointermove\" event.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {MouseEvent} ev Event object\r\n\t */\r\n\tpublic handleGlobalPointerMove(ev: MouseEvent): void {\r\n\r\n\t\t// Get pointer\r\n\t\tlet pointer: IPointer = this.getPointer(ev);\r\n\r\n\t\t// Prepare and fire global event\r\n\t\tif (this.events.isEnabled(\"track\")) {\r\n\t\t\tlet imev: AMEvent<this, IInteractionEvents>[\"track\"] = {\r\n\t\t\t\ttype: \"track\",\r\n\t\t\t\ttarget: this,\r\n\t\t\t\tevent: ev,\r\n\t\t\t\tpointer: pointer\r\n\t\t\t};\r\n\t\t\tthis.events.dispatchImmediately(\"track\", imev);\r\n\t\t}\r\n\r\n\t\t// Track\r\n\t\tthis.addBreadCrumb(pointer, pointer.point);\r\n\r\n\t\t// Process further\r\n\t\tthis.handleMove(pointer, ev);\r\n\t}\r\n\r\n\t/**\r\n\t * Handler for a global \"pointerdown\" event.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {MouseEvent} ev Event object\r\n\t */\r\n\tpublic handleGlobalPointerDown(ev: MouseEvent): void {\r\n\r\n\t\t// Remove delayed hovers\r\n\t\tthis.processDelayed();\r\n\r\n\t\t// Get pointer\r\n\t\tlet pointer: IPointer = this.getPointer(ev);\r\n\r\n\t\t// Prepare and fire global event\r\n\t\tif (this.events.isEnabled(\"down\")) {\r\n\t\t\tlet imev: AMEvent<this, IInteractionEvents>[\"down\"] = {\r\n\t\t\t\ttype: \"down\",\r\n\t\t\t\ttarget: this,\r\n\t\t\t\tevent: ev,\r\n\t\t\t\tpointer: pointer\r\n\t\t\t};\r\n\t\t\tthis.events.dispatchImmediately(\"down\", imev);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Prevents touch action from firing.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {MouseEvent} ev Event\r\n\t */\r\n\tpublic preventTouchAction(ev: TouchEvent): void {\r\n\t\tif (!ev.defaultPrevented) {\r\n\t\t\tev.preventDefault();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Handler for a global \"pointerup\" event.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {MouseEvent} ev Event object\r\n\t */\r\n\tpublic handleGlobalPointerUp(ev: MouseEvent): void {\r\n\r\n\t\t// Get pointer\r\n\t\tlet pointer: IPointer = this.getPointer(ev);\r\n\r\n\t\t// Prepare and fire global event\r\n\t\tif (this.events.isEnabled(\"up\")) {\r\n\t\t\tlet imev: AMEvent<this, IInteractionEvents>[\"up\"] = {\r\n\t\t\t\ttype: \"up\",\r\n\t\t\t\ttarget: this,\r\n\t\t\t\tevent: ev,\r\n\t\t\t\tpointer: pointer\r\n\t\t\t};\r\n\t\t\tthis.events.dispatchImmediately(\"up\", imev);\r\n\t\t}\r\n\r\n\t\t// Process further\r\n\t\tthis.handleUp(pointer, ev);\r\n\r\n\t}\r\n\r\n\t/**\r\n * ==========================================================================\r\n * Global touch-related even handlers\r\n * ==========================================================================\r\n */\r\n\r\n\t/**\r\n\t * Handler for a global \"touchmove\" event.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {TouchEvent} ev Event object\r\n\t */\r\n\tpublic handleGlobalTouchMove(ev: TouchEvent): void {\r\n\r\n\t\t// Stop further propagation so we don't get multiple triggers on hybrid\r\n\t\t// devices (both mouse and touch capabilities)\r\n\t\t/*ev.stopPropagation();\r\n\t\tif (ev.defaultPrevented) {\r\n\t\t\tev.preventDefault();\r\n\t\t}*/\r\n\r\n\t\t// Process each changed touch point\r\n\t\tfor (let i = 0; i < ev.changedTouches.length; i++) {\r\n\t\t\t// Get pointer\r\n\t\t\tlet pointer: IPointer = this.getPointer(ev.changedTouches[i]);\r\n\r\n\t\t\t// Prepare and fire global event\r\n\t\t\tif (this.events.isEnabled(\"track\")) {\r\n\t\t\t\tlet imev: AMEvent<this, IInteractionEvents>[\"track\"] = {\r\n\t\t\t\t\ttype: \"track\",\r\n\t\t\t\t\ttarget: this,\r\n\t\t\t\t\tevent: ev,\r\n\t\t\t\t\tpointer: pointer\r\n\t\t\t\t};\r\n\t\t\t\tthis.events.dispatchImmediately(\"track\", imev);\r\n\t\t\t}\r\n\r\n\t\t\t// Track\r\n\t\t\tthis.addBreadCrumb(pointer, pointer.point);\r\n\r\n\t\t\t// Process further\r\n\t\t\tthis.handleMove(pointer, ev);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Handler for a global \"touchstart\" event.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {TouchEvent} ev Event object\r\n\t */\r\n\tpublic handleGlobalTouchStart(ev: TouchEvent): void {\r\n\r\n\t\t// Stop further propagation so we don't get multiple triggers on hybrid\r\n\t\t// devices (both mouse and touch capabilities)\r\n\t\t/*ev.preventDefault();\r\n\t\tif (ev.defaultPrevented) {\r\n\t\t\tev.stopPropagation();\r\n\t\t}*/\r\n\r\n\r\n\t\t// Process each changed touch point\r\n\t\tfor (let i = 0; i < ev.changedTouches.length; i++) {\r\n\r\n\t\t\t// Get pointer\r\n\t\t\tlet pointer: IPointer = this.getPointer(ev.changedTouches[i]);\r\n\r\n\t\t\t// Prepare and fire global event\r\n\t\t\tif (!this._usePointerEventsOnly && this.events.isEnabled(\"down\")) {\r\n\t\t\t\tlet imev: AMEvent<this, IInteractionEvents>[\"down\"] = {\r\n\t\t\t\t\ttype: \"down\",\r\n\t\t\t\t\ttarget: this,\r\n\t\t\t\t\tevent: ev,\r\n\t\t\t\t\tpointer: pointer\r\n\t\t\t\t};\r\n\t\t\t\tthis.events.dispatchImmediately(\"down\", imev);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Handler for a global \"touchend\" event.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {TouchEvent} ev Event object\r\n\t */\r\n\tpublic handleGlobalTouchEnd(ev: TouchEvent): void {\r\n\r\n\t\t// Stop further propagation so we don't get multiple triggers on hybrid\r\n\t\t// devices (both mouse and touch capabilities)\r\n\t\t/*ev.stopPropagation();\r\n\t\tif (ev.defaultPrevented) {\r\n\t\t\tev.preventDefault();\r\n\t\t}*/\r\n\r\n\t\t// Process each changed touch point\r\n\t\tfor (let i = 0; i < ev.changedTouches.length; i++) {\r\n\r\n\t\t\t// Get pointer\r\n\t\t\tlet pointer: IPointer = this.getPointer(ev.changedTouches[i]);\r\n\r\n\t\t\t// Prepare and fire global event\r\n\t\t\tif (this.events.isEnabled(\"up\")) {\r\n\t\t\t\tlet imev: AMEvent<this, IInteractionEvents>[\"up\"] = {\r\n\t\t\t\t\ttype: \"up\",\r\n\t\t\t\t\ttarget: this,\r\n\t\t\t\t\tevent: ev,\r\n\t\t\t\t\tpointer: pointer\r\n\t\t\t\t};\r\n\t\t\t\tthis.events.dispatchImmediately(\"up\", imev);\r\n\t\t\t}\r\n\r\n\t\t\t// Handle element-related events\r\n\t\t\tthis.handleUp(pointer, ev);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * ==========================================================================\r\n\t * Element-specific pointer-related even handlers\r\n\t * ==========================================================================\r\n\t * @hidden\r\n\t */\r\n\r\n\t/**\r\n\t * Handles event when pointer is over [[InteractionObject]] and button is\r\n\t * pressed.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {InteractionObject}          io  Element\r\n\t * @param {MouseEvent | PointerEvent}  ev  Original event\r\n\t */\r\n\tpublic handlePointerDown(io: InteractionObject, ev: MouseEvent | PointerEvent): void {\r\n\r\n\t\t// Stop further propagation so we don't get multiple triggers on hybrid\r\n\t\t// devices (both mouse and touch capabilities)\r\n\t\t//ev.preventDefault();\r\n\t\t//ev.stopPropagation();\r\n\t\t//if (ev.defaultPrevented) {\r\n\t\t//}\r\n\r\n\t\t// Get pointer\r\n\t\tlet pointer: IPointer = this.getPointer(ev);\r\n\r\n\t\t// Set mouse button\r\n\t\tpointer.button = ev.which;\r\n\r\n\t\t// Reset pointer\r\n\t\tthis.resetPointer(pointer);\r\n\r\n\t\t// Process down\r\n\t\tthis.handleDown(io, pointer, ev);\r\n\t}\r\n\r\n\t/**\r\n\t * Handles event when [[InteractionObject]] is hovered by a mouse pointer.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {InteractionObject}  io  Element\r\n\t * @param {MouseEvent}         ev  Original event\r\n\t */\r\n\tpublic handleMouseOver(io: InteractionObject, ev: MouseEvent): void {\r\n\r\n\t\t// Get pointer\r\n\t\tlet pointer: IPointer = this.getPointer(ev);\r\n\r\n\t\t// Lock wheel\r\n\t\tif (io.wheelable) {\r\n\t\t\tthis.lockWheel();\r\n\t\t}\r\n\r\n\t\t// Process down\r\n\t\tthis.handleOver(io, pointer, ev);\r\n\t}\r\n\r\n\t/**\r\n\t * Handles event when [[InteractionObject]] loses hover from a mouse pointer.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {InteractionObject}  io  Element\r\n\t * @param {MouseEvent}         ev  Original event\r\n\t */\r\n\tpublic handleMouseOut(io: InteractionObject, ev: MouseEvent): void {\r\n\t\t// Get pointer\r\n\t\tlet pointer: IPointer = this.getPointer(ev);\r\n\r\n\t\t// Lock wheel\r\n\t\tif (io.wheelable) {\r\n\t\t\tthis.unlockWheel();\r\n\t\t}\r\n\r\n\t\t// Process down\r\n\t\tthis.handleOut(io, pointer, ev);\r\n\t}\r\n\r\n\t/**\r\n\t * Handles event when mouse wheel is crolled over the [[InteractionObject]].\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {InteractionObject}  io  Element\r\n\t * @param {WheelEvent}         ev  Original event\r\n\t * @todo Investigate more-cross browser stuff https://developer.mozilla.org/en-US/docs/Web/Events/wheel\r\n\t */\r\n\tpublic handleMouseWheel(io: InteractionObject, ev: WheelEvent): void {\r\n\r\n\t\t// Get pointer\r\n\t\tlet pointer: IPointer = this.getPointer(ev);\r\n\r\n\t\t// Init delta values\r\n\t\tlet deltaX: number = 0, deltaY: number = 0;\r\n\r\n\t\t// Calculate deltas\r\n\t\tif (ev instanceof WheelEvent) {\r\n\t\t\tdeltaX = Math.round(ev.deltaX);\r\n\t\t\tdeltaY = Math.round(ev.deltaY);\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"Invalid event type\");\r\n\t\t}\r\n\r\n\t\t// Handle the event\r\n\t\tthis.handleWheel(io, pointer, deltaX, deltaY, ev);\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * ==========================================================================\r\n\t * Element-specific touch-related even handlers\r\n\t * ==========================================================================\r\n\t * @hidden\r\n\t */\r\n\r\n\t/**\r\n\t  * Handles an event when an [[InteractionObject]] is touched on a touch\r\n\t  * device.\r\n\t  *\r\n\t  * @ignore Exclude from docs\r\n\t  * @param {InteractionObject}  io  Element\r\n\t  * @param {TouchEvent}         ev  Original event\r\n\t  */\r\n\tpublic handleTouchDown(io: InteractionObject, ev: TouchEvent): void {\r\n\r\n\t\t// Stop further propagation so we don't get multiple triggers on hybrid\r\n\t\t// devices (both mouse and touch capabilities)\r\n\t\t// We're disabling this here because it's impossible to cancel touch\r\n\t\t// event otherwise, and it might be needed in order to control default\r\n\t\t// touch gestures.\r\n\t\t/*if (this._usePointerEventsOnly) {\r\n\t\t\treturn;\r\n\t\t}*/\r\n\t\t// Process each changed touch point\r\n\t\tfor (let i = 0; i < ev.changedTouches.length; i++) {\r\n\r\n\t\t\t// Get pointer\r\n\t\t\tlet pointer: IPointer = this.getPointer(ev.changedTouches[i]);\r\n\r\n\t\t\t// Reset pointer\r\n\t\t\tthis.resetPointer(pointer);\r\n\r\n\t\t\t// Process down\r\n\t\t\tthis.handleDown(io, pointer, ev);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * ==========================================================================\r\n\t * Universal handlers\r\n\t * ==========================================================================\r\n\t * @hidden\r\n\t */\r\n\r\n\t/**\r\n\t * Handles click/tap. Checks for doublehit.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {InteractionObject}        io       Interaction object\r\n\t * @param {IPointer}                 pointer  Pointer\r\n\t * @param {MouseEvent | TouchEvent}  ev       Original event\r\n\t */\r\n\tpublic handleHit(io: InteractionObject, pointer: IPointer, ev: MouseEvent | TouchEvent): void {\r\n\r\n\t\t// Check if this is a double-hit\r\n\t\tlet now = new Date().getTime();\r\n\t\tif (io.lastHit >= (now - this.getHitOption(io, \"doubleHitTime\"))) {\r\n\r\n\t\t\t// Yup - it's a double-hit\r\n\r\n\t\t\t// Cancel the hit\r\n\t\t\t//clearTimeout(io.lastHitPointer.hitTimeout);\r\n\r\n\t\t\t// Clear last hit\r\n\t\t\tio.lastHit = undefined;\r\n\t\t\tio.lastHitPointer = undefined;\r\n\r\n\t\t\t// Dispatch event\r\n\t\t\tif (io.events.isEnabled(\"doublehit\")) {\r\n\t\t\t\tlet imev: AMEvent<InteractionObject, IInteractionObjectEvents>[\"doublehit\"] = {\r\n\t\t\t\t\ttype: \"doublehit\",\r\n\t\t\t\t\ttarget: io,\r\n\t\t\t\t\tpoint: pointer.point,\r\n\t\t\t\t\tevent: ev\r\n\t\t\t\t};\r\n\t\t\t\tio.events.dispatchImmediately(\"doublehit\", imev);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\telse {\r\n\r\n\t\t\t// Log last hit\r\n\t\t\tio.lastHit = now;\r\n\t\t\tio.lastHitPointer = pointer;\r\n\r\n\t\t\tif (this.getHitOption(io, \"delayFirstHit\")) {\r\n\t\t\t\t// Schedule hit report event to element\r\n\t\t\t\t/*io.lastHitPointer.hitTimeout = setTimeout(() => {\r\n\t\t\t\t\tif (pointer.button === 3) {\r\n\t\t\t\t\t\tif (io.events.isEnabled(\"rightclick\")) {\r\n\t\t\t\t\t\t\tlet imev: AMEvent<InteractionObject, InteractionObjectEvents>[\"rightclick\"] = {\r\n\t\t\t\t\t\t\t\ttype: \"rightclick\",\r\n\t\t\t\t\t\t\t\ttarget: io,\r\n\t\t\t\t\t\t\t\tevent: ev\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tio.events.dispatchImmediately(\"rightclick\", imev);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (io.events.isEnabled(\"hit\")) {\r\n\t\t\t\t\t\t\tlet imev: AMEvent<InteractionObject, InteractionObjectEvents>[\"hit\"] = {\r\n\t\t\t\t\t\t\t\ttype: \"hit\",\r\n\t\t\t\t\t\t\t\ttarget: io,\r\n\t\t\t\t\t\t\t\tevent: ev,\r\n\t\t\t\t\t\t\t\tpoint: pointer.point\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tio.events.dispatchImmediately(\"hit\", imev);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this.getHitOption(io, \"doubleHitTime\"));*/\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (pointer.button === 3) {\r\n\t\t\t\t\t// Execute HIT now\r\n\t\t\t\t\tif (io.events.isEnabled(\"rightclick\")) {\r\n\t\t\t\t\t\tlet imev: AMEvent<InteractionObject, IInteractionObjectEvents>[\"rightclick\"] = {\r\n\t\t\t\t\t\t\ttype: \"rightclick\",\r\n\t\t\t\t\t\t\ttarget: io,\r\n\t\t\t\t\t\t\tevent: ev\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tio.events.dispatchImmediately(\"rightclick\", imev);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (io.events.isEnabled(\"hit\")) {\r\n\t\t\t\t\t\tlet imev: AMEvent<InteractionObject, IInteractionObjectEvents>[\"hit\"] = {\r\n\t\t\t\t\t\t\ttype: \"hit\",\r\n\t\t\t\t\t\t\ttarget: io,\r\n\t\t\t\t\t\t\tevent: ev,\r\n\t\t\t\t\t\t\tpoint: pointer.point\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tio.events.dispatchImmediately(\"hit\", imev);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Handles pointer hovering over [[InteractionObject]].\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {InteractionObject}        io       Interaction object\r\n\t * @param {IPointer}                 pointer  Pointer\r\n\t * @param {MouseEvent | TouchEvent}  ev       Original event\r\n\t */\r\n\tpublic handleOver(io: InteractionObject, pointer: IPointer, ev: MouseEvent | TouchEvent): void {\r\n\r\n\t\tif (!io.hoverable) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// We need to check if pointer already exists in the downPointers so we\r\n\t\t// don't end up with duplicate pointers. This could happen on hybrid\r\n\t\t// displays where both touch and pointer event is generated on screen\r\n\t\t// touch.\r\n\t\tif (this.pointerExists(io.overPointers, pointer)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Add pointer to object\r\n\t\tio.overPointers.moveValue(pointer);\r\n\r\n\t\t// First one?\r\n\t\tif (io.overPointers.length === 1) {\r\n\r\n\t\t\t// Add to hovered elements (moved to InteractionObject)\r\n\t\t\t//this.overObjects.moveValue(io);\r\n\r\n\t\t\t// Report event to interaction object (but only for the first time)\r\n\t\t\tif (!io.isHover) {\r\n\r\n\t\t\t\t// Set element as hovered\r\n\t\t\t\tio.isHover = true;\r\n\r\n\t\t\t\t// Generate body track event. This is needed so that if element loads\r\n\t\t\t\t// under unmoved mouse cursor, we still need all the actions that are\r\n\t\t\t\t// required to happen to kick in.\r\n\t\t\t\tthis.handleTrack(this.body, pointer, ev, true);\r\n\r\n\t\t\t\t// Event\r\n\t\t\t\tif (io.events.isEnabled(\"over\")) {\r\n\t\t\t\t\tlet imev: AMEvent<InteractionObject, IInteractionObjectEvents>[\"over\"] = {\r\n\t\t\t\t\t\ttype: \"over\",\r\n\t\t\t\t\t\ttarget: io,\r\n\t\t\t\t\t\tevent: ev,\r\n\t\t\t\t\t\tpointer: pointer\r\n\t\t\t\t\t};\r\n\t\t\t\t\tio.events.dispatchImmediately(\"over\", imev);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Handles when [[InteractionObject]] is no longer hovered.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {InteractionObject}        io       Interaction object\r\n\t * @param {IPointer}                 pointer  Pointer\r\n\t * @param {MouseEvent | TouchEvent}  ev       Original event\r\n\t */\r\n\tpublic handleOut(io: InteractionObject, pointer: IPointer, ev: MouseEvent | TouchEvent, ignoreBehavior: boolean = false): void {\r\n\r\n\t\tif (!io.hoverable) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Remove pointer from object\r\n\t\tio.overPointers.removeValue(pointer);\r\n\r\n\t\t// If there are no over and down pointers left, report OUT event\r\n\t\t// We need to check downPointers here because we might be dragging an item\r\n\t\t// that is constrained to certain area, but the mouse is already outside\r\n\t\t// that area. In this case we don't want to trigger an out event, not until\r\n\t\t// down pointer is rised.\r\n\t\tif (io.overPointers.length === 0) {\r\n\r\n\t\t\t// Remove from hovered objects (moved to InteractionObject)\r\n\t\t\t//this.overObjects.removeValue(io);\r\n\r\n\t\t\t// Report event to InteractionObject (but only when the last hover leaves)\r\n\t\t\tif (io.isHover) {\r\n\t\t\t\tif (io.downPointers.length === 0) {\r\n\r\n\t\t\t\t\t// Check touch behavior, but only if the pointer did not move\r\n\t\t\t\t\tif (!ignoreBehavior && pointer.touch && !this.moved(pointer, this.getHitOption(io, \"hitTolerance\"))) {\r\n\t\t\t\t\t\tlet behavior = this.getHoverOption(io, \"touchOutBehavior\");\r\n\t\t\t\t\t\tif (behavior == \"leave\") {\r\n\t\t\t\t\t\t\t// Set to \"leave\", so we do not execute any \"out\" event.\r\n\t\t\t\t\t\t\t// It will be handled by any other interaction that happens\r\n\t\t\t\t\t\t\t// afterwards.\r\n\t\t\t\t\t\t\tthis._delayedEvents.out.push({\r\n\t\t\t\t\t\t\t\ttype: \"out\",\r\n\t\t\t\t\t\t\t\tio: io,\r\n\t\t\t\t\t\t\t\tpointer: pointer,\r\n\t\t\t\t\t\t\t\tevent: ev\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (behavior == \"delay\" && this.getHoverOption(io, \"touchOutDelay\")) {\r\n\t\t\t\t\t\t\tthis._delayedEvents.out.push({\r\n\t\t\t\t\t\t\t\ttype: \"out\",\r\n\t\t\t\t\t\t\t\tio: io,\r\n\t\t\t\t\t\t\t\tpointer: pointer,\r\n\t\t\t\t\t\t\t\tevent: ev,\r\n\t\t\t\t\t\t\t\ttimeout: setTimeout(() => {\r\n\t\t\t\t\t\t\t\t\tthis.handleOut(io, pointer, ev, true);\r\n\t\t\t\t\t\t\t\t}, this.getHoverOption(io, \"touchOutDelay\"))\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t// Nothing for \"remove\" - that's how it works \"out-of-the-box\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Generate body track event. This is needed so that if element loads\r\n\t\t\t\t\t// under unmoved mouse cursor, we still need all the actions that are\r\n\t\t\t\t\t// required to happen to kick in.\r\n\t\t\t\t\tthis.handleTrack(this.body, pointer, ev, true);\r\n\r\n\t\t\t\t\tif (io.lastOutEvent) {\r\n\t\t\t\t\t\tio.lastOutEvent = undefined;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tio.isHover = false;\r\n\t\t\t\t\tif (io.events.isEnabled(\"out\")) {\r\n\t\t\t\t\t\tlet imev: AMEvent<InteractionObject, IInteractionObjectEvents>[\"out\"] = {\r\n\t\t\t\t\t\t\ttype: \"out\",\r\n\t\t\t\t\t\t\ttarget: io,\r\n\t\t\t\t\t\t\tevent: ev,\r\n\t\t\t\t\t\t\tpointer: pointer\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tio.events.dispatchImmediately(\"out\", imev);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tio.lastOutEvent = ev;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Performs tasks on pointer down.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {InteractionObject}        io       Element\r\n\t * @param {IPointer}                 pointer  Pointer\r\n\t * @param {MouseEvent | TouchEvent}  ev       Original event\r\n\t */\r\n\tpublic handleDown(io: InteractionObject, pointer: IPointer, ev: MouseEvent | TouchEvent): void {\r\n\r\n\t\t// Remove delayed hovers\r\n\t\tthis.processDelayed();\r\n\r\n\t\t// Stop inertia animations if they're currently being played out\r\n\t\tif (io.inert) {\r\n\t\t\tthis.stopInertia(io);\r\n\t\t}\r\n\r\n\t\t// Reset hover status if it's a touch pointer\r\n\t\t// @todo Check if we need to keep this\r\n\t\t/*if (pointer.touch && io.overPointers.length) {\r\n\t\t\twhile (io.overPointers.length) {\r\n\t\t\t\tthis.handleOut(io, io.overPointers.getIndex(0), ev);\r\n\t\t\t}\r\n\t\t\tio.isHover = false;\r\n\t\t}*/\r\n\r\n\t\t// Log last down event\r\n\t\tpointer.lastDownEvent = ev;\r\n\r\n\t\t// Add Pointer in object\r\n\t\t// We need to check if pointer already exists in the downPointers so we\r\n\t\t// don't end up with duplicate pointers. This could happen on hybrid\r\n\t\t// displays where both touch and pointer event is generated on screen\r\n\t\t// touch.\r\n\t\tif (!this.pointerExists(io.downPointers, pointer)) {\r\n\t\t\t//return;\r\n\t\t\tio.downPointers.moveValue(pointer);\r\n\t\t}\r\n\r\n\t\t// Lose focus if needed\r\n\t\tif (io.focusable !== false && this.getHitOption(io, \"noFocus\")) {\r\n\t\t\tif (this.focusedObject) {\r\n\t\t\t\t$dom.blur();\r\n\t\t\t}\r\n\t\t\tif (!this.isGlobalElement(io)) {\r\n\t\t\t\tev.preventDefault();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tio.isDown = true;\r\n\r\n\t\t// Report event\r\n\t\tif (io.events.isEnabled(\"down\")) {\r\n\t\t\tlet imev: AMEvent<InteractionObject, IInteractionObjectEvents>[\"down\"] = {\r\n\t\t\t\ttype: \"down\",\r\n\t\t\t\ttarget: io,\r\n\t\t\t\tevent: ev,\r\n\t\t\t\tpointer: pointer\r\n\t\t\t};\r\n\t\t\tio.events.dispatchImmediately(\"down\", imev);\r\n\t\t}\r\n\r\n\t\t// Apply styles if necessary\r\n\t\tthis.applyCursorDownStyle(io, pointer);\r\n\r\n\t\t// Check if element is already hovered\r\n\t\t// (can't be pressed down without hovering)\r\n\t\tthis.handleOver(io, pointer, ev);\r\n\r\n\t\t// First down pointer?\r\n\t\tif (io.downPointers.length === 1) {\r\n\r\n\t\t\t// Start hold timeout\r\n\t\t\t/*pointer.holdTimeout = setTimeout(() => {\r\n\t\t\t\tif (io.events.isEnabled(\"hold\")) {\r\n\t\t\t\t\tlet imev: AMEvent<InteractionObject, InteractionObjectEvents>[\"hold\"] = {\r\n\t\t\t\t\t\ttype: \"hold\",\r\n\t\t\t\t\t\ttarget: io,\r\n\t\t\t\t\t\tevent: ev,\r\n\t\t\t\t\t\tpointer: pointer\r\n\t\t\t\t\t};\r\n\t\t\t\t\tio.events.dispatchImmediately(\"hold\", imev);\r\n\t\t\t\t}\r\n\t\t\t}, this.getHitOption(io, \"holdTime\"));*/\r\n\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.cancelHold(io);\r\n\t\t}\r\n\r\n\t\t// If element is draggable we prepare and postpone DRAG_START event (until\r\n\t\t// it is actually moved)\r\n\t\tif (io.draggable) {\r\n\t\t\tthis.processDragStart(io, pointer, ev);\r\n\t\t}\r\n\r\n\t\t// Set up swipe timeout\r\n\t\tif (io.swipeable) {\r\n\t\t\tpointer.swipeCanceled = false;\r\n\t\t\t/*pointer.swipeTimeout = setTimeout(function() {\r\n\t\t\t\tpointer.swipeCanceled = true;\r\n\t\t\t}, this.getSwipeOption(io, \"time\"));*/\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Handles pointer move.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {IPointer}                 pointer  Pointer\r\n\t * @param {MouseEvent | TouchEvent}  ev       Original event\r\n\t */\r\n\tpublic handleMove(pointer: IPointer, ev: MouseEvent | TouchEvent): void {\r\n\r\n\t\t// Process hovered elements\r\n\t\t// We check if the element became unhovered without reporting the mouseout\r\n\t\t// event. (it happens in some cases)\r\n\t\tif (!pointer.touch) {\r\n\t\t\t$iter.each(this.overObjects.backwards().iterator(), (io) => {\r\n\t\t\t\t// Is this pointer relevant to element?\r\n\t\t\t\tif (io.overPointers.contains(pointer) && io.hoverable) {\r\n\t\t\t\t\t// Check if the element is still hovered\r\n\t\t\t\t\tlet reset = false;\r\n\t\t\t\t\tif (io.element) {\r\n\t\t\t\t\t\tif (!$dom.contains(io.element, <HTMLElement>pointer.lastEvent.target)) {\r\n\t\t\t\t\t\t\treset = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\treset = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (reset) {\r\n\t\t\t\t\t\tthis.handleOut(io, pointer, ev);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// Override only if we have objects currently being dragged or otherwise\r\n\t\t// interacted with\r\n\t\tif (this.transformedObjects.length) {\r\n\t\t\tev.preventDefault();\r\n\t\t}\r\n\r\n\t\t// Process down elements\r\n\t\t$iter.each(this.transformedObjects.backwards().iterator(), (io) => {\r\n\t\t\t// Is this pointer relevant to element?\r\n\t\t\tif (io.downPointers.contains(pointer) &&\r\n\t\t\t\t// Swipe still happening?\r\n\t\t\t\t!(io.swipeable && this.swiping(io, pointer)) &&\r\n\t\t\t\t(io.draggable || io.resizable || io.rotatable)) {\r\n\t\t\t\tthis.handleTransform(io, ev);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// Process tracked elements\r\n\t\t$iter.each(this.trackedObjects.backwards().iterator(), (io) => {\r\n\t\t\t// Is this pointer relevant to element?\r\n\t\t\t// @todo check if this is check is necessary\r\n\t\t\t/*if (!io.overPointers.contains(pointer)) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}*/\r\n\t\t\tthis.handleTrack(io, pointer, ev);\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Handles reporting of pointer movement.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {InteractionObject}        io        Element\r\n\t * @param {IPointer}                 pointer    Pointer\r\n\t * @param {MouseEvent | TouchEvent}  ev         Original event\r\n\t * @param {boolean}                  skipCheck  Sould we skip check if cursor actually moved\r\n\t */\r\n\tpublic handleTrack(io: InteractionObject, pointer: IPointer, ev: MouseEvent | TouchEvent, skipCheck = false): void {\r\n\r\n\t\t// Do nothing if the cursor did not actually move\r\n\t\tif (!skipCheck && !this.moved(pointer, 0)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Initiate TRACK event\r\n\t\tif (io.events.isEnabled(\"track\")) {\r\n\t\t\tlet imev: AMEvent<InteractionObject, IInteractionObjectEvents>[\"track\"] = {\r\n\t\t\t\ttype: \"track\",\r\n\t\t\t\ttarget: io,\r\n\t\t\t\tevent: ev,\r\n\t\t\t\tpoint: pointer.point,\r\n\t\t\t\tpointer: pointer\r\n\t\t\t};\r\n\t\t\tio.events.dispatchImmediately(\"track\", imev);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Performs tasks on pointer up.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {IPointer}                 pointer  Pointer\r\n\t * @param {MouseEvent | TouchEvent}  ev       Original event\r\n\t */\r\n\tpublic handleUp(pointer: IPointer, ev: MouseEvent | TouchEvent): void {\r\n\r\n\t\t// Log last up event\r\n\t\tpointer.lastUpEvent = ev;\r\n\r\n\t\t// Process hovered elements (but only if it's a touch pointer)\r\n\t\tif (pointer.touch) {\r\n\r\n\t\t\t$iter.each(this.overObjects.backwards().iterator(), (io) => {\r\n\t\t\t\t// Is this pointer relevant to element?\r\n\t\t\t\tif (io.overPointers.contains(pointer)) {\r\n\t\t\t\t\t// Remove from over pointers\r\n\t\t\t\t\tio.overPointers.removeValue(pointer);\r\n\r\n\t\t\t\t\t// No over pointers left?\r\n\t\t\t\t\tif (io.overPointers.length === 0) {\r\n\t\t\t\t\t\tthis.handleOut(io, pointer, ev);\r\n\t\t\t\t\t\t//this.overObjects.removeValue(io);\r\n\t\t\t\t\t\t//io.isHover = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// Process down objects\r\n\t\t$iter.each(this.downObjects.backwards().iterator(), (io) => {\r\n\r\n\t\t\t// Is this pointer relevant to element?\r\n\t\t\tif (io && io.downPointers.contains(pointer)) {\r\n\t\t\t\t// Clear HOLD timeout just in case\r\n\t\t\t\t//this.cancelHold(io);\r\n\r\n\t\t\t\t// Restore styles\r\n\t\t\t\tthis.restoreCursorDownStyle(io, pointer);\r\n\r\n\t\t\t\t// Remove from over pointers\r\n\t\t\t\tio.downPointers.removeValue(pointer);\r\n\r\n\t\t\t\t// Initiate UP event\r\n\t\t\t\tif (io.events.isEnabled(\"up\")) {\r\n\t\t\t\t\tlet imev: AMEvent<InteractionObject, IInteractionObjectEvents>[\"up\"] = {\r\n\t\t\t\t\t\ttype: \"up\",\r\n\t\t\t\t\t\ttarget: io,\r\n\t\t\t\t\t\tevent: ev,\r\n\t\t\t\t\t\tpointer: pointer\r\n\t\t\t\t\t};\r\n\t\t\t\t\tio.events.dispatchImmediately(\"up\", imev);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Initiate delayed OUT event\r\n\t\t\t\tif (io.lastOutEvent) {\r\n\t\t\t\t\tthis.handleOut(io, pointer, io.lastOutEvent);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Handle swiping-related stuff\r\n\t\t\t\tif (io.swipeable && this.swiped(io, pointer)) {\r\n\t\t\t\t\t// Swiped - nothing else should happen\r\n\t\t\t\t\tthis.handleSwipe(io, pointer, ev);\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Check if it maybe a click\r\n\t\t\t\t\tif (io.clickable && !this.moved(pointer, this.getHitOption(io, \"hitTolerance\"))) {\r\n\t\t\t\t\t\tthis.handleHit(io, pointer, ev);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Remove from down objects if no more pointers pressing down\r\n\t\t\t\t\tif (io.downPointers.length === 0) {\r\n\t\t\t\t\t\tio.isDown = false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Do extra work for inert draggable objects\r\n\t\t\t\t\tif (io.inert && this.moved(pointer, this.getHitOption(io, \"hitTolerance\"))) {\r\n\t\t\t\t\t\tthis.handleInertia(io, pointer);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (io.draggable) {\r\n\t\t\t\t\t\tthis.processDragStop(io, pointer, ev);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// No more down pointers?\r\n\t\t/*if (this.transformedObjects.length === 0) {\r\n\t\t\tthis.unlockDocument();\r\n\t\t}*/\r\n\r\n\t\t// Reset pointer\r\n\t\tthis.resetPointer(pointer);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Handles swipe action.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {InteractionObject}        io       Element\r\n\t * @param {IPointer}                 pointer  Pointer\r\n\t * @param {MouseEvent | TouchEvent}  ev       Original event\r\n\t */\r\n\tpublic handleSwipe(io: InteractionObject, pointer: IPointer, ev: MouseEvent | TouchEvent): void {\r\n\r\n\t\t// We pass in InteractionEvent with shift in mouse coordinates\r\n\t\t// between when the drag started and ended\r\n\t\tif (io.events.isEnabled(\"swipe\")) {\r\n\t\t\tlet imev: AMEvent<InteractionObject, IInteractionObjectEvents>[\"swipe\"] = {\r\n\t\t\t\ttype: \"swipe\",\r\n\t\t\t\ttarget: io,\r\n\t\t\t\tevent: ev\r\n\t\t\t};\r\n\t\t\tio.events.dispatchImmediately(\"swipe\", imev);\r\n\t\t}\r\n\r\n\t\tif (pointer.startPoint.x < pointer.point.x) {\r\n\t\t\tif (io.events.isEnabled(\"swiperight\")) {\r\n\t\t\t\tlet imev: AMEvent<InteractionObject, IInteractionObjectEvents>[\"swiperight\"] = {\r\n\t\t\t\t\ttype: \"swiperight\",\r\n\t\t\t\t\ttarget: io,\r\n\t\t\t\t\tevent: ev\r\n\t\t\t\t};\r\n\t\t\t\tio.events.dispatchImmediately(\"swiperight\", imev);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (io.events.isEnabled(\"swipeleft\")) {\r\n\t\t\t\tlet imev: AMEvent<InteractionObject, IInteractionObjectEvents>[\"swipeleft\"] = {\r\n\t\t\t\t\ttype: \"swipeleft\",\r\n\t\t\t\t\ttarget: io,\r\n\t\t\t\t\tevent: ev\r\n\t\t\t\t};\r\n\t\t\t\tio.events.dispatchImmediately(\"swipeleft\", imev);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Handles event triggering for wheel rotation.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {InteractionObject}  io       Element\r\n\t * @param {IPointer}           pointer  Pointer\r\n\t * @param {number}             deltaX   Horizontal shift\r\n\t * @param {number}             deltaY   Vertical shift\r\n\t * @param {WheelEvent}         ev       Original event\r\n\t */\r\n\tpublic handleWheel(io: InteractionObject, pointer: IPointer, deltaX: number, deltaY: number, ev: WheelEvent): void {\r\n\t\tconst shift: IPoint = {\r\n\t\t\tx: deltaX,\r\n\t\t\ty: deltaY\r\n\t\t};\r\n\r\n\t\t// Trigger generic WHEEL event\r\n\t\tif (io.events.isEnabled(\"swiperight\")) {\r\n\t\t\tio.events.dispatchImmediately(\"wheel\", {\r\n\t\t\t\ttype: \"wheel\",\r\n\t\t\t\ttarget: io,\r\n\t\t\t\tevent: ev,\r\n\t\t\t\tpoint: pointer.point,\r\n\t\t\t\tshift: shift\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// Trigger direction-specific events\r\n\r\n\t\t// Horizontal\r\n\t\tif (deltaX < 0) {\r\n\t\t\tif (io.events.isEnabled(\"wheelleft\")) {\r\n\t\t\t\tio.events.dispatchImmediately(\"wheelleft\", {\r\n\t\t\t\t\ttype: \"wheelleft\",\r\n\t\t\t\t\ttarget: io,\r\n\t\t\t\t\tevent: ev,\r\n\t\t\t\t\tpoint: pointer.point,\r\n\t\t\t\t\tshift: shift\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t} else if (deltaX > 0) {\r\n\t\t\tif (io.events.isEnabled(\"swiperight\")) {\r\n\t\t\t\tio.events.dispatchImmediately(\"wheelright\", {\r\n\t\t\t\t\ttype: \"wheelright\",\r\n\t\t\t\t\ttarget: io,\r\n\t\t\t\t\tevent: ev,\r\n\t\t\t\t\tpoint: pointer.point,\r\n\t\t\t\t\tshift: shift\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t// Vertical\r\n\t\t} else if (deltaY < 0) {\r\n\t\t\tif (io.events.isEnabled(\"wheelup\")) {\r\n\t\t\t\tio.events.dispatchImmediately(\"wheelup\", {\r\n\t\t\t\t\ttype: \"wheelup\",\r\n\t\t\t\t\ttarget: io,\r\n\t\t\t\t\tevent: ev,\r\n\t\t\t\t\tpoint: pointer.point,\r\n\t\t\t\t\tshift: shift\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t} else if (deltaY > 0) {\r\n\t\t\tif (io.events.isEnabled(\"wheeldown\")) {\r\n\t\t\t\tio.events.dispatchImmediately(\"wheeldown\", {\r\n\t\t\t\t\ttype: \"wheeldown\",\r\n\t\t\t\t\ttarget: io,\r\n\t\t\t\t\tevent: ev,\r\n\t\t\t\t\tpoint: pointer.point,\r\n\t\t\t\t\tshift: shift\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Initiates inertia checking sub-routines for different movement types:\r\n\t * drag, resize, rotate.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {InteractionObject}   sprite\r\n\t * @param {IPointer}            pointer\r\n\t */\r\n\tpublic handleInertia(io: InteractionObject, pointer: IPointer): void {\r\n\r\n\t\tif (io.draggable && io.downPointers.length === 0) {\r\n\t\t\tthis.handleMoveInertia(io, pointer);\r\n\t\t}\r\n\r\n\t\tif (io.rotatable && io.downPointers.length === 1) {\r\n\t\t\tthis.handleRotateInertia(io, pointer);\r\n\t\t}\r\n\r\n\t\tif (io.resizable && io.downPointers.length > 1) {\r\n\t\t\tthis.handleResizeInertia(io, pointer);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Continues moving the element to simulate the effect of inertia. Happens\r\n\t * when `inert` and `draggable` object is dragged and then released.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {InteractionObject}  io       Element\r\n\t * @param {IPointer}           pointer  Pointer\r\n\t */\r\n\tpublic handleMoveInertia(io: InteractionObject, pointer: IPointer): void {\r\n\r\n\t\t// Init inertia object\r\n\t\tlet inertia: Inertia = new Inertia();\r\n\t\tinertia.interaction = io;\r\n\t\tinertia.type = \"move\";\r\n\t\tinertia.point = {\r\n\t\t\t\"x\": pointer.point.x,\r\n\t\t\t\"y\": pointer.point.y\r\n\t\t};\r\n\t\tinertia.startPoint = {\r\n\t\t\t\"x\": pointer.startPoint.x,\r\n\t\t\t\"y\": pointer.startPoint.y\r\n\t\t};\r\n\r\n\t\t// Get inertia data\r\n\t\tlet ref: IBreadcrumb = this.getTrailPoint(pointer, new Date().getTime() - this.getInertiaOption(io, \"move\", \"time\"));\r\n\t\tif (typeof ref === \"undefined\") {\r\n\t\t\tthis.processDragStop(io, pointer, pointer.lastUpEvent);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Init animation options\r\n\t\tlet factor = this.getInertiaOption(io, \"move\", \"factor\");\r\n\t\tlet animationOptions = [{\r\n\t\t\t\"to\": pointer.point.x + (pointer.point.x - ref.point.x) * factor,\r\n\t\t\t\"property\": \"x\"\r\n\t\t}, {\r\n\t\t\t\"to\": pointer.point.y + (pointer.point.y - ref.point.y) * factor,\r\n\t\t\t\"property\": \"y\"\r\n\t\t}];\r\n\r\n\t\t// Start animation\r\n\t\tlet animation: Animation = new Animation(\r\n\t\t\tinertia,\r\n\t\t\tanimationOptions,\r\n\t\t\tthis.getInertiaOption(io, \"move\", \"duration\"),\r\n\t\t\tthis.getInertiaOption(io, \"move\", \"easing\")\r\n\t\t).start();\r\n\t\tthis._disposers.push(animation.events.on(\"animationended\", (ev) => {\r\n\t\t\tinertia.done();\r\n\t\t}));\r\n\r\n\t\t// Add inertia object\r\n\t\tio.inertias.setKey(\"move\", inertia);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Continues rotation of a `rotatable` element after it is rotated and\r\n\t * released.\r\n\t *\r\n\t * **NOTE:** this is is just a placeholder function. No actual functionality\r\n\t * is implemented, yet.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {InteractionObject}  io       Element\r\n\t * @param {IPointer}           pointer  Pointer\r\n\t * @todo Implement functionality\r\n\t */\r\n\tpublic handleRotateInertia(io: InteractionObject, pointer: IPointer): void {\r\n\r\n\t\t// Some day, folks. Some day...\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Continues resizing of a `resizable` element after it is resized and\r\n\t * released.\r\n\t *\r\n\t * **NOTE:** this is is just a placeholder function. No actual fucntionality\r\n\t * is implemented, yet.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {InteractionObject}  io       Element\r\n\t * @param {IPointer}           pointer  Pointer\r\n\t */\r\n\tpublic handleResizeInertia(io: InteractionObject, pointer: IPointer): void {\r\n\r\n\t\t// Some day, folks. Some day...\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Recalculates element's position, size and rotation based on position of\r\n\t * all its related pointers.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {InteractionObject}        io  Element\r\n\t * @param {MouseEvent | TouchEvent}  ev  Original event\r\n\t */\r\n\tpublic handleTransform(io: InteractionObject, ev: MouseEvent | TouchEvent): void {\r\n\r\n\t\t// Get primary pointer and its respective points\r\n\t\tlet pointer1: $type.Optional<IPointer> = io.downPointers.getIndex(0);\r\n\t\tlet point1: IPoint = pointer1.point;\r\n\t\tlet startPoint1: IPoint = pointer1.startPoint;\r\n\r\n\t\t// Init secondary pointer\r\n\t\tlet pointer2: $type.Optional<IPointer> = io.downPointers.getIndex(1);\r\n\t\tlet point2: IPoint;\r\n\t\tlet startPoint2: IPoint;\r\n\r\n\t\t// Determine if it's a sinngle pointer or multi\r\n\t\tlet singlePoint: boolean = true;\r\n\t\tif (io.downPointers.length > 1) {\r\n\r\n\t\t\t// Several pointers down\r\n\t\t\tsinglePoint = false;\r\n\r\n\t\t\t// Get second pointer\r\n\t\t\tpoint2 = pointer2.point;\r\n\t\t\tstartPoint2 = pointer2.startPoint;\r\n\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// Just one pointer down\r\n\t\t\tsinglePoint = true;\r\n\r\n\t\t\t// Use center of the sprite to simulate \"second\" point of touch\r\n\t\t\tpoint2 = {\r\n\t\t\t\t\"x\": io.originalPosition.x,\r\n\t\t\t\t\"y\": io.originalPosition.y\r\n\t\t\t};\r\n\t\t\tstartPoint2 = point2;\r\n\t\t}\r\n\r\n\t\t// Primary touch point moved?\r\n\t\tlet pointer1Moved = this.moved(pointer1, 0);\r\n\r\n\t\t// Report DRAG_START if necessary\r\n\t\tif (io.draggable && pointer1.dragStartEvents.length && pointer1Moved) {\r\n\t\t\tif (io.events.isEnabled(\"dragstart\")) {\r\n\t\t\t\tio.events.dispatchImmediately(\"dragstart\", pointer1.dragStartEvents.shift());\r\n\t\t\t}\r\n\t\t\t//delete pointer1.dragStartEvents;\r\n\t\t}\r\n\r\n\t\t// Determine what we do in order of superiority\r\n\t\tif (singlePoint && io.draggable) {\r\n\r\n\t\t\t// We have only one pointer and the Sprite is draggable\r\n\t\t\t// There's nothing else to be done - just move it\r\n\t\t\tthis.handleTransformMove(io, point1, startPoint1, ev, pointer1Moved);\r\n\r\n\t\t}\r\n\t\telse {\r\n\r\n\t\t\t// Check if second touch point moved\r\n\t\t\tlet pointer2Moved = this.moved(pointer2, 0);\r\n\r\n\t\t\tif (io.draggable && io.resizable && io.rotatable) {\r\n\t\t\t\t//this.handleTransformAll(io, point1, startPoint1, point2, startPoint2, ev, pointer1Moved && pointer2Moved);\r\n\t\t\t\tthis.handleTransformMove(io, point1, startPoint1, ev, pointer1Moved && pointer2Moved);\r\n\t\t\t\tthis.handleTransformResize(io, point1, startPoint1, point2, startPoint2, ev, pointer1Moved && pointer2Moved);\r\n\t\t\t\tthis.handleTransformRotate(io, point1, startPoint1, point2, startPoint2, ev, pointer1Moved && pointer2Moved);\r\n\t\t\t}\r\n\t\t\telse {\r\n\r\n\t\t\t\tif (io.draggable) {\r\n\t\t\t\t\tthis.handleTransformMove(io, point1, startPoint1, ev, pointer1Moved);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (io.resizable) {\r\n\t\t\t\t\tthis.handleTransformResize(io, point1, startPoint1, point2, startPoint2, ev, pointer1Moved && pointer2Moved);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (io.rotatable) {\r\n\t\t\t\t\tthis.handleTransformRotate(io, point1, startPoint1, point2, startPoint2, ev, pointer1Moved && pointer2Moved);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Handles movement of the dragged element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {InteractionObject}                        io            Element\r\n\t * @param {IPoint}                                   point         Current point of the pointer\r\n\t * @param {IPoint}                                   startPoint    Starting point of the pointer\r\n\t * @param {MouseEvent | TouchEvent | KeyboardEvent}  ev            Original event\r\n\t * @param {boolean}                                  pointerMoved  Did pointer move?\r\n\t */\r\n\tpublic handleTransformMove(io: InteractionObject, point: IPoint, startPoint: IPoint, ev: MouseEvent | TouchEvent | KeyboardEvent, pointerMoved: boolean): void {\r\n\r\n\t\tif (pointerMoved) {\r\n\t\t\tif (io.events.isEnabled(\"drag\")) {\r\n\t\t\t\tlet imev: AMEvent<InteractionObject, IInteractionObjectEvents>[\"drag\"] = {\r\n\t\t\t\t\ttype: \"drag\",\r\n\t\t\t\t\ttarget: io,\r\n\t\t\t\t\tevent: ev,\r\n\t\t\t\t\tshift: {\r\n\t\t\t\t\t\t\"x\": point.x - startPoint.x,\r\n\t\t\t\t\t\t\"y\": point.y - startPoint.y\r\n\t\t\t\t\t},\r\n\t\t\t\t\tstartPoint: startPoint,\r\n\t\t\t\t\tpoint: point\r\n\t\t\t\t};\r\n\t\t\t\tio.events.dispatchImmediately(\"drag\", imev);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Handles resizing of the element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {InteractionObject}        io            Element\r\n\t * @param {IPoint}                   point1        Current position of reference point #1\r\n\t * @param {IPoint}                   startPoint1   Original position of reference point #1\r\n\t * @param {IPoint}                   point2        Current position of reference point #2\r\n\t * @param {IPoint}                   startPoint2   Original position of reference point #2\r\n\t * @param {MouseEvent | TouchEvent}  ev            Original event\r\n\t * @param {boolean}                  pointerMoved  Did pointer move?\r\n\t */\r\n\tpublic handleTransformResize(io: InteractionObject, point1: IPoint, startPoint1: IPoint, point2: IPoint, startPoint2: IPoint, ev: MouseEvent | TouchEvent, pointerMoved: boolean): void {\r\n\t\tif (io.events.isEnabled(\"resize\")) {\r\n\t\t\tlet imev: AMEvent<InteractionObject, IInteractionObjectEvents>[\"resize\"] = {\r\n\t\t\t\ttype: \"resize\",\r\n\t\t\t\ttarget: io,\r\n\t\t\t\tevent: ev,\r\n\t\t\t\tscale: $math.getScale(point1, startPoint1, point2, startPoint2),\r\n\t\t\t\tstartPoint1: startPoint1,\r\n\t\t\t\tpoint1: point1,\r\n\t\t\t\tstartPoint2: startPoint2,\r\n\t\t\t\tpoint2: point2\r\n\t\t\t};\r\n\t\t\tio.events.dispatchImmediately(\"resize\", imev);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Hdanles rotation of the element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {InteractionObject}        io            Element\r\n\t * @param {IPoint}                   point1        Current position of reference point #1\r\n\t * @param {IPoint}                   startPoint1   Original position of reference point #1\r\n\t * @param {IPoint}                   point2        Current position of reference point #2\r\n\t * @param {IPoint}                   startPoint2   Original position of reference point #2\r\n\t * @param {MouseEvent | TouchEvent}  ev            Original event\r\n\t * @param {boolean}                  pointerMoved  Did pointer move?\r\n\t */\r\n\tpublic handleTransformRotate(io: InteractionObject, point1: IPoint, startPoint1: IPoint, point2: IPoint, startPoint2: IPoint, ev: MouseEvent | TouchEvent, pointerMoved: boolean): void {\r\n\r\n\t\t// Prepare {InteractionEvent} object\r\n\t\tif (io.events.isEnabled(\"rotate\")) {\r\n\t\t\tlet imev: AMEvent<InteractionObject, IInteractionObjectEvents>[\"rotate\"] = {\r\n\t\t\t\ttype: \"rotate\",\r\n\t\t\t\ttarget: io,\r\n\t\t\t\tevent: ev,\r\n\t\t\t\tangle: $math.getRotation(point1, startPoint1, point2, startPoint2),\r\n\t\t\t\t// Set rotation point\r\n\t\t\t\t/*center: (io.draggable\r\n\t\t\t\t\t? $math.getMidPoint(point1, point2)\r\n\t\t\t\t\t: {\r\n\t\t\t\t\t\t\"x\": io.originalPosition.x,\r\n\t\t\t\t\t\t\"y\": io.originalPosition.y\r\n\t\t\t\t\t})*/\r\n\t\t\t};\r\n\r\n\t\t\tio.events.dispatchImmediately(\"rotate\", imev);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Handles all the preparations of the element when it starts to be dragged.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {InteractionObject}        io       Element\r\n\t * @param {IPointer}                 pointer  Pointer\r\n\t * @param {MouseEvent | TouchEvent}  ev       Original event\r\n\t */\r\n\tpublic processDragStart(io: InteractionObject, pointer?: IPointer, ev?: MouseEvent | TouchEvent): void {\r\n\t\t// Add to draggedObjects\r\n\t\tthis.transformedObjects.push(io);\r\n\r\n\t\t// Report \"dragstart\"\r\n\t\tlet imev: AMEvent<InteractionObject, IInteractionObjectEvents>[\"dragstart\"] = {\r\n\t\t\ttype: \"dragstart\",\r\n\t\t\ttarget: io,\r\n\t\t\tevent: ev\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * If pointer is set we will not fire the event until the pointer has\r\n\t\t * actually move. If it's not set we don't have to wait for anything, so we\r\n\t\t * just fire off the event right away.\r\n\t\t */\r\n\t\tif (pointer) {\r\n\t\t\tpointer.dragStartEvents.push(imev);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tio.dispatchImmediately(\"dragstart\", imev);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Finishes up element drag operation.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {InteractionObject}        io       Element\r\n\t * @param {IPointer}                 pointer  Pointer\r\n\t * @param {MouseEvent | TouchEvent}  ev       Original event\r\n\t */\r\n\tpublic processDragStop(io: InteractionObject, pointer?: IPointer, ev?: MouseEvent | TouchEvent): void {\r\n\r\n\t\t// Pointer set?\r\n\t\tif (!pointer) {\r\n\t\t\tpointer = this.getDragPointer(io);\r\n\t\t}\r\n\r\n\t\t// Removed from transformedObjects\r\n\t\tthis.transformedObjects.removeValue(io);\r\n\r\n\t\t// Unlock document\r\n\t\t//this.unlockDocument();\r\n\r\n\t\t// Report dragstop\r\n\t\tif (!pointer || this.moved(pointer, 0)) {\r\n\t\t\tif (io.events.isEnabled(\"dragstop\")) {\r\n\t\t\t\tlet imev: AMEvent<InteractionObject, IInteractionObjectEvents>[\"dragstop\"] = {\r\n\t\t\t\t\ttype: \"dragstop\",\r\n\t\t\t\t\ttarget: io\r\n\t\t\t\t};\r\n\t\t\t\tio.events.dispatchImmediately(\"dragstop\", imev);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * ==========================================================================\r\n\t * Controls for InteractionObjects initiating directly\r\n\t * ==========================================================================\r\n\t * @hidden\r\n\t */\r\n\r\n\t/**\r\n\t * Manually triggers drag start on the element. Could be useful in cases\r\n\t * where tracking or dragging one element can also influence dragging another\r\n\t * element.\r\n\t *\r\n\t * Passing in `pointer` reference is advisable. If not passed in it will try\r\n\t * to determine which pointer to attach to. However, it's better to specify\r\n\t * it explicitly.\r\n\t *\r\n\t * @param {InteractionObject}  io       Element\r\n\t * @param {IPointer}           pointer  Pointer\r\n\t */\r\n\tpublic dragStart(io: InteractionObject, pointer?: IPointer): void {\r\n\t\tif (pointer || (pointer = this.getDragPointer(io))) {\r\n\t\t\tthis.handleDown(io, pointer, pointer.lastDownEvent);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Manually ends drag on the element.\r\n\t *\r\n\t * @param {InteractionObject}  io       Element\r\n\t * @param {IPointer}           pointer  Pointer\r\n\t */\r\n\tpublic dragStop(io: InteractionObject, pointer?: IPointer): void {\r\n\t\tif (pointer || (pointer = this.getDragPointer(io))) {\r\n\t\t\tthis.handleUp(pointer, pointer.lastUpEvent);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * This method uses a fuzzy logic to find the pointer to be used for dragging.\r\n\t * Beware that this is not a rock-solid solution. If there are a few objects\r\n\t * being dragged at the same time, you may get unexepected results.\r\n\t *\r\n\t * @param  {InteractionObject}   io  InteractionObject to get pointers from\r\n\t * @return {Optional<IPointer>}      Pointer currently being used for dragging\r\n\t */\r\n\tpublic getDragPointer(io?: InteractionObject): $type.Optional<IPointer> {\r\n\t\tif (io) {\r\n\t\t\t// InteractionObject is supplied\r\n\t\t\t// Use it's first down pointer\r\n\t\t\treturn io.downPointers.getIndex(0);\r\n\t\t}\r\n\t\telse if (this.transformedObjects.length) {\r\n\t\t\t// Use first dragged object\r\n\t\t\treturn this.getDragPointer(this.transformedObjects.getIndex(0));\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * ==========================================================================\r\n\t * Utils\r\n\t * ==========================================================================\r\n\t * @hidden\r\n\t */\r\n\r\n\t/**\r\n\t * Returns pointer id for the given event object.\r\n\t *\r\n\t * @param  {any}     ev  Event\r\n\t * @return {string}      Pointer ID\r\n\t */\r\n\tprotected getPointerId(ev: any): string {\r\n\t\tif ($type.hasValue(ev.identifier)) {\r\n\t\t\treturn <string>ev.identifier;\r\n\t\t} else if ($type.hasValue(ev.pointerId)) {\r\n\t\t\treturn <string>ev.pointerId;\r\n\t\t} else {\r\n\t\t\treturn \"1\";\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns [[Pointer]] object that is associated with the Event.\r\n\t *\r\n\t * If no such [[Pointer]] object exists, it is created.\r\n\t *\r\n\t * @param  {MouseEvent | Touch}  ev  Event\r\n\t * @return {IPointer}                Pointer\r\n\t */\r\n\tprotected getPointer(ev: MouseEvent | Touch): IPointer {\r\n\r\n\t\t// Get pointer id\r\n\t\tlet id = this.getPointerId(ev);\r\n\r\n\t\t// Get current coordinates\r\n\t\tlet point: IPoint = {\r\n\t\t\t\"x\": ev.clientX,\r\n\t\t\t\"y\": ev.clientY\r\n\t\t};\r\n\r\n\t\t// Look for the pointer in the Dictionary if it maybe already exists\r\n\t\tlet pointer: IPointer;\r\n\t\tif (this.pointers.hasKey(id)) {\r\n\r\n\t\t\t// We already have such pointer\r\n\t\t\tpointer = this.pointers.getKey(id);\r\n\r\n\t\t\t// Reset pointer\r\n\t\t\tpointer.point = point;\r\n\r\n\t\t}\r\n\t\telse {\r\n\r\n\t\t\t// Init pointer\r\n\t\t\tpointer = {\r\n\t\t\t\t\"id\": id,\r\n\t\t\t\t//\"touch\": !(ev instanceof MouseEvent) || ((<any>ev).pointerType && (<any>ev).pointerType != \"pointer\"),\r\n\t\t\t\t\"touch\": !(ev instanceof MouseEvent) || ((<any>ev).pointerType && (<any>ev).pointerType != \"mouse\"),\r\n\t\t\t\t\"startPoint\": point,\r\n\t\t\t\t\"startTime\": new Date().getTime(),\r\n\t\t\t\t\"point\": point,\r\n\t\t\t\t\"track\": [],\r\n\t\t\t\t\"swipeCanceled\": false,\r\n\t\t\t\t\"dragStartEvents\": []\r\n\t\t\t};\r\n\r\n\t\t\t// Add first breadcrumb\r\n\t\t\tthis.addBreadCrumb(pointer, point);\r\n\r\n\t\t\t// Add for re-use later\r\n\t\t\tthis.pointers.setKey(id, pointer);\r\n\t\t}\r\n\r\n\t\t// Log last event\r\n\t\tpointer.lastEvent = ev;\r\n\r\n\t\treturn pointer;\r\n\t}\r\n\r\n\t/**\r\n\t * Resets the poiner to original state, i.e. cleans movement information,\r\n\t * starting point, etc.\r\n\t *\r\n\t * @param {IPointer} pointer Pointer\r\n\t */\r\n\tprotected resetPointer(pointer: IPointer): void {\r\n\t\tpointer.startTime = new Date().getTime();\r\n\t\tpointer.startPoint = pointer.point;\r\n\t\tpointer.track = [];\r\n\t\tpointer.swipeCanceled = false;\r\n\t\t//clearTimeout(pointer.swipeTimeout);\r\n\t\t//clearTimeout(pointer.holdTimeout);\r\n\t}\r\n\r\n\t/**\r\n\t * Adds a \"breadcrumb\" point to the [[Pointer]] to log its movement path.\r\n\t *\r\n\t * @param {IPointer}  pointer  Pointer\r\n\t * @param {IPoint}    point    Point coordinates\r\n\t */\r\n\tprotected addBreadCrumb(pointer: IPointer, point: IPoint): void {\r\n\t\tpointer.track.push({\r\n\t\t\t\"timestamp\": new Date().getTime(),\r\n\t\t\t\"point\": point\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Prepares the document for various touch-related operations.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic lockDocument(): void {\r\n\t\tthis.prepElement(this.body);\r\n\t}\r\n\r\n\t/**\r\n\t * Restores document functionality.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic unlockDocument(): void {\r\n\t\tif (this.transformedObjects.length == 0) {\r\n\t\t\tthis.restoreAllStyles(this.body);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Lock element (disable all touch)\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic lockElement(io: InteractionObject): void {\r\n\t\tthis.prepElement(io);\r\n\t}\r\n\r\n\t/**\r\n\t * Restores element's functionality.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic unlockElement(io: InteractionObject): void {\r\n\t\tthis.restoreAllStyles(io);\r\n\t}\r\n\r\n\t/**\r\n\t * Locks document's wheel scroll.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic lockWheel(): void {\r\n\t\twindow.addEventListener(this._pointerEvents.wheel, this.wheelLockEvent);\r\n\t}\r\n\r\n\t/**\r\n\t * Unlocks document's wheel scroll.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic unlockWheel(): void {\r\n\t\twindow.removeEventListener(this._pointerEvents.wheel, this.wheelLockEvent);\r\n\t}\r\n\r\n\t/**\r\n\t * A function that cancels mouse wheel scroll.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {MouseEvent}  ev  Event object\r\n\t * @return {boolean}         Returns `false` to cancel\r\n\t */\r\n\tprotected wheelLockEvent(ev: MouseEvent): boolean {\r\n\t\tev.preventDefault();\r\n\t\treturn false;\r\n\t}\r\n\r\n\t/**\r\n\t * Applies a set of styles to an element. Stores the original styles so they\r\n\t * can be restored later.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {InteractionObject}           io      Element\r\n\t * @param {Dictionary<string, string>}  styles  A Dictionary of style property and values\r\n\t */\r\n\tprotected prepElement(io: InteractionObject, permanent?: boolean): void {\r\n\r\n\t\tlet el = io.element;\r\n\r\n\t\tif (el) {\r\n\r\n\t\t\t// Define possible props\r\n\t\t\tlet props = [\r\n\t\t\t\t\"touchAction\", \"webkitTouchAction\", \"MozTouchAction\", \"MSTouchAction\", \"msTouchAction\", \"oTouchAction\",\r\n\t\t\t\t\"userSelect\", \"webkitUserSelect\", \"MozUserSelect\", \"MSUserSelect\", \"msUserSelect\", \"oUserSelect\",\r\n\t\t\t\t\"touchSelect\", \"webkitTouchSelect\", \"MozTouchSelect\", \"MSTouchSelect\", \"msTouchSelect\", \"oTouchSelect\",\r\n\t\t\t\t\"touchCallout\", \"webkitTouchCallout\", \"MozTouchCallout\", \"MSTouchCallout\", \"msTouchCallout\", \"oTouchCallout\",\r\n\t\t\t\t\"contentZooming\", \"webkitContentZooming\", \"MozContentZooming\", \"MSContentZooming\", \"msContentZooming\", \"oContentZooming\",\r\n\t\t\t\t\"userDrag\", \"webkitUserDrag\", \"MozUserDrag\", \"MSUserDrag\", \"msUserDrag\", \"oUserDrag\"\r\n\t\t\t];\r\n\t\t\tfor (let i = 0; i < props.length; i++) {\r\n\t\t\t\tif (props[i] in el.style) {\r\n\t\t\t\t\tthis.setTemporaryStyle(io, props[i], \"none\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Remove iOS-specific selection;\r\n\t\t\tthis.setTemporaryStyle(io, \"tapHighlightColor\", \"rgba(0, 0, 0, 0)\");\r\n\t\t\t//this.setTemporaryStyle(io, \"webkitOverflowScrolling\", \"none\");\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Cancels hold counting for the object.\r\n\t *\r\n\t * @param {InteractionObject} io Element\r\n\t */\r\n\tprotected cancelHold(io: InteractionObject): void {\r\n\t\t$iter.each(io.downPointers.iterator(), (pointer) => {\r\n\t\t\t//clearTimeout(pointer.holdTimeout);\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Cancels swipe.\r\n\t *\r\n\t * @param {InteractionObject} io Element\r\n\t */\r\n\tprotected cancelSwipe(io: InteractionObject): void {\r\n\t\t$iter.each(io.downPointers.iterator(), (pointer) => {\r\n\t\t\t//clearTimeout(pointer.swipeTimeout);\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Returns an option associated with hit events.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {InteractionObject}  io      Element\r\n\t * @param  {string}             option  Option key\r\n\t * @return {any}                        Option value\r\n\t */\r\n\tpublic getHitOption(io: InteractionObject, option: keyof IHitOptions): any {\r\n\t\tlet res = io.hitOptions[option];\r\n\t\tif (typeof res === \"undefined\") {\r\n\t\t\tres = this.hitOptions[option];\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns an option associated with hover events.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {InteractionObject}  io      Element\r\n\t * @param  {string}             option  Option key\r\n\t * @return {any}                        Option value\r\n\t */\r\n\tpublic getHoverOption(io: InteractionObject, option: keyof IHoverOptions): any {\r\n\t\tlet res = io.hoverOptions[option];\r\n\t\tif (typeof res === \"undefined\") {\r\n\t\t\tres = this.hoverOptions[option];\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns an option associated with swipe events.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {InteractionObject}  io      Element\r\n\t * @param  {string}             option  Option key\r\n\t * @return {any}                        Option value\r\n\t */\r\n\tpublic getSwipeOption(io: InteractionObject, option: keyof ISwipeOptions): any {\r\n\t\tlet res = io.swipeOptions[option];\r\n\t\tif (typeof res === \"undefined\") {\r\n\t\t\tres = this.swipeOptions[option];\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns an option for keyboard.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {InteractionObject}  io      Element\r\n\t * @param  {string}             option  Option key\r\n\t * @return {any}                        Option value\r\n\t */\r\n\tpublic getKeyboardOption(io: InteractionObject, option: keyof IKeyboardOptions): any {\r\n\t\tlet res = io.keyboardOptions[option];\r\n\t\tif (typeof res === \"undefined\") {\r\n\t\t\tres = this.keyboardOptions[option];\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns an option associated with inertia.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {InteractionObject}  io      Element\r\n\t * @param  {InertiaTypes}       type    Inertia type\r\n\t * @param  {string}             option  Option key\r\n\t * @return {any}                        Option value\r\n\t */\r\n\tpublic getInertiaOption(io: InteractionObject, type: InertiaTypes, option: keyof IInertiaOptions): any {\r\n\t\tlet options: any = io.inertiaOptions.getKey(type);\r\n\t\tlet res: IInertiaOptions;\r\n\t\tif (options && $type.hasValue(options[type])) {\r\n\t\t\tres = options[type];\r\n\t\t}\r\n\t\telse {\r\n\t\t\tres = (<any>this.inertiaOptions.getKey(type))[option];\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * Stops currently going on inertia. Useful if inertia is currently being\r\n\t * animated and the object is being interacted with.\r\n\t *\r\n\t * @param {InteractionObject} io Element\r\n\t */\r\n\tprotected stopInertia(io: InteractionObject): void {\r\n\t\tlet x: InertiaTypes;\r\n\t\tlet inertias: Array<InertiaTypes> = [\"move\", \"resize\", \"rotate\"];\r\n\t\tfor (let i = 0; i < inertias.length; i++) {\r\n\t\t\tx = inertias[i];\r\n\t\t\tif (io.inertias.hasKey(x)) {\r\n\t\t\t\tlet inertia: $type.Optional<Inertia> = io.inertias.getKey(x);\r\n\t\t\t\tif (inertia) {\r\n\t\t\t\t\tinertia.dispose();\r\n\t\t\t\t\t//io.inertiaAnimations.removeKey(x);\r\n\t\t\t\t\t//this.processDragStop(io);\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Check if swiping is currently being performed on an object.\r\n\t *\r\n\t * @param  {InteractionObject}  io       Element\r\n\t * @param  {IPointer}           pointer  Pointer to check\r\n\t * @return {boolean}                     `true` if swiping\r\n\t */\r\n\tpublic swiping(io: InteractionObject, pointer: IPointer): boolean {\r\n\t\tlet now = new Date().getTime();\r\n\r\n\t\tif (pointer.swipeCanceled || !io.swipeable) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\telse if (\r\n\t\t\t(Math.abs(pointer.startPoint.y - pointer.point.y) < this.getSwipeOption(io, \"verticalThreshold\")) &&\r\n\t\t\t(pointer.startTime > (now - this.getSwipeOption(io, \"time\")))\r\n\t\t) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns `true` if a successfull swipe action was performed on an element.\r\n\t *\r\n\t * @param  {InteractionObject}  io       Element\r\n\t * @param  {IPointer}           pointer  Pointer\r\n\t * @return {boolean}                     Swiped?\r\n\t */\r\n\tpublic swiped(io: InteractionObject, pointer: IPointer): boolean {\r\n\t\tlet now = new Date().getTime();\r\n\t\tif (pointer.swipeCanceled) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\telse if (\r\n\t\t\t(Math.abs(pointer.startPoint.x - pointer.point.x) > this.getSwipeOption(io, \"horizontalThreshold\")) &&\r\n\t\t\t(Math.abs(pointer.startPoint.y - pointer.point.y) < this.getSwipeOption(io, \"verticalThreshold\")) &&\r\n\t\t\t(pointer.startTime > (now - this.getSwipeOption(io, \"time\")))\r\n\t\t) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Applies style to mouse cursor based on its stage in relation to\r\n\t * [[InteractionObject]].\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {InteractionObject}   Element\r\n\t */\r\n\tpublic applyCursorOverStyle(io: InteractionObject): void {\r\n\r\n\t\t// Get sprite's cursor ooptions\r\n\t\tlet options = io.cursorOptions;\r\n\r\n\t\tif (!$type.hasValue(options.overStyle)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Apply cursor down styles\r\n\t\tfor (let i = 0; i < options.overStyle.length; i++) {\r\n\t\t\t$dom.setStyle(io.element, options.overStyle[i].property, options.overStyle[i].value);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Applies style to mouse cursor based on its stage in relation to\r\n\t * [[InteractionObject]].\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {InteractionObject}  io       Element\r\n\t * @param {IPointer}           pointer  Pointer\r\n\t */\r\n\tpublic applyCursorDownStyle(io: InteractionObject, pointer: IPointer): void {\r\n\r\n\t\t// Not applicable for touch pointers since they don't display a cursor\r\n\t\tif (pointer.touch) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst downStyle = io.cursorOptions.downStyle;\r\n\r\n\t\t// Is down?\r\n\t\tif (io.downPointers.contains(pointer) && $type.hasValue(downStyle)) {\r\n\t\t\t// Apply cursor down styles\r\n\t\t\tfor (let i = 0; i < downStyle.length; i++) {\r\n\t\t\t\tthis.setTemporaryStyle(this.body, downStyle[i].property, downStyle[i].value);\r\n\t\t\t\tthis.setTemporaryStyle(io, downStyle[i].property, downStyle[i].value);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Restores original cursor style for the element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {InteractionObject}  io       Element\r\n\t * @param {IPointer}           pointer  Pointer\r\n\t */\r\n\tpublic restoreCursorDownStyle(io: InteractionObject, pointer: IPointer): void {\r\n\r\n\t\t// Not applicable for touch pointers since they don't display a cursor\r\n\t\tif (pointer.touch) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst downStyle = io.cursorOptions.downStyle;\r\n\r\n\t\t// Is down?\r\n\t\tif (io.downPointers.contains(pointer) && $type.hasValue(downStyle)) {\r\n\t\t\t// Apply cursor down styles\r\n\t\t\tfor (let i = 0; i < downStyle.length; i++) {\r\n\t\t\t\tthis.restoreStyle(this.body, downStyle[i].property);\r\n\t\t\t\tthis.restoreStyle(io, downStyle[i].property);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Sets style on the body of the document.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {Array<IStyleProperty> | IStyleProperty}  style  Style definitions\r\n\t */\r\n\tpublic setGlobalStyle(style: Array<IStyleProperty> | IStyleProperty): void {\r\n\t\tlet styles = <Array<IStyleProperty>>($type.isArray(style) ? style : [style]);\r\n\t\tfor (let i = 0; i < styles.length; i++) {\r\n\t\t\tthis.setTemporaryStyle(interaction.body, styles[i].property, styles[i].value);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Restores style on the body of the document.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {Array<IStyleProperty> | IStyleProperty}  style  Style definitions\r\n\t */\r\n\tpublic restoreGlobalStyle(style: Array<IStyleProperty> | IStyleProperty): void {\r\n\t\tlet styles = <Array<IStyleProperty>>($type.isArray(style) ? style : [style]);\r\n\t\tfor (let i = 0; i < styles.length; i++) {\r\n\t\t\tthis.restoreStyle(interaction.body, styles[i].property);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if element is a non-cahrt element.\r\n\t *\r\n\t * @param  {InteractionObject}  io  InteractionObject\r\n\t * @return {boolean}                Global element?\r\n\t */\r\n\tprotected isGlobalElement(io: InteractionObject): boolean {\r\n\t\treturn document.body === io.element;\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if pointer has moved since it was created.\r\n\t *\r\n\t * @param  {IPointer}  pointer    Pointer\r\n\t * @param  {number}    tolerance  Tolerance in pixels\r\n\t * @return {boolean}              `true` if the pointer has moved\r\n\t */\r\n\tpublic moved(pointer: IPointer, tolerance: number): boolean {\r\n\t\tlet shift = this.getShift(pointer);\r\n\t\treturn (Math.abs(shift.x) > tolerance) || (Math.abs(shift.y) > tolerance);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns total a shift in pointers coordinates between its original\r\n\t * position and now.\r\n\t *\r\n\t * @param  {IPointer}  pointer  Pointer\r\n\t * @return {IPoint}             Shift in coordinates (x/y)\r\n\t */\r\n\tpublic getShift(pointer: IPointer): IPoint {\r\n\t\treturn {\r\n\t\t\t\"x\": pointer.startPoint.x - pointer.point.x,\r\n\t\t\t\"y\": pointer.startPoint.y - pointer.point.y\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a point from [[Pointer]]'s move history at a certain timetamp.\r\n\t *\r\n\t * @param  {IPointer}               pointer    Pointer\r\n\t * @param  {number}                 timestamp  Timestamp\r\n\t * @return {Optional<IBreadcrumb>}             Point\r\n\t */\r\n\tpublic getTrailPoint(pointer: IPointer, timestamp: number): $type.Optional<IBreadcrumb> {\r\n\t\tlet res: $type.Optional<IBreadcrumb>;\r\n\t\tfor (let i = 0; i < pointer.track.length; i++) {\r\n\t\t\tif (pointer.track[i].timestamp >= timestamp) {\r\n\t\t\t\tres = pointer.track[i];\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if same pointer already exists in the list.\r\n\t *\r\n\t * @param  {List<IPointer>}  list     List to check agains\r\n\t * @param  {IPointer}        pointer  Pointer\r\n\t * @return {boolean}                  Exists?\r\n\t */\r\n\tprotected pointerExists(list: List<IPointer>, pointer: IPointer): boolean {\r\n\t\tlet exists = false;\r\n\t\tlist.each((item) => {\r\n\t\t\texists = item.point.x == pointer.point.x && item.point.y == pointer.point.y;\r\n\t\t});\r\n\t\treturn exists;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns an [[InteractionObject]] representation of a DOM element.\r\n\t *\r\n\t * You can use this on any HTML or SVG element, to add interactive features\r\n\t * to it.\r\n\t *\r\n\t * @param  {HTMLElement | SVGSVGElement}  element  Element\r\n\t * @return {InteractionObject}                     InteractionObject\r\n\t */\r\n\tpublic getInteraction(element: HTMLElement | SVGSVGElement): InteractionObject {\r\n\t\treturn new InteractionObject(element);\r\n\t}\r\n\r\n\t/**\r\n\t * Sets a style property on an element. Stores original value to be restored\r\n\t * later with [[restoreStyle]].\r\n\t *\r\n\t * @see {@link restoreStyle}\r\n\t * @param {InteractionObject}  io        Element\r\n\t * @param {string}             property  Property\r\n\t * @param {string}             value     Value\r\n\t */\r\n\tpublic setTemporaryStyle(io: InteractionObject, property: string, value: string): void {\r\n\r\n\t\t// Get element\r\n\t\t//let el = io.element.tagName == \"g\" ? <SVGSVGElement>io.element.parentNode : io.element;\r\n\t\tlet el = io.element;\r\n\r\n\t\t// Save original property if it is set and hasn't been saved before already\r\n\t\tif ($type.hasValue((<any>el.style)[property]) && !io.replacedStyles.hasKey(property)) {\r\n\t\t\tio.replacedStyles.setKey(property, (<any>el.style)[property]);\r\n\t\t}\r\n\r\n\t\t// Replace with the new one\r\n\t\t$dom.setStyle(el, property, value);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Restores specific style on an element.\r\n\t *\r\n\t * @param {InteractionObject}  io        Element\r\n\t * @param {string}             property  Style property\r\n\t */\r\n\tpublic restoreStyle(io: InteractionObject, property: string): void {\r\n\r\n\t\t// Reset style\r\n\t\tif (io.replacedStyles.hasKey(property)) {\r\n\t\t\t(<any>io.element.style)[property] = io.replacedStyles.getKey(property);\r\n\t\t\tio.replacedStyles.removeKey(property);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tdelete (<any>io.element.style)[property];\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Restore temporarily reset styles on an element.\r\n\t *\r\n\t * @param {InteractionObject} io Element\r\n\t */\r\n\tpublic restoreAllStyles(io: InteractionObject): void {\r\n\t\t$iter.each(io.replacedStyles.iterator(), (a) => {\r\n\t\t\tconst key = a[0];\r\n\t\t\tconst value = a[1];\r\n\t\t\t(<any>io.element.style)[key] = value;\r\n\t\t\tio.replacedStyles.removeKey(key);\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Processes dalyed events, such as \"out\" event that was initiated for\r\n\t * elements by touch.\r\n\t */\r\n\tprivate processDelayed(): void {\r\n\r\n\t\tlet delayedEvent;\r\n\t\twhile (delayedEvent = this._delayedEvents.out.shift()) {\r\n\t\t\tif (delayedEvent.timeout) {\r\n\t\t\t\tclearTimeout(delayedEvent.timeout);\r\n\t\t\t}\r\n\t\t\tthis.handleOut(delayedEvent.io, delayedEvent.pointer, delayedEvent.event, true);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Disposes this object and cleans up after itself.\r\n\t */\r\n\tpublic dispose(): void {\r\n\t\tif (!this.isDisposed) {\r\n\t\t\tsuper.dispose();\r\n\t\t\tthis.restoreAllStyles(this.body);\r\n\t\t\tthis.unlockWheel();\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\n\r\nlet interaction: Interaction | null = null;\r\n\r\n/**\r\n * Returns a single unified global instance of [[Interaction]].\r\n *\r\n * All code should use this function, rather than create their own instances\r\n * of [[Interaction]].\r\n */\r\nexport function getInteraction(): Interaction {\r\n\tif (interaction == null) {\r\n\t\tinteraction = new Interaction();\r\n\t}\r\n\r\n\treturn interaction;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/interaction/Interaction.ts","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_has.js\n// module id = 34\n// module chunks = 26","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject');\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_to-iobject.js\n// module id = 35\n// module chunks = 26","var pIE = require('./_object-pie');\nvar createDesc = require('./_property-desc');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar has = require('./_has');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nexports.f = require('./_descriptors') ? gOPD : function getOwnPropertyDescriptor(O, P) {\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return gOPD(O, P);\n  } catch (e) { /* empty */ }\n  if (has(O, P)) return createDesc(!pIE.f.call(O, P), O[P]);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_object-gopd.js\n// module id = 36\n// module chunks = 26","// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has = require('./_has');\nvar toObject = require('./_to-object');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectProto : null;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_object-gpo.js\n// module id = 37\n// module chunks = 26","/**\r\n * Animation module.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { BaseObjectEvents, IBaseObjectEvents } from \"../Base\";\r\nimport { EventDispatcher, AMEvent } from \"../utils/EventDispatcher\";\r\nimport { SVGDefaults } from \"../defs/SVGDefaults\";\r\nimport { Disposer, IDisposer } from \"../utils/Disposer\";\r\nimport { registry } from \"../Registry\";\r\nimport { Color } from \"../utils/Color\";\r\nimport { Percent, percent } from \"../utils/Percent\";\r\nimport * as $async from \"../utils/AsyncPending\";\r\nimport * as $ease from \"../utils/Ease\";\r\nimport * as $colors from \"../utils/Colors\";\r\nimport * as $math from \"../utils/Math\";\r\nimport * as $array from \"../utils/Array\";\r\nimport * as $type from \"../utils/Type\";\r\n\r\n/**\r\n * Defines interface for animation objects.\r\n *\r\n * Should at least contain `update()` method.\r\n */\r\nexport interface IAnimationObject {\r\n\tupdate: () => void\r\n}\r\n\r\n/**\r\n * Defines interface for objects that can be animated\r\n */\r\nexport interface IAnimatable {\r\n\tanimations: Array<Animation>;\r\n}\r\n\r\n\r\nexport type IAnimationOption = Color | Percent | number | string | boolean;\r\n\r\n/**\r\n * Defines interface for animation options.\r\n */\r\nexport interface IAnimationOptions {\r\n\r\n\t/**\r\n\t * An initial value to animate from.\r\n\t *\r\n\t * If omitted, the source value will be current value.\r\n\t *\r\n\t * @type {Color | Percent | number | string | boolean}\r\n\t */\r\n\tfrom?: IAnimationOption;\r\n\r\n\t/**\r\n\t * A target value to animate from.\r\n\t *\r\n\t * @type {Color | Percent | number | string | boolean}\r\n\t */\r\n\tto: IAnimationOption;\r\n\r\n\t/**\r\n\t * Property name to animate.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tproperty?: any;\r\n\r\n\t/**\r\n\t * If current values should be taken from different object than the target\r\n\t * element of the animation, this property should be set to that object.\r\n\t *\r\n\t * @type {object}\r\n\t */\r\n\tchildObject?: { [index: string]: any };\r\n\r\n\t/**\r\n\t * A method/function reference that will be called to for updating the\r\n\t * property value.\r\n\t *\r\n\t * @type {function}\r\n\t */\r\n\tupdateMethod?: (progress: number, from: IAnimationOption, to: IAnimationOption) => IAnimationOption;\r\n\r\n\r\n\t/**\r\n\t * sometimes we need to pass some dummy data in animationOptions\r\n\t * @type {any}\r\n\t */\r\n\tdummyData?:any;\r\n\r\n}\r\n\r\n/**\r\n * An interface for an object defining [[Percent]] animation.\r\n */\r\nexport interface IPercentAnimationOptions extends IAnimationOptions {\r\n\r\n\t/**\r\n\t * Initial value.\r\n\t *\r\n\t * @type {Percent}\r\n\t */\r\n\tfrom?: Percent;\r\n\r\n\t/**\r\n\t * Target value.\r\n\t *\r\n\t * @type {Percent}\r\n\t */\r\n\tto: Percent;\r\n\r\n}\r\n\r\n/**\r\n * An interface for an object defining [[Color]] animation.\r\n */\r\nexport interface IColorAnimationOptions extends IAnimationOptions {\r\n\r\n\t/**\r\n\t * Initial value.\r\n\t *\r\n\t * @type {Color}\r\n\t */\r\n\tfrom?: Color;\r\n\r\n\t/**\r\n\t * Target value.\r\n\t *\r\n\t * @type {Color}\r\n\t */\r\n\tto: Color;\r\n\r\n}\r\n\r\n\r\n/**\r\n * Calls a `callback` function for the `duration` of milliseconds.\r\n *\r\n * @todo Needed?\r\n * @deprecated Not used anywhere\r\n * @ignore Exclude from docs\r\n * @param  {number}     duration  Duration (ms)\r\n * @param  {function}   callback  Callback function\r\n * @return {IDisposer}            Disposer\r\n */\r\nexport function animate(duration: number, callback: (time: number) => void): IDisposer {\r\n\tlet disposed = false;\r\n\r\n\t// TODO use performance.now() ?\r\n\tconst startTime = Date.now();\r\n\r\n\tfunction loop(now: number): void {\r\n\t\tif (!disposed) {\r\n\t\t\tconst diff = now - startTime;\r\n\r\n\t\t\tif (diff >= duration) {\r\n\t\t\t\tcallback(1);\r\n\r\n\t\t\t} else {\r\n\t\t\t\t$async.nextFrame(loop);\r\n\t\t\t\tcallback(diff / duration);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t$async.nextFrame(loop);\r\n\r\n\treturn new Disposer(() => {\r\n\t\tdisposed = true;\r\n\t});\r\n}\r\n\r\n\r\n/**\r\n * Defines events for [[Animation]].\r\n */\r\nexport interface IAnimationEvents extends IBaseObjectEvents {\r\n\r\n\t/**\r\n\t * Invoked when animation starts playing.\r\n\t */\r\n\tanimationstarted: {\r\n\t\tprogress: number;\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when animation finishes playing.\r\n\t */\r\n\tanimationended: {\r\n\t\tprogress: number;\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when animation makes progress.\r\n\t */\r\n\tanimationprogress: {\r\n\t\tprogress: number;\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when animation is stopped by some other process, before it had\r\n\t * a chance to finish.\r\n\t */\r\n\tanimationstopped: {\r\n\t\tprogress: number;\r\n\t};\r\n\r\n}\r\n\r\n/**\r\n * Holds the list of currently playing animations.\r\n *\r\n * @ignore Exclude from docs\r\n * @type {Array<IAnimationObject>}\r\n */\r\nexport const animations: Array<IAnimationObject> = [];\r\n\r\n\r\n/**\r\n * Returns numeric value accoring to progress between start and end values.\r\n *\r\n * @param  {number}  progress  Progress (0-1)\r\n * @param  {number}  from\r\n * @param  {number}  to\r\n * @return {number}            Value according to progress\r\n */\r\nfunction getProgressNumber(progress: number, from: number, to: number): number {\r\n\treturn from + ((to - from) * progress);\r\n}\r\n\r\n/**\r\n * Returns [[Percent]] value accoring to progress between start and end\r\n * values.\r\n *\r\n * @param  {number}   progress  Progress (0-1)\r\n * @param  {Percent}  from\r\n * @param  {Percent}  to\r\n * @return {number}             Value according to progress\r\n */\r\nfunction getProgressPercent(progress: number, from: Percent, to: Percent): Percent {\r\n\treturn new Percent(getProgressNumber(progress, from.percent, to.percent));\r\n}\r\n\r\n/**\r\n * Returns color value accoring to progress between start and end values.\r\n *\r\n * @param  {number}  progress  Progress (0-1)\r\n * @param  {Color}   from\r\n * @param  {Color}   to\r\n * @return {string}            Color according to progress\r\n */\r\nfunction getProgressColor(progress: number, from: Color, to: Color): Color {\r\n\treturn new Color($colors.interpolate(from.rgb, to.rgb, progress));\r\n}\r\n\r\n/**\r\n * [getHybridProperty description]\r\n *\r\n * @todo Description\r\n * @param  {string}     property [description]\r\n * @param  {\"pixel\" |        \"relative\"}  type [description]\r\n * @return {string}              [description]\r\n */\r\nfunction getHybridProperty(property: string, type: \"pixel\" | \"relative\"): string {\r\n\treturn type + property.charAt(0).toUpperCase() + property.substr(1);\r\n}\r\n\r\n\r\ninterface ProcessedAnimationOption {\r\n\tchildObject: any;\r\n\tproperty: any;\r\n\tupdate: (time: number) => void;\r\n}\r\n\r\nfunction processAnimationOptions<A>(\r\n\tobject: A,\r\n\tanimationOptions: IAnimationOptions[] | IAnimationOptions\r\n): Array<ProcessedAnimationOption> {\r\n\r\n\tconst processed: Array<ProcessedAnimationOption> = [];\r\n\r\n\t$array.each($array.toArray(animationOptions), (options) => {\r\n\t\tconst childObject = (options.childObject ? options.childObject : object);\r\n\r\n\t\tif (!$type.hasValue(options.from)) {\r\n\t\t\toptions.from = childObject[options.property];\r\n\r\n\t\t\tif (!$type.hasValue(options.from)) {\r\n\t\t\t\toptions.from = (<any>SVGDefaults)[options.property];\r\n\t\t\t}\r\n\r\n\t\t\t/*if (!$type.hasValue(options.from)) {\r\n\t\t\t\tthrow Error(\"Could not get initial transition value.\");\r\n\t\t\t}*/\r\n\t\t}\r\n\r\n\t\tif (options.from !== options.to) { // || options.to == (<any>object)[options.property]){ this is not good, as dataItem.value is set to final at once, and we animate workingValue\r\n\t\t\t// Use different update methods for different value types\r\n\t\t\tif ($type.isNumber(options.to)) {\r\n\t\t\t\t// Check if initial value is not Percent\r\n\t\t\t\tif (options.from instanceof Percent) {\r\n\t\t\t\t\t// It is. Let's convert it to pixel value\r\n\t\t\t\t\t// @todo Check if we can do this in a less hacky way\r\n\t\t\t\t\tlet convertedFrom: number = childObject[getHybridProperty(options.property, \"pixel\")];\r\n\r\n\t\t\t\t\t// TODO better check\r\n\t\t\t\t\tif (!isNaN(convertedFrom)) {\r\n\t\t\t\t\t\toptions.from = convertedFrom;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tprocessed.push({\r\n\t\t\t\t\tchildObject: childObject,\r\n\t\t\t\t\tproperty: options.property,\r\n\t\t\t\t\tupdate: (time) => {\r\n\t\t\t\t\t\tchildObject[options.property] = getProgressNumber(time, <any>options.from, <any>options.to);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t// Check if maybe we have a color or percent value\r\n\t\t\t} else if (options.to instanceof Color) {\r\n\t\t\t\t// Yup - set resolved named color\r\n\t\t\t\t//options.from = $colors.stringToColor(<string>options.from);\r\n\t\t\t\tif (options.from) {\r\n\t\t\t\t\tprocessed.push({\r\n\t\t\t\t\t\tchildObject: childObject,\r\n\t\t\t\t\t\tproperty: options.property,\r\n\t\t\t\t\t\tupdate: (time) => {\r\n\t\t\t\t\t\t\tchildObject[options.property] = getProgressColor(time, <any>options.from, <any>options.to);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tprocessed.push({\r\n\t\t\t\t\t\tchildObject: childObject,\r\n\t\t\t\t\t\tproperty: options.property,\r\n\t\t\t\t\t\tupdate: (time) => {\r\n\t\t\t\t\t\t\tchildObject[options.property] = (time < 0.5 ? options.from : options.to);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if (options.to instanceof Percent) {\r\n\t\t\t\t// Check if the initial value is maybe in pixels\r\n\t\t\t\t// TODO better check\r\n\t\t\t\tif (!isNaN(<number>options.from)) {\r\n\t\t\t\t\t// It is. Let's convert it\r\n\t\t\t\t\t// @todo Check if we can do this in a less hacky way\r\n\t\t\t\t\tlet convertedFrom: number = childObject[getHybridProperty(options.property, \"relative\")];\r\n\r\n\t\t\t\t\t// TODO better check\r\n\t\t\t\t\tif (!isNaN(convertedFrom)) {\r\n\t\t\t\t\t\toptions.from = percent(convertedFrom * 100);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tprocessed.push({\r\n\t\t\t\t\tchildObject: childObject,\r\n\t\t\t\t\tproperty: options.property,\r\n\t\t\t\t\tupdate: (time) => {\r\n\t\t\t\t\t\tchildObject[options.property] = getProgressPercent(time, <any>options.from, <any>options.to);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t} else {\r\n\t\t\t\tprocessed.push({\r\n\t\t\t\t\tchildObject: childObject,\r\n\t\t\t\t\tproperty: options.property,\r\n\t\t\t\t\tupdate: (time) => {\r\n\t\t\t\t\t\tchildObject[options.property] = (time < 0.5 ? options.from : options.to);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\treturn processed;\r\n}\r\n\r\n\r\nexport class AnimationDisposer implements IDisposer {\r\n\tprivate _disposer: Disposer;\r\n\r\n\tconstructor(array: Array<Animation>) {\r\n\t\tthis._disposer = new Disposer(() => {\r\n\t\t\twhile (array.length !== 0) {\r\n\t\t\t\tarray[0].dispose();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tisDisposed(): boolean {\r\n\t\treturn this._disposer.isDisposed();\r\n\t}\r\n\r\n\tdispose(): void {\r\n\t\tthis._disposer.dispose();\r\n\t}\r\n}\r\n\r\n\r\n/**\r\n * Animation can be used to transition certain properties on an object that\r\n * implements [[IAnimatable]] interface.\r\n *\r\n * @see {@link IAnimationEvents} for a list of available events\r\n */\r\nexport class Animation extends BaseObjectEvents implements IAnimationObject {\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IAnimationEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IAnimationEvents;\r\n\r\n\t/**\r\n\t * An animation target object. [[Animation]] will update properties of\r\n\t * this object.\r\n\t *\r\n\t * @type {IAnimatable}\r\n\t */\r\n\tpublic object: IAnimatable;\r\n\r\n\t/**\r\n\t * An array of animation option objects. Each animation object represent\r\n\t * one property. Animation can animate any number of properties\r\n\t * simultaneously.\r\n\t *\r\n\t * @type {IAnimationOptions[]}\r\n\t */\r\n\tpublic animationOptions: IAnimationOptions[];\r\n\r\n\t/**\r\n\t * Duration of the animation in milliseconds.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tpublic duration: number = 0;\r\n\r\n\t/**\r\n\t * Easing function to use.\r\n\t *\r\n\t * @see {@link Ease}\r\n\t * @type {(value: number) => number}\r\n\t */\r\n\tpublic easing: (value: number) => number = $ease.linear;\r\n\r\n\t/**\r\n\t * Contains progress of the current animation: 0 (start) to 1 (end).\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tpublic progress: number = 0;\r\n\r\n\t/**\r\n\t * A list of options that cannot be animated. Those will be applied when\r\n\t * Animation ends.\r\n\t *\r\n\t * @type {IAnimationOptions[]}\r\n\t */\r\n\tprotected staticOptions!: IAnimationOptions[];\r\n\r\n\t/**\r\n\t * Indicated how many times animation should loop.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tprotected _loop: number = 0;\r\n\r\n\t/**\r\n\t * Animation is paused.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tprotected _pause: boolean = false;\r\n\r\n\t/**\r\n\t * Holds reference to timeout for delayed play.\r\n\t *\r\n\t * @type {IDisposer}\r\n\t */\r\n\tprotected _delayTimeout: $type.Optional<IDisposer>;\r\n\r\n\t/**\r\n\t * A timestamp of when animation started playing.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tprotected _startTime: $type.Optional<number>;\r\n\r\n\t/**\r\n\t * Elapsed time in currently playing animation.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tprotected _time: $type.Optional<number>;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t *\r\n\t * @param {IAnimatable}                              object            An object animation should run on\r\n\t * @param {IAnimationOptions[] | IAnimationOptions}  animationOptions  One or several (array) of animation options\r\n\t * @param {number}                                   duration          Duration (ms)\r\n\t * @param {(number) => number}                       easing            Easing function\r\n\t */\r\n\tconstructor(object: IAnimatable, animationOptions: IAnimationOptions[] | IAnimationOptions, duration: number, easing?: (value: number) => number) {\r\n\r\n\t\t// Init\r\n\t\tsuper();\r\n\t\tthis.className = \"Animation\";\r\n\r\n\t\t// Set parameters\r\n\t\tthis.object = object;\r\n\t\tthis.animationOptions = $array.toArray(animationOptions);\r\n\t\tthis.duration = duration;\r\n\t\tif (easing) {\r\n\t\t\tthis.easing = easing;\r\n\t\t}\r\n\r\n\t\t// Run check if there are already animations playing on the same properties\r\n\t\t// and stop them - the last animation takes precedence\r\n\t\t//this.stopSameAnimations();\r\n\r\n\t\t/*if ($type.hasValue(callback)) {\r\n\t\t\t// TODO don't use .call\r\n\t\t\tthis.events.on(\"animationended\", callback, object);\r\n\t\t}*/\r\n\r\n\t\t// Apply theme\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Disposes this object, clears up after itself.\r\n\t */\r\n\tpublic dispose(): void {\r\n\t\tsuper.dispose();\r\n\t\tthis.pause();\r\n\t}\r\n\r\n\t/**\r\n\t * Delays animation start by X milliseconds.\r\n\t *\r\n\t * @param  {number}     delay  Delay (ms)\r\n\t * @return {Animation}         Animation\r\n\t */\r\n\tpublic delay(delay: number): Animation {\r\n\t\t//@todo Maybe not use `bind()`\r\n\t\tif (delay > 0) {\r\n\t\t\tthis.pause();\r\n\t\t\tthis._delayTimeout = this.setTimeout(this.start.bind(this), delay);\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\r\n\tprivate _start() {\r\n\t\t// Clear delay timeout if there was one\r\n\t\tif (this._delayTimeout) {\r\n\t\t\tthis.removeDispose(this._delayTimeout);\r\n\t\t\tthis._delayTimeout = null;\r\n\t\t}\r\n\r\n\t\t// Run check if there are already animations playing on the same properties\r\n\t\t// and stop them - the last animation takes precedence\r\n\t\tthis.stopSameAnimations();\r\n\r\n\t\t// Reset counters\r\n\t\tthis._pause = false;\r\n\r\n\t\t// Register animation\r\n\t\t$array.move(animations, this);\r\n\r\n\t\t// Register this animation in object's `animations` list\r\n\t\t$array.move(this.object.animations, this);\r\n\t}\r\n\r\n\t/**\r\n\t * Starts animation.\r\n\t *\r\n\t * @return {Animation} Animation\r\n\t */\r\n\tpublic start(): Animation {\r\n\t\tthis._start();\r\n\t\tthis._startTime = Date.now();\r\n\t\tthis._time = 0;\r\n\t\tthis.staticOptions = [];\r\n\r\n\t\t// Process initial property values\r\n\t\tfor (let i: number = this.animationOptions.length - 1; i >= 0; i--) {\r\n\t\t\tlet options: IAnimationOptions = this.animationOptions[i];\r\n\t\t\tif (!$type.hasValue(options.from)) {\r\n\t\t\t\tif (options.childObject) {\r\n\t\t\t\t\toptions.from = options.childObject[options.property];\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\toptions.from = (<any>this.object)[options.property];\r\n\r\n\t\t\t\t\tif (!$type.hasValue(options.from)) {\r\n\t\t\t\t\t\toptions.from = (<any>SVGDefaults)[options.property];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/*if (!$type.hasValue(options.from)) {\r\n\t\t\t\t\tthrow Error(\"Could not get initial transition value.\");\r\n\t\t\t\t}*/\r\n\t\t\t}\r\n\r\n\t\t\tif (options.from == options.to) { // || options.to == (<any>this.object)[options.property]){ this is not good, as dataItem.value is set to final at once, and we animate workingValue\r\n\t\t\t\t$array.remove(this.animationOptions, options);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// Use different update methods for different value types\r\n\t\t\t\tif ($type.isNumber(<number>options.to)) {\r\n\r\n\t\t\t\t\t// Numeric value\r\n\t\t\t\t\toptions.updateMethod = getProgressNumber;\r\n\r\n\t\t\t\t\t// Check if initial value is not Percent\r\n\t\t\t\t\tif (options.from instanceof Percent) {\r\n\t\t\t\t\t\t// It is. Let's convert it to pixel value\r\n\t\t\t\t\t\t// @todo Check if we can do this in a less hacky way\r\n\t\t\t\t\t\tlet convertedFrom: number = (<any>this.object)[getHybridProperty(options.property, \"pixel\")];\r\n\t\t\t\t\t\tif (!isNaN(convertedFrom)) {\r\n\t\t\t\t\t\t\toptions.from = convertedFrom;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t// Check if maybe we have a color or percent value\r\n\t\t\t\t\tif (options.to instanceof Color) {\r\n\t\t\t\t\t\t// Yup - set resolved named color\r\n\t\t\t\t\t\t//options.from = $colors.stringToColor(<string>options.from);\r\n\t\t\t\t\t\tif (options.from) {\r\n\t\t\t\t\t\t\toptions.updateMethod = getProgressColor;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t// Static value\r\n\t\t\t\t\t\t\tthis.staticOptions.push(options);\r\n\t\t\t\t\t\t\t$array.remove(this.animationOptions, options);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (options.to instanceof Percent) {\r\n\t\t\t\t\t\t// Percent\r\n\t\t\t\t\t\toptions.updateMethod = getProgressPercent;\r\n\r\n\t\t\t\t\t\t// Check if the initial value is maybe in pixels\r\n\t\t\t\t\t\tif (!isNaN(<number>options.from)) {\r\n\t\t\t\t\t\t\t// It is. Let's convert it\r\n\t\t\t\t\t\t\t// @todo Check if we can do this in a less hacky way\r\n\t\t\t\t\t\t\tlet convertedFrom: number = (<any>this.object)[getHybridProperty(options.property, \"relative\")];\r\n\t\t\t\t\t\t\tif (!isNaN(convertedFrom)) {\r\n\t\t\t\t\t\t\t\toptions.from = percent(convertedFrom * 100);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\t// Static value\r\n\t\t\t\t\t\tthis.staticOptions.push(options);\r\n\t\t\t\t\t\t$array.remove(this.animationOptions, options);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Apply static options (just in case they were reset by previous\r\n\t\t// animation loop)\r\n\t\tthis.applyStaticOptions();\r\n\r\n\t\tif (this.events.isEnabled(\"animationstarted\")) {\r\n\t\t\tconst event: AMEvent<this, IAnimationEvents>[\"animationstarted\"] = {\r\n\t\t\t\ttype: \"animationstarted\",\r\n\t\t\t\ttarget: this,\r\n\t\t\t\tprogress: this.progress\r\n\t\t\t};\r\n\t\t\tthis.events.dispatchImmediately(\"animationstarted\", event);\r\n\t\t}\r\n\r\n\t\tthis.update();\r\n\r\n\t\t// If duration is 0, just end animation\r\n\t\tif (this.duration === 0) {\r\n\t\t\tthis.end();\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets loop count for the animation. If parameter is not a valid number the\r\n\t * animation will keep on looping indefinitely.\r\n\t *\r\n\t * @param  {number}     count  Number of times to loop animation\r\n\t * @return {Animation}         Animation\r\n\t */\r\n\tpublic loop(count?: number): Animation {\r\n\t\tif (!$type.isNumber(count)) {\r\n\t\t\tcount = Infinity;\r\n\t\t}\r\n\t\tthis._loop = count;\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * Pauses animation.\r\n\t *\r\n\t * @return {Animation} Animation\r\n\t */\r\n\tpublic pause(): Animation {\r\n\t\tthis._pause = true;\r\n\r\n\t\tif (this._delayTimeout) {\r\n\t\t\tthis.removeDispose(this._delayTimeout);\r\n\t\t\tthis._delayTimeout = null;\r\n\t\t}\r\n\r\n\t\t$array.remove(animations, this);\r\n\t\t$array.remove(this.object.animations, this);\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * Resumes paused animation.\r\n\t *\r\n\t * @return {Animation} Animation\r\n\t */\r\n\tpublic resume(): Animation {\r\n\t\tthis._start();\r\n\t\tthis._startTime = Date.now() - this._time;\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * Jumps to animation end. If animation is set to loop, this will start\r\n\t * another round of animation from start.\r\n\t *\r\n\t * @return {Animation} Animation\r\n\t */\r\n\tpublic end(): Animation {\r\n\r\n\t\t// Pause and complete the progress\r\n\t\tthis.pause();\r\n\t\tthis.setProgress(1);\r\n\r\n\t\t// Apply static options\r\n\t\tthis.applyStaticOptions();\r\n\r\n\t\tif (this.events.isEnabled(\"animationended\")) {\r\n\t\t\tconst event: AMEvent<this, IAnimationEvents>[\"animationended\"] = {\r\n\t\t\t\ttype: \"animationended\",\r\n\t\t\t\ttarget: this,\r\n\t\t\t\tprogress: this.progress\r\n\t\t\t};\r\n\t\t\tthis.events.dispatchImmediately(\"animationended\", event);\r\n\t\t}\r\n\r\n\t\t// Check if we should loop\r\n\t\tif (this._loop > 0) {\r\n\t\t\tthis._loop--;\r\n\t\t\tthis.start();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.stop();\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * Applies static options that can't be animated.\r\n\t */\r\n\tprotected applyStaticOptions(): void {\r\n\t\t$array.each(this.staticOptions, (options) => {\r\n\t\t\tif (options.childObject) {\r\n\t\t\t\toptions.childObject[options.property] = this.progress == 1 ? options.to : options.from;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t(<any>this.object)[options.property] = this.progress == 1 ? options.to : options.from;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Stops animation.\r\n\t *\r\n\t * When animation is stopped, the properties of the target object will remain\r\n\t * where they were at the moment when `stop()` was called.\r\n\t *\r\n\t * @param  {boolean}    skipEvent  Do not trigger `animationstopped` event\r\n\t * @return {Animation}             Animation\r\n\t */\r\n\tpublic stop(skipEvent?: boolean): Animation {\r\n\t\tthis.pause();\r\n\t\tif (!skipEvent) {\r\n\t\t\tif (this.events.isEnabled(\"animationstopped\")) {\r\n\t\t\t\tconst event: AMEvent<this, IAnimationEvents>[\"animationstopped\"] = {\r\n\t\t\t\t\ttype: \"animationstopped\",\r\n\t\t\t\t\ttarget: this,\r\n\t\t\t\t\tprogress: this.progress\r\n\t\t\t\t};\r\n\t\t\t\tthis.events.dispatchImmediately(\"animationstopped\", event);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets current progress and updates object's numeric and color values.\r\n\t *\r\n\t * @param {number} progress Progress (0-1)\r\n\t */\r\n\tpublic setProgress(progress: number): void {\r\n\t\tthis._time = this.duration * progress; // just in case we call this from outside\r\n\t\t$array.each(this.animationOptions, (options) => {\r\n\t\t\tlet value = options.updateMethod(progress, options.from, options.to);\r\n\r\n\t\t\tif (options.childObject) {\r\n\t\t\t\toptions.childObject[options.property] = value;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t(<any>this.object)[options.property] = value;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.progress = progress;\r\n\t\tif (this.events.isEnabled(\"animationprogress\")) {\r\n\t\t\tconst event: AMEvent<this, IAnimationEvents>[\"animationprogress\"] = {\r\n\t\t\t\ttype: \"animationprogress\",\r\n\t\t\t\ttarget: this,\r\n\t\t\t\tprogress: this.progress\r\n\t\t\t};\r\n\t\t\tthis.events.dispatchImmediately(\"animationprogress\", event);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Tracks and sets progress according to time or frames.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {Animation} Animation\r\n\t */\r\n\tpublic update(): Animation {\r\n\t\tif (!this._pause) {\r\n\r\n\t\t\tlet progress;\r\n\t\t\tthis._time = $math.fitToRange(Date.now() - this._startTime, 0, this.duration);\r\n\t\t\tprogress = this.easing(this._time / this.duration);\r\n\t\t\tif (this.duration == 0 || !$type.isNumber(progress)) {\r\n\t\t\t\tprogress = 1;\r\n\t\t\t}\r\n\r\n\t\t\tthis.setProgress(progress);\r\n\r\n\t\t\tif ($math.round(this._time / this.duration, 6) == 1) {\r\n\t\t\t\tthis.end();\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns `true` if this animation is delayed.\r\n\t *\r\n\t * @readonly\r\n\t * @return {boolean} [description]\r\n\t */\r\n\tpublic get delayed(): boolean {\r\n\t\treturn this._delayTimeout ? true : false;\r\n\t}\r\n\r\n\t/**\r\n\t * Checks other animations currently running on the same object and removes\r\n\t * overlapping options from those other animations that are contained in\r\n\t * this animation.\r\n\t *\r\n\t * This is needed to ensure that no two confurent animations step on each\r\n\t * other's toes by trying to animate the same property.\r\n\t */\r\n\tprivate stopSameAnimations(): void {\r\n\t\t// stop animation of the same property\r\n\t\t// TODO make this more efficient\r\n\t\t// TODO don't copy the array\r\n\t\t$array.each($array.copy(this.object.animations), (animation) => {\r\n\t\t\tif (animation !== this && !animation.delayed) {\r\n\t\t\t\tconst killed: Array<IAnimationOptions> = [];\r\n\r\n\t\t\t\t$array.each(this.animationOptions, (newOptions) => {\r\n\t\t\t\t\t$array.each(animation.animationOptions, (oldOptions) => {\r\n\t\t\t\t\t\tif (newOptions.property == oldOptions.property && newOptions.childObject == oldOptions.childObject) {\r\n\t\t\t\t\t\t\tkilled.push(oldOptions);\r\n\r\n\t\t\t\t\t\t\tif (animation.animationOptions.length == 0) {\r\n\t\t\t\t\t\t\t\tanimation.stop(true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\t$array.each(killed, (oldOptions) => {\r\n\t\t\t\t\t$array.remove(animation.animationOptions, oldOptions);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/utils/Animation.ts","/**\r\n * A collection of easing functions\r\n *\r\n * Parts of this collection are taken from D3.js library (https://d3js.org/)\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport * as $math from \"../utils/Math\";\r\n\r\n/**\r\n * The functions below are from D3.js library (https://d3js.org/)\r\n *\r\n * ----------------------------------------------------------------------------\r\n * Copyright 2017 Mike Bostock\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *    this list of conditions and the following disclaimer.\r\n *\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *    this list of conditions and the following disclaimer in the documentation\r\n *    and/or other materials provided with the distribution.\r\n *\r\n * 3. Neither the name of the copyright holder nor the names of its\r\n *    contributors may be used to endorse or promote products derived from this\r\n *    software without specific prior written permission.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n * ----------------------------------------------------------------------------\r\n * @hidden\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * LINEAR FUNCTIONS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Easing function: \"linear\".\r\n */\r\nexport function linear(t: number): number {\r\n\treturn +t;\r\n}\r\n\r\n/**\r\n * Easing function: \"quadIn\".\r\n */\r\nexport function quadIn(t: number): number {\r\n\treturn t * t;\r\n}\r\n\r\n/**\r\n * Easing function: \"quadOut\".\r\n */\r\nexport function quadOut(t: number): number {\r\n\treturn t * (2 - t);\r\n}\r\n\r\n/**\r\n * Easing function: \"quadInOut\".\r\n */\r\nexport function quadInOut(t: number): number {\r\n\treturn ((t *= 2) <= 1 ? t * t : --t * (2 - t) + 1) / 2;\r\n}\r\n\r\n/**\r\n * Easing function: \"polyIn\".\r\n */\r\nexport function polyIn(t: number, e: number): number {\r\n\treturn Math.pow(t, e);\r\n}\r\n\r\n/**\r\n * Easing function: \"polyOut\".\r\n */\r\nexport function polyOut(t: number, e: number): number {\r\n\treturn 1 - Math.pow(1 - t, e);\r\n}\r\n\r\n/**\r\n * Easing function: \"polyInOut\".\r\n */\r\nexport function polyInOut(t: number, e: number): number {\r\n\treturn ((t *= 2) <= 1 ? Math.pow(t, e) : 2 - Math.pow(2 - t, e)) / 2;\r\n}\r\n\r\n/**\r\n * Easing function: \"polyIn3\".\r\n */\r\nexport function polyIn3(t: number): number {\r\n\treturn polyIn(t, 3);\r\n}\r\n\r\n/**\r\n * Easing function: \"polyOut3\".\r\n */\r\nexport function polyOut3(t: number): number {\r\n\treturn polyOut(t, 3);\r\n}\r\n\r\n/**\r\n * Easing function: \"polyInOut3\".\r\n */\r\nexport function polyInOut3(t: number): number {\r\n\treturn polyInOut(t, 3);\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * EXPONENTIAL FUNCTIONS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Easing function: \"expIn\".\r\n */\r\nexport function expIn(t: number): number {\r\n\treturn Math.pow(2, 10 * t - 10);\r\n}\r\n\r\n/**\r\n * Easing function: \"expOut\".\r\n */\r\nexport function expOut(t: number): number {\r\n\treturn 1 - Math.pow(2, -10 * t);\r\n}\r\n\r\n/**\r\n * Easing function: \"expInOut\".\r\n */\r\nexport function expInOut(t: number): number {\r\n\treturn ((t *= 2) <= 1 ? Math.pow(2, 10 * t - 10) : 2 - Math.pow(2, 10 - 10 * t)) / 2;\r\n}\r\n\r\n/**\r\n * ============================================================================\r\n * SINE FUNCTIONS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Easing function: \"sinIn\".\r\n */\r\nexport function sinIn(t: number): number {\r\n\treturn 1 - Math.cos(t * $math.HALFPI);\r\n}\r\n\r\n/**\r\n * Easing function: \"sinOut\".\r\n */\r\nexport function sinOut(t: number): number {\r\n\treturn Math.sin(t * $math.HALFPI);\r\n}\r\n\r\n/**\r\n * Easing function: \"sinInOut\".\r\n */\r\nexport function sinInOut(t: number): number {\r\n\treturn (1 - Math.cos($math.PI * t)) / 2;\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * CUBIC FUNCTIONS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Easing function: \"cubicIn\".\r\n */\r\nexport function cubicIn(t: number): number {\r\n\treturn t * t * t;\r\n}\r\n\r\n/**\r\n * Easing function: \"cubicOut\".\r\n */\r\nexport function cubicOut(t: number): number {\r\n\treturn --t * t * t + 1;\r\n}\r\n\r\n/**\r\n * Easing function: \"cubicInOut\".\r\n */\r\nexport function cubicInOut(t: number): number {\r\n\treturn ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * CIRCLE FUNCTIONS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Easing function: \"circleIn\".\r\n */\r\nexport function circleIn(t: number): number {\r\n\treturn 1 - Math.sqrt(1 - t * t);\r\n}\r\n\r\n/**\r\n * Easing function: \"circleOut\".\r\n */\r\nexport function circleOut(t: number): number {\r\n\treturn Math.sqrt(1 - --t * t);\r\n}\r\n\r\n/**\r\n * Easing function: \"circleInOut\".\r\n */\r\nexport function circleInOut(t: number): number {\r\n\treturn ((t *= 2) <= 1 ? 1 - Math.sqrt(1 - t * t) : Math.sqrt(1 - (t -= 2) * t) + 1) / 2;\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * BOUNCE FUNCTIONS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nlet b1 = 4 / 11,\r\n\tb2 = 6 / 11,\r\n\tb3 = 8 / 11,\r\n\tb4 = 3 / 4,\r\n\tb5 = 9 / 11,\r\n\tb6 = 10 / 11,\r\n\tb7 = 15 / 16,\r\n\tb8 = 21 / 22,\r\n\tb9 = 63 / 64,\r\n\tb0 = 1 / b1 / b1;\r\n\r\n/**\r\n * Easing function: \"bounceIn\".\r\n */\r\nexport function bounceIn(t: number): number {\r\n\treturn 1 - bounceOut(1 - t);\r\n}\r\n\r\n/**\r\n * Easing function: \"bounceOut\".\r\n */\r\nexport function bounceOut(t: number): number {\r\n\treturn (t = +t) < b1 ? b0 * t * t : t < b3 ? b0 * (t -= b2) * t + b4 : t < b6 ? b0 * (t -= b5) * t + b7 : b0 * (t -= b8) * t + b9;\r\n}\r\n\r\n/**\r\n * Easing function: \"bounceInOut\".\r\n */\r\nexport function bounceInOut(t: number): number {\r\n\treturn ((t *= 2) <= 1 ? 1 - bounceOut(1 - t) : bounceOut(t - 1) + 1) / 2;\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * ELASTIC FUNCTIONS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nlet tau = 2 * Math.PI;\r\nlet amplitude = 1;\r\nlet period = 0.3 / tau;\r\nlet s = Math.asin(1 / amplitude) * period;\r\n\r\n/**\r\n * Easing function: \"elasticIn\".\r\n *\r\n * @function elasticIn\r\n * @param {number}  a  Amplitude\r\n * @param {number}  p  period\r\n */\r\nexport function elasticIn(t: number): number {\r\n\treturn amplitude * Math.pow(2, 10 * --t) * Math.sin((s - t) / period);\r\n}\r\n\r\n/**\r\n * Easing function: \"elasticOut\".\r\n *\r\n * @function elasticOut\r\n * @param {number}  a  Amplitude\r\n * @param {number}  p  period\r\n */\r\nexport function elasticOut(t: number): number {\r\n\treturn 1 - amplitude * Math.pow(2, -10 * (t = +t)) * Math.sin((t + s) / period);\r\n}\r\n\r\n/**\r\n * Easing function: \"elasticInOut\".\r\n *\r\n * @function elasticInOut\r\n * @param {number}  a  Amplitude\r\n * @param {number}  p  period\r\n */\r\nexport function elasticInOut(t: number): number {\r\n\treturn ((t = t * 2 - 1) < 0\r\n\t\t? amplitude * Math.pow(2, 10 * t) * Math.sin((s - t) / period)\r\n\t\t: 2 - amplitude * Math.pow(2, -10 * t) * Math.sin((s + t) / period)) / 2;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/utils/Ease.ts","/**\r\n * Text class deals with all text placed on chart.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { SpriteEventDispatcher, AMEvent } from \"../Sprite\";\r\nimport { Container, IContainerProperties, IContainerAdapters, IContainerEvents } from \"../Container\";\r\nimport { DataItem } from \"../DataItem\";\r\nimport { TextValign } from \"../defs/TextValign\";\r\nimport { TextAlign } from \"../defs/TextAlign\";\r\nimport { IRectangle } from \"../defs/IRectangle\";\r\nimport { AMElement } from \"../rendering/AMElement\";\r\nimport { Group } from \"../rendering/Group\";\r\nimport { registry } from \"../Registry\";\r\nimport { ITextChunk, getTextFormatter } from \"../formatters/TextFormatter\";\r\nimport { MultiDisposer } from \"../utils/Disposer\";\r\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\r\nimport * as $math from \"../utils/Math\";\r\nimport * as $utils from \"../utils/Utils\";\r\nimport * as $iter from \"../utils/Iterator\";\r\nimport * as $type from \"../utils/Type\";\r\n\r\n\r\n\r\n\r\n/**\r\n * Defines properties for [[Text]].\r\n */\r\nexport interface ILabelProperties extends IContainerProperties {\r\n\r\n\t/**\r\n\t * Horizontal align of the text.\r\n\t *\r\n\t * @default \"start\"\r\n\t * @type {TextAlign}\r\n\t */\r\n\ttextAlign?: TextAlign;\r\n\r\n\t/**\r\n\t * Vertical align of the text.\r\n\t *\r\n\t * @default \"top\"\r\n\t * @type {TextValign}\r\n\t */\r\n\ttextValign?: TextValign;\r\n\r\n\t/**\r\n\t * A plain text content.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\ttext?: string;\r\n\r\n\t/**\r\n\t * Should the lines wrap if they do not fit into max width?\r\n\t *\r\n\t * @default false\r\n\t * @type {boolean}\r\n\t */\r\n\twrap?: boolean;\r\n\r\n\t/**\r\n\t * Should the text be selectable>\r\n\t *\r\n\t * @default false\r\n\t * @type {boolean}\r\n\t */\r\n\tselectable?: boolean;\r\n\r\n\t/**\r\n\t * HTML content.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\thtml?: string;\r\n\r\n\t/**\r\n\t * Should the lines be truncated (optionally with ellipsis) if they do not\r\n\t * fit into max width?\r\n\t *\r\n\t * @default false\r\n\t * @type {boolean}\r\n\t */\r\n\ttruncate?: boolean;\r\n\r\n\t/**\r\n\t * If `truncate` is enabled, should Label try to break only on full words\r\n\t * (`true`), or whenever needed, including middle of the word. (`false`)\r\n\t *\r\n\t * @default true\r\n\t * @type {boolean}\r\n\t */\r\n\tfullWords?: boolean;\r\n\r\n\t/**\r\n\t * If lines are truncated, this ellipsis will be added at the end.\r\n\t *\r\n\t * @default \"...\"\r\n\t * @type {string}\r\n\t */\r\n\tellipsis?: string;\r\n\r\n\t/**\r\n\t * Hide text of it does not fit into element's dimensions?\r\n\t *\r\n\t * @default false\r\n\t * @type {boolean}\r\n\t */\r\n\thideOversized?: boolean;\r\n}\r\n\r\n/**\r\n * Text line information.\r\n *\r\n * Objects used to hold cached information about lines in a Text element.\r\n */\r\nexport interface ITextLineInfo {\r\n\r\n\t/**\r\n\t * Measurements for the bounding box of the line.\r\n\t *\r\n\t * @type {SVGRect}\r\n\t */\r\n\t\"bbox\"?: SVGRect,\r\n\r\n\t/**\r\n\t * A reference to an SVG `<g>` element that holds line elements.\r\n\t *\r\n\t * @type {Group}\r\n\t */\r\n\t\"element\"?: Group,\r\n\r\n\t/**\r\n\t * Indicates if line contains more than one element, e.g. has multiple\r\n\t * formatted blocks.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\t\"complex\"?: boolean\r\n\r\n};\r\n\r\n/**\r\n * Defines events for [[Text]].\r\n */\r\nexport interface ILabelEvents extends IContainerEvents { }\r\n\r\n/**\r\n * Adapters for [[Text]].\r\n *\r\n * Includes both the [[Adapter]] definitions and properties.\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface ILabelAdapters extends IContainerAdapters, ILabelProperties {\r\n\r\n\t/**\r\n\t * Applied to the final formatted label text.\r\n\t * \r\n\t * @type {string}\r\n\t */\r\n\ttextOutput: string;\r\n\r\n\t/**\r\n\t * Applied to the final formatted label HTML.\r\n\t * \r\n\t * @type {string}\r\n\t */\r\n\thtmlOutput: string;\r\n\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Text is used to display highly configurable, data-enabled textual elements.\r\n *\r\n * ## Data Binding\r\n *\r\n * A Text element can dynamically parse and populate its contents with values\r\n * from a [[DataItem]].\r\n *\r\n * To activate such binding, set element's `dataItem` property.\r\n *\r\n * When activated, text contents will be parsed for special tags, e.g.:\r\n *\r\n * ```TypeScript\r\n * label.dataItem = myDataItem;\r\n * label.text = \"The title is: {title}\";\r\n * ```\r\n * ```JavaScript\r\n * label.dataItem = myDataItem;\r\n * label.text = \"The title is: {title}\";\r\n * ```\r\n *\r\n * The above will automatically replace \"{title}\" in the string with the\r\n * actual data value from `myDataItem`.\r\n *\r\n * Note, that most often dataItem is set by the Component.\r\n *\r\n *\r\n * @see {@link ILabelEvents} for a list of available events\r\n * @see {@link ILabelAdapters} for a list of available Adapters\r\n * @todo Vertical align\r\n * @todo Linkage to relative documentation (formatters, data binding)\r\n * @important\r\n */\r\nexport class Label extends Container {\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ILabelProperties}\r\n\t */\r\n\tpublic _properties!: ILabelProperties;\r\n\r\n\t/**\r\n\t * Defines Adapter type.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ILabelAdapters}\r\n\t */\r\n\tpublic _adapter!: ILabelAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {ILabelEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: ILabelEvents;\r\n\r\n\t/**\r\n\t * Indicates if the whole text does not fit into max dimenstions set for it.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tpublic isOversized: boolean = false;\r\n\r\n\t/**\r\n\t * Currently formatted text. This is used to verifying if text element needs\r\n\t * to be redrawn.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tprotected _currentText: string;\r\n\r\n\t/**\r\n\t * Current format to be used for outputing text.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tprotected _currentFormat: string;\r\n\r\n\t/**\r\n\t * [_sourceDataItemEvents description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {MultiDisposer}\r\n\t */\r\n\tprotected _sourceDataItemEvents: MultiDisposer;\r\n\r\n\r\n\tprotected _prevStatus: string;\r\n\r\n\r\n\tprotected _svgLines: Group[] = [];\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\r\n\t\t// Execute super's constructor\r\n\t\tsuper();\r\n\r\n\t\t// Set this class name\r\n\t\tthis.className = \"Label\";\r\n\r\n\t\tthis.fill = new InterfaceColorSet().getFor(\"text\");\r\n\r\n\t\t// not good to set this, as then these will appear on each label and values set on container won't be applied.\r\n\t\t//this.textDecoration = \"none\";\r\n\t\t//this.fontWeight = \"normal\";\r\n\r\n\r\n\t\t// Set defaults\r\n\t\tthis.wrap = false;\r\n\t\tthis.truncate = false;\r\n\t\tthis.fullWords = true;\r\n\t\tthis.ellipsis = \"...\";\r\n\t\tthis.textAlign = \"start\";\r\n\t\tthis.textValign = \"top\";\r\n\r\n\t\tthis.layout = \"absolute\";\r\n\r\n\t\tthis.renderingFrequency = 1;\r\n\r\n\t\t// Set up adapters for manipulating accessibility\r\n\t\tthis.adapter.add(\"readerTitle\", (arg) => {\r\n\t\t\tif (!arg) {\r\n\r\n\t\t\t\targ = this.populateString(\r\n\t\t\t\t\t$utils.plainText(\r\n\t\t\t\t\t\t$utils.isNotEmpty(this.html)\r\n\t\t\t\t\t\t\t? this.html\r\n\t\t\t\t\t\t\t: this.text\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\t\t\treturn arg;\r\n\t\t});\r\n\r\n\t\t// Add events to watch for maxWidth/maxHeight changes so that we can\r\n\t\t// invalidate this\r\n\t\tthis.events.on(\"maxsizechanged\", (ev) => {\r\n\t\t\tif (\r\n\t\t\t\t(this.bbox.width > this.availableWidth)\r\n\t\t\t\t|| ((this.bbox.width < this.availableWidth) && this.isOversized)\r\n\t\t\t\t|| (this.bbox.height > this.availableHeight)\r\n\t\t\t\t|| ((this.bbox.height < this.availableHeight) && this.isOversized)\r\n\t\t\t) {\r\n\t\t\t\tthis.invalidate();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.alignSVGText();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// trying to solve strange bug when text is measured as 0x0\r\n\t\tthis.events.once(\"validated\", () => {\r\n\r\n\t\t\tif (this.text && (this.bbox.width == 0 || this.bbox.height == 0)) {\r\n\t\t\t\tregistry.events.once(\"exitframe\", () => {\r\n\t\t\t\t\tthis._prevStatus = \"\";\r\n\t\t\t\t\tthis.invalidate();\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\t// Aply theme\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * [arrange description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t */\r\n\tpublic arrange(): void {\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates current text according to data item and supported features.\r\n\t * Returns `true` if current text has changed.\r\n\t *\r\n\t * @return {boolean} Text changed?\r\n\t */\r\n\tprotected updateCurrentText(): boolean {\r\n\t\t// Determine output format\r\n\t\tlet output: string, text: string;\r\n\r\n\t\tif ($utils.isNotEmpty(this.html) && this.paper.supportsForeignObject()) {\r\n\r\n\t\t\t// We favor HTML text if it's set and browser supports `foreignObject`\r\n\t\t\toutput = \"html\";\r\n\t\t\ttext = this.html;\r\n\t\t}\r\n\t\telse {\r\n\t\t\toutput = \"svg\";\r\n\t\t\ttext = this.text;\r\n\t\t}\r\n\r\n\t\t// Need to format text all the time\r\n\t\tif ($type.hasValue(text) && text !== \"\") {\r\n\t\t\ttext = this.populateString(text, this.dataItem);\r\n\t\t}\r\n\r\n\t\tif (output == \"html\") {\r\n\t\t\ttext = this.adapter.apply(\"htmlOutput\", text);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttext = this.adapter.apply(\"textOutput\", text);\r\n\t\t}\r\n\r\n\t\t// Update the text\r\n\t\tlet changed = text != this._currentText || output != this._currentFormat;\r\n\t\tthis._currentText = text;\r\n\t\tthis._currentFormat = output;\r\n\r\n\t\treturn changed;\r\n\t}\r\n\r\n\t/**\r\n\t * Draws the textual label.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic draw(): void {\r\n\r\n\t\t// Draw super\r\n\t\tsuper.draw();\r\n\r\n\t\t// Calculate max width and height\r\n\t\tlet maxWidth: number = $math.max(this.availableWidth - this.pixelPaddingLeft - this.pixelPaddingRight, 0);\r\n\t\tlet maxHeight: number = $math.max(this.availableHeight - this.pixelPaddingTop - this.pixelPaddingBottom, 0);\r\n\r\n\t\t// save\r\n\t\tlet status = maxHeight + \",\" + maxWidth + this.wrap + this.truncate + this.fullWords + this.rtl + this.ellipsis;\r\n\r\n\t\t// Update text\r\n\t\tif (!this.updateCurrentText() && this.inited && this._prevStatus == status) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._measuredWidth = 0;\r\n\t\tthis._measuredHeight = 0;\r\n\r\n\t\t// Reset\r\n\t\tthis.isOversized = false;\r\n\r\n\t\t// Determine output format\r\n\t\tlet output = this._currentFormat;\r\n\t\tlet text = this._currentText;\r\n\r\n\t\t// Empty string\r\n\t\tif (!$type.hasValue(text) || text == \"\") {\r\n\t\t\tthis.element.attr({ display: \"none\" });\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Chop up text into lines\r\n\t\t// We're still processing SVG and HTML in the same way for now\r\n\t\tlet lines: string[] = text.split(\"\\n\");\r\n\r\n\t\t// Do we need to go through the trouble of measuring lines\r\n\t\t//let measure: boolean = true;// (lines.length > 1) || this.wrap;\r\n\r\n\t\tthis._prevStatus = status;\r\n\r\n\t\tthis.textAlign = this.textAlign;\r\n\r\n\t\tlet display = this.group.getAttr(\"display\");\r\n\t\tif (display == \"none\") {\r\n\t\t\tthis.group.removeAttr(\"display\");\r\n\t\t}\r\n\r\n\t\t// SVG or HTML?\r\n\t\tif (output === \"svg\") {\r\n\r\n\t\t\t/**\r\n\t\t\t * SVG\r\n\t\t\t */\r\n\r\n\t\t\tthis.element.removeAttr(\"display\");\r\n\r\n\t\t\t// Clear the element\r\n\t\t\tlet group: Group = <Group>this.element;\r\n\r\n\t\t\tthis.resetBBox();\r\n\r\n\t\t\t// Init state variables\r\n\t\t\tlet currentHeight: number = 0;\r\n\t\t\tlet currentFormat: string = \"\";\r\n\r\n\t\t\t// Process each line\r\n\t\t\tfor (let i: number = 0; i < lines.length; i++) {\r\n\r\n\t\t\t\t// Get line\r\n\t\t\t\tlet line: string = lines[i];\r\n\r\n\t\t\t\t// Check if line is empty\r\n\t\t\t\tif (line == \"\") {\r\n\r\n\t\t\t\t\t// It is, let's just update currentHeight and go to the next one\r\n\t\t\t\t\t// If it's the first line, we'll have to use arbirary line height,\r\n\t\t\t\t\t// since there's nothing to measure. For subsequent lines we can take\r\n\t\t\t\t\t// previous line's height\r\n\t\t\t\t\tlet tempElement = this.getSVGLineElement(\"\", 0);\r\n\t\t\t\t\ttempElement.add(\r\n\t\t\t\t\t\tthis.getSvgElement(\r\n\t\t\t\t\t\t\t\".\",\r\n\t\t\t\t\t\t\tgetTextFormatter().translateStyleShortcuts(currentFormat)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t);\r\n\t\t\t\t\tgroup.add(tempElement);\r\n\t\t\t\t\tlet offset = Math.ceil(tempElement.getBBox().height);\r\n\t\t\t\t\tif (offset > 0) {\r\n\t\t\t\t\t\tcurrentHeight += offset;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgroup.removeElement(tempElement);\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Chunk up the line and process each chunk\r\n\t\t\t\tlet chunks: ITextChunk[] = getTextFormatter().chunk(line);\r\n\t\t\t\tlet currentLineHeight: number = 0;\r\n\t\t\t\tlet firstChunk: boolean = true;\r\n\t\t\t\tlet skipTextChunks: boolean = false;\r\n\r\n\t\t\t\t// Create line element or grab it from cache\r\n\t\t\t\tlet lineInfo: ITextLineInfo;\r\n\t\t\t\tif (lineInfo = this.getLineInfo(i)) {\r\n\t\t\t\t\t// Empty line\r\n\t\t\t\t\tlineInfo.element.textContent = \"\";\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t// Init new line info\r\n\t\t\t\t\tlineInfo = {\r\n\t\t\t\t\t\t\"element\": this.getSVGLineElement(\"\", 0),\r\n\t\t\t\t\t\t\"complex\": false\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t// Create the line element\r\n\t\t\t\t\t//lineInfo.element = this.getSVGLineElement(\"\", 0);\r\n\t\t\t\t\t//lineElement = this.getSVGLineElement(\"\", 0);\r\n\t\t\t\t\tgroup.add(lineInfo.element);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlineInfo.element.removeAttr(\"display\");\r\n\r\n\t\t\t\tif (this.rtl) {\r\n\t\t\t\t\tchunks.reverse();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Process each chunk\r\n\t\t\t\tfor (let x: number = 0; x < chunks.length; x++) {\r\n\r\n\t\t\t\t\t// If there's more than one chunk, means the line is \"complex\"\r\n\t\t\t\t\tif (x) {\r\n\t\t\t\t\t\tlineInfo.complex = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Get chunk\r\n\t\t\t\t\tlet chunk = chunks[x];\r\n\r\n\t\t\t\t\t// Is this chunk format or text?\r\n\t\t\t\t\tif (chunk.type === \"format\") {\r\n\r\n\t\t\t\t\t\t// Log current format, so that we can apply it to multiple lines if\r\n\t\t\t\t\t\t// necessary\r\n\t\t\t\t\t\tcurrentFormat = chunk.text;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\r\n\t\t\t\t\t\t// It's text block\r\n\r\n\t\t\t\t\t\t// Need to skip?\r\n\t\t\t\t\t\t// We do this when truncating. We can't just simply go ahead and\r\n\t\t\t\t\t\t// abandon chunk processing as they might have formatting\r\n\t\t\t\t\t\t// instructions in them that are relevant for subsequent lines\r\n\t\t\t\t\t\tif (skipTextChunks) {\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Add chunk to the current element\r\n\t\t\t\t\t\t//lineInfo.element.content += $utils.trim(getTextFormatter().format(currentFormat + chunk.text, output));\r\n\r\n\t\t\t\t\t\tlineInfo.element.add(\r\n\t\t\t\t\t\t\tthis.getSvgElement(\r\n\t\t\t\t\t\t\t\tchunk.text,\r\n\t\t\t\t\t\t\t\tgetTextFormatter().translateStyleShortcuts(currentFormat)\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t);\r\n\r\n\r\n\t\t\t\t\t\tlineInfo.bbox = lineInfo.element.getBBox();\r\n\t\t\t\t\t\tlineInfo.bbox.width = Math.ceil(lineInfo.bbox.width);\r\n\r\n\t\t\t\t\t\t// Updated current line height\r\n\t\t\t\t\t\tif (currentLineHeight < lineInfo.bbox.height) {\r\n\t\t\t\t\t\t\tcurrentLineHeight = lineInfo.bbox.height;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Wrapping?\r\n\t\t\t\t\t\tif ((this.wrap || this.truncate) && (lineInfo.bbox.width > maxWidth)) {\r\n\r\n\t\t\t\t\t\t\t// Set oversized\r\n\t\t\t\t\t\t\tthis.isOversized = true;\r\n\r\n\t\t\t\t\t\t\t// Take temporary measurements\r\n\t\t\t\t\t\t\tlet lineText: string = lineInfo.element.textContent;\r\n\t\t\t\t\t\t\tlet avgCharWidth: number = (lineInfo.bbox.width / lineText.length) * .9;\r\n\r\n\t\t\t\t\t\t\t// Calculate average number of symbols / width\r\n\t\t\t\t\t\t\tlet excessChars: number = $math.min(Math.ceil((lineInfo.bbox.width - maxWidth) / avgCharWidth), lineText.length);\r\n\r\n\t\t\t\t\t\t\t// Are we truncating or auto-wrapping text?\r\n\t\t\t\t\t\t\tif (this.truncate) {\r\n\r\n\t\t\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t\t\t * Processing line truncation\r\n\t\t\t\t\t\t\t\t * With the addition of each text chunk we measure if current\r\n\t\t\t\t\t\t\t\t * line does not exceed maxWidth. If it does, we will stop\r\n\t\t\t\t\t\t\t\t * addition of further chunks as well as try to truncate\r\n\t\t\t\t\t\t\t\t * current or any number of previous chunks with an added\r\n\t\t\t\t\t\t\t\t * ellipsis\r\n\t\t\t\t\t\t\t\t */\r\n\r\n\t\t\t\t\t\t\t\t// Indicator whether we need to add ellipsis to the current\r\n\t\t\t\t\t\t\t\t// element, even if it fits. This is needed to indicate\r\n\t\t\t\t\t\t\t\t// whether we have already removed some subsequent chunks in\r\n\t\t\t\t\t\t\t\t// which case we need to add ellipsis.\r\n\t\t\t\t\t\t\t\tlet addEllipsis: boolean = false;\r\n\r\n\t\t\t\t\t\t\t\t// Process each child in the temporary line, until the whole\r\n\t\t\t\t\t\t\t\t// line fits, preferably with an ellipsis\r\n\t\t\t\t\t\t\t\t// TODO use iterator instead\r\n\t\t\t\t\t\t\t\tfor (let e = lineInfo.element.children.length - 1; e >= 0; e--) {\r\n\r\n\t\t\t\t\t\t\t\t\t// Get current element\r\n\t\t\t\t\t\t\t\t\tlet element: AMElement = lineInfo.element.children.getIndex(e);\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t// Add ellipsis only if previous chunk was removed in full\r\n\t\t\t\t\t\t\t\t\t// and this chunk already fits\r\n\t\t\t\t\t\t\t\t\t//if (addEllipsis && (bbox.width <= maxWidth)) {\r\n\t\t\t\t\t\t\t\t\tif (addEllipsis && (lineInfo.bbox.width <= maxWidth)) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t// Add ellipsis\r\n\t\t\t\t\t\t\t\t\t\telement.textContent += \" \" + this.ellipsis;\r\n\r\n\t\t\t\t\t\t\t\t\t\t// Measure again (we need to make sure ellipsis fits)\r\n\t\t\t\t\t\t\t\t\t\tlineInfo.bbox = lineInfo.element.getBBox();\r\n\t\t\t\t\t\t\t\t\t\tlineInfo.bbox.width = Math.floor(lineInfo.bbox.width);\r\n\r\n\t\t\t\t\t\t\t\t\t\t// If it fits, we're done here\r\n\t\t\t\t\t\t\t\t\t\t// If it doesn't we continue rolling\r\n\t\t\t\t\t\t\t\t\t\tif (lineInfo.bbox.width <= maxWidth) {\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\taddEllipsis = false;\r\n\r\n\t\t\t\t\t\t\t\t\t// Get element text\r\n\t\t\t\t\t\t\t\t\tlet elementText = element.textContent;\r\n\r\n\t\t\t\t\t\t\t\t\t// Calculate average number of symbols / width\r\n\t\t\t\t\t\t\t\t\tlineText = lineInfo.element.textContent;\r\n\t\t\t\t\t\t\t\t\texcessChars = $math.min(Math.ceil((lineInfo.bbox.width - maxWidth) / avgCharWidth), lineText.length);\r\n\r\n\t\t\t\t\t\t\t\t\t// Do this until we fit\r\n\t\t\t\t\t\t\t\t\twhile ((lineInfo.bbox.width > maxWidth) && (excessChars <= lineText.length) && (excessChars > 0)) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t// Calculate max available chars\r\n\t\t\t\t\t\t\t\t\t\tlet maxChars: number = $math.max(elementText.length - excessChars - this.ellipsis.length, 1);\r\n\r\n\t\t\t\t\t\t\t\t\t\t// Is there anything left?\r\n\t\t\t\t\t\t\t\t\t\tif (maxChars <= 1) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t// Nope, let's jump to the previous item\r\n\t\t\t\t\t\t\t\t\t\t\t// Set excess characters to zero so that this loop does\r\n\t\t\t\t\t\t\t\t\t\t\t// not repeat when it over\r\n\t\t\t\t\t\t\t\t\t\t\texcessChars = 0;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t// Add ellipsis to previous item\r\n\t\t\t\t\t\t\t\t\t\t\t// Subsequent iterations will check if the ellipsis fits\r\n\t\t\t\t\t\t\t\t\t\t\tif (e > 0) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t// Indicating to add ellipsis to previous item\r\n\t\t\t\t\t\t\t\t\t\t\t\taddEllipsis = true;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t// Removing this node\r\n\t\t\t\t\t\t\t\t\t\t\t\tlineInfo.element.removeElement(element);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t// If we're on first chunk of text, or we explicitly\r\n\t\t\t\t\t\t\t\t\t\t// enabled word-breaking, we can break mid-word.\r\n\t\t\t\t\t\t\t\t\t\t// Otherwise we break by words.\r\n\t\t\t\t\t\t\t\t\t\tif (e === 0 || !this.fullWords) {\r\n\t\t\t\t\t\t\t\t\t\t\telementText = $utils.truncateWithEllipsis(elementText, maxChars, this.ellipsis, false, this.rtl);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\t\t\telementText = $utils.truncateWithEllipsis(elementText, maxChars, this.ellipsis, true, this.rtl);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t// Set truncated text\r\n\t\t\t\t\t\t\t\t\t\telement.textContent = elementText;\r\n\r\n\t\t\t\t\t\t\t\t\t\t// Measure again\r\n\t\t\t\t\t\t\t\t\t\tlineInfo.bbox = lineInfo.element.getBBox();\r\n\t\t\t\t\t\t\t\t\t\tlineInfo.bbox.width = Math.floor(lineInfo.bbox.width);\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t// Increase excess characters count, just in case it still\r\n\t\t\t\t\t\t\t\t\t\t// doesn't fit and we have to go at it again\r\n\t\t\t\t\t\t\t\t\t\texcessChars = Math.ceil(excessChars * 1.1);\r\n\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t// Do not process further chunks\r\n\t\t\t\t\t\t\t\t\tskipTextChunks = true;\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\r\n\t\t\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t\t\t * Processign auto-wrap\r\n\t\t\t\t\t\t\t\t * In this case we're going to be adding text chunks until\r\n\t\t\t\t\t\t\t\t * they don't fit into current line. Once that happens we will\r\n\t\t\t\t\t\t\t\t * inject the rest of the chunks to the next line\r\n\t\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\t\t// Get last node added and measure it\r\n\t\t\t\t\t\t\t\tlet lastElement: AMElement = lineInfo.element.lastChild;\r\n\r\n\t\t\t\t\t\t\t\t// Init split lines\r\n\t\t\t\t\t\t\t\tlet splitLines: string[];\r\n\t\t\t\t\t\t\t\twhile ((lineInfo.bbox.width > maxWidth) && (excessChars <= lineText.length) && (excessChars > 0)) {\r\n\r\n\t\t\t\t\t\t\t\t\t// Calculate max available chars\r\n\t\t\t\t\t\t\t\t\tlet maxChars: number = $math.max(chunk.text.length - excessChars, 1);\r\n\r\n\t\t\t\t\t\t\t\t\t// Don't split the words mid-word if it's not the first chunk\r\n\t\t\t\t\t\t\t\t\t// in the line\r\n\t\t\t\t\t\t\t\t\tif (firstChunk) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t// Split mid-word if necessary\r\n\t\t\t\t\t\t\t\t\t\tsplitLines = $utils.splitTextByCharCount(chunk.text, maxChars, false, this.rtl);\r\n\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\telse {\r\n\r\n\t\t\t\t\t\t\t\t\t\t// Don't split mid-word\r\n\t\t\t\t\t\t\t\t\t\tsplitLines = $utils.splitTextByCharCount(chunk.text, maxChars, true, this.rtl);\r\n\r\n\t\t\t\t\t\t\t\t\t\t// Check if the first word is too long\r\n\t\t\t\t\t\t\t\t\t\tif ((splitLines[0].length > maxChars) || maxChars === 1) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t// Yes - move the whole chunk to the next line\r\n\t\t\t\t\t\t\t\t\t\t\t// Remove the element we just added\r\n\t\t\t\t\t\t\t\t\t\t\tlineInfo.element.removeElement(lastElement);\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t// Break out of the while on next cycle\r\n\t\t\t\t\t\t\t\t\t\t\texcessChars = 0;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t// Use the first line to update last item\r\n\t\t\t\t\t\t\t\t\tif (excessChars > 0) {\r\n\t\t\t\t\t\t\t\t\t\tlastElement.textContent = getTextFormatter().cleanUp($utils.trim(splitLines.shift()));\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t// Measure again, just in case\r\n\t\t\t\t\t\t\t\t\tlineInfo.bbox = lineInfo.element.getBBox();\r\n\t\t\t\t\t\t\t\t\tlineInfo.bbox.width = Math.floor(lineInfo.bbox.width);\r\n\r\n\t\t\t\t\t\t\t\t\t// Increase excess characters count, just in case it still\r\n\t\t\t\t\t\t\t\t\t// doesn't fit and we have to go at it again\r\n\t\t\t\t\t\t\t\t\texcessChars = Math.ceil(excessChars * 1.1);\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t// Construct the rest of the line\r\n\t\t\t\t\t\t\t\tif (splitLines.length > 0) {\r\n\r\n\t\t\t\t\t\t\t\t\tlet restOfLine: string = \"\";\r\n\r\n\t\t\t\t\t\t\t\t\t// Add leftovers from splitting the current chunk\r\n\t\t\t\t\t\t\t\t\tif ($type.hasValue(splitLines)) {\r\n\r\n\t\t\t\t\t\t\t\t\t\tif (this.rtl) {\r\n\t\t\t\t\t\t\t\t\t\t\trestOfLine += splitLines.join(\"\") + currentFormat;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\t\t\trestOfLine += currentFormat + splitLines.join(\"\");\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t// Add the rest of the chunks\r\n\t\t\t\t\t\t\t\t\tfor (let c: number = x + 1; c < chunks.length; c++) {\r\n\t\t\t\t\t\t\t\t\t\trestOfLine += chunks[c].text;\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t// Inject the rest of the lines as chunks for subsequent\r\n\t\t\t\t\t\t\t\t\tlines.splice(i + 1, 0, restOfLine);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t// Skip processing the rest of the chunks\r\n\t\t\t\t\t\t\t\tskipTextChunks = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// Let's update the text's bbox with the line's one\r\n\t\t\t\t\t\tif (this.bbox.width < lineInfo.bbox.width) {\r\n\t\t\t\t\t\t\tthis.bbox.width = lineInfo.bbox.width;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// commented to avoid bug (seen on sankey link) where text is incorrectly aligned\r\n\t\t\t\t\t\t//if (this.bbox.x > lineInfo.bbox.x) {\r\n\t\t\t\t\t\t//this.bbox.x = lineInfo.bbox.x; \r\n\t\t\t\t\t\t//}\r\n\r\n\t\t\t\t\t\tthis.bbox.height = currentHeight + currentLineHeight;\r\n\r\n\t\t\t\t\t\t// Position current line\r\n\t\t\t\t\t\tlineInfo.element.attr({\r\n\t\t\t\t\t\t\t\"x\": \"0\",\r\n\t\t\t\t\t\t\t\"y\": currentHeight + currentLineHeight,\r\n\t\t\t\t\t\t\t\"dy\": $math.round((-0.2 * currentLineHeight), 3).toString()\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tfirstChunk = false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Trim the last item\r\n\t\t\t\tlet lastElement: AMElement = lineInfo.element.lastChild;\r\n\t\t\t\tif (lastElement) {\r\n\t\t\t\t\tlastElement.textContent = this.rtl ?\r\n\t\t\t\t\t\t$utils.ltrim(lastElement.textContent) :\r\n\t\t\t\t\t\t$utils.rtrim(lastElement.textContent);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Increment collective height\r\n\t\t\t\tcurrentHeight += currentLineHeight;\r\n\r\n\t\t\t\t// Save line cache\r\n\t\t\t\tthis.addLineInfo(lineInfo, i);\r\n\t\t\t}\r\n\r\n\t\t\t// Check if maybe we need to hide the whole label if it doesn't fit\r\n\t\t\tif (this.hideOversized && ((this.availableWidth < this.bbox.width) || (this.availableHeight < this.bbox.height))) {\r\n\t\t\t\tthis.element.attr({ display: \"none\" });\r\n\t\t\t\tthis.isOversized = true;\r\n\t\t\t}\r\n\r\n\t\t\tthis._measuredWidth = $math.max(this.bbox.width, this.pixelWidth - this.pixelPaddingLeft - this.pixelPaddingRight);\r\n\t\t\tthis._measuredHeight = $math.max(this.bbox.height, this.pixelHeight - this.pixelPaddingTop - this.pixelPaddingBottom);\r\n\r\n\t\t\t// Align the lines\r\n\t\t\tthis.alignSVGText();\r\n\r\n\t\t\tthis.bbox.width = this._measuredWidth;\r\n\t\t\tthis.bbox.height = this._measuredHeight;\r\n\r\n\t\t\tthis.hideUnused(lines.length);\r\n\r\n\t\t}\r\n\t\telse {\r\n\r\n\t\t\t/**\r\n\t\t\t * HTML\r\n\t\t\t */\r\n\r\n\t\t\tthis.element.removeAttr(\"display\");\r\n\t\t\tthis.resetBBox();\r\n\r\n\t\t\t// Clear the element\r\n\t\t\tlet group: Group = <Group>this.element;\r\n\t\t\tgroup.disposeChildren();\r\n\r\n\t\t\t// Create a ForeignObject to use as HTML container\r\n\t\t\tlet fo = this.paper.foreignObject();\r\n\t\t\tgroup.add(fo);\r\n\r\n\t\t\t// Set group and foreignObject dimensions\r\n\t\t\tlet width: string = maxWidth > 0 ? (maxWidth).toString() + \"px\" : \"100%\";\r\n\t\t\tlet height: string = maxHeight > 0 ? (maxHeight).toString() + \"px\" : \"100%\";\r\n\t\t\t/*\t\t\tfo.attr({\r\n\t\t\t\t\t\t\twidth: width,\r\n\t\t\t\t\t\t\theight: height\r\n\t\t\t\t\t\t});*/\r\n\r\n\t\t\t// Create line element\r\n\t\t\t//let lineElement: HTMLElement = this.getHTMLLineElement(getTextFormatter().format(this.html, output));\r\n\t\t\tlet lineElement: HTMLElement = this.getHTMLLineElement(text);\r\n\t\t\tfo.node.appendChild(lineElement);\r\n\r\n\t\t\t// Temporarily set to inline-block so we can measure real width and height\r\n\t\t\tlineElement.style.display = \"inline-block\";\r\n\t\t\tlet tmpBBox = lineElement.getBoundingClientRect();\r\n\t\t\tlineElement.style.display = \"block\";\r\n\t\t\tthis.bbox = {\r\n\t\t\t\tx: 0,\r\n\t\t\t\ty: 0,\r\n\t\t\t\twidth: tmpBBox.width,\r\n\t\t\t\theight: tmpBBox.height\r\n\t\t\t};\r\n\r\n\t\t\t// Set exact dimensions of foreignObject so it is sized exactly as\r\n\t\t\t// the content within\r\n\t\t\tfo.attr({\r\n\t\t\t\twidth: tmpBBox.width,\r\n\t\t\t\theight: tmpBBox.height\r\n\t\t\t});\r\n\r\n\t\t\t// Set measurements and update bbox\r\n\t\t\tthis._measuredWidth = $math.max(this.bbox.width, this.pixelWidth - this.pixelPaddingLeft - this.pixelPaddingRight);\r\n\t\t\tthis._measuredHeight = $math.max(this.bbox.height, this.pixelHeight - this.pixelPaddingTop - this.pixelPaddingBottom);\r\n\r\n\t\t\tthis.bbox.width = this._measuredWidth;\r\n\t\t\tthis.bbox.height = this._measuredHeight;\r\n\r\n\t\t\t// Don't let labels bleed out of the alotted area\r\n\t\t\tif (this.truncate) {\r\n\t\t\t\tlineElement.style.overflow = \"hidden\";\r\n\t\t\t}\r\n\r\n\t\t\tif ((tmpBBox.width > maxWidth) || (tmpBBox.height > maxHeight)) {\r\n\t\t\t\tthis.isOversized = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t// Set applicable styles\r\n\t\tthis.setStyles();\r\n\t\tthis.updateCenter();\r\n\t\tthis.updateBackground();\r\n\r\n\t\tif (display == \"none\") {\r\n\t\t\tthis.group.attr({ display: \"none\" });\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Aligns the lines horizontally ant vertically, based on properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic alignSVGText(): void {\r\n\t\t// Get Group\r\n\t\tlet group: Group = <Group>this.element;\r\n\r\n\t\t// Is there anything to align?\r\n\t\tif (!group.children) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\r\n\t\tlet width = this._measuredWidth;\r\n\t\tlet height = this._measuredHeight;\r\n\r\n\t\tlet paddingLeft = this.pixelPaddingLeft;\r\n\t\tlet paddingRight = this.pixelPaddingRight;\r\n\t\tlet paddingTop = this.pixelPaddingTop;\r\n\t\tlet paddingBottom = this.pixelPaddingBottom;\r\n\r\n\t\t// Process each line\r\n\t\t$iter.each(group.children.backwards().iterator(), (element) => {\r\n\t\t\t// Align horizontally\r\n\t\t\t// Since we are using `text-anchor` for horizontal alignment, all we need\r\n\t\t\t// to do here is move the `x` position\r\n\r\n\t\t\telement.attr({ \"text-anchor\": this.textAlign })\r\n\r\n\t\t\tswitch (this.textAlign) {\r\n\t\t\t\tcase \"middle\":\r\n\t\t\t\t\telement.attr({ \"x\": (width / 2).toString() });\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"end\":\r\n\t\t\t\t\tif (this.rtl) {\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\telement.attr({ \"x\": width.toString() });\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tif (this.rtl) {\r\n\t\t\t\t\t\telement.attr({ \"x\": width.toString() });\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\telement.removeAttr(\"text-anchor\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tlet y = $type.toNumber(element.getAttr(\"y\"));\r\n\r\n\t\t\tswitch (this.textValign) {\r\n\t\t\t\tcase \"middle\":\r\n\t\t\t\t\telement.attr({ \"y\": (y + (height - this.bbox.height) / 2).toString() });\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"bottom\":\r\n\t\t\t\t\telement.attr({ \"y\": (y + height - this.bbox.height).toString() });\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\telement.attr({ \"y\": y.toString() });\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Produces an SVG line element with formatted text.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {string}     text    Text to wrap into line\r\n\t * @param  {number}     y       Current line vertical position\r\n\t * @return {AMElement}          A DOM element\r\n\t * @todo Implement HTML support\r\n\t */\r\n\tpublic getSVGLineElement(text: string, y?: number): Group {\r\n\r\n\t\t// Create a <text> node and set text\r\n\t\tlet element: Group = this.paper.addGroup(\"text\");\r\n\t\telement.textContent = text;\r\n\r\n\t\t// Set parameters\r\n\t\telement.attr({\r\n\t\t\t\"x\": \"0\"\r\n\t\t\t//\"alignment-baseline\": \"hanging\",\r\n\t\t\t//\"baseline-shift\": \"-20%\",\r\n\t\t\t//\"text-anchor\": \"center\"\r\n\t\t});\r\n\r\n\t\t// Set `y` position\r\n\t\tif ($type.hasValue(y)) {\r\n\t\t\telement.attr({\r\n\t\t\t\t\"y\": y.toString()\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// Don't let labels blled out of the alotted area\r\n\t\tif (this.truncate || this.wrap) {\r\n\t\t\telement.attr({ \"overflow\": \"hidden\" });\r\n\t\t}\r\n\r\n\t\t// Add RTL?\r\n\t\tif (this.rtl) {\r\n\t\t\telement.attr({\r\n\t\t\t\t\"direction\": \"rtl\",\r\n\t\t\t\t\"unicode-bidi\": \"bidi-override\"\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t * Resets cached BBox.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic resetBBox(): void {\r\n\t\tthis.bbox = { x: 0, y: 0, width: 0, height: 0 };\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Creates and returns an HTML line element (`<div>`).\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {string}       text  Text to add\r\n\t * @return {HTMLElement}        `<div>` element reference\r\n\t */\r\n\tpublic getHTMLLineElement(text: string): HTMLElement {\r\n\r\n\t\t// Create the <div> element\r\n\t\tlet div: HTMLElement = document.createElement(\"div\");\r\n\t\tdiv.innerHTML = text;\r\n\r\n\t\t// Set text alignment\r\n\t\tswitch (this.textAlign) {\r\n\t\t\tcase \"middle\":\r\n\t\t\t\tdiv.style.textAlign = \"center\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"end\":\r\n\t\t\t\tdiv.style.textAlign = \"right\";\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\t// Disable or enable wrapping\r\n\t\tif (this.wrap) {\r\n\t\t\tdiv.style.wordWrap = \"break-word\";\r\n\t\t}\r\n\t\telse {\r\n\t\t\tdiv.style.whiteSpace = \"nowrap\";\r\n\t\t}\r\n\r\n\t\t// Don't let labels bleed out of the alotted area\r\n\t\t// Moved to `draw()` because setting \"hidden\" kills all measuring\r\n\t\t/*if (this.truncate) {\r\n\t\t\tdiv.style.overflow = \"hidden\";\r\n\t\t}*/\r\n\r\n\t\t// Set RTL-related styles\r\n\t\tif (this.rtl) {\r\n\t\t\tdiv.style.direction = \"rtl\";\r\n\t\t\tdiv.style.unicodeBidi = \"bidi-override\";\r\n\t\t}\r\n\r\n\t\t// Translate some of the SVG styles into CSS\r\n\t\tif ($type.hasValue(this.fill)) {\r\n\t\t\tdiv.style.color = this.fill.toString();\r\n\t\t}\r\n\r\n\t\treturn div;\r\n\t}\r\n\r\n\t/**\r\n\t * Applies specific styles to text to make it not selectable, unless it is\r\n\t * explicitly set as `selectable`.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Set styles via AMElement\r\n\t */\r\n\tpublic setStyles(): void {\r\n\t\tlet group: Group = <Group>this.element;\r\n\t\tif (!this.selectable || this.draggable || this.resizable || this.swipeable) {\r\n\t\t\tgroup.addStyle({\r\n\t\t\t\t\"webkitUserSelect\": \"none\",\r\n\t\t\t\t\"msUserSelect\": \"none\"\r\n\t\t\t});\r\n\t\t}\r\n\t\telse if (this.selectable) {\r\n\t\t\tgroup.removeStyle(\"webkitUserSelect\");\r\n\t\t\tgroup.removeStyle(\"msUserSelect\");\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Hides unused lines\r\n\t */\r\n\tprotected hideUnused(index: number) {\r\n\t\tthis.initLineCache();\r\n\t\tlet lines: ITextLineInfo[] = this.getCache(\"lineInfo\");\r\n\t\tif (lines.length >= index) {\r\n\t\t\tfor (let i = index; i < lines.length; i++) {\r\n\t\t\t\tlet line = lines[i];\r\n\t\t\t\tif (line && line.element) {\r\n\t\t\t\t\tline.element.attr({ \"display\": \"none\" });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * An SVG text.\r\n\t *\r\n\t * Please note that setting `html` will override this setting if browser\r\n\t * supports `foreignObject` in SGV, such as most modern browsers excluding\r\n\t * IEs.\r\n\t *\r\n\t * @param {string}  value  SVG Text\r\n\t */\r\n\tpublic set text(value: string) {\r\n\t\t//this.setPropertyValue(\"html\", undefined);\r\n\t\tthis.setPropertyValue(\"text\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {string} SVG text\r\n\t */\r\n\tpublic get text(): string {\r\n\t\treturn this.getPropertyValue(\"text\");\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables autowrapping of text.\r\n\t *\r\n\t * @param {boolean}  value  Auto-wrapping enabled\r\n\t */\r\n\tpublic set wrap(value: boolean) {\r\n\t\tthis.resetBBox();\r\n\t\tthis.setPropertyValue(\"wrap\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Auto-wrap enabled or not\r\n\t */\r\n\tpublic get wrap(): boolean {\r\n\t\treturn this.getPropertyValue(\"wrap\");\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates if text lines need to be truncated if they do not fit, using\r\n\t * configurable `ellipsis` string.\r\n\t *\r\n\t * `truncate` overrides `wrap` if both are set to `true`.\r\n\t *\r\n\t * NOTE: For HTML text, this setting **won't** trigger a parser and actual\r\n\t * line truncation with ellipsis. It will just hide everything that goes\r\n\t * outside the label.\r\n\t *\r\n\t * @param {boolean}  value  trincate text?\r\n\t */\r\n\tpublic set truncate(value: boolean) {\r\n\t\tthis.resetBBox();\r\n\t\tthis.setPropertyValue(\"truncate\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Truncate text?\r\n\t */\r\n\tpublic get truncate(): boolean {\r\n\t\treturn this.getPropertyValue(\"truncate\");\r\n\t}\r\n\r\n\t/**\r\n\t * If `truncate` is enabled, should Label try to break only on full words\r\n\t * (`true`), or whenever needed, including middle of the word. (`false`)\r\n\t *\r\n\t * @default true\r\n\t * @param {boolean}  value  Truncate on full words?\r\n\t */\r\n\tpublic set fullWords(value: boolean) {\r\n\t\tthis.setPropertyValue(\"fullWords\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Truncate on full words?\r\n\t */\r\n\tpublic get fullWords(): boolean {\r\n\t\treturn this.getPropertyValue(\"fullWords\");\r\n\t}\r\n\r\n\t/**\r\n\t * Ellipsis character to use if `truncate` is enabled.\r\n\t *\r\n\t * @param {string} value Ellipsis string\r\n\t * @default \"...\"\r\n\t */\r\n\tpublic set ellipsis(value: string) {\r\n\t\tthis.setPropertyValue(\"ellipsis\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {string} Ellipsis string\r\n\t */\r\n\tpublic get ellipsis(): string {\r\n\t\treturn this.getPropertyValue(\"ellipsis\");\r\n\t}\r\n\r\n\t/**\r\n\t * Forces the text to be selectable. This setting will be ignored if the\r\n\t * object has some kind of interaction attached to it, such as it is\r\n\t * `draggable`, `swipeable`, `resizable`.\r\n\t *\r\n\t * @param {boolean}  value  Text selectable?\r\n\t * @default false\r\n\t */\r\n\tpublic set selectable(value: boolean) {\r\n\t\tthis.setPropertyValue(\"selectable\", value, true);\r\n\t\tthis.setStyles();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Text selectable?\r\n\t */\r\n\tpublic get selectable(): boolean {\r\n\t\treturn this.getPropertyValue(\"selectable\");\r\n\t}\r\n\r\n\t/**\r\n\t * Horizontal text alignment.\r\n\t *\r\n\t * Available choices:\r\n\t * * \"start\"\r\n\t * * \"middle\"\r\n\t * * \"end\"\r\n\t *\r\n\t * @param {TextAlign}  value  Alignment\r\n\t */\r\n\tpublic set textAlign(value: TextAlign) {\r\n\t\tthis.setPropertyValue(\"textAlign\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {TextAlign} Alignment\r\n\t */\r\n\tpublic get textAlign(): TextAlign {\r\n\t\treturn this.getPropertyValue(\"textAlign\");\r\n\t}\r\n\r\n\t/**\r\n\t * Vertical text alignment.\r\n\t *\r\n\t * @ignore Exclude from docs (not used)\r\n\t * @param {TextValign}  value  Alignment\r\n\t * @deprecated\r\n\t */\r\n\tpublic set textValign(value: TextValign) {\r\n\t\tthis.setPropertyValue(\"textValign\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore Exclude from docs (not used)\r\n\t * @return {TextValign} Alignment\r\n\t * @deprecated\r\n\t */\r\n\tpublic get textValign(): TextValign {\r\n\t\treturn this.getPropertyValue(\"textValign\");\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Raw HTML to be used as text.\r\n\t *\r\n\t * NOTE: HTML text is subject to browser support. It relies on browsers\r\n\t * supporting SVG `foreignObject` nodes. Some browsers (read IEs) do not\r\n\t * support it. On those browsers, the text will fall back to basic SVG text,\r\n\t * striping out all HTML markup and styling that goes with it.\r\n\t *\r\n\t * For more information about `foreignObject` and its browser compatibility\r\n\t * refer to [this page](https://developer.mozilla.org/en/docs/Web/SVG/Element/foreignObject#Browser_compatibility).\r\n\t *\r\n\t * @param {string} value HTML text\r\n\t */\r\n\tpublic set html(value: string) {\r\n\t\tthis.setPropertyValue(\"html\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {string} HTML content\r\n\t */\r\n\tpublic get html(): string {\r\n\t\treturn this.getPropertyValue(\"html\");\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether the whole text should be hidden if it does not fit into\r\n\t * its allotted space.\r\n\t *\r\n\t * @param {boolean}  value  Hide if text does not fit?\r\n\t */\r\n\tpublic set hideOversized(value: boolean) {\r\n\t\tthis.setPropertyValue(\"hideOversized\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Hide if text does not fit?\r\n\t */\r\n\tpublic get hideOversized(): boolean {\r\n\t\treturn this.getPropertyValue(\"hideOversized\");\r\n\t}\r\n\r\n\t/**\r\n\t * Override `mesaureElement` so it does not get measure again, because\r\n\t * internal `_bbox` is being updated by measuring routines in Text itself.\r\n\t */\r\n\tpublic measureElement(): void { }\r\n\r\n\t/**\r\n\t * Returns information about a line element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {number}         index  Line index\r\n\t * @return {ITextLineInfo}         Line info object\r\n\t */\r\n\tpublic getLineInfo(index: number): ITextLineInfo {\r\n\t\tthis.initLineCache();\r\n\t\tlet lines = this.getCache(\"lineInfo\");\r\n\t\treturn lines.length > index ? lines[index] : undefined;\r\n\t}\r\n\r\n\t/**\r\n\t * Adds a line to line info cache.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {ITextLineInfo}  line     Line info object\r\n\t * @param {number}         index    Insert at specified index\r\n\t */\r\n\tpublic addLineInfo(line: ITextLineInfo, index: number): void {\r\n\t\tthis.initLineCache();\r\n\t\tthis.getCache(\"lineInfo\")[index] = line;\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if line cache is initialized and initializes it.\r\n\t */\r\n\tprivate initLineCache(): void {\r\n\t\tif (!this.getCache(\"lineInfo\")) {\r\n\t\t\tthis.setCache(\"lineInfo\", []);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Sets a [[DataItem]] to use for populating dynamic sections of the text.\r\n\t *\r\n\t * Check the description for [[Text]] class, for data binding.\r\n\t *\r\n\t * @param {DataItem} dataItem Data item\r\n\t */\r\n\tpublic setDataItem(dataItem: DataItem): void {\r\n\t\tif (this._sourceDataItemEvents) {\r\n\t\t\tthis._sourceDataItemEvents.dispose();\r\n\t\t}\r\n\t\tif (dataItem) {\r\n\t\t\tthis._sourceDataItemEvents = new MultiDisposer([\r\n\t\t\t\tdataItem.events.on(\"valuechanged\", this.invalidate, this),\r\n\t\t\t\tdataItem.events.on(\"workingvaluechanged\", this.invalidate, this),\r\n\t\t\t\tdataItem.events.on(\"calculatedvaluechanged\", this.invalidate, this),\r\n\t\t\t\tdataItem.events.on(\"propertychanged\", this.invalidate, this)\r\n\t\t\t]);\r\n\t\t}\r\n\t\tsuper.setDataItem(dataItem);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns available horizontal space.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {number} Available width (px)\r\n\t */\r\n\tpublic get availableWidth(): number {\r\n\t\treturn $type.hasValue(this.maxWidth) ? this.maxWidth : this.pixelWidth;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns available vertical space.\r\n\t *\r\n\t * @return {number} Available height (px)\r\n\t */\r\n\tpublic get availableHeight(): number {\r\n\t\treturn $type.hasValue(this.maxHeight) ? this.maxHeight : this.pixelHeight;\r\n\t}\r\n\r\n\t/**\r\n\t * Invalidates the whole element, causing its redraw.\r\n\t *\r\n\t * Appending `<defs>` section might influence appearance and thus its\r\n\t * dimensions.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic appendDefs() {\r\n\t\tsuper.appendDefs();\r\n\t\tthis.invalidate(); // otherwise getBBOx of text element returns 0 simetimes\r\n\t}\r\n\r\n\t// temp, replacing textFormatter method\r\n\tpublic getSvgElement(text: string, style?: string): AMElement {\r\n\t\tlet element = this.paper.add(\"tspan\");\r\n\t\telement.textContent = text;\r\n\t\tif (style) {\r\n\t\t\telement.node.setAttribute(\"style\", style);\r\n\t\t}\r\n\t\treturn element;\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"Label\"] = Label;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/elements/Label.ts","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_ctx.js\n// module id = 41\n// module chunks = 26","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_cof.js\n// module id = 42\n// module chunks = 26","'use strict';\nvar fails = require('./_fails');\n\nmodule.exports = function (method, arg) {\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call\n    arg ? method.call(null, function () { /* empty */ }, 1) : method.call(null);\n  });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_strict-method.js\n// module id = 43\n// module chunks = 26","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_to-primitive.js\n// module id = 44\n// module chunks = 26","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_defined.js\n// module id = 45\n// module chunks = 26","// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_to-integer.js\n// module id = 46\n// module chunks = 26","// most Object methods by ES6 should accept primitives\nvar $export = require('./_export');\nvar core = require('./_core');\nvar fails = require('./_fails');\nmodule.exports = function (KEY, exec) {\n  var fn = (core.Object || {})[KEY] || Object[KEY];\n  var exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function () { fn(1); }), 'Object', exp);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_object-sap.js\n// module id = 47\n// module chunks = 26","// 0 -> Array#forEach\n// 1 -> Array#map\n// 2 -> Array#filter\n// 3 -> Array#some\n// 4 -> Array#every\n// 5 -> Array#find\n// 6 -> Array#findIndex\nvar ctx = require('./_ctx');\nvar IObject = require('./_iobject');\nvar toObject = require('./_to-object');\nvar toLength = require('./_to-length');\nvar asc = require('./_array-species-create');\nmodule.exports = function (TYPE, $create) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  var create = $create || asc;\n  return function ($this, callbackfn, that) {\n    var O = toObject($this);\n    var self = IObject(O);\n    var f = ctx(callbackfn, that, 3);\n    var length = toLength(self.length);\n    var index = 0;\n    var result = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined;\n    var val, res;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      val = self[index];\n      res = f(val, index, O);\n      if (TYPE) {\n        if (IS_MAP) result[index] = res;   // map\n        else if (res) switch (TYPE) {\n          case 3: return true;             // some\n          case 5: return val;              // find\n          case 6: return index;            // findIndex\n          case 2: result.push(val);        // filter\n        } else if (IS_EVERY) return false; // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result;\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_array-methods.js\n// module id = 48\n// module chunks = 26","/**\r\n * Rounded rectangle module.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Sprite, ISpriteProperties, ISpriteAdapters, ISpriteEvents, SpriteEventDispatcher, AMEvent } from \"../Sprite\";\r\nimport { registry } from \"../Registry\";\r\nimport * as $math from \"../utils/Math\";\r\nimport * as $type from \"../utils/Type\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[RoundedRectangle]].\r\n */\r\nexport interface IRoundedRectangleProperties extends ISpriteProperties {\r\n\r\n\t/**\r\n\t * Radius of the top-left corner in pixels.\r\n\t *\r\n\t * @default 3\r\n\t * @type {number}\r\n\t */\r\n\tcornerRadiusTopLeft?: number;\r\n\r\n\t/**\r\n\t * Radius of the top-right corner in pixels.\r\n\t *\r\n\t * @default 3\r\n\t * @type {number}\r\n\t */\r\n\tcornerRadiusTopRight?: number;\r\n\r\n\t/**\r\n\t * Radius of the bottom-right corner in pixels.\r\n\t *\r\n\t * @default 3\r\n\t * @type {number}\r\n\t */\r\n\tcornerRadiusBottomRight?: number;\r\n\r\n\t/**\r\n\t * Radius of the bottom-left corner in pixels.\r\n\t *\r\n\t * @default 3\r\n\t * @type {number}\r\n\t */\r\n\tcornerRadiusBottomLeft?: number;\r\n\r\n}\r\n\r\n/**\r\n * Defines events for [[RoundedRectangle]].\r\n */\r\nexport interface IRoundedRectangleEvents extends ISpriteEvents { }\r\n\r\n/**\r\n * Defines adapters for [[RoundedRectangle]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface IRoundedRectangleAdapters extends ISpriteAdapters, IRoundedRectangleProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Draws a rectangle with rounded corners.\r\n *\r\n * @see {@link IRoundedRectangleEvents} for a list of available events\r\n * @see {@link IRoundedRectangleAdapters} for a list of available Adapters\r\n */\r\nexport class RoundedRectangle extends Sprite {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IRoundedRectangleProperties}\r\n\t */\r\n\tpublic _properties!: IRoundedRectangleProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IRoundedRectangleAdapters}\r\n\t */\r\n\tpublic _adapter!: IRoundedRectangleAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IRoundedRectangleEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IRoundedRectangleEvents;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"RoundedRectangle\";\r\n\r\n\t\tthis.element = this.paper.add(\"path\");\r\n\r\n\t\tthis.pixelPerfect = true;\r\n\r\n\t\tthis.cornerRadius(3, 3, 3, 3);\r\n\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Draws the element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic draw(): void {\r\n\t\tsuper.draw();\r\n\r\n\t\tlet w: number = this.innerWidth;\r\n\t\tlet h: number = this.innerHeight;\r\n\r\n\t\tif ($type.isNumber(w) && $type.isNumber(h)) {\r\n\t\t\tlet maxcr: number = $math.min(Math.abs(w / 2), Math.abs(h / 2));\r\n\t\t\tlet crtl: number = $math.fitToRange(this.cornerRadiusTopLeft, 0, maxcr);\r\n\t\t\tlet crtr: number = $math.fitToRange(this.cornerRadiusTopRight, 0, maxcr);\r\n\t\t\tlet crbr: number = $math.fitToRange(this.cornerRadiusBottomRight, 0, maxcr);\r\n\t\t\tlet crbl: number = $math.fitToRange(this.cornerRadiusBottomLeft, 0, maxcr);\r\n\r\n\t\t\tlet lineT: string = \"M\" + crtl + \",0 L\" + (w - crtr) + \",0\";\r\n\t\t\tlet lineB: string = \" L\" + crbl + \",\" + h;\r\n\t\t\tlet lineL: string = \" L0,\" + crtl;\r\n\t\t\tlet lineR: string = \" L\" + w + \",\" + (h - crbr);\r\n\r\n\t\t\tlet arcTR: string = \" a\" + crtr + \",\" + crtr + \" 0 0 1 \" + crtr + \",\" + crtr;\r\n\t\t\tlet arcBR: string = \" a\" + crbr + \",\" + crbr + \" 0 0 1 -\" + crbr + \",\" + crbr;\r\n\t\t\tlet arcBL: string = \" a\" + crbl + \",\" + crbl + \" 0 0 1 -\" + crbl + \",-\" + crbl;\r\n\t\t\tlet arcTL: string = \" a\" + crtl + \",\" + crtl + \" 0 0 1 \" + crtl + \",-\" + crtl;\r\n\r\n\r\n\t\t\tlet path: string = lineT + arcTR + lineR + arcBR + lineB + arcBL + lineL + arcTL + \" Z\";\r\n\r\n\t\t\tthis.element.attr({ \"d\": path });\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Sets radius for all four corners at ones.\r\n\t *\r\n\t * All numbers are in pixels.\r\n\t *\r\n\t * @param {number}  tl  Top-left corner\r\n\t * @param {number}  tr  Top-right corner\r\n\t * @param {number}  bl  Bottom-left corner\r\n\t * @param {number}  br  Bottom-right corner\r\n\t */\r\n\tpublic cornerRadius(tl: number, tr: number, bl: number, br: number) {\r\n\t\tthis.cornerRadiusTopLeft = tl;\r\n\t\tthis.cornerRadiusTopRight = tr;\r\n\t\tthis.cornerRadiusBottomLeft = bl;\r\n\t\tthis.cornerRadiusBottomRight = br;\r\n\t}\r\n\r\n\t/**\r\n\t * Radius of the top-left corner in pixels.\r\n\t *\r\n\t * @default 3\r\n\t * @param {number}  value  Radius (px)\r\n\t */\r\n\tpublic set cornerRadiusTopLeft(value: number) {\r\n\t\tthis.setPropertyValue(\"cornerRadiusTopLeft\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Radius (px)\r\n\t */\r\n\tpublic get cornerRadiusTopLeft(): number {\r\n\t\treturn this.getPropertyValue(\"cornerRadiusTopLeft\");\r\n\t}\r\n\r\n\t/**\r\n\t * Radius of the top-right corner in pixels.\r\n\t *\r\n\t * @default 3\r\n\t * @param {number}  value  Radius (px)\r\n\t */\r\n\tpublic set cornerRadiusTopRight(value: number) {\r\n\t\tthis.setPropertyValue(\"cornerRadiusTopRight\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Radius (px)\r\n\t */\r\n\tpublic get cornerRadiusTopRight(): number {\r\n\t\treturn this.getPropertyValue(\"cornerRadiusTopRight\");\r\n\t}\r\n\r\n\t/**\r\n\t * Radius of the bottom-right corner in pixels.\r\n\t *\r\n\t * @default 3\r\n\t * @param {number}  value  Radius (px)\r\n\t */\r\n\tpublic set cornerRadiusBottomRight(value: number) {\r\n\t\tthis.setPropertyValue(\"cornerRadiusBottomRight\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Radius (px)\r\n\t */\r\n\tpublic get cornerRadiusBottomRight(): number {\r\n\t\treturn this.getPropertyValue(\"cornerRadiusBottomRight\");\r\n\t}\r\n\r\n\t/**\r\n\t * Radius of the bottom-left corner in pixels.\r\n\t *\r\n\t * @default 3\r\n\t * @param {number}  value  Radius (px)\r\n\t */\r\n\tpublic set cornerRadiusBottomLeft(value: number) {\r\n\t\tthis.setPropertyValue(\"cornerRadiusBottomLeft\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Radius (px)\r\n\t */\r\n\tpublic get cornerRadiusBottomLeft(): number {\r\n\t\treturn this.getPropertyValue(\"cornerRadiusBottomLeft\");\r\n\t}\r\n\r\n\t/**\r\n\t * Measures the element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic measureElement(): void {\r\n\t\tthis.bbox = { x: 0, y: 0, width: this.innerWidth, height: this.innerHeight };\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"RoundedRectangle\"] = RoundedRectangle;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/elements/RoundedRectangle.ts","/**\r\n * This module contains a base class for an SVG filter.\r\n *\r\n * Filters can be used to decorate, change and transform just about any DOM\r\n * element.\r\n *\r\n * A Filter works by applying one or more effects (primitives) to SVG element.\r\n *\r\n * For more information on how SVG filters work, refer to\r\n * [this MDN tutorial](https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/SVG_Filters_Tutorial).\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { BaseObject } from \"../../Base\";\r\nimport { getSystem } from \"../../System\";\r\nimport { registry } from \"../../Registry\";\r\nimport { Paper } from \"../Paper\";\r\nimport { Group } from \"../Group\";\r\nimport { AMElement } from \"../AMElement\";\r\nimport { Animation, IAnimatable, IAnimationOptions, AnimationDisposer } from \"../../utils/Animation\";\r\nimport { List } from \"../../utils/List\";\r\nimport { MultiDisposer } from \"../../utils/Disposer\";\r\nimport { Sprite } from \"../../Sprite\";\r\nimport * as $object from \"../../utils/Object\";\r\nimport * as $iter from \"../../utils/Iterator\";\r\nimport * as $type from \"../../utils/Type\";\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for a base filter\r\n * @type {string}\r\n */\r\nexport interface FilterProperties {\r\n\r\n\t/**\r\n\t * Width of the filter in pixels.\r\n\t *\r\n\t * @default 120\r\n\t * @type {number}\r\n\t */\r\n\twidth: number;\r\n\r\n\t/**\r\n\t * Height of the filter in pixels.\r\n\t *\r\n\t * @default 120\r\n\t * @type {number}\r\n\t */\r\n\theight: number;\r\n\r\n};\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Base filter class.\r\n *\r\n * This class while can be instantiated will not do anything. It is just a base\r\n * functionality for any other \"real\" filters to extend.\r\n *\r\n * Filters can be used to decorate, change and transform just about any DOM\r\n * element.\r\n *\r\n * A Filter works by applying one or more effects (primitives) to SVG element.\r\n *\r\n * For more information on how SVG filters work, refer to\r\n * [this MDN tutorial](https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/SVG_Filters_Tutorial).\r\n *\r\n * @todo Example\r\n */\r\nexport class Filter extends BaseObject implements IAnimatable {\r\n\r\n\t/**\r\n\t * List of animations currently running for the filter.\r\n\t *\r\n\t * @type {Optional<Array<Animation>>}\r\n\t */\r\n\tprotected _animations: $type.Optional<Array<Animation>>;\r\n\r\n\t/**\r\n\t * Contains a list of filter primitives (effects) applied by the filter.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {List<AMElement>}\r\n\t */\r\n\tpublic filterPrimitives: List<AMElement>;\r\n\r\n\t/**\r\n\t * Defines property types.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {FilterProperties}\r\n\t */\r\n\tpublic _properties!: FilterProperties;\r\n\r\n\t/**\r\n\t * A storage for Filter property/value pairs.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @see {@link FilterProperties}\r\n\t * @type {FilterProperties}\r\n\t */\r\n\tpublic properties: this[\"_properties\"] = <any>{};\r\n\t//public propertyValues = new Dictionary<FilterProperties, any>();\r\n\r\n\t/**\r\n\t * An SVG `<group>` element hold primitive (effect) definitions.\r\n\t *\r\n\t * @type {Optional<Group>}\r\n\t */\r\n\tpublic filterElement: $type.Optional<Group>;\r\n\r\n\t/**\r\n\t * Identifies if this object is a \"template\" and should not be treated as\r\n\t * real object that is drawn or actually used in the chart.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tpublic isTemplate: boolean = false;\r\n\r\n\t/**\r\n\t * A Paper instance to add element to.\r\n\t *\r\n\t * @type {Paper}\r\n\t */\r\n\tprotected _paper: $type.Optional<Paper>;\r\n\r\n\t/**\r\n\t * [_scale description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\tprotected _scale: number = 1;\r\n\r\n\t/**\r\n\t * [_nonScaling description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {boolean}\r\n\t */\r\n\tprotected _nonScaling: boolean = true;\r\n\r\n\t/**\r\n\t * A target element this filter is currently attached to.\r\n\t *\r\n\t * We need to keep track of it because one filter can be used for just one\r\n\t * element, so we have to remove it from the old \"parent\" when attaching to\r\n\t * the new one.\r\n\t */\r\n\tprotected _sprite: $type.Optional<Sprite>;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\r\n\t\t// Init\r\n\t\tsuper();\r\n\t\tthis.className = \"Filter\";\r\n\r\n\t\t// Create a list to hold primitives (effect elements)\r\n\t\tthis.filterPrimitives = new List<any>();\r\n\r\n\t\t// Automatically add added primitives to `_disposers` so they are discarded\r\n\t\t// when Filter object is destroyed (disposed)\r\n\t\tthis.filterPrimitives.events.on(\"inserted\", (ev) => {\r\n\t\t\tthis._disposers.push(ev.newValue);\r\n\t\t});\r\n\r\n\t\t// Set default dimensions\r\n\t\tthis.width = 120;\r\n\t\tthis.height = 120;\r\n\r\n\t\t// Apply theme\r\n\t\tthis.applyTheme();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Appends actual filter elements to the filter group.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {Group} filterElement An SVG `<group>` element to add filter element to\r\n\t */\r\n\tpublic appendPrimitives(filterElement: Group): void {\r\n\t\t$iter.each(this.filterPrimitives.iterator(), (filterPrimitive) => {\r\n\t\t\tfilterElement.add(filterPrimitive);\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Uses Transitions filter's values from current to target. This is used to\r\n\t * smoothly appear filter, rather than it pop into effect.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {IAnimationOptions[] | IAnimationOptions}  animationOptions  Animation options\r\n\t * @param  {number}                                   duration          Duration in milliseconds\r\n\t * @param  {(number) => number}                       easing            Easing function\r\n\t * @return {Animation}                                                  Animation instance\r\n\t */\r\n\tpublic animate(animationOptions: IAnimationOptions[] | IAnimationOptions, duration: number, easing?: (value: number) => number): Animation {\r\n\t\tlet animation: Animation = new Animation(this, animationOptions, duration, easing).start();\r\n\t\treturn animation;\r\n\t}\r\n\r\n\t/**\r\n\t * Width of the filter element in pixels.\r\n\t *\r\n\t * @default 120\r\n\t * @param {number} value Width (px)\r\n\t */\r\n\tpublic set width(value: number) {\r\n\t\tthis.properties[\"width\"] = value;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Width (px)\r\n\t */\r\n\tpublic get width(): number {\r\n\t\treturn this.properties[\"width\"];\r\n\t}\r\n\r\n\t/**\r\n\t * Height of the filter element in pixels.\r\n\t *\r\n\t * @default 120\r\n\t * @param {number} value Height (px)\r\n\t */\r\n\tpublic set height(value: number) {\r\n\t\tthis.properties[\"height\"] = value;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Height\r\n\t */\r\n\tpublic get height(): number {\r\n\t\treturn this.properties[\"height\"];\r\n\t}\r\n\r\n\t/**\r\n\t * Copies properties from another [[Filter]] object.\r\n\t *\r\n\t * @param {Filter} filter Source [[Filter]] object\r\n\t */\r\n\tpublic copyFrom(filter: this): void {\r\n\t\tsuper.copyFrom(filter);\r\n\t\t$object.each(filter.properties, (key, value) => {\r\n\t\t\t(<any>this)[key] = value;\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Sets [[Paper]] instance to create filter's elements in.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {Paper}  paper  Paper\r\n\t */\r\n\tpublic set paper(paper: Paper) {\r\n\t\tif (this._paper != paper) {\r\n\t\t\tthis._paper = paper;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Paper} Paper\r\n\t */\r\n\tpublic get paper(): Paper {\r\n\t\tif (this._paper) {\r\n\t\t\treturn this._paper;\r\n\t\t}\r\n\t\treturn getSystem().ghostPaper;\r\n\t}\r\n\r\n\t/**\r\n\t * All animations currently in play.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {Array<Animation>} List of animations\r\n\t */\r\n\tpublic get animations(): Array<Animation> {\r\n\t\tif (!this._animations) {\r\n\t\t\tthis._animations = [];\r\n\t\t\tthis._disposers.push(new AnimationDisposer(this._animations));\r\n\t\t}\r\n\t\treturn this._animations;\r\n\t}\r\n\r\n\t/**\r\n\t * [[Sprite]] uses this method to inform filter about it's scale.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic set scale(value: number) {\r\n\t\tthis._scale = value;\r\n\t\tthis.updateScale();\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic get scale(): number {\r\n\t\treturn this._scale;\r\n\t}\r\n\r\n\t/**\r\n\t * Updates filter properties which depend on scale.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tprotected updateScale() {\r\n\t\t// Dummy method for extending classes to override.\r\n\t}\r\n\r\n\t/**\r\n\t * If a filter is non scaling, it will look the same even if the sprite is\r\n\t * scaled, otherwise filter will scale together with a [[Sprite]].\r\n\t *\r\n\t * @default false\r\n\t * @param {boolean}  value  Non scaling?\r\n\t */\r\n\tpublic set nonScaling(value: boolean) {\r\n\t\tthis._nonScaling = value;\r\n\t\tif (!value) {\r\n\t\t\tthis._scale = 1;\r\n\t\t}\r\n\t\tthis.updateScale();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Non scaling?\r\n\t */\r\n\tpublic get nonScaling(): boolean {\r\n\t\treturn this._nonScaling;\r\n\t}\r\n\r\n\t/**\r\n\t * A target element this filter is currently attached to.\r\n\t *\r\n\t * We need to keep track of it because one filter can be used for just one\r\n\t * element, so we have to remove it from the old \"parent\" when attaching to\r\n\t * the new one.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {Sprite}  value  Target element\r\n\t */\r\n\tpublic set sprite(value: Sprite) {\r\n\t\tthis.setSprite(value);\r\n\t}\r\n\r\n\t/**\r\n\t * Sets filter's target element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {Sprite}  value  Element filter is being attached to\r\n\t */\r\n\tprotected setSprite(value: Sprite): void {\r\n\t\tif (this._sprite && this._sprite != value) {\r\n\t\t\tthis._sprite.filters.removeValue(this);\r\n\t\t}\r\n\t\tthis._sprite = value;\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../../src/.internal/core/rendering/filters/Filter.ts","var core = module.exports = { version: '2.5.5' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_core.js\n// module id = 51\n// module chunks = 26","'use strict';\nif (require('./_descriptors')) {\n  var LIBRARY = require('./_library');\n  var global = require('./_global');\n  var fails = require('./_fails');\n  var $export = require('./_export');\n  var $typed = require('./_typed');\n  var $buffer = require('./_typed-buffer');\n  var ctx = require('./_ctx');\n  var anInstance = require('./_an-instance');\n  var propertyDesc = require('./_property-desc');\n  var hide = require('./_hide');\n  var redefineAll = require('./_redefine-all');\n  var toInteger = require('./_to-integer');\n  var toLength = require('./_to-length');\n  var toIndex = require('./_to-index');\n  var toAbsoluteIndex = require('./_to-absolute-index');\n  var toPrimitive = require('./_to-primitive');\n  var has = require('./_has');\n  var classof = require('./_classof');\n  var isObject = require('./_is-object');\n  var toObject = require('./_to-object');\n  var isArrayIter = require('./_is-array-iter');\n  var create = require('./_object-create');\n  var getPrototypeOf = require('./_object-gpo');\n  var gOPN = require('./_object-gopn').f;\n  var getIterFn = require('./core.get-iterator-method');\n  var uid = require('./_uid');\n  var wks = require('./_wks');\n  var createArrayMethod = require('./_array-methods');\n  var createArrayIncludes = require('./_array-includes');\n  var speciesConstructor = require('./_species-constructor');\n  var ArrayIterators = require('./es6.array.iterator');\n  var Iterators = require('./_iterators');\n  var $iterDetect = require('./_iter-detect');\n  var setSpecies = require('./_set-species');\n  var arrayFill = require('./_array-fill');\n  var arrayCopyWithin = require('./_array-copy-within');\n  var $DP = require('./_object-dp');\n  var $GOPD = require('./_object-gopd');\n  var dP = $DP.f;\n  var gOPD = $GOPD.f;\n  var RangeError = global.RangeError;\n  var TypeError = global.TypeError;\n  var Uint8Array = global.Uint8Array;\n  var ARRAY_BUFFER = 'ArrayBuffer';\n  var SHARED_BUFFER = 'Shared' + ARRAY_BUFFER;\n  var BYTES_PER_ELEMENT = 'BYTES_PER_ELEMENT';\n  var PROTOTYPE = 'prototype';\n  var ArrayProto = Array[PROTOTYPE];\n  var $ArrayBuffer = $buffer.ArrayBuffer;\n  var $DataView = $buffer.DataView;\n  var arrayForEach = createArrayMethod(0);\n  var arrayFilter = createArrayMethod(2);\n  var arraySome = createArrayMethod(3);\n  var arrayEvery = createArrayMethod(4);\n  var arrayFind = createArrayMethod(5);\n  var arrayFindIndex = createArrayMethod(6);\n  var arrayIncludes = createArrayIncludes(true);\n  var arrayIndexOf = createArrayIncludes(false);\n  var arrayValues = ArrayIterators.values;\n  var arrayKeys = ArrayIterators.keys;\n  var arrayEntries = ArrayIterators.entries;\n  var arrayLastIndexOf = ArrayProto.lastIndexOf;\n  var arrayReduce = ArrayProto.reduce;\n  var arrayReduceRight = ArrayProto.reduceRight;\n  var arrayJoin = ArrayProto.join;\n  var arraySort = ArrayProto.sort;\n  var arraySlice = ArrayProto.slice;\n  var arrayToString = ArrayProto.toString;\n  var arrayToLocaleString = ArrayProto.toLocaleString;\n  var ITERATOR = wks('iterator');\n  var TAG = wks('toStringTag');\n  var TYPED_CONSTRUCTOR = uid('typed_constructor');\n  var DEF_CONSTRUCTOR = uid('def_constructor');\n  var ALL_CONSTRUCTORS = $typed.CONSTR;\n  var TYPED_ARRAY = $typed.TYPED;\n  var VIEW = $typed.VIEW;\n  var WRONG_LENGTH = 'Wrong length!';\n\n  var $map = createArrayMethod(1, function (O, length) {\n    return allocate(speciesConstructor(O, O[DEF_CONSTRUCTOR]), length);\n  });\n\n  var LITTLE_ENDIAN = fails(function () {\n    // eslint-disable-next-line no-undef\n    return new Uint8Array(new Uint16Array([1]).buffer)[0] === 1;\n  });\n\n  var FORCED_SET = !!Uint8Array && !!Uint8Array[PROTOTYPE].set && fails(function () {\n    new Uint8Array(1).set({});\n  });\n\n  var toOffset = function (it, BYTES) {\n    var offset = toInteger(it);\n    if (offset < 0 || offset % BYTES) throw RangeError('Wrong offset!');\n    return offset;\n  };\n\n  var validate = function (it) {\n    if (isObject(it) && TYPED_ARRAY in it) return it;\n    throw TypeError(it + ' is not a typed array!');\n  };\n\n  var allocate = function (C, length) {\n    if (!(isObject(C) && TYPED_CONSTRUCTOR in C)) {\n      throw TypeError('It is not a typed array constructor!');\n    } return new C(length);\n  };\n\n  var speciesFromList = function (O, list) {\n    return fromList(speciesConstructor(O, O[DEF_CONSTRUCTOR]), list);\n  };\n\n  var fromList = function (C, list) {\n    var index = 0;\n    var length = list.length;\n    var result = allocate(C, length);\n    while (length > index) result[index] = list[index++];\n    return result;\n  };\n\n  var addGetter = function (it, key, internal) {\n    dP(it, key, { get: function () { return this._d[internal]; } });\n  };\n\n  var $from = function from(source /* , mapfn, thisArg */) {\n    var O = toObject(source);\n    var aLen = arguments.length;\n    var mapfn = aLen > 1 ? arguments[1] : undefined;\n    var mapping = mapfn !== undefined;\n    var iterFn = getIterFn(O);\n    var i, length, values, result, step, iterator;\n    if (iterFn != undefined && !isArrayIter(iterFn)) {\n      for (iterator = iterFn.call(O), values = [], i = 0; !(step = iterator.next()).done; i++) {\n        values.push(step.value);\n      } O = values;\n    }\n    if (mapping && aLen > 2) mapfn = ctx(mapfn, arguments[2], 2);\n    for (i = 0, length = toLength(O.length), result = allocate(this, length); length > i; i++) {\n      result[i] = mapping ? mapfn(O[i], i) : O[i];\n    }\n    return result;\n  };\n\n  var $of = function of(/* ...items */) {\n    var index = 0;\n    var length = arguments.length;\n    var result = allocate(this, length);\n    while (length > index) result[index] = arguments[index++];\n    return result;\n  };\n\n  // iOS Safari 6.x fails here\n  var TO_LOCALE_BUG = !!Uint8Array && fails(function () { arrayToLocaleString.call(new Uint8Array(1)); });\n\n  var $toLocaleString = function toLocaleString() {\n    return arrayToLocaleString.apply(TO_LOCALE_BUG ? arraySlice.call(validate(this)) : validate(this), arguments);\n  };\n\n  var proto = {\n    copyWithin: function copyWithin(target, start /* , end */) {\n      return arrayCopyWithin.call(validate(this), target, start, arguments.length > 2 ? arguments[2] : undefined);\n    },\n    every: function every(callbackfn /* , thisArg */) {\n      return arrayEvery(validate(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    fill: function fill(value /* , start, end */) { // eslint-disable-line no-unused-vars\n      return arrayFill.apply(validate(this), arguments);\n    },\n    filter: function filter(callbackfn /* , thisArg */) {\n      return speciesFromList(this, arrayFilter(validate(this), callbackfn,\n        arguments.length > 1 ? arguments[1] : undefined));\n    },\n    find: function find(predicate /* , thisArg */) {\n      return arrayFind(validate(this), predicate, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    findIndex: function findIndex(predicate /* , thisArg */) {\n      return arrayFindIndex(validate(this), predicate, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    forEach: function forEach(callbackfn /* , thisArg */) {\n      arrayForEach(validate(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    indexOf: function indexOf(searchElement /* , fromIndex */) {\n      return arrayIndexOf(validate(this), searchElement, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    includes: function includes(searchElement /* , fromIndex */) {\n      return arrayIncludes(validate(this), searchElement, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    join: function join(separator) { // eslint-disable-line no-unused-vars\n      return arrayJoin.apply(validate(this), arguments);\n    },\n    lastIndexOf: function lastIndexOf(searchElement /* , fromIndex */) { // eslint-disable-line no-unused-vars\n      return arrayLastIndexOf.apply(validate(this), arguments);\n    },\n    map: function map(mapfn /* , thisArg */) {\n      return $map(validate(this), mapfn, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    reduce: function reduce(callbackfn /* , initialValue */) { // eslint-disable-line no-unused-vars\n      return arrayReduce.apply(validate(this), arguments);\n    },\n    reduceRight: function reduceRight(callbackfn /* , initialValue */) { // eslint-disable-line no-unused-vars\n      return arrayReduceRight.apply(validate(this), arguments);\n    },\n    reverse: function reverse() {\n      var that = this;\n      var length = validate(that).length;\n      var middle = Math.floor(length / 2);\n      var index = 0;\n      var value;\n      while (index < middle) {\n        value = that[index];\n        that[index++] = that[--length];\n        that[length] = value;\n      } return that;\n    },\n    some: function some(callbackfn /* , thisArg */) {\n      return arraySome(validate(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    sort: function sort(comparefn) {\n      return arraySort.call(validate(this), comparefn);\n    },\n    subarray: function subarray(begin, end) {\n      var O = validate(this);\n      var length = O.length;\n      var $begin = toAbsoluteIndex(begin, length);\n      return new (speciesConstructor(O, O[DEF_CONSTRUCTOR]))(\n        O.buffer,\n        O.byteOffset + $begin * O.BYTES_PER_ELEMENT,\n        toLength((end === undefined ? length : toAbsoluteIndex(end, length)) - $begin)\n      );\n    }\n  };\n\n  var $slice = function slice(start, end) {\n    return speciesFromList(this, arraySlice.call(validate(this), start, end));\n  };\n\n  var $set = function set(arrayLike /* , offset */) {\n    validate(this);\n    var offset = toOffset(arguments[1], 1);\n    var length = this.length;\n    var src = toObject(arrayLike);\n    var len = toLength(src.length);\n    var index = 0;\n    if (len + offset > length) throw RangeError(WRONG_LENGTH);\n    while (index < len) this[offset + index] = src[index++];\n  };\n\n  var $iterators = {\n    entries: function entries() {\n      return arrayEntries.call(validate(this));\n    },\n    keys: function keys() {\n      return arrayKeys.call(validate(this));\n    },\n    values: function values() {\n      return arrayValues.call(validate(this));\n    }\n  };\n\n  var isTAIndex = function (target, key) {\n    return isObject(target)\n      && target[TYPED_ARRAY]\n      && typeof key != 'symbol'\n      && key in target\n      && String(+key) == String(key);\n  };\n  var $getDesc = function getOwnPropertyDescriptor(target, key) {\n    return isTAIndex(target, key = toPrimitive(key, true))\n      ? propertyDesc(2, target[key])\n      : gOPD(target, key);\n  };\n  var $setDesc = function defineProperty(target, key, desc) {\n    if (isTAIndex(target, key = toPrimitive(key, true))\n      && isObject(desc)\n      && has(desc, 'value')\n      && !has(desc, 'get')\n      && !has(desc, 'set')\n      // TODO: add validation descriptor w/o calling accessors\n      && !desc.configurable\n      && (!has(desc, 'writable') || desc.writable)\n      && (!has(desc, 'enumerable') || desc.enumerable)\n    ) {\n      target[key] = desc.value;\n      return target;\n    } return dP(target, key, desc);\n  };\n\n  if (!ALL_CONSTRUCTORS) {\n    $GOPD.f = $getDesc;\n    $DP.f = $setDesc;\n  }\n\n  $export($export.S + $export.F * !ALL_CONSTRUCTORS, 'Object', {\n    getOwnPropertyDescriptor: $getDesc,\n    defineProperty: $setDesc\n  });\n\n  if (fails(function () { arrayToString.call({}); })) {\n    arrayToString = arrayToLocaleString = function toString() {\n      return arrayJoin.call(this);\n    };\n  }\n\n  var $TypedArrayPrototype$ = redefineAll({}, proto);\n  redefineAll($TypedArrayPrototype$, $iterators);\n  hide($TypedArrayPrototype$, ITERATOR, $iterators.values);\n  redefineAll($TypedArrayPrototype$, {\n    slice: $slice,\n    set: $set,\n    constructor: function () { /* noop */ },\n    toString: arrayToString,\n    toLocaleString: $toLocaleString\n  });\n  addGetter($TypedArrayPrototype$, 'buffer', 'b');\n  addGetter($TypedArrayPrototype$, 'byteOffset', 'o');\n  addGetter($TypedArrayPrototype$, 'byteLength', 'l');\n  addGetter($TypedArrayPrototype$, 'length', 'e');\n  dP($TypedArrayPrototype$, TAG, {\n    get: function () { return this[TYPED_ARRAY]; }\n  });\n\n  // eslint-disable-next-line max-statements\n  module.exports = function (KEY, BYTES, wrapper, CLAMPED) {\n    CLAMPED = !!CLAMPED;\n    var NAME = KEY + (CLAMPED ? 'Clamped' : '') + 'Array';\n    var GETTER = 'get' + KEY;\n    var SETTER = 'set' + KEY;\n    var TypedArray = global[NAME];\n    var Base = TypedArray || {};\n    var TAC = TypedArray && getPrototypeOf(TypedArray);\n    var FORCED = !TypedArray || !$typed.ABV;\n    var O = {};\n    var TypedArrayPrototype = TypedArray && TypedArray[PROTOTYPE];\n    var getter = function (that, index) {\n      var data = that._d;\n      return data.v[GETTER](index * BYTES + data.o, LITTLE_ENDIAN);\n    };\n    var setter = function (that, index, value) {\n      var data = that._d;\n      if (CLAMPED) value = (value = Math.round(value)) < 0 ? 0 : value > 0xff ? 0xff : value & 0xff;\n      data.v[SETTER](index * BYTES + data.o, value, LITTLE_ENDIAN);\n    };\n    var addElement = function (that, index) {\n      dP(that, index, {\n        get: function () {\n          return getter(this, index);\n        },\n        set: function (value) {\n          return setter(this, index, value);\n        },\n        enumerable: true\n      });\n    };\n    if (FORCED) {\n      TypedArray = wrapper(function (that, data, $offset, $length) {\n        anInstance(that, TypedArray, NAME, '_d');\n        var index = 0;\n        var offset = 0;\n        var buffer, byteLength, length, klass;\n        if (!isObject(data)) {\n          length = toIndex(data);\n          byteLength = length * BYTES;\n          buffer = new $ArrayBuffer(byteLength);\n        } else if (data instanceof $ArrayBuffer || (klass = classof(data)) == ARRAY_BUFFER || klass == SHARED_BUFFER) {\n          buffer = data;\n          offset = toOffset($offset, BYTES);\n          var $len = data.byteLength;\n          if ($length === undefined) {\n            if ($len % BYTES) throw RangeError(WRONG_LENGTH);\n            byteLength = $len - offset;\n            if (byteLength < 0) throw RangeError(WRONG_LENGTH);\n          } else {\n            byteLength = toLength($length) * BYTES;\n            if (byteLength + offset > $len) throw RangeError(WRONG_LENGTH);\n          }\n          length = byteLength / BYTES;\n        } else if (TYPED_ARRAY in data) {\n          return fromList(TypedArray, data);\n        } else {\n          return $from.call(TypedArray, data);\n        }\n        hide(that, '_d', {\n          b: buffer,\n          o: offset,\n          l: byteLength,\n          e: length,\n          v: new $DataView(buffer)\n        });\n        while (index < length) addElement(that, index++);\n      });\n      TypedArrayPrototype = TypedArray[PROTOTYPE] = create($TypedArrayPrototype$);\n      hide(TypedArrayPrototype, 'constructor', TypedArray);\n    } else if (!fails(function () {\n      TypedArray(1);\n    }) || !fails(function () {\n      new TypedArray(-1); // eslint-disable-line no-new\n    }) || !$iterDetect(function (iter) {\n      new TypedArray(); // eslint-disable-line no-new\n      new TypedArray(null); // eslint-disable-line no-new\n      new TypedArray(1.5); // eslint-disable-line no-new\n      new TypedArray(iter); // eslint-disable-line no-new\n    }, true)) {\n      TypedArray = wrapper(function (that, data, $offset, $length) {\n        anInstance(that, TypedArray, NAME);\n        var klass;\n        // `ws` module bug, temporarily remove validation length for Uint8Array\n        // https://github.com/websockets/ws/pull/645\n        if (!isObject(data)) return new Base(toIndex(data));\n        if (data instanceof $ArrayBuffer || (klass = classof(data)) == ARRAY_BUFFER || klass == SHARED_BUFFER) {\n          return $length !== undefined\n            ? new Base(data, toOffset($offset, BYTES), $length)\n            : $offset !== undefined\n              ? new Base(data, toOffset($offset, BYTES))\n              : new Base(data);\n        }\n        if (TYPED_ARRAY in data) return fromList(TypedArray, data);\n        return $from.call(TypedArray, data);\n      });\n      arrayForEach(TAC !== Function.prototype ? gOPN(Base).concat(gOPN(TAC)) : gOPN(Base), function (key) {\n        if (!(key in TypedArray)) hide(TypedArray, key, Base[key]);\n      });\n      TypedArray[PROTOTYPE] = TypedArrayPrototype;\n      if (!LIBRARY) TypedArrayPrototype.constructor = TypedArray;\n    }\n    var $nativeIterator = TypedArrayPrototype[ITERATOR];\n    var CORRECT_ITER_NAME = !!$nativeIterator\n      && ($nativeIterator.name == 'values' || $nativeIterator.name == undefined);\n    var $iterator = $iterators.values;\n    hide(TypedArray, TYPED_CONSTRUCTOR, true);\n    hide(TypedArrayPrototype, TYPED_ARRAY, NAME);\n    hide(TypedArrayPrototype, VIEW, true);\n    hide(TypedArrayPrototype, DEF_CONSTRUCTOR, TypedArray);\n\n    if (CLAMPED ? new TypedArray(1)[TAG] != NAME : !(TAG in TypedArrayPrototype)) {\n      dP(TypedArrayPrototype, TAG, {\n        get: function () { return NAME; }\n      });\n    }\n\n    O[NAME] = TypedArray;\n\n    $export($export.G + $export.W + $export.F * (TypedArray != Base), O);\n\n    $export($export.S, NAME, {\n      BYTES_PER_ELEMENT: BYTES\n    });\n\n    $export($export.S + $export.F * fails(function () { Base.of.call(TypedArray, 1); }), NAME, {\n      from: $from,\n      of: $of\n    });\n\n    if (!(BYTES_PER_ELEMENT in TypedArrayPrototype)) hide(TypedArrayPrototype, BYTES_PER_ELEMENT, BYTES);\n\n    $export($export.P, NAME, proto);\n\n    setSpecies(NAME);\n\n    $export($export.P + $export.F * FORCED_SET, NAME, { set: $set });\n\n    $export($export.P + $export.F * !CORRECT_ITER_NAME, NAME, $iterators);\n\n    if (!LIBRARY && TypedArrayPrototype.toString != arrayToString) TypedArrayPrototype.toString = arrayToString;\n\n    $export($export.P + $export.F * fails(function () {\n      new TypedArray(1).slice();\n    }), NAME, { slice: $slice });\n\n    $export($export.P + $export.F * (fails(function () {\n      return [1, 2].toLocaleString() != new TypedArray([1, 2]).toLocaleString();\n    }) || !fails(function () {\n      TypedArrayPrototype.toLocaleString.call([1, 2]);\n    })), NAME, { toLocaleString: $toLocaleString });\n\n    Iterators[NAME] = CORRECT_ITER_NAME ? $nativeIterator : $iterator;\n    if (!LIBRARY && !CORRECT_ITER_NAME) hide(TypedArrayPrototype, ITERATOR, $iterator);\n  };\n} else module.exports = function () { /* empty */ };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_typed-array.js\n// module id = 52\n// module chunks = 26","var Map = require('./es6.map');\nvar $export = require('./_export');\nvar shared = require('./_shared')('metadata');\nvar store = shared.store || (shared.store = new (require('./es6.weak-map'))());\n\nvar getOrCreateMetadataMap = function (target, targetKey, create) {\n  var targetMetadata = store.get(target);\n  if (!targetMetadata) {\n    if (!create) return undefined;\n    store.set(target, targetMetadata = new Map());\n  }\n  var keyMetadata = targetMetadata.get(targetKey);\n  if (!keyMetadata) {\n    if (!create) return undefined;\n    targetMetadata.set(targetKey, keyMetadata = new Map());\n  } return keyMetadata;\n};\nvar ordinaryHasOwnMetadata = function (MetadataKey, O, P) {\n  var metadataMap = getOrCreateMetadataMap(O, P, false);\n  return metadataMap === undefined ? false : metadataMap.has(MetadataKey);\n};\nvar ordinaryGetOwnMetadata = function (MetadataKey, O, P) {\n  var metadataMap = getOrCreateMetadataMap(O, P, false);\n  return metadataMap === undefined ? undefined : metadataMap.get(MetadataKey);\n};\nvar ordinaryDefineOwnMetadata = function (MetadataKey, MetadataValue, O, P) {\n  getOrCreateMetadataMap(O, P, true).set(MetadataKey, MetadataValue);\n};\nvar ordinaryOwnMetadataKeys = function (target, targetKey) {\n  var metadataMap = getOrCreateMetadataMap(target, targetKey, false);\n  var keys = [];\n  if (metadataMap) metadataMap.forEach(function (_, key) { keys.push(key); });\n  return keys;\n};\nvar toMetaKey = function (it) {\n  return it === undefined || typeof it == 'symbol' ? it : String(it);\n};\nvar exp = function (O) {\n  $export($export.S, 'Reflect', O);\n};\n\nmodule.exports = {\n  store: store,\n  map: getOrCreateMetadataMap,\n  has: ordinaryHasOwnMetadata,\n  get: ordinaryGetOwnMetadata,\n  set: ordinaryDefineOwnMetadata,\n  keys: ordinaryOwnMetadataKeys,\n  key: toMetaKey,\n  exp: exp\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_metadata.js\n// module id = 53\n// module chunks = 26","/**\r\n * A collection of keyboard-related utilities accessible via `keyboard`\r\n * instance.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport * as $type from \"./Type\";\r\n\r\n/**\r\n * Represents named (usually frequently used) keyboard keys for easy referece.\r\n * \r\n * @type {string}\r\n */\r\nexport type KeyboardKeys =\r\n\t\"up\"\r\n\t| \"down\"\r\n\t| \"left\"\r\n\t| \"right\"\r\n\t| \"enter\"\r\n\t| \"esc\"\r\n\t| \"home\"\r\n\t| \"tab\"\r\n\t| \"end\"\r\n\t| \"ctrl\"\r\n\t| \"alt\"\r\n\t| \"shift\"\r\n\t| \"space\"\r\n\t| \"home\"\r\n\t| \"end\"\r\n\t| \"pgup\"\r\n\t| \"pgdn\"\r\n\t| \"ins\"\r\n\t| \"del\"\r\n\t| \"plus\"\r\n\t| \"minus\"\r\n\t| \"other\";\r\n\r\n/**\r\n * A class that represents collection of keyboard-related utilities.\r\n *\r\n * Do not instantiate this class directly, but rather use `keyboard` variable.\r\n */\r\nexport class Keyboard {\r\n\r\n\t/**\r\n\t * Returns a named key based on information contained in the event or\r\n\t * \"other\".\r\n\t * \r\n\t * @param  {KeyboardEvent}  ev  A keyboard event\r\n\t * @return {KeyboardKeys}       Keyboard named key\r\n\t */\r\n\tpublic getEventKey(ev: KeyboardEvent): KeyboardKeys {\r\n\r\n\t\t// Get the key code\r\n\t\tlet code: number = ev.keyCode || ev.which,\r\n\t\t\tkey: KeyboardKeys;\r\n\r\n\t\t// Map to internal key\r\n\t\tswitch (code) {\r\n\t\t\tcase 38:  key = \"up\";    break;\r\n\t\t\tcase 40:  key = \"down\";  break;\r\n\t\t\tcase 37:  key = \"left\";  break;\r\n\t\t\tcase 39:  key = \"right\"; break;\r\n\t\t\tcase 13:  key = \"enter\"; break;\r\n\t\t\tcase 27:  key = \"esc\";   break;\r\n\t\t\tcase 36:  key = \"home\";  break;\r\n\t\t\tcase 35:  key = \"end\";   break;\r\n\t\t\tcase 9:   key = \"tab\";   break;\r\n\t\t\tcase 17:  key = \"ctrl\";  break;\r\n\t\t\tcase 18:  key = \"alt\";   break;\r\n\t\t\tcase 16:  key = \"shift\"; break;\r\n\t\t\tcase 32:  key = \"space\"; break;\r\n\t\t\tcase 36:  key = \"home\";  break;\r\n\t\t\tcase 35:  key = \"end\";   break;\r\n\t\t\tcase 33:  key = \"pgup\";  break;\r\n\t\t\tcase 34:  key = \"pgdn\";  break;\r\n\t\t\tcase 45:  key = \"ins\";   break;\r\n\t\t\tcase 46:  key = \"del\";   break;\r\n\t\t\tcase 107: key = \"plus\";  break;\r\n\t\t\tcase 109: key = \"minus\"; break;\r\n\t\t\tdefault:  key = \"other\"; break;\r\n\t\t}\r\n\r\n\t\treturn key;\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if event key is one or more of the selected named keys.\r\n\t * \r\n\t * @param  {KeyboardEvent}      ev   Keyboard event\r\n\t * @param  {string | string[]}  key  Named key or array of keys\r\n\t * @return {boolean}                 Is event key one of the list?\r\n\t */\r\n\tpublic isKey(ev: KeyboardEvent, key: string | string[]): boolean {\r\n\t\tlet eventKey = this.getEventKey(ev);\r\n\t\tif ($type.isString(key)) {\r\n\t\t\tkey = [key];\r\n\t\t}\r\n\t\treturn key.indexOf(eventKey) !== -1;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns `true` if shift key was presset at the moment of the event.\r\n\t * \r\n\t * @param  {KeyboardEvent | MouseEvent}  ev  Event object\r\n\t * @return {boolean}                         Was shift pressed?\r\n\t */\r\n\tpublic shiftKey(ev: KeyboardEvent | MouseEvent): boolean {\r\n\t\treturn ev.shiftKey;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns `true` if ctrl key was presset at the moment of the event.\r\n\t * \r\n\t * @param  {KeyboardEvent | MouseEvent}  ev  Event object\r\n\t * @return {boolean}                         Was ctrl pressed?\r\n\t */\r\n\tpublic ctrlKey(ev: KeyboardEvent | MouseEvent): boolean {\r\n\t\treturn ev.ctrlKey;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns `true` if alt key was presset at the moment of the event\r\n\t * @param  {KeyboardEvent | MouseEvent}  ev  Event object\r\n\t * @return {boolean}                         Was alt pressed?\r\n\t */\r\n\tpublic altKey(ev: KeyboardEvent | MouseEvent): boolean {\r\n\t\treturn ev.altKey;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns `true` if meta key was presset at the moment of the event\r\n\t * @param  {KeyboardEvent | MouseEvent}  ev  Event object\r\n\t * @return {boolean}                         Was meta pressed?\r\n\t */\r\n\tpublic metaKey(ev: KeyboardEvent | MouseEvent): boolean {\r\n\t\treturn ev.metaKey;\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * A single [[Keyboard]] instance to be reused across all elements so that\r\n * they don't need to instantiate their own.\r\n *\r\n * @ignore Exclude from docs\r\n */\r\nexport let keyboard = new Keyboard();\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/utils/Keyboard.ts","/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Container, IContainerProperties, IContainerAdapters, IContainerEvents } from \"./Container\";\r\nimport { SpriteEventDispatcher, AMEvent } from \"./Sprite\";\r\nimport { List, IListEvents, ListDisposer } from \"./utils/List\";\r\nimport { OrderedListTemplate } from \"./utils/SortedList\";\r\nimport { Animation } from \"./utils/Animation\";\r\nimport { Dictionary } from \"./utils/Dictionary\";\r\nimport { IDisposer, MultiDisposer } from \"./utils/Disposer\";\r\nimport { Export, IExportAdapters } from \"./export/Export\";\r\nimport { DataSource } from \"./data/DataSource\";\r\nimport { Responsive } from \"./responsive/Responsive\";\r\n\r\nimport { DataItem, IDataItemEvents } from \"./DataItem\";\r\nimport { registry } from \"./Registry\";\r\nimport { Preloader } from \"./elements/Preloader\";\r\nimport { IRange } from \"./defs/IRange\";\r\n\r\nimport * as $math from \"./utils/Math\";\r\nimport * as $array from \"./utils/Array\";\r\nimport * as $ease from \"./utils/Ease\";\r\nimport * as $utils from \"./utils/Utils\";\r\nimport * as $iter from \"./utils/Iterator\";\r\nimport * as $object from \"./utils/Object\";\r\nimport * as $type from \"./utils/Type\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * A list of available types for calculated values.\r\n * @todo Not finished\r\n * @todo Description\r\n */\r\nexport type CalculatedValue =\r\n\t\"value\" |\r\n\t\"percent\" |\r\n\t\"change\" |\r\n\t\"changePercent\" |\r\n\t\"previousChangePercent\" |\r\n\t\"previousChange\" |\r\n\t\"sum\" |\r\n\t\"average\" |\r\n\t\"open\" |\r\n\t\"close\" |\r\n\t\"low\" |\r\n\t\"high\" |\r\n\t\"count\" |\r\n\t\"total\" |\r\n\t\"totalPercent\" |\r\n\t\"stack\";\r\n\r\n/**\r\n * Defines properties for [[Component]].\r\n */\r\nexport interface IComponentProperties extends IContainerProperties {\r\n\t/**\r\n\t * maximum zoom factor of a component\r\n\t */\r\n\tmaxZoomFactor?: number;\r\n}\r\n\r\n/**\r\n * Defines data fields for [[Component]].\r\n */\r\nexport interface IComponentDataFields {\r\n\tdata?: string;\r\n}\r\n\r\n/**\r\n * Defines events for [[Component]].\r\n */\r\nexport interface IComponentEvents extends IContainerEvents {\r\n\r\n\t/**\r\n\t * Invoked when range of the currently selected data is validated.\r\n\t * \r\n\t * @todo: change to datarangevalidated?\r\n\t */\r\n\tdatarangechanged: {};\r\n\r\n\t/**\r\n\t * Invoked when the raw data for the component changes.\r\n\t */\r\n\tdatavalidated: {};\r\n\r\n\t/**\r\n\t * Invoked when value(s) of the element's data items are validated.\r\n\t * \r\n\t * @todo: change to valuesvalidated?\r\n\t */\r\n\tvalueschanged: {};\r\n\r\n\t/**\r\n\t * Invoked just before element is validated (after changes).\r\n\t */\r\n\tbeforedatavalidated: {};\r\n\r\n\t/**\r\n\t * Invoked when range change animation starts\r\n\t */\r\n\trangechangestarted: {};\r\n\r\n\t/**\r\n\t * Invoked when range change animation ends\r\n\t */\r\n\trangechangeended: {};\r\n\r\n}\r\n\r\n/**\r\n * Defines adapters\r\n * Includes both the [[Adapter]] definitions and properties\r\n * @see {@link Adapter}\r\n */\r\nexport interface IComponentAdapters extends IContainerAdapters, IComponentProperties {\r\n\r\n\t/**\r\n\t * Applied after [[Component ]] retrieves data value from data context\r\n\t * (raw data), but before it is provided to [[DataItem]].\r\n\t */\r\n\tdataContextValue: {\r\n\t\tvalue: any,\r\n\t\tfield: string,\r\n\t\tdataItem: DataItem\r\n\t};\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * A Component represents an independent functional element or control, that\r\n * can have it's own behavior, children, data, etc.\r\n *\r\n * A few examples of a Component: [[Legend]], [[Series]], [[Scrollbar]].\r\n *\r\n * @see {@link IComponentEvents} for a list of available events\r\n * @see {@link IComponentAdapters} for a list of available Adapters\r\n * @important\r\n */\r\nexport class Component extends Container {\r\n\r\n\t/**\r\n\t * Defines available data fields.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IComponentDataFields}\r\n\t */\r\n\tpublic _dataFields!: IComponentDataFields;\r\n\r\n\t/**\r\n\t * Holds data field names.\r\n\t *\r\n\t * Data fields define connection beween [[DataItem]] and actual properties\r\n\t * in raw data.\r\n\t *\r\n\t * @type {IComponentDataFields}\r\n\t */\r\n\tpublic dataFields: this[\"_dataFields\"] = {};\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IComponentProperties}\r\n\t */\r\n\tpublic _properties!: IComponentProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IComponentAdapters}\r\n\t */\r\n\tpublic _adapter!: IComponentAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IComponentEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IComponentEvents;\r\n\r\n\t/**\r\n\t * Holds the data for the component.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<any[]>}\r\n\t */\r\n\tprotected _data: $type.Optional<any[]>;\r\n\r\n\t/**\r\n\t * A [[Component]] which provides data to this component (like Chart provides\r\n\t * data for Series).\r\n\t *\r\n\t * @type {Optional<Component>}\r\n\t */\r\n\tpublic dataProvider: $type.Optional<Component>;\r\n\r\n\t/**\r\n\t * A list of [[DataSource]] definitions of external data source.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Object}\r\n\t */\r\n\tprotected _dataSources: { [index: string]: DataSource } = {};\r\n\r\n\t/**\r\n\t * An instance of [[Responsive]].\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<Responsive>}\r\n\t */\r\n\tprotected _responsive: $type.Optional<Responsive>;\r\n\r\n\t/**\r\n\t * This is used when only new data is invalidated (if added using `addData`\r\n\t * method).\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {number}\r\n\t */\r\n\tprotected _parseDataFrom: number = 0;\r\n\r\n\t/**\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @type {List<Component>}\r\n\t */\r\n\tprotected _dataUsers: List<Component> = new List<Component>();\r\n\r\n\r\n\t/**\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @deprecated Not used?\r\n\t * @type {Optional<Dictionary>}\r\n\t */\r\n\tprotected _dataMethods: $type.Optional<Dictionary<string, (value: number) => number>>;\r\n\r\n\t/**\r\n\t * Identifies the type of the [[DataItem]] used in this element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {DataItem}\r\n\t */\r\n\tpublic _dataItem!: DataItem;\r\n\r\n\t/**\r\n\t * List of element's source data items.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tprotected _dataItems: $type.Optional<OrderedListTemplate<this[\"_dataItem\"]>>;\r\n\r\n\t/**\r\n\t * [_startIndex description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<number>}\r\n\t */\r\n\tprotected _startIndex: $type.Optional<number>;\r\n\r\n\t/**\r\n\t * [_endIndex description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<number>}\r\n\t */\r\n\tprotected _endIndex: $type.Optional<number>;\r\n\r\n\t/**\r\n\t * [_start description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {number}\r\n\t */\r\n\tprotected _start: number = 0;\r\n\r\n\t/**\r\n\t * [_end description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {number}\r\n\t */\r\n\tprotected _end: number = 1;\r\n\r\n\t/**\r\n\t * [_finalStart description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<number>}\r\n\t */\r\n\tprotected _finalStart: $type.Optional<number>;\r\n\r\n\t/**\r\n\t * [_finalEnd description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<number>}\r\n\t */\r\n\tprotected _finalEnd: $type.Optional<number>;\r\n\r\n\t/**\r\n\t * If set to `true`, changing data range in element will not trigger\r\n\t * `daterangechanged` event.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tpublic skipRangeEvent: boolean = false;\r\n\r\n\t/**\r\n\t * Whenever selected scope changes (chart is zoomed or panned), for example\r\n\t * by interaction from a Scrollbar, or API, a chart needs to reposition\r\n\t * its contents.\r\n\t *\r\n\t * `rangeChangeDuration` influences how this is performed.\r\n\t *\r\n\t * If set to zero (0), the change will happen instantenously.\r\n\t *\r\n\t * If set to non-zero value, the chart will gradually animate into new\r\n\t * position for the set amount of milliseconds.\r\n\t *\r\n\t * @default 0\r\n\t * @see {@link https://www.amcharts.com/docs/v4/concepts/animations/} for more info about animations\r\n\t * @type {number}\r\n\t */\r\n\tpublic rangeChangeDuration: number = 0;\r\n\r\n\t/**\r\n\t * An easing function to use for range change animation.\r\n\t *\r\n\t * @see {@link Ease}\r\n\t * @see {@link https://www.amcharts.com/docs/v4/concepts/animations/} for more info about animations\r\n\t * @type {function}\r\n\t */\r\n\tpublic rangeChangeEasing: (value: number) => number = $ease.cubicOut;\r\n\r\n\t/**\r\n\t * A reference to a currently playing range change [[Animation]] object.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<Animation>}\r\n\t */\r\n\tpublic rangeChangeAnimation: $type.Optional<Animation>;\r\n\r\n\t/**\r\n\t * A duration (ms) of each data parsing step. A Component parses its data in\r\n\t * chunks in order to avoid completely freezing the machine when large data\r\n\t * sets are used. This setting will control how many milliseconds should pass\r\n\t * when parsing data until parser stops for a brief moment to let other\r\n\t * processes catch up.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tpublic parsingStepDuration: number = 50;\r\n\r\n\t/**\r\n\t * [dataInvalid description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @type {boolean}\r\n\t */\r\n\tpublic dataInvalid: boolean = false;\r\n\r\n\r\n\t/**\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic rawDataInvalid: boolean = false;\r\n\r\n\t/**\r\n\t * [dataRangeInvalid description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @type {boolean}\r\n\t */\r\n\tpublic dataRangeInvalid: boolean = false;\r\n\r\n\t/**\r\n\t * [dataItemsInvalid description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @type {boolean}\r\n\t */\r\n\tpublic dataItemsInvalid: boolean = false;\r\n\r\n\t/**\r\n\t * If set to a non-zero number the element will \"animate\" data values of its\r\n\t * children.\r\n\t *\r\n\t * This will happen on first load and whenever data values change.\r\n\t *\r\n\t * Enabling interpolation will mean that elements will transit smoothly into\r\n\t * new values rather than updating instantly.\r\n\t *\r\n\t * @default 0\r\n\t * @see {@link https://www.amcharts.com/docs/v4/concepts/animations/} for more info about animations\r\n\t * @type {number}\r\n\t */\r\n\tpublic interpolationDuration: number = 0;\r\n\r\n\t/**\r\n\t * An easing function to use for interpolating values when transiting from\r\n\t * one source value to another.\r\n\t *\r\n\t * @default cubicOut\r\n\t * @see {@link https://www.amcharts.com/docs/v4/concepts/animations/} for more info about animations\r\n\t * @see {@link Ease}\r\n\t * @type {function}\r\n\t */\r\n\tpublic interpolationEasing: (value: number) => number = $ease.cubicOut;\r\n\r\n\t/**\r\n\t * Indicates whether transition between data item's values should start and\r\n\t * play out all at once, or with a small delay (as defined by\r\n\t * `sequencedInterpolationDelay`) for each subsequent data item.\r\n\t *\r\n\t * @default true\r\n\t * @see {@link https://www.amcharts.com/docs/v4/concepts/animations/} for more info about animations\r\n\t * @type {boolean}\r\n\t */\r\n\tpublic sequencedInterpolation: boolean = true;\r\n\r\n\t/**\r\n\t * A delay (ms) to wait between animating each subsequent data item's\r\n\t * interpolation animation.\r\n\t *\r\n\t * Relative only if `sequencedInterpolation = true`.\r\n\t *\r\n\t * @default 0\r\n\t * @see {@link https://www.amcharts.com/docs/v4/concepts/animations/} for more info about animations\r\n\t * @type {number}\r\n\t */\r\n\tpublic sequencedInterpolationDelay: number = 0;\r\n\r\n\t/**\r\n\t * A progress (0-1) for the data validation process.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {number}\r\n\t */\r\n\tpublic dataValidationProgress: number = 0;\r\n\r\n\t/**\r\n\t * [_prevStartIndex description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @type {Optional<number>}\r\n\t */\r\n\tprotected _prevStartIndex: $type.Optional<number>;\r\n\r\n\t/**\r\n\t * [_prevEndIndex description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @type {Optional<number>}\r\n\t */\r\n\tprotected _prevEndIndex: $type.Optional<number>;\r\n\r\n\t/**\r\n\t * Sometimes we need to process more dataItems then actually is\r\n\t * selected (for example, not to cut lines at the end/beginning).\r\n\t * However when calculating averages, min, max, etc we need not to include\r\n\t * them. So we store `workingStartIndex` and `workingEndIndex` to know which\r\n\t * dataItems should be included and which should not.\r\n\t */\r\n\r\n\t/**\r\n\t * [_workingStartIndex description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @type {Optional<number>}\r\n\t */\r\n\tprotected _workingStartIndex: $type.Optional<number>;\r\n\r\n\t/**\r\n\t * [_workingEndIndex description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @type {Optional<number>}\r\n\t */\r\n\tprotected _workingEndIndex: $type.Optional<number>;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\r\n\t\t// Init\r\n\t\tsuper();\r\n\t\tthis.className = \"Component\";\r\n\r\n\t\tthis.invalidateData();\r\n\r\n\t\t// Set up events\r\n\t\tthis.events.on(\"maxsizechanged\", this.invalidate, this);\r\n\r\n\t\t// TODO what about remove ?\r\n\t\tthis.dataUsers.events.on(\"inserted\", this.handleDataUserAdded, this);\r\n\r\n\t\t// Set up disposers\r\n\t\tthis._disposers.push(new ListDisposer(this.dataItems))\r\n\r\n\t\t// Apply theme\r\n\t\tthis.applyTheme();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a new/empty DataItem of the type appropriate for this object.\r\n\t *\r\n\t * @see {@link DataItem}\r\n\t * @return {DataItem} Data Item\r\n\t */\r\n\tprotected createDataItem(): this[\"_dataItem\"] {\r\n\t\treturn new DataItem();\r\n\t}\r\n\r\n\t/**\r\n\t * [handleDataUserAdded description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @param {IListEvents<Component>[\"inserted\"]} event Event object\r\n\t */\r\n\tprotected handleDataUserAdded(event: IListEvents<Component>[\"inserted\"]) {\r\n\t\tlet dataUser = event.newValue;\r\n\t\tdataUser.dataProvider = this;\r\n\t}\r\n\r\n\t/**\r\n\t * [handleDataItemValueChange description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t */\r\n\tprotected handleDataItemValueChange(): void {\r\n\t\tthis.invalidateDataItems();\r\n\t}\r\n\r\n\t/**\r\n\t * [handleDataItemWorkingValueChange description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t */\r\n\tprotected handleDataItemWorkingValueChange(event: AMEvent<DataItem, IDataItemEvents>[\"workingvaluechanged\"]): void {\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * [handleDataItemWorkingLocationChange description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t */\r\n\tprotected handleDataItemWorkingLocationChange(event: AMEvent<DataItem, IDataItemEvents>[\"workinglocationchanged\"]): void {\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * [handleDataItemCalculatedValueChange description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t */\r\n\tprotected handleDataItemCalculatedValueChange() {\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * [handleDataItemPropertyChange description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t */\r\n\tprotected handleDataItemPropertyChange(): void {\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Populates a [[DataItem]] width data from data source.\r\n\t *\r\n\t * Loops through all the fields and if such a field is found in raw data\r\n\t * object, a corresponding value on passed in `dataItem` is set.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {Object} item\r\n\t */\r\n\tprotected processDataItem(dataItem: this[\"_dataItem\"], dataContext?: Object): void {\r\n\t\tif (dataItem) {\r\n\t\t\tif (!dataContext) {\r\n\t\t\t\tdataContext = {};\r\n\t\t\t}\r\n\r\n\t\t\t// store reference to original data item\r\n\t\t\tdataItem.dataContext = dataContext;\r\n\r\n\t\t\t$object.each(this.dataFields, (key, fieldValue) => {\r\n\t\t\t\tconst fieldName: string = <string>key;\r\n\r\n\t\t\t\tlet value: any = (<any>dataContext)[fieldValue];\r\n\t\t\t\t// Apply adapters to a retrieved value\r\n\t\t\t\tvalue = this.adapter.apply(\"dataContextValue\", {\r\n\t\t\t\t\tfield: fieldName,\r\n\t\t\t\t\tvalue: value,\r\n\t\t\t\t\tdataItem: dataItem\r\n\t\t\t\t}).value;\r\n\r\n\t\t\t\tif (dataItem.hasChildren[fieldName]) {\r\n\t\t\t\t\tif (value) {\r\n\t\t\t\t\t\tlet children = new OrderedListTemplate<DataItem>(this.createDataItem());\r\n\t\t\t\t\t\tchildren.events.on(\"inserted\", this.handleDataItemAdded, this);\r\n\t\t\t\t\t\tchildren.events.on(\"removed\", this.handleDataItemRemoved, this);\r\n\t\t\t\t\t\tthis._disposers.push(new ListDisposer(children));\r\n\r\n\t\t\t\t\t\tfor (let i = 0; i < value.length; i++) {\r\n\t\t\t\t\t\t\tlet rawDataItem = value[i];\r\n\t\t\t\t\t\t\tlet childDataItem: this[\"_dataItem\"] = children.create();\r\n\t\t\t\t\t\t\tchildDataItem.parent = dataItem;\r\n\t\t\t\t\t\t\tthis.processDataItem(childDataItem, rawDataItem);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlet anyDataItem = <any>dataItem;\r\n\t\t\t\t\t\tanyDataItem[fieldName] = <any>children;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t// data is converted to numbers/dates in each dataItem\r\n\t\t\t\t\tif ($type.hasValue(value)) {\r\n\t\t\t\t\t\t(<any>dataItem)[fieldName] = value;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t$object.each(this.propertyFields, (key, fieldValue) => {\r\n\t\t\t\tconst f: string = <string>key;\r\n\t\t\t\tlet value: any = (<any>dataContext)[fieldValue];\r\n\t\t\t\tif ($type.hasValue(value)) {\r\n\t\t\t\t\tdataItem.setProperty(f, value);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis._disposers.push(dataItem.events.on(\"valuechanged\", this.handleDataItemValueChange, this));\r\n\t\t\tthis._disposers.push(dataItem.events.on(\"workingvaluechanged\", this.handleDataItemWorkingValueChange, this));\r\n\t\t\tthis._disposers.push(dataItem.events.on(\"calculatedvaluechanged\", this.handleDataItemCalculatedValueChange, this));\r\n\t\t\tthis._disposers.push(dataItem.events.on(\"propertychanged\", this.handleDataItemPropertyChange, this));\r\n\t\t\tthis._disposers.push(dataItem.events.on(\"locationchanged\", this.handleDataItemValueChange, this));\r\n\t\t\tthis._disposers.push(dataItem.events.on(\"workinglocationchanged\", this.handleDataItemWorkingLocationChange, this));\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * When validating raw data, instead of processing data item, we update it\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {Object} item\r\n\t */\r\n\tprotected updateDataItem(dataItem: this[\"_dataItem\"]): void {\r\n\t\tif (dataItem) {\r\n\r\n\t\t\tlet dataContext = dataItem.dataContext;\r\n\r\n\t\t\t$object.each(this.dataFields, (key, fieldValue) => {\r\n\t\t\t\tconst fieldName: string = <string>key;\r\n\r\n\t\t\t\tlet value: any = (<any>dataContext)[fieldValue];\r\n\t\t\t\t// Apply adapters to a retrieved value\r\n\t\t\t\tvalue = this.adapter.apply(\"dataContextValue\", {\r\n\t\t\t\t\tfield: fieldName,\r\n\t\t\t\t\tvalue: value,\r\n\t\t\t\t\tdataItem: dataItem\r\n\t\t\t\t}).value;\r\n\r\n\t\t\t\tif (dataItem.hasChildren[fieldName]) {\r\n\t\t\t\t\tif (value) {\r\n\t\t\t\t\t\tlet anyDataItem = <any>dataItem;\r\n\t\t\t\t\t\tlet children = <OrderedListTemplate<this[\"_dataItem\"]>><any>(anyDataItem[fieldName]);\r\n\t\t\t\t\t\t$iter.each(children.iterator(), (child) => {\r\n\t\t\t\t\t\t\tthis.updateDataItem(child);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t// data is converted to numbers/dates in each dataItem\r\n\t\t\t\t\tif ($type.hasValue(value)) {\r\n\t\t\t\t\t\t(<any>dataItem)[fieldName] = value;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t$object.each(this.propertyFields, (key, fieldValue) => {\r\n\t\t\t\tconst f: string = <string>key;\r\n\t\t\t\tlet value: any = (<any>dataContext)[fieldValue];\r\n\t\t\t\tif ($type.hasValue(value)) {\r\n\t\t\t\t\tdataItem.setProperty(f, value);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * [validateDataElements description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t */\r\n\tprotected validateDataElements() {\r\n\t\tfor (let i = this.startIndex; i < this.endIndex; i++) {\r\n\t\t\tconst dataItem = this.dataItems.getIndex(i);\r\n\r\n\t\t\t// TODO is this correct ?\r\n\t\t\tif (dataItem) {\r\n\t\t\t\tthis.validateDataElement(dataItem);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Validates this element and its related elements.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic validate(): void {\r\n\t\tthis.validateDataElements();\r\n\t\tsuper.validate();\r\n\t}\r\n\r\n\t/**\r\n\t * [validateDataElement description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {this[\"_dataItem\"]} dataItem [description]\r\n\t */\r\n\tpublic validateDataElement(dataItem: this[\"_dataItem\"]): void {\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Adds one or several (arrat) of data items to the existing data.\r\n\t *\r\n\t * @param {Object | Object[]} rawDataItem One or many raw data item objects\r\n\t */\r\n\tpublic addData(rawDataItem: Object | Object[], removeCount?: number): void {\r\n\t\tthis._parseDataFrom = this.data.length; // save length of parsed data\r\n\r\n\t\tif (rawDataItem instanceof Array) {\r\n\t\t\tthis.data = this.data.concat(rawDataItem);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.data.push(rawDataItem); // add to raw data array\r\n\t\t}\r\n\r\n\t\tthis.removeData(removeCount);\r\n\r\n\t\tthis.invalidateData();\r\n\t}\r\n\r\n\t/**\r\n\t * Removes elements from the beginning of data\r\n\t *\r\n\t * @param {Optional<number>} coun number of elements to remove\r\n\t */\r\n\tpublic removeData(count: $type.Optional<number>) {\r\n\t\tif ($type.isNumber(count)) {\r\n\t\t\twhile (count > 0) {\r\n\t\t\t\tlet dataItem = this.dataItems.getIndex(0);\r\n\t\t\t\tif (dataItem) {\r\n\t\t\t\t\tthis.dataItems.remove(dataItem);\r\n\t\t\t\t\tdataItem.dispose();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$iter.each(this._dataUsers.iterator(), (dataUser) => {\r\n\t\t\t\t\tlet dataItem = dataUser.dataItems.getIndex(0);\r\n\t\t\t\t\tif (dataItem) {\r\n\t\t\t\t\t\tdataUser.dataItems.remove(dataItem);\r\n\t\t\t\t\t\tdataItem.dispose();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tcount--;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Triggers a data (re)parsing.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic invalidateData(): void {\r\n\t\tif (this.disabled || this.isTemplate) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//if(!this.dataInvalid){\r\n\t\t$array.move(registry.invalidDatas, this);\r\n\t\tthis.dataInvalid = true;\r\n\r\n\t\t$iter.each(this._dataUsers.iterator(), (x) => {\r\n\t\t\tx.invalidateDataItems();\r\n\t\t});\r\n\t\t//}\r\n\t}\r\n\r\n\t/**\r\n\t * [invalidateDataUsers description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t */\r\n\tpublic invalidateDataUsers(): void {\r\n\t\t$iter.each(this._dataUsers.iterator(), (x) => {\r\n\t\t\tx.invalidate();\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Invalidates data values. When data array is not changed, but values within\r\n\t * it changes, we invalidate data so that component would process changes.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic invalidateDataItems(): void {\r\n\t\tif (this.disabled || this.isTemplate) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t//if(!this.dataItemsInvalid){\r\n\t\t$array.move(registry.invalidDataItems, this);\r\n\r\n\t\tthis.dataItemsInvalid = true;\r\n\r\n\t\t$iter.each(this._dataUsers.iterator(), (x) => {\r\n\t\t\tx.invalidateDataItems();\r\n\t\t});\r\n\t\t//}\r\n\t}\r\n\r\n\t/**\r\n\t * Invalidates data range. This is done when data which must be shown\r\n\t * changes (chart is zoomed for example).\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic invalidateDataRange(): void {\r\n\t\tif (this.disabled || this.isTemplate) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t//if(!this.dataRangeInvalid){\r\n\t\tthis.dataRangeInvalid = true;\r\n\t\t$array.move(registry.invalidDataRange, this);\r\n\t\t//}\r\n\t}\r\n\r\n\t/**\r\n\t * Processes data range.\r\n\t *\r\n\t * @todo Description\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic validateDataRange(): void {\r\n\t\t$array.remove(registry.invalidDataRange, this);\r\n\t\tthis.dataRangeInvalid = false;\r\n\r\n\t\tif (this.startIndex != this._prevStartIndex || this.endIndex != this._prevEndIndex) {\r\n\t\t\tthis.rangeChangeUpdate();\r\n\t\t}\r\n\r\n\t\tthis.appendDataItems();\r\n\t\tthis.invalidate();\r\n\t\tthis.dispatchImmediately(\"datarangechanged\");\r\n\t}\r\n\r\n\t/**\r\n\t * [sliceData description]\r\n\t *\r\n\t * @todo Description\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tprotected sliceData() {\r\n\t\tthis._workingStartIndex = this.startIndex;\r\n\t\tthis._workingEndIndex = this.endIndex;\r\n\t}\r\n\r\n\t/**\r\n\t * [rangeChangeUpdate description]\r\n\t *\r\n\t * @todo Description\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tprotected rangeChangeUpdate() {\r\n\t\tthis.sliceData();\r\n\t\tthis._prevStartIndex = this.startIndex;\r\n\t\tthis._prevEndIndex = this.endIndex;\r\n\t}\r\n\r\n\t/**\r\n\t * [removeDataItems description]\r\n\t *\r\n\t * @todo Description\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tprotected removeDataItems() {\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * [appendDataItems description]\r\n\t *\r\n\t * @todo Description\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tprotected appendDataItems() {\r\n\t\t// todo: think if we can optimize this place, maybe mark the ones which should not be removed and then remove all others?\r\n\t\tthis.removeDataItems();\r\n\r\n\t\t// TODO use an iterator instead\r\n\t\tfor (let i: number = this.startIndex; i < this.endIndex; i++) {\r\n\r\n\t\t\t// data item\r\n\t\t\tlet dataItem: $type.Optional<this[\"_dataItem\"]> = this.dataItems.getIndex(i);\r\n\t\t\tif (dataItem) {\r\n\t\t\t\t// append item\r\n\t\t\t\tthis.appendDataItem(dataItem);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * [appendDataItem description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @param {this[\"_dataItem\"]} dataItem [description]\r\n\t */\r\n\tprotected appendDataItem(dataItem: this[\"_dataItem\"]) {\r\n\t\t// todo: this makes default state to be applied a lot of times. Need to think of a diff solution\r\n\t\t// and we also need to find when we actually need this\r\n\t\t//dataItem.invalidate();\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * If you want to have a smooth transition from one data values to another, you change your raw data and then you must call this method.\r\n\t * then instead of redrawing everything, the chart will check raw data and smoothly transit from previous to new data\r\n\t */\r\n\tpublic invalidateRawData(): void {\r\n\t\tif (this.disabled || this.isTemplate) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//if(!this.rawDataInvalid){\r\n\t\t$array.move(registry.invalidRawDatas, this);\r\n\t\tthis.rawDataInvalid = true;\r\n\r\n\t\t$iter.each(this._dataUsers.iterator(), (x) => {\r\n\t\t\tx.invalidateRawData();\r\n\t\t});\r\n\t\t//}\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore\r\n\t */\r\n\tpublic validateRawData() {\r\n\t\t$array.remove(registry.invalidRawDatas, this);\r\n\t\t$iter.each(this.dataItems.iterator(), (dataItem) => {\r\n\t\t\tif (dataItem) {\r\n\t\t\t\tthis.updateDataItem(dataItem);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Validates (processes) data.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic validateData(): void {\r\n\t\tthis.dispatchImmediately(\"beforedatavalidated\");\r\n\r\n\t\tthis.dataInvalid = false;\r\n\r\n\t\t$array.remove(registry.invalidDatas, this);\r\n\r\n\t\tthis.dataValidationProgress = 0;\r\n\t\t// need this to slice new data\r\n\t\tthis._prevStartIndex = undefined;\r\n\t\tthis._prevEndIndex = undefined;\r\n\t\t// todo: this needs some overthinking, maybe some extra settings like zoomOotonDataupdate like in v3 or so. some charts like pie chart probably should act like this always\r\n\t\tthis._startIndex = undefined;\r\n\t\tthis._endIndex = undefined;\r\n\r\n\t\tif (this.dataFields.data && this.dataItem) {\r\n\t\t\tlet dataContext = <any>this.dataItem.dataContext;\r\n\t\t\tthis._data = dataContext[this.dataFields.data];\r\n\t\t}\r\n\r\n\t\tif (this.data.length > 0) {\r\n\t\t\tlet preloader: $type.Optional<Preloader> = this.preloader;\r\n\r\n\t\t\t// data items array is reset only if all data is validated, if _parseDataFrom is not 0, we append new data only\r\n\t\t\tif (this._parseDataFrom === 0) {\r\n\t\t\t\t$iter.each(this.dataItems.iterator(), (dataItem) => {\r\n\t\t\t\t\tdataItem.dispose();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.dataItems.clear();\r\n\r\n\t\t\t\t// and for all components\r\n\t\t\t\t$iter.each(this._dataUsers.iterator(), (dataUser) => {\r\n\t\t\t\t\t$iter.each(dataUser.dataItems.iterator(), (dataItem) => {\r\n\t\t\t\t\t\tdataItem.dispose();\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tdataUser.dataItems.clear();\r\n\r\n\t\t\t\t\t// todo: this needs some overthinking, maybe some extra settings like zoomOUtonDataupdate like in v3 or so. some charts like pie chart probably should act like this always\r\n\t\t\t\t\tdataUser._startIndex = undefined;\r\n\t\t\t\t\tdataUser._endIndex = undefined;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t// and for all components\r\n\t\t\t$iter.each(this._dataUsers.iterator(), (dataUser) => {\r\n\t\t\t\t// todo: this needs some overthinking, maybe some extra settings like zoomOUtonDataupdate like in v3 or so. some charts like pie chart probably should act like this always\r\n\t\t\t\tdataUser._startIndex = undefined;\r\n\t\t\t\tdataUser._endIndex = undefined;\r\n\r\n\t\t\t});\r\n\r\n\t\t\tlet counter: number = 0;\r\n\t\t\tlet startTime: number = Date.now();\r\n\t\t\t// parse data\r\n\t\t\tlet i = this._parseDataFrom;\r\n\t\t\tlet n = this.data.length;\r\n\t\t\tfor (i; i < n; i++) {\r\n\t\t\t\tlet rawDataItem = this.data[i];\r\n\r\n\t\t\t\tlet dataItem: this[\"_dataItem\"] = this.dataItems.create();\r\n\r\n\t\t\t\tthis.processDataItem(dataItem, rawDataItem);\r\n\r\n\t\t\t\t$iter.each(this._dataUsers.iterator(), (dataUser) => {\r\n\t\t\t\t\tlet dataUserDataItem: DataItem = dataUser.dataItems.create();\r\n\t\t\t\t\tdataUser.processDataItem(dataUserDataItem, rawDataItem);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tcounter++;\r\n\r\n\t\t\t\t// show preloader if this takes too many time\r\n\t\t\t\tif (counter == 100) { // no need to check it on each data item\r\n\t\t\t\t\tcounter = 0;\r\n\t\t\t\t\tlet elapsed: number = Date.now() - startTime;\r\n\r\n\t\t\t\t\tif (elapsed > this.parsingStepDuration) {\r\n\t\t\t\t\t\tif (i < this.data.length - 10) {\r\n\t\t\t\t\t\t\tthis._parseDataFrom = i + 1;\r\n\r\n\t\t\t\t\t\t\t// update preloader\r\n\t\t\t\t\t\t\tif (preloader) {\r\n\t\t\t\t\t\t\t\tif (i / this.data.length > 0.5 && !preloader.visible) {\r\n\t\t\t\t\t\t\t\t\t// do not start showing\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\tpreloader.progress = i / this.data.length;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tthis.dataValidationProgress = i / this.data.length;\r\n\r\n\t\t\t\t\t\t\ti = this.data.length; // stops cycle\r\n\t\t\t\t\t\t\tthis.invalidateData();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (preloader) {\r\n\t\t\t\tpreloader.progress = 1;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.dataValidationProgress = 1;\r\n\t\tthis._parseDataFrom = 0; // reset this index, it is set to dataItems.length if addData() method was used.\r\n\r\n\t\tthis.invalidateDataItems();\r\n\r\n\t\tthis.dispatch(\"datavalidated\");\r\n\t}\r\n\r\n\t/**\r\n\t * Validates (processes) data items.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic validateDataItems(): void {\r\n\t\t$array.remove(registry.invalidDataItems, this);\r\n\t\tthis.dataItemsInvalid = false;\r\n\r\n\t\tthis.invalidateDataRange();\r\n\t\tthis.dispatch(\"valueschanged\");\r\n\t}\r\n\r\n\t/**\r\n\t * Sets source (raw) data for the element. The \"data\" is always an `Array`\r\n\t * of objects.\r\n\t *\r\n\t * @param {any[]} value Data\r\n\t */\r\n\tpublic set data(value: any[]) {\r\n\t\t// array might be the same, but there might be items added\r\n\t\t// todo: check if array changed, toString maybe?\r\n\t\t//if (this._data != value) {\r\n\t\tthis._data = value;\r\n\t\tthis.invalidateData();\r\n\t\t//}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns element's source (raw) data.\r\n\t *\r\n\t * @return {any[]} Data\r\n\t */\r\n\tpublic get data(): any[] {\r\n\t\tif (!this._data) {\r\n\t\t\tthis._data = [];\r\n\t\t}\r\n\t\treturn this._data;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns (creates if necessary) a [[DataSource]] bound to any specific\r\n\t * property.\r\n\t *\r\n\t * For example if I want to bind `data` to an external JSON file, I'd create\r\n\t * a DataSource for it.\r\n\t *\r\n\t * @param  {string}      property  Property to bind external data to\r\n\t * @return {DataSource}            A DataSource for property\r\n\t */\r\n\tpublic getDataSource(property: string): DataSource {\r\n\t\tif (!$type.hasValue(this._dataSources[property])) {\r\n\t\t\tthis._dataSources[property] = new DataSource();\r\n\t\t\tthis._dataSources[property].component = this;\r\n\t\t\tthis.setDataSourceEvents(this._dataSources[property], property);\r\n\t\t\tthis._dataSources[property].adapter.add(\"dateFields\", (val) => {\r\n\t\t\t\treturn this.dataSourceDateFields(val);\r\n\t\t\t});\r\n\t\t\tthis._dataSources[property].adapter.add(\"numberFields\", (val) => {\r\n\t\t\t\treturn this.dataSourceNumberFields(val);\r\n\t\t\t});\r\n\t\t\tthis.events.on(\"inited\", () => {\r\n\t\t\t\tthis.loadData(property);\r\n\t\t\t}, this);\r\n\t\t}\r\n\t\treturn this._dataSources[property];\r\n\t}\r\n\r\n\t/**\r\n\t *A [[DataSource]] to be used for loading Component's data.\r\n\t *\r\n\t * @see {@link https://www.amcharts.com/docs/v4/concepts/loading-external-data/} for more on loading external data\r\n\t * @param {DataSource}  value  Data source\r\n\t */\r\n\tpublic set dataSource(value: DataSource) {\r\n\t\tif (this._dataSources[\"data\"]) {\r\n\t\t\tthis.removeDispose(this._dataSources[\"data\"]);\r\n\t\t}\r\n\t\tthis._dataSources[\"data\"] = value;\r\n\t\tthis._dataSources[\"data\"].component = this;\r\n\t\tthis.events.on(\"inited\", () => {\r\n\t\t\tthis.loadData(\"data\")\r\n\t\t}, this);\r\n\t\tthis.setDataSourceEvents(value, \"data\");\r\n\t}\r\n\r\n\t/**\r\n\t * @return {DataSource} Data source\r\n\t */\r\n\tpublic get dataSource(): DataSource {\r\n\t\tif (!this._dataSources[\"data\"]) {\r\n\t\t\tthis.getDataSource(\"data\");\r\n\t\t}\r\n\t\treturn this._dataSources[\"data\"];\r\n\t}\r\n\r\n\t/**\r\n\t * Initiates loading of the external data via [[DataSource]].\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tprotected loadData(property: string): void {\r\n\t\tthis._dataSources[property].load();\r\n\t}\r\n\r\n\t/**\r\n\t * This function is called by the [[DataSource]]'s `dateFields` adapater\r\n\t * so that particular chart types can popuplate this setting with their\r\n\t * own type-speicifc data fields so they are parsed properly.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {string[]}  value  Array of date fields\r\n\t * @return {string[]}         Array of date fields populated with chart's date fields\r\n\t */\r\n\tprotected dataSourceDateFields(value: string[]): string[] {\r\n\t\treturn value;\r\n\t}\r\n\r\n\t/**\r\n\t * This function is called by the [[DataSource]]'s `numberFields` adapater\r\n\t * so that particular chart types can popuplate this setting with their\r\n\t * own type-speicifc data fields so they are parsed properly.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {string[]}  value  Array of number fields\r\n\t * @return {string[]}         Array of number fields populated with chart's number fields\r\n\t */\r\n\tprotected dataSourceNumberFields(value: string[]): string[] {\r\n\t\treturn value;\r\n\t}\r\n\r\n\t/**\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @param  {string[]}  list        [description]\r\n\t * @param  {object}    dataFields  [description]\r\n\t * @param  {string[]}  targetList  [description]\r\n\t * @return {string[]}              [description]\r\n\t */\r\n\tprotected populateDataSourceFields(list: string[], dataFields: { [index: string]: string }, targetList: string[]): string[] {\r\n\t\t$array.each(targetList, (value: string) => {\r\n\t\t\tif (dataFields[value] && $array.indexOf(list, dataFields[value]) === -1) {\r\n\t\t\t\tlist.push(dataFields[value]);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn list;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets events on a [[DataSource]].\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tprotected setDataSourceEvents(ds: DataSource, property?: string): void {\r\n\t\tds.events.on(\"started\", (ev) => {\r\n\t\t\tconst preloader = this.preloader;\r\n\t\t\tif (preloader) {\r\n\t\t\t\tpreloader.progress = 0;\r\n\t\t\t\t//preloader.label.text = this.language.translate(\"Loading\");\r\n\t\t\t}\r\n\t\t});\r\n\t\tds.events.on(\"loadstarted\", (ev) => {\r\n\t\t\tconst preloader = this.preloader;\r\n\t\t\tif (preloader) {\r\n\t\t\t\tpreloader.progress = 0.25;\r\n\t\t\t}\r\n\t\t});\r\n\t\tds.events.on(\"loadended\", (ev) => {\r\n\t\t\tconst preloader = this.preloader;\r\n\t\t\tif (preloader) {\r\n\t\t\t\tpreloader.progress = 0.5;\r\n\t\t\t}\r\n\t\t});\r\n\t\tds.events.on(\"parseended\", (ev) => {\r\n\t\t\tconst preloader = this.preloader;\r\n\t\t\tif (preloader) {\r\n\t\t\t\tpreloader.progress = 0.75;\r\n\t\t\t}\r\n\t\t});\r\n\t\tds.events.on(\"ended\", (ev) => {\r\n\t\t\tconst preloader = this.preloader;\r\n\t\t\tif (preloader) {\r\n\t\t\t\tpreloader.progress = 1;\r\n\t\t\t}\r\n\t\t});\r\n\t\tds.events.on(\"error\", (ev) => {\r\n\t\t\tconst preloader = this.preloader;\r\n\t\t\tif (preloader) {\r\n\t\t\t\tpreloader.progress = 1;\r\n\t\t\t}\r\n\t\t\tthis.showModal(ev.message);\r\n\t\t});\r\n\r\n\t\tif (property) {\r\n\t\t\tds.events.on(\"done\", (ev) => {\r\n\t\t\t\tconst preloader = this.preloader;\r\n\t\t\t\tif (preloader) {\r\n\t\t\t\t\tpreloader.progress = 1;\r\n\t\t\t\t}\r\n\t\t\t\tif (property == \"data\" && !$type.isArray(ev.data)) {\r\n\t\t\t\t\tev.data = [ev.data];\r\n\t\t\t\t}\r\n\t\t\t\t(<any>this)[property] = ev.data;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * A [[Responsive]] instance to be used when applying conditional\r\n\t * property values.\r\n\t *\r\n\t * NOTE: Responsive features are currently in development and may not work\r\n\t * as expected, if at all.\r\n\t *\r\n\t * @param {Responsive}  value  Data source\r\n\t */\r\n\tpublic set responsive(value: Responsive) {\r\n\t\tthis._responsive = value;\r\n\t\tthis._responsive.component = this;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {DataSource} Data source\r\n\t */\r\n\tpublic get responsive(): Responsive {\r\n\t\tif (!this._responsive) {\r\n\t\t\tthis._responsive = new Responsive();\r\n\t\t\tthis._responsive.component = this;\r\n\t\t}\r\n\t\treturn this._responsive;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets current zoom.\r\n\t *\r\n\t * The range uses relative values from 0 to 1, with 0 marking beginning and 1\r\n\t * marking end of the available data range.\r\n\t *\r\n\t * @param  {IRange}  range          Range\r\n\t * @param  {boolean} skipRangeEvent Should rangechanged event not be triggered?\r\n\t * @param  {boolean} instantly      Do not animate?\r\n\t * @return {IRange}                 Actual modidied range (taking `maxZoomFactor` into account)\r\n\t */\r\n\tpublic zoom(range: IRange, skipRangeEvent: boolean = false, instantly: boolean = false): IRange {\r\n\t\tlet start: $type.Optional<number> = range.start;\r\n\t\tlet end = range.end;\r\n\t\tlet priority = range.priority;\r\n\r\n\t\tif (!$type.isNumber(start) || !$type.isNumber(end)) {\r\n\t\t\treturn { start: this.start, end: this.end };\r\n\t\t}\r\n\r\n\t\tif (this._finalStart != start || this._finalEnd != end) {\r\n\r\n\t\t\tlet maxZoomFactor: number = this.maxZoomFactor;\r\n\t\t\t// most likely we are dragging left scrollbar grip here, so we tend to modify end\r\n\r\n\t\t\tif (priority == \"start\") {\r\n\t\t\t\t// add to the end\r\n\t\t\t\tif (1 / (end - start) > maxZoomFactor) {\r\n\t\t\t\t\tend = start + 1 / maxZoomFactor;\r\n\t\t\t\t}\r\n\t\t\t\t//unless end is > 0\r\n\t\t\t\tif (end > 1 && end - start < 1 / maxZoomFactor) {\r\n\t\t\t\t\t//end = 1;\r\n\t\t\t\t\tstart = end - 1 / maxZoomFactor;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// most likely we are dragging right, so we modify left\r\n\t\t\telse {\r\n\t\t\t\t// remove from start\r\n\t\t\t\tif (1 / (end - start) > maxZoomFactor) {\r\n\t\t\t\t\tstart = end - 1 / maxZoomFactor;\r\n\t\t\t\t}\r\n\t\t\t\tif (start < 0 && end - start < 1 / maxZoomFactor) {\r\n\t\t\t\t\t//start = 0;\r\n\t\t\t\t\tend = start + 1 / maxZoomFactor;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._finalEnd = end;\r\n\t\t\tthis._finalStart = start;\r\n\r\n\t\t\tthis.skipRangeEvent = skipRangeEvent;\r\n\t\t\tif (this.rangeChangeDuration > 0 && !instantly) {\r\n\t\t\t\t// todo: maybe move this to Animation\r\n\t\t\t\tlet rangeChangeAnimation: $type.Optional<Animation> = this.rangeChangeAnimation;\r\n\t\t\t\tif (rangeChangeAnimation && rangeChangeAnimation.progress < 1) {\r\n\t\t\t\t\tlet options = rangeChangeAnimation.animationOptions;\r\n\t\t\t\t\tif (options.length > 1) {\r\n\t\t\t\t\t\tif (options[0].to == start && options[1].to == end) {\r\n\t\t\t\t\t\t\treturn { start: start, end: end };\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.dispatchImmediately(\"rangechangestarted\");\r\n\r\n\t\t\t\tif (this.rangeChangeAnimation) {\r\n\t\t\t\t\tthis.rangeChangeAnimation.dispose();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.rangeChangeAnimation = this.animate([{ property: \"start\", to: start }, { property: \"end\", to: end }], this.rangeChangeDuration, this.rangeChangeEasing);\r\n\r\n\t\t\t\tif (this.rangeChangeAnimation && !this.rangeChangeAnimation.isDisposed()) {\r\n\t\t\t\t\tthis.rangeChangeAnimation.events.on(\"animationended\", () => {\r\n\t\t\t\t\t\tthis.dispatchImmediately(\"rangechangeended\");\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.dispatchImmediately(\"rangechangeended\");\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.start = start;\r\n\t\t\t\tthis.end = end;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn { start: start, end: end };\r\n\t}\r\n\r\n\t/**\r\n\t * Zooms to specific data items using their index in data.\r\n\t *\r\n\t * @param {number}  startIndex     Index of the starting data item\r\n\t * @param {number}  endIndex       Index of the ending data item\r\n\t * @param {boolean} skipRangeEvent Should rangechanged event not be triggered?\r\n\t * @param {boolean} instantly      Do not animate?\r\n\t */\r\n\tpublic zoomToIndexes(startIndex: number, endIndex: number, skipRangeEvent?: boolean, instantly?: boolean) {\r\n\t\tif (!$type.isNumber(startIndex) || !$type.isNumber(endIndex)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet start: number = startIndex / this.dataItems.length;\r\n\t\tlet end: number = endIndex / this.dataItems.length;\r\n\r\n\t\tthis.zoom({ start: start, end: end }, skipRangeEvent, instantly);\r\n\t}\r\n\r\n\t/**\r\n\t * A current zoom factor (0-1). 1 meaning fully zoomed out. (showing all of\r\n\t * the available data)\r\n\t *\r\n\t * @return {number} Zoom factor\r\n\t */\r\n\tpublic get zoomFactor(): number {\r\n\t\treturn $math.fitToRange(1 / (this.end - this.start), 1, this.maxZoomFactor);\r\n\t}\r\n\r\n\t/**\r\n\t * Max available `zoomFactor`.\r\n\t *\r\n\t * The element will not allow zoom to occur beyond this factor.\r\n\t *\r\n\t * @param {number}  value  Maximum `zoomFactor`\r\n\t */\r\n\tpublic set maxZoomFactor(value: number) {\r\n\t\tif (this.setPropertyValue(\"maxZoomFactor\", value)) {\r\n\t\t\tthis.invalidateDataRange();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Maximum `zoomFactor`\r\n\t */\r\n\tpublic get maxZoomFactor(): number {\r\n\t\treturn this.getPropertyValue(\"maxZoomFactor\");\r\n\t}\r\n\r\n\t/**\r\n\t * Sets current starting index.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {number} value Start index\r\n\t */\r\n\tpublic set startIndex(value: number) {\r\n\t\tthis._startIndex = $math.fitToRange(Math.round(value), 0, this.dataItems.length);\r\n\t\tthis.start = this.indexToPosition(this._startIndex);\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore\r\n\t * @todo:review description\r\n\t * returns item's relative position by the index of the item\r\n\t * @param {number} index\r\n\t */\r\n\tpublic indexToPosition(index: number) {\r\n\t\treturn index / this.dataItems.length;\r\n\t}\r\n\r\n\t/**\r\n\t * Current starting index.\r\n\t *\r\n\t * @return {number} Start index\r\n\t */\r\n\tpublic get startIndex(): number {\r\n\t\tif (!$type.isNumber(this._startIndex)) {\r\n\t\t\tthis._startIndex = 0;\r\n\t\t}\r\n\r\n\t\treturn this._startIndex;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets current ending index.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {number} value End index\r\n\t */\r\n\tpublic set endIndex(value: number) {\r\n\t\tthis._endIndex = $math.fitToRange(Math.round(value), 0, this.dataItems.length);\r\n\t\tthis.end = this.indexToPosition(this._endIndex);\r\n\t}\r\n\r\n\t/**\r\n\t * Current ending index.\r\n\t *\r\n\t * @return {number} End index\r\n\t */\r\n\tpublic get endIndex(): number {\r\n\t\tif (!$type.isNumber(this._endIndex)) {\r\n\t\t\tthis._endIndex = this.dataItems.length;\r\n\t\t}\r\n\t\treturn this._endIndex;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets start of the current data range (zoom).\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {number} value Start (0-1)\r\n\t */\r\n\tpublic set start(value: number) {\r\n\t\tvalue = $math.round(value, 5);\r\n\r\n\t\t//if (1 / (this.end - value) > this.maxZoomFactor) {\r\n\t\t//\tvalue = this.end - 1 / this.maxZoomFactor;\r\n\t\t//}\r\n\t\tif (this._start != value) {\r\n\t\t\tthis._start = value;\r\n\t\t\tthis._startIndex = Math.max(0, Math.floor(this.dataItems.length * value) || 0);\r\n\t\t\tthis.invalidateDataRange();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Current relative starting position of the data range (zoom).\r\n\t *\r\n\t * @return {number} Start (0-1)\r\n\t */\r\n\tpublic get start(): number {\r\n\t\treturn this._start;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets end of the current data range (zoom).\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {number} value End (0-1)\r\n\t */\r\n\tpublic set end(value: number) {\r\n\t\tvalue = $math.round(value, 5);\r\n\r\n\t\t//if (1 / (value - this.start) > this.maxZoomFactor) {\r\n\t\t//\tvalue = 1 / this.maxZoomFactor + this.start;\r\n\t\t//}\r\n\r\n\t\tif (this._end != value) {\r\n\t\t\tthis._end = value;\r\n\t\t\tthis._endIndex = Math.min(this.dataItems.length, Math.ceil(this.dataItems.length * value) || 0);\r\n\t\t\tthis.invalidateDataRange();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Current relative ending position fo the data range (zoom).\r\n\t *\r\n\t * @return {number} End (0-1)\r\n\t */\r\n\tpublic get end(): number {\r\n\t\treturn this._end;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * [removeFromInvalids description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t */\r\n\tprotected removeFromInvalids(): void {\r\n\t\tsuper.removeFromInvalids();\r\n\t\t$array.remove(registry.invalidDatas, this);\r\n\t\t$array.remove(registry.invalidSprites, this);\r\n\t\t$array.remove(registry.invalidDataItems, this);\r\n\t\t$array.remove(registry.invalidDataRange, this);\r\n\t\t$array.remove(registry.invalidRawDatas, this);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a list of source [[DataItem]] objects.\r\n\t *\r\n\t * @return {OrderedListTemplate} List of data items\r\n\t */\r\n\tpublic get dataItems(): OrderedListTemplate<this[\"_dataItem\"]> {\r\n\t\t// @todo Check if we can automatically dispose all of the data items when\r\n\t\t// Component is disposed\r\n\t\tif (!this._dataItems) {\r\n\t\t\tthis._dataItems = new OrderedListTemplate<DataItem>(this.createDataItem());\r\n\t\t\tthis._dataItems.events.on(\"inserted\", this.handleDataItemAdded, this);\r\n\t\t\tthis._dataItems.events.on(\"removed\", this.invalidateDataItems, this);\r\n\t\t\tthis._disposers.push(new ListDisposer(this._dataItems));\r\n\t\t\tthis._disposers.push(this._dataItems.template);\r\n\t\t}\r\n\t\treturn this._dataItems;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Processes newly added [[DataItem]] as well as triggers data re-validation.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {IListEvents<DataItem>[\"inserted\"]} event [description]\r\n\t */\r\n\tprotected handleDataItemAdded(event: IListEvents<DataItem>[\"inserted\"]) {\r\n\t\tevent.newValue.component = this;\r\n\t\tthis.invalidateDataItems();\r\n\t}\r\n\r\n\t/**\r\n\t * removes [[DataItem]] as well as triggers data re-validation.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {IListEvents<DataItem>[\"inserted\"]} event [description]\r\n\t */\r\n\tprotected handleDataItemRemoved(event: IListEvents<DataItem>[\"removed\"]) {\r\n\t\tevent.oldValue.component = undefined;\r\n\t\tthis.invalidateDataItems();\r\n\t}\r\n\r\n\t/**\r\n\t * [dataMethods description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @deprecated Not used?\r\n\t * @param {Dictionary} List of data methods\r\n\t */\r\n\tpublic get dataMethods(): Dictionary<string, (value: number) => number> {\r\n\t\tif (!this._dataMethods) {\r\n\t\t\tthis._dataMethods = new Dictionary<string, (value: number) => number>();\r\n\t\t}\r\n\t\treturn this._dataMethods;\r\n\t}\r\n\r\n\t/**\r\n\t * Binds a data element's field to a specific field in raw data.\r\n\t * For example, for the very basic column chart you'd want to bind a `value`\r\n\t * field to a field in data, such as `price`.\r\n\t *\r\n\t * Some more advanced Components, like [[CandlestickSeries]] need several\r\n\t * data fields bound to data, such as ones for open, high, low and close\r\n\t * values.\r\n\t *\r\n\t * @todo Example\r\n\t * @param {Key}                       field  Field name\r\n\t * @param {this[\"_dataFields\"][Key]}  value  Field name in data\r\n\t */\r\n\tpublic bindDataField<Key extends keyof this[\"_dataFields\"]>(field: Key, value: this[\"_dataFields\"][Key]) {\r\n\t\tthis.dataFields[field] = value;\r\n\t\tthis.invalidateDataRange();\r\n\t}\r\n\r\n\t/**\r\n\t * Invalidates processed data.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic invalidateProcessedData(): void {\r\n\t\tthis.resetProcessedRange();\r\n\t\tthis.invalidateDataRange();\r\n\t}\r\n\r\n\t/**\r\n\t * [resetProcessedRange description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t */\r\n\tpublic resetProcessedRange(): void {\r\n\t\tthis._prevEndIndex = null;\r\n\t\tthis._prevStartIndex = null;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns all other [[Component]] objects that are using this element's\r\n\t * data.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description (review)\r\n\t * @return {List<Component>} [description]\r\n\t */\r\n\tpublic get dataUsers(): List<Component> {\r\n\t\treturn this._dataUsers;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a clone of this element.\r\n\t *\r\n\t * @return {this} Clone\r\n\t */\r\n\tpublic clone(): this {\r\n\t\tlet component: this = super.clone();\r\n\t\tcomponent.dataFields = $utils.copyProperties(this.dataFields, {});\r\n\t\treturn component;\r\n\t}\r\n\r\n\t/**\r\n\t * Copies all parameters from another [[Component]].\r\n\t *\r\n\t * @param {Component} source Source Component\r\n\t */\r\n\tpublic copyFrom(source: this): void {\r\n\t\tsuper.copyFrom(source);\r\n\t\tthis.data = source.data;\r\n\t}\r\n\r\n\t/**\r\n\t * Invalidates the whole element, including all its children, causing\r\n\t * complete re-parsing of data and redraw.\r\n\t *\r\n\t * Use sparingly!\r\n\t */\r\n\tpublic reinit(): void {\r\n\t\tthis._inited = false;\r\n\t\tthis.deepInvalidate();\r\n\t}\r\n\r\n\t/**\r\n\t * Add an adapter for data.\r\n\t *\r\n\t * @return {Export} Exporting\r\n\t */\r\n\tprotected getExporting(): Export {\r\n\t\tlet _export = super.getExporting();\r\n\t\tif (!_export.adapter.has(\"data\", this._exportData, null, this)) {\r\n\t\t\t_export.adapter.add(\"data\", this._exportData, null, this);\r\n\t\t}\r\n\t\treturn _export;\r\n\t}\r\n\r\n\tprivate _exportData(arg: IExportAdapters[\"data\"]): IExportAdapters[\"data\"] {\r\n\t\targ.data = this.data;\r\n\t\treturn arg;\r\n\t}\r\n\r\n\tprotected setDisabled(value:boolean){\r\n\t\tsuper.setDisabled(value);\r\n\t\tthis.invalidateData();\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../src/.internal/core/Component.ts","/**\r\n * Event Dispatcher module is used for registering listeners and dispatching\r\n * events across amCharts system.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Disposer, IDisposer } from \"./Disposer\";\r\nimport * as $array from \"./Array\";\r\nimport * as $async from \"./AsyncPending\";\r\nimport * as $type from \"./Type\";\r\n\r\n/**\r\n * Defines a universal type for the event object.\r\n */\r\nexport type AMEvent<Target, T> = {\r\n\t[K in keyof T]: { type: K, target: Target } & T[K];\r\n};\r\n\r\n/**\r\n * A universal interface for event listeners.\r\n */\r\nexport interface EventListener<T> {\r\n\tkilled: boolean;\r\n\tonce: boolean;\r\n\ttype: keyof T | null;\r\n\tcallback: any;\r\n\tcontext: any;\r\n\tdispatch: (type: keyof T, event: T[keyof T]) => void;\r\n\tdisposer: IDisposer;\r\n}\r\n\r\n/*export interface IEventDispatcher<T> {\r\n\tisDisposed(): boolean;\r\n\tdispose(): void;\r\n\thasListeners(): boolean;\r\n\tenable(): void;\r\n\tdisable(): void;\r\n\tenableType<Key extends keyof T>(type: Key): void;\r\n\tdisableType<Key extends keyof T>(type: Key, amount?: number): void;\r\n\tisEnabled<Key extends keyof T>(type: Key): boolean;\r\n\thas<C, Key extends keyof T>(type: Key, callback?: (this: C, event: T[Key]) => void, context?: C): boolean;\r\n\tdispatchImmediately<Key extends keyof T>(type: Key, event: T[Key]): void;\r\n\tdispatch<Key extends keyof T>(type: Key, event: T[Key]): void;\r\n\tonAll<C, Key extends keyof T>(callback: (this: C, type: Key, event: T[Key]) => void, context?: C): IDisposer;\r\n\ton<C, Key extends keyof T>(type: Key, callback: (this: C, event: T[Key]) => void, context?: C): IDisposer;\r\n\tonce<C, Key extends keyof T>(type: Key, callback: (this: C, event: T[Key]) => void, context?: C): IDisposer;\r\n\toff<C, Key extends keyof T>(type: Key, callback: (this: C, event: T[Key]) => void, context?: C): void;\r\n\toff<C, Key extends keyof T>(type: Key, callback: (this: C, event: T[Key]) => void, context?: C): void;\r\n\tcopyFrom(source: this): void;\r\n}*/\r\n\r\n/**\r\n * Universal Event Dispatcher.\r\n *\r\n * @important\r\n */\r\nexport class EventDispatcher<T> implements IDisposer {\r\n\r\n\tprotected _listeners: Array<EventListener<T>>;\r\n\tprotected _killed: Array<EventListener<T>>;\r\n\tprotected _disabled: { [key: string]: number };\r\n\tprotected _iterating: number;\r\n\tprotected _enabled: boolean;\r\n\tprotected _disposed: boolean;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tthis._listeners = [];\r\n\t\tthis._killed = [];\r\n\t\tthis._disabled = {};\r\n\t\tthis._iterating = 0;\r\n\t\tthis._enabled = true;\r\n\t\tthis._disposed = false;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns if this object has been already disposed.\r\n\t *\r\n\t * @return {boolean} Disposed?\r\n\t */\r\n\tpublic isDisposed(): boolean {\r\n\t\treturn this._disposed;\r\n\t}\r\n\r\n\t/**\r\n\t * Dispose (destroy) this object.\r\n\t */\r\n\tpublic dispose(): void {\r\n\t\tif (!this._disposed) {\r\n\t\t\tthis._disposed = true;\r\n\r\n\t\t\tconst a = this._listeners;\r\n\r\n\t\t\tthis._iterating = 1;\r\n\t\t\tthis._listeners = <any>null;\r\n\t\t\tthis._disabled = <any>null;\r\n\r\n\t\t\ttry {\r\n\t\t\t\t$array.each(a, (x) => {\r\n\t\t\t\t\tx.disposer.dispose();\r\n\t\t\t\t});\r\n\r\n\t\t\t} finally {\r\n\t\t\t\tthis._killed = <any>null;\r\n\t\t\t\tthis._iterating = <any>null;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if this particular event dispatcher has any listeners set.\r\n\t *\r\n\t * @return {boolean} Has listeners?\r\n\t */\r\n\tpublic hasListeners(): boolean {\r\n\t\treturn this._listeners.length !== 0;\r\n\t}\r\n\r\n\t/**\r\n\t * Enable dispatching of events if they were previously disabled by\r\n\t * `disable()`.\r\n\t */\r\n\tpublic enable(): void {\r\n\t\tthis._enabled = true;\r\n\t}\r\n\r\n\t/**\r\n\t * Disable dispatching of events until re-enabled by `enable()`.\r\n\t */\r\n\tpublic disable(): void {\r\n\t\tthis._enabled = false;\r\n\t}\r\n\r\n\t/**\r\n\t * Enable dispatching particular event, if it was disabled before by\r\n\t * `disableType()`.\r\n\t *\r\n\t * @param {Key} type Event type\r\n\t */\r\n\tpublic enableType<Key extends keyof T>(type: Key): void {\r\n\t\tdelete this._disabled[type];\r\n\t}\r\n\r\n\t/**\r\n\t * Disable dispatching of events for a certain event type.\r\n\t *\r\n\t * Optionally, can set how many dispatches to skip before automatically\r\n\t * re-enabling the dispatching.\r\n\t *\r\n\t * @param {Key}                type    Event type\r\n\t * @param {number = Infinity}  amount  Number of event dispatches to skip\r\n\t */\r\n\tpublic disableType<Key extends keyof T>(type: Key, amount: number = Infinity): void {\r\n\t\tthis._disabled[type] = amount;\r\n\t}\r\n\r\n\t/**\r\n\t * Removes listener from dispatcher.\r\n\t *\r\n\t * Will throw an exception if such listener does not exists.\r\n\t *\r\n\t * @param {EventListener<T>} listener Listener to remove\r\n\t */\r\n\tprotected _removeListener(listener: EventListener<T>): void {\r\n\t\tif (this._iterating === 0) {\r\n\t\t\tconst index = this._listeners.indexOf(listener);\r\n\r\n\t\t\tif (index === -1) {\r\n\t\t\t\tthrow new Error(\"Invalid state: could not remove listener\");\r\n\t\t\t}\r\n\r\n\t\t\tthis._listeners.splice(index, 1);\r\n\r\n\t\t} else {\r\n\t\t\tthis._killed.push(listener);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Removes existing listener by certain parameters.\r\n\t *\r\n\t * @param {boolean}     once      Listener's once setting\r\n\t * @param {Key | null}  type      Listener's type\r\n\t * @param {A}           callback  Callback function\r\n\t * @param {B}           context   Callback context\r\n\t */\r\n\tprotected _removeExistingListener<A, B, Key extends keyof T>(once: boolean, type: Key | null, callback: A, context: B): void {\r\n\t\tif (this._disposed) {\r\n\t\t\tthrow new Error(\"EventDispatcher is disposed\");\r\n\t\t}\r\n\r\n\t\tconst index = $array.findIndex(this._listeners, (info) => {\r\n\t\t\treturn info.once === once && // TODO is this correct ?\r\n\t\t\t\tinfo.type === type &&\r\n\t\t\t\tinfo.callback === callback &&\r\n\t\t\t\tinfo.context === context;\r\n\t\t});\r\n\r\n\t\tif (index !== -1) {\r\n\t\t\tthis._listeners[index].disposer.dispose();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if dispatching for particular event type is enabled.\r\n\t *\r\n\t * @param  {Key}      type  Event type\r\n\t * @return {boolean}        Enabled?\r\n\t */\r\n\tpublic isEnabled<Key extends keyof T>(type: Key): boolean {\r\n\t\tif (this._disposed) {\r\n\t\t\tthrow new Error(\"EventDispatcher is disposed\");\r\n\t\t}\r\n\r\n\t\t// TODO is this check correct ?\r\n\t\treturn this._enabled && this._disabled[type] == null && this._listeners.length > 0;\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if there's already a listener with specific parameters.\r\n\t *\r\n\t * @param   {Key | null}  type      Listener's type\r\n\t * @param   {A}           callback  Callback function\r\n\t * @param   {B}           context   Callback context\r\n\t * @return {boolean}                Has listener?\r\n\t */\r\n\tpublic has<C, Key extends keyof T>(type: Key, callback?: (this: C, event: T[Key]) => void, context?: C): boolean {\r\n\t\tconst index = $array.findIndex(this._listeners, (info) => {\r\n\t\t\treturn info.once !== true && // Ignoring \"once\" listeners\r\n\t\t\t\tinfo.type === type &&\r\n\t\t\t\t(!callback || info.callback === callback) &&\r\n\t\t\t\tinfo.context === context;\r\n\t\t});\r\n\r\n\t\treturn index !== -1;\r\n\t}\r\n\r\n\t/**\r\n\t * Checks whether event of the particular type should be dispatched.\r\n\t *\r\n\t * @param  {Key}   type  Event type\r\n\t * @return {boolean}        Dispatch?\r\n\t */\r\n\tprotected _shouldDispatch<Key extends keyof T>(type: Key): boolean {\r\n\t\tif (this._disposed) {\r\n\t\t\tthrow new Error(\"EventDispatcher is disposed\");\r\n\t\t}\r\n\r\n\t\tconst count = this._disabled[type];\r\n\r\n\t\tif (!$type.isNumber(count)) {\r\n\t\t\treturn this._enabled;\r\n\r\n\t\t} else {\r\n\t\t\tif (count <= 1) {\r\n\t\t\t\tdelete this._disabled[type];\r\n\r\n\t\t\t} else {\r\n\t\t\t\t--this._disabled[type];\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * [_eachListener description]\r\n\t *\r\n\t * All of this extra code is needed when a listener is removed while iterating\r\n\t *\r\n\t * @todo Description\r\n\t * @param {EventListener<T>) => void} fn [description]\r\n\t */\r\n\tprotected _eachListener(fn: (listener: EventListener<T>) => void): void {\r\n\t\t++this._iterating;\r\n\r\n\t\ttry {\r\n\t\t\t$array.each(this._listeners, fn);\r\n\r\n\t\t} finally {\r\n\t\t\t--this._iterating;\r\n\r\n\t\t\t// TODO should this be inside or outside the finally ?\r\n\t\t\tif (this._iterating === 0 && this._killed.length !== 0) {\r\n\t\t\t\t// Remove killed listeners\r\n\t\t\t\t$array.each(this._killed, (killed) => {\r\n\t\t\t\t\tthis._removeListener(killed);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis._killed.length = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Dispatches an event immediately without waiting for next cycle.\r\n\t *\r\n\t * @param {Key}     type   Event type\r\n\t * @param {T[Key]}  event  Event object\r\n\t * @todo automatically add in type and target properties if they are missing\r\n\t */\r\n\tpublic dispatchImmediately<Key extends keyof T>(type: Key, event: T[Key]): void {\r\n\t\tif (this._shouldDispatch(type)) {\r\n\t\t\t// TODO check if it's faster to use an object of listeners rather than a single big array\r\n\t\t\t// TODO if the function throws, maybe it should keep going ?\r\n\t\t\tthis._eachListener((listener) => {\r\n\t\t\t\tif (!listener.killed && (listener.type === null || listener.type === type)) {\r\n\t\t\t\t\tlistener.dispatch(type, event);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Shelves the event to be dispatched within next update cycle.\r\n\t *\r\n\t * @param {Key}     type   Event type\r\n\t * @param {T[Key]}  event  Event object\r\n\t * @todo automatically add in type and target properties if they are missing\r\n\t */\r\n\tpublic dispatch<Key extends keyof T>(type: Key, event: T[Key]): void {\r\n\t\tif (this._shouldDispatch(type)) {\r\n\t\t\tthis._eachListener((listener) => {\r\n\t\t\t\t// TODO check if it's faster to use an object of listeners rather than a single big array\r\n\t\t\t\tif (!listener.killed && (listener.type === null || listener.type === type)) {\r\n\t\t\t\t\t// TODO if the function throws, maybe it should keep going ?\r\n\t\t\t\t\t// TODO dispatch during the update cycle, rather than using whenIdle\r\n\t\t\t\t\t$async.whenIdle(() => {\r\n\t\t\t\t\t\tif (!listener.killed) {\r\n\t\t\t\t\t\t\tlistener.dispatch(type, event);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Creates, catalogs and returns an [[EventListener]].\r\n\t *\r\n\t * Event listener can be disposed.\r\n\t *\r\n\t * @param   {boolean}     once      Listener's once setting\r\n\t * @param   {Key | null}  type      Listener's type\r\n\t * @param   {A}           callback  Callback function\r\n\t * @param   {B}           context   Callback context\r\n\t * @param   {function}    dispatch\r\n\t * @returns {EventListener} An event listener\r\n\t */\r\n\tprotected _on<A, B, Key extends keyof T>(once: boolean, type: Key | null, callback: A, context: B, dispatch: (type: Key, event: T[Key]) => void): EventListener<T> {\r\n\t\tif (this._disposed) {\r\n\t\t\tthrow new Error(\"EventDispatcher is disposed\");\r\n\t\t}\r\n\r\n\t\tthis._removeExistingListener(once, type, callback, context);\r\n\r\n\t\tconst info: EventListener<T> = {\r\n\t\t\ttype: type,\r\n\t\t\tcallback: callback,\r\n\t\t\tcontext: context,\r\n\t\t\tdispatch: <any>dispatch,\r\n\t\t\tkilled: false,\r\n\t\t\tonce: once,\r\n\t\t\tdisposer: new Disposer(() => {\r\n\t\t\t\tinfo.killed = true;\r\n\t\t\t\tthis._removeListener(info);\r\n\t\t\t})\r\n\t\t};\r\n\r\n\t\tthis._listeners.push(info);\r\n\r\n\t\treturn info;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates an event listener to be invoked on **any** event.\r\n\t *\r\n\t * @param   {A}           callback  Callback function\r\n\t * @param   {B}           context   Callback context\r\n\t * @returns {IDisposer}             A disposable event listener\r\n\t * @todo what if `listen` is called on the same function twice ?\r\n\t */\r\n\tpublic onAll<C, Key extends keyof T>(callback: (this: C, type: Key, event: T[Key]) => void, context?: C): IDisposer {\r\n\t\treturn this._on(false, null, callback, context, (type, event) => callback.call(context, type, event)).disposer;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates an event listener to be invoked on a specific event type.\r\n\t *\r\n\t * ```TypeScript\r\n\t * series.events.on(\"hidden\", (ev) => {\r\n\t *   console.log(\"Series hidden: \" + ev.target.name);\r\n\t * }, this);\r\n\t * ```\r\n\t * ```JavaScript\r\n\t * series.events.on(\"hidden\", function(ev) {\r\n\t *   console.log(\"Series hidden: \" + ev.target.name);\r\n\t * }, this);\r\n\t * ```\r\n\t * ```JSON\r\n\t * {\r\n\t *   // ...\r\n\t *   \"series\": [{\r\n\t *     // ...\r\n\t *     \"events\": {\r\n\t *     \t\"hidden\": function(ev) {\r\n\t *     \t  console.log(\"Series hidden: \" + ev.target.name);\r\n\t *     \t}\r\n\t *     }\r\n\t *   }]\r\n\t * }\r\n\t * ```\r\n\t *\r\n\t * The above will invoke our custom event handler whenever series we put\r\n\t * event on is hidden.\r\n\t *\r\n\t * @param   {Key | null}  type      Listener's type\r\n\t * @param   {A}           callback  Callback function\r\n\t * @param   {B}           context   Callback context\r\n\t * @returns {IDisposer}             A disposable event listener\r\n\t * @todo what if `listen` is called on the same function twice ?\r\n\t */\r\n\tpublic on<C, Key extends keyof T>(type: Key, callback: (this: C, event: T[Key]) => void, context?: C): IDisposer {\r\n\t\treturn this._on(false, type, callback, context, (type, event) => callback.call(context, event)).disposer;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates an event listener to be invoked on a specific event type once.\r\n\t *\r\n\t * Once the event listener is invoked, it is automatically disposed.\r\n\t *\r\n\t * ```TypeScript\r\n\t * series.events.on(\"hidden\", (ev) => {\r\n\t *   console.log(\"Series hidden: \" + ev.target.name);\r\n\t * }, this);\r\n\t * ```\r\n\t * ```JavaScript\r\n\t * series.events.on(\"hidden\", function(ev) {\r\n\t *   console.log(\"Series hidden: \" + ev.target.name);\r\n\t * }, this);\r\n\t * ```\r\n\t * ```JSON\r\n\t * {\r\n\t *   // ...\r\n\t *   \"series\": [{\r\n\t *     // ...\r\n\t *     \"events\": {\r\n\t *     \t\"hidden\": function(ev) {\r\n\t *     \t  console.log(\"Series hidden: \" + ev.target.name);\r\n\t *     \t}\r\n\t *     }\r\n\t *   }]\r\n\t * }\r\n\t * ```\r\n\t *\r\n\t * The above will invoke our custom event handler the first time series we\r\n\t * put event on is hidden.\r\n\t *\r\n\t * @param   {Key | null}  type      Listener's type\r\n\t * @param   {A}           callback  Callback function\r\n\t * @param   {B}           context   Callback context\r\n\t * @returns {IDisposer}             A disposable event listener\r\n\t * @todo what if `listen` is called on the same function twice ?\r\n\t */\r\n\tpublic once<C, Key extends keyof T>(type: Key, callback: (this: C, event: T[Key]) => void, context?: C): IDisposer {\r\n\t\tconst x = this._on(true, type, callback, context, (type, event) => {\r\n\t\t\tx.disposer.dispose();\r\n\t\t\tcallback.call(context, event)\r\n\t\t});\r\n\r\n\t\t// TODO maybe this should return a different Disposer ?\r\n\t\treturn x.disposer;\r\n\t}\r\n\r\n\t/**\r\n\t * Removes the event listener with specific parameters.\r\n\t *\r\n\t * @param   {Key | null}  type      Listener's type\r\n\t * @param   {A}           callback  Callback function\r\n\t * @param   {B}           context   Callback context\r\n\t */\r\n\tpublic off<C, Key extends keyof T>(type: Key, callback: (this: C, event: T[Key]) => void, context?: C): void {\r\n\t\tthis._removeExistingListener(false, type, callback, context);\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Copies all dispatcher parameters, including listeners, from another event\r\n\t * dispatcher.\r\n\t *\r\n\t * @param {this} source Source event dispatcher\r\n\t */\r\n\tpublic copyFrom(source: this): void {\r\n\t\tif (this._disposed) {\r\n\t\t\tthrow new Error(\"EventDispatcher is disposed\");\r\n\t\t}\r\n\r\n\t\tif (source === this) {\r\n\t\t\tthrow new Error(\"Cannot copyFrom the same TargetedEventDispatcher\");\r\n\t\t}\r\n\r\n\t\t$array.each(source._listeners, (x) => {\r\n\t\t\t// TODO is this correct ?\r\n\t\t\tif (!x.killed) {\r\n\t\t\t\tif (x.type === null) {\r\n\t\t\t\t\tthis.onAll(x.callback, x.context);\r\n\r\n\t\t\t\t} else if (x.once) {\r\n\t\t\t\t\tthis.once(x.type, x.callback, x.context);\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.on(x.type, x.callback, x.context);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * A version of the [[EventDispatcher]] that dispatches events for a specific\r\n * target object.\r\n *\r\n * @type {[type]}\r\n * @important\r\n */\r\nexport class TargetedEventDispatcher<Target, T> extends EventDispatcher<T> {\r\n\r\n\t/**\r\n\t * A target object which is originating events using this dispatcher.\r\n\t *\r\n\t * @type {Target}\r\n\t */\r\n\tpublic target: Target;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t *\r\n\t * @param {Target} target Event dispatcher target\r\n\t */\r\n\tconstructor(target: Target) {\r\n\t\tsuper();\r\n\t\tthis.target = target;\r\n\t}\r\n\r\n\t/**\r\n\t * Copies all dispatcher parameters, including listeners, from another event\r\n\t * dispatcher.\r\n\t *\r\n\t * @param {this} source Source event dispatcher\r\n\t */\r\n\tpublic copyFrom(source: this): void {\r\n\t\tif (this._disposed) {\r\n\t\t\tthrow new Error(\"EventDispatcher is disposed\");\r\n\t\t}\r\n\r\n\t\tif (source === this) {\r\n\t\t\tthrow new Error(\"Cannot copyFrom the same TargetedEventDispatcher\");\r\n\t\t}\r\n\r\n\t\t$array.each(source._listeners, (x) => {\r\n\t\t\t// TODO very hacky\r\n\t\t\tif (x.context === source.target) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// TODO is this correct ?\r\n\t\t\tif (!x.killed) {\r\n\t\t\t\tif (x.type === null) {\r\n\t\t\t\t\tthis.onAll(x.callback, x.context);\r\n\r\n\t\t\t\t} else if (x.once) {\r\n\t\t\t\t\tthis.once(x.type, x.callback, x.context);\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.on(x.type, x.callback, x.context);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/utils/EventDispatcher.ts","/**\r\n * Language module contains everything related to language-specific operations:\r\n * * Translating prompts\r\n * * Translating functions\r\n * * Date format localizations\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { BaseObjectEvents, IBaseObjectEvents } from \"../Base\";\r\nimport { Adapter } from \"./Adapter\";\r\nimport { EventDispatcher, AMEvent } from \"./EventDispatcher\";\r\nimport * as $array from \"./Array\";\r\nimport * as $type from \"./Type\";\r\nimport en from \"../../lang/en\";\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines events for [[Language]].\r\n */\r\nexport interface ILanguageEvents extends IBaseObjectEvents {\r\n\r\n\t/**\r\n\t * Invoked when locale is changed by user.\r\n\t */\r\n\tlocalechanged: {\r\n\t\tlocale: ILocale;\r\n\t};\r\n\r\n};\r\n\r\n\r\n/**\r\n * Defines properties that exist for the locale.\r\n */\r\nexport interface ILocaleProperties {\r\n\t// number formatter related\r\n\t\"_decimalSeparator\"?: string;\r\n\t\"_thousandSeparator\"?: string;\r\n\r\n\t// Default date formats for various periods\r\n\t\"_date_millisecond\"?: string;\r\n\t\"_date_second\"?: string;\r\n\t\"_date_minute\"?: string;\r\n\t\"_date_hour\"?: string;\r\n\t\"_date_day\"?: string;\r\n\t\"_date_week\"?: string;\r\n\t\"_date_month\"?: string;\r\n\t\"_date_year\"?: string;\r\n\r\n\t// Default duration formats for various base units\r\n\t\"_duration_millisecond\"?: string;\r\n\t\"_duration_second\"?: string;\r\n\t\"_duration_minute\"?: string;\r\n\t\"_duration_hour\"?: string;\r\n\t\"_duration_day\"?: string;\r\n\t\"_duration_week\"?: string;\r\n\t\"_duration_month\"?: string;\r\n\t\"_duration_year\"?: string;\r\n\r\n\t// Era\r\n\t\"_era_ad\"?: string;\r\n\t\"_era_bc\"?: string;\r\n\r\n\t// Period\r\n\t\"A\"?: string;\r\n\t\"P\"?: string;\r\n\t\"AM\"?: string;\r\n\t\"PM\"?: string;\r\n\t\"A.M.\"?: string;\r\n\t\"P.M.\"?: string;\r\n\r\n\t// Dates\r\n\t\"January\"?: string;\r\n\t\"February\"?: string;\r\n\t\"March\"?: string;\r\n\t\"April\"?: string;\r\n\t\"May\"?: string;\r\n\t\"June\"?: string;\r\n\t\"July\"?: string;\r\n\t\"August\"?: string;\r\n\t\"September\"?: string;\r\n\t\"October\"?: string;\r\n\t\"November\"?: string;\r\n\t\"December\"?: string;\r\n\t\"Jan\"?: string;\r\n\t\"Feb\"?: string;\r\n\t\"Mar\"?: string;\r\n\t\"Apr\"?: string;\r\n\t\"May(short)\"?: string;\r\n\t\"Jun\"?: string;\r\n\t\"Jul\"?: string;\r\n\t\"Aug\"?: string;\r\n\t\"Sep\"?: string;\r\n\t\"Oct\"?: string;\r\n\t\"Nov\"?: string;\r\n\t\"Dec\"?: string;\r\n\t\"Sunday\"?: string;\r\n\t\"Monday\"?: string;\r\n\t\"Tuesday\"?: string;\r\n\t\"Wednesday\"?: string;\r\n\t\"Thursday\"?: string;\r\n\t\"Friday\"?: string;\r\n\t\"Saturday\"?: string;\r\n\t\"Sun\"?: string;\r\n\t\"Mon\"?: string;\r\n\t\"Tue\"?: string;\r\n\t\"Wed\"?: string;\r\n\t\"Thu\"?: string;\r\n\t\"Fri\"?: string;\r\n\t\"Sat\"?: string;\r\n\r\n\t// Chart elements\r\n\t\"Zoom Out\"?: string;\r\n\t\"Play\"?: string;\r\n\t\"Stop\"?: string;\r\n\t\"Legend\"?: string;\r\n\t\"Click, tap or press ENTER to toggle\"?: string;\r\n\t\"Loading\"?: string;\r\n\r\n\t// Chart types\r\n\t\"Chart\"?: string;\r\n\t\"Serial chart\"?: string;\r\n\t\"X/Y chart\"?: string;\r\n\t\"Pie chart\"?: string;\r\n\t\"Gauge chart\"?: string;\r\n\t\"Radar chart\"?: string;\r\n\t\"Sankey diagram\"?: string;\r\n\t\"Flow diagram\"?: string;\r\n\t\"Chord diagram\"?: string;\r\n\t\"TreeMap chart\"?: string;\r\n\r\n\t// Series types\r\n\t\"Series\"?: string;\r\n\t\"Candlestick Series\"?: string;\r\n\t\"Column Series\"?: string;\r\n\t\"Line Series\"?: string;\r\n\t\"Pie Slice Series\"?: string;\r\n\t\"X/Y Series\"?: string;\r\n\r\n\t// Map-related\r\n\t\"Map\"?: string;\r\n\t\"Press ENTER to zoom in\"?: string;\r\n\t\"Press ENTER to zoom out\"?: string;\r\n\t\"Use arrow keys to zoom in and out\"?: string;\r\n\t\"Use plus and minus keys on your keyboard to zoom in and out\"?: string;\r\n\t\"Home\"?: string;\r\n\r\n\t// Export-related\r\n\t\"Export\"?: string;\r\n\t\"Image\"?: string;\r\n\t\"Data\"?: string;\r\n\t\"Print\"?: string;\r\n\t\"Click, tap or press ENTER to open\"?: string;\r\n\t\"Click, tap or press ENTER to print.\"?: string;\r\n\t\"Click, tap or press ENTER to export as %1.\"?: string;\r\n\t'To save the image, right-click this link and choose \"Save picture as...\"': string;\r\n\t'To save the image, right-click thumbnail on the left and choose \"Save picture as...\"': string;\r\n\t\"(Press ESC to close this message)\"?: string;\r\n\t\"Image Export Complete\"?: string;\r\n\t\"Export operation took longer than expected. Something might have gone wrong.\"?: string;\r\n\t\"Saved from\"?: string;\r\n\t\"PNG\"?: string;\r\n\t\"JPG\"?: string;\r\n\t\"GIF\"?: string;\r\n\t\"SVG\"?: string;\r\n\t\"PDF\"?: string;\r\n\t\"JSON\"?: string;\r\n\t\"CSV\"?: string;\r\n\t\"XLSX\"?: string;\r\n\r\n\t// Scrollbar-related\r\n\t\"Use TAB to select grip buttons or left and right arrows to change selection\"?: string;\r\n\t\"Use left and right arrows to move selection\"?: string;\r\n\t\"Use left and right arrows to move left selection\"?: string;\r\n\t\"Use left and right arrows to move right selection\"?: string;\r\n\t\"Use TAB select grip buttons or up and down arrows to change selection\"?: string;\r\n\t\"Use up and down arrows to move selection\"?: string;\r\n\t\"Use up and down arrows to move lower selection\"?: string;\r\n\t\"Use up and down arrows to move upper selection\"?: string;\r\n\t\"From %1 to %2\"?: string;\r\n\t\"From %1\"?: string;\r\n\t\"To %1\"?: string;\r\n\r\n\t// Data loader-related\r\n\t\"No parser available for file: %1\"?: string;\r\n\t\"Error parsing file: %1\"?: string;\r\n\t\"Unable to load file: %1\"?: string;\r\n\t\"Invalid date\"?: string;\r\n}\r\n\r\n/**\r\n * Defines functions that exist for the locale.\r\n */\r\nexport interface ILocaleFunctions {\r\n\t// ordinal function\r\n\t\"_dateOrd\": (day: number) => string;\r\n}\r\n\r\n/**\r\n * Defines all of the defaults for locale properties.\r\n */\r\nexport interface ILocaleDefault extends ILocaleProperties, ILocaleFunctions { }\r\n\r\n/**\r\n * Defines locale interface.\r\n */\r\nexport interface ILocale extends Partial<ILocaleDefault> { };\r\n\r\n/**\r\n * Represents a list of available adapters for Language.\r\n */\r\nexport interface ILanguageAdapters {\r\n\r\n\t/**\r\n\t * Applied to result whenever retrieving currently set locale.\r\n\t */\r\n\tlocale: {\r\n\t\tlocale: ILocale\r\n\t},\r\n\r\n\t/**\r\n\t * Applied to a translation.\r\n\t */\r\n\ttranslate: {\r\n\t\ttranslation: string,\r\n\t\tlocale?: ILocale\r\n\t},\r\n\r\n\t/**\r\n\t * Applied to all of the locale translations.\r\n\t */\r\n\ttranslations: {\r\n\t\ttranslations: any,\r\n\t\tlocale?: ILocale\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Handles all language-related tasks, like loading and storing translations,\r\n * translating prompts, lists of prompts and even functions.\r\n *\r\n * Almost every object in amCharts4 universe will have a `language` property,\r\n * which can be accessed for prompt translation.\r\n *\r\n * @see {@link ILanguageAdapters} for a list of available Adapters\r\n * @todo Make prompt keys case-insensitive\r\n * @important\r\n */\r\nexport class Language extends BaseObjectEvents {\r\n\t/**\r\n\t * Defines type used in the Sprite.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ILanguageAdapters}\r\n\t */\r\n\tpublic _adapter!: ILanguageAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {ILanguageEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: ILanguageEvents;\r\n\r\n\t/**\r\n\t * Adapter.\r\n\t *\r\n\t * @type {Adapter<this, this[\"_adapter\"]>}\r\n\t */\r\n\tpublic adapter: Adapter<this, this[\"_adapter\"]> = new Adapter(this);\r\n\r\n\t/**\r\n\t * Current locale.\r\n\t *\r\n\t * @type {ILocale}\r\n\t */\r\n\tprotected _locale: ILocale = en;\r\n\r\n\t/**\r\n\t * Default locale. A locale to fall back to if none is specified, or\r\n\t * if there's no translation for the prompt for the current language.\r\n\t *\r\n\t * @type {ILocaleDefault}\r\n\t */\r\n\tprotected _defaultLocale: ILocaleDefault = en;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"Language\";\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Returns locale that is currently used.\r\n\t *\r\n\t * @param  {ILocale}  locale  Force locale. Will use current language if not set.\r\n\t * @return {string}           Locale\r\n\t */\r\n\tprotected getLocale(locale?: ILocale): ILocale {\r\n\t\tif (locale == null) {\r\n\t\t\tlocale = this._locale;\r\n\t\t}\r\n\r\n\t\treturn this.adapter.apply(\"locale\", {\r\n\t\t\tlocale: locale\r\n\t\t}).locale;\r\n\t}\r\n\r\n\t/**\r\n\t * Retruns the translation of the string.\r\n\t *\r\n\t * If the translation is empty, it will return untranslated prompt.\r\n\t *\r\n\t * Third parameter and up are strings that can be used to replace \"%X\"\r\n\t * placeholders in prompt.\r\n\t *\r\n\t * E.g.:\r\n\t *\r\n\t * ```TypeScript\r\n\t * // Results in \"This is a first translation test\"\r\n\t * chart.language.translate(\"This is a %1 translation %2\", null, \"first\", \"test\");\r\n\t * ```\r\n\t * ```JavaScriptScript\r\n\t * // Results in \"This is a first translation test\"\r\n\t * chart.language.translate(\"This is a %1 translation %2\", null, \"first\", \"test\");\r\n\t * ```\r\n\t *\r\n\t * @param  {Key}            prompt   A string to translate\r\n\t * @param  {ILocale}        locale   Force translation into specific locale, e.g. fr_FR\r\n\t * @param  {Array<string>}  ...rest  Parameters to replace in string\r\n\t * @return {string}                  Translation\r\n\t */\r\n\tpublic translate<Key extends keyof ILocaleProperties>(prompt: Key, locale?: ILocale, ...rest: Array<string>): string {\r\n\r\n\t\t// Get langauge\r\n\t\tlocale = this.getLocale(locale);\r\n\r\n\t\t// Init translation\r\n\t\tlet translation: string = prompt;\r\n\r\n\t\t// Get translations for the locale\r\n\t\tlet translations = this.getTranslations(locale);\r\n\r\n\t\tlet value: $type.Optional<ILocaleDefault[Key]> = translations[prompt];\r\n\r\n\t\t// Try to look for the translation\r\n\t\tif ($type.hasValue(value)) {\r\n\t\t\t// It might be an empty string\r\n\t\t\ttranslation = value || prompt;\r\n\r\n\t\t\t// Try to look in default language\r\n\t\t} else if (locale !== this._defaultLocale) {\r\n\t\t\treturn this.translate(prompt, this._defaultLocale, ...rest);\r\n\t\t}\r\n\r\n\t\t// Replace %1, %2, etc params\r\n\t\tif (rest.length) {\r\n\t\t\tfor (let len = rest.length, i = 0; i < len; ++i) {\r\n\t\t\t\ttranslation = translation.split(\"%\" + (i + 1)).join(rest[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Return the translation\r\n\t\treturn this.adapter.apply(\"translate\", {\r\n\t\t\ttranslation: translation,\r\n\t\t\tlocale: locale\r\n\t\t}).translation;\r\n\t}\r\n\r\n\t/**\r\n\t * Translates prompt.\r\n\t *\r\n\t * If translation is empty, it will return empty string, which is a different\r\n\t * behavior than that of regular `translate`.\r\n\t *\r\n\t * @param  {Key}            prompt   A string to translate\r\n\t * @param  {ILocale}        locale   Force translation into specific locale, e.g. fr_FR\r\n\t * @param  {Array<string>}  ...rest  Parameters to replace in string\r\n\t * @return {string}                  Translation\r\n\t */\r\n\tpublic translateEmpty<Key extends keyof ILocaleProperties>(prompt: Key, locale?: ILocale, ...rest: Array<string>): string {\r\n\t\tlet translation = this.translate(prompt, locale, ...rest);\r\n\t\treturn translation == prompt ? \"\" : translation;\r\n\t}\r\n\r\n\t/**\r\n\t * Translates a function.\r\n\t *\r\n\t * This method will return a function reference, but will not run it. It's\r\n\t * up to the caller script to run the function.\r\n\t *\r\n\t * @param  {Key}                    prompt  A function id to translate\r\n\t * @param  {ILocale}                locale  Force translation into specific locale. e.g. fr_FR\r\n\t * @return {ILocaleFunctions[Key]}          A language-specific version of the function\r\n\t * @todo Apply adapter\r\n\t */\r\n\tpublic translateFunc<Key extends keyof ILocaleFunctions>(prompt: Key, locale?: ILocale): ILocaleFunctions[Key] {\r\n\r\n\t\t// Get langauge\r\n\t\tlocale = this.getLocale(locale);\r\n\r\n\t\t// Get translations for the locale\r\n\t\tlet translations = this.getTranslations(locale);\r\n\r\n\t\tlet value: $type.Optional<ILocaleFunctions[Key]> = translations[prompt];\r\n\r\n\t\t// Try to look for the translation\r\n\t\tif (value != null) {\r\n\t\t\treturn value;\r\n\t\t}\r\n\r\n\t\t// Try to look in default language\r\n\t\tif (locale !== this._defaultLocale) {\r\n\t\t\treturn this.translateFunc(prompt, this._defaultLocale);\r\n\t\t}\r\n\r\n\t\t// Fail - return empty function\r\n\t\treturn (): string => {\r\n\t\t\treturn \"\";\r\n\t\t};\r\n\t}\r\n\r\n\t/**\r\n\t * Translates a list of prompts in one go.\r\n\t *\r\n\t * @param  {Array<Key>}     list    An array of strings to translate\r\n\t * @param  {ILocale}        locale  Force translation into specific locale. e.g. fr_FR\r\n\t * @return {Array<string>}          An array of translated strings in the same order as source list\r\n\t */\r\n\tpublic translateAll<Key extends keyof ILocaleProperties>(list: Array<Key>, locale?: ILocale): Array<string> {\r\n\t\t// Translate all items in the list\r\n\t\tif (!this.isDefault()) {\r\n\t\t\treturn $array.map(list, (x) => this.translate(x, locale));\r\n\r\n\t\t} else {\r\n\t\t\treturn list;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns `true` if the currently selected locale is a default locale.\r\n\t *\r\n\t * @return {boolean} `true` if locale is default; `false` if it is not.\r\n\t */\r\n\tpublic isDefault(): boolean {\r\n\t\treturn this._defaultLocale === this._locale;\r\n\t}\r\n\r\n\t/**\r\n\t * Current locale.\r\n\t *\r\n\t * @param {ILocale}  value  Locale definition (translations)\r\n\t */\r\n\tpublic set locale(value: ILocale) {\r\n\t\tif (this._locale != value) {\r\n\t\t\tthis._locale = value;\r\n\r\n\r\n\t\t\tif (this.events.isEnabled(\"localechanged\")) {\r\n\t\t\t\tconst event: AMEvent<this, ILanguageEvents>[\"localechanged\"] = {\r\n\t\t\t\t\ttype: \"localechanged\",\r\n\t\t\t\t\tlocale: value,\r\n\t\t\t\t\ttarget: this\r\n\t\t\t\t};\r\n\t\t\t\tthis.events.dispatchImmediately(\"localechanged\", event);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {ILocale} Locale definition\r\n\t */\r\n\tpublic get locale(): ILocale {\r\n\t\treturn this._locale;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns translations for a given locale.\r\n\t *\r\n\t * @ignore\r\n\t * @deprecated\r\n\t * @param  {ILocale}        locale  Locale\r\n\t * @return {ILocale}        Translations\r\n\t */\r\n\tpublic getTranslations(locale: ILocale): ILocale {\r\n\t\treturn this.adapter.apply(\"translations\", {\r\n\t\t\ttranslations: locale,\r\n\t\t\tlocale: locale\r\n\t\t}).translations;\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/utils/Language.ts","var META = require('./_uid')('meta');\nvar isObject = require('./_is-object');\nvar has = require('./_has');\nvar setDesc = require('./_object-dp').f;\nvar id = 0;\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\nvar FREEZE = !require('./_fails')(function () {\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function (it) {\n  setDesc(it, META, { value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  } });\n};\nvar fastKey = function (it, create) {\n  // return primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function (it, create) {\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZE && meta.NEED && isExtensible(it) && !has(it, META)) setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY: META,\n  NEED: false,\n  fastKey: fastKey,\n  getWeak: getWeak,\n  onFreeze: onFreeze\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_meta.js\n// module id = 58\n// module chunks = 26","// 22.1.3.31 Array.prototype[@@unscopables]\nvar UNSCOPABLES = require('./_wks')('unscopables');\nvar ArrayProto = Array.prototype;\nif (ArrayProto[UNSCOPABLES] == undefined) require('./_hide')(ArrayProto, UNSCOPABLES, {});\nmodule.exports = function (key) {\n  ArrayProto[UNSCOPABLES][key] = true;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_add-to-unscopables.js\n// module id = 59\n// module chunks = 26","/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { registry } from \"./Registry\";\r\nimport { Sprite } from \"./Sprite\";\r\nimport { Container } from \"./Container\";\r\nimport { svgContainers, SVGContainer } from \"./rendering/SVGContainer\";\r\nimport { Component } from \"./Component\";\r\nimport { options } from \"./Options\";\r\nimport { Paper } from \"./rendering/Paper\";\r\nimport { raf } from \"./utils/AsyncPending\";\r\nimport { animations } from \"./utils/Animation\";\r\nimport { triggerIdle } from \"./utils/AsyncPending\";\r\nimport * as $dom from \"./utils/DOM\";\r\nimport * as $array from \"./utils/Array\";\r\nimport * as $type from \"./utils/Type\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * The main class that handles system-wide tasks, like caching, heartbeats, etc.\r\n * @important\r\n */\r\nexport class System {\r\n\r\n\t/**\r\n\t * Unique ID of the object.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tpublic uid: string = registry.getUniqueId();\r\n\r\n\t/**\r\n\t * amCharts Version.\r\n\t *\r\n\t * This follows npm's semver specification.\r\n\t *\r\n\t * @see {@link https://docs.npmjs.com/misc/semver}\r\n\t * @type {string}\r\n\t */\r\n\tstatic VERSION: string = \"4.0.0-beta.32\";\r\n\r\n\t/**\r\n\t * Invalid sizes\r\n\t * @rodo Remove commented code\r\n\t */\r\n\t//public invalidSizes: Array<Sprite>;\r\n\r\n\t/**\r\n\t * Number of times per second charts will be updated.\r\n\t *\r\n\t * This means that each time an element is invalidated it will wait for the\r\n\t * next cycle to be re-validated, and possibly redrawn.\r\n\t *\r\n\t * This happens every `1000 / frameRate` milliseconds.\r\n\t *\r\n\t * Reducing this number may reduce the load on the CPU, but might slightly\r\n\t * reduce smoothness of the animations.\r\n\t *\r\n\t * @type {number}\r\n\t * @deprecated Moved to [[Registry]]\r\n\t */\r\n\t//public frameRate: number = 60;\r\n\r\n\t/**\r\n\t * Number of times per second component container is measured.\r\n\t *\r\n\t * It is not wise to measure container as often as `frameRate`, as this would\r\n\t * use a lot of CPU when resizing window.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tpublic measureRate: number = 10;\r\n\r\n\t/**\r\n\t * @todo Description\r\n\t * @ignore Exclude from docs\r\n\t * @private\r\n\t * @type {number}\r\n\t */\r\n\tpublic measureCounter: number = 0;\r\n\r\n\t/**\r\n\t * @todo Description\r\n\t * @ignore Exclude from docs\r\n\t * @private\r\n\t * @type {number}\r\n\t */\r\n\tpublic measureAt: number;\r\n\r\n\t/**\r\n\t * @todo Description\r\n\t * @todo Needed?\r\n\t * @ignore Exclude from docs\r\n\t * @type {number}\r\n\t */\r\n\tpublic dummyCounter: number = 0;\r\n\r\n\t/**\r\n\t * @todo Description\r\n\t * @ignore Exclude from docs\r\n\t * @type {number}\r\n\t */\r\n\tpublic time: number;\r\n\r\n\t/**\r\n\t * A [[Paper]] instance to create elements, that are not yet ready to be\r\n\t * placed in visible DOM.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Paper}\r\n\t */\r\n\tpublic ghostPaper: Paper;\r\n\r\n\t/**\r\n\t * Performs initialization of the System object.\r\n\t *\r\n\t * Called when the first [[Sprite]] object is created.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic constructor() {\r\n\t\t// frame at which we should measure\r\n\t\tthis.measureAt = Math.round(this.frameRate / this.measureRate);\r\n\r\n\t\t// ghost is used to draw elements while real paper is not yet created or Sprite doesn't know parent yet\r\n\t\tlet ghostDiv: HTMLDivElement = document.createElement(\"div\");\r\n\t\tghostDiv.hidden = true;\r\n\t\tdocument.body.appendChild(ghostDiv);\r\n\t\tlet ghostSvgContainer = new SVGContainer(ghostDiv);\r\n\t\tthis.ghostPaper = new Paper(ghostSvgContainer.SVGContainer);\r\n\t\tthis.ghostPaper.id = \"ghost\";\r\n\r\n\t\t$dom.ready(() => {\r\n\t\t\tthis.update();\r\n\r\n\t\t\traf(() => {\r\n\t\t\t\tthis.update();\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tthis.time = Date.now();\r\n\t}\r\n\r\n\t/**\r\n\t * Reports time elapsed since timer was reset.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Needed?\r\n\t * @param {string}   msg    Message to report in console\r\n\t * @param {boolean}  reset  Reset time counter\r\n\t */\r\n\tpublic reportTime(msg: string, reset?: boolean): void {\r\n\t\tif (this.dummyCounter < 6) {\r\n\t\t\t//console.log(Date.now() - this.time, msg, this.dummyCounter2);\r\n\t\t}\r\n\t\tif (reset) {\r\n\t\t\tthis.time = Date.now();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Performs \"heartbeat\" operations `frameRate` number of times per second.\r\n\t *\r\n\t * When the chart element is invalidated, it is not immediately redrawn.\r\n\t *\r\n\t * Instead it waits for the next `update()` cycle to be re-validated.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Maybe should be private?\r\n\t */\r\n\tpublic update(): void {\r\n\r\n\t\tregistry.dispatchImmediately(\"enterframe\");\r\n\r\n\t\tthis.measureCounter++;\r\n\t\tif (this.measureCounter >= this.measureAt) {\r\n\t\t\tthis.measureCounter = 0;\r\n\t\t\tthis.measure();\r\n\t\t}\r\n\r\n\t\tthis.validateLayouts();\r\n\t\tthis.validatePositions();\r\n\r\n\t\t// data objects first - do all calculations\r\n\t\t// only data is parsed in chunks, thats why we do for loop instead of a while like with other invalid items.\r\n\t\t// important to go backwards, as items are removed!\r\n\t\t// TODO use iterator instead\r\n\t\twhile (registry.invalidDatas.length > 0) {\r\n\t\t\tlet component: Component = registry.invalidDatas[0];\r\n\t\t\tlet dataProvider: $type.Optional<Component> = component.dataProvider;\r\n\r\n\t\t\tif (!component.isDisposed()) {\r\n\t\t\t\tif (dataProvider && dataProvider.dataInvalid) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tdataProvider.validateData();\r\n\t\t\t\t\t\tif (dataProvider.dataValidationProgress < 1) {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcatch (e) {\r\n\t\t\t\t\t\t$array.remove(registry.invalidDatas, dataProvider);\r\n\t\t\t\t\t\tdataProvider.raiseCriticalError(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tcomponent.validateData();\r\n\t\t\t\t\t\tif (component.dataValidationProgress < 1) {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcatch (e) {\r\n\t\t\t\t\t\t$array.remove(registry.invalidDatas, component);\r\n\t\t\t\t\t\tcomponent.raiseCriticalError(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t$array.remove(registry.invalidDatas, component);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\twhile (registry.invalidRawDatas.length > 0) {\r\n\t\t\tlet component: Component = registry.invalidRawDatas[0];\r\n\t\t\tif (!component.isDisposed()) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tcomponent.validateRawData();\r\n\t\t\t\t}\r\n\t\t\t\tcatch (e) {\r\n\t\t\t\t\t$array.remove(registry.invalidRawDatas, component);\r\n\t\t\t\t\tcomponent.raiseCriticalError(e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t$array.remove(registry.invalidRawDatas, component);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\r\n\t\t// TODO use iterator instead\r\n\t\twhile (registry.invalidDataItems.length > 0) {\r\n\t\t\tlet component: Component = registry.invalidDataItems[0];\r\n\r\n\t\t\tlet dataProvider: $type.Optional<Component> = component.dataProvider;\r\n\r\n\t\t\t// this is needed to avoid partial value validation when data is parsed in chunks\r\n\t\t\tif (component.isDisposed() || component.dataInvalid || (dataProvider && dataProvider.dataInvalid)) {\r\n\t\t\t\t// void\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tcomponent.validateDataItems();\r\n\t\t\t\t}\r\n\t\t\t\tcatch (e) {\r\n\t\t\t\t\t$array.remove(registry.invalidDataItems, component);\r\n\t\t\t\t\tcomponent.raiseCriticalError(e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// this might seem too much, as validateValues removes from invalidDataItems aswell, but just to be sure (in case validateData is overriden and no super is called)\r\n\t\t\t$array.remove(registry.invalidDataItems, component);\r\n\t\t}\r\n\r\n\t\t// TODO use iterator instead\r\n\t\twhile (registry.invalidDataRange.length > 0) {\r\n\t\t\tlet component: Component = registry.invalidDataRange[0];\r\n\r\n\t\t\tlet dataProvider: $type.Optional<Component> = component.dataProvider;\r\n\r\n\t\t\tif (component.isDisposed() || component.dataInvalid || (dataProvider && dataProvider.dataInvalid)) {\r\n\t\t\t\t// void\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tcomponent.validateDataRange();\r\n\t\t\t\t\tif (!component.skipRangeEvent) {\r\n\t\t\t\t\t\tcomponent.dispatchImmediately(\"datarangechanged\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcomponent.skipRangeEvent = false;\r\n\t\t\t\t}\r\n\t\t\t\tcatch (e) {\r\n\t\t\t\t\t$array.remove(registry.invalidDataRange, component);\r\n\t\t\t\t\tcomponent.raiseCriticalError(e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// this might seem too much, as validateDataRange removes from invalidDataRange aswell, but just to be sure (in case validateData is overriden and no super is called)\r\n\t\t\t$array.remove(registry.invalidDataRange, component);\r\n\t\t}\r\n\r\n\t\tlet skippedSprites: Sprite[] = [];\r\n\r\n\t\t// display objects later\r\n\t\t// TODO use iterator instead\r\n\t\twhile (registry.invalidSprites.length > 0) {\r\n\r\n\t\t\tthis.validateLayouts();\r\n\t\t\tthis.validatePositions();\r\n\t\t\tlet sprite: Sprite = registry.invalidSprites[registry.invalidSprites.length - 1];\r\n\t\t\t// we need to check this, as validateLayout might validate sprite\r\n\r\n\t\t\tif (sprite && !sprite.isDisposed()) {\r\n\t\t\t\tif (sprite instanceof Component && (sprite.dataInvalid || (sprite.dataProvider && sprite.dataProvider.dataInvalid))) {\r\n\t\t\t\t\t// void\r\n\t\t\t\t\tskippedSprites.push(sprite);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t// @todo? maybe we should only check if preloader is visible and render only preloader sprites?\r\n\t\t\t\t\t// if not, think how can we the next line better.\r\n\t\t\t\t\tif (sprite.renderingFrame > 1) {\r\n\t\t\t\t\t\tsprite.renderingFrame--;\r\n\t\t\t\t\t\tskippedSprites.push(sprite);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (sprite.dataItem && sprite.dataItem.component && sprite.dataItem.component.dataInvalid) {\r\n\t\t\t\t\t\t// void\r\n\t\t\t\t\t\tskippedSprites.push(sprite);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tif (sprite instanceof Container) {\r\n\t\t\t\t\t\t\t\tsprite.children.each((child) => {\r\n\t\t\t\t\t\t\t\t\tif (child.invalid) {\r\n\t\t\t\t\t\t\t\t\t\tif (child instanceof Component && (child.dataInvalid || (child.dataProvider && child.dataProvider.dataInvalid))) {\r\n\t\t\t\t\t\t\t\t\t\t\tskippedSprites.push(child);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\telse if (child.dataItem && child.dataItem.component && child.dataItem.component.dataInvalid) {\r\n\t\t\t\t\t\t\t\t\t\t\tskippedSprites.push(child);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\t\t\tchild.validate();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tsprite.validate();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcatch (e) {\r\n\t\t\t\t\t\t\tsprite.invalid = false;\r\n\t\t\t\t\t\t\t$array.remove(registry.invalidSprites, sprite);\r\n\t\t\t\t\t\t\tsprite.raiseCriticalError(e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// this might seem too much, but it's ok\r\n\t\t\t\tsprite.invalid = false;\r\n\t\t\t}\r\n\t\t\t$array.remove(registry.invalidSprites, sprite);\r\n\t\t}\r\n\r\n\t\tregistry.invalidSprites = skippedSprites;\r\n\r\n\t\t// TODO make this more efficient\r\n\t\t// TODO don't copy the array\r\n\t\t$array.each($array.copy(animations), (x) => {\r\n\t\t\tx.update();\r\n\t\t});\r\n\r\n\t\t// to avoid flicker, we validate positions last time\r\n\t\t//this.validateLayouts();\r\n\t\t//this.validatePositions();\r\n\r\n\t\ttriggerIdle();\r\n\r\n\t\t// to avoid flicker, we validate positions last time\r\n\t\tthis.validateLayouts();\r\n\t\tthis.validatePositions();\r\n\r\n\t\tregistry.dispatchImmediately(\"exitframe\");\r\n\r\n\t\t//this.dummyCounter++;\r\n\r\n\t\traf(() => {\r\n\t\t\tthis.update();\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Triggers position re-validation on all [[Sprite]] elements that have\r\n\t * invalid(ated) positions.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Maybe should be private?\r\n\t */\r\n\tpublic validatePositions(): void {\r\n\t\t// invalid positions\r\n\t\t// TODO use iterator instead\r\n\t\twhile (registry.invalidPositions.length > 0) {\r\n\t\t\tlet sprite: Sprite = registry.invalidPositions[registry.invalidPositions.length - 1];\r\n\t\t\tif (!sprite.isDisposed()) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (sprite instanceof Container) {\r\n\t\t\t\t\t\tsprite.children.each((sprite) => {\r\n\t\t\t\t\t\t\tif (sprite.positionInvalid) {\r\n\t\t\t\t\t\t\t\tsprite.validatePosition();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tsprite.validatePosition();\r\n\t\t\t\t}\r\n\t\t\t\tcatch (e) {\r\n\t\t\t\t\tsprite.positionInvalid = false;\r\n\t\t\t\t\t$array.remove(registry.invalidPositions, sprite);\r\n\t\t\t\t\tsprite.raiseCriticalError(e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t$array.remove(registry.invalidPositions, sprite);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Triggers position re-validation on all [[Container]] elements that have\r\n\t * invalid(ated) layouts.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Maybe should be private?\r\n\t */\r\n\tpublic validateLayouts(): void {\r\n\t\t// invalid positions\r\n\t\t// TODO use iterator instead\r\n\r\n\t\twhile (registry.invalidLayouts.length > 0) {\r\n\t\t\tlet container: Container = registry.invalidLayouts[registry.invalidLayouts.length - 1];\r\n\t\t\tif (!container.isDisposed()) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tcontainer.children.each((sprite) => {\r\n\t\t\t\t\t\tif (sprite instanceof Container && sprite.layoutInvalid) {\r\n\t\t\t\t\t\t\tsprite.validateLayout();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\tcontainer.validateLayout();\r\n\t\t\t\t}\r\n\t\t\t\tcatch (e) {\r\n\t\t\t\t\tcontainer.layoutInvalid = false;\r\n\t\t\t\t\t$array.remove(registry.invalidLayouts, container);\r\n\t\t\t\t\tcontainer.raiseCriticalError(e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t$array.remove(registry.invalidLayouts, container);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * (Re)measures all top-level SVG containers for size.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Maybe should be private?\r\n\t */\r\n\tpublic measure(): void {\r\n\t\t$array.each(svgContainers, (svgContainer) => {\r\n\t\t\tif (svgContainer.autoResize) {\r\n\t\t\t\tsvgContainer.measure();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Outputs string to console if `verbose` is `true`.\r\n\t *\r\n\t * @param {any} value Message to output to console\r\n\t */\r\n\tpublic log(value: any): void {\r\n\t\tif (options.verbose) {\r\n\t\t\tif (console) {\r\n\t\t\t\tconsole.log(value);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Get current theme\r\n\t * @return {ITheme} [description]\r\n\t */\r\n\t/*public get theme(): ITheme {\r\n\t\treturn $array.last(this.themes);\r\n\t}*/\r\n\r\n\t/**\r\n\t * Number of times per second charts will be updated.\r\n\t *\r\n\t * This means that each time an element is invalidated it will wait for the\r\n\t * next cycle to be re-validated, and possibly redrawn.\r\n\t *\r\n\t * This happens every `1000 / frameRate` milliseconds.\r\n\t *\r\n\t * Reducing this number may reduce the load on the CPU, but might slightly\r\n\t * reduce smoothness of the animations.\r\n\t *\r\n\t * @type {number} Frame rate\r\n\t */\r\n\tpublic set frameRate(value: number) {\r\n\t\tregistry.frameRate = value;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Frame rate\r\n\t */\r\n\tpublic get frameRate(): number {\r\n\t\treturn registry.frameRate;\r\n\t}\r\n}\r\n\r\n\r\nlet system: $type.Optional<System> = null;\r\n\r\n/**\r\n * Returns a singleton global instance of [[System]].\r\n *\r\n * All code should call this function, rather than instantiating their\r\n * own System objects.\r\n */\r\nexport function getSystem(): System {\r\n\tif (system == null) {\r\n\t\tsystem = new System();\r\n\t}\r\n\r\n\treturn system;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../src/.internal/core/System.ts","/**\r\n * A collection of String-based constants.\r\n * @hidden\r\n * @ignore Exclude from docs\r\n */\r\n\r\n/**\r\n * @ignore Exclude from docs\r\n * @type {string}\r\n */\r\nexport let PX: string = \"px\";\r\n\r\n/**\r\n * @ignore Exclude from docs\r\n * @type {string}\r\n */\r\nexport let STRING: string = \"string\";\r\n\r\n/**\r\n * @ignore Exclude from docs\r\n * @type {string}\r\n */\r\nexport let NUMBER: string = \"number\";\r\n\r\n/**\r\n * @ignore Exclude from docs\r\n * @type {string}\r\n */\r\nexport let DATE: string = \"date\";\r\n\r\n/**\r\n * @ignore Exclude from docs\r\n * @type {string}\r\n */\r\nexport let DURATION: string = \"duration\";\r\n\r\n/**\r\n * @ignore Exclude from docs\r\n * @type {string}\r\n */\r\nexport let PLACEHOLDER: string = \"____\";\r\n\r\n/**\r\n * @ignore Exclude from docs\r\n * @type {string}\r\n */\r\nexport let PLACEHOLDER2: string = \"____\";\r\n\r\n/**\r\n * @ignore Exclude from docs\r\n * @type {string}\r\n */\r\nexport let PLACEHOLDER3: string = \"____\";\r\n\r\n/**\r\n * @ignore Exclude from docs\r\n * @type {string}\r\n */\r\nexport let PLACEHOLDER4: string = \"____\";\r\n\r\n/**\r\n * @ignore Exclude from docs\r\n * @type {string}\r\n */\r\nexport let PLACEHOLDER5: string = \"____\";\r\n\r\n/**\r\n * @ignore Exclude from docs\r\n * @type {string}\r\n */\r\nexport let PLACEHOLDER_L: string = \"__amcharts_a6uo6cfd8f__\";\r\n\r\n/**\r\n * @ignore Exclude from docs\r\n * @type {string}\r\n */\r\nexport let PLACEHOLDER_R: string = \"__amcharts_jhovxywbes__\";\r\n\r\n/**\r\n * @ignore Exclude from docs\r\n * @type {string}\r\n */\r\nexport let PLACEHOLDER_Q: string = \"__amcharts_pf4bcqdo3t__\";\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/utils/Strings.ts","/**\r\n * Contains code and logic for generating linear gradients.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { BaseObject } from \"../../Base\";\r\nimport { List } from \"../../utils/List\";\r\nimport { Group } from \"../Group\";\r\nimport { AMElement } from \"../AMElement\";\r\nimport { Paper } from \"../Paper\";\r\nimport { getSystem } from \"../../System\";\r\nimport { registry } from \"../../Registry\";\r\nimport { Color } from \"../../utils/Color\";\r\nimport * as $iter from \"../../utils/Iterator\";\r\nimport * as $math from \"../../utils/Math\";\r\nimport * as $type from \"../../utils/Type\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Represents an object describing color switching point in a gradiend.\r\n */\r\nexport interface IGradientStop {\r\n\r\n\t/**\r\n\t * Color.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tcolor: Color;\r\n\r\n\t/**\r\n\t * Offset defines where in the gradient the color should kick in. Values\r\n\t * from 0 to 1 are possible with 0 meaning start, 0.5 half-way through the\r\n\t * gradient, etc.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\toffset: number;\r\n\r\n\t/**\r\n\t * Transparency of the color. 0 - completely transparent, 1 - fully opaque.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\topacity: number;\r\n\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Linear gradient class.\r\n */\r\nexport class LinearGradient extends BaseObject {\r\n\r\n\t/**\r\n\t * List of colors switch definitions in a gradient.\r\n\t *\r\n\t * @type {List<IGradientStop>}\r\n\t */\r\n\tprotected _stops: List<IGradientStop> = new List<IGradientStop>();\r\n\r\n\t/**\r\n\t * An SVG `<group>` element used to draw gradient.\r\n\t *\r\n\t * @type {Group}\r\n\t */\r\n\tpublic element: Group;\r\n\r\n\t/**\r\n\t * Reference to Paper to add element to.\r\n\t *\r\n\t * @type {Paper}\r\n\t */\r\n\tprotected _paper: $type.Optional<Paper>;\r\n\r\n\t/**\r\n\t * Gradient direction.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tprotected _rotation: number = 0;\r\n\r\n\t/**\r\n\t * Constructor.\r\n\t */\r\n\tconstructor() {\r\n\r\n\t\t// Init\r\n\t\tsuper();\r\n\t\tthis.className = \"LinearGradient\";\r\n\r\n\t\tthis._stops.events.on(\"setIndex\", this.validate, this);\r\n\t\tthis._stops.events.on(\"inserted\", this.validate, this);\r\n\t\t// Create element\r\n\t\tthis.element = this.paper.addGroup(\"linearGradient\");\r\n\t\tthis.id = \"gradient-\" + registry.getUniqueId();\r\n\t\tthis.element.attr({ \"id\": this.id });\r\n\t\tthis._disposers.push(this.element);\r\n\r\n\t\t// Apply theme\r\n\t\tthis.applyTheme();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Draws gradient.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic validate(): void {\r\n\r\n\t\tlet rotation = (this._rotation + 90) * $math.RADIANS;\r\n\r\n\t\tlet x1: string = Math.round(50 + Math.sin(rotation + Math.PI) * 50) + '%';\r\n\t\tlet y1: string = Math.round(50 + Math.cos(rotation) * 50) + '%';\r\n\r\n\t\tlet x2: string = Math.round(50 + Math.sin(rotation) * 50) + '%';\r\n\t\tlet y2: string = Math.round(50 + Math.cos(rotation + Math.PI) * 50) + '%';\r\n\r\n\r\n\t\tlet gradientElement: Group = this.element;\r\n\t\tgradientElement.removeChildNodes();\r\n\t\tgradientElement.attr({\"x1\": x1, \"x2\":x2, \"y1\": y1, \"y2\":y2});\r\n\r\n\t\t$iter.each($iter.indexed(this._stops.iterator()), (a) => {\r\n\t\t\tlet i = a[0];\r\n\t\t\tlet stop = a[1];\r\n\t\t\tlet offset: number = stop.offset;\r\n\r\n\t\t\tif (!$type.isNumber(offset)) {\r\n\t\t\t\toffset = i / (this._stops.length - 1)\r\n\t\t\t}\r\n\r\n\t\t\tlet gradientStop: AMElement = this.paper.add(\"stop\");\r\n\t\t\tgradientStop.attr({ \"stop-color\": stop.color });\r\n\t\t\tif ($type.isNumber(stop.opacity)) {\r\n\t\t\t\tgradientStop.attr({ \"stop-opacity\": stop.opacity });\r\n\t\t\t}\r\n\t\t\tif ($type.isNumber(offset)) {\r\n\t\t\t\tgradientStop.attr({ \"offset\": offset });\r\n\t\t\t}\r\n\r\n\t\t\tgradientElement.add(gradientStop);\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Clears the gradient.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic clear(): void {\r\n\t\tthis._stops.clear();\r\n\t}\r\n\r\n\t/**\r\n\t * Adds a color step to the gradient.\r\n\t *\r\n\t * @param {Color}   color    Color (hex code or named color)\r\n\t * @param {number}  opacity  Opacity (value from 0 to 1; 0 completely transaprent, 1 fully opaque)\r\n\t * @param {number}  offset   Position of color in the gradient (value 0 to 1; 0 meaning start of the gradient and 1 end)\r\n\t */\r\n\tpublic addColor(color: Color, opacity?: number, offset?: number): void {\r\n\t\tthis._stops.push({ color: color, opacity: opacity, offset: offset });\r\n\t}\r\n\r\n\t/**\r\n\t * A list of color stops in the gradient.\r\n\t *\r\n\t * @return {List<IGradientStop>} Stops\r\n\t */\r\n\tpublic get stops(): List<IGradientStop> {\r\n\t\treturn this._stops;\r\n\t}\r\n\r\n\t/**\r\n\t * [[Paper]] instace to use for the gradient.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {Paper}  paper  Paper\r\n\t */\r\n\tpublic set paper(paper: Paper) {\r\n\t\tif (this._paper != paper) {\r\n\t\t\tthis._paper = paper;\r\n\t\t\tthis.validate();\r\n\t\t\tpaper.appendDef(this.element);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore Exclude from docs\r\n\t * @return {Paper} Paper\r\n\t */\r\n\tpublic get paper(): Paper {\r\n\t\tif (this._paper) {\r\n\t\t\treturn this._paper;\r\n\t\t}\r\n\t\treturn getSystem().ghostPaper;\r\n\t}\r\n\r\n\t/**\r\n\t * Rotation (direction) of the gradient in degrees.\r\n\t *\r\n\t * @param {number}  value  Rotation\r\n\t */\r\n\tpublic set rotation(value: number) {\r\n\t\t//this.element.attr({ \"gradientTransform\": \"rotate(\" + value + \" 10 100)\" });\r\n\t\tthis._rotation = value;\r\n\t\tthis.validate();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Rotation\r\n\t */\r\n\tpublic get rotation(): number {\r\n\t\treturn this._rotation;\r\n\t}\r\n\r\n\r\n\tpublic copyFrom(source:this){\r\n\t\tsuper.copyFrom(source);\r\n\t\tthis._stops = source.stops;\r\n\t\tthis._rotation = source.rotation;\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../../src/.internal/core/rendering/fills/LinearGradient.ts","/**\r\n * Defines functionality for \"Data Item\"\r\n *\r\n * A Data Item can be any object that can hold data. For example [[LineSeries]]\r\n * holds a number of values, that comprise a line graph. Each of those values\r\n * (data points) is a {DataItem}.\r\n *\r\n * Furthermore the [[LineSeries]] itself can be represented as a entry in the\r\n * legend. Since legend needs access to Line Series' value, a DataItem is\r\n * created for the series.\r\n *\r\n * @todo Verify/update description\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { BaseObjectEvents, IBaseObjectEvents } from \"./Base\";\r\nimport { EventDispatcher, AMEvent } from \"./utils/EventDispatcher\";\r\nimport { Adapter } from \"./utils/Adapter\";\r\nimport { Component, CalculatedValue } from \"./Component\";\r\nimport { IAnimatable, Animation, IAnimationOptions, IAnimationEvents, AnimationDisposer } from \"./utils/Animation\";\r\nimport { Sprite } from \"./Sprite\";\r\nimport { IDisposer, MultiDisposer } from \"./utils/Disposer\";\r\nimport * as $utils from \"./utils/Utils\";\r\nimport * as $array from \"./utils/Array\";\r\nimport * as $object from \"./utils/Object\";\r\nimport * as $type from \"./utils/Type\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n *\r\n * @todo Description\r\n  */\r\nexport interface IValues { }\r\n\r\n/**\r\n * Defines data events for [[DataItem]]\r\n */\r\nexport interface IDataItemEvents extends IBaseObjectEvents {\r\n\r\n\t/**\r\n\t * Invoked when the visibility of the Data Item changes, i.e. Series is\r\n\t * hidden\r\n\t */\r\n\tvisibilitychanged: {\r\n\t\tvisible: boolean;\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when the value is changed\r\n\t */\r\n\tvaluechanged: {\r\n\t\tproperty: string;\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when the internal/intermediate value has changed\r\n\t */\r\n\tworkingvaluechanged: {\r\n\t\tproperty: string;\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when the calculated value has changed\r\n\t */\r\n\tcalculatedvaluechanged: {\r\n\t\tproperty: string;\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when the location of Data Item changes\r\n\t */\r\n\tlocationchanged: {\r\n\t\tproperty: string;\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when working location of Data Item changes\r\n\t */\r\n\tworkinglocationchanged: {\r\n\t\tproperty: string;\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when a property of the Data Item changes\r\n\t */\r\n\tpropertychanged: {\r\n\t\tproperty: string;\r\n\t\tvalue: any; // TODO don't make this any\r\n\t};\r\n\r\n}\r\n\r\n/**\r\n * Defines adapters for [[DataItem]]\r\n * Includes both the [[Adapter]] definitions and properties\r\n * @see {@link Adapter}\r\n */\r\nexport interface IDataItemAdapters {\r\n\r\n\tduration: number;\r\n\r\n\tvalue: {\r\n\t\tvalue: number,\r\n\t\tfield: string\r\n\t};\r\n\r\n\tworkingValue: {\r\n\t\tworkingValue: number,\r\n\t\tfield: string\r\n\t};\r\n\r\n\tdate: {\r\n\t\tdate: Date,\r\n\t\tfield: string\r\n\t};\r\n\r\n}\r\n\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * DataItem represents single element in data, for example a data point in a\r\n * Serial Chart Series, e.g. a column.\r\n *\r\n * DataItem defines relationship between structured data, required for specific\r\n * chart type or task, and raw source data.\r\n *\r\n * It also implements required calculations, updates related visual elements,\r\n * etc.\r\n *\r\n * @todo Description\r\n * @important\r\n */\r\nexport class DataItem extends BaseObjectEvents implements IAnimatable {\r\n\r\n\t/**\r\n\t * When we are using a nested data structure, like for example in a TreeMap,\r\n\t * this property points to a parent Data Item of this one.\r\n\t *\r\n\t * @type {Optional<this>}\r\n\t */\r\n\tpublic parent: $type.Optional<this>;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IDataItemEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IDataItemEvents;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IExportAdapters}\r\n\t */\r\n\tpublic _adapter!: IDataItemAdapters;\r\n\r\n\t/**\r\n\t * Holds Adapter.\r\n\t *\r\n\t * @type {Adapter<DataItem, IDataItemAdapters>}\r\n\t */\r\n\tpublic adapter = new Adapter<DataItem, IDataItemAdapters>(this);\r\n\r\n\t/**\r\n\t * Defines a type of [[Component]] this Data Item is used for.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Component}\r\n\t */\r\n\tpublic _component!: Component;\r\n\r\n\t/**\r\n\t * A reference to a [[Component]] this Data Item belongs to.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<Component>}\r\n\t */\r\n\tpublic component: $type.Optional<this[\"_component\"]>;\r\n\r\n\t/**\r\n\t * A reference to the original Data Item in raw data.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Object}\r\n\t */\r\n\tprotected _dataContext: Object;\r\n\r\n\t/**\r\n\t * This Data Item is currently disabled.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {boolean}\r\n\t */\r\n\tprotected _disabled: boolean = false;\r\n\r\n\t/**\r\n\t * Indicates whether Data Item has any properties set.\r\n\t *\r\n\t * If it does not have any, the code can use this property to check whether\r\n\t * they need to apply costly operation of re-applying properties, whenever\r\n\t * Data Item-related element is redrawn, e.g. series.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tpublic hasProperties: boolean = false;\r\n\r\n\t/**\r\n\t * An object containing calculated values.\r\n\t */\r\n\tpublic readonly values: { [index: string]: { [index: string]: number } } = {};\r\n\r\n\t/**\r\n\t * An object container current working values.\r\n\t */\r\n\t//public readonly workingValues: { [index: string]: { [index: string]: number } } = {};\r\n\r\n\t/**\r\n\t * An object containing categories.\r\n\t */\r\n\tpublic readonly categories: { [index: string]: string } = {};\r\n\r\n\t/**\r\n\t * An object containing dates.\r\n\t */\r\n\tpublic readonly dates: { [index: string]: Date } = {};\r\n\r\n\t/**\r\n\t * An object containing locations for the Data Item.\r\n\t *\r\n\t * A location is a position within date or category, or, in some other cases,\r\n\t * where there is no single point but rather some period.\r\n\t */\r\n\tpublic readonly locations: { [index: string]: number } = {};\r\n\r\n\t/**\r\n\t * Current working locations.\r\n\t */\r\n\tpublic readonly workingLocations: { [index: string]: number } = {};\r\n\r\n\t/**\r\n\t * An object containing Data Item specific appearance properties in key-value\r\n\t * pairs.\r\n\t *\r\n\t * Sometimes a single Data Item needs to apply different properties than the\r\n\t * rest of the data [[Series]] it is part of. E.g. a single column,\r\n\t * represented by a Data Item needs to be filled with a different color than\r\n\t * the reset of the [[ColumnSeries]] it belongs to.\r\n\t *\r\n\t * That's where Data Item's `properties` come into play.\r\n\t *\r\n\t * Please note that you should set Data Item-specific properties using\r\n\t * `setProperty()` method, rather than access `properties` object directly.\r\n\t */\r\n\tpublic readonly properties: { [index: string]: any } = {};\r\n\r\n\t/**\r\n\t * A list of [[Sprite]] elements that are associated with this Data Item.\r\n\t *\r\n\t * E.g. an [[Axis]] Data Item has several separate elements associated with\r\n\t * it, like [[AxisTick]], [[AxisLabel]], and [[Grid]].\r\n\t *\r\n\t * Data Item keeps track of all of them, so it can toggle all related visual\r\n\t * elements when it itself is toggled.\r\n\t *\r\n\t * @type {Sprite[]}\r\n\t */\r\n\tpublic readonly sprites: Sprite[] = [];\r\n\r\n\t/**\r\n\t * Identifies if this object is a \"template\" and should not be treated as\r\n\t * real object that is drawn or actually used in the chart.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tpublic isTemplate: boolean = false;\r\n\r\n\t/**\r\n\t * List of animations currently animating Data Item's values.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<Array<Animation>>}\r\n\t */\r\n\tprotected _animations: $type.Optional<Array<Animation>>;\r\n\r\n\t/**\r\n\t * Is Data Item currently visible?\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {boolean}\r\n\t */\r\n\tprotected _visible: boolean = true;\r\n\r\n\t/**\r\n\t * Should this Data Item be used when calculating data ranges and scales?\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {boolean}\r\n\t */\r\n\tprotected _ignoreMinMax: boolean = false;\r\n\r\n\t/**\r\n\t * Some of the Data Item's data fields may contain an array of children. This\r\n\t * property contains an object indicating which fields hold an array, so that\r\n\t * they can be processed properly.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic hasChildren: { [index: string]: boolean } = {};\r\n\r\n\t/**\r\n\t * Indicates whether Data Item is currently animiting from visible to hidden\r\n\t * state.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tpublic isHiding: boolean = false;\r\n\r\n\t/**\r\n\t * Holds a Disposer reference to hiding [[Animation]] currently playing.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<IDisposer>}\r\n\t */\r\n\tprotected _hideDisposer: $type.Optional<IDisposer>;\r\n\r\n\t/**\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tprotected _valueAnimations: { [key: string]: Animation } = {};\r\n\r\n\t/**\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tprotected _locationAnimations: { [key: string]: Animation } = {};\r\n\r\n\t/**\r\n\t * Constructor\r\n\t * @todo Adding events to disposers produces errors in some cases, which means that chart is using disposed Data Items which is not right\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"DataItem\";\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Data Item's position index in Component's data.\r\n\t *\r\n\t * @return {number} Index\r\n\t */\r\n\tpublic get index(): number {\r\n\t\tif(this.component){\r\n\t\t\treturn this.component.dataItems.indexOf(this);\r\n\t\t}\r\n\t\telse{\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * A list of [[Animations]] objects currently mutating Data Item's values.\r\n\t *\r\n\t * @return {Array<Animation>} [description]\r\n\t */\r\n\tpublic get animations(): Array<Animation> {\r\n\t\tif (!this._animations) {\r\n\t\t\tthis._animations = [];\r\n\t\t\tthis._disposers.push(new AnimationDisposer(this._animations));\r\n\t\t}\r\n\t\treturn this._animations;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets visibility of the Data Item.\r\n\t *\r\n\t * @param {boolean} value Visible?\r\n\t */\r\n\tpublic set visible(value: boolean) {\r\n\t\tthis.setVisibility(value);\r\n\t\tif (this._visible != value) {\r\n\t\t\tthis._visible = value;\r\n\r\n\t\t\tif (this.events.isEnabled(\"visibilitychanged\")) {\r\n\t\t\t\tconst event: AMEvent<this, IDataItemEvents>[\"visibilitychanged\"] = {\r\n\t\t\t\t\ttype: \"visibilitychanged\",\r\n\t\t\t\t\ttarget: this,\r\n\t\t\t\t\tvisible: value\r\n\t\t\t\t};\r\n\t\t\t\tthis.events.dispatchImmediately(\"visibilitychanged\", event);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Disables all Sprites associated with this Data Item.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {boolean}\r\n\t */\r\n\tpublic set __disabled(value: boolean) {\r\n\t\t//\tif (this._disabled != value) { // not good\r\n\t\tthis._disabled = value;\r\n\r\n\t\t$array.each(this.sprites, (sprite) => {\r\n\t\t\tsprite.__disabled = value;\r\n\t\t});\r\n\t\t//\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Is this Data Item currently disabled?\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {boolean}\r\n\t */\r\n\tpublic get __disabled(): boolean {\r\n\t\treturn this._disabled;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets visibility of the Data Item.\r\n\t *\r\n\t * @param {boolean} value Data Item\r\n\t */\r\n\tpublic setVisibility(value: boolean): void {\r\n\t\t$array.each(this.sprites, (sprite) => {\r\n\t\t\tsprite.visible = value;\r\n\t\t\t//sprite.hide();\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Returns `true` if this Data Item is currently visible.\r\n\t *\r\n\t * @return {boolean} Visible?\r\n\t */\r\n\tpublic get visible(): boolean {\r\n\t\treturn this._visible;\r\n\t}\r\n\r\n\t/**\r\n\t * Shows the Data Item and related visual elements.\r\n\t *\r\n\t * @param {number}    duration  Animation duration (ms)\r\n\t * @param {number}    delay     Delay animation (ms)\r\n\t * @param {string[]}  fields    A list of fields to set values of\r\n\t */\r\n\tpublic show(duration?: number, delay?: number, fields?: string[]): $type.Optional<Animation> {\r\n\t\tthis.isHiding = false;\r\n\r\n\t\tif (this._hideDisposer) {\r\n\t\t\tthis.removeDispose(this._hideDisposer);\r\n\t\t}\r\n\r\n\t\tlet animation: $type.Optional<Animation>;\r\n\r\n\t\tif (fields) {\r\n\t\t\t$array.each(fields, (field) => {\r\n\t\t\t\tanimation = this.setWorkingValue(field, this.values[field].value, duration, delay);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t$array.each(this.sprites, (sprite) => {\r\n\t\t\tlet animation = sprite.show(duration);\r\n\t\t\tif (delay != null && delay > 0 && animation != null && !animation.isDisposed()) {\r\n\t\t\t\tanimation.delay(delay);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis._visible = true;\r\n\t\treturn animation;\r\n\t}\r\n\r\n\t/**\r\n\t * Destroys this object and all related data.\r\n\t */\r\n\tpublic dispose(){\r\n\t\tsuper.dispose();\r\n\t\t$array.each(this.sprites, (sprite)=>{\r\n\t\t\tsprite.dispose();\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Hides the Data Item and related visual elements.\r\n\t *\r\n\t * @param {number}    duration  Animation duration (ms)\r\n\t * @param {number}    delay     Delay animation (ms)\r\n\t * @param {number}    toValue   A value to set to `fields` when hiding\r\n\t * @param {string[]}  fields    A list of data fields to set value to `toValue`\r\n\t */\r\n\tpublic hide(duration?: number, delay?: number, toValue?: number, fields?: string[]): $type.Optional<Animation> {\r\n\t\tthis.isHiding = true;\r\n\r\n\t\t$array.each(this.sprites, (sprite) => {\r\n\t\t\tlet animation = sprite.hide(duration);\r\n\t\t\tif (delay != null && delay > 0 && animation != null && !animation.isDisposed()) {\r\n\t\t\t\tanimation.delay(delay);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif ($type.isNumber(toValue) && fields) {\r\n\t\t\tlet animation: $type.Optional<Animation>;\r\n\r\n\t\t\t$array.each(fields, (field) => {\r\n\t\t\t\tlet anim = this.setWorkingValue(field, toValue, duration, delay);\r\n\t\t\t\tif (anim) {\r\n\t\t\t\t\tanimation = anim;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (animation) {\r\n\t\t\t\tthis._hideDisposer = animation.events.on(\"animationended\", () => {\r\n\t\t\t\t\tthis.visible = false;\r\n\t\t\t\t\tthis.isHiding = false;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis._disposers.push(this._hideDisposer);\r\n\t\t\t\treturn animation;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.visible = false;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a duration (ms) the Data Item should take to animate from one\r\n\t * value to another.\r\n\t *\r\n\t * If the duration is not specified via parameter, this method will try to\r\n\t * request a default duration from the related `Component`.\r\n\t *\r\n\t * @param  {number}  duration  Default duration (ms)\r\n\t * @return {number}            Duration (ms)\r\n\t */\r\n\tpublic getDuration(duration?: number): $type.Optional<number> {\r\n\t\tlet component: $type.Optional<Component> = this.component;\r\n\t\tif (component) {\r\n\t\t\tif (!$type.isNumber(duration)) {\r\n\t\t\t\tduration = component.interpolationDuration;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (duration != null) {\r\n\t\t\treturn this.adapter.apply(\"duration\", duration);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a numeric value for specific data field.\r\n\t *\r\n\t * If `calculated` is not set, it will return a raw value, as it is in\r\n\t * source data.\r\n\t *\r\n\t * If `calculated` is set, it will return a pre-calculated specific value.\r\n\t *\r\n\t * @param  {string}           name        Data field name\r\n\t * @param  {CalculatedValue}  calculated  A calculated value name\r\n\t * @return {Optional<number>}             Value\r\n\t */\r\n\tpublic getValue(name: string, calculated?: CalculatedValue): $type.Optional<number> {\r\n\t\tif (name && this.component) {\r\n\t\t\tif (!calculated) {\r\n\t\t\t\tcalculated = (<any>this.component.dataFields)[name + \"Show\"];\r\n\t\t\t\tif (!calculated) {\r\n\t\t\t\t\tcalculated = \"value\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst value = this.values[name][calculated];\r\n\r\n\t\t\tif (this.adapter.isEnabled(\"value\")) {\r\n\t\t\t\treturn this.adapter.apply(\"value\", {\r\n\t\t\t\t\tvalue: value,\r\n\t\t\t\t\tfield: name\r\n\t\t\t\t}).value;\r\n\r\n\t\t\t} else {\r\n\t\t\t\treturn value;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a current working value for a specific data field.\r\n\t *\r\n\t * The actual value may differ from the one returned by `getValue()`. The\r\n\t * latter returns static values from the data source.\r\n\t *\r\n\t * `getWorkingValue()` returns current value, which is usually different if\r\n\t * Data Item is animating from one state to another.\r\n\t *\r\n\t * @param  {string}           name        Data field name\r\n\t * @param  {CalculatedValue}  calculated  A calculated value name\r\n\t * @return {Optional<number>}             Value\r\n\t */\r\n\tpublic getWorkingValue(name: string): $type.Optional<number> {\r\n\t\tif (name && this.component) {\r\n\t\t\tlet realName = (<any>this.component.dataFields)[name + \"Show\"];\r\n\t\t\tif (!realName) {\r\n\t\t\t\trealName = \"workingValue\";\r\n\t\t\t}\r\n\r\n\t\t\treturn this.adapter.apply(\"workingValue\", {\r\n\t\t\t\tworkingValue: this.values[name][realName],\r\n\t\t\t\tfield: name\r\n\t\t\t}).workingValue;\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Sets a numeric value for specific data field.\r\n\t *\r\n\t * @param {string}           name        Data field name\r\n\t * @param {number}           value       Value\r\n\t * @param {CalculatedValue}  calculated  Calculated data field name\r\n\t * @param {number}           duration    Duration (ms) to animate to new value to\r\n\t * @param {number}           delay       Delay animation (ms)\r\n\t */\r\n\tpublic setValue(name: string, value: number, duration?: number, delay?: number): void {\r\n\t\tlet currentValue: number = this.values[name].value;\r\n\t\tlet newDuration: $type.Optional<number> = this.getDuration(duration);\r\n\t\tvalue = $type.toNumber(value);\r\n\t\tif (currentValue !== value) {\r\n\t\t\tthis.values[name].value = value;\r\n\r\n\t\t\tif (this.events.isEnabled(\"valuechanged\")) {\r\n\t\t\t\tconst event: AMEvent<this, IDataItemEvents>[\"valuechanged\"] = {\r\n\t\t\t\t\ttype: \"valuechanged\",\r\n\t\t\t\t\ttarget: this,\r\n\t\t\t\t\tproperty: name\r\n\t\t\t\t};\r\n\t\t\t\tthis.events.dispatchImmediately(\"valuechanged\", event);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.setWorkingValue(name, value, newDuration, delay);\r\n\t}\r\n\r\n\tsetCalculatedValue(name: string, value: number, calculated: CalculatedValue): void {\r\n\t\tlet currentValue: number = this.values[name][calculated];\r\n\r\n\t\tif (currentValue !== value && $type.isNumber(value)) {\r\n\t\t\tthis.values[name][calculated] = value;\r\n\r\n\t\t\tif (this.events.isEnabled(\"calculatedvaluechanged\")) {\r\n\t\t\t\tconst event: AMEvent<this, IDataItemEvents>[\"calculatedvaluechanged\"] = {\r\n\t\t\t\t\ttype: \"calculatedvaluechanged\",\r\n\t\t\t\t\ttarget: this,\r\n\t\t\t\t\tproperty: name\r\n\t\t\t\t};\r\n\t\t\t\tthis.events.dispatchImmediately(\"calculatedvaluechanged\", event);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Set current working numeric value for a specific data field.\r\n\t *\r\n\t * @param  {string}           name        Data field name\r\n\t * @param  {number}           value       Value\r\n\t * @param  {CalculatedValue}  calculated  Calculated data field name\r\n\t * @param  {number}           duration    Duration (ms) to animate to new value to\r\n\t * @param  {number}           delay       Delay animation (ms)\r\n\t * @return {Optional<Animation>}          An [[Animation]] object used for transition to new values\r\n\t */\r\n\tpublic setWorkingValue(name: string, value: number, duration?: number, delay?: number): $type.Optional<Animation> {\r\n\t\tif ($type.isNumber(this.values[name].value)) {\r\n\t\t\tlet newDuration: $type.Optional<number> = this.getDuration(duration);\r\n\t\t\tlet workingValue: number = this.values[name].workingValue;\r\n\r\n\t\t\tif (newDuration != null && newDuration > 0 && $type.isNumber(workingValue) && this.component) { // sometimes NaN is passed, so only change this to != null if all cases of NaN are handled, otherwise animation won't stop\r\n\r\n\t\t\t\tif (workingValue != value) {\r\n\t\t\t\t\tlet animation: Animation = this.animate({ childObject: this.values[name], property: \"workingValue\", from: workingValue, to: value, dummyData:name }, newDuration, this.component.interpolationEasing);\r\n\t\t\t\t\tif (delay != null) {\r\n\t\t\t\t\t\tanimation.delay(delay);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tanimation.events.on(\"animationstarted\", this.handleInterpolationProgress, this);\r\n\t\t\t\t\tanimation.events.on(\"animationprogress\", this.handleInterpolationProgress, this);\r\n\t\t\t\t\tanimation.events.on(\"animationended\", this.handleInterpolationProgress, this);\r\n\t\t\t\t\tthis._valueAnimations[name] = animation;\r\n\t\t\t\t\treturn animation;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tlet valueAnimation = this._valueAnimations[name];\r\n\t\t\t\t\tif (valueAnimation) {\r\n\t\t\t\t\t\tvalueAnimation.stop();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.values[name].workingValue = value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\r\n\t\t\t\tlet valueAnimation = this._valueAnimations[name];\r\n\t\t\t\tif (valueAnimation) {\r\n\t\t\t\t\tvalueAnimation.stop();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.values[name].workingValue = value;\r\n\r\n\t\t\t\tif (this.events.isEnabled(\"workingvaluechanged\")) {\r\n\t\t\t\t\tconst event: AMEvent<this, IDataItemEvents>[\"workingvaluechanged\"] = {\r\n\t\t\t\t\t\ttype: \"workingvaluechanged\",\r\n\t\t\t\t\t\ttarget: this,\r\n\t\t\t\t\t\tproperty: name\r\n\t\t\t\t\t};\r\n\t\t\t\t\tthis.events.dispatchImmediately(\"workingvaluechanged\", event);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Sets a relative location for a data field.\r\n\t *\r\n\t * A location is always relative on a 0 to 1 scale, with 0 being beginning,\r\n\t * 0.5 middle and 1 end.\r\n\t *\r\n\t * @todo Rewiew description\r\n\t * @param {string}  name      Data field name\r\n\t * @param {number}  value     Location (0-1)\r\n\t * @param {number}  duration  Duration (ms) to animate to new value to\r\n\t * @param {number}  delay     Delay animation (ms)\r\n\t */\r\n\tpublic setLocation(name: string, value: number, duration?: number, delay?: number) {\r\n\t\tlet currentLocation: number = this.locations[name];\r\n\r\n\t\tif (currentLocation !== value) {\r\n\t\t\tthis.locations[name] = value;\r\n\r\n\t\t\tif (this.events.isEnabled(\"locationchanged\")) {\r\n\t\t\t\tconst event: AMEvent<this, IDataItemEvents>[\"locationchanged\"] = {\r\n\t\t\t\t\ttype: \"locationchanged\",\r\n\t\t\t\t\ttarget: this,\r\n\t\t\t\t\tproperty: name\r\n\t\t\t\t};\r\n\t\t\t\tthis.events.dispatchImmediately(\"locationchanged\", event);\r\n\t\t\t}\r\n\r\n\t\t\tthis.setWorkingLocation(name, value, duration, delay);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Sets a current working location for a data field.\r\n\t *\r\n\t * @todo Rewiew description\r\n\t * @param {string}  name      Data field name\r\n\t * @param {number}  value     Location (0-1)\r\n\t * @param {number}  duration  Duration (ms) to animate to new value to\r\n\t * @param {number}  delay     Delay animation (ms)\r\n\t */\r\n\tpublic setWorkingLocation(name: string, value: number, duration?: number, delay?: number): $type.Optional<Animation> {\r\n\t\tlet newDuration: $type.Optional<number> = this.getDuration(duration);\r\n\t\tlet workingLocation: number = this.workingLocations[name];\r\n\r\n\t\tif (newDuration != null && newDuration > 0 && $type.isNumber(workingLocation) && this.component) { // sometimes NaN is passed, so only change this to != null if all cases of NaN are handled, otherwise animation won't stop\r\n\t\t\tif (workingLocation != value) {\r\n\t\t\t\tlet animation: Animation = this.animate({ childObject: this.workingLocations, property: name, from: workingLocation, to: value, dummyData:name }, newDuration, this.component.interpolationEasing);\r\n\t\t\t\tif (delay != null) {\r\n\t\t\t\t\tanimation.delay(delay);\r\n\t\t\t\t}\r\n\t\t\t\tanimation.events.on(\"animationstarted\", this.handleInterpolationProgress, this);\r\n\t\t\t\tanimation.events.on(\"animationprogress\", this.handleInterpolationProgress, this);\r\n\t\t\t\tanimation.events.on(\"animationended\", this.handleInterpolationProgress, this);\r\n\t\t\t\tthis._locationAnimations[name] = animation;\r\n\t\t\t\treturn animation;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tlet locationAnimation = this._locationAnimations[name];\r\n\t\t\t\tif (locationAnimation) {\r\n\t\t\t\t\tlocationAnimation.stop();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.workingLocations[name] = value;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tlet locationAnimation = this._locationAnimations[name];\r\n\t\t\tif (locationAnimation) {\r\n\t\t\t\tlocationAnimation.stop();\r\n\t\t\t}\r\n\r\n\t\t\tthis.workingLocations[name] = value;\r\n\r\n\t\t\tif (this.events.isEnabled(\"workinglocationchanged\")) {\r\n\t\t\t\tconst event: AMEvent<this, IDataItemEvents>[\"workinglocationchanged\"] = {\r\n\t\t\t\t\ttype: \"workinglocationchanged\",\r\n\t\t\t\t\ttarget: this,\r\n\t\t\t\t\tproperty: name\r\n\t\t\t\t};\r\n\t\t\t\tthis.events.dispatchImmediately(\"workinglocationchanged\", event);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets Date value to a data field.\r\n\t *\r\n\t * @param {string}  name      Data field name\r\n\t * @param {Date}    date      Date object\r\n\t * @param {number}  duration  Duration (ms) to animate to new value to\r\n\t */\r\n\tpublic setDate(name: string, date: Date, duration?: number) {\r\n\t\tif (!$type.isDate(date) && this.component) {\r\n\t\t\tdate = this.component.dateFormatter.parse(date);\r\n\t\t}\r\n\r\n\t\tlet currentDate: Date = this.dates[name];\r\n\t\tif (currentDate !== date) {\r\n\t\t\tthis.dates[name] = date;\r\n\t\t\tthis.setValue(name, date.getTime(), duration);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a Date value of the data field.\r\n\t *\r\n\t * @param  {string}  name  Data field name\r\n\t * @return {Date}          Date object\r\n\t */\r\n\tpublic getDate(name: string): Date {\r\n\t\treturn this.adapter.apply(\"date\", {\r\n\t\t\tdate: this.dates[name],\r\n\t\t\tfield: name\r\n\t\t}).date;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets a Data Item-specific visual properties to apply to related elements.\r\n\t *\r\n\t * @param {string}  name   Property name\r\n\t * @param {any}     value  Property value\r\n\t */\r\n\tpublic setProperty(name: string, value: any) {\r\n\t\tif (this.properties[name] !== value) {\r\n\t\t\tthis.hasProperties = true;\r\n\t\t\tthis.properties[name] = value;\r\n\r\n\t\t\tif (this.events.isEnabled(\"propertychanged\")) {\r\n\t\t\t\tconst event: AMEvent<this, IDataItemEvents>[\"propertychanged\"] = {\r\n\t\t\t\t\ttype: \"propertychanged\",\r\n\t\t\t\t\ttarget: this,\r\n\t\t\t\t\tproperty: name,\r\n\t\t\t\t\tvalue: value\r\n\t\t\t\t};\r\n\t\t\t\tthis.events.dispatchImmediately(\"propertychanged\", event);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Sets a related category for this Data Item.\r\n\t *\r\n\t * @todo Review description\r\n\t * @param {string}  name   Data field name\r\n\t * @param {string}  value  Category\r\n\t */\r\n\tpublic setCategory(name: string, value: string) {\r\n\t\tif (!$type.isString(value)) {\r\n\t\t\tvalue = $type.castString(value);\r\n\t\t}\r\n\r\n\t\tif (this.categories[name] !== value) {\r\n\t\t\tthis.categories[name] = value;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Clones the Data Item, including all related data.\r\n\t *\r\n\t * @return {this} New Data Item clone\r\n\t */\r\n\tpublic clone(cloneId?: string): this {\r\n\t\tlet dataItem: this = super.clone(cloneId);\r\n\t\tif (this.dataContext) {\r\n\t\t\tdataItem.dataContext = $utils.copy(this.dataContext, {});\r\n\t\t}\r\n\r\n\t\t$utils.copyProperties(this.locations, dataItem.locations);\r\n\t\t$utils.copyProperties(this.properties, dataItem.properties);\r\n\t\t$utils.copyProperties(this.categories, dataItem.categories);\r\n\t\t$utils.copyProperties(this.values, dataItem.values);\r\n\t\t$utils.copyProperties(this.dates, dataItem.dates);\r\n\r\n\t\t$object.each(this.values, (name, value) => {\r\n\t\t\t//for (let name in this.values) {\r\n\t\t\tdataItem.values[name] = $object.copy(value);\r\n\t\t});\r\n\r\n\t\tdataItem.events.copyFrom(this.events);\r\n\t\tdataItem.component = this.component;\r\n\r\n\t\treturn dataItem;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets opacity for all Data Item's related elements (Sprites).\r\n\t *\r\n\t * @param {number} value Opacity (0-1)\r\n\t */\r\n\tpublic set opacity(value: number) {\r\n\t\t$array.each(this.sprites, (sprite) => {\r\n\t\t\tsprite.opacity = value;\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Sets whether this data point should not be included in the scale and\r\n\t * minimum/maximum calculations.\r\n\t *\r\n\t * E.g. some we may want to exclude a particular data point from influencing\r\n\t * [[ValueAxis]] scale.\r\n\t *\r\n\t * @param {boolean}  value  Exclude from min/max calculations?\r\n\t */\r\n\tpublic set ignoreMinMax(value: boolean) {\r\n\t\tthis._ignoreMinMax = value;\r\n\r\n\t\tif (this.events.isEnabled(\"propertychanged\")) {\r\n\t\t\tconst event: AMEvent<this, IDataItemEvents>[\"propertychanged\"] = {\r\n\t\t\t\ttype: \"propertychanged\",\r\n\t\t\t\ttarget: this,\r\n\t\t\t\tproperty: \"ignoreMinMax\",\r\n\t\t\t\tvalue: value\r\n\t\t\t};\r\n\t\t\tthis.events.dispatchImmediately(\"propertychanged\", event);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Exclude from min/max calculations?\r\n\t * @return {boolean} Exclude from min/max calculations?\r\n\t */\r\n\tpublic get ignoreMinMax(): boolean {\r\n\t\treturn this._ignoreMinMax;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates and starts an [[Animation]] to interpolate (morph) Data Item's\r\n\t * properties and/or values.\r\n\t *\r\n\t * @see {@link Animation}\r\n\t * @param  {IAnimationOptions[] | IAnimationOptions}  animationOptions  Animation options\r\n\t * @param  {number}                                   duration          Animation duration (ms)\r\n\t * @param  {function}                                 easing            Easing function\r\n\t * @return {Animation}                                                  Animation\r\n\t */\r\n\tpublic animate(animationOptions: IAnimationOptions[] | IAnimationOptions, duration: number, easing?: (value: number) => number): Animation {\r\n\t\treturn new Animation(this, animationOptions, duration, easing).start();\r\n\t}\r\n\r\n\t/**\r\n\t * Handles intermediate steps when Data Item is interpolating (morphing) from\r\n\t * one value to another.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {AMEvent<Animation, IAnimationEvents>[\"animationstarted\" | \"animationended\" | \"animationprogress\"]} event Event object\r\n\t */\r\n\tpublic handleInterpolationProgress(event: AMEvent<Animation, IAnimationEvents>[\"animationstarted\" | \"animationended\" | \"animationprogress\"]) {\r\n\t\tlet animation: Animation = event.target;\r\n\t\t// it's always only one options, no need cycle\r\n\t\tlet animationOptions: IAnimationOptions = animation.animationOptions[0];\r\n\t\tif (animationOptions) {\r\n\t\t\tif (this.events.isEnabled(\"workingvaluechanged\")) {\r\n\t\t\t\tconst event: AMEvent<this, IDataItemEvents>[\"workingvaluechanged\"] = {\r\n\t\t\t\t\ttype: \"workingvaluechanged\",\r\n\t\t\t\t\ttarget: this,\r\n\t\t\t\t\tproperty: animationOptions.dummyData\r\n\t\t\t\t};\r\n\t\t\t\tthis.events.dispatchImmediately(\"workingvaluechanged\", event);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Checks whether Data Item has values set for all of the data fields,\r\n\t * supplied via argument.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {string[]}  fields  Field list to check\r\n\t * @return {boolean}           Has values for all fields?\r\n\t */\r\n\tpublic hasValue(fields: string[]): boolean {\r\n\t\t// todo: what about categories?\r\n\t\tfor (let i: number = 0; i < fields.length; i++) {\r\n\t\t\tif (!$type.hasValue(this.values[fields[i]].value)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\t/**\r\n\t * Depth of the Data Item.\r\n\t *\r\n\t * In nested data structures, like TreeMap, this indicates the level this\r\n\t * data point is at, in relation to the parent Data Item.\r\n\t *\r\n\t * @return {number} Depth\r\n\t */\r\n\tpublic get depth(): number {\r\n\t\tif (!this.parent) {\r\n\t\t\treturn 0;\r\n\r\n\t\t} else {\r\n\t\t\treturn this.parent.depth + 1;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Sets to a reference to an original object from Component's data.\r\n\t *\r\n\t * @return {Object} [description]\r\n\t */\r\n\tpublic get dataContext(): Object {\r\n\t\treturn this._dataContext;\r\n\t}\r\n\r\n\t/**\r\n\t * A reference to an original object in Component's data, that this Data Item\r\n\t * is derived from.\r\n\t *\r\n\t * @param {Object} value Original data object\r\n\t */\r\n\tpublic set dataContext(value: Object) {\r\n\t\tthis._dataContext = value;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * adds a sprite to dataItem.sprites array\r\n\t * @ignore\r\n\t */\r\n\taddSprite(sprite:Sprite){\r\n\t\tif(sprite.dataItem && sprite.dataItem != this){\r\n\t\t\t$array.remove(sprite.dataItem.sprites, sprite);\r\n\t\t}\r\n\t\tthis.sprites.push(sprite);\r\n\t\tsprite.dataItem = this;\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../src/.internal/core/DataItem.ts","/**\r\n * This module contains ColorSet object definition\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { BaseObject } from \"../Base\";\r\nimport { Color, color, iHSL } from \"./Color\";\r\nimport * as $colors from \"./Colors\";\r\nimport * as $type from \"./Type\";\r\nimport * as $utils from \"./Utils\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines an interface for objects identifying a color step.\r\n *\r\n * A \"color step\" object is used when [[ColorSet]] is generating colors, when\r\n * it has ran out of pre-set colors.\r\n *\r\n * It takes the last available color, then applies one or several of the\r\n * properties, like hue, or saturation with each subsequent generated color.\r\n */\r\nexport interface iColorSetStepOptions {\r\n\thue?: number;\r\n\tbrighten?: number;\r\n\tlighten?: number;\r\n\tlightness?: number;\r\n\tsaturation?: number;\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Represents a set of colors. Can also generate colors according to set rules.\r\n *\r\n * @important\r\n */\r\nexport class ColorSet extends BaseObject {\r\n\r\n\t/**\r\n\t * Holds the list of the colors in this set. (preset or auto-generated)\r\n\t *\r\n\t * @type {Color[]}\r\n\t */\r\n\tprotected _list: Color[] = [];\r\n\r\n\t/**\r\n\t * Current step in a color generator's cycle.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tprotected _currentStep: number = 0;\r\n\r\n\t/**\r\n\t * Current pass in the color generator's cycle. Normally a generator would\r\n\t * cycle through all available hue range, then repeat it, alternating other\r\n\t * color properties, to generate distinctive colors.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tprotected _currentPass: number = 0;\r\n\r\n\t/**\r\n\t * A base color. If there are no colors pre-set in the color list, ColorSet\r\n\t * will use this color as a base when generating new ones, applying\r\n\t * `stepOptions` and `passOptions` to this base color.\r\n\t *\r\n\t * @type {Color}\r\n\t */\r\n\tpublic baseColor: Color = new Color({\r\n\t\tr: 103,\r\n\t\tg: 183,\r\n\t\tb: 220\r\n\t});\r\n\r\n\t/**\r\n\t * Modifications to apply with each new generated color.\r\n\t *\r\n\t * @type {iColorSetStepOptions}\r\n\t */\r\n\tpublic stepOptions: iColorSetStepOptions = {};\r\n\r\n\t/**\r\n\t * Modifications to apply on top of `stepOptions` for each \"pass\" of the\r\n\t * color generation.\r\n\t *\r\n\t * A \"pass\" is when ColorSet generates `minColors` number of colors.\r\n\t *\r\n\t * @type {iColorSetStepOptions}\r\n\t */\r\n\tpublic passOptions: iColorSetStepOptions = {\r\n\t\tbrighten: -0.2\r\n\t};\r\n\r\n\t/**\r\n\t * An index increment to use when iterating through color list.\r\n\t *\r\n\t * Default is 1, which means returning each and every color.\r\n\t *\r\n\t * Setting it to a bigger number will make ColorSet `next()` iterator skip\r\n\t * some colors.\r\n\t *\r\n\t * E.g. setting to 2, will return every second color in the list.\r\n\t *\r\n\t * This is useful, when the color list has colors that are too close each\r\n\t * other for contrast.\r\n\t *\r\n\t * However, having bigger number will mean that `next()` iterator will go\r\n\t * through the list quicker, and the generator will kick sooner.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tpublic step: number = 1;\r\n\r\n\t/**\r\n\t * A number of colors to generate in one \"pass\".\r\n\t *\r\n\t * This setting can be automatically overridden, if ColorSet has a list of\r\n\t * pre-set colors. In such case ColorSet will generate exactly the same\r\n\t * number of colors with each pass as there were colors in original set.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tpublic minColors: number = 20;\r\n\r\n\t/**\r\n\t * Do not let the \"lightness\" of generated color to fall below this\r\n\t * threshold.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tpublic minLightness: number = 0.2;\r\n\r\n\t/**\r\n\t * Do not let the \"lightness\" of generated color to get above this threshold.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tpublic maxLightness: number = 0.9;\r\n\r\n\t/**\r\n\t * Randomly shuffle generated colors.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tpublic shuffle: boolean = false;\r\n\r\n\t/**\r\n\t * When colors are generated, based on `stepOptions`, each generated color\r\n\t * gets either lighter or darker.\r\n\t *\r\n\t * If this is set to `true`, color generator will switch to opposing spectrum\r\n\t * when reaching `minLightness` or `maxLightness`.\r\n\t *\r\n\t * E.g. if we start off with a red color, then gradually generate lighter\r\n\t * colors through rose shades, then switch back to dark red and gradually\r\n\t * increase the lightness of it until it reaches the starting red.\r\n\t *\r\n\t * If set to `false` it will stop there and cap lightness at whatever level\r\n\t * we hit `minLightness` or `maxLightness`, which may result in a number of\r\n\t * the same colors.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tpublic wrap: boolean = true;\r\n\r\n\t/**\r\n\t * Re-use same colors in the pre-set list, when ColorSet runs out of colors,\r\n\t * rather than start generating new ones.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tpublic reuse: boolean = false;\r\n\r\n\t/**\r\n\t * Saturation of colors. This will change saturation of all colors of color\r\n\t * set\r\n\t *\r\n\t * It is recommended to set this in theme, as changing it at run time won't\r\n\t * make the items to redraw and change color.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tpublic saturation: number = 1;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"ColorSet\";\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Sets a list of pre-defined colors to use for the iterator.\r\n\t *\r\n\t * @param {Color[]} value Color list\r\n\t */\r\n\tpublic set list(value: Color[]) {\r\n\t\tthis._list = value;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns current list of colors.\r\n\t *\r\n\t * If there are none, a new list of colors is generated, based on various\r\n\t * ColorSet settings.\r\n\t *\r\n\t * @return {Color[]} Color list\r\n\t */\r\n\tpublic get list(): Color[] {\r\n\t\tif (!this._list) {\r\n\t\t\tthis.generate(this.minColors);\r\n\t\t}\r\n\t\treturn this._list;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns next color in the list using internal iterator counter.\r\n\t *\r\n\t * If `step` is set to something other than 1, it may return other color than\r\n\t * exact next one in the list.\r\n\t *\r\n\t * @return {Color} Color\r\n\t */\r\n\tpublic next(): Color {\r\n\t\tif (this.list.length <= this._currentStep) {\r\n\t\t\tif (this.reuse && this._currentPass == 0 && this._list.length) {\r\n\t\t\t\tthis.minColors = this._list.length;\r\n\t\t\t}\r\n\t\t\tthis.generate(this.minColors);\r\n\t\t}\r\n\t\tlet color = this.list[this._currentStep];\r\n\t\tthis._currentStep += this.step;\r\n\t\treturn color.saturate(this.saturation);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a color at specific index in the list.\r\n\t *\r\n\t * @param  {number}  i  Index\r\n\t * @return {Color}      Color\r\n\t */\r\n\tpublic getIndex(i: number): Color {\r\n\t\tif (this.list.length <= i) {\r\n\t\t\tif (this.reuse && this._currentPass == 0 && this._list.length) {\r\n\t\t\t\tthis.minColors = this._list.length;\r\n\t\t\t}\r\n\t\t\tthis.generate(this.minColors);\r\n\t\t\treturn this.getIndex(i);\r\n\t\t}\r\n\t\treturn this.list[i].saturate(this.saturation);\r\n\t}\r\n\r\n\t/**\r\n\t * Resets internal iterator.\r\n\t *\r\n\t * Calling `next()` after this will return the very first color in the color\r\n\t * list, even if it was already returned before.\r\n\t */\r\n\tpublic reset(): void {\r\n\t\tthis._currentStep = 0;\r\n\t}\r\n\r\n\t/**\r\n\t * Generates colors based on the various ColorSet settings.\r\n\t *\r\n\t * @param {number} count Number of colors to generate\r\n\t */\r\n\tpublic generate(count: number): void {\r\n\r\n\t\t// Init\r\n\t\tlet curColor = this.currentColor;\r\n\t\tlet hsl = $colors.rgbToHsl(curColor.rgb);\r\n\t\tlet hueStep = $type.hasValue(this.stepOptions.hue) ? this.stepOptions.hue : 1 / count;\r\n\t\tlet mods: iColorSetStepOptions = {\r\n\t\t\tbrighten: 0,\r\n\t\t\tlighten: 0,\r\n\t\t\tlightness: hsl.l,\r\n\t\t\tsaturation: hsl.s\r\n\t\t};\r\n\r\n\t\t// Generate list of hues, and shuffle them\r\n\t\tlet hues: number[] = [];\r\n\t\tif (this.reuse) {\r\n\t\t\tfor (let i = 0; i < count; i++) {\r\n\t\t\t\thues.push($colors.rgbToHsl(this._list[i].rgb).h);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tfor (let i = 0; i < count; i++) {\r\n\t\t\t\tlet h = hsl.h + hueStep * i;\r\n\t\t\t\tif (this.wrap && (h > 1)) {\r\n\t\t\t\t\th -= 1;\r\n\t\t\t\t}\r\n\t\t\t\thues.push(h);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Shuffle colors randomly\r\n\t\tif (this.shuffle) {\r\n\t\t\thues.sort((a: number, b: number) => {\r\n\t\t\t\treturn Math.random() - 0.5;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\r\n\t\t// Generate colors by rotating hue\r\n\t\tfor (let i = 0; i < count; i++) {\r\n\r\n\t\t\t// Update hue\r\n\t\t\tif (this.reuse) {\r\n\t\t\t\thsl = $colors.rgbToHsl(this._list[i].rgb);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\thsl.h = <number>hues.shift();\r\n\t\t\t}\r\n\r\n\t\t\t// Apply HSL mods\r\n\t\t\tthis.applyStepOptions(hsl, mods, i, this._currentPass);\r\n\r\n\t\t\t// Convert back to Color\r\n\t\t\tlet c = color($colors.hslToRgb(hsl));\r\n\r\n\t\t\t// Apply regular color mods\r\n\t\t\tlet brighten = (this.stepOptions.brighten || 0) * i + (this.passOptions.brighten || 0) * this._currentPass;\r\n\t\t\tif (brighten != 0) {\r\n\t\t\t\tif (this.wrap) {\r\n\t\t\t\t\tbrighten = $utils.fitNumberRelative(brighten, this.minLightness, this.maxLightness);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tbrighten = $utils.fitNumber(brighten, this.minLightness, this.maxLightness);\r\n\t\t\t\t}\r\n\t\t\t\tc = c.brighten(brighten);\r\n\t\t\t}\r\n\r\n\t\t\tlet lighten = (this.stepOptions.lighten || 0) * i + (this.passOptions.lighten || 0) * this._currentPass;\r\n\t\t\tif (lighten != 0) {\r\n\t\t\t\tif (this.wrap) {\r\n\t\t\t\t\tlighten = $utils.fitNumberRelative(lighten, this.minLightness, this.maxLightness);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tlighten = $utils.fitNumber(lighten, this.minLightness, this.maxLightness);\r\n\t\t\t\t}\r\n\t\t\t\tc = c.lighten(lighten);\r\n\t\t\t}\r\n\t\t\tthis._list.push(c);\r\n\t\t}\r\n\r\n\t\tthis._currentPass++;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns current last color. It's either the last color in the list of\r\n\t * colors, or `baseColor` if list is empty.\r\n\t *\r\n\t * @return {Color} Color\r\n\t */\r\n\tprotected get currentColor(): Color {\r\n\t\tif (this._list.length == 0) {\r\n\t\t\treturn this.baseColor.saturate(this.saturation);\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn this._list[this._list.length - 1].saturate(this.saturation);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Generates modifiers for color, based on what step and pass.\r\n\t *\r\n\t * @param {iHSL}                  hsl   Curren HSL value of the color to modify\r\n\t * @param {iColorSetStepOptions}  base  The modifiers that were before modification to use as a base\r\n\t * @param {number}                step  Current step\r\n\t * @param {number}                pass  Current pass\r\n\t */\r\n\tprotected applyStepOptions(hsl: iHSL, base: iColorSetStepOptions, step: number, pass: number): void {\r\n\r\n\t\t// Process lightness\r\n\t\thsl.l = base.lightness + (this.stepOptions.lightness || 0) * step + (this.passOptions.lightness || 0) * pass;\r\n\r\n\t\tif (this.wrap) {\r\n\t\t\tif (hsl.l > 1) {\r\n\t\t\t\thsl.l = hsl.l - Math.floor(hsl.l);\r\n\t\t\t}\r\n\t\t\telse if (hsl.l < 0) {\r\n\t\t\t\thsl.l = -(hsl.l - Math.floor(hsl.l));\r\n\t\t\t}\r\n\t\t\thsl.l = $utils.fitNumberRelative(hsl.l, this.minLightness, this.maxLightness);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (hsl.l > 1) {\r\n\t\t\t\thsl.l = 1\r\n\t\t\t}\r\n\t\t\telse if (hsl.l < 0) {\r\n\t\t\t\thsl.l = 0;\r\n\t\t\t}\r\n\t\t\thsl.l = $utils.fitNumber(hsl.l, this.minLightness, this.maxLightness);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/utils/ColorSet.ts","/**\r\n * Value Axis module\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Axis, AxisDataItem, IAxisProperties, IAxisDataFields, IAxisAdapters, IAxisEvents } from \"./Axis\";\r\nimport { AxisRenderer } from \"./AxisRenderer\";\r\nimport { AxisRendererY } from \"./AxisRendererY\";\r\nimport { AxisTick } from \"./AxisTick\";\r\nimport { AxisLabel } from \"./AxisLabel\";\r\nimport { AxisFill } from \"./AxisFill\";\r\nimport { List } from \"../../core/utils/List\";\r\nimport { IPoint, IOrientationPoint } from \"../../core/defs/IPoint\";\r\nimport { SpriteEventDispatcher, AMEvent } from \"../../core/Sprite\";\r\nimport { Grid } from \"./Grid\";\r\nimport { IDisposer, MultiDisposer } from \"../../core/utils/Disposer\";\r\nimport { SerialChart } from \"../types/SerialChart\";\r\nimport { XYSeries, XYSeriesDataItem } from \"../series/XYSeries\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { ValueAxisBreak } from \"./ValueAxisBreak\";\r\nimport * as $math from \"../../core/utils/Math\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\nimport * as $object from \"../../core/utils/Object\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport * as $utils from \"../../core/utils/Utils\";\r\nimport { Animation } from \"../../core/utils/Animation\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines a [[DataItem]] for [[ValueAxis]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nexport class ValueAxisDataItem extends AxisDataItem {\r\n\t/**\r\n\t * Defines a type of [[Component]] this data item is used for.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ValueAxis}\r\n\t */\r\n\tpublic _component!: ValueAxis;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"ValueAxisDataItem\";\r\n\r\n\t\tthis.values.value = {};\r\n\t\tthis.values.endValue = {};\r\n\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * A data point's numeric value.\r\n\t *\r\n\t * @param {number}  value  Value\r\n\t */\r\n\tpublic set value(value: number) {\r\n\t\tthis.setValue(\"value\", value);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Value\r\n\t */\r\n\tpublic get value(): number {\r\n\t\treturn this.values[\"value\"].value;\r\n\t}\r\n\r\n\t/**\r\n\t * A data point's starting value.\r\n\t *\r\n\t * Used for items that span several dates, like [[ValueAxisBreak]].\r\n\t *\r\n\t * @param {number}  value  Value\r\n\t */\r\n\tpublic set startValue(value: number) {\r\n\t\tthis.setValue(\"value\", value);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Value\r\n\t */\r\n\tpublic get startValue(): number {\r\n\t\treturn this.values[\"value\"].value;\r\n\t}\r\n\r\n\t/**\r\n\t * Data point's numeric end value.\r\n\t *\r\n\t * @param {number}  value  End value\r\n\t */\r\n\tpublic set endValue(value: number) {\r\n\t\tthis.setValue(\"endValue\", value);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Value\r\n\t */\r\n\tpublic get endValue(): number {\r\n\t\treturn this.values[\"endValue\"].value;\r\n\t}\r\n\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n *\r\n */\r\nexport interface IMinMaxStep {\r\n\tmin: number;\r\n\tmax: number;\r\n\tstep: number;\r\n}\r\n\r\n/**\r\n * Defines data fields for [[ValueAxis]].\r\n */\r\nexport interface IValueAxisDataFields extends IAxisDataFields { }\r\n\r\n/**\r\n * Defines properties for [[ValueAxis]].\r\n */\r\nexport interface IValueAxisProperties extends IAxisProperties {\r\n\tstrictMinMax?: boolean;\r\n\tlogarithmic?: boolean;\r\n}\r\n\r\n/**\r\n * Defines events for [[ValueAxis]].\r\n */\r\nexport interface IValueAxisEvents extends IAxisEvents {\r\n\r\n\t/**\r\n\t * Invoked when selection/zoom on axis occurs and start/end coordinates\r\n\t * change.\r\n\t */\r\n\tselectionextremeschanged: {};\r\n\r\n\t/**\r\n\t * Invoked when start/end coordinates of the axis change.\r\n\t */\r\n\textremeschanged: {};\r\n\r\n}\r\n\r\n/**\r\n * Defines adapters for [[ValueAxis]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface IValueAxisAdapters extends IAxisAdapters, IValueAxisProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Used to create a value axis for the chart.\r\n *\r\n * ```TypeScript\r\n * // Create the axis\r\n * let valueAxis = chart.yAxes.push(new am4charts.ValueAxis());\r\n *\r\n * // Set settings\r\n * valueAxis.title.text = \"Monthly Sales\";\r\n * ```\r\n * ```JavaScript\r\n * // Create the axis\r\n * var valueAxis = chart.yAxes.push(new am4charts.ValueAxis());\r\n *\r\n * // Set settings\r\n * valueAxis.title.text = \"Monthly Sales\";\r\n * ```\r\n * ```JSON\r\n * \"yAxes\": [{\r\n *   \"type\": \"ValueAxis\",\r\n *   \"title\": {\r\n *     \"text\": \"Monthly Sales\"\r\n *   }\r\n * }]\r\n * ```\r\n *\r\n * @see {@link IValueAxisEvents} for a list of available Events\r\n * @see {@link IValueAxisAdapters} for a list of available Adapters\r\n * @important\r\n */\r\nexport class ValueAxis<T extends AxisRenderer = AxisRenderer> extends Axis<T> {\r\n\r\n\t/**\r\n\t * Defines data fields.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IValueAxisDataFields}\r\n\t */\r\n\tpublic _dataFields: IValueAxisDataFields;\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IValueAxisProperties}\r\n\t */\r\n\tpublic _properties!: IValueAxisProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IValueAxisAdapters}\r\n\t */\r\n\tpublic _adapter!: IValueAxisAdapters;\r\n\r\n\t/**\r\n\t * Defines the type of the Date Items.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ValueAxisDataItem}\r\n\t */\r\n\tpublic _dataItem: ValueAxisDataItem;\r\n\r\n\t/**\r\n\t * Defines the type of the axis breaks.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ValueAxisBreak}\r\n\t */\r\n\tpublic _axisBreak: ValueAxisBreak;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IValueAxisEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IValueAxisEvents;\r\n\r\n\t/**\r\n\t * A reference to chart the axis is for.\r\n\t *\r\n\t * @type {SerialChart}\r\n\t */\r\n\tpublic chart: SerialChart;\r\n\r\n\t/**\r\n\t * A list of Series that are using this Value Axis.\r\n\t *\r\n\t * @type {List<XYSeries>}\r\n\t */\r\n\tpublic series: List<XYSeries>;\r\n\r\n\t/**\r\n\t * Minimum value for the axis scale.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tprotected _min: number;\r\n\r\n\t/**\r\n\t * Maximum value for the axis scale.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tprotected _max: number;\r\n\r\n\t/**\r\n\t * User-defined min value for axis.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tprotected _minDefined: number;\r\n\r\n\t/**\r\n\t * User-defined max value for axis.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tprotected _maxDefined: number;\r\n\r\n\t/**\r\n\t * [_minAdjusted description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\tprotected _minAdjusted: number;\r\n\r\n\t/**\r\n\t * [_maxAdjusted description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\tprotected _maxAdjusted: number;\r\n\r\n\t/**\r\n\t * Min real value. (lowest value of all data points)\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tprotected _minReal: number;\r\n\r\n\t/**\r\n\t * Max real value. (highest value of all data points)\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tprotected _maxReal: number;\r\n\r\n\t/**\r\n\t * Min value within current zoom.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tprotected _minZoomed: number;\r\n\r\n\t/**\r\n\t * Max value within current zoom.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tprotected _maxZoomed: number\r\n\r\n\t/**\r\n\t * [_step description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\tprotected _step: number;\r\n\r\n\t/**\r\n\t * [_stepDecimalPlaces description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\tprotected _stepDecimalPlaces: number = 0;\r\n\r\n\t/**\r\n\t * [_difference description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\tprotected _difference: number;\r\n\r\n\t/**\r\n\t * Should axis scale explicitly start and `min` and `max`?\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tprotected _strictMinMax: boolean = false;\r\n\r\n\t/**\r\n\t * Base value for the axis.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tprotected _baseValue: number = 0;\r\n\r\n\t/**\r\n\t * [_previousValue description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\tprotected _previousValue: number;\r\n\r\n\t/**\r\n\t * [_previousPoint description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {IPoint}\r\n\t */\r\n\tprotected _previousPoint: IPoint;\r\n\r\n\t/**\r\n\t * Adjusted start in case we have breaks.\r\n\t *\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\tprotected _adjustedStart: number = 0;\r\n\r\n\t/**\r\n\t * Adjusted end in case we have breaks.\r\n\t *\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\tprotected _adjustedEnd: number = 1;\r\n\r\n\t/**\r\n\t * @todo Description\r\n\t */\r\n\tprotected _valueToPosition: { [key: string]: number } = {};\r\n\r\n\t/**\r\n\t * @todo Description\r\n\t */\r\n\tprotected _positionToValue: { [key: string]: number } = {};\r\n\r\n\tprotected _finalMin: number;\r\n\tprotected _finalMax: number;\r\n\r\n\t/**\r\n\t * A function which applies fills to alternating cells.\r\n\t *\r\n\t * @todo Description\r\n\t * @type {function}\r\n\t */\r\n\tpublic fillRule: (dataItem: ValueAxisDataItem) => any = function(dataItem: ValueAxisDataItem) {\r\n\t\tlet value = dataItem.value;\r\n\t\tlet axis = dataItem.component;\r\n\t\tif (value / axis.step / 2 == Math.round(value / axis.step / 2)) {\r\n\t\t\tdataItem.axisFill.__disabled = true;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tdataItem.axisFill.__disabled = false;\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * As calculating totals is expensive operation and not often needed, by default we do not do it. In case you use totalPercent or total for your charts, you must set this to true\r\n\t * @todo review description\r\n\t * @type {boolean}\r\n\t */\r\n\tpublic calculateTotals: boolean = false;\r\n\r\n\r\n\tprotected _minMaxAnimation: Animation;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\r\n\t\t// Init\r\n\t\tsuper();\r\n\t\tthis.className = \"ValueAxis\";\r\n\r\n\t\t// Set field name\r\n\t\tthis.axisFieldName = \"value\";\r\n\r\n\t\t// Set defaults\r\n\t\tthis.maxZoomFactor = 1000;\r\n\r\n\t\t// Apply theme\r\n\t\tthis.applyTheme();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a new/empty [[DataItem]] of the type appropriate for this object.\r\n\t *\r\n\t * @see {@link DataItem}\r\n\t * @return {ValueAxisDataItem} Data Item\r\n\t */\r\n\tprotected createDataItem(): this[\"_dataItem\"] {\r\n\t\treturn new ValueAxisDataItem();\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a new/empty [[AxisBreak]] of the appropriate type.\r\n\t *\r\n\t * @return {ValueAxisBreak} Axis break\r\n\t */\r\n\tprotected createAxisBreak(): this[\"_axisBreak\"] {\r\n\t\treturn new ValueAxisBreak();\r\n\t}\r\n\r\n\t/**\r\n\t * Validates Axis' data items.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic validateDataItems(): void {\r\n\r\n\t\tthis._positionToValue = {};\r\n\r\n\t\tsuper.validateDataItems();\r\n\r\n\t\tthis.fixAxisBreaks();\r\n\r\n\t\tthis.getMinMax();\r\n\r\n\t\t// note, not zoomMin and zoomMax, but actual position\r\n\t\tlet minZoomed: number = this.positionToValue(this.start);\r\n\t\tlet maxZoomed: number = this.positionToValue(this.end);\r\n\r\n\t\tif (this.interpolationDuration > 0) {\r\n\t\t\tif ($type.isNumber(minZoomed) && $type.isNumber(maxZoomed)) {\r\n\t\t\t\tthis.zoomToValues(minZoomed, maxZoomed, true, true);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Processes data items of the related Series.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic processSeriesDataItems(): void {\r\n\t\t// @todo: add some boolean (maybe autodedect) if we need these calculations or not. this place uses a lot of cpu\r\n\t\tif (this.calculateTotals) {\r\n\t\t\tlet series: XYSeries = this.series.getIndex(0);\r\n\t\t\tlet startIndex: number = series.startIndex;\r\n\r\n\t\t\tif (series.dataItems.length > 0) {\r\n\r\n\t\t\t\tif (startIndex > 0) {\r\n\t\t\t\t\tstartIndex--;\r\n\t\t\t\t}\r\n\t\t\t\tlet endIndex: number = series.endIndex;\r\n\t\t\t\tif (endIndex < series.dataItems.length) {\r\n\t\t\t\t\tendIndex++;\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\t// This has to be `var` in order to avoid garbage collection\r\n\t\t\t\tfor (var i: number = startIndex; i < endIndex; ++i) {\r\n\t\t\t\t\t// This has to be `var` in order to avoid garbage collection\r\n\t\t\t\t\tvar total: { [index: string]: number } = {};\r\n\r\n\t\t\t\t\t$iter.each(this.series.iterator(), (series) => {\r\n\t\t\t\t\t\tlet dataItem: XYSeriesDataItem = series.dataItems.getIndex(i);\r\n\t\t\t\t\t\tif (dataItem) {\r\n\t\t\t\t\t\t\t$object.each(dataItem.values, (key) => {\r\n\t\t\t\t\t\t\t\tlet value: number = dataItem.values[key].workingValue; // can not use getWorkingValue here!\r\n\r\n\t\t\t\t\t\t\t\tif ($type.isNumber(value)) {\r\n\t\t\t\t\t\t\t\t\tif (!$type.isNumber(total[key])) {\r\n\t\t\t\t\t\t\t\t\t\ttotal[key] = value;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\t\ttotal[key] += value;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t$iter.each(this.series.iterator(), (series) => {\r\n\t\t\t\t\t\tlet dataItem: XYSeriesDataItem = series.dataItems.getIndex(i);\r\n\t\t\t\t\t\tif (dataItem) {\r\n\t\t\t\t\t\t\t$object.each(dataItem.values, (key) => {\r\n\t\t\t\t\t\t\t\tlet value: number = dataItem.values[key].workingValue; // can not use getWorkingValue here!\r\n\t\t\t\t\t\t\t\tif ($type.isNumber(value)) {\r\n\t\t\t\t\t\t\t\t\tdataItem.setCalculatedValue(key, total[key], \"total\");\r\n\t\t\t\t\t\t\t\t\tdataItem.setCalculatedValue(key, 100 * value / total[key], \"totalPercent\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Validates the data range.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description (review)\r\n\t */\r\n\tpublic validateDataRange(): void {\r\n\t\tsuper.validateDataRange();\r\n\r\n\t\t// not using default caching for a better performance\r\n\t\tthis._valueToPosition = {};\r\n\t\tthis._positionToValue = {};\r\n\r\n\t\t// it's important to fix axis breaks in the beginning, as positionToValue and adjustDifference depends on breaks values\r\n\t\tthis.fixAxisBreaks();\r\n\r\n\t\t// calculate zoom values\r\n\t\tthis.calculateZoom();\r\n\t}\r\n\r\n\t/**\r\n\t * Validates the whole axis. Causes it to redraw.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description (review)\r\n\t */\r\n\tpublic validate(): void {\r\n\r\n\t\t// this is moved to a separate method because it differs in DateAxis\r\n\t\tthis.validateAxisElements();\r\n\r\n\t\tsuper.validate();\r\n\r\n\t\tthis.hideUnusedDataItems();\r\n\r\n\t\t// hide too close\r\n\t\t//this.hideTooCloseDataItems();\r\n\t}\r\n\r\n\t/**\r\n\t * Calculates all positions, related to axis as per current zoom.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic calculateZoom(): void {\r\n\t\tif ($type.isNumber(this.min) && $type.isNumber(this.max)) {\r\n\t\t\tlet min: number = this.positionToValue(this.start);\r\n\t\t\tlet max: number = this.positionToValue(this.end);\r\n\r\n\r\n\t\t\tlet differece: number = this.adjustDifference(min, max);\r\n\t\t\tlet minMaxStep: IMinMaxStep = this.adjustMinMax(min, max, differece, this._gridCount, true);\r\n\r\n\t\t\tmin = minMaxStep.min;\r\n\t\t\tmax = minMaxStep.max;\r\n\r\n\t\t\tthis._adjustedStart = $math.round((min - this.min) / (this.max - this.min), 5);\r\n\t\t\tthis._adjustedEnd = $math.round((max - this.min) / (this.max - this.min), 5);\r\n\r\n\t\t\tthis._step = minMaxStep.step;\r\n\t\t\tthis._stepDecimalPlaces = $utils.decimalPlaces(this._step);\r\n\r\n\t\t\tif (this._minZoomed != min || this._maxZoomed != max) {\r\n\t\t\t\tthis._minZoomed = min;\r\n\t\t\t\tthis._maxZoomed = max;\r\n\t\t\t\tthis.dispatchImmediately(\"selectionextremeschanged\");\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis._adjustedStart = this.start;\r\n\t\t\tthis._adjustedEnd = this.end;\r\n\t\t}\r\n\t}\r\n\t/*\r\n\t\tfixAxisBreaks() {\r\n\t\t\tlet axisBreaks: List<ValueAxisBreak> = <List<ValueAxisBreak>>this.axisBreaks;\r\n\t\t\tif (axisBreaks.length > 0) {\r\n\r\n\t\t\t\t// first make sure that startValue is <= end value\r\n\t\t\t\tfor (let i: number = 0; i < axisBreaks.length; i++) {\r\n\t\t\t\t\tlet axisBreak: ValueAxisBreak = axisBreaks.get(i);\r\n\t\t\t\t\tlet startValue: number = $math.min(axisBreak.startValue, axisBreak.endValue);\r\n\t\t\t\t\tlet endValue: number = $math.max(axisBreak.startValue, axisBreak.endValue);\r\n\r\n\t\t\t\t\taxisBreak.adjustedStartValue = startValue;\r\n\t\t\t\t\taxisBreak.adjustedEndValue = endValue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// sort by adjustedStartValue\r\n\t\t\t\tthis.axisBreaks.sortByKey(\"adjustedStartValue\");\r\n\r\n\t\t\t\tlet firstAxisBreak: ValueAxisBreak = axisBreaks.get(0);\r\n\t\t\t\tlet previousEndValue: number = Math.min(firstAxisBreak.startValue, firstAxisBreak.endValue);\r\n\r\n\t\t\t\t// process breaks\r\n\t\t\t\tfor (let i: number = 0; i < this.axisBreaks.length; i++) {\r\n\t\t\t\t\tlet axisBreak: ValueAxisBreak = axisBreaks.get(i);\r\n\r\n\t\t\t\t\tlet startValue: number = axisBreak.adjustedStartValue;\r\n\t\t\t\t\tlet endValue: number = axisBreak.adjustedEndValue;\r\n\r\n\t\t\t\t\t// breaks can't overlap\r\n\t\t\t\t\t// if break starts before previous break ends\r\n\t\t\t\t\tif (startValue < previousEndValue) {\r\n\t\t\t\t\t\tstartValue = previousEndValue;\r\n\r\n\t\t\t\t\t\tif (endValue < previousEndValue) {\r\n\t\t\t\t\t\t\tendValue = previousEndValue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\taxisBreak.adjustedStartValue = startValue;\r\n\t\t\t\t\taxisBreak.adjustedEndValue = endValue;\r\n\r\n\t\t\t\t\t// break difference\r\n\t\t\t\t\tlet axisBreakDif: number = endValue - startValue;\r\n\t\t\t\t\tlet axisBreakGridCount: number = Math.ceil(axisBreakDif / this._step * axisBreak.breakSize);\r\n\r\n\t\t\t\t\t// calculate min, max and step for axis break\r\n\t\t\t\t\tlet breakMinMaxStep = this.adjustMinMax(startValue, endValue, axisBreakDif, axisBreakGridCount);\r\n\t\t\t\t\taxisBreak.adjustedStep = breakMinMaxStep.step;\r\n\t\t\t\t\taxisBreak.adjustedMin = breakMinMaxStep.min;\r\n\t\t\t\t\taxisBreak.adjustedMax = breakMinMaxStep.max;\r\n\t\t\t\t\tpreviousEndValue = endValue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._difference = this.adjustDifference(this.min, this.max);\r\n\t\t}\r\n\t*/\r\n\r\n\t/**\r\n\t * Validates Axis elements.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t */\r\n\tpublic validateAxisElements(): void {\r\n\t\tif ($type.isNumber(this.max) && $type.isNumber(this.min)) {\r\n\t\t\t// first regular items\r\n\t\t\tlet value: number = this.minZoomed - this._step * 2;\r\n\r\n\t\t\tif (!this.logarithmic) {\r\n\t\t\t\tvalue = Math.floor(value / this._step) * this._step;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tlet differencePower = Math.log(this.max) * Math.LOG10E - Math.log(this.min) * Math.LOG10E;\r\n\t\t\t\tif (differencePower > 1) {\r\n\t\t\t\t\tvalue = Math.pow(10, Math.log(this.min) * Math.LOG10E);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tvalue = Math.floor(this.minZoomed / this._step) * this._step;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tlet maxZoomed = this._maxZoomed + this._step;\r\n\r\n\t\t\tthis.resetIterators();\r\n\r\n\t\t\tlet dataItemsIterator = this._dataItemsIterator;\r\n\r\n\t\t\tlet i: number = 0;\r\n\t\t\twhile (value <= maxZoomed) {\r\n\t\t\t\tlet axisBreak: ValueAxisBreak = <ValueAxisBreak>this.isInBreak(value);\r\n\r\n\t\t\t\tif (!axisBreak) {\r\n\r\n\t\t\t\t\tlet dataItem: this[\"_dataItem\"] = dataItemsIterator.find((x) => x.value === value);\r\n\t\t\t\t\t//this.processDataItem(dataItem);\r\n\t\t\t\t\tthis.appendDataItem(dataItem);\r\n\t\t\t\t\tdataItem.axisBreak = undefined;\r\n\t\t\t\t\tif (dataItem.value != value) {\r\n\t\t\t\t\t\tdataItem.value = value;\r\n\r\n\t\t\t\t\t\tdataItem.text = this.formatLabel(value);\r\n\t\t\t\t\t\tif (dataItem.label.invalid) {\r\n\t\t\t\t\t\t\tdataItem.label.validate();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.validateDataElement(dataItem);\r\n\t\t\t\t\ti++;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!this.logarithmic) {\r\n\t\t\t\t\tvalue += this._step;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tlet differencePower = Math.log(this.max) * Math.LOG10E - Math.log(this.min) * Math.LOG10E;\r\n\t\t\t\t\tif (differencePower > 1) {\r\n\t\t\t\t\t\tvalue = Math.pow(10, Math.log(this.min) * Math.LOG10E + i);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tvalue += this._step;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tlet axisBreaks = this.axisBreaks;\r\n\r\n\t\t\t// breaks later\r\n\t\t\tlet renderer: AxisRenderer = this.renderer;\r\n\r\n\t\t\t$iter.each(axisBreaks.iterator(), (axisBreak) => {\r\n\t\t\t\tif (axisBreak.breakSize > 0) {\r\n\t\t\t\t\t// only add grid if gap is bigger then minGridDistance\r\n\t\t\t\t\tif ($math.getDistance(axisBreak.startPoint, axisBreak.endPoint) > renderer.minGridDistance) {\r\n\t\t\t\t\t\tlet breakValue: number = axisBreak.adjustedMin;\r\n\r\n\t\t\t\t\t\twhile (breakValue <= axisBreak.adjustedMax) {\r\n\t\t\t\t\t\t\tif (breakValue >= axisBreak.adjustedStartValue && breakValue <= axisBreak.adjustedEndValue) {\r\n\t\t\t\t\t\t\t\tlet dataItem: this[\"_dataItem\"] = dataItemsIterator.find((x) => x.value === breakValue);\r\n\t\t\t\t\t\t\t\t//this.processDataItem(dataItem);\r\n\t\t\t\t\t\t\t\tthis.appendDataItem(dataItem);\r\n\t\t\t\t\t\t\t\tdataItem.axisBreak = axisBreak;\r\n\t\t\t\t\t\t\t\tif (dataItem.value != breakValue) {\r\n\t\t\t\t\t\t\t\t\tdataItem.value = breakValue;\r\n\t\t\t\t\t\t\t\t\tdataItem.text = this.formatLabel(breakValue);\r\n\t\t\t\t\t\t\t\t\tif (dataItem.label.invalid) {\r\n\t\t\t\t\t\t\t\t\t\tdataItem.label.validate();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthis.validateDataElement(dataItem);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreakValue += axisBreak.adjustedStep;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Validates axis data item.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @param {ValueAxisDataItem}  dataItem  Data item\r\n\t */\r\n\tpublic validateDataElement(dataItem: this[\"_dataItem\"]): void {\r\n\t\tsuper.validateDataElement(dataItem);\r\n\r\n\t\tdataItem.__disabled = false;\r\n\r\n\t\tlet renderer: AxisRenderer = this.renderer;\r\n\t\tlet value: number = dataItem.value;\r\n\t\tlet endValue: number = dataItem.endValue;\r\n\r\n\t\tlet position: number = this.valueToPosition(value);\r\n\t\tdataItem.position = position;\r\n\r\n\t\tlet endPosition: number = position;\r\n\t\tlet fillEndPosition: number = this.valueToPosition(value + this._step);\r\n\r\n\t\tif ($type.isNumber(endValue)) {\r\n\t\t\tendPosition = this.valueToPosition(endValue);\r\n\t\t\tfillEndPosition = endPosition;\r\n\t\t}\r\n\r\n\t\t// this point is needed to calculate distance to satisfy minGridDistance\r\n\t\tdataItem.point = renderer.positionToPoint(position);\r\n\r\n\t\tlet tick: AxisTick = dataItem.tick;\r\n\t\tif (tick) {\r\n\t\t\trenderer.updateTickElement(tick, position, endPosition);\r\n\t\t}\r\n\r\n\t\tlet grid: Grid = dataItem.grid;\r\n\t\tif (grid) {\r\n\t\t\trenderer.updateGridElement(grid, position, endPosition);\r\n\t\t}\r\n\r\n\t\tlet label: AxisLabel = dataItem.label;\r\n\t\tif (label) {\r\n\t\t\trenderer.updateLabelElement(label, position, endPosition);\r\n\t\t}\r\n\r\n\t\tlet fill: AxisFill = dataItem.axisFill;\r\n\t\tif (fill) {\r\n\t\t\trenderer.updateFillElement(fill, position, fillEndPosition);\r\n\t\t\tif (!dataItem.isRange) {\r\n\t\t\t\tthis.fillRule(dataItem);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet mask: AxisFill = dataItem.mask;\r\n\t\tif (mask) {\r\n\t\t\trenderer.updateFillElement(mask, position, fillEndPosition);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Formats the value according to axis' own [[NumberFormatter]].\r\n\t *\r\n\t * @param  {number}  value  Source value\r\n\t * @return {string}         Formatted value\r\n\t */\r\n\tpublic formatLabel(value: number): string {\r\n\t\treturn this.numberFormatter.format(value);\r\n\t}\r\n\r\n\t/**\r\n\t * A coordinate of the axis' base value.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {IPoint} Base point\r\n\t */\r\n\tpublic get basePoint(): IPoint {\r\n\t\tlet baseValue: number = this._baseValue;\r\n\t\tlet position: number = this.valueToPosition(baseValue);\r\n\t\tlet basePoint: IPoint = this.renderer.positionToPoint(position);\r\n\t\treturn basePoint;\r\n\t}\r\n\r\n\t/**\r\n\t * A base value.\r\n\t *\r\n\t * This is a threshold value that will divide \"positive\" and \"negative\"\r\n\t * value ranges.\r\n\t *\r\n\t * Other scale-related functionality also depend on base value. E.g. stacks,\r\n\t * value-dependent coloring, etc.\r\n\t *\r\n\t * @param {number} value Base value\r\n\t */\r\n\tpublic set baseValue(value: number) {\r\n\t\tthis._baseValue = value;\r\n\t\tthis.invalidateLayout();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} base value\r\n\t */\r\n\tpublic get baseValue(): number {\r\n\t\treturn this._baseValue;\r\n\t}\r\n\r\n\t/**\r\n\t * Converts a numeric value to relative position on axis\r\n\t *\r\n\t * An alias to `valueToPosition()`.\r\n\t *\r\n\t * @param  {number}  value  Value\r\n\t * @return {number}         Position\r\n\t */\r\n\tpublic anyToPosition(value: number): number {\r\n\t\treturn this.valueToPosition(value);\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Converts a numeric value to orientation point (x, y, angle) on axis\r\n\t *\r\n\t * @param  {number}  value  Value\r\n\t * @return {IOrientationPoint}  Orientation point\r\n\t */\r\n\tpublic valueToPoint(value: number): IOrientationPoint {\r\n\t\tlet position = this.valueToPosition(value);\r\n\t\tlet point = this.renderer.positionToPoint(position);\r\n\t\tlet angle = this.renderer.positionToAngle(position);\r\n\t\treturn { x: point.x, y: point.y, angle: angle };\r\n\t}\r\n\r\n\t/**\r\n\t * Converts a numeric value to orientation (x, y, angle) point on axis\r\n\t *\r\n\t * @param  {number}  value  Value\r\n\t * @return {IOrientationPoint}  Orientation point\r\n\t */\r\n\tpublic anyToPoint(value: number): IOrientationPoint {\r\n\t\treturn this.valueToPoint(value);\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Converts a numeric value to relative position on axis.\r\n\t *\r\n\t * @param  {number}  value  Value\r\n\t * @return {number}  relative position\r\n\t */\r\n\tpublic valueToPosition(value: number): number {\r\n\t\tif ($type.isNumber(value)) {\r\n\t\t\tlet strValue: string = value.toString();\r\n\t\t\t//let cachedPosition: number = this._valueToPosition[strValue];\r\n\r\n\t\t\t//if ($type.isNumber(cachedPosition)) {\r\n\t\t\t//\t\t\t\treturn cachedPosition;\r\n\t\t\t//\t\t\t}\r\n\t\t\t//\t\t\telse {\r\n\t\t\t// todo: think if possible to take previous value and do not go through all previous breaks\r\n\t\t\tlet min: number = this.min;\r\n\t\t\tlet max: number = this.max;\r\n\t\t\tif ($type.isNumber(min) && $type.isNumber(max)) {\r\n\t\t\t\tlet difference: number = this._difference;\r\n\t\t\t\tif (!$type.isNumber(difference)) {\r\n\t\t\t\t\tdifference = this.adjustDifference(min, max);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet axisBreaks = this.axisBreaks;\r\n\r\n\t\t\t\t$iter.eachContinue(axisBreaks.iterator(), (axisBreak) => {\r\n\t\t\t\t\tlet startValue: number = axisBreak.adjustedStartValue;\r\n\t\t\t\t\tlet endValue: number = axisBreak.adjustedEndValue;\r\n\r\n\t\t\t\t\tif ($type.isNumber(startValue) && $type.isNumber(endValue)) {\r\n\r\n\t\t\t\t\t\tif (value < startValue) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ($math.intersect({ start: startValue, end: endValue }, { start: min, end: max })) { // todo: check this once and set some flag in axisBreak\r\n\t\t\t\t\t\t\tstartValue = Math.max(startValue, min);\r\n\t\t\t\t\t\t\tendValue = Math.min(endValue, max);\r\n\r\n\t\t\t\t\t\t\tlet breakSize: number = axisBreak.breakSize;\r\n\r\n\t\t\t\t\t\t\t// value to the right of break end\r\n\t\t\t\t\t\t\tif (value > endValue) {\r\n\t\t\t\t\t\t\t\tmin += (endValue - startValue) * (1 - breakSize); // todo: maybe this can be done differently?\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// value to the left of break start\r\n\t\t\t\t\t\t\telse if (value < startValue) {\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// value within break\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tvalue = startValue + (value - startValue) * breakSize;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t});\r\n\r\n\t\t\t\tlet position;\r\n\r\n\t\t\t\tif (!this.logarithmic) {\r\n\t\t\t\t\tposition = (value - min) / difference;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tposition = (Math.log(value) * Math.LOG10E - Math.log(this.min) * Math.LOG10E) / ((Math.log(this.max) * Math.LOG10E - Math.log(this.min) * Math.LOG10E));\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tposition = $math.round(position, 5);\r\n\r\n\t\t\t\t//this._valueToPosition[strValue] = position;\r\n\t\t\t\treturn position;\r\n\t\t\t}\r\n\t\t\t//}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Converts an relative position to a corresponding value within\r\n\t * axis' scale.\r\n\t *\r\n\t * @param  {number}  position  Position (px)\r\n\t * @return {number}            Value\r\n\t */\r\n\tpublic positionToValue(position: number): number {\r\n\t\tposition = $math.round(position, 10);\r\n\t\tlet strPosition: string = position.toString();\r\n\t\t//let cachedValue: number = this._positionToValue[strPosition];\r\n\r\n\t\t//if ($type.isNumber(cachedValue)) {\r\n\t\t//\t\t\treturn cachedValue;\r\n\t\t//\t\t}\r\n\t\t//\t\telse {\r\n\r\n\t\tlet min: number = this.min;\r\n\t\tlet max: number = this.max;\r\n\r\n\t\tif ($type.isNumber(min) && $type.isNumber(max)) {\r\n\r\n\t\t\tlet difference: number = max - min; //no need to adjust!\r\n\r\n\t\t\tlet axisBreaks = this.axisBreaks;\r\n\r\n\t\t\tlet value: number = null;\r\n\r\n\t\t\t// in case we have some axis breaks\r\n\t\t\t$iter.eachContinue(axisBreaks.iterator(), (axisBreak) => {\r\n\t\t\t\tlet breakStartPosition: number = axisBreak.startPosition;\r\n\t\t\t\tlet breakEndPosition: number = axisBreak.endPosition;\r\n\r\n\t\t\t\tlet breakStartValue: number = axisBreak.adjustedStartValue;\r\n\t\t\t\tlet breakEndValue: number = axisBreak.adjustedEndValue;\r\n\r\n\t\t\t\tif ($type.isNumber(breakStartValue) && $type.isNumber(breakEndValue)) {\r\n\r\n\t\t\t\t\tif (breakStartValue > max) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ($math.intersect({ start: breakStartValue, end: breakEndValue }, { start: min, end: max })) {\r\n\r\n\t\t\t\t\t\tbreakStartValue = $math.max(breakStartValue, min);\r\n\t\t\t\t\t\tbreakEndValue = $math.min(breakEndValue, max);\r\n\r\n\t\t\t\t\t\tlet breakSize: number = axisBreak.breakSize;\r\n\r\n\t\t\t\t\t\tdifference -= (breakEndValue - breakStartValue) * (1 - breakSize);\r\n\r\n\t\t\t\t\t\t// position to the right of break end\r\n\t\t\t\t\t\tif (position > breakEndPosition) {\r\n\t\t\t\t\t\t\tmin += (breakEndValue - breakStartValue) * (1 - breakSize);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// position to the left of break start\r\n\t\t\t\t\t\telse if (position < breakStartPosition) {\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// value within break\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tlet breakPosition: number = (position - breakStartPosition) / (breakEndPosition - breakStartPosition);\r\n\t\t\t\t\t\t\tvalue = breakStartValue + breakPosition * (breakEndValue - breakStartValue);\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (!$type.isNumber(value)) {\r\n\t\t\t\tvalue = position * difference + min;\r\n\t\t\t}\r\n\r\n\t\t\t//this._positionToValue[strPosition] = value;\r\n\r\n\t\t\treturn value;\r\n\t\t}\r\n\t\t//}\r\n\t}\r\n\r\n\t/**\r\n\t * Converts an X coordinate to a relative value in axis' scale.\r\n\t *\r\n\t * @param  {number}  x  X (px)\r\n\t * @return {number}     Value\r\n\t */\r\n\tpublic xToValue(x: number): number {\r\n\t\treturn this.positionToValue(this.pointToPosition({ x: x, y: 0 }));\r\n\t}\r\n\r\n\t/**\r\n\t * Converts an Y coordinate to a relative value in axis' scale.\r\n\t *\r\n\t * @param  {number}  y  Y (px)\r\n\t * @return {number}     Value\r\n\t */\r\n\tpublic yToValue(y: number): number {\r\n\t\treturn this.positionToValue(this.pointToPosition({ x: 0, y: y }));\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Converts pixel coordinates to a relative position. (0-1)\r\n\t *\r\n\t * @param {IPoint}   point  Coorinates (px)\r\n\t * @return {number}         Position (0-1)\r\n\t */\r\n\tpublic pointToPosition(point: IPoint): number {\r\n\t\tif (this.renderer instanceof AxisRendererY) {\r\n\t\t\treturn 1 - this.renderer.pointToPosition(point);\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn this.renderer.pointToPosition(point);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Calculates smallest and biggest value for the axis scale.\r\n\t *\r\n\t * @todo Description (review)\r\n\t */\r\n\tprotected getMinMax() {\r\n\t\tlet min: number = Number.POSITIVE_INFINITY;\r\n\t\tlet max: number = Number.NEGATIVE_INFINITY;\r\n\r\n\t\t// only if min and max are not set from outside, we go through min and max influencers\r\n\t\tif (!$type.isNumber(this._minDefined) || !$type.isNumber(this._maxDefined)) {\r\n\t\t\t$iter.each(this.series.iterator(), (series) => {\r\n\t\t\t\tif (!series.ignoreMinMax) {\r\n\t\t\t\t\t// check min\r\n\t\t\t\t\tlet seriesMin: number = series.min(this);\r\n\t\t\t\t\tif ($type.isNumber(seriesMin) && (seriesMin < min)) {\r\n\t\t\t\t\t\tmin = seriesMin;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// check max\r\n\t\t\t\t\tlet seriesMax: number = series.max(this);\r\n\r\n\t\t\t\t\tif ($type.isNumber(seriesMax) && (seriesMax > max)) {\r\n\t\t\t\t\t\tmax = seriesMax;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif(min == 0 && max == 0){\r\n\t\t\tmax = 0.9;\r\n\t\t\tmin = -0.9;\r\n\t\t}\r\n\r\n\t\t// if defined from outside\r\n\t\tif ($type.isNumber(this._minDefined)) {\r\n\t\t\tmin = this._minDefined;\r\n\t\t}\r\n\r\n\t\tif ($type.isNumber(this._maxDefined)) {\r\n\t\t\tmax = this._maxDefined;\r\n\t\t}\r\n\r\n\t\tif (!$type.isNumber(min) || !$type.isNumber(max)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._minReal = min;\r\n\t\tthis._maxReal = max;\r\n\r\n\t\tif (min == Number.POSITIVE_INFINITY) {\r\n\t\t\tmin = undefined;\r\n\t\t}\r\n\t\tif (max == Number.NEGATIVE_INFINITY) {\r\n\t\t\tmax = undefined;\r\n\t\t}\r\n\r\n\t\tlet dif: number = this.adjustDifference(min, max); // previously it was max-min, but not worked well\r\n\r\n\t\tmin = this.fixMin(min);\r\n\t\tmax = this.fixMax(max);\r\n\r\n\t\tlet minMaxStep: IMinMaxStep = this.adjustMinMax(min, max, dif, this._gridCount);\r\n\r\n\t\tmin = minMaxStep.min;\r\n\t\tmax = minMaxStep.max;\r\n\r\n\t\t// do it for the second time (importat!)\r\n\t\tminMaxStep = this.adjustMinMax(min, max, max - min, this._gridCount, true);\r\n\r\n\t\tmin = minMaxStep.min;\r\n\t\tmax = minMaxStep.max;\r\n\r\n\t\t// return min max if strict\r\n\t\tif (this.strictMinMax) {\r\n\t\t\tif ($type.isNumber(this._minDefined)) {\r\n\t\t\t\tmin = this._minDefined;\r\n\t\t\t}\r\n\r\n\t\t\tif ($type.isNumber(this._maxDefined)) {\r\n\t\t\t\tmax = this._maxDefined;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// checking isNumber is good when all series are hidden\r\n\t\tif ((this._minAdjusted != min || this._maxAdjusted != max) && $type.isNumber(min) && $type.isNumber(max)) {\r\n\r\n\t\t\tif ($type.isNumber(this._minAdjusted) && $type.isNumber(this._maxAdjusted) && this.inited) {\r\n\t\t\t\tlet animation = this._minMaxAnimation;\r\n\r\n\t\t\t\tif (!animation || this._finalMin != min || this._finalMax != max) {\r\n\r\n\t\t\t\t\tthis._finalMin = min;\r\n\t\t\t\t\tthis._finalMax = max;\r\n\r\n\t\t\t\t\tanimation = this.animate([{ property: \"_minAdjusted\", from: this._minAdjusted, to: min }, { property: \"_maxAdjusted\", from: this._maxAdjusted, to: max }], this.rangeChangeDuration);\r\n\r\n\t\t\t\t\tanimation.events.on(\"animationprogress\", () => {\r\n\t\t\t\t\t\tthis.validateDataItems();\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tanimation.events.on(\"animationended\", () => {\r\n\t\t\t\t\t\tthis.validateDataItems();\r\n\t\t\t\t\t\tthis.handleSelectionExtremesChange();\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tthis._minMaxAnimation = animation;\r\n\r\n\t\t\t\t\tthis.validateDataItems();\r\n\t\t\t\t\tthis.handleSelectionExtremesChange();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._minAdjusted = min;\r\n\t\t\t\tthis._maxAdjusted = max;\r\n\r\n\t\t\t\tthis._finalMin = min;\r\n\t\t\t\tthis._finalMax = max;\r\n\r\n\t\t\t\tthis.invalidateDataItems();\r\n\t\t\t\tthis.dispatchImmediately(\"extremeschanged\");\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Adjusts the minimum value.\r\n\t *\r\n\t * This is a placeholder method for extending classes to override.\r\n\t *\r\n\t * For numeric values this does nothing, however for more complex types, like\r\n\t * dates, it may be necessary to adjust.\r\n\t *\r\n\t * @param  {number}  value  Value\r\n\t * @return {number}         Adjusted value\r\n\t */\r\n\tprotected fixMin(value: number): number {\r\n\t\treturn value;\r\n\t}\r\n\r\n\t/**\r\n\t * Adjusts the maximum value.\r\n\t *\r\n\t * This is a placeholder method for extending classes to override.\r\n\t *\r\n\t * For numeric values this does nothing, however for more complex types, like\r\n\t * dates, it may be necessary to adjust.\r\n\t *\r\n\t * @param  {number}  value  Value\r\n\t * @return {number}         Adjusted value\r\n\t */\r\n\tprotected fixMax(value: number): number {\r\n\t\treturn value;\r\n\t}\r\n\r\n\t/**\r\n\t * Adjusts actual min and max scale values so that the axis starts and ends\r\n\t * at \"nice\" values, unless `strictMinMax` is set.\r\n\t *\r\n\t * The `difference` can be something else than `max - min`, because of the\r\n\t * axis breaks.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @param  {number}      min        [description]\r\n\t * @param  {number}      max        [description]\r\n\t * @param  {number}      difference [description]\r\n\t * @param  {number}      gridCount  [description]\r\n\t * @param  {boolean}     strictMode [description]\r\n\t * @return {IMinMaxStep}            [description]\r\n\t */\r\n\tpublic adjustMinMax(min: number, max: number, difference: number, gridCount: number, strictMode?: boolean): IMinMaxStep {\r\n\r\n\t\t// will fail if 0\r\n\t\tif (gridCount <= 0) {\r\n\t\t\tgridCount = 1;\r\n\t\t}\r\n\r\n\t\tlet initialMin: number = min;\r\n\t\tlet initialMax: number = max;\r\n\r\n\t\t// in case min and max is the same, use max\r\n\t\tif (difference === 0) {\r\n\t\t\tdifference = Math.abs(max);\r\n\t\t}\r\n\r\n\t\t// the number by which we need to raise 10 to get difference\r\n\t\tlet exponent: number = Math.log(Math.abs(difference)) * Math.LOG10E;\r\n\r\n\t\t// here we find a number which is power of 10 and has the same count of numbers as difference has\r\n\t\tlet power = Math.pow(10, Math.floor(exponent));\r\n\t\t// reduce this number by 10 times\r\n\t\tpower = power / 10;\r\n\r\n\t\tlet extra: number = power;\r\n\t\tif (strictMode) {\r\n\t\t\textra = 0;\r\n\t\t}\r\n\r\n\t\tif (!this.logarithmic) {\r\n\r\n\t\t\t// round down min\r\n\t\t\tif (strictMode) {\r\n\t\t\t\tmin = Math.floor(min / power) * power;\r\n\t\t\t\t// round up max\r\n\t\t\t\tmax = Math.ceil(max / power) * power;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tmin = Math.ceil(min / power) * power - extra;\r\n\t\t\t\t// round up max\r\n\t\t\t\tmax = Math.floor(max / power) * power + extra;\r\n\t\t\t}\r\n\r\n\t\t\t// don't let min go below 0 if real min is >= 0\r\n\t\t\tif (min < 0 && initialMin >= 0) {\r\n\t\t\t\tmin = 0;\r\n\t\t\t}\r\n\t\t\t// don't let max go above 0 if real max is <= 0\r\n\t\t\tif (max > 0 && initialMax <= 0) {\r\n\t\t\t\tmax = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (min <= 0) {\r\n\t\t\t\tthrow Error(\"Logarithmic value axis can not have vales <= 0.\");\r\n\t\t\t}\r\n\t\t\tmin = Math.pow(10, Math.floor(Math.log(Math.abs(min)) * Math.LOG10E));\r\n\t\t\tmax = Math.pow(10, Math.ceil(Math.log(Math.abs(max)) * Math.LOG10E));\r\n\t\t}\r\n\t\t// repeat diff, exponent and power again with rounded values\r\n\t\t//difference = this.adjustDifference(min, max);\r\n\r\n\t\texponent = Math.log(Math.abs(difference)) * Math.LOG10E;\r\n\t\tpower = Math.pow(10, Math.floor(exponent));\r\n\t\tpower = power / 10;\r\n\r\n\t\t// approximate difference between two grid lines\r\n\t\tlet step = Math.ceil((difference / gridCount) / power) * power;\r\n\r\n\t\tlet stepPower = Math.pow(10, Math.floor(Math.log(Math.abs(step)) * Math.LOG10E));\r\n\r\n\t\t// TODO: in v3 I had fixStepE here, ommiting it for a while, need to think about other solution\r\n\t\t// the step should divide by  2, 5, and 10.\r\n\t\tlet stepDivisor: number = Math.ceil(step / stepPower); // number 0 - 10\r\n\t\tif (stepDivisor > 5) {\r\n\t\t\tstepDivisor = 10;\r\n\t\t}\r\n\t\telse if (stepDivisor <= 5 && stepDivisor > 2) {\r\n\t\t\tstepDivisor = 5;\r\n\t\t}\r\n\r\n\t\t// now get real step\r\n\t\tstep = Math.ceil(step / (stepPower * stepDivisor)) * stepPower * stepDivisor;\r\n\r\n\t\tlet decCount: number = 0;\r\n\t\t// in case numbers are smaller than 1\r\n\t\tif (stepPower < 1) {\r\n\t\t\t// exponent is less then 1 too. Count decimals of exponent\r\n\t\t\tdecCount = Math.round(Math.abs(Math.log(Math.abs(stepPower)) * Math.LOG10E)) + 1;\r\n\t\t\t// round step\r\n\t\t\tstep = $math.round(step, decCount);\r\n\t\t}\r\n\t\tif (!this.logarithmic) {\r\n\t\t\t// final min and max\r\n\t\t\tmin = $math.round(step * Math.floor(min / step), decCount);\r\n\t\t\tmax = $math.round(step * Math.ceil(max / step), decCount);\r\n\t\t}\r\n\r\n\t\treturn { min: min, max: max, step: step };\r\n\t}\r\n\r\n\t/**\r\n\t * A minimum value for the axis scale.\r\n\t *\r\n\t * This value might be auto-adjusted by the Axis in order to accomodate the\r\n\t * grid nicely, i.e. plot area is divided by grid in nice equal cells.\r\n\t *\r\n\t * The above might be overridden by `strictMinMax` which will force exact\r\n\t * user-defined min and max values to be used for scale.\r\n\t *\r\n\t * @param {number}  value  Min value\r\n\t */\r\n\tpublic set min(value: number) {\r\n\t\tthis._minDefined = value;\r\n\t\tthis.getMinMax();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Min value\r\n\t */\r\n\tpublic get min(): number {\r\n\t\treturn this._minAdjusted;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * [step description]\r\n\t *\r\n\t * @todo Description\r\n\t * @return {number} [description]\r\n\t */\r\n\tpublic get step(): number {\r\n\t\treturn this._step;\r\n\t}\r\n\r\n\t/**\r\n\t * A maximum value for the axis scale.\r\n\t *\r\n\t * This value might be auto-adjusted by the Axis in order to accomodate the\r\n\t * grid nicely, i.e. plot area is divided by grid in nice equal cells.\r\n\t *\r\n\t * The above might be overridden by `strictMinMax` which will force exact\r\n\t * user-defined min and max values to be used for scale.\r\n\t *\r\n\t * @param {number}  value  Max value\r\n\t */\r\n\tpublic set max(value: number) {\r\n\t\tthis._maxDefined = value;\r\n\t\tthis.getMinMax();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Max value\r\n\t */\r\n\tpublic get max(): number {\r\n\t\treturn this._maxAdjusted;\r\n\t}\r\n\r\n\t/**\r\n\t * Used for the Series to register itself as the user of this Axis.\r\n\t *\r\n\t * This will also decorate both the Series and Axis with event handlers, used\r\n\t * to redraw on Axis position/zoom change.\r\n\t *\r\n\t * A disposer for those events is returned, so that they can be disposed\r\n\t * together with Series.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {XYSeries}   series  Series\r\n\t * @return {IDisposer}          Disposer for events\r\n\t */\r\n\tpublic registerSeries(series: XYSeries): IDisposer {\r\n\t\treturn new MultiDisposer([\r\n\t\t\tsuper.registerSeries(series),\r\n\r\n\t\t\tseries.events.on(\"extremeschanged\", this.handleExtremesChange, this),\r\n\t\t\tseries.events.on(\"selectionextremeschanged\", this.handleSelectionExtremesChange, this),\r\n\r\n\t\t\tthis.events.on(\"datarangechanged\", series.invalidateDataRange, series),\r\n\t\t\tthis.events.on(\"extremeschanged\", series.invalidate, series)\r\n\t\t]);\r\n\t}\r\n\r\n\t/**\r\n\t * Perform tasks after Axis zoom.\r\n\t */\r\n\tprotected handleSelectionExtremesChange(): void {\r\n\t\tlet selectionMin: number;\r\n\t\tlet selectionMax: number;\r\n\r\n\t\tlet allHidden: boolean = true;\r\n\r\n\t\t$iter.each(this.series.iterator(), (series) => {\r\n\t\t\tif (!series.ignoreMinMax && series.appeared) {\r\n\r\n\t\t\t\tif (series.visible && !series.isHiding) {\r\n\t\t\t\t\tallHidden = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet seriesSelectionMin: number = series.selectionMin(this);\r\n\t\t\t\tlet seriesSelectionMax: number = series.selectionMax(this);\r\n\r\n\t\t\t\tif ($type.isNumber(seriesSelectionMin)) {\r\n\t\t\t\t\tif (!$type.isNumber(selectionMin) || (seriesSelectionMin < selectionMin)) {\r\n\t\t\t\t\t\tselectionMin = seriesSelectionMin;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// check max\r\n\t\t\t\tif ($type.isNumber(seriesSelectionMax)) {\r\n\t\t\t\t\tif (!$type.isNumber(selectionMax) || (seriesSelectionMax > selectionMax)) {\r\n\t\t\t\t\t\tselectionMax = seriesSelectionMax;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif ($type.isNumber(this._minDefined)) {\r\n\t\t\tif (this.strictMinMax) {\r\n\t\t\t\tselectionMin = this._minDefined;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tselectionMin = this.min;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif ($type.isNumber(this._maxDefined)) {\r\n\t\t\tif (this.strictMinMax) {\r\n\t\t\t\tselectionMax = this._maxDefined;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tselectionMax = this.max;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet dif: number = this.adjustDifference(selectionMin, selectionMax);\r\n\t\tlet minMaxStep: IMinMaxStep = this.adjustMinMax(selectionMin, selectionMax, dif, this._gridCount);\r\n\t\tselectionMin = $math.fitToRange(minMaxStep.min, this.min, this.max);\r\n\t\tselectionMax = $math.fitToRange(minMaxStep.max, this.min, this.max);\r\n\r\n\t\t// do it for the second time !important\r\n\t\tdif = this.adjustDifference(selectionMin, selectionMax);\r\n\t\tminMaxStep = this.adjustMinMax(selectionMin, selectionMax, dif, this._gridCount, true);\r\n\t\tselectionMin = minMaxStep.min;\r\n\t\tselectionMax = minMaxStep.max;\r\n\r\n\t\tif (this.strictMinMax) {\r\n\t\t\tselectionMin = $math.max(selectionMin, this._minDefined);\r\n\t\t\tselectionMax = $math.min(selectionMax, this._maxDefined);\r\n\t\t}\r\n\r\n\t\tlet start: number = this.valueToPosition(selectionMin);\r\n\t\tlet end: number = this.valueToPosition(selectionMax);\r\n\r\n\t\t// in case all series are hidden or hiding, full zoomout\r\n\t\tif (allHidden) {\r\n\t\t\tstart = 0;\r\n\t\t\tend = 1;\r\n\t\t}\r\n\r\n\t\t// temp, not sure. solving selection.change jumping\r\n\t\t/*\r\n\t\tif(selectionMin < this.min){\r\n\t\t\tthis._minAdjusted = selectionMin;\r\n\t\t}\r\n\r\n\t\tif(selectionMax > this.max){\r\n\t\t\tthis._maxAdjusted = selectionMax;\r\n\t\t} \t*/\r\n\r\n\t\tthis.zoom({ start: start, end: end }, false);\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether to blindly use exact `min` and `max` values set by user\r\n\t * when generating Axis scale.\r\n\t *\r\n\t * If not set, the Axis might slightly adjust those values to accomodate a\r\n\t * better looking grid.\r\n\t *\r\n\t * @default false\r\n\t * @param {boolean} value Use exact values?\r\n\t */\r\n\tpublic set strictMinMax(value: boolean) {\r\n\t\tthis.setPropertyValue(\"strictMinMax\", value);\r\n\t\tthis.invalidateDataRange();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Use exact values?\r\n\t */\r\n\tpublic get strictMinMax(): boolean {\r\n\t\treturn this.getPropertyValue(\"strictMinMax\");\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates if this axis should use a logarithmic scale.\r\n\t *\r\n\t * Please note that logarithmic axis can **only** accommodate values bigger\r\n\t * than zero.\r\n\t *\r\n\t * Having zero or negative values will result in error and failure of the\r\n\t * whole chart.\r\n\t *\r\n\t * @param {boolean} value Logarithmic scale?\r\n\t */\r\n\tpublic set logarithmic(value: boolean) {\r\n\t\tthis.setPropertyValue(\"logarithmic\", value);\r\n\t\tthis.invalidateDataRange();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Logarithmic scale?\r\n\t */\r\n\tpublic get logarithmic(): boolean {\r\n\t\treturn this.getPropertyValue(\"logarithmic\");\r\n\t}\r\n\r\n\t/**\r\n\t * Invalidates axis data items when series extremes change\r\n\t */\r\n\tprotected handleExtremesChange() {\r\n\t\tthis.getMinMax();\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the X coordinate for series' data item's value.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description (review)\r\n\t * @param  {XYSeriesDataItem}  dataItem  Data item\r\n\t * @param  {string}            key       Data field to get value from\r\n\t * @param  {number}            location  Location (0-1)\r\n\t * @param  {string}            stackKey  ?\r\n\t * @return {number}                      X coordinate (px)\r\n\t */\r\n\tpublic getX(dataItem: XYSeriesDataItem, key: string, location?: number, stackKey?: string): number {\r\n\t\tlet value: number = dataItem.getWorkingValue(key);\r\n\t\tif (!$type.hasValue(stackKey)) {\r\n\t\t\tstackKey = \"valueX\";\r\n\t\t}\r\n\t\tlet stack: number = dataItem.getValue(stackKey, \"stack\");\r\n\r\n\t\tif (!$type.isNumber(value)) {\r\n\t\t\tvalue = this.baseValue;\r\n\t\t}\r\n\r\n\t\treturn this.renderer.positionToPoint(this.valueToPosition(value + stack)).x;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the Y coordinate for series' data item's value.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description (review)\r\n\t * @param  {XYSeriesDataItem}  dataItem  Data item\r\n\t * @param  {string}            key       Data field to get value from\r\n\t * @param  {number}            location  Location (0-1)\r\n\t * @param  {string}            stackKey  Stack ID\r\n\t * @return {number}                      Y coordinate (px)\r\n\t */\r\n\tpublic getY(dataItem: XYSeriesDataItem, key: string, location?: number, stackKey?: string): number {\r\n\t\tlet value: number = dataItem.getWorkingValue(key);\r\n\r\n\t\tif (!$type.hasValue(stackKey)) {\r\n\t\t\tstackKey = \"valueY\";\r\n\t\t}\r\n\r\n\t\tlet stack: number = dataItem.getValue(stackKey, \"stack\");\r\n\r\n\t\tif (!$type.isNumber(value)) {\r\n\t\t\tvalue = this.baseValue;\r\n\t\t}\r\n\r\n\t\treturn this.renderer.positionToPoint(this.valueToPosition(value + stack)).y;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns an angle for series data item.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description (review)\r\n\t * @param  {XYSeriesDataItem}  dataItem  Data item\r\n\t * @param  {string}            key       Data field to get value from\r\n\t * @param  {number}            location  Location (0-1)\r\n\t * @param  {string}            stackKey  Stack ID\r\n\t * @return {number}                      Angle\r\n\t */\r\n\tpublic getAngle(dataItem: XYSeriesDataItem, key: string, location?: number, stackKey?: string): number {\r\n\t\tlet value: number = dataItem.getWorkingValue(key);\r\n\t\tlet stack: number = dataItem.getValue(stackKey, \"stack\");\r\n\r\n\t\tif (!$type.isNumber(value)) {\r\n\t\t\tvalue = this.baseValue;\r\n\t\t}\r\n\r\n\t\treturn this.positionToAngle(this.valueToPosition(value + stack));\r\n\t}\r\n\r\n\t/**\r\n\t * [getAnyRangePath description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @param  {number}  start     [description]\r\n\t * @param  {number}  end       [description]\r\n\t * @param  {number}  location  [description]\r\n\t * @return {string}            [description]\r\n\t */\r\n\tpublic getAnyRangePath(start: number, end: number, location?: number): string {\r\n\t\tlet startPosition: number = this.valueToPosition(start);\r\n\t\tlet endPosition: number = this.valueToPosition(end);\r\n\r\n\t\treturn this.getPositionRangePath(startPosition, endPosition); // Base class (Axis) gets range shape from AxisRenderer\r\n\t}\r\n\r\n\t/**\r\n\t * Returns text to show in a axis tooltip, based on specific position within\r\n\t * axis.\r\n\t *\r\n\t * The label will be formatted as per [[NumberFormatter]] set for the whole\r\n\t * chart, or explicitly for this Axis.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {number}  position  Position (px)\r\n\t * @return {string}            Label (numeric value)\r\n\t */\r\n\tpublic getTooltipText(position: number): string {\r\n\t\tlet value: number = $math.round(this.positionToValue(position), this._stepDecimalPlaces);\r\n\t\treturn this.adapter.apply(\"getTooltipText\", this.tooltip.numberFormatter.format(value));\r\n\t}\r\n\r\n\t/**\r\n\t * Zooms axis to specific values.\r\n\t *\r\n\t * @param {number}   startValue      Start value\r\n\t * @param {number}   endValue        End value\r\n\t * @param {boolean}  skipRangeEvent  Do not invoke events\r\n\t * @param {boolean}  instantly       Do not play zoom animations\r\n\t */\r\n\tpublic zoomToValues(startValue: number, endValue: number, skipRangeEvent?: boolean, instantly?: boolean): void {\r\n\t\tlet start: number = (startValue - this.min) / (this.max - this.min);\r\n\t\tlet end: number = (endValue - this.min) / (this.max - this.min);\r\n\t\tthis.zoom({ start: start, end: end }, skipRangeEvent, instantly);\r\n\t}\r\n\r\n\t/**\r\n\t * A smallest value in axis scale within current zoom.\r\n\t *\r\n\t * @return {number} Min zoom value\r\n\t */\r\n\tpublic get minZoomed(): number {\r\n\t\treturn $math.max(this.min, this._minZoomed);\r\n\t}\r\n\r\n\t/**\r\n\t * A biggest value in axis scale within current zoom.\r\n\t * @return {number} [description]\r\n\t */\r\n\tpublic get maxZoomed(): number {\r\n\t\treturn $math.min(this.max, this._maxZoomed);\r\n\t}\r\n\r\n\t/**\r\n\t * Updates positioning of Axis breaks after something changes.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic fixAxisBreaks(): void {\r\n\r\n\t\tsuper.fixAxisBreaks();\r\n\r\n\t\t// process breaks\r\n\t\t$iter.each(this.axisBreaks.iterator(), (axisBreak) => {\r\n\t\t\tlet startValue: number = axisBreak.adjustedStartValue;\r\n\t\t\tlet endValue: number = axisBreak.adjustedEndValue;\r\n\r\n\t\t\t// break difference\r\n\t\t\tlet axisBreakDif: number = endValue - startValue;\r\n\t\t\tlet axisBreakGridCount: number = Math.ceil(axisBreakDif / this._step * axisBreak.breakSize);\r\n\r\n\t\t\t// calculate min, max and step for axis break\r\n\t\t\tlet breakMinMaxStep = this.adjustMinMax(startValue, endValue, axisBreakDif, axisBreakGridCount);\r\n\t\t\taxisBreak.adjustedStep = breakMinMaxStep.step;\r\n\t\t\taxisBreak.adjustedMin = breakMinMaxStep.min;\r\n\t\t\taxisBreak.adjustedMax = breakMinMaxStep.max;\r\n\t\t});\r\n\r\n\t\tthis._difference = this.adjustDifference(this.min, this.max);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns value based on position.\r\n\t *\r\n\t * @param  {number}  position  Relative position on axis (0-1)\r\n\t * @return {string}            Position label\r\n\t */\r\n\tpublic getPositionLabel(position: number): string {\r\n\t\tlet value: number = this.positionToValue(position);\r\n\t\treturn this.numberFormatter.format(value);\r\n\t}\r\n\r\n\t/**\r\n\t * Shows Axis tooltip at specific value\r\n\t *\r\n\t * @param {number} value Value\r\n\t */\r\n\tpublic showTooltipAt(value: number) {\r\n\t\tthis.showTooltipAtPosition(this.valueToPosition(value));\r\n\t}\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"ValueAxis\"] = ValueAxis;\r\nregistry.registeredClasses[\"ValueAxisDataItem\"] = ValueAxisDataItem;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/charts/axes/ValueAxis.ts","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_property-desc.js\n// module id = 66\n// module chunks = 26","var id = 0;\nvar px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_uid.js\n// module id = 67\n// module chunks = 26","module.exports = false;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_library.js\n// module id = 68\n// module chunks = 26","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys = require('./_object-keys-internal');\nvar enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O) {\n  return $keys(O, enumBugKeys);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_object-keys.js\n// module id = 69\n// module chunks = 26","var toInteger = require('./_to-integer');\nvar max = Math.max;\nvar min = Math.min;\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_to-absolute-index.js\n// module id = 70\n// module chunks = 26","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject = require('./_an-object');\nvar dPs = require('./_object-dps');\nvar enumBugKeys = require('./_enum-bug-keys');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar Empty = function () { /* empty */ };\nvar PROTOTYPE = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = require('./_dom-create')('iframe');\n  var i = enumBugKeys.length;\n  var lt = '<';\n  var gt = '>';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  require('./_html').appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while (i--) delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty();\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_object-create.js\n// module id = 71\n// module chunks = 26","// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys = require('./_object-keys-internal');\nvar hiddenKeys = require('./_enum-bug-keys').concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return $keys(O, hiddenKeys);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_object-gopn.js\n// module id = 72\n// module chunks = 26","'use strict';\nvar global = require('./_global');\nvar dP = require('./_object-dp');\nvar DESCRIPTORS = require('./_descriptors');\nvar SPECIES = require('./_wks')('species');\n\nmodule.exports = function (KEY) {\n  var C = global[KEY];\n  if (DESCRIPTORS && C && !C[SPECIES]) dP.f(C, SPECIES, {\n    configurable: true,\n    get: function () { return this; }\n  });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_set-species.js\n// module id = 73\n// module chunks = 26","module.exports = function (it, Constructor, name, forbiddenField) {\n  if (!(it instanceof Constructor) || (forbiddenField !== undefined && forbiddenField in it)) {\n    throw TypeError(name + ': incorrect invocation!');\n  } return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_an-instance.js\n// module id = 74\n// module chunks = 26","var ctx = require('./_ctx');\nvar call = require('./_iter-call');\nvar isArrayIter = require('./_is-array-iter');\nvar anObject = require('./_an-object');\nvar toLength = require('./_to-length');\nvar getIterFn = require('./core.get-iterator-method');\nvar BREAK = {};\nvar RETURN = {};\nvar exports = module.exports = function (iterable, entries, fn, that, ITERATOR) {\n  var iterFn = ITERATOR ? function () { return iterable; } : getIterFn(iterable);\n  var f = ctx(fn, that, entries ? 2 : 1);\n  var index = 0;\n  var length, step, iterator, result;\n  if (typeof iterFn != 'function') throw TypeError(iterable + ' is not iterable!');\n  // fast case for arrays with default iterator\n  if (isArrayIter(iterFn)) for (length = toLength(iterable.length); length > index; index++) {\n    result = entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n    if (result === BREAK || result === RETURN) return result;\n  } else for (iterator = iterFn.call(iterable); !(step = iterator.next()).done;) {\n    result = call(iterator, f, step.value, entries);\n    if (result === BREAK || result === RETURN) return result;\n  }\n};\nexports.BREAK = BREAK;\nexports.RETURN = RETURN;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_for-of.js\n// module id = 75\n// module chunks = 26","var redefine = require('./_redefine');\nmodule.exports = function (target, src, safe) {\n  for (var key in src) redefine(target, key, src[key], safe);\n  return target;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_redefine-all.js\n// module id = 76\n// module chunks = 26","/**\r\n * Module, defining Axis Renderer for vertical axes.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { AxisRenderer, IAxisRendererProperties, IAxisRendererAdapters, IAxisRendererEvents } from \"./AxisRenderer\";\r\nimport { Sprite, SpriteEventDispatcher, AMEvent } from \"../../core/Sprite\";\r\nimport { IPoint } from \"../../core/defs/IPoint\";\r\nimport { Axis } from \"./Axis\";\r\nimport { HorizontalCenter } from \"../../core/defs/HorizontalCenter\";\r\nimport { Label } from \"../../core/elements/Label\";\r\nimport { AxisTick } from \"./AxisTick\";\r\nimport { AxisLabel } from \"./AxisLabel\";\r\nimport { AxisBreak } from \"./AxisBreak\";\r\nimport { WavedLine } from \"../../core/elements/WavedLine\";\r\nimport { WavedRectangle } from \"../../core/elements/WavedRectangle\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { percent } from \"../../core/utils/Percent\";\r\nimport * as $math from \"../../core/utils/Math\";\r\nimport * as $path from \"../../core/rendering/Path\";\r\nimport * as $utils from \"../../core/utils/Utils\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[AxisRendererY]].\r\n */\r\nexport interface IAxisRendererYProperties extends IAxisRendererProperties { }\r\n\r\n/**\r\n * Defines events for [[AxisRendererY]].\r\n */\r\nexport interface IAxisRendererYEvents extends IAxisRendererEvents { }\r\n\r\n/**\r\n * Defines adapters for [[AxisRenderer]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface IAxisRendererYAdapters extends IAxisRendererAdapters, IAxisRendererYProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * A renderer for vertical axis.\r\n *\r\n * @see {@link IAxisRendererYEvents} for a list of available events\r\n * @see {@link IAxisRendererYAdapters} for a list of available Adapters\r\n */\r\nexport class AxisRendererY extends AxisRenderer {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IAxisRendererYProperties}\r\n\t */\r\n\tpublic _properties!: IAxisRendererYProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IAxisRendererYAdapters}\r\n\t */\r\n\tpublic _adapter!: IAxisRendererYAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IAxisRendererYEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IAxisRendererYEvents;\r\n\r\n\t/**\r\n\t * Constructor.\r\n\t *\r\n\t * @param {Axis} axis Related axis\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"AxisRendererY\";\r\n\t\tthis.minGridDistance = 40;\r\n\t\tthis.opposite = false;\r\n\t\tthis.height = percent(100);\r\n\t\tthis.labels.template.verticalCenter = \"middle\";\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t* @ignore\r\n\t*/\r\n\tpublic setAxis(axis: Axis) {\r\n\t\tsuper.setAxis(axis);\r\n\t\taxis.layout = \"horizontal\";\r\n\t}\r\n\r\n\t/**\r\n\t * Called when rendered is attached to an Axis, as well as a property of\r\n\t * Axis that might affect the appearance is updated.\r\n\t *\r\n\t * E.g. `axis.opposite`, `axis.inside`, etc.\r\n\t *\r\n\t * This method is called **before** draw, so that any related setting\r\n\t * changed in this method can be changed.\r\n\t *\r\n\t * @todo Description (review)\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic processRenderer(): void {\r\n\t\tsuper.processRenderer();\r\n\r\n\t\tlet axis = this.axis;\r\n\r\n\t\tif (axis) {\r\n\r\n\t\t\tlet title: Label = axis.title;\r\n\t\t\ttitle.valign = \"middle\";\r\n\r\n\t\t\taxis.height = percent(100);\r\n\r\n\t\t\tif (this.opposite) {\r\n\t\t\t\ttitle.rotation = 90;\r\n\t\t\t\tthis.line.toBack();\r\n\t\t\t\ttitle.toFront();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\ttitle.rotation = -90;\r\n\t\t\t\ttitle.toBack();\r\n\t\t\t\tthis.line.toFront();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Updates some of the Axis tooltip's visual properties, related to\r\n\t * rendering of the Axis.\r\n\t *\r\n\t * @todo Description (review)\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic updateTooltip(): void {\r\n\t\tlet axis: Axis = this.axis;\r\n\t\tif (axis) {\r\n\r\n\t\t\tlet bigNum: number = 2000;\r\n\t\t\tlet bbx: number = 0;\r\n\t\t\tlet bby: number = 0;\r\n\t\t\tlet bbw: number = bigNum;\r\n\t\t\tlet bbh: number = this.pixelHeight;\r\n\r\n\t\t\t// right\r\n\t\t\tif (this.opposite) {\r\n\t\t\t\tif (this.inside) {\r\n\t\t\t\t\tbbx = - bigNum;\r\n\t\t\t\t\tbbw = bigNum;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// left\r\n\t\t\telse {\r\n\t\t\t\tif (!this.inside) {\r\n\t\t\t\t\tbbx = - bigNum;\r\n\t\t\t\t\tbbw = bigNum;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.axis.updateTooltip(\"horizontal\", { x: bbx, y: bby, width: bbw, height: bbh });\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns actual length of the Axis, in pixels.\r\n\t *\r\n\t * @return {number} Length (px)\r\n\t */\r\n\tpublic get axisLength(): number {\r\n\t\tlet axis = this.axis;\r\n\t\treturn axis.pixelHeight - axis.pixelPaddingTop - axis.pixelPaddingBottom;\r\n\t}\r\n\r\n\t/**\r\n\t * Converts relative position on axis to point coordinates.\r\n\t *\r\n\t * @param  {number}  position  Position (0-1)\r\n\t * @return {IPoint}            Point\r\n\t */\r\n\tpublic positionToPoint(position: number): IPoint {\r\n\t\treturn { x: 0, y: this.positionToCoordinate(position) };\r\n\t}\r\n\r\n\t/**\r\n\t * Converts a point at specific coordinates to a relative position (0-1)\r\n\t * on the axis.\r\n\t *\r\n\t * @param  {IPoint}  point  Point\r\n\t * @return {number}         Position (0-1)\r\n\t */\r\n\tpublic pointToPosition(point: IPoint) {\r\n\t\treturn this.coordinateToPosition(point.y);\r\n\t}\r\n\r\n\t/**\r\n\t * [getPositionRangePath description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @param  {number}  startPosition  Starting position\r\n\t * @param  {number}  endPosition    End position\r\n\t * @return {string}                 SVG path\r\n\t */\r\n\tpublic getPositionRangePath(startPosition: number, endPosition: number): string {\r\n\t\tlet y1: number = $math.fitToRange(this.positionToCoordinate(startPosition), 0, this.axisLength);\r\n\t\tlet y2: number = $math.fitToRange(this.positionToCoordinate(endPosition), 0, this.axisLength);\r\n\r\n\t\tlet h: number = Math.abs(y2 - y1);\r\n\t\tlet w: number = this.getWidth();\r\n\t\tlet y: number = Math.min(y1, y2);\r\n\t\tlet x: number = 0;\r\n\r\n\t\treturn $path.rectToPath({\r\n\t\t\tx: x,\r\n\t\t\ty: y,\r\n\t\t\twidth: w,\r\n\t\t\theight: h\r\n\t\t}, true);\r\n\t}\r\n\r\n\t/**\r\n\t * Updates and positions a grid element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {Grid}    grid         Grid element\r\n\t * @param {number}  position     Starting position\r\n\t * @param {number}  endPosition  End position\r\n\t */\r\n\tpublic updateGridElement(grid: Sprite, position: number, endPosition: number) {\r\n\t\tlet point: IPoint = this.positionToPoint(position);\r\n\t\tif (grid.element) {\r\n\t\t\tgrid.element.attr({ \"d\": $path.moveTo({ x: 0, y: 0 }) + $path.lineTo({ x: this.getWidth(), y: 0 }) });\r\n\t\t}\r\n\t\tthis.positionItem(grid, point);\r\n\r\n\t\tthis.toggleVisibility(grid, position, 0, 1);\r\n\t}\r\n\r\n\t/**\r\n\t * Updates and positions a tick element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {AxisTick}  tick         Tick element\r\n\t * @param {number}    position     Starting position\r\n\t * @param {number}    endPosition  End position\r\n\t */\r\n\tpublic updateTickElement(tick: AxisTick, position: number, endPosition: number) {\r\n\t\tlet point: IPoint = this.positionToPoint(position);\r\n\r\n\t\tlet tickLength = tick.length;\r\n\r\n\t\tif (!this.opposite) {\r\n\t\t\tpoint.x = this.pixelWidth;\r\n\t\t\ttickLength *= (tick.inside ? 1 : -1);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttickLength *= (tick.inside ? -1 : 1);\r\n\t\t}\r\n\r\n\t\ttick.element.attr({ \"d\": $path.moveTo({ x: 0, y: 0 }) + $path.lineTo({ x: tickLength, y: 0 }) });\r\n\r\n\t\tthis.positionItem(tick, point);\r\n\r\n\t\tthis.toggleVisibility(tick, position, 0, 1);\r\n\t}\r\n\r\n\t/**\r\n\t * Updates and positions the axis line element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic updateAxisLine() {\r\n\t\tlet element = this.line.element;\r\n\t\tif (element) {\r\n\t\t\telement.attr({ \"d\": $path.moveTo({ x: 0, y: 0 }) + $path.lineTo({ x: 0, y: this.axisLength }) });\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Updates and positions the base grid element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic updateBaseGridElement(): void {\r\n\t\tsuper.updateBaseGridElement();\r\n\r\n\t\tlet axis: Axis = this.axis;\r\n\r\n\t\tlet w: number = this.getWidth();\r\n\t\tlet h: number = this.getHeight();\r\n\t\tlet y: number = axis.basePoint.y;\r\n\r\n\t\tlet baseGrid: Sprite = this.baseGrid;\r\n\r\n\t\tif (y < 0 || y > h) {\r\n\t\t\tbaseGrid.hide(0);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tlet x = $utils.spritePointToSprite({ x: 0, y: 0 }, this.gridContainer, baseGrid.parent).x;\r\n\r\n\t\t\tbaseGrid.element.attr({ \"d\": $path.moveTo({ x: 0, y: 0 }) + $path.lineTo({ x: w, y: 0 }) });\r\n\t\t\tbaseGrid.moveTo({ x: x, y: y });\r\n\t\t\tbaseGrid.show(0);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Updates and positions a label element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {AxisLabel}  label        Label element\r\n\t * @param {number}     position     Starting position\r\n\t * @param {number}     endPosition  Ending position\r\n\t */\r\n\tpublic updateLabelElement(label: AxisLabel, position: number, endPosition: number) {\r\n\t\tposition = position + (endPosition - position) * label.location;\r\n\t\tlabel.isMeasured = !label.inside;\r\n\r\n\t\tlet point: IPoint = this.positionToPoint(position);\r\n\r\n\t\tlet horizontalCenter: HorizontalCenter;\r\n\t\tlet deltaX = 0;\r\n\t\tif (this.opposite) {\r\n\t\t\tif (label.inside) {\r\n\t\t\t\thorizontalCenter = \"right\";\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\thorizontalCenter = \"left\";\r\n\t\t\t}\r\n\r\n\t\t\tif (label.inside) {\r\n\t\t\t\tif (label.align == \"left\") {\r\n\t\t\t\t\tdeltaX = -this.maxWidth + this.measuredWidth;\r\n\t\t\t\t\thorizontalCenter = \"left\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tpoint.x = 0 + deltaX;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (label.inside) {\r\n\t\t\t\thorizontalCenter = \"left\";\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\thorizontalCenter = \"right\";\r\n\t\t\t}\r\n\r\n\t\t\tif (label.inside) {\r\n\t\t\t\tif (label.align == \"right\") {\r\n\t\t\t\t\tdeltaX = this.maxWidth - this.measuredWidth;\r\n\t\t\t\t\thorizontalCenter = \"right\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tpoint.x = this.measuredWidth + deltaX;\r\n\t\t}\r\n\t\tlabel.horizontalCenter = horizontalCenter;\r\n\r\n\t\tthis.positionItem(label, point);\r\n\t\tthis.toggleVisibility(label, position, this.minLabelPosition, this.maxLabelPosition);\r\n\t}\r\n\r\n\t/**\r\n\t * Updates and positions an axis break element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {AxisBreak} axisBreak Break element\r\n\t */\r\n\tpublic updateBreakElement(axisBreak: AxisBreak) {\r\n\t\tsuper.updateBreakElement(axisBreak);\r\n\r\n\t\tlet startLine = axisBreak.startLine;\r\n\t\tlet endLine = axisBreak.endLine;\r\n\t\tlet fillShape = axisBreak.fillShape;\r\n\r\n\t\tlet startPoint: IPoint = axisBreak.startPoint;\r\n\t\tlet endPoint: IPoint = axisBreak.endPoint;\r\n\r\n\t\tlet x1: number = axisBreak.pixelMarginLeft;\r\n\t\tlet x2: number = this.getWidth() - axisBreak.pixelMarginLeft - axisBreak.pixelMarginRight;\r\n\r\n\t\tstartPoint.y = $math.fitToRange(startPoint.y, -1, this.pixelHeight + 1);\r\n\t\tendPoint.y = $math.fitToRange(endPoint.y, -1, this.pixelHeight + 1);\r\n\r\n\t\tif (startPoint.y == endPoint.y && (startPoint.y < 0 || startPoint.y > this.pixelHeight)) {\r\n\t\t\taxisBreak.fillShape.__disabled = true;\r\n\t\t}\r\n\t\telse {\r\n\t\t\taxisBreak.fillShape.__disabled = false;\r\n\t\t}\r\n\r\n\t\tlet w = Math.abs(x2 - x1);\r\n\r\n\t\tstartLine.x = x1;\r\n\t\tstartLine.height = 0;\r\n\t\tstartLine.width = w;\r\n\r\n\t\tendLine.x = x1;\r\n\t\tendLine.height = 0;\r\n\t\tendLine.width = w;\r\n\r\n\t\tfillShape.width = w;\r\n\t\tfillShape.height = Math.abs(endPoint.y - startPoint.y);\r\n\t\tfillShape.x = x1;\r\n\t\tfillShape.y = endPoint.y;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates visual elements for and axis break.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {AxisBreak} axisBreak Axis break\r\n\t */\r\n\tpublic createBreakSprites(axisBreak: AxisBreak) {\r\n\t\taxisBreak.startLine = new WavedLine();\r\n\t\taxisBreak.endLine = new WavedLine();\r\n\t\tlet wavedRectangle: WavedRectangle = new WavedRectangle();\r\n\t\twavedRectangle.setWavedSides(true, false, true, false);\r\n\t\taxisBreak.fillShape = wavedRectangle;\r\n\t}\r\n\r\n\t/**\r\n\t * Converts a position on the axis to a coordinate in pixels.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {number}  position  Position (0-1)\r\n\t * @return {number}            Coordinate (px)\r\n\t */\r\n\tpublic positionToCoordinate(position: number): number {\r\n\t\tlet coordinate: number;\r\n\t\tlet axis: Axis = this.axis;\r\n\t\tlet axisFullLength = axis.axisFullLength;\r\n\r\n\t\tif (!axis.renderer.inversed) {\r\n\t\t\tcoordinate = (axis.end - position) * axisFullLength;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tcoordinate = (position - axis.start) * axisFullLength;\r\n\t\t}\r\n\r\n\t\treturn $math.round(coordinate, 1);\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"AxisRendererY\"] = AxisRendererY;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/charts/axes/AxisRendererY.ts","/**\r\n * Functionality for drawing simple buttons.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Container, IContainerProperties, IContainerAdapters, IContainerEvents } from \"../Container\";\r\nimport { Sprite, SpriteEventDispatcher, AMEvent } from \"../Sprite\";\r\nimport { Label } from \"./Label\";\r\nimport { RoundedRectangle } from \"../elements/RoundedRectangle\";\r\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\r\nimport { registry } from \"../Registry\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[Button]].\r\n */\r\nexport interface IButtonProperties extends IContainerProperties {\r\n\r\n\t/**\r\n\t * Icon (if available) position - left or right.\r\n\t */\r\n\ticonPosition?: \"left\" | \"right\";\r\n\r\n\t/**\r\n\t * Icon sprite\r\n\t */\r\n\ticon?: Sprite;\r\n}\r\n\r\n/**\r\n * Defines events for [[Button]].\r\n */\r\nexport interface IButtonEvents extends IContainerEvents { }\r\n\r\n/**\r\n * Defines adapters for [[Button]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface IButtonAdapters extends IContainerAdapters, IButtonProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Button class is capable of drawing a simple rectangular button with\r\n * optionally rounded corners and an icon in it.\r\n *\r\n * @see {@link IButtonEvents} for a list of available events\r\n * @see {@link IButtonAdapters} for a list of available Adapters\r\n */\r\nexport class Button extends Container {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IButtonProperties}\r\n\t */\r\n\tpublic _properties!: IButtonProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IButtonAdapters}\r\n\t */\r\n\tpublic _adapter!: IButtonAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IButtonEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IButtonEvents;\r\n\r\n\t/**\r\n\t * Icon reference.\r\n\t *\r\n\t * @type {Sprite}\r\n\t */\r\n\tprotected _icon: Sprite;\r\n\r\n\t/**\r\n\t * [[Label]] element for button content.\r\n\t *\r\n\t * @type {Label}\r\n\t */\r\n\tprotected _label: Label;\r\n\r\n\t/**\r\n\t * A type for background.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {RoundedRectangle}\r\n\t */\r\n\tpublic _background: RoundedRectangle;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\r\n\t\t// Init\r\n\t\tsuper();\r\n\t\tthis.className = \"Button\";\r\n\r\n\t\tthis.tooltipY = 0;\r\n\r\n\t\t// Set defaults\r\n\t\tthis.iconPosition = \"left\";\r\n\t\tthis.layout = \"horizontal\";\r\n\t\tthis.contentAlign = \"center\";\r\n\t\tthis.contentValign = \"middle\";\r\n\t\tthis.padding(8, 16, 8, 16);\r\n\r\n\t\tlet interfaceColors = new InterfaceColorSet();\r\n\r\n\t\t// Create background\r\n\t\tlet background = this.background;\r\n\t\tbackground.fill = interfaceColors.getFor(\"secondaryButton\");\r\n\t\tbackground.stroke = interfaceColors.getFor(\"secondaryButtonStroke\");\r\n\t\tbackground.fillOpacity = 1;\r\n\t\tbackground.strokeOpacity = 1;\r\n\t\tbackground.cornerRadius(3, 3, 3, 3);\r\n\r\n\t\t// Create the label element\r\n\t\tthis.label = new Label();\r\n\t\tthis.label.fill = interfaceColors.getFor(\"secondaryButtonText\");;\r\n\r\n\t\t// Create default states\r\n\t\tlet hoverState = background.states.create(\"hover\");\r\n\t\thoverState.properties.fillOpacity = 1;\r\n\t\thoverState.properties.fill = interfaceColors.getFor(\"secondaryButtonHover\");\r\n\r\n\t\tlet downState = background.states.create(\"down\");\r\n\t\tdownState.transitionDuration = 100;\r\n\t\tdownState.properties.fill = interfaceColors.getFor(\"secondaryButtonDown\");\r\n\t\tdownState.properties.fillOpacity = 1;\r\n\t\t// Set up accessibility\r\n\t\t// A button should be always focusable\r\n\t\tthis.role = \"button\";\r\n\t\tthis.focusable = true;\r\n\r\n\t\t// Apply theme\r\n\t\tthis.applyTheme();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * A [[Sprite]] to be used as an icon on button.\r\n\t *\r\n\t * @param {Sprite} icon Icon Sprite\r\n\t */\r\n\tpublic set icon(icon: Sprite) {\r\n\t\tlet currentIcon = this.getPropertyValue(\"icon\");\r\n\t\tif (currentIcon) {\r\n\t\t\t//this._icon.dispose();\r\n\t\t\t//this.removeDispose(currentIcon);\r\n\t\t\tcurrentIcon.parent = undefined;\r\n\t\t}\r\n\t\tif (icon) {\r\n\t\t\tthis.setPropertyValue(\"icon\", icon);\r\n\t\t\ticon.parent = this;\r\n\t\t\ticon.interactionsEnabled = false;\r\n\t\t\tthis.iconPosition = this.iconPosition;\r\n\t\t\tthis._disposers.push(icon);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Sprite} Icon Sprite\r\n\t */\r\n\tpublic get icon(): Sprite {\r\n\t\treturn this.getPropertyValue(\"icon\");\r\n\t}\r\n\r\n\t/**\r\n\t * Icon position: \"left\" or \"right\".\r\n\t *\r\n\t * @default \"left\"\r\n\t * @param {\"left\" | \"right\"}  position  Icon position\r\n\t */\r\n\tpublic set iconPosition(position: \"left\" | \"right\") {\r\n\t\tthis.setPropertyValue(\"iconPosition\", position);\r\n\r\n\t\tif (this.icon) {\r\n\t\t\tif (position == \"left\") {\r\n\t\t\t\tthis.icon.toBack();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.icon.toFront();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {\"left\" | \"right\"} Icon position\r\n\t */\r\n\tpublic get iconPosition(): \"left\" | \"right\" {\r\n\t\treturn this.getPropertyValue(\"iconPosition\");\r\n\t}\r\n\r\n\t/**\r\n\t * [[Label]] element to be used for text.\r\n\t *\r\n\t * @param {Label}  label element\r\n\t */\r\n\tpublic set label(label: Label) {\r\n\t\tif (this._label) {\r\n\t\t\t//this._label.dispose();\r\n\t\t\tthis.removeDispose(this._label);\r\n\t\t}\r\n\t\tif (label) {\r\n\t\t\tthis._label = label;\r\n\t\t\tlabel.parent = this;\r\n\t\t\tlabel.interactionsEnabled = false;\r\n\t\t\tthis._disposers.push(this._label);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Label} Label element\r\n\t */\r\n\tpublic get label(): Label {\r\n\t\treturn this._label;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a background element for the button.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {RoundedRectangle} Background element\r\n\t */\r\n\tpublic createBackground(): this[\"_background\"] {\r\n\t\treturn new RoundedRectangle();\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"Button\"] = Button;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/elements/Button.ts","/**\r\n * A collection of low-level async operation stuff.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport * as $array from \"./Array\";\r\n\r\n/**\r\n * [Listener description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @type {[type]}\r\n */\r\nexport type Listener = (now: number) => void;\r\n\r\nlet pendingFrame = false;\r\n\r\nconst nextQueue: Array<Listener> = [];\r\nconst readQueue: Array<Listener> = [];\r\nconst writeQueue: Array<Listener> = [];\r\nconst idleQueue: Array<Listener> = [];\r\n\r\n\r\nconst fps = 1000 / 60;\r\n\r\n/**\r\n * [raf description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @type {[type]}\r\n */\r\nexport const raf =\r\n\t(typeof requestAnimationFrame === \"function\"\r\n\t\t? function(fn: () => void): void {\r\n\t\t\trequestAnimationFrame(fn);\r\n\t\t}\r\n\t\t: function(fn: () => void): void {\r\n\t\t\tsetTimeout(fn, fps);\r\n\t\t});\r\n\r\n/**\r\n * [frameLoop description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n */\r\nfunction frameLoop(): void {\r\n\tconst now = Date.now();\r\n\r\n\r\n\tconst length = nextQueue.length;\r\n\r\n\tfor (let i = 0; i < length; ++i) {\r\n\t\tnextQueue[i](now);\r\n\t}\r\n\r\n\t$array.shiftLeft(nextQueue, length);\r\n\r\n\r\n\tfor (let i = 0; i < readQueue.length; ++i) {\r\n\t\treadQueue[i](now);\r\n\t}\r\n\r\n\treadQueue.length = 0;\r\n\r\n\r\n\tfor (let i = 0; i < writeQueue.length; ++i) {\r\n\t\twriteQueue[i](now);\r\n\t}\r\n\r\n\twriteQueue.length = 0;\r\n\r\n\r\n\tif (nextQueue.length === 0 && readQueue.length === 0) {\r\n\t\tpendingFrame = false;\r\n\r\n\t} else {\r\n\t\traf(frameLoop);\r\n\t}\r\n}\r\n\r\n/**\r\n * [pendFrame description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n */\r\nfunction pendFrame(): void {\r\n\tif (!pendingFrame) {\r\n\t\tpendingFrame = true;\r\n\r\n\t\traf(frameLoop);\r\n\t}\r\n}\r\n\r\n\r\n/**\r\n * [nextFrame description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @param {Listener} fn [description]\r\n */\r\nexport function nextFrame(fn: Listener): void {\r\n\tnextQueue.push(fn);\r\n\tpendFrame();\r\n}\r\n\r\n/**\r\n * [readFrame description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @param {Listener} fn [description]\r\n */\r\nexport function readFrame(fn: Listener): void {\r\n\treadQueue.push(fn);\r\n\tpendFrame();\r\n}\r\n\r\n/**\r\n * [writeFrame description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @param {Listener} fn [description]\r\n */\r\nexport function writeFrame(fn: Listener): void {\r\n\twriteQueue.push(fn);\r\n\tpendFrame();\r\n}\r\n\r\n/**\r\n * [whenIdle description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @param {Listener} fn [description]\r\n */\r\nexport function whenIdle(fn: Listener): void {\r\n\tidleQueue.push(fn);\r\n}\r\n\r\n/**\r\n * [triggerIdle description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @todo Maybe don't trigger a callback which was added while in the middle of triggering?\r\n */\r\nexport function triggerIdle(): void {\r\n\tconst now = Date.now();\r\n\r\n\tconst length = idleQueue.length;\r\n\r\n\tfor (let i = 0; i < length; ++i) {\r\n\t\t(<any>idleQueue.shift())(now);\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/utils/AsyncPending.ts","/**\r\n * A collection of color-related functions\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport * as $math from \"./Math\";\r\nimport * as $type from \"./Type\";\r\n\r\n/**\r\n * Define named colors for easy resolution to RGB.\r\n *\r\n * @type {Object}\r\n */\r\nlet namedColors = {\r\n\taliceblue: { r: 240, g: 248, b: 255 },\r\n\tantiquewhite: { r: 250, g: 235, b: 215 },\r\n\taqua: { r: 0, g: 255, b: 255 },\r\n\taquamarine: { r: 127, g: 255, b: 212 },\r\n\tazure: { r: 240, g: 255, b: 255 },\r\n\tbeige: { r: 245, g: 245, b: 220 },\r\n\tbisque: { r: 255, g: 228, b: 196 },\r\n\tblack: { r: 0, g: 0, b: 0 },\r\n\tblanchedalmond: { r: 255, g: 235, b: 205 },\r\n\tblue: { r: 0, g: 0, b: 255 },\r\n\tblueviolet: { r: 138, g: 43, b: 226 },\r\n\tbrown: { r: 165, g: 42, b: 42 },\r\n\tburlywood: { r: 222, g: 184, b: 135 },\r\n\tcadetblue: { r: 95, g: 158, b: 160 },\r\n\tchartreuse: { r: 127, g: 255, b: 0 },\r\n\tchocolate: { r: 210, g: 105, b: 30 },\r\n\tcoral: { r: 255, g: 127, b: 80 },\r\n\tcornflowerblue: { r: 100, g: 149, b: 237 },\r\n\tcornsilk: { r: 255, g: 248, b: 220 },\r\n\tcrimson: { r: 220, g: 20, b: 60 },\r\n\tcyan: { r: 0, g: 255, b: 255 },\r\n\tdarkblue: { r: 0, g: 0, b: 139 },\r\n\tdarkcyan: { r: 0, g: 139, b: 139 },\r\n\tdarkgoldenrod: { r: 184, g: 134, b: 11 },\r\n\tdarkgray: { r: 169, g: 169, b: 169 },\r\n\tdarkgrey: { r: 169, g: 169, b: 169 },\r\n\tdarkgreen: { r: 0, g: 100, b: 0 },\r\n\tdarkkhaki: { r: 189, g: 183, b: 107 },\r\n\tdarkmagenta: { r: 139, g: 0, b: 139 },\r\n\tdarkolivegreen: { r: 85, g: 107, b: 47 },\r\n\tdarkorange: { r: 255, g: 140, b: 0 },\r\n\tdarkorchid: { r: 153, g: 50, b: 204 },\r\n\tdarkred: { r: 139, g: 0, b: 0 },\r\n\tdarksalmon: { r: 233, g: 150, b: 122 },\r\n\tdarkseagreen: { r: 143, g: 188, b: 143 },\r\n\tdarkslateblue: { r: 72, g: 61, b: 139 },\r\n\tdarkslategray: { r: 47, g: 79, b: 79 },\r\n\tdarkslategrey: { r: 47, g: 79, b: 79 },\r\n\tdarkturquoise: { r: 0, g: 206, b: 209 },\r\n\tdarkviolet: { r: 148, g: 0, b: 211 },\r\n\tdeeppink: { r: 255, g: 20, b: 147 },\r\n\tdeepskyblue: { r: 0, g: 191, b: 255 },\r\n\tdimgray: { r: 105, g: 105, b: 105 },\r\n\tdimgrey: { r: 105, g: 105, b: 105 },\r\n\tdodgerblue: { r: 30, g: 144, b: 255 },\r\n\tfirebrick: { r: 178, g: 34, b: 34 },\r\n\tfloralwhite: { r: 255, g: 250, b: 240 },\r\n\tforestgreen: { r: 34, g: 139, b: 34 },\r\n\tfuchsia: { r: 255, g: 0, b: 255 },\r\n\tgainsboro: { r: 220, g: 220, b: 220 },\r\n\tghostwhite: { r: 248, g: 248, b: 255 },\r\n\tgold: { r: 255, g: 215, b: 0 },\r\n\tgoldenrod: { r: 218, g: 165, b: 32 },\r\n\tgray: { r: 128, g: 128, b: 128 },\r\n\tgrey: { r: 128, g: 128, b: 128 },\r\n\tgreen: { r: 0, g: 128, b: 0 },\r\n\tgreenyellow: { r: 173, g: 255, b: 47 },\r\n\thoneydew: { r: 240, g: 255, b: 240 },\r\n\thotpink: { r: 255, g: 105, b: 180 },\r\n\tindianred: { r: 205, g: 92, b: 92 },\r\n\tindigo: { r: 75, g: 0, b: 130 },\r\n\tivory: { r: 255, g: 255, b: 240 },\r\n\tkhaki: { r: 240, g: 230, b: 140 },\r\n\tlavender: { r: 230, g: 230, b: 250 },\r\n\tlavenderblush: { r: 255, g: 240, b: 245 },\r\n\tlawngreen: { r: 124, g: 252, b: 0 },\r\n\tlemonchiffon: { r: 255, g: 250, b: 205 },\r\n\tlightblue: { r: 173, g: 216, b: 230 },\r\n\tlightcoral: { r: 240, g: 128, b: 128 },\r\n\tlightcyan: { r: 224, g: 255, b: 255 },\r\n\tlightgoldenrodyellow: { r: 250, g: 250, b: 210 },\r\n\tlightgray: { r: 211, g: 211, b: 211 },\r\n\tlightgrey: { r: 211, g: 211, b: 211 },\r\n\tlightgreen: { r: 144, g: 238, b: 144 },\r\n\tlightpink: { r: 255, g: 182, b: 193 },\r\n\tlightsalmon: { r: 255, g: 160, b: 122 },\r\n\tlightseagreen: { r: 32, g: 178, b: 170 },\r\n\tlightskyblue: { r: 135, g: 206, b: 250 },\r\n\tlightslategray: { r: 119, g: 136, b: 153 },\r\n\tlightslategrey: { r: 119, g: 136, b: 153 },\r\n\tlightsteelblue: { r: 176, g: 196, b: 222 },\r\n\tlightyellow: { r: 255, g: 255, b: 224 },\r\n\tlime: { r: 0, g: 255, b: 0 },\r\n\tlimegreen: { r: 50, g: 205, b: 50 },\r\n\tlinen: { r: 250, g: 240, b: 230 },\r\n\tmagenta: { r: 255, g: 0, b: 255 },\r\n\tmaroon: { r: 128, g: 0, b: 0 },\r\n\tmediumaquamarine: { r: 102, g: 205, b: 170 },\r\n\tmediumblue: { r: 0, g: 0, b: 205 },\r\n\tmediumorchid: { r: 186, g: 85, b: 211 },\r\n\tmediumpurple: { r: 147, g: 112, b: 219 },\r\n\tmediumseagreen: { r: 60, g: 179, b: 113 },\r\n\tmediumslateblue: { r: 123, g: 104, b: 238 },\r\n\tmediumspringgreen: { r: 0, g: 250, b: 154 },\r\n\tmediumturquoise: { r: 72, g: 209, b: 204 },\r\n\tmediumvioletred: { r: 199, g: 21, b: 133 },\r\n\tmidnightblue: { r: 25, g: 25, b: 112 },\r\n\tmintcream: { r: 245, g: 255, b: 250 },\r\n\tmistyrose: { r: 255, g: 228, b: 225 },\r\n\tmoccasin: { r: 255, g: 228, b: 181 },\r\n\tnavajowhite: { r: 255, g: 222, b: 173 },\r\n\tnavy: { r: 0, g: 0, b: 128 },\r\n\toldlace: { r: 253, g: 245, b: 230 },\r\n\tolive: { r: 128, g: 128, b: 0 },\r\n\tolivedrab: { r: 107, g: 142, b: 35 },\r\n\torange: { r: 255, g: 165, b: 0 },\r\n\torangered: { r: 255, g: 69, b: 0 },\r\n\torchid: { r: 218, g: 112, b: 214 },\r\n\tpalegoldenrod: { r: 238, g: 232, b: 170 },\r\n\tpalegreen: { r: 152, g: 251, b: 152 },\r\n\tpaleturquoise: { r: 175, g: 238, b: 238 },\r\n\tpalevioletred: { r: 219, g: 112, b: 147 },\r\n\tpapayawhip: { r: 255, g: 239, b: 213 },\r\n\tpeachpuff: { r: 255, g: 218, b: 185 },\r\n\tperu: { r: 205, g: 133, b: 63 },\r\n\tpink: { r: 255, g: 192, b: 203 },\r\n\tplum: { r: 221, g: 160, b: 221 },\r\n\tpowderblue: { r: 176, g: 224, b: 230 },\r\n\tpurple: { r: 128, g: 0, b: 128 },\r\n\trebeccapurple: { r: 102, g: 51, b: 153 },\r\n\tred: { r: 255, g: 0, b: 0 },\r\n\trosybrown: { r: 188, g: 143, b: 143 },\r\n\troyalblue: { r: 65, g: 105, b: 225 },\r\n\tsaddlebrown: { r: 139, g: 69, b: 19 },\r\n\tsalmon: { r: 250, g: 128, b: 114 },\r\n\tsandybrown: { r: 244, g: 164, b: 96 },\r\n\tseagreen: { r: 46, g: 139, b: 87 },\r\n\tseashell: { r: 255, g: 245, b: 238 },\r\n\tsienna: { r: 160, g: 82, b: 45 },\r\n\tsilver: { r: 192, g: 192, b: 192 },\r\n\tskyblue: { r: 135, g: 206, b: 235 },\r\n\tslateblue: { r: 106, g: 90, b: 205 },\r\n\tslategray: { r: 112, g: 128, b: 144 },\r\n\tslategrey: { r: 112, g: 128, b: 144 },\r\n\tsnow: { r: 255, g: 250, b: 250 },\r\n\tspringgreen: { r: 0, g: 255, b: 127 },\r\n\tsteelblue: { r: 70, g: 130, b: 180 },\r\n\ttan: { r: 210, g: 180, b: 140 },\r\n\tteal: { r: 0, g: 128, b: 128 },\r\n\tthistle: { r: 216, g: 191, b: 216 },\r\n\ttomato: { r: 255, g: 99, b: 71 },\r\n\tturquoise: { r: 64, g: 224, b: 208 },\r\n\tviolet: { r: 238, g: 130, b: 238 },\r\n\twheat: { r: 245, g: 222, b: 179 },\r\n\twhite: { r: 255, g: 255, b: 255 },\r\n\twhitesmoke: { r: 245, g: 245, b: 245 },\r\n\tyellow: { r: 255, g: 255, b: 0 },\r\n\tyellowgreen: { r: 154, g: 205, b: 50 }\r\n};\r\n\r\n\r\n/**\r\n * Tries to resolve a named color into a hex color representation.\r\n *\r\n * @ignore Exclude from docs\r\n * @param  {string}  value  Color name\r\n * @return {string}         Color\r\n * @deprecated\r\n */\r\n/*export function resolveNamedColor(value: string): Color {\r\n\treturn (<any>namedColors)[value] ? (<any>namedColors)[value] : undefined;\r\n}*/\r\n\r\n/**\r\n * Converts a proper color hex code (i.e. \"#FF5500\") or named color (i.e. \"red\")\r\n * into an {iRGB} object. If the code is not correctly formatted, an RGB of\r\n * black is returned.\r\n *\r\n * @ignore Exclude from docs\r\n * @param  {string}  color  Color code\r\n * @param  {number}  alpha  Alpha (0-1)\r\n * @return {iRGB}           RGB\r\n */\r\nexport function rgb(color: string, alpha?: number): iRGB {\r\n\r\n\t// Init return value\r\n\tlet rgb: $type.Optional<iRGB>;\r\n\r\n\t// Try resolving color format\r\n\r\n\t// Named color?\r\n\tif ((<any>namedColors)[color]) {\r\n\t\trgb = (<any>namedColors)[color];\r\n\t}\r\n\r\n\t// Hex code?\r\n\telse if (color.charAt(0) === \"#\") {\r\n\t\trgb = hexToRgb(color);\r\n\t}\r\n\r\n\t// rgb() format?\r\n\telse if (color.match(/^rgba?\\(/)) {\r\n\t\trgb = rgbaToRgb(color);\r\n\t}\r\n\r\n\t// Was not able to resolve?\r\n\tif (!rgb) {\r\n\t\trgb = { r: 0, g: 0, b: 0, a: 1 };\r\n\t}\r\n\r\n\t// Set alpha\r\n\tif ($type.hasValue(alpha)) {\r\n\t\trgb.a = alpha;\r\n\t}\r\n\r\n\treturn rgb;\r\n}\r\n\r\n/**\r\n * Converts a hex color code (i.e. \"#FF5500\") to an [[iRGB]] object.\r\n *\r\n * @ignore Exclude from docs\r\n * @param  {string}  hex  Hex color code\r\n * @return {iRGB}         RGB\r\n */\r\nexport function hexToRgb(hex: string): $type.Optional<iRGB> {\r\n\t// Expand shorthand form (e.g. \"03F\") to full form (e.g. \"0033FF\")\r\n\tlet shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\r\n\thex = hex.replace(shorthandRegex, function(m, r, g, b) {\r\n\t\treturn r + r + g + g + b + b;\r\n\t});\r\n\r\n\tlet result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n\treturn result ? {\r\n\t\tr: parseInt(result[1], 16),\r\n\t\tg: parseInt(result[2], 16),\r\n\t\tb: parseInt(result[3], 16)\r\n\t} : undefined;\r\n}\r\n\r\n/**\r\n * Converts color strings in format like `rgb()` and `rgba()` to [[iRGB]].\r\n *\r\n * @ignore Exclude from docs\r\n * @param  {string}  color  Color code\r\n * @return {iRGB}           RGB\r\n */\r\nexport function rgbaToRgb(color: string): $type.Optional<iRGB> {\r\n\r\n\t// Init\r\n\tlet matches: string[] | null;\r\n\tcolor = color.replace(/[ ]/g, \"\");\r\n\r\n\t// Try rgb() format\r\n\tif (matches = color.match(/^rgb\\(([0-9]*),([0-9]*),([0-9]*)\\)/i)) {\r\n\t\tmatches.push(\"1\");\r\n\t}\r\n\telse if (matches = color.match(/^rgba\\(([0-9]*),([0-9]*),([0-9]*),([.0-9]*)\\)/i)) {\r\n\t\t// nothing\r\n\t}\r\n\telse {\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\treturn {\r\n\t\tr: parseInt(matches[1]),\r\n\t\tg: parseInt(matches[2]),\r\n\t\tb: parseInt(matches[3]),\r\n\t\ta: parseFloat(matches[4])\r\n\t};\r\n}\r\n\r\n/**\r\n * Converts an [[iRGB]] object into a hex color code.\r\n *\r\n * @ignore Exclude from docs\r\n * @param  {iRGB}    rgb  RGB\r\n * @return {string}       Hex color code\r\n */\r\nexport function rgbToHex(rgb: iRGB): string {\r\n\treturn \"#\" + pad2(rgb.r.toString(16)) + pad2(rgb.g.toString(16)) + pad2(rgb.b.toString(16));\r\n}\r\n\r\n/**\r\n * Converts an [[iRGB]] object into its `rgb()` or `rgba()` representation.\r\n *\r\n * @ignore Exclude from docs\r\n * @param  {iRGB}    rgb  RGB\r\n * @return {string}       `rgba()` syntax\r\n */\r\nexport function rgbToRGBA(rgb: iRGB): string {\r\n\tif ($type.hasValue(rgb.a) && rgb.a !== 1) {\r\n\t\treturn \"rgba(\" + rgb.r + \",\" + rgb.g + \",\" + rgb.b + \",\" + rgb.a + \")\";\r\n\t}\r\n\telse {\r\n\t\treturn \"rgb(\" + rgb.r + \",\" + rgb.g + \",\" + rgb.b + \")\";\r\n\t}\r\n}\r\n\r\n/**\r\n * Pads a 1-digit string with a zero.\r\n *\r\n * @ignore Exclude from docs\r\n * @param  {string}  c  Input string\r\n * @return {string}     Padded string\r\n */\r\nexport function pad2(c: string): string {\r\n\treturn c.length == 1 ? \"0\" + c : \"\" + c;\r\n}\r\n\r\n/**\r\n * Returns an intermediate color between two colors based on the relative\r\n * position. Position needs to be in range between 0 and 1. Zero meaning the\r\n * resulting color will be closest to the first reference color.\r\n *\r\n * @ignore Exclude from docs\r\n * @param  {iRGB}    color1   First reference color\r\n * @param  {iRGB}    color2   Second reference color\r\n * @param  {number}  percent  Relative position (0-1)\r\n * @return {iRGB}             Interpolated color\r\n */\r\nexport function interpolate(rgb1: iRGB, rgb2: iRGB, percent: number): iRGB {\r\n\tpercent = $math.fitToRange(percent, 0, 1);\r\n\r\n\tif (rgb1) {\r\n\t\tif (rgb2) {\r\n\t\t\treturn {\r\n\t\t\t\tr: rgb1.r + Math.round((rgb2.r - rgb1.r) * percent),\r\n\t\t\t\tg: rgb1.g + Math.round((rgb2.g - rgb1.g) * percent),\r\n\t\t\t\tb: rgb1.b + Math.round((rgb2.b - rgb1.b) * percent),\r\n\t\t\t\ta: (rgb1.a || 1) + Math.round(((rgb2.a || 1) - (rgb1.a || 1)) * percent)\r\n\t\t\t};\r\n\r\n\t\t} else {\r\n\t\t\treturn rgb1;\r\n\t\t}\r\n\r\n\t} else if (rgb2) {\r\n\t\treturn rgb2;\r\n\r\n\t} else {\r\n\t\treturn rgb1;\r\n\t}\r\n}\r\n\r\n/**\r\n * Returns a color that is `percent` brighter than the reference color.\r\n *\r\n * @ignore Exclude from docs\r\n * @param  {iRGB}    color    Reference color\r\n * @param  {number}  percent  Brightness percent\r\n * @return {iRGB}             Hex code of the new color\r\n */\r\nexport function lighten(rgb: $type.Optional<iRGB>, percent: number): $type.Optional<iRGB> {\r\n\tif (rgb) {\r\n\t\treturn {\r\n\t\t\tr: Math.max(0, Math.min(255, rgb.r + getLightnessStep(rgb.r, percent))),\r\n\t\t\tg: Math.max(0, Math.min(255, rgb.g + getLightnessStep(rgb.g, percent))),\r\n\t\t\tb: Math.max(0, Math.min(255, rgb.b + getLightnessStep(rgb.b, percent))),\r\n\t\t\ta: rgb.a\r\n\t\t};\r\n\r\n\t} else {\r\n\t\t// TODO is this correct ?\r\n\t\treturn rgb;\r\n\t}\r\n};\r\n\r\n/**\r\n * Gets lightness step.\r\n *\r\n * @ignore Exclude from docs\r\n * @param  {number}  value    Value\r\n * @param  {number}  percent  Percent\r\n * @return {number}           Step\r\n */\r\nexport function getLightnessStep(value: number, percent: number): number {\r\n\tlet base = percent > 0 ? 255 - value : value;\r\n\treturn Math.round(base * percent);\r\n}\r\n\r\n/**\r\n * Returns a color that is `percent` brighter than the source `color`.\r\n *\r\n * @ignore Exclude from docs\r\n * @param  {iRGB}    color    Source color\r\n * @param  {number}  percent  Brightness percent\r\n * @return {iRGB}             New color\r\n */\r\nexport function brighten(rgb: $type.Optional<iRGB>, percent: number): $type.Optional<iRGB> {\r\n\tif (rgb) {\r\n\t\tlet base = Math.min(Math.max(rgb.r, rgb.g, rgb.b), 230);\r\n\t\t//let base = Math.max(rgb.r, rgb.g, rgb.b);\r\n\t\tlet step = getLightnessStep(base, percent);\r\n\t\treturn {\r\n\t\t\tr: Math.max(0, Math.min(255, Math.round(rgb.r + step))),\r\n\t\t\tg: Math.max(0, Math.min(255, Math.round(rgb.g + step))),\r\n\t\t\tb: Math.max(0, Math.min(255, Math.round(rgb.b + step))),\r\n\t\t\ta: rgb.a\r\n\t\t};\r\n\r\n\t} else {\r\n\t\t// TODO is this correct ?\r\n\t\treturn rgb;\r\n\t}\r\n};\r\n\r\n/**\r\n * Returns brightness step.\r\n *\r\n * @ignore Exclude from docs\r\n * @param  {number}  value    Value\r\n * @param  {number}  percent  Percent\r\n * @return {number}           Step\r\n */\r\nexport function getBrightnessStep(value: number, percent: number): number {\r\n\tlet base = 255; //percent > 0 ? 255 - value : value;\r\n\treturn Math.round(base * percent);\r\n}\r\n\r\n/**\r\n * Returns a new [[iRGB]] object based on `rgb` parameter with specific\r\n * saturation applied.\r\n *\r\n * `saturation` can be in the range of 0 (fully desaturated) to 1 (fully\r\n * saturated).\r\n *\r\n * @ignore Exclude from docs\r\n * @param  {iRGB}    color       Base color\r\n * @param  {number}  saturation  Saturation (0-1)\r\n * @return {iRGB}                New color\r\n */\r\nexport function saturate(rgb: $type.Optional<iRGB>, saturation: number): $type.Optional<iRGB> {\r\n\tif (rgb == null || saturation == 1) {\r\n\t\treturn rgb;\r\n\t}\r\n\r\n\tlet hsl = rgbToHsl(rgb);\r\n\thsl.s = saturation;\r\n\treturn hslToRgb(hsl);\r\n}\r\n\r\n/*\r\n// not used\r\nexport function rgbToMatrix(rgb: iRGB): string {\r\n\tlet r = $type.toText($math.round((rgb.r || 0) / 255, 10));\r\n\tlet g = $type.toText($math.round((rgb.g || 0) / 255, 10));\r\n\tlet b = $type.toText($math.round((rgb.b || 0) / 255, 10));\r\n\tlet a = $type.toText(rgb.a || 1);\r\n\treturn\t      r + \" 0 0 0 0\" +\r\n\t\t\t\t\t\" 0 \" + g + \" 0 0 0\" +\r\n\t\t\t\t\t\" 0 0 \" + b + \" 0 0\" +\r\n\t\t\t\t\t\" 0 0 0 \" + a + \" 0\";\r\n}\r\n*/\r\n\r\n/**\r\n * The functions below are taken and adapted from Garry Tan's blog post:\r\n * http://axonflux.com/handy-rgb-to-hsl-and-rgb-to-hsv-color-model-c\r\n *\r\n * The further attributions go mjijackson.com, which now seems to be defunct.\r\n */\r\n\r\n/**\r\n * Converts an HSL color value to RGB. Conversion formula\r\n * adapted from http://en.wikipedia.org/wiki/HSL_color_space.\r\n * Assumes h, s, and l are contained in the set [0, 1] and\r\n * returns r, g, and b in the set [0, 255].\r\n *\r\n * Function adapted from:\r\n * http://axonflux.com/handy-rgb-to-hsl-and-rgb-to-hsv-color-model-c\r\n *\r\n * @ignore Exclude from docs\r\n * @param   {number}  h       The hue\r\n * @param   {number}  s       The saturation\r\n * @param   {number}  l       The lightness\r\n * @return  {Array}           The RGB representation\r\n */\r\nexport function hslToRgb(color: iHSL): iRGB {\r\n\tlet r, g, b;\r\n\tlet h = color.h;\r\n\tlet s = color.s;\r\n\tlet l = color.l;\r\n\r\n\tif (s == 0) {\r\n\t\tr = g = b = l; // achromatic\r\n\t} else {\r\n\t\tlet hue2rgb = function hue2rgb(p: number, q: number, t: number) {\r\n\t\t\tif (t < 0) t += 1;\r\n\t\t\tif (t > 1) t -= 1;\r\n\t\t\tif (t < 1 / 6) return p + (q - p) * 6 * t;\r\n\t\t\tif (t < 1 / 2) return q;\r\n\t\t\tif (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\r\n\t\t\treturn p;\r\n\t\t}\r\n\r\n\t\tlet q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n\t\tlet p = 2 * l - q;\r\n\t\tr = hue2rgb(p, q, h + 1 / 3);\r\n\t\tg = hue2rgb(p, q, h);\r\n\t\tb = hue2rgb(p, q, h - 1 / 3);\r\n\t}\r\n\r\n\treturn {\r\n\t\tr: Math.round(r * 255),\r\n\t\tg: Math.round(g * 255),\r\n\t\tb: Math.round(b * 255)\r\n\t};\r\n}\r\n\r\n/**\r\n * Converts an RGB color value to HSL. Conversion formula\r\n * adapted from http://en.wikipedia.org/wiki/HSL_color_space.\r\n * Assumes r, g, and b are contained in the set [0, 255] and\r\n * returns h, s, and l in the set [0, 1].\r\n *\r\n * Function adapted from:\r\n * http://axonflux.com/handy-rgb-to-hsl-and-rgb-to-hsv-color-model-c\r\n *\r\n * @ignore Exclude from docs\r\n * @param   {number}  r       The red color value\r\n * @param   {number}  g       The green color value\r\n * @param   {number}  b       The blue color value\r\n * @return  {Array}           The HSL representation\r\n */\r\nexport function rgbToHsl(color: iRGB): iHSL {\r\n\tlet r = color.r / 255;\r\n\tlet g = color.g / 255;\r\n\tlet b = color.b / 255;\r\n\tlet max = Math.max(r, g, b);\r\n\tlet min = Math.min(r, g, b);\r\n\tlet h = 0;\r\n\tlet s = 0;\r\n\tlet l = (max + min) / 2;\r\n\r\n\tif (max === min) {\r\n\t\th = s = 0; // achromatic\r\n\r\n\t} else {\r\n\t\tlet d = max - min;\r\n\r\n\t\ts = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n\r\n\t\tswitch (max) {\r\n\t\t\tcase r: h = (g - b) / d + (g < b ? 6 : 0); break;\r\n\t\t\tcase g: h = (b - r) / d + 2; break;\r\n\t\t\tcase b: h = (r - g) / d + 4; break;\r\n\t\t}\r\n\r\n\t\th /= 6;\r\n\t}\r\n\r\n\treturn {\r\n\t\th: h,\r\n\t\ts: s,\r\n\t\tl: l\r\n\t};\r\n}\r\n\r\n/**\r\n * Converts an RGB color value to HSV. Conversion formula\r\n * adapted from http://en.wikipedia.org/wiki/HSV_color_space.\r\n * Assumes r, g, and b are contained in the set [0, 255] and\r\n * returns h, s, and v in the set [0, 1].\r\n *\r\n * @ignore Exclude from docs\r\n * @param   Number  r       The red color value\r\n * @param   Number  g       The green color value\r\n * @param   Number  b       The blue color value\r\n * @return  Array           The HSV representation\r\n */\r\nexport function rgbToHsv(color: iRGB): iHSV {\r\n\tlet r = color.r / 255;\r\n\tlet g = color.g / 255;\r\n\tlet b = color.b / 255;\r\n\tlet max = Math.max(r, g, b), min = Math.min(r, g, b);\r\n\tlet h = 0;\r\n\tlet s = 0;\r\n\tlet v = max;\r\n\r\n\tlet d = max - min;\r\n\ts = max == 0 ? 0 : d / max;\r\n\r\n\tif (max == min) {\r\n\t\th = 0; // achromatic\r\n\r\n\t} else {\r\n\t\tswitch (max) {\r\n\t\t\tcase r: h = (g - b) / d + (g < b ? 6 : 0); break;\r\n\t\t\tcase g: h = (b - r) / d + 2; break;\r\n\t\t\tcase b: h = (r - g) / d + 4; break;\r\n\t\t}\r\n\t\th /= 6;\r\n\t}\r\n\r\n\treturn {\r\n\t\th: h,\r\n\t\ts: s,\r\n\t\tv: v\r\n\t};\r\n}\r\n\r\n/**\r\n * Converts an HSV color value to RGB. Conversion formula\r\n * adapted from http://en.wikipedia.org/wiki/HSV_color_space.\r\n * Assumes h, s, and v are contained in the set [0, 1] and\r\n * returns r, g, and b in the set [0, 255].\r\n *\r\n * @ignore Exclude from docs\r\n * @param   Number  h       The hue\r\n * @param   Number  s       The saturation\r\n * @param   Number  v       The value\r\n * @return  Array           The RGB representation\r\n */\r\nexport function hsvToRgb(color: iHSV): iRGB {\r\n\tlet r = 0;\r\n\tlet g = 0;\r\n\tlet b = 0;\r\n\tlet h = color.h;\r\n\tlet s = color.s;\r\n\tlet v = color.v;\r\n\r\n\tlet i = Math.floor(h * 6);\r\n\tlet f = h * 6 - i;\r\n\tlet p = v * (1 - s);\r\n\tlet q = v * (1 - f * s);\r\n\tlet t = v * (1 - (1 - f) * s);\r\n\r\n\tswitch (i % 6) {\r\n\t\tcase 0: r = v, g = t, b = p; break;\r\n\t\tcase 1: r = q, g = v, b = p; break;\r\n\t\tcase 2: r = p, g = v, b = t; break;\r\n\t\tcase 3: r = p, g = q, b = v; break;\r\n\t\tcase 4: r = t, g = p, b = v; break;\r\n\t\tcase 5: r = v, g = p, b = q; break;\r\n\t}\r\n\r\n\treturn {\r\n\t\tr: Math.round(r * 255),\r\n\t\tg: Math.round(g * 255),\r\n\t\tb: Math.round(b * 255)\r\n\t};\r\n}\r\n\r\n/**\r\n * Returns `true` if color is \"light\". Useful indetermining which contrasting\r\n * color to use for elements over this color. E.g.: you would want to use\r\n * black text over light background, and vice versa.\r\n *\r\n * @ignore Exclude from docs\r\n * @param  {iRGB}     color  Source color\r\n * @return {boolean}         Light?\r\n */\r\nexport function isLight(color: iRGB): boolean {\r\n\treturn ((color.r * 299) + (color.g * 587) + (color.b * 114)) / 1000 >= 128;\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * COLOR CONVERSION\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Represents an interface for an object that represents an RGB color.\r\n */\r\nexport interface iRGB {\r\n\tr: number;\r\n\tg: number;\r\n\tb: number;\r\n\ta?: number;\r\n}\r\n\r\n/**\r\n * Represents an interface for an object that represents an HSL color.\r\n */\r\nexport interface iHSL {\r\n\th: number;\r\n\ts: number;\r\n\tl: number;\r\n\ta?: number;\r\n}\r\n\r\n/**\r\n * Represents an interface for an object that represents an HSV color.\r\n */\r\nexport interface iHSV {\r\n\th: number;\r\n\ts: number;\r\n\tv: number;\r\n\ta?: number;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/utils/Colors.ts","export interface Options {\n\t/**\n\t * Console output enabled.\n\t *\n\t * @type {boolean}\n\t */\n\tverbose: boolean;\n\n\t/**\n\t * @ignore\n\t */\n\tcommercialLicense: boolean;\n\n\t/**\n\t * amCharts will add `class` property to some elements. All those class names\n\t * will be prefixed by `classNamePrefix`.\n\t *\n\t * @type {string}\n\t */\n\tclassNamePrefix: string;\n\n\t/**\n\t * Normally, the chart will create its elements without any `className`\n\t * attributes.\n\t *\n\t * If you set this to `true`, it will set class names that will reflect\n\t * the actual class this the SVG element corresponds to.\n\t *\n\t * The className will contain class prefixed with `amcharts-`. (prefix is\n\t * configurable via `classNamePrefix`)\n\t *\n\t * E.g. `\"amcharts-button\"`.\n\t *\n\t * @default false\n\t * @type {boolean}\n\t */\n\tautoSetClassName: boolean;\n}\n\nexport const options: Options = {\n\tverbose: true,\n\tcommercialLicense: false,\n\tclassNamePrefix: \"amcharts-\",\n\tautoSetClassName: false\n};\n\n\n\n// WEBPACK FOOTER //\n// ../../../../src/.internal/core/Options.ts","/**\r\n * Mouse-related functionality\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { IStyleProperty } from \"../defs/IStyleProperty\";\r\n\r\n/**\r\n * Defines static methods that hold style list for various mouse cursor styles,\r\n * maintaining browser compatibility.\r\n */\r\nexport class MouseCursorStyle {\r\n\r\n\t/**\r\n\t * Styles for \"grab\" mouse cursor.\r\n\t * \r\n\t * @type {Array<IStyleProperty>}\r\n\t */\r\n\tstatic grab: Array<IStyleProperty> = [{\r\n\t\t\"property\": \"cursor\",\r\n\t\t\"value\": \"move\"\r\n\t}, {\r\n\t\t\"property\": \"cursor\",\r\n\t\t\"value\": \"grab\"\r\n\t}, {\r\n\t\t\"property\": \"cursor\",\r\n\t\t\"value\": \"-moz-grab\"\r\n\t}, {\r\n\t\t\"property\": \"cursor\",\r\n\t\t\"value\": \"-webkit-grab\"\r\n\t}];\r\n\r\n\t/**\r\n\t * Styles for \"grabbing\" mouse cursor.\r\n\t * \r\n\t * @type {Array<IStyleProperty>}\r\n\t */\r\n\tstatic grabbing: Array<IStyleProperty> = [{\r\n\t\t\"property\": \"cursor\",\r\n\t\t\"value\": \"move\"\r\n\t}, {\r\n\t\t\"property\": \"cursor\",\r\n\t\t\"value\": \"grabbing\"\r\n\t}, {\r\n\t\t\"property\": \"cursor\",\r\n\t\t\"value\": \"-moz-grabbing\"\r\n\t}, {\r\n\t\t\"property\": \"cursor\",\r\n\t\t\"value\": \"-webkit-grabbing\"\r\n\t}];\r\n\r\n\t/**\r\n\t * Styles for \"pointer\" mouse cursor. (usually used for links)\r\n\t * \r\n\t * @type {Array<IStyleProperty>}\r\n\t */\r\n\tstatic pointer: Array<IStyleProperty> = [{\r\n\t\t\"property\": \"cursor\",\r\n\t\t\"value\": \"pointer\"\r\n\t}];\r\n\r\n\t/**\r\n\t * Styles for default mouse cursor. (browser determines style)\r\n\t * \r\n\t * @type {Array<IStyleProperty>}\r\n\t */\r\n\tstatic default: Array<IStyleProperty> = [{\r\n\t\t\"property\": \"cursor\",\r\n\t\t\"value\": \"default\"\r\n\t}];\r\n\r\n\t/**\r\n\t * Styles for horizontal bi-directional resize mouse cursor.\r\n\t * \r\n\t * @type {Array<IStyleProperty>}\r\n\t */\r\n\tstatic horizontalResize: Array<IStyleProperty> = [{\r\n\t\t\"property\": \"cursor\",\r\n\t\t\"value\": \"ew-resize\"\r\n\t}];\r\n\r\n\t/**\r\n\t * Styles for vertical bi-directional mouse cursor.\r\n\t * \r\n\t * @type {Array<IStyleProperty>}\r\n\t */\r\n\tstatic verticalResize: Array<IStyleProperty> = [{\r\n\t\t\"property\": \"cursor\",\r\n\t\t\"value\": \"ns-resize\"\r\n\t}];\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/interaction/Mouse.ts","/**\r\n * Line drawing functionality.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Sprite, ISpriteProperties, ISpriteAdapters, ISpriteEvents, SpriteEventDispatcher, AMEvent } from \"../Sprite\";\r\nimport { color } from \"../utils/Color\";\r\nimport { LinearGradient } from \"../rendering/fills/LinearGradient\";\r\nimport { registry } from \"../Registry\";\r\nimport * as $type from \"../utils/Type\";\r\nimport * as $math from \"../utils/Math\";\r\nimport { IPoint, IOrientationPoint } from \"../defs/IPoint\";\r\n\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[Line]].\r\n */\r\nexport interface ILineProperties extends ISpriteProperties {\r\n\r\n\t/**\r\n\t * X coordinate of first end.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tx1?: number;\r\n\r\n\t/**\r\n\t * Y coordinate of first end.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\ty1?: number;\r\n\r\n\t/**\r\n\t * X coordinate of second end.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tx2?: number;\r\n\r\n\t/**\r\n\t * Y coordinate of second end.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\ty2?: number;\r\n\r\n}\r\n\r\n/**\r\n * Defines events for [[Line]].\r\n */\r\nexport interface ILineEvents extends ISpriteEvents { }\r\n\r\n/**\r\n * Defines adapters for [[Line]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface ILineAdapters extends ISpriteAdapters, ILineProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Draws a line.\r\n *\r\n * @see {@link ILineEvents} for a list of available events\r\n * @see {@link ILineAdapters} for a list of available Adapters\r\n */\r\nexport class Line extends Sprite {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ILineProperties}\r\n\t */\r\n\tpublic _properties!: ILineProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ILineAdapters}\r\n\t */\r\n\tpublic _adapter!: ILineAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {ILineEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: ILineEvents;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"Line\";\r\n\t\tthis.element = this.paper.add(\"line\");\r\n\t\tthis.fill = color(); //\"none\";\r\n\r\n\t\tthis.x1 = 0;\r\n\t\tthis.y1 = 0;\r\n\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Draws the line.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic draw(): void {\r\n\t\tsuper.draw();\r\n\t\tif (this.x1 == this.x2 || this.y1 == this.y2) {\r\n\t\t\tthis.pixelPerfect = true;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.pixelPerfect = false;\r\n\t\t}\r\n\r\n\t\tthis.x1 = this.x1;\r\n\t\tthis.x2 = this.x2;\r\n\r\n\t\tthis.y1 = this.y1;\r\n\t\tthis.y2 = this.y2;\r\n\t}\r\n\r\n\t/**\r\n\t * X coordinate of first end.\r\n\t *\r\n\t * @param {number} value X\r\n\t */\r\n\tpublic set x1(value: number) {\r\n\t\tif (!$type.isNumber(value)) {\r\n\t\t\tvalue = 0;\r\n\t\t}\r\n\t\tlet delta = 0;\r\n\t\tif (this.pixelPerfect && this.stroke instanceof LinearGradient) {\r\n\t\t\tdelta = 0.00001;\r\n\t\t}\r\n\r\n\t\tthis.setPropertyValue(\"x1\", value, true);\r\n\t\tthis.element.attr({ \"x1\": value + delta });\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} X\r\n\t */\r\n\tpublic get x1(): number {\r\n\t\treturn this.getPropertyValue(\"x1\");\r\n\t}\r\n\r\n\t/**\r\n\t * X coordinate of second end.\r\n\t *\r\n\t * @param {number} value X\r\n\t */\r\n\tpublic set x2(value: number) {\r\n\t\tif (!$type.isNumber(value)) {\r\n\t\t\tvalue = 0;\r\n\t\t}\r\n\t\tthis.setPropertyValue(\"x2\", value, true);\r\n\t\tthis.element.attr({ \"x2\": value });\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} X\r\n\t */\r\n\tpublic get x2(): number {\r\n\t\tlet value = this.getPropertyValue(\"x2\");\r\n\t\tif (!$type.isNumber(value)) {\r\n\t\t\tvalue = this.pixelWidth;\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\t/**\r\n\t * Y coordinate of first end.\r\n\t *\r\n\t * @param {number} value Y\r\n\t */\r\n\tpublic set y1(value: number) {\r\n\t\tif (!$type.isNumber(value)) {\r\n\t\t\tvalue = 0;\r\n\t\t}\r\n\r\n\t\tlet delta = 0;\r\n\t\tif (this.pixelPerfect && this.stroke instanceof LinearGradient) {\r\n\t\t\tdelta = 0.00001;\r\n\t\t}\r\n\r\n\t\tthis.setPropertyValue(\"y1\", value, true);\r\n\t\tthis.element.attr({ \"y1\": value + delta });\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Y\r\n\t */\r\n\tpublic get y1(): number {\r\n\t\treturn this.getPropertyValue(\"y1\");\r\n\t}\r\n\r\n\t/**\r\n\t * Y coordinate of second end.\r\n\t *\r\n\t * @param {number} value Y\r\n\t */\r\n\tpublic set y2(value: number) {\r\n\t\tif (!$type.isNumber(value)) {\r\n\t\t\tvalue = 0;\r\n\t\t}\r\n\t\tthis.setPropertyValue(\"y2\", value, true);\r\n\t\tthis.element.attr({ \"y2\": value });\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Y\r\n\t */\r\n\tpublic get y2(): number {\r\n\t\tlet value = this.getPropertyValue(\"y2\");\r\n\t\tif (!$type.isNumber(value)) {\r\n\t\t\tvalue = this.pixelHeight;\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\t/**\r\n\t * Converts relative position along the line (0-1) into pixel coordinates.\r\n\t *\r\n\t * @param  {number}             position  Position (0-1)\r\n\t * @return {IOrientationPoint}            Coordinates\r\n\t */\r\n\tpublic positionToPoint(position: number): IOrientationPoint {\t\t\r\n\t\tlet point1 = { x: this.x1, y: this.y1 };\r\n\t\tlet point2 = { x: this.x2, y: this.y2 };\r\n\t\tlet point = $math.getMidPoint(point1, point2, position);\r\n\t\tlet angle = $math.getAngle(point1, point2);\r\n\r\n\t\treturn {x:point.x, y:point.y, angle:angle};\r\n\t}\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"Line\"] = Line;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/elements/Line.ts","/**\n * ============================================================================\n * IMPORTS\n * ============================================================================\n * @hidden\n */\nimport { registry } from \"../Registry\";\nimport * as $path from \"./Path\";\nimport * as $array from \"../utils/Array\";\nimport * as $utils from \"../utils/Utils\";\nimport * as $math from \"../utils/Math\";\nimport { IPoint } from \"../defs/IPoint\";\n\n\n/**\n * ============================================================================\n * PATH FUNCTIONS\n * ============================================================================\n * @hidden\n */\n\n/**\n * @ignore Exclude from docs\n * @todo Description\n */\nexport interface ISmoothing {\n\tsmooth(points: Array<IPoint>): string;\n}\n\n/**\n * [sign description]\n *\n * @ignore Exclude from docs\n * @todo Description\n * @todo Move this someplace else\n * @param {number} x [description]\n */\nfunction sign(x: number): -1 | 1 {\n\treturn x < 0 ? -1 : 1;\n}\n\n/**\n * [slope2 description]\n *\n * @ignore Exclude from docs\n * @todo Description\n * @param  {number} x0 [description]\n * @param  {number} x1 [description]\n * @param  {number} y0 [description]\n * @param  {number} y1 [description]\n * @param  {number} t  [description]\n * @return {number}    [description]\n */\nfunction slope2(x0: number, x1: number, y0: number, y1: number, t: number): number {\n\tconst h = x1 - x0;\n\treturn h ? (3 * (y1 - y0) / h - t) / 2 : t;\n}\n\n/**\n * [slope3 description]\n *\n * @ignore Exclude from docs\n * @todo Description\n * @param  {number} x0 [description]\n * @param  {number} x1 [description]\n * @param  {number} y0 [description]\n * @param  {number} y1 [description]\n * @param  {number} x2 [description]\n * @param  {number} y2 [description]\n * @return {number}    [description]\n */\nfunction slope3(x0: number, x1: number, y0: number, y1: number, x2: number, y2: number): number {\n\tconst h0 = x1 - x0;\n\tconst h1 = x2 - x1;\n\tconst s0 = (y1 - y0) / (h0 || h1 < 0 && -0);\n\tconst s1 = (y2 - y1) / (h1 || h0 < 0 && -0);\n\tconst p = (s0 * h1 + s1 * h0) / (h0 + h1);\n\treturn (sign(s0) + sign(s1)) * Math.min(Math.abs(s0), Math.abs(s1), 0.5 * Math.abs(p)) || 0;\n}\n\n/**\n * @ignore Exclude from docs\n * @todo Description\n */\nexport class Tension implements ISmoothing {\n\n\t/**\n\t * [_tensionX description]\n\t *\n\t * @todo Description\n\t * @type {number}\n\t */\n\tprivate _tensionX: number;\n\n\t/**\n\t * [_tensionY description]\n\t *\n\t * @todo Description\n\t * @type {number}\n\t */\n\tprivate _tensionY: number;\n\n\t/**\n\t * Constructor.\n\t *\n\t * @param {number} tensionX [description]\n\t * @param {number} tensionY [description]\n\t */\n\tconstructor(tensionX: number, tensionY: number) {\n\t\tthis._tensionX = tensionX;\n\t\tthis._tensionY = tensionY;\n\t}\n\n\t/**\n\t * [smooth description]\n\t *\n\t * @ignore Exclude from docs\n\t * @todo Description\n\t * @param  {Array<IPoint>}  points  [description]\n\t * @return {string}                 [description]\n\t */\n\tpublic smooth(points: Array<IPoint>): string {\n\t\tlet tensionX = this._tensionX;\n\t\tlet tensionY = this._tensionY;\n\n\t\tif (points.length < 3 || (tensionX >= 1 && tensionY >= 1)) {\n\t\t\treturn $path.polyline(points);\n\t\t}\n\n\t\tlet first: IPoint = points[0];\n\t\tlet last: IPoint = points[points.length - 1];\n\n\t\tlet closed: boolean = false;\n\n\t\tif ($math.round(first.x, 3) == $math.round(last.x) && $math.round(first.y) == $math.round(last.y)) {\n\t\t\tclosed = true;\n\t\t}\n\n\t\t// Can't moveTo here, as it wont be possible to have fill then.\n\t\tlet path: string = \"\";\n\n\t\tfor (let i: number = 0; i < points.length - 1; i++) {\n\t\t\tlet p0: IPoint = points[i - 1];\n\n\t\t\tlet p1: IPoint = points[i];\n\n\t\t\tlet p2: IPoint = points[i + 1];\n\n\t\t\tlet p3: IPoint = points[i + 2];\n\n\t\t\tif (i === 0) {\n\t\t\t\tif (closed) {\n\t\t\t\t\tp0 = points[points.length - 2];\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tp0 = points[i];\n\t\t\t\t}\n\t\t\t} else if (i == points.length - 2) {\n\t\t\t\tif (closed) {\n\t\t\t\t\tp3 = points[1];\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tp3 = points[i + 1];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet controlPointA: IPoint = $math.getCubicControlPointA(p0, p1, p2, p3, tensionX, tensionY);\n\t\t\tlet controlPointB: IPoint = $math.getCubicControlPointB(p0, p1, p2, p3, tensionX, tensionY);\n\n\t\t\tpath += $path.cubicCurveTo(p2, controlPointA, controlPointB);\n\t\t}\n\n\t\treturn path;\n\t}\n}\n\n\n/**\n * Returns a waved line SVG path between two points.\n *\n * @ignore Exclude from docs\n * @param  {IPoint}   point1            Starting point\n * @param  {IPoint}   point2            Ending point\n * @param  {number}   waveLength        Wave length\n * @param  {number}   waveHeight        Wave height\n * @param  {boolean}  adjustWaveLength  Adjust wave length based on the actual line length\n * @return {string}                     SVG path\n */\nexport function wavedLine(point1: IPoint, point2: IPoint, waveLength: number, waveHeight: number, tension: number, adjustWaveLength?: boolean): string {\n\n\tlet x1: number = point1.x;\n\tlet y1: number = point1.y;\n\n\tlet x2: number = point2.x;\n\tlet y2: number = point2.y;\n\n\tlet distance: number = $math.getDistance(point1, point2);\n\n\tif (adjustWaveLength) {\n\t\twaveLength = distance / Math.round(distance / waveLength);\n\t}\n\n\tlet d: string = registry.getCache($utils.stringify([\"wavedLine\", point1.x, point2.x, point1.y, point2.y, waveLength, waveHeight]));\n\tif (!d) {\n\t\tif (distance > 0) {\n\t\t\tlet angle: number = Math.atan2(y2 - y1, x2 - x1);\n\n\t\t\tlet cos: number = Math.cos(angle);\n\t\t\tlet sin: number = Math.sin(angle);\n\n\t\t\tlet waveLengthX: number = waveLength * cos;\n\t\t\tlet waveLengthY: number = waveLength * sin;\n\n\t\t\tif (waveLength <= 1 || waveHeight <= 1) {\n\t\t\t\td = $path.lineTo(point2);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlet halfWaveCount: number = Math.round(2 * distance / waveLength);\n\n\t\t\t\tlet points: IPoint[] = [];\n\t\t\t\tlet sign: number = 1;\n\n\t\t\t\tif (x2 < x1) {\n\t\t\t\t\tsign *= -1;\n\t\t\t\t}\n\n\t\t\t\tif (y2 < y1) {\n\t\t\t\t\tsign *= -1;\n\t\t\t\t}\n\n\t\t\t\tfor (let i: number = 0; i <= halfWaveCount; i++) {\n\t\t\t\t\tsign *= -1;\n\t\t\t\t\tlet x: number = x1 + i * waveLengthX / 2 + sign * waveHeight / 2 * sin;\n\t\t\t\t\tlet y: number = y1 + i * waveLengthY / 2 - sign * waveHeight / 2 * cos;\n\t\t\t\t\tpoints.push({ x: x, y: y });\n\t\t\t\t}\n\n\t\t\t\td = new Tension(tension, tension).smooth(points);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\td = \"\";\n\t\t}\n\n\t\tregistry.setCache($utils.stringify([\"wavedLine\", point1.x, point2.x, point1.y, point2.y, waveLength, waveHeight]), d);\n\t}\n\n\treturn d;\n}\n\n\n/**\n * @ignore Exclude from docs\n * @todo Description\n */\nexport class Basis implements ISmoothing {\n\n\t/**\n\t * [_closed description]\n\t *\n\t * @ignore Exclude from docs\n\t * @todo Description\n\t * @type {boolean}\n\t */\n\tprivate _closed: boolean;\n\n\t/**\n\t * Constructor.\n\t *\n\t * @param {object}  info  [description]\n\t */\n\tconstructor(info: { closed: boolean }) {\n\t\tthis._closed = info.closed;\n\t}\n\n\t/**\n\t * [smooth description]\n\t *\n\t * @ignore Exclude from docs\n\t * @todo Description\n\t * @param  {Array<IPoint>}  points  [description]\n\t * @return {string}                 [description]\n\t */\n\tpublic smooth(points: Array<IPoint>): string {\n\t\tlet x0: number = NaN;\n\t\tlet x1: number = NaN;\n\t\tlet x2: number = NaN;\n\t\tlet x3: number = NaN;\n\t\tlet x4: number = NaN;\n\t\tlet y0: number = NaN;\n\t\tlet y1: number = NaN;\n\t\tlet y2: number = NaN;\n\t\tlet y3: number = NaN;\n\t\tlet y4: number = NaN;\n\t\tlet point: number = 0;\n\n\t\tlet output = \"\";\n\n\t\tconst pushCurve = (x: number, y: number): void => {\n\t\t\toutput += $path.cubicCurveTo(\n\t\t\t\t{\n\t\t\t\t\tx: (x0 + 4 * x1 + x) / 6\n\t\t\t\t\t, y: (y0 + 4 * y1 + y) / 6\n\t\t\t\t},\n\n\t\t\t\t{\n\t\t\t\t\tx: (2 * x0 + x1) / 3\n\t\t\t\t\t, y: (2 * y0 + y1) / 3\n\t\t\t\t},\n\n\t\t\t\t{\n\t\t\t\t\tx: (x0 + 2 * x1) / 3\n\t\t\t\t\t, y: (y0 + 2 * y1) / 3\n\t\t\t\t}\n\t\t\t);\n\t\t};\n\n\t\tconst pushPoint = ({ x, y }: IPoint): void => {\n\t\t\tswitch (point) {\n\t\t\t\tcase 0:\n\t\t\t\t\tpoint = 1;\n\n\t\t\t\t\tif (this._closed) {\n\t\t\t\t\t\tx2 = x;\n\t\t\t\t\t\ty2 = y;\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\toutput += $path.lineTo({ x, y });\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 1:\n\t\t\t\t\tpoint = 2;\n\n\t\t\t\t\tif (this._closed) {\n\t\t\t\t\t\tx3 = x;\n\t\t\t\t\t\ty3 = y;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2:\n\t\t\t\t\tpoint = 3;\n\n\t\t\t\t\tif (this._closed) {\n\t\t\t\t\t\tx4 = x;\n\t\t\t\t\t\ty4 = y;\n\t\t\t\t\t\toutput += $path.moveTo({ x: (x0 + 4 * x1 + x) / 6, y: (y0 + 4 * y1 + y) / 6 });\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\toutput += $path.lineTo({ x: (5 * x0 + x1) / 6, y: (5 * y0 + y1) / 6 });\n\t\t\t\t\t\t// fall-through\n\t\t\t\t\t}\n\n\t\t\t\tdefault:\n\t\t\t\t\tpushCurve(x, y);\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tx0 = x1;\n\t\t\tx1 = x;\n\t\t\ty0 = y1;\n\t\t\ty1 = y;\n\t\t};\n\n\t\t$array.each(points, pushPoint);\n\n\t\tif (this._closed) {\n\t\t\tswitch (point) {\n\t\t\t\tcase 1:\n\t\t\t\t\toutput += $path.moveTo({ x: x2, y: y2 });\n\t\t\t\t\toutput += $path.closePath();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t\toutput += $path.moveTo({ x: (x2 + 2 * x3) / 3, y: (y2 + 2 * y3) / 3 });\n\t\t\t\t\toutput += $path.lineTo({ x: (x3 + 2 * x2) / 3, y: (y3 + 2 * y2) / 3 });\n\t\t\t\t\toutput += $path.closePath();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3:\n\t\t\t\t\tpushPoint({ x: x2, y: y2 });\n\t\t\t\t\tpushPoint({ x: x3, y: y3 });\n\t\t\t\t\tpushPoint({ x: x4, y: y4 });\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t} else {\n\t\t\tswitch (point) {\n\t\t\t\tcase 3:\n\t\t\t\t\tpushCurve(x1, y1);\n\t\t\t\t// fall-through\n\t\t\t\tcase 2:\n\t\t\t\t\toutput += $path.lineTo({ x: x1, y: y1 });\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\toutput += $path.closePath();\n\t\t}\n\n\t\treturn output;\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/rendering/Smoothing.ts","/**\r\n * Functionality for any series-based elements, like Line Series (graphs),\r\n * Pie slice lists, etc.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Component, IComponentProperties, IComponentDataFields, IComponentAdapters, IComponentEvents } from \"../../core/Component\";\r\nimport { AxisDataItem } from \"../axes/Axis\";\r\nimport { Sprite, SpriteEventDispatcher, AMEvent } from \"../../core/Sprite\";\r\nimport { List, ListTemplate, IListEvents, ListDisposer } from \"../../core/utils/List\";\r\nimport { OrderedList, OrderedListTemplate } from \"../../core/utils/SortedList\";\r\nimport { Dictionary } from \"../../core/utils/Dictionary\";\r\nimport { DataItem, IDataItemEvents } from \"../../core/DataItem\";\r\nimport { Container } from \"../../core/Container\";\r\nimport { SerialChart } from \"../types/SerialChart\";\r\nimport { Label } from \"../../core/elements/Label\";\r\nimport { Axis } from \"../axes/Axis\";\r\nimport { Tooltip } from \"../../core/elements/Tooltip\";\r\nimport { Bullet } from \"../elements/Bullet\";\r\nimport { ILegendItem, LegendDataItem, LegendSettings } from \"../Legend\";\r\nimport { Animation } from \"../../core/utils/Animation\";\r\nimport { options } from \"../../core/Options\";\r\nimport { Ordering } from \"../../core/utils/Order\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { Color } from \"../../core/utils/Color\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\nimport * as $ease from \"../../core/utils/Ease\";\r\nimport * as $utils from \"../../core/utils/Utils\";\r\nimport * as $object from \"../../core/utils/Object\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport * as $array from \"../../core/utils/Array\";\r\nimport * as $colors from \"../../core/utils/Colors\";\r\n\r\n\r\nexport interface IHeatRule {\r\n\ttarget: Sprite;\r\n\tproperty: string;\r\n\tmin: any;\r\n\tmax: any;\r\n\tdataField?: string;\r\n\tminValue?: number;\r\n\tmaxValue?: number;\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines a [[DataItem]] for [[Series]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nexport class SeriesDataItem extends DataItem {\r\n\r\n\t/**\r\n\t * Related item's width in pixels.\r\n\t *\r\n\t * This is passed to bullets so that we'd know if the bullet (LabelBullet)\r\n\t * fits to max width/height.\r\n\t *\r\n\t * At the moment this is only used by column series.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {number}\r\n\t */\r\n\tpublic itemWidth: number;\r\n\r\n\t/**\r\n\t * Related item's height in pixels.\r\n\t *\r\n\t * This is passed to bullets so that we'd know if the bullet (LabelBullet)\r\n\t * fits to max width/height.\r\n\t *\r\n\t * At the moment this is only used by column series.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {number}\r\n\t */\r\n\tpublic itemHeight: number;\r\n\r\n\t/**\r\n\t * A dictionary of data items bullets, where key is uid of a bullet template.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo review description\r\n\t * @type {Dictionary}\r\n\t */\r\n\tpublic bullets = new Dictionary<string, Bullet>();\r\n\r\n\t/**\r\n\t * Defines a type of [[Component]] this data item is used for.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Series}\r\n\t */\r\n\tpublic _component!: Series;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"SeriesDataItem\";\r\n\t\t//@todo Should we make `bullets` list disposable?\r\n\t\t//this._disposers.push(new DictionaryDisposer(this.bullets));\r\n\r\n\t\tthis.values.value = {};\r\n\t\tthis.values.value = {};\r\n\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * data items's numeric value.\r\n\t *\r\n\t * @param {number}  value  Value\r\n\t */\r\n\tpublic set value(value: number) {\r\n\t\tthis.setValue(\"value\", value);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Value\r\n\t */\r\n\tpublic get value(): number {\r\n\t\treturn this.values.value.value;\r\n\t}\r\n\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines data fields for [[Series]].\r\n */\r\nexport interface ISeriesDataFields extends IComponentDataFields {\r\n\t/**\r\n\t * Name of the field in data that holds numeric value.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tvalue?: string;\r\n}\r\n\r\n/**\r\n * Defines properties for [[Series]].\r\n */\r\nexport interface ISeriesProperties extends IComponentProperties {\r\n\r\n\t/**\r\n\t * Minimal distance between two adjacent bullets in pixels.\r\n\t *\r\n\t * If bullet is closer, it will be skipped and not shown.\r\n\t *\r\n\t * This allows to avoid crammed up graphs wil a lot of bullets.\r\n\t *\r\n\t * @default 50\r\n\t * @type {number}\r\n\t */\r\n\tminBulletDistance?: number;\r\n\r\n\t/**\r\n\t * Should series be hidden in chart's legend?\r\n\t * @type {boolean}\r\n\t */\r\n\thiddenInLegend?: boolean;\r\n}\r\n\r\n/**\r\n * Defines events for [[Series]].\r\n */\r\nexport interface ISeriesEvents extends IComponentEvents {\r\n\r\n\t/**\r\n\t * @todo Description\r\n\t */\r\n\tselectionextremeschanged: {};\r\n\r\n\t/**\r\n\t * @todo Description\r\n\t */\r\n\textremeschanged: {};\r\n\r\n\t/**\r\n\t * @todo Description\r\n\t */\r\n\tdataitemchanged: {\r\n\t\tdataItem: DataItem\r\n\t};\r\n\r\n}\r\n\r\n/**\r\n * Defines adapters for [[Series]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface ISeriesAdapters extends IComponentAdapters, ISeriesProperties {\r\n\r\n\t/**\r\n\t * Applied to the series name when it is retrieved.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tname: string,\r\n\r\n\t/**\r\n\t * Applied to the name used by screen readers.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\titemReaderText: string\r\n\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines base class for any kind of serial data.\r\n *\r\n * @see {@link ISeriesEvents} for a list of available Events\r\n * @see {@link ISeriesAdapters} for a list of available Adapters\r\n * @todo Separate axis-related stuff to some other class so that MapSeries would not have unrelated stuff\r\n */\r\nexport class Series extends Component {\r\n\r\n\t/**\r\n\t * Defines the type of data fields used for the series.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ISeriesDataFields}\r\n\t */\r\n\tpublic _dataFields: ISeriesDataFields;\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IComponentProperties}\r\n\t */\r\n\tpublic _properties!: ISeriesProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ISeriesAdapters}\r\n\t */\r\n\tpublic _adapter!: ISeriesAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {ISeriesEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: ISeriesEvents;\r\n\r\n\t/**\r\n\t * Defines a type of data item used for the series.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {SeriesDataItem}\r\n\t */\r\n\tpublic _dataItem: SeriesDataItem;\r\n\r\n\t/**\r\n\t * A name of the Series.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tprotected _title: string;\r\n\r\n\t/**\r\n\t * A reference to the legend data item related to this series.\r\n\t *\r\n\t * @type {LegendDataItem<Series, ISeriesEvents>}\r\n\t */\r\n\tprotected _legendDataItem: LegendDataItem<Series, ISeriesEvents>;\r\n\r\n\t/**\r\n\t * Should this series excluded from the axis scale calculations?\r\n\t *\r\n\t * @default false\r\n\t * @type {boolean}\r\n\t */\r\n\tprotected _ignoreMinMax: boolean = false;\r\n\r\n\t/**\r\n\t * Container series' elements are placed in.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Container}\r\n\t */\r\n\tpublic mainContainer: Container;\r\n\r\n\t/**\r\n\t * Should series' bullets?\r\n\t *\r\n\t * @default true\r\n\t * @type {boolean}\r\n\t */\r\n\tprotected _showBullets: boolean = true;\r\n\r\n\t/**\r\n\t * List of series' bullets.\r\n\t *\r\n\t * @type {ListTemplate<Bullet>}\r\n\t */\r\n\tprotected _bullets: ListTemplate<Bullet>;\r\n\r\n\t/**\r\n\t * Series' bullets by id.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Dictionary<string, List<Bullet>>}\r\n\t */\r\n\tpublic bulletsLists: Dictionary<string, List<Bullet>>;\r\n\r\n\t/**\r\n\t * Container bullets are placed in.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Container}\r\n\t */\r\n\tpublic bulletsContainer: Container;\r\n\r\n\t/**\r\n\t * A chart series belongs to.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {SerialChart}\r\n\t */\r\n\tpublic _chart: SerialChart;\r\n\r\n\t/**\r\n\t * A container axis ranges are placed in.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Container}\r\n\t */\r\n\tpublic rangesContainer: Container;\r\n\r\n\t/**\r\n\t * A list of axis ranges for this series.\r\n\t *\r\n\t * @type {List<AxisDataItem>}\r\n\t */\r\n\tpublic axisRanges: List<AxisDataItem>;\r\n\r\n\t/**\r\n\t * Settings for the appearance of the related legend items.\r\n\t */\r\n\tpublic legendSettings: LegendSettings = new LegendSettings();\r\n\r\n\t/**\r\n\t * Lowest overal values by type.\r\n\t *\r\n\t * @type {Dictionary}\r\n\t */\r\n\tprotected _tmin = new Dictionary<string, number>();\r\n\r\n\t/**\r\n\t * Highest overal values by type.\r\n\t *\r\n\t * @type {Dictionary}\r\n\t */\r\n\tprotected _tmax = new Dictionary<string, number>();\r\n\r\n\t/**\r\n\t * Lowest values in current selection by type.\r\n\t *\r\n\t * @type {Dictionary}\r\n\t */\r\n\tprotected _smin = new Dictionary<string, number>();\r\n\r\n\t/**\r\n\t * Highest values in current selection by type.\r\n\t *\r\n\t * @type {Dictionary}\r\n\t */\r\n\tprotected _smax = new Dictionary<string, number>();\r\n\r\n\t/**\r\n\t * [dataItemsByAxis description]\r\n\t *\r\n\t * Both by category and date.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @type {Dictionary}\r\n\t */\r\n\tpublic dataItemsByAxis = new Dictionary<string, Dictionary<string, this[\"_dataItem\"]>>();\r\n\r\n\t/**\r\n\t * Normally series items are focusable using keyboard, so that people can\r\n\t * select them with a TAB key. However, if there are a lot of data points on\r\n\t * screen it might be long and useless to tab through all o fthem.\r\n\t *\r\n\t * This is where `skipFocusThreshold` comes in. If there are more items than\r\n\t * the value set here, we will not make those focusable and rather let screen\r\n\t * reader software rely on the series summary, or authors provide alternative\r\n\t * detailed information display, such as HTML table.\r\n\t *\r\n\t * Different series might have different threshold defaults.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\tpublic skipFocusThreshold: number = 20;\r\n\r\n\t/**\r\n\t * Holds a default screen reader text for series data items. It will be used\r\n\t * to generate information for screen readers. If not set, the series will\r\n\t * try to deduce reader text from `tooltipText` or `tooltipHTML`. If those\r\n\t * are not set either, a default reader text will be used which is relevant\r\n\t * for each Series type.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tprotected _itemReaderText: string;\r\n\r\n\t/**\r\n\t * flag which is set to true when initial animation is finished\r\n\t * @ignore\r\n\t */\r\n\tpublic appeared: boolean = false;\r\n\r\n\t/*\r\n\t\tpublic heatMapfillRule: (fill:Color, column: Sprite) => any = function(fill:Color, sprite: Sprite) {\r\n\t\t\tlet dataItem: SeriesDataItem = <SeriesDataItem>sprite.dataItem;\r\n\r\n\t\t\tif (dataItem && dataItem.value) {\r\n\t\t\t\tlet series = dataItem.component;\r\n\t\t\t\tif($type.hasValue(series.minColor) &&  $type.hasValue(series.maxColor) && $type.isNumber(series.minValue) && $type.isNumber(series.maxValue)){\r\n\t\t\t\t\tlet percent = (dataItem.values.value.workingValue - series.minValue) / (series.maxValue - series.minValue);\r\n\t\t\t\t\treturn new Color($colors.interpolate(series.minColor.rgb, series.maxColor.rgb, percent));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t*/\r\n\r\n\tprotected _heatRules: List<IHeatRule>;\r\n\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.className = \"Series\";\r\n\t\tthis.isMeasured = false;\r\n\r\n\t\tthis.layout = \"none\";\r\n\t\tthis.shouldClone = false;\r\n\r\n\t\tthis.axisRanges = new List<AxisDataItem>();\r\n\t\tthis.axisRanges.events.on(\"inserted\", this.processAxisRange, this);\r\n\r\n\t\tthis.minBulletDistance = 0; // otherwise we'll have a lot of cases when people won't see bullets and think it's a bug\r\n\t\tthis.mainContainer = this.createChild(Container);\r\n\t\tthis.mainContainer.shouldClone = false;\r\n\t\tthis.mainContainer.mask = this.createChild(Sprite);\r\n\r\n\t\t// all bullets should go on top of lines/fills. So we add a separate container for bullets and later set it's parent to chart.bulletsContainer\r\n\t\tthis.bulletsContainer = this.mainContainer.createChild(Container);\r\n\t\tthis.bulletsContainer.shouldClone = false;\r\n\t\tthis.bulletsContainer.layout = \"none\";\r\n\r\n\t\tthis.tooltip = new Tooltip();\r\n\t\tthis._disposers.push(this.tooltip);\r\n\r\n\t\tthis.hiddenState.transitionEasing = $ease.cubicIn;\r\n\r\n\t\t// this data item holds sums, averages, etc\r\n\t\tthis.dataItem = this.createDataItem();\r\n\t\tthis.dataItem.component = this;\r\n\r\n\t\t// Apply accessibility\r\n\t\tthis.role = \"group\";\r\n\r\n\t\tthis.events.once(\"beforevalidated\", () => { this.appear() }, this);\r\n\r\n\t\t//this.hiddenState.properties.opacity = 1; // because we hide by changing values\r\n\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Sets defaults that instantiate some objects that rely on parent, so they\r\n\t * cannot be set in constructor.\r\n\t */\r\n\tprotected applyInternalDefaults(): void {\r\n\t\tsuper.applyInternalDefaults();\r\n\t\tif (!$type.hasValue(this.readerTitle)) {\r\n\t\t\tthis.readerTitle = this.language.translate(\"Series\");\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a new/empty DataItem of the type appropriate for this object.\r\n\t *\r\n\t * @see {@link DataItem}\r\n\t * @return {SeriesDataItem} Data Item\r\n\t */\r\n\tprotected createDataItem(): this[\"_dataItem\"] {\r\n\t\treturn new SeriesDataItem();\r\n\t}\r\n\r\n\t/**\r\n\t * Chart series is used on.\r\n\t *\r\n\t * @param {this[\"_chart\"]}  value  Chart\r\n\t */\r\n\tpublic set chart(value: this[\"_chart\"]) {\r\n\t\tthis._chart = value;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {this} Chart\r\n\t */\r\n\tpublic get chart(): this[\"_chart\"] {\r\n\t\treturn this._chart;\r\n\t}\r\n\r\n\t/**\r\n\t * Performs initial animation of the series after data validation.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic appear(): void {\r\n\t\tthis.appeared = false;\r\n\r\n\t\tthis.hide(0);\r\n\r\n\t\tlet animation = this.show();\r\n\t\tif (animation && !animation.isDisposed()) {\r\n\t\t\tanimation.events.once(\"animationended\", () => {\r\n\t\t\t\tthis.appeared = true;\r\n\t\t\t})\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.appeared = true;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Fades in bullet container and related elements.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {number}     duration  Animation duration (ms)\r\n\t * @return {Animation}            Animation\r\n\t */\r\n\tpublic showReal(duration: number): Animation {\r\n\t\tthis.bulletsContainer.show(duration);\r\n\t\treturn super.showReal(duration);\r\n\t}\r\n\r\n\t/**\r\n\t * Fades out bullet container and related elements.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {number}     duration  Animation duration (ms)\r\n\t * @return {Animation}            Animation\r\n\t */\r\n\tpublic hideReal(duration: number): Animation {\r\n\t\tthis.bulletsContainer.hide(duration);\r\n\t\treturn super.hideReal(duration);\r\n\t}\r\n\r\n\t/**\r\n\t * Positions bullet.\r\n\t *\r\n\t * @param {Bullet}  bullet  Bullet\r\n\t */\r\n\tpublic positionBullet(bullet: Bullet): void {\r\n\r\n\t\t// Placeholder method for extending classes to override.\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Decorates newly created bullet after it has been instert into the list.\r\n\t *\r\n\t * @param {IListEvents<Bullet>[\"inserted\"]}  event  List event\r\n\t * @todo investigate why itemReaderText is undefined\r\n\t */\r\n\tprotected processBullet(event: IListEvents<Bullet>[\"inserted\"]) {\r\n\t\tlet bullet: Bullet = event.newValue;\r\n\r\n\t\t// create list and iterator\r\n\t\tlet bulletsList = new ListTemplate<Bullet>(bullet);\r\n\t\tthis.bulletsLists.setKey(bullet.uid, bulletsList);\r\n\r\n\t\t// Add accessibility options to bullet\r\n\t\t// If there are relatively few bullets, make them focusable\r\n\t\tif (this.itemsFocusable()) {\r\n\t\t\tbullet.focusable = true;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Validates data items.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic validateDataItems() {\r\n\t\tsuper.validateDataItems();\r\n\t\tthis.processValues(false);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns first value for the specific key in the series.\r\n\t *\r\n\t * @param  {string}  key  Key\r\n\t * @return {number}       Value\r\n\t * @todo Description\r\n\t * @todo Convert to propert object property iterator\r\n\t */\r\n\tprotected getFirstValue(key: string): number {\r\n\t\t// find first\r\n\t\treturn $iter.findMap(this.dataItems.iterator(), (dataItem) => {\r\n\t\t\tfor (let key in dataItem.values) {\r\n\t\t\t\tlet value: number = dataItem.values[key].workingValue;\r\n\t\t\t\tif ($type.isNumber(value)) {\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn null;\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * [rangeChangeUpdate description]\r\n\t *\r\n\t * @todo Description\r\n\t */\r\n\tprotected rangeChangeUpdate() {\r\n\t\tsuper.rangeChangeUpdate();\r\n\t\tthis.processValues(true);\r\n\t}\r\n\r\n\t/**\r\n\t * [processValues description]\r\n\t *\r\n\t * @todo Description\r\n\t * @todo Convert to propert object property iterator\r\n\t * @param {OrderedList<this[\"_dataItem\"]>} dataItems [description]\r\n\t */\r\n\tprotected processValues(working: boolean) {\r\n\t\tlet dataItems = this.dataItems;\r\n\r\n\t\tlet count: { [index: string]: number } = {};\r\n\t\tlet sum: { [index: string]: number } = {};\r\n\t\tlet low: { [index: string]: number } = {};\r\n\t\tlet high: { [index: string]: number } = {};\r\n\t\tlet open: { [index: string]: number } = {};\r\n\t\tlet close: { [index: string]: number } = {};\r\n\t\tlet previous: { [index: string]: number } = {};\r\n\t\tlet first: { [index: string]: number } = {};\r\n\r\n\t\t//let duration: number = 0; // todo: check if series uses selection.change or selection.change.percent and set duration to interpolationduration\r\n\r\n\t\tlet startIndex: number = this._workingStartIndex;\r\n\t\tlet endIndex: number = this._workingEndIndex;\r\n\r\n\t\tthis.bulletsContainer.children.each((sprite) => {\r\n\t\t\tsprite.__disabled = true;\r\n\t\t})\r\n\r\n\t\t// it's ok, we loop trough all the data and check if i is within start/end index later\r\n\t\t$iter.each($iter.indexed(dataItems.iterator()), (a) => {\r\n\t\t\tlet i = a[0];\r\n\t\t\tlet dataItem = a[1];\r\n\t\t\tfor (let key in dataItem.values) {\r\n\r\n\t\t\t\tlet value: number = dataItem.values[key].workingValue;\r\n\r\n\t\t\t\tif (i >= startIndex && i <= endIndex) { // do not add to count, sum etc if it is not within start/end index\r\n\t\t\t\t\tif ($type.isNumber(value)) {\r\n\r\n\t\t\t\t\t\t// count values\r\n\t\t\t\t\t\tif (!$type.isNumber(count[key])) {\r\n\t\t\t\t\t\t\tcount[key] = 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcount[key]++;\r\n\r\n\t\t\t\t\t\t// sum values\r\n\t\t\t\t\t\tif (!$type.isNumber(sum[key])) {\r\n\t\t\t\t\t\t\tsum[key] = 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsum[key] += value;\r\n\r\n\t\t\t\t\t\t// open\r\n\t\t\t\t\t\tif (!$type.isNumber(open[key])) {\r\n\t\t\t\t\t\t\topen[key] = value;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// close\r\n\t\t\t\t\t\tclose[key] = value;\r\n\r\n\t\t\t\t\t\t// low\r\n\t\t\t\t\t\tif (!$type.isNumber(low[key])) {\r\n\t\t\t\t\t\t\tlow[key] = value;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tif (low[key] > value) {\r\n\t\t\t\t\t\t\t\tlow[key] = value;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// high\r\n\t\t\t\t\t\tif (!$type.isNumber(high[key])) {\r\n\t\t\t\t\t\t\thigh[key] = value;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tif (high[key] < value) {\r\n\t\t\t\t\t\t\t\thigh[key] = value;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tif (!$type.isNumber(first[key])) {\r\n\t\t\t\t\tfirst[key] = this.getFirstValue(key);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// change\r\n\t\t\t\tdataItem.setCalculatedValue(key, value - first[key], \"change\");\r\n\t\t\t\t// change from start percent\r\n\t\t\t\tdataItem.setCalculatedValue(key, (value - first[key]) / first[key] * 100, \"changePercent\");\r\n\r\n\t\t\t\t// previous change\r\n\t\t\t\tlet prevValue: number = previous[key];\r\n\t\t\t\tif (!$type.isNumber(prevValue)) {\r\n\t\t\t\t\tprevValue = value;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdataItem.setCalculatedValue(key, value - prevValue, \"previousChange\");\r\n\t\t\t\t// previous change percent\r\n\t\t\t\tdataItem.setCalculatedValue(key, (value - prevValue) / prevValue * 100, \"previousChangePercent\");\r\n\r\n\t\t\t\t// save previous\r\n\t\t\t\tprevious[key] = value;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// todo: this is not often needed (pie chart mostly), any chance to avoid? chart could have a flag which would enable/disable this calculations\r\n\t\t// todo: think what to do with value.percent - we need to cycle through all data in order to have proper values, but this is expensive. flag might be a solution.\r\n\t\t$iter.each($iter.indexed(dataItems.iterator()), (a) => {\r\n\t\t\tlet i = a[0];\r\n\t\t\tlet dataItem = a[1];\r\n\t\t\t$object.each(dataItem.values, (key) => {\r\n\t\t\t\tlet ksum: number = sum[key];\r\n\t\t\t\tlet value: number = dataItem.values[key].workingValue;\r\n\r\n\t\t\t\t// this hack is made in order to make it possible to animate single slice to 0\r\n\t\t\t\t// if there is only one slice left, percent value is always 100%, so it won't animate\r\n\t\t\t\t// so we use real value of a slice instead of current value\r\n\t\t\t\tif (value == ksum) {\r\n\t\t\t\t\tksum = dataItem.values[key].value;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (i >= startIndex && i <= endIndex) {\r\n\t\t\t\t\tlet percent: number; // used to be = 0; but no good for pie chart\r\n\r\n\t\t\t\t\tif ($type.isNumber(value) && ksum > 0) {\r\n\t\t\t\t\t\tpercent = value / ksum * 100;\r\n\t\t\t\t\t\tdataItem.setCalculatedValue(key, percent, \"percent\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\r\n\r\n\t\t// calculate one before first (cant do that in cycle, as we don't know open yet\r\n\t\t// when drawing line chart we should draw line to the invisible data point to the left, otherwise the line will always look like it starts from the selected point\r\n\t\t// so we do startIndex - 1\r\n\t\tif (startIndex > 0) {\r\n\t\t\tlet zeroItem: this[\"_dataItem\"] = dataItems.getIndex(startIndex - 1);\r\n\t\t\t$object.each(zeroItem.values, (key) => {\r\n\t\t\t\t//for (let key in zeroItem.values) {\r\n\t\t\t\tlet value = zeroItem.values[key].value;\r\n\t\t\t\t// change\r\n\t\t\t\tzeroItem.setCalculatedValue(key, value - open[key], \"change\");\r\n\t\t\t\t// change percent\r\n\t\t\t\tzeroItem.setCalculatedValue(key, (value - open[key]) / open[key] * 100, \"changePercent\");\r\n\t\t\t\t//}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// we save various data like sum, average to dataPoint of the series\r\n\t\tlet dataItem: DataItem = this.dataItem;\r\n\t\t$object.each(dataItem.values, (key) => {\r\n\t\t\tdataItem.setCalculatedValue(key, sum[key], \"sum\");\r\n\t\t\tdataItem.setCalculatedValue(key, sum[key] / count[key], \"average\");\r\n\t\t\tdataItem.setCalculatedValue(key, open[key], \"open\");\r\n\t\t\tdataItem.setCalculatedValue(key, close[key], \"close\");\r\n\t\t\tdataItem.setCalculatedValue(key, low[key], \"low\");\r\n\t\t\tdataItem.setCalculatedValue(key, high[key], \"high\");\r\n\t\t\tdataItem.setCalculatedValue(key, count[key], \"count\");\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * (Re)validates the whole series, effectively causing it to redraw.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic validate(): void {\r\n\t\t$iter.each(this.axisRanges.iterator(), (axisRange) => {\r\n\t\t\t//axisRange.contents.disposeChildren(); // not good for columns, as they are reused\r\n\t\t\t//\t\t\taxisRange.appendChildren();\r\n\t\t\taxisRange.validate();\r\n\t\t});\r\n\r\n\t\tsuper.validate();\r\n\t\tthis.bulletsContainer.fill = this.fill;\r\n\t\tthis.bulletsContainer.stroke = this.stroke;\r\n\r\n\t\tif (this.topParent) {\r\n\t\t\tthis.tooltip.setBounds({ x: 0, y: 0, width: this.topParent.maxWidth, height: this.topParent.maxHeight });\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Validates data item's element, effectively redrawing it.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {SeriesDataItem}  dataItem  Data item\r\n\t */\r\n\tpublic validateDataElement(dataItem: this[\"_dataItem\"]): void {\r\n\t\tsuper.validateDataElement(dataItem);\r\n\r\n\t\tif (this._showBullets) {\r\n\t\t\t$iter.each(this.bullets.iterator(), (bulletTemplate) => {\r\n\t\t\t\t// always better to use the same, this helps to avoid redrawing\r\n\t\t\t\tlet bullet: Bullet = <Bullet>dataItem.bullets.getKey(bulletTemplate.uid);\r\n\r\n\t\t\t\tif (!bullet) {\r\n\t\t\t\t\tbullet = bulletTemplate.clone();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet currentDataItem: this[\"_dataItem\"] = <this[\"_dataItem\"]>bullet.dataItem;\r\n\t\t\t\tif (currentDataItem != dataItem) {\r\n\t\t\t\t\t// set to undefined in order not to reuse\r\n\t\t\t\t\tif (currentDataItem) {\r\n\t\t\t\t\t\tcurrentDataItem.bullets.setKey(bulletTemplate.uid, undefined);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdataItem.addSprite(bullet);\r\n\r\n\t\t\t\t\tif (bullet.isDynamic) {\r\n\t\t\t\t\t\tdataItem.events.on(\"workingvaluechanged\", bullet.deepInvalidate, bullet);\r\n\t\t\t\t\t\t//dataItem.events.on(\"calculatedvaluechanged\", bullet.deepInvalidate, bullet);\r\n\t\t\t\t\t\tthis.dataItem.events.on(\"workingvaluechanged\", bullet.deepInvalidate, bullet);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbullet.deepInvalidate();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbullet.parent = this.bulletsContainer;\r\n\t\t\t\tbullet.visible = true;\r\n\r\n\t\t\t\tdataItem.bullets.setKey(bulletTemplate.uid, bullet);\r\n\r\n\t\t\t\t// Add accessibility to bullet\r\n\t\t\t\tlet readerText = this.itemReaderText || (\"{\" + bullet.xField + \"}: {\" + bullet.yField + \"}\");\r\n\t\t\t\tif (bullet.focusable) {\r\n\t\t\t\t\tbullet.events.once(\"focus\", (ev) => {\r\n\t\t\t\t\t\tbullet.readerTitle = this.populateString(readerText, bullet.dataItem);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbullet.events.once(\"blur\", (ev) => {\r\n\t\t\t\t\t\tbullet.readerTitle = \"\";\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif (bullet.hoverable) {\r\n\t\t\t\t\tbullet.events.once(\"over\", (ev) => {\r\n\t\t\t\t\t\tbullet.readerTitle = this.populateString(readerText, bullet.dataItem);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbullet.events.once(\"out\", (ev) => {\r\n\t\t\t\t\t\tbullet.readerTitle = \"\";\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// pass max w/h so we'd know if we should show/hide somethings\r\n\t\t\t\tbullet.maxWidth = dataItem.itemWidth;\r\n\t\t\t\tbullet.maxHeight = dataItem.itemHeight;\r\n\t\t\t\tbullet.__disabled = false;\r\n\r\n\t\t\t\tthis.positionBullet(bullet);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * [handleDataItemWorkingValueChange description]\r\n\t *\r\n\t * @todo Description\r\n\t */\r\n\tprotected handleDataItemWorkingValueChange(event: AMEvent<SeriesDataItem, IDataItemEvents>[\"workingvaluechanged\"]): void {\r\n\t\tthis.invalidateProcessedData();\r\n\t}\r\n\r\n\t/**\r\n\t * Should this series excluded from the axis scale calculations?\r\n\t *\r\n\t * @default false\r\n\t * @param {boolean}  value  Exclude from calculations?\r\n\t */\r\n\tpublic set ignoreMinMax(value: boolean) {\r\n\t\tthis._ignoreMinMax = value;\r\n\t\tthis.invalidateDataItems();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Exclude from calculations?\r\n\t */\r\n\tpublic get ignoreMinMax(): boolean {\r\n\t\treturn this._ignoreMinMax;\r\n\t}\r\n\r\n\t/**\r\n\t * Create a mask for the series.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic createMask(): void {\r\n\r\n\t\t// A placeholder method for extending classes to override.\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Process axis range after it has been added to the list.\r\n\t *\r\n\t * @param {IListEvents<AxisDataItem>[\"inserted\"]}  event  Event\r\n\t */\r\n\tprotected processAxisRange(event: IListEvents<AxisDataItem>[\"inserted\"]): void {\r\n\t\t// create container if not existing\r\n\t\tif (!this.rangesContainer) {\r\n\t\t\tthis.rangesContainer = this.createChild(Container);\r\n\t\t\tthis.rangesContainer.shouldClone = false;\r\n\t\t\tthis.rangesContainer.isMeasured = false;\r\n\t\t}\r\n\r\n\t\tlet axisRange: AxisDataItem = event.newValue;\r\n\t\tif (axisRange) {\r\n\t\t\taxisRange.contents.parent = this.rangesContainer;\r\n\t\t\taxisRange.isRange = true;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * [getAxisField description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @param  {Axis}    axis  [description]\r\n\t * @return {string}        [description]\r\n\t */\r\n\tpublic getAxisField(axis: Axis): string {\r\n\t\treturn;\r\n\t}\r\n\r\n\t/**\r\n\t * Shows the tooltip at specific position.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {number}  xPosition  X\r\n\t * @param {number}  yPosition  Y\r\n\t */\r\n\tpublic showTooltipAtPosition(xPosition: number, yPosition: number): void {\r\n\r\n\t\t// Placeholder method for extending classes to override.\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Minimal distance between two adjacent bullets in pixels.\r\n\t *\r\n\t * If bullet is closer, it will be skipped and not shown.\r\n\t *\r\n\t * This allows to avoid crammed up graphs wil a lot of bullets.\r\n\t *\r\n\t * @default 50\r\n\t * @param {number}  value  Distance (px)\r\n\t */\r\n\tpublic set minBulletDistance(value: number) {\r\n\t\tthis.setPropertyValue(\"minBulletDistance\", value);\r\n\t\tthis.invalidateDataRange();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Distance (px)\r\n\t */\r\n\tpublic get minBulletDistance(): number {\r\n\t\treturn this.getPropertyValue(\"minBulletDistance\");\r\n\t}\r\n\r\n\t/**\r\n\t * A list of bullets that will be added to each and every items in the\r\n\t * series.\r\n\t *\r\n\t * You can push any object that is a descendant of a [[Bullet]] here. All\r\n\t * items added to this list will be copied and used as a bullet on all data\r\n\t * items, including their properties, events, etc.\r\n\t *\r\n\t * @see {@link https://www.amcharts.com/docs/v4/concepts/bullets/} for more info about the concept of Bullets\r\n\t * @return {ListTemplate<Bullet>} List of bullets.\r\n\t */\r\n\tpublic get bullets(): ListTemplate<Bullet> {\r\n\t\tif (!this._bullets) {\r\n\t\t\tthis._bullets = new ListTemplate<Bullet>(new Bullet());\r\n\t\t\tthis._bullets.events.on(\"inserted\", this.processBullet, this);\r\n\r\n\t\t\tthis.bulletsLists = new Dictionary<string, List<Bullet>>();\r\n\r\n\t\t\tthis._disposers.push(new ListDisposer(this._bullets));\r\n\t\t\tthis._disposers.push(this._bullets.template);\r\n\t\t}\r\n\t\treturn this._bullets;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Destroys series and related elements.\r\n\t */\r\n\tpublic dispose(): void {\r\n\t\tif (!this._disposed) {\r\n\t\t\tsuper.dispose();\r\n\t\t\tthis.removeDispose(this.bulletsContainer);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Binds related legend data item's visual settings to this series' visual\r\n\t * settings.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {Container}  marker  Legend item container\r\n\t */\r\n\tpublic createLegendMarker(marker: Container) {\r\n\r\n\t\t// This is a placeholder method for extending classes to override.\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Should the series be hidden in legend?\r\n\t *\r\n\t * @param {boolean} value Hidden in legend?\r\n\t */\r\n\tpublic set hiddenInLegend(value: boolean) {\r\n\t\tthis.setPropertyValue(\"hiddenInLegend\", value);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Hidden in legend?\r\n\t */\r\n\tpublic get hiddenInLegend(): boolean {\r\n\t\treturn this.getPropertyValue(\"hiddenInLegend\");\r\n\t}\r\n\r\n\t/**\r\n\t * Series' name.\r\n\t *\r\n\t * @param {string}  value  Name\r\n\t */\r\n\tpublic set name(value: string) {\r\n\t\tthis._title = value;\r\n\t\tthis.readerTitle = value;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {string} Name\r\n\t */\r\n\tpublic get name(): string {\r\n\t\treturn this.adapter.apply(\"name\", this._title);\r\n\t}\r\n\r\n\t/**\r\n\t * Screen reader text to be applied to each individual data item, such\r\n\t * as bullets, columns or slices.\r\n\t *\r\n\t * The template can contain field reference meta codes, i.e. `{dateX}`,\r\n\t * `{valueY}`, etc.\r\n\t *\r\n\t * Any text formatting options, e.g. `[bold]` will be ignored.\r\n\t *\r\n\t * @param {string} value Screen reader text template\r\n\t */\r\n\tpublic set itemReaderText(value: string) {\r\n\t\tthis._itemReaderText = value;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {string} Screen reader text template\r\n\t */\r\n\tpublic get itemReaderText(): string {\r\n\r\n\t\t// Get explicitly set reader text\r\n\t\tlet readerText = this._itemReaderText;\r\n\r\n\t\t// Not set? Let's try something else\r\n\t\tif (!readerText) {\r\n\r\n\t\t\t// Tooltip text?\r\n\t\t\tif (this.tooltipText) {\r\n\t\t\t\treaderText = $utils.plainText(this.tooltipText);\r\n\t\t\t}\r\n\t\t\telse if (this.tooltipHTML) {\r\n\t\t\t\treaderText = $utils.plainText(this.tooltipHTML);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this.adapter.apply(\"itemReaderText\", readerText);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns if number of data items in the series are beyond non-focusable\r\n\t * count and should not be available for TAB-through.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {boolean} Items focusable?\r\n\t */\r\n\tpublic itemsFocusable(): boolean {\r\n\t\treturn this.dataItems.length >= this.skipFocusThreshold ? false : true;\r\n\t}\r\n\r\n\t/**\r\n\t * Legend data item that corresponds to this series.\r\n\t *\r\n\t * @param {LegendDataItem<Series, ISeriesEvents>}  value  Data item\r\n\t */\r\n\tpublic set legendDataItem(value: LegendDataItem<Series, ISeriesEvents>) {\r\n\t\tthis._legendDataItem = value;\r\n\t\tthis._legendDataItem.itemContainer.deepInvalidate();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {LegendDataItem<Series, ISeriesEvents>} Data item\r\n\t */\r\n\tpublic get legendDataItem(): LegendDataItem<Series, ISeriesEvents> {\r\n\t\treturn this._legendDataItem;\r\n\t}\r\n\r\n\t/**\r\n\t * Updates corresponding legend data item with current values.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {this[\"_dataItem\"]}  dataItem  Data item\r\n\t */\r\n\tpublic updateLegendValue(dataItem?: this[\"_dataItem\"]) {\r\n\t\t// if this series has legend item\r\n\t\tif (this.legendDataItem) {\r\n\r\n\t\t\tlet legendSettings: LegendSettings = this.legendSettings;\r\n\t\t\tlet legendDataItem = this.legendDataItem;\r\n\t\t\tlet label: Label = legendDataItem.label;\r\n\t\t\tlet valueLabel: Label = legendDataItem.valueLabel;\r\n\r\n\t\t\t// update legend\r\n\t\t\tif (dataItem) {\r\n\t\t\t\tif (legendSettings.itemValueText) {\r\n\t\t\t\t\tvalueLabel.text = legendSettings.itemValueText;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (legendSettings.itemLabelText) {\r\n\t\t\t\t\tlabel.text = legendSettings.itemLabelText;\r\n\t\t\t\t}\r\n\t\t\t\tvalueLabel.dataItem = dataItem;\r\n\t\t\t\tlabel.dataItem = this.dataItem;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// if itemLabelText is set, means we have to reset label even if labelText is not set\r\n\t\t\t\tif (legendSettings.labelText || legendSettings.itemLabelText != undefined) {\r\n\t\t\t\t\tlabel.text = legendSettings.labelText;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (legendSettings.valueText || legendSettings.itemValueText != undefined) {\r\n\t\t\t\t\tvalueLabel.text = legendSettings.valueText;\r\n\t\t\t\t}\r\n\t\t\t\tlabel.dataItem = this.dataItem;\r\n\t\t\t\tvalueLabel.dataItem = this.dataItem;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Copies all properties from another instance of [[Series]].\r\n\t *\r\n\t * @param {Series}  source  Source series\r\n\t */\r\n\tpublic copyFrom(source: this) {\r\n\t\tthis.bullets.copyFrom(source.bullets);\r\n\t\tthis.bulletsContainer.copyFrom(source.bulletsContainer);\r\n\t\tsuper.copyFrom(source);\r\n\t}\r\n\r\n\t/**\r\n\t * Displays a modal or console message with error, and halts any further\r\n\t * processing of this element.\r\n\t *\r\n\t * @param {Error} e Error\r\n\t */\r\n\tpublic raiseCriticalError(e: Error) {\r\n\t\tthis._chart.modal.content = e.message;\r\n\t\tthis._chart.modal.closable = false;\r\n\t\tthis._chart.modal.show();\r\n\t\tthis._chart.disabled = true;\r\n\r\n\t\tif (options.verbose) {\r\n\t\t\tconsole.log(e);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Applies filters to the element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tprotected applyFilters() {\r\n\t\tsuper.applyFilters();\r\n\t\tthis.bulletsContainer.filters.clear();\r\n\t\tthis.bulletsContainer.filters.copyFrom(this.filters);\r\n\t}\r\n\r\n\t/**\r\n\t * @todo Description\r\n\t */\r\n\tpublic get heatRules(): List<IHeatRule> {\r\n\t\tif (!this._heatRules) {\r\n\t\t\tthis._heatRules = new List<IHeatRule>();\r\n\t\t\tthis._heatRules.events.on(\"inserted\", (event) => {\r\n\t\t\t\tlet heatRule = event.newValue;\r\n\t\t\t\tlet target = heatRule.target;\r\n\r\n\t\t\t\tif (target) {\r\n\t\t\t\t\tlet dataField = heatRule.dataField;\r\n\r\n\t\t\t\t\tif (!$type.hasValue(dataField)) {\r\n\t\t\t\t\t\tdataField = \"value\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlet min = heatRule.min;\r\n\t\t\t\t\tlet max = heatRule.max;\r\n\r\n\t\t\t\t\tlet seriesDataItem = this.dataItem;\r\n\t\t\t\t\tlet property = heatRule.property;\r\n\r\n\t\t\t\t\tlet minValue = $type.toNumber(heatRule.minValue);\r\n\t\t\t\t\tlet maxValue = $type.toNumber(heatRule.maxValue);\r\n\r\n\t\t\t\t\tif (!$type.isNumber(minValue) && !$type.isNumber(maxValue)) {\r\n\t\t\t\t\t\tthis.dataItem.events.on(\"calculatedvaluechanged\", (event) => {\r\n\t\t\t\t\t\t\tif (event.property == dataField) {\r\n\t\t\t\t\t\t\t\t$iter.each(this.dataItems.iterator(), (dataItem) => {\r\n\t\t\t\t\t\t\t\t\tlet foundSprite = false;\r\n\t\t\t\t\t\t\t\t\t$array.each(dataItem.sprites, (sprite) => {\r\n\t\t\t\t\t\t\t\t\t\tif (sprite.clonedFrom == target) {\r\n\t\t\t\t\t\t\t\t\t\t\tlet anySprite = <any>sprite;\r\n\t\t\t\t\t\t\t\t\t\t\tanySprite[property] = anySprite[property];\r\n\t\t\t\t\t\t\t\t\t\t\tfoundSprite = true;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\t\tif (!foundSprite) {\r\n\t\t\t\t\t\t\t\t\t\t$array.each(dataItem.sprites, (sprite) => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (sprite instanceof Container) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t$iter.each(sprite.children.iterator(), (child) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (child.className == target.className) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet anyChild = <any>child;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tanyChild[property] = anyChild[property];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t// giveup here\r\n\t\t\t\t\t\t\t\t\t\t\t\t\telse if (child instanceof Container) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tchild.deepInvalidate();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.dataItems.template.events.on(\"workingvaluechanged\", (event) => {\r\n\t\t\t\t\t\tif (event.property == dataField) {\r\n\t\t\t\t\t\t\tlet dataItem = event.target;\r\n\t\t\t\t\t\t\tlet foundSprite = false;\r\n\t\t\t\t\t\t\t$array.each(dataItem.sprites, (sprite) => {\r\n\t\t\t\t\t\t\t\tif (sprite.clonedFrom == target) {\r\n\t\t\t\t\t\t\t\t\tlet anySprite = <any>sprite;\r\n\t\t\t\t\t\t\t\t\tanySprite[property] = anySprite[property];\r\n\t\t\t\t\t\t\t\t\tfoundSprite = true;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\tif (!foundSprite) {\r\n\t\t\t\t\t\t\t\t$array.each(dataItem.sprites, (sprite) => {\r\n\t\t\t\t\t\t\t\t\tif (sprite instanceof Container) {\r\n\t\t\t\t\t\t\t\t\t\t$iter.each(sprite.children.iterator(), (child) => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (child.className == target.className) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tlet anyChild = <any>child;\r\n\t\t\t\t\t\t\t\t\t\t\t\tanyChild[property] = anyChild[property];\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t// givup here\r\n\t\t\t\t\t\t\t\t\t\t\telse if (child instanceof Container) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tchild.deepInvalidate();\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\r\n\r\n\t\t\t\t\ttarget.adapter.add(<any>property, (value, ruleTarget, property) => {\r\n\t\t\t\t\t\tlet minValue = $type.toNumber(heatRule.minValue);\r\n\t\t\t\t\t\tlet maxValue = $type.toNumber(heatRule.maxValue);\r\n\r\n\t\t\t\t\t\tif(ruleTarget instanceof Sprite){\r\n\t\t\t\t\t\t\tlet anySprite = <any>ruleTarget;\r\n\t\t\t\t\t\t\tlet propertyField = anySprite.propertyFields[property];\r\n\t\t\t\t\t\t\tif(propertyField && ruleTarget.dataItem){\r\n\t\t\t\t\t\t\t\tlet dataContext = <any>ruleTarget.dataItem.dataContext;\r\n\t\t\t\t\t\t\t\tif(dataContext && $type.hasValue(dataContext[propertyField])){\r\n\t\t\t\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tlet dataItem: SeriesDataItem = <SeriesDataItem>ruleTarget.dataItem;\r\n\r\n\t\t\t\t\t\tif (!$type.isNumber(minValue)) {\r\n\t\t\t\t\t\t\tminValue = seriesDataItem.values[dataField].low;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (!$type.isNumber(maxValue)) {\r\n\t\t\t\t\t\t\tmaxValue = seriesDataItem.values[dataField].high;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (dataItem) {\r\n\t\t\t\t\t\t\tlet workingValue = dataItem.values[dataField].workingValue;\r\n\t\t\t\t\t\t\tif ($type.hasValue(min) && $type.hasValue(max) && $type.isNumber(minValue) && $type.isNumber(maxValue) && $type.isNumber(workingValue)) {\r\n\r\n\t\t\t\t\t\t\t\tlet percent = (workingValue - minValue) / (maxValue - minValue);\r\n\r\n\t\t\t\t\t\t\t\tif ($type.isNumber(min)) {\r\n\t\t\t\t\t\t\t\t\treturn min + (max - min) * percent;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse if (min instanceof Color) {\r\n\t\t\t\t\t\t\t\t\treturn new Color($colors.interpolate(min.rgb, max.rgb, percent));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn this._heatRules;\r\n\t}\r\n\r\n\t/**\r\n\t * Processes JSON-based config before it is applied to the object.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {object}  config  Config\r\n\t */\r\n\tpublic processConfig(config?: { [index: string]: any }): void {\r\n\r\n\t\tlet heatRules;\r\n\r\n\t\tif (config) {\r\n\r\n\t\t\t// Set up bullets\r\n\t\t\tif ($type.hasValue(config.bullets) && $type.isArray(config.bullets)) {\r\n\t\t\t\tfor (let i = 0, len = config.bullets.length; i < len; i++) {\r\n\t\t\t\t\tlet bullets = config.bullets[i];\r\n\t\t\t\t\tif (!$type.hasValue(bullets.type)) {\r\n\t\t\t\t\t\tbullets.type = \"Bullet\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Let's take heatRules out of the config, so that we can process\r\n\t\t\t// them later, when bullets are already there\r\n\t\t\tif ($type.hasValue(config.heatRules) && $type.isArray(config.heatRules)) {\r\n\t\t\t\theatRules = config.heatRules;\r\n\t\t\t\tdelete config.heatRules;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tsuper.processConfig(config);\r\n\r\n\t\t// Process heat rules again, when all other lements are ready\r\n\t\tif (heatRules) {\r\n\t\t\tfor (let i = 0, len = heatRules.length; i < len; i++) {\r\n\t\t\t\tlet rule = heatRules[i];\r\n\r\n\t\t\t\t// Resolve target\r\n\t\t\t\tlet target: any = this;\r\n\t\t\t\tif ($type.hasValue(rule.target) && $type.isString(rule.target)) {\r\n\r\n\t\t\t\t\t// Check if we can find this element by id\r\n\t\t\t\t\tif (this.map.hasKey(rule.target)) {\r\n\t\t\t\t\t\ttarget = this.map.getKey(rule.target);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tlet parts = rule.target.split(\".\");\r\n\t\t\t\t\t\tfor (let x = 0; x < parts.length; x++) {\r\n\t\t\t\t\t\t\tif (target instanceof List) {\r\n\t\t\t\t\t\t\t\ttarget = target.getIndex($type.toNumber(parts[x]));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\ttarget = target[parts[x]];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\trule.target = target;\r\n\r\n\t\t\t\t// Resolve colors and percents\r\n\t\t\t\tif ($type.hasValue(rule.min)) {\r\n\t\t\t\t\trule.min = this.maybeColorOrPercent(rule.min);\r\n\t\t\t\t}\r\n\t\t\t\tif ($type.hasValue(rule.max)) {\r\n\t\t\t\t\trule.max = this.maybeColorOrPercent(rule.max);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tsuper.processConfig({\r\n\t\t\t\theatRules: heatRules\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * This function is used to sort element's JSON config properties, so that\r\n\t * some properties that absolutely need to be processed last, can be put at\r\n\t * the end.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {string}  a  Element 1\r\n\t * @param  {string}  b  Element 2\r\n\t * @return {Ordering}   Sorting number\r\n\t */\r\n\tprotected configOrder(a: string, b: string): Ordering {\r\n\t\tif (a == b) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\t// Must come last\r\n\t\telse if (a == \"heatRules\") {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t\telse if (b == \"heatRules\") {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn super.configOrder(a, b);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * Register class, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"Series\"] = Series;\r\nregistry.registeredClasses[\"SeriesDataItem\"] = SeriesDataItem;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/charts/series/Series.ts","/**\r\n * Provides functionality used to creating and showing tooltips (balloons).\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Container, IContainerProperties, IContainerAdapters, IContainerEvents } from \"../Container\";\r\nimport { SpriteEventDispatcher, AMEvent } from \"../../core/Sprite\";\r\nimport { PointedRectangle } from \"./PointedRectangle\";\r\nimport { IPoint } from \"../defs/IPoint\";\r\nimport { Label } from \"../elements/Label\";\r\nimport { Animation } from \"../utils/Animation\";\r\nimport { color } from \"../utils/Color\";\r\nimport { DropShadowFilter } from \"../rendering/filters/DropShadowFilter\";\r\nimport { IRectangle } from \"../defs/IRectangle\";\r\nimport * as $math from \"../utils/Math\";\r\nimport * as $ease from \"../utils/Ease\";\r\nimport * as $utils from \"../utils/Utils\";\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Represents options for tolltip pointer (arrow) orientation.\r\n *\r\n * @type {string}\r\n */\r\nexport type PointerOrientation = \"horizontal\" | \"vertical\";\r\n\r\n/**\r\n * Defines properties for [[Tooltip]].\r\n */\r\nexport interface ITooltipProperties extends IContainerProperties {\r\n\r\n\t/**\r\n\t * Pointer orientation: \"horizontal\" or \"vertical\".\r\n\t *\r\n\t * @default \"vertical\"\r\n\t * @type {PointerOrientation}\r\n\t */\r\n\tpointerOrientation?: PointerOrientation;\r\n\r\n\t/**\r\n\t * Duration (ms) that takes for a Tooltip to move from one place to another.\r\n\t *\r\n\t * If set to a zero value, the Tooltop will jump to a new location\r\n\t * instantenously.\r\n\t *\r\n\t * If set to a non-zero value, the Tooltip will \"glide\" to a new location at\r\n\t * a speed determined by this setting.\r\n\t *\r\n\t * @see {@link https://www.amcharts.com/docs/v4/concepts/animations/} for more info about animations\r\n\t * @type {number}\r\n\t */\r\n\tanimationDuration?: number;\r\n\r\n\t/**\r\n\t * An easing function to use when animating Tooltip position.\r\n\t *\r\n\t * @see {@link https://www.amcharts.com/docs/v4/concepts/animations/} for more info about animations\r\n\t * @type {(value: number) => number}\r\n\t */\r\n\tanimationEasing?: (value: number) => number;\r\n\r\n\t/**\r\n\t * Specifies if tooltip background should get stroke color from the sprite\r\n\t * it is pointing to.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tgetStrokeFromObject?: boolean;\r\n\r\n\t/**\r\n\t * Specifies if tooltip background should get fill color from the sprite it\r\n\t * is pointing to.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tgetFillFromObject?: boolean;\r\n\r\n\t/**\r\n\t * Specifies if text color should be chosen automatically for a better\r\n\t * readability.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tautoTextColor?: boolean;\r\n}\r\n\r\n/**\r\n * Defines events for [[Tooltip]].\r\n */\r\nexport interface ITooltipEvents extends IContainerEvents { }\r\n\r\n/**\r\n * Defines adapters for [[Tooltip]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface ITooltipAdapters extends IContainerAdapters, ITooltipProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Tooltip displays text and/or multimedia information in a balloon over chart\r\n * area.\r\n * @see {@link ITooltipEvents} for a list of available events\r\n * @see {@link ITooltipAdapters} for a list of available Adapters\r\n */\r\nexport class Tooltip extends Container {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ITooltipProperties}\r\n\t */\r\n\tpublic _properties!: ITooltipProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ITooltipAdapters}\r\n\t */\r\n\tpublic _adapter!: ITooltipAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {ITooltipEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: ITooltipEvents;\r\n\r\n\t/**\r\n\t * A type for the background element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {PointedRectangle}\r\n\t */\r\n\tpublic _background: PointedRectangle;\r\n\r\n\t/**\r\n\t * Text element that represents tooltip contents.\r\n\t */\r\n\tpublic label: Label;\r\n\r\n\t/**\r\n\t * A container that should be considered a \"boundary\" for the tolltip. A\r\n\t * bounding container is used to calculate numeric boundaries\r\n\t * (`boundingRect`). It is used to constrain the Tooltip to specific area on\r\n\t * the chart, like for example cursor tooltip in plot area.\r\n\t *\r\n\t * @type {Container}\r\n\t */\r\n\tprotected _boundingContainer: Container;\r\n\r\n\t/**\r\n\t * Holds numeric boundary values. Calculated from the `boundingContainer`.\r\n\t *\r\n\t * @type {IRectangle}\r\n\t */\r\n\tprotected _boundingRect: IRectangle = { x: 0, y: 0, width: 40000, height: 40000 };\r\n\r\n\t/**\r\n\t * Coordinates tolltip's pointer (stem) should point to.\r\n\t *\r\n\t * @type {IPoint}\r\n\t */\r\n\tprotected _pointTo: IPoint = { x: 0, y: 0 };\r\n\r\n\t/**\r\n\t * [fitPointerToBounds description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {boolean}\r\n\t */\r\n\tpublic fitPointerToBounds: boolean = false;\r\n\r\n\t/**\r\n\t * If tooltipOrientation is vertical, it can be drawn below or above point. We need to know this when solving overlapping\r\n\t *\r\n\t * @type \"up\" | \"down\"\r\n\t * @ignore\r\n\t */\r\n\tprotected _verticalOrientation: \"up\" | \"down\" = \"up\";\r\n\r\n\t/**\r\n\t * Position animation of a tooltip\r\n\t * @ignore\r\n\t */\r\n\tprotected _animation: Animation;\r\n\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\r\n\t\t// Init\r\n\t\tsuper();\r\n\t\tthis.className = \"Tooltip\";\r\n\t\tthis.isMeasured = false;\r\n\r\n\t\tthis.getFillFromObject = true;\r\n\t\tthis.margin(5, 5, 5, 5);\r\n\r\n\t\t// Create chrome/background\r\n\t\tlet background = this.background;\r\n\t\tbackground.interactionsEnabled = false;\r\n\t\tbackground.fillOpacity = 0.9;\r\n\t\tbackground.strokeWidth = 1;\r\n\t\tbackground.strokeOpacity = 1;\r\n\t\tbackground.stroke = color(\"#ffffff\");\r\n\t\tbackground.cornerRadius = 3;\r\n\t\tbackground.pointerLength = 6;\r\n\t\tbackground.pointerBaseWidth = 10;\r\n\r\n\t\tthis.autoTextColor = true;\r\n\r\n\t\t// Create text element\r\n\t\tlet label = this.createChild(Label);\r\n\t\tlabel.shouldClone = false;\r\n\t\tthis.label = label;\r\n\t\tlabel.padding(7, 12, 6, 12);\r\n\t\tlabel.interactionsEnabled = false;\r\n\t\tlabel.horizontalCenter = \"middle\";\r\n\t\tlabel.fill = color(\"#ffffff\");\r\n\t\tthis._disposers.push(label);\r\n\r\n\t\tthis.label.events.on(\"sizechanged\", () => {\r\n\t\t\tthis.drawBackground();\r\n\t\t});\r\n\r\n\t\tthis.label.events.on(\"positionchanged\", () => {\r\n\t\t\tthis.drawBackground();\r\n\t\t})\r\n\r\n\t\tthis.label.zIndex = 1; // @todo remove this line when bg sorting is solved\r\n\r\n\t\t// Set defaults\r\n\t\tthis.pointerOrientation = \"vertical\";\r\n\r\n\t\tlet dropShadow = new DropShadowFilter();\r\n\t\tdropShadow.dy = 1;\r\n\t\tdropShadow.dx = 1;\r\n\t\tdropShadow.opacity = 0.5;\r\n\r\n\t\tthis.filters.push(dropShadow);\r\n\r\n\t\tthis.animationDuration = 0;\r\n\t\tthis.animationEasing = $ease.cubicOut;\r\n\r\n\t\t// Set accessibility options\r\n\t\tthis.role = \"tooltip\";\r\n\r\n\t\tthis.visible = false;\r\n\t\tthis.opacity = 0;\r\n\r\n\t\tthis.x = 0;\r\n\t\tthis.y = 0;\r\n\r\n\t\tthis.events.on(\"visibilitychanged\", () => {\r\n\t\t\tif (this.visible) {\r\n\t\t\t\tthis.label.invalidate();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\t\t// Apply theme\r\n\t\tthis.applyTheme();\r\n\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Specifies if tooltip background should get stroke color from the sprite it is pointing to.\r\n\t *\r\n\t * @return {boolean}\r\n\t * @default false\r\n\t */\r\n\tpublic get getStrokeFromObject(): boolean {\r\n\t\treturn this.getPropertyValue(\"getStrokeFromObject\");\r\n\t}\r\n\r\n\t/**\r\n\t * Specifies if tooltip background should get stroke color from the sprite it is pointing to.\r\n\t *\r\n\t * @param {value} value boolean\r\n\t */\r\n\tpublic set getStrokeFromObject(value: boolean) {\r\n\t\tthis.setPropertyValue(\"getStrokeFromObject\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * Specifies if text color should be chosen automatically for a better readability.\r\n\t *\r\n\t * @return {boolean}\r\n\t * @default true\r\n\t */\r\n\tpublic get autoTextColor(): boolean {\r\n\t\treturn this.getPropertyValue(\"autoTextColor\");\r\n\t}\r\n\r\n\t/**\r\n\t * Specifies if text color should be chosen automatically for a better readability.\r\n\t *\r\n\t * @param {value} value boolean\r\n\t */\r\n\tpublic set autoTextColor(value: boolean) {\r\n\t\tthis.setPropertyValue(\"autoTextColor\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * Specifies if tooltip background should get fill color from the sprite it is pointing to.\r\n\t *\r\n\t * @return {boolean}\r\n\t * @default true\r\n\t */\r\n\tpublic get getFillFromObject(): boolean {\r\n\t\treturn this.getPropertyValue(\"getFillFromObject\");\r\n\t}\r\n\r\n\t/**\r\n\t * Specifies if tooltip background should get fill color from the sprite it is pointing to.\r\n\t *\r\n\t * @param {value} value boolean\r\n\t */\r\n\tpublic set getFillFromObject(value: boolean) {\r\n\t\tthis.setPropertyValue(\"getFillFromObject\", value, true);\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Creates and returns a background element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {PointedRectangle} Background\r\n\t */\r\n\tpublic createBackground(): this[\"_background\"] {\r\n\t\treturn new PointedRectangle();\r\n\t}\r\n\r\n\t/**\r\n\t * Pointer orientation: \"horizontal\" or \"vertical\".\r\n\t *\r\n\t * @default \"vertical\"\r\n\t * @param {PointerOrientation}  value  Orientation\r\n\t */\r\n\tpublic set pointerOrientation(value: PointerOrientation) {\r\n\t\tthis.setPropertyValue(\"pointerOrientation\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {PointerOrientation} Orientation\r\n\t */\r\n\tpublic get pointerOrientation(): PointerOrientation {\r\n\t\treturn this.getPropertyValue(\"pointerOrientation\");\r\n\t}\r\n\r\n\t/**\r\n\t * Duration in milliseconds for the animation to take place when the tolltip\r\n\t * is moving from one place to another.\r\n\t * @default 0\r\n\t * @param {number}  value  number\r\n\t */\r\n\tpublic set animationDuration(value: number) {\r\n\t\tthis.setPropertyValue(\"animationDuration\", value);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {PointerOrientation} Orientation\r\n\t */\r\n\tpublic get animationDuration(): number {\r\n\t\treturn this.getPropertyValue(\"animationDuration\");\r\n\t}\r\n\r\n\t/**\r\n\t * Tooltip animation easing function.\r\n\t * @todo: review description and default\r\n\t * @default $ease.cubicOut\r\n\t * @param {Function}  value (value: number) => number\r\n\t */\r\n\tpublic set animationEasing(value: (value: number) => number) {\r\n\t\tthis.setPropertyValue(\"animationEasing\", value);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Function}\r\n\t */\r\n\tpublic get animationEasing(): (value: number) => number {\r\n\t\treturn this.getPropertyValue(\"animationEasing\");\r\n\t}\r\n\r\n\t/**\r\n\t * HTML content for the Tooltip.\r\n\t *\r\n\t * Provided value will be used as is, without applying any further\r\n\t * formatting to it.\r\n\t *\r\n\t * @param {string}  value  HTML content\r\n\t */\r\n\tpublic set html(value: string) {\r\n\t\tif (this.label.html != value) {\r\n\t\t\tthis.label.html = value;\r\n\t\t\tthis.invalidate();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {string} HTML content\r\n\t */\r\n\tpublic get html(): string {\r\n\t\treturn this.label.html;\r\n\t}\r\n\r\n\t/**\r\n\t * SVG text content for the Tooltip.\r\n\t *\r\n\t * Text can have a number of formatting options supported by\r\n\t * [[TextFormatter]].\r\n\t *\r\n\t * @param {string}  value  SVG text\r\n\t */\r\n\tpublic set text(value: string) {\r\n\t\tif (this.label.text != value) {\r\n\t\t\tthis.label.text = value;\r\n\t\t\tthis.invalidate();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {string} SVG text\r\n\t */\r\n\tpublic get text(): string {\r\n\t\treturn this.label.text;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates the Tooltip.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic draw(): void {\r\n\t\tsuper.draw();\r\n\r\n\t\tlet label = this.label;\r\n\r\n\t\tif (label.invalid) {\r\n\t\t\tlabel.validate();\r\n\t\t}\r\n\r\n\t\tlet x: number = this._pointTo.x;\r\n\t\tlet y: number = this._pointTo.y;\r\n\r\n\t\tlet boundingRect: IRectangle = this._boundingRect;\r\n\r\n\t\tlet textW: number = label.measuredWidth;\r\n\t\tlet textH: number = label.measuredHeight;\r\n\r\n\t\tlet pointerLength = this.background.pointerLength;\r\n\r\n\t\tlet textX: number;\r\n\t\tlet textY: number;\r\n\r\n\t\t// try to handle if text is wider than br\r\n\t\tif (textW > boundingRect.width) {\r\n\t\t\tlet p0 = $utils.spritePointToDocument({ x: boundingRect.x, y: boundingRect.y }, this.parent);\r\n\t\t\tlet p1 = $utils.spritePointToDocument({ x: boundingRect.x + boundingRect.width, y: boundingRect.y + boundingRect.height }, this.parent);\r\n\r\n\t\t\tlet documentWidth = document.body.offsetWidth;\r\n\t\t\tlet documentHeight = document.body.offsetHeight;\r\n\r\n\t\t\tif (p1.x > documentWidth / 2) {\r\n\t\t\t\tboundingRect.x = boundingRect.width - textW;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tboundingRect.width = boundingRect.x + textW;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// horizontal\r\n\t\tif (this.pointerOrientation == \"horizontal\") {\r\n\t\t\ttextY = - textH / 2;\r\n\t\t\tif (x > boundingRect.x + boundingRect.width / 2) {\r\n\t\t\t\ttextX = - textW / 2 - pointerLength;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\ttextX = textW / 2 + pointerLength;\r\n\t\t\t}\r\n\t\t}\r\n\t\t// vertical pointer\r\n\t\telse {\r\n\t\t\ttextX = $math.fitToRange(0, boundingRect.x - x + textW / 2, boundingRect.x - x + boundingRect.width - textW / 2);\r\n\r\n\t\t\tif (y > boundingRect.y + textH + pointerLength) {\r\n\t\t\t\ttextY = - textH - pointerLength;\r\n\t\t\t\tthis._verticalOrientation = \"up\";\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\ttextY = pointerLength;\r\n\t\t\t\tthis._verticalOrientation = \"down\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\ttextY = $math.fitToRange(textY, boundingRect.y - y, boundingRect.y + boundingRect.height - textH - y);\r\n\r\n\t\tlabel.x = textX;\r\n\t\tlabel.y = textY;\r\n\t}\r\n\r\n\t/**\r\n\t * Overrides functionality from the superclass.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic updateBackground(): void {\r\n\t\tthis.group.addToBack(this.background.group);\r\n\t}\r\n\r\n\t/**\r\n\t * Draws Tooltip background (chrome, background and pointer/stem).\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic drawBackground(): void {\r\n\t\tlet label = this.label;\r\n\t\tlet background: PointedRectangle = this.background;\r\n\r\n\t\tlet textWidth: number = label.measuredWidth;\r\n\t\tlet textHeight: number = label.measuredHeight;\r\n\r\n\t\tlet boundingRect: IRectangle = this._boundingRect;\r\n\r\n\t\tlet bgWidth: number = textWidth;\r\n\t\tlet bgX: number = label.pixelX - textWidth / 2;\r\n\r\n\t\tlet bgHeight: number = textHeight;\r\n\t\tlet bgY: number = label.pixelY;\r\n\r\n\t\tlet x: number = this._pointTo.x;\r\n\t\tlet y: number = this._pointTo.y;\r\n\r\n\t\tlet boundX1: number = boundingRect.x - x;\r\n\t\tlet boundX2: number = boundX1 + boundingRect.width;\r\n\t\tlet boundY1: number = boundingRect.y - y;\r\n\t\tlet boundY2: number = boundY1 + boundingRect.height;\r\n\r\n\t\tbackground.x = bgX;\r\n\t\tbackground.y = bgY;\r\n\r\n\t\tbackground.width = bgWidth;\r\n\t\tbackground.height = bgHeight;\r\n\r\n\t\tif (this.fitPointerToBounds) {\r\n\t\t\tbackground.pointerX = $math.fitToRange(- background.x, boundX1 - background.x, boundX2 - background.x);\r\n\t\t\tbackground.pointerY = $math.fitToRange(- background.y, boundY1 - background.y, boundY2 - background.y);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tbackground.pointerX = - background.x;\r\n\t\t\tbackground.pointerY = - background.y;\r\n\t\t}\r\n\r\n\t\tbackground.validate();\r\n\t}\r\n\r\n\t/**\r\n\t * Set nes tooltip's anchor point and moves whole tooltip.\r\n\t *\r\n\t * @param {number}  x  X coordinate\r\n\t * @param {number}  y  Y coordinate\r\n\t */\r\n\tpublic pointTo(point: IPoint, instantly?: boolean): void {\r\n\t\tif (this._pointTo.x != point.x || this._pointTo.y != point.y) {\r\n\t\t\tthis._pointTo = point;\r\n\t\t\tthis.invalidate();\r\n\r\n\t\t\t// this helps to avoid strange animation from nowhere on initial show or when balloon was hidden already\r\n\t\t\tif (!this.visible || instantly) {\r\n\t\t\t\tthis.moveTo(this._pointTo);\r\n\t\t\t\tif (this._animation) {\r\n\t\t\t\t\tthis._animation.dispose();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// helps to avoid flicker on top/left corner\t\t\t\t\r\n\t\t\t\tif (this.pixelX == 0 && this.pixelY == 0) {\r\n\t\t\t\t\tthis.moveTo(this._pointTo);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis._animation = new Animation(this, [{ property: \"x\", to: point.x, from: this.pixelX }, { property: \"y\", to: point.y, from: this.pixelY }], this.animationDuration, this.animationEasing).start();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Sets numeric boundaries Tooltip needs to obey (so it does not go outside\r\n\t * specific area).\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {IRectangle} rectangle Boundary rectangle\r\n\t */\r\n\tpublic setBounds(rectangle: IRectangle): void {\r\n\t\tlet oldRect = this._boundingRect;\r\n\t\tif (oldRect.x != rectangle.x || oldRect.y != rectangle.y || oldRect.width != rectangle.width || oldRect.height != rectangle.height) {\r\n\t\t\tthis._boundingRect = rectangle;\r\n\t\t\tthis.invalidate();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Sets a [[Container]] instance to be used when calculating numeric\r\n\t * boundaries for the Tooltip.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {Container}  container  Boundary container\r\n\t */\r\n\tpublic set boundingContainer(container: Container) {\r\n\t\tthis._boundingContainer = container;\r\n\t\t// TODO remove closures ?\r\n\t\tcontainer.events.on(\"sizechanged\", this.updateBounds, this);\r\n\t\tcontainer.events.on(\"positionchanged\", this.updateBounds, this);\r\n\t}\r\n\r\n\t/**\r\n\t * Updates numeric boundaries for the Tooltip, based on the\r\n\t * `boundingCountrainer`.\r\n\t */\r\n\tprotected updateBounds(): void {\r\n\t\tlet boundingContainer: Container = this._boundingContainer;\r\n\t\t// to global\r\n\t\tlet rect: IRectangle = $utils.spriteRectToSvg({\r\n\t\t\tx: boundingContainer.pixelX,\r\n\t\t\ty: boundingContainer.pixelY,\r\n\t\t\twidth: boundingContainer.maxWidth,\r\n\t\t\theight: boundingContainer.maxHeight\r\n\t\t}, boundingContainer);\r\n\t\tthis.setBounds(rect);\r\n\t}\r\n\r\n\t/**\r\n\t * If tooltipOrientation is vertical, it can be drawn below or above point. We need to know this when solving overlapping\r\n\t * @return \"up\" | \"down\"\r\n\t */\r\n\tpublic get verticalOrientation(): \"up\" | \"down\" {\r\n\t\treturn this._verticalOrientation;\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/elements/Tooltip.ts","/**\r\n * Module that defines everything related to building bullets.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Container, IContainerProperties, IContainerAdapters, IContainerEvents } from \"../../core/Container\";\r\nimport { SpriteEventDispatcher, AMEvent } from \"../../core/Sprite\";\r\nimport { registry } from \"../../core/Registry\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[Bullet]].\r\n */\r\nexport interface IBulletProperties extends IContainerProperties {\r\n\r\n\t/**\r\n\t * Relative horizontal location within cell. (0-1)\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tlocationX?: number;\r\n\r\n\t/**\r\n\t * Relative vertical location within cell. (0-1)\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tlocationY?: number;\r\n\r\n\t/**\r\n\t * Specifies if bullet needs to be redrawn if the underlying data changes.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tisDynamic?: boolean;\r\n\r\n\t/**\r\n\t * [string description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {string}\r\n\t */\r\n\txField?: string;\r\n\r\n\t/**\r\n\t * [string description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {string}\r\n\t */\r\n\tyField?: string;\r\n\r\n\t/**\r\n\t * Defines if this bullet should be copied to legend marker\r\n\t */\r\n\tcopyToLegendMarker?: boolean;\r\n\r\n}\r\n\r\n/**\r\n * Defines events for [[Bullet]].\r\n */\r\nexport interface IBulletEvents extends IContainerEvents { }\r\n\r\n/**\r\n * Defines adapters for [[Bullet]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface IBulletAdapters extends IContainerAdapters, IBulletProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Class used to creates bullets.\r\n *\r\n * @see {@link IBulletEvents} for a list of available events\r\n * @see {@link IBulletAdapters} for a list of available Adapters\r\n * @todo Usage example\r\n * @important\r\n */\r\nexport class Bullet extends Container {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IBulletProperties}\r\n\t */\r\n\tpublic _properties!: IBulletProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IBulletAdapters}\r\n\t */\r\n\tpublic _adapter!: IBulletAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IBulletEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IBulletEvents;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"Bullet\";\r\n\t\tthis.isMeasured = false;\r\n\t\tthis.tooltipX = 0;\r\n\t\tthis.tooltipY = 0;\r\n\t\tthis.layout = \"none\";\r\n\r\n\t\tthis.copyToLegendMarker = true;\r\n\t}\r\n\r\n\t/**\r\n\t * Relative horizontal location within cell. (0-1)\r\n\t *\r\n\t * @param {number}  value  Location (0-1)\r\n\t */\r\n\tpublic set locationX(value: number) {\r\n\t\tthis.setPropertyValue(\"locationX\", value, false, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Location (0-1)\r\n\t */\r\n\tpublic get locationX(): number {\r\n\t\treturn this.getPropertyValue(\"locationX\");\r\n\t}\r\n\r\n\t/**\r\n\t * Relative vertical location within cell. (0-1)\r\n\t *\r\n\t * @param {number}  value  Location (0-1)\r\n\t */\r\n\tpublic set locationY(value: number) {\r\n\t\tthis.setPropertyValue(\"locationY\", value, false, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Location (0-1)\r\n\t */\r\n\tpublic get locationY(): number {\r\n\t\treturn this.getPropertyValue(\"locationY\");\r\n\t}\r\n\r\n\t/**\r\n\t * [xField description]\r\n\t *\r\n\t * @todo Description\r\n\t * @param {string}  value  [description]\r\n\t */\r\n\tpublic set xField(value: string) {\r\n\t\tthis.setPropertyValue(\"xField\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {string} [description]\r\n\t */\r\n\tpublic get xField(): string {\r\n\t\treturn this.getPropertyValue(\"xField\");\r\n\t}\r\n\r\n\t/**\r\n\t * [yField description]\r\n\t *\r\n\t * Description\r\n\t * @param {string}  value  [description]\r\n\t */\r\n\tpublic set yField(value: string) {\r\n\t\tthis.setPropertyValue(\"yField\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {string} [description]\r\n\t */\r\n\tpublic get yField(): string {\r\n\t\treturn this.getPropertyValue(\"yField\");\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates if the bullet is \"dynamic\".\r\n\t *\r\n\t * In most cases the bullets remain the same, even if the underlying data\r\n\t * changes.\r\n\t *\r\n\t * However, in cases where bullet also displays a label, or its size depends\r\n\t * on data, it also needs to be redrawn when the underlying data changes.\r\n\t *\r\n\t * Only those bullets that have set `isDynamic = true` will be redrawn each\r\n\t * time data changes. Regular bullets will be reused as they are.\r\n\t *\r\n\t * @default false\r\n\t * @param {boolean}  value  Redraw on data change?\r\n\t */\r\n\tpublic set isDynamic(value: boolean) {\r\n\t\tthis.setPropertyValue(\"isDynamic\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Redraw on data change?\r\n\t */\r\n\tpublic get isDynamic(): boolean {\r\n\t\treturn this.getPropertyValue(\"isDynamic\");\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Indicates if the bullet should be copied to legend marker\r\n\t *\r\n\t * @default false\r\n\t * @param {boolean}  value  Redraw on data change?\r\n\t */\r\n\tpublic set copyToLegendMarker(value: boolean) {\r\n\t\tthis.setPropertyValue(\"copyToLegendMarker\", value);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Redraw on data change?\r\n\t */\r\n\tpublic get copyToLegendMarker(): boolean {\r\n\t\treturn this.getPropertyValue(\"copyToLegendMarker\");\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"Bullet\"] = Bullet;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/charts/elements/Bullet.ts","/**\r\n * Functionality for drawing circles.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Sprite, ISpriteProperties, ISpriteAdapters, ISpriteEvents, SpriteEventDispatcher, AMEvent } from \"../Sprite\";\r\nimport { percent, Percent } from \"../utils/Percent\";\r\nimport { registry } from \"../Registry\";\r\nimport * as $utils from \"../utils/Utils\";\r\nimport * as $math from \"../utils/Math\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[Circle]].\r\n */\r\nexport interface ICircleProperties extends ISpriteProperties {\r\n\r\n\t/**\r\n\t * Radius of the circle.\r\n\t *\r\n\t * Can be either absolute (pixels) or relative ([Percent]).\r\n\t * @type {number | Percent}\r\n\t */\r\n\tradius?: number | Percent;\r\n\r\n}\r\n\r\n/**\r\n * Defines events for [[Circle]].\r\n */\r\nexport interface ICircleEvents extends ISpriteEvents { }\r\n\r\n/**\r\n * Defines adapters for [[Circle]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface ICircleAdapters extends ISpriteAdapters, ICircleProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Used to create a circle\r\n * @see {@link ICircleEvents} for a list of available events\r\n * @see {@link ICircleAdapters} for a list of available Adapters\r\n */\r\nexport class Circle extends Sprite {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ICircleProperties}\r\n\t */\r\n\tpublic _properties!: ICircleProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ICircleAdapters}\r\n\t */\r\n\tpublic _adapter!: ICircleAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {ICircleEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: ICircleEvents;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.radius = percent(100);\r\n\t\tthis.className = \"Circle\";\r\n\t\tthis.element = this.paper.add(\"circle\");\r\n\t\tthis.horizontalCenter = \"middle\";\r\n\t\tthis.verticalCenter = \"middle\";\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Draws the circle.\r\n\t */\r\n\tprotected draw(): void {\r\n\t\tsuper.draw();\r\n\t\tthis.element.attr({ \"r\": this.pixelRadius });\r\n\t}\r\n\r\n\t/**\r\n\t * Radius of the circle.\r\n\t *\r\n\t * Can be either absolute (pixels) or relative ([Percent]).\r\n\t *\r\n\t * @param {number | Percent}  value  Radius\r\n\t */\r\n\tpublic set radius(value: number | Percent) {\r\n\t\tthis.setPropertyValue(\"radius\", value, true);\r\n\t\tthis.invalidate();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Radius\r\n\t */\r\n\tpublic get radius(): number | Percent {\r\n\t\treturn this.getPropertyValue(\"radius\");\r\n\t}\r\n\r\n\t/**\r\n\t * Radius of the circle in pixels.\r\n\t *\r\n\t * This is a read-only property. To set radius in pixels, use `radius`\r\n\t * property.\r\n\t *\r\n\t * @readonly\r\n\t * @return {number} Radius (px)\r\n\t */\r\n\tpublic get pixelRadius(): number {\r\n\t\treturn $utils.relativeToValue(this.radius, $math.min(this.innerWidth / 2, this.innerHeight / 2));\r\n\t}\r\n\r\n\t/**\r\n\t * Updates bounding box.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic measureElement(): void {\r\n\t\tthis.bbox = {\r\n\t\t\tx: -this.pixelRadius,\r\n\t\t\ty: -this.pixelRadius,\r\n\t\t\twidth: this.pixelRadius * 2,\r\n\t\t\theight: this.pixelRadius * 2\r\n\t\t};\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"Circle\"] = Circle;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/elements/Circle.ts","/**\r\n * Slice module.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Container, IContainerProperties, IContainerAdapters, IContainerEvents } from \"../Container\";\r\nimport { DictionaryTemplate, DictionaryDisposer } from \"../utils/Dictionary\";\r\nimport { Sprite } from \"../Sprite\";\r\nimport { SpriteEventDispatcher, AMEvent } from \"../Sprite\";\r\nimport { IPoint } from \"../defs/IPoint\";\r\nimport { registry } from \"../Registry\";\r\nimport * as $math from \"../utils/Math\";\r\nimport * as $path from \"../rendering/Path\";\r\nimport * as $type from \"../utils/Type\";\r\nimport { IRectangle } from \"../defs/IRectangle\";\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[Slice]].\r\n */\r\nexport interface ISliceProperties extends IContainerProperties {\r\n\r\n\t/**\r\n\t * Radius of the slice in pixels.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tradius?: number;\r\n\r\n\t/**\r\n\t * Vertical radius for creating skewed slices.\r\n\t *\r\n\t * This is relevant to `radius`, e.g. 0.5 will set vertical radius to half\r\n\t * the `radius`.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tradiusY?: number;\r\n\r\n\t/**\r\n\t * Inner radius of the slice for creating cut out (donut) slices.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tinnerRadius?: number | string;\r\n\r\n\t/**\r\n\t * The angle at which left edge of the slice is drawn. (0-360)\r\n\t *\r\n\t * 0 is to the right of the center.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tstartAngle?: number;\r\n\r\n\t/**\r\n\t * [arc description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\tarc?: number;\r\n\r\n\t/**\r\n\t * [shiftRadius description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\tshiftRadius?: number;\r\n\r\n\t/**\r\n\t * Radius of slice's outer corners in pixels.\r\n\t *\r\n\t * @default 0\r\n\t * @type {number}\r\n\t */\r\n\tcornerRadius?: number;\r\n\r\n\t/**\r\n\t * Radius of slice's inner corners in pixels.\r\n\t *\r\n\t * @default 0\r\n\t * @type {number}\r\n\t */\r\n\tinnerCornerRadius?: number;\r\n\r\n}\r\n\r\n/**\r\n * Defines events for [[Slice]].\r\n */\r\nexport interface ISliceEvents extends IContainerEvents { }\r\n\r\n/**\r\n * Defines adapters for [[Slice]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface ISliceAdapters extends IContainerAdapters, ISliceProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Draws a wedged semi-circle - slice. Usually used for Pie/Donut charts.\r\n *\r\n * @see {@link ISliceEvents} for a list of available events\r\n * @see {@link ISliceAdapters} for a list of available Adapters\r\n */\r\nexport class Slice extends Container {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ISliceProperties}\r\n\t */\r\n\tpublic _properties!: ISliceProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ISliceAdapters}\r\n\t */\r\n\tpublic _adapter!: ISliceAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {ISliceEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: ISliceEvents;\r\n\r\n\t/**\r\n\t * Main slice element.\r\n\t *\r\n\t * Slice itself is a [[Container]] so that [[Slice3D]] could extend it and\r\n\t * add 3D elements to it.\r\n\t *\r\n\t * @type {Sprite}\r\n\t */\r\n\tpublic slice: Sprite;\r\n\r\n\t/**\r\n\t * [_a description]\r\n\t *\r\n\t * Used for 3D slice.\r\n\t *\r\n\t * @todo Description\r\n\t * @type {IPoint}\r\n\t */\r\n\tprotected _a: IPoint;\r\n\r\n\t/**\r\n\t * [_b description]\r\n\t *\r\n\t * Used for 3D slice.\r\n\t *\r\n\t * @todo Description\r\n\t * @type {IPoint}\r\n\t */\r\n\tprotected _b: IPoint;\r\n\r\n\t/**\r\n\t * [_c description]\r\n\t *\r\n\t * Used for 3D slice.\r\n\t *\r\n\t * @todo Description\r\n\t * @type {IPoint}\r\n\t */\r\n\tprotected _c: IPoint;\r\n\r\n\t/**\r\n\t * [_d description]\r\n\t *\r\n\t * Used for 3D slice.\r\n\t *\r\n\t * @todo Description\r\n\t * @type {IPoint}\r\n\t */\r\n\tprotected _d: IPoint;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\r\n\t\t// Init\r\n\t\tsuper();\r\n\t\tthis.className = \"Slice\";\r\n\r\n\t\t// Set defaults\r\n\t\t// @todo Override `measureElement` method and calculate size using math\r\n\t\tthis.cornerRadius = 0;\r\n\t\tthis.startAngle = 0;\r\n\t\tthis.innerRadius = 0;\r\n\t\tthis.radius = 0;\r\n\t\tthis.arc = 0;\r\n\t\tthis.shiftRadius = 0;\r\n\t\tthis.strokeOpacity = 1;\r\n\r\n\t\t// Create a slice wedge element\r\n\t\tthis.slice = this.createChild(Sprite);\r\n\t\tthis.slice.element = this.paper.add(\"path\");\r\n\t\tthis.slice.isMeasured = false;\r\n\t\tthis._disposers.push(this.slice);\r\n\r\n\t\tthis.element.attr({\"stroke-linejoin\":\"round\"});\r\n\t\tthis.element.attr({\"stroke-linecap\":\"round\"});\r\n\r\n\t\t// Apply theme\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Draws the element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic draw(): void {\r\n\t\tsuper.draw();\r\n\t\tthis.slice.element.attr({ \"d\": $path.arc(this.startAngle, this.arc, this.radius, this.innerRadius, this.radiusY, this.cornerRadius, this.innerCornerRadius) });\r\n\t\tthis.slice.invalidate();\r\n\t\tthis.shiftRadius = this.shiftRadius;\r\n\t}\r\n\r\n\r\n\tprotected getContainerBBox():IRectangle {\t\r\n\t\treturn $math.getArcRect(this.startAngle, this.startAngle + this.arc, this.radius);\r\n\t}\r\n\r\n\t/**\r\n\t * The angle at which left edge of the slice is drawn. (0-360)\r\n\t *\r\n\t * 0 is to the right of the center.\r\n\t *\r\n\t * @param {number}  value  Angle (0-360)\r\n\t */\r\n\tpublic set startAngle(value: number) {\r\n\t\tthis.setPropertyValue(\"startAngle\", $math.normalizeAngle(value), true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Angle (0-360)\r\n\t */\r\n\tpublic get startAngle(): number {\r\n\t\treturn this.getPropertyValue(\"startAngle\");\r\n\t}\r\n\r\n\t/**\r\n\t * [arc description]\r\n\t *\r\n\t * @todo Description\r\n\t * @param {number} value [description]\r\n\t */\r\n\tpublic set arc(value: number) {\r\n\t\tif (!$type.isNumber(value)) {\r\n\t\t\tvalue = 0;\r\n\t\t}\r\n\t\tthis.setPropertyValue(\"arc\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} [description]\r\n\t */\r\n\tpublic get arc(): number {\r\n\t\treturn this.getPropertyValue(\"arc\");\r\n\t}\r\n\r\n\t/**\r\n\t * Radius of the slice in pixels.\r\n\t *\r\n\t * @param {number}  value  Radius (px)\r\n\t */\r\n\tpublic set radius(value: number) {\r\n\t\tthis.setPropertyValue(\"radius\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Radius (px)\r\n\t */\r\n\tpublic get radius(): number {\r\n\t\tlet radius: number = this.getPropertyValue(\"radius\");\r\n\t\tif (!$type.isNumber(radius)) {\r\n\t\t\tradius = 0;\r\n\t\t}\r\n\t\treturn radius;\r\n\t}\r\n\r\n\t/**\r\n\t * Vertical radius for creating skewed slices.\r\n\t *\r\n\t * This is relevant to `radius`, e.g. 0.5 will set vertical radius to half\r\n\t * the `radius`.\r\n\t *\r\n\t * @param {number} value Vertical radius (0-1)\r\n\t */\r\n\tpublic set radiusY(value: number) {\r\n\t\tthis.setPropertyValue(\"radiusY\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Vertical radius (0-1)\r\n\t */\r\n\tpublic get radiusY(): number {\r\n\t\tlet value: number = this.getPropertyValue(\"radiusY\");\r\n\r\n\t\tif (!$type.isNumber(value)) {\r\n\t\t\tvalue = this.radius;\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\t/**\r\n\t * Inner radius of the slice for creating cut out (donut) slices.\r\n\t *\r\n\t * @default 0\r\n\t * @param {number}  value  Radius (px)\r\n\t */\r\n\tpublic set innerRadius(value: number) {\r\n\t\tthis.setPropertyValue(\"innerRadius\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Radius (px)\r\n\t */\r\n\tpublic get innerRadius(): number {\r\n\t\treturn this.getPropertyValue(\"innerRadius\");\r\n\t}\r\n\r\n\t/**\r\n\t * Radius of slice's outer corners in pixels.\r\n\t *\r\n\t * @default 0\r\n\t * @param {number}  value  Radius (px)\r\n\t */\r\n\tpublic set cornerRadius(value: number) {\r\n\t\tthis.setPropertyValue(\"cornerRadius\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Radius (px)\r\n\t */\r\n\tpublic get cornerRadius(): number {\r\n\t\treturn this.getPropertyValue(\"cornerRadius\");\r\n\t}\r\n\r\n\t/**\r\n\t * Radius of slice's inner corners in pixels.\r\n\t *\r\n\t * @default 0\r\n\t * @param {number}  value  Radius (px)\r\n\t */\r\n\tpublic set innerCornerRadius(value: number) {\r\n\t\tthis.setPropertyValue(\"innerCornerRadius\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Radius (px)\r\n\t */\r\n\tpublic get innerCornerRadius(): number {\r\n\t\treturn this.getPropertyValue(\"innerCornerRadius\");\r\n\t}\r\n\r\n\t/**\r\n\t * [shiftRadius description]\r\n\t *\r\n\t * 0-1\r\n\t *\r\n\t * @todo Description\r\n\t * @param {number} value [description]\r\n\t */\r\n\tpublic set shiftRadius(value: number) {\r\n\t\tthis.setPropertyValue(\"shiftRadius\", value);\r\n\t\tthis.dx = value * this.radius * this.ix;\r\n\t\tthis.dy = value * this.radiusY * this.iy;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} [description]\r\n\t */\r\n\tpublic get shiftRadius(): number {\r\n\t\treturn this.getPropertyValue(\"shiftRadius\");\r\n\t}\r\n\r\n\t/**\r\n\t * [ix description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @return {number} [description]\r\n\t */\r\n\tpublic get ix(): number {\r\n\t\treturn $math.cos(this.middleAngle);\r\n\t}\r\n\r\n\t/**\r\n\t * [iy description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @return {number} [description]\r\n\t */\r\n\tpublic get iy(): number {\r\n\t\tif (this.radius > 0) {\r\n\t\t\treturn $math.sin(this.middleAngle) * this.radiusY / this.radius;\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * An angle of the slice's middle.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {number} Angle\r\n\t */\r\n\tpublic get middleAngle(): number {\r\n\t\treturn this.startAngle + this.arc / 2;\r\n\t}\r\n\r\n\t/**\r\n\t * X coordinate for the slice tooltip.\r\n\t *\r\n\t * @return {number} X\r\n\t */\r\n\tprotected getTooltipX(): number {\r\n\t\tlet value = this.getPropertyValue(\"tooltipX\");\r\n\t\tif (!$type.isNumber(value)) {\r\n\t\t\tvalue = this.ix * (this.innerRadius + (this.radius - this.innerRadius) / 2);\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\t/**\r\n\t * Y coordinate for the slice tooltip.\r\n\t *\r\n\t * @return {number} Y\r\n\t */\r\n\tprotected getTooltipY(): number {\r\n\t\tlet value = this.getPropertyValue(\"tooltipY\");\r\n\t\tif (!$type.isNumber(value)) {\r\n\t\t\tvalue = this.iy * (this.innerRadius + (this.radius - this.innerRadius) / 2);\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"Slice\"] = Slice;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/elements/Slice.ts","var def = require('./_object-dp').f;\nvar has = require('./_has');\nvar TAG = require('./_wks')('toStringTag');\n\nmodule.exports = function (it, tag, stat) {\n  if (it && !has(it = stat ? it : it.prototype, TAG)) def(it, TAG, { configurable: true, value: tag });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_set-to-string-tag.js\n// module id = 93\n// module chunks = 26","var $export = require('./_export');\nvar defined = require('./_defined');\nvar fails = require('./_fails');\nvar spaces = require('./_string-ws');\nvar space = '[' + spaces + ']';\nvar non = '\\u200b\\u0085';\nvar ltrim = RegExp('^' + space + space + '*');\nvar rtrim = RegExp(space + space + '*$');\n\nvar exporter = function (KEY, exec, ALIAS) {\n  var exp = {};\n  var FORCE = fails(function () {\n    return !!spaces[KEY]() || non[KEY]() != non;\n  });\n  var fn = exp[KEY] = FORCE ? exec(trim) : spaces[KEY];\n  if (ALIAS) exp[ALIAS] = fn;\n  $export($export.P + $export.F * FORCE, 'String', exp);\n};\n\n// 1 -> String#trimLeft\n// 2 -> String#trimRight\n// 3 -> String#trim\nvar trim = exporter.trim = function (string, TYPE) {\n  string = String(defined(string));\n  if (TYPE & 1) string = string.replace(ltrim, '');\n  if (TYPE & 2) string = string.replace(rtrim, '');\n  return string;\n};\n\nmodule.exports = exporter;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_string-trim.js\n// module id = 94\n// module chunks = 26","module.exports = {};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_iterators.js\n// module id = 95\n// module chunks = 26","var isObject = require('./_is-object');\nmodule.exports = function (it, TYPE) {\n  if (!isObject(it) || it._t !== TYPE) throw TypeError('Incompatible receiver, ' + TYPE + ' required!');\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_validate-collection.js\n// module id = 96\n// module chunks = 26","/**\r\n * Functionality for drawing rectangles.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Sprite, ISpriteProperties, ISpriteAdapters, ISpriteEvents, SpriteEventDispatcher, AMEvent } from \"../Sprite\";\r\nimport { registry } from \"../Registry\";\r\nimport * as $math from \"../utils/Math\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[Rectangle]].\r\n */\r\nexport interface IRectangleProperties extends ISpriteProperties { }\r\n\r\n/**\r\n * Defines events for [[Rectangle]].\r\n */\r\nexport interface IRectangleEvents extends ISpriteEvents { }\r\n\r\n/**\r\n * Defines adapters for [[Rectangle]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface IRectangleAdapters extends ISpriteAdapters, IRectangleProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Used to draw a rectangle.\r\n *\r\n * @see {@link IRectangleEvents} for a list of available events\r\n * @see {@link IRectangleAdapters} for a list of available Adapters\r\n */\r\nexport class Rectangle extends Sprite {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IRectangleProperties}\r\n\t */\r\n\tpublic _properties!: IRectangleProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IRectangleAdapters}\r\n\t */\r\n\tpublic _adapter!: IRectangleAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IRectangleEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IRectangleEvents;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t * * Creates a `<rect>` element\r\n\t * * Creates default state\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"Rectangle\";\r\n\t\tthis.element = this.paper.add(\"rect\");\r\n\t\tthis.pixelPerfect = true;\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Draws the element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic draw(): void {\r\n\t\tsuper.draw();\r\n\r\n\t\tlet precision: number = this._positionPrecision;\r\n\t\tif (this.pixelPerfect) {\r\n\t\t\tprecision = 0;\r\n\t\t}\r\n\r\n\t\tlet w: number = $math.round(this.innerWidth, precision);\r\n\t\tlet h: number = $math.round(this.innerHeight, precision);\r\n\r\n\t\tthis.element.attr({\r\n\t\t\t\"width\": w,\r\n\t\t\t\"height\": h\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Updates bounding box based on element dimension settings.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic measureElement(): void {\r\n\t\tthis.bbox = {\r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\twidth: this.innerWidth,\r\n\t\t\theight: this.innerHeight\r\n\t\t};\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"Rectangle\"] = Rectangle;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/elements/Rectangle.ts","/**\n * ============================================================================\n * IMPORTS\n * ============================================================================\n * @hidden\n */\nimport { Ordering } from \"./Order\";\n\n\n/**\n * ============================================================================\n * COMPARING FUNCTIONS\n * ============================================================================\n * @hidden\n */\n\n/**\n * Comparing function used for ordering.\n *\n * @ignore Exclude from docs\n * @param  {number}    a  Number 1\n * @param  {number}    b  Number 2\n * @return {Ordering}     Result\n */\nexport function order(a: number, b: number): Ordering {\n\tif (a === b) {\n\t\treturn 0;\n\n\t} else if (a < b) {\n\t\treturn -1;\n\n\t} else {\n\t\treturn 1;\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/utils/Number.ts","/**\r\n * Handles formatting of pseudo-markup in text.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { BaseObject } from \"../Base\";\r\nimport { AMElement } from \"../rendering/AMElement\";\r\nimport { Adapter } from \"../utils/Adapter\";\r\nimport * as $strings from \"../utils/Strings\";\r\nimport * as $type from \"../utils/Type\";\r\n\r\n/**\r\n * Defines an interface for an object that holds a chunk of text.\r\n */\r\nexport interface ITextChunk {\r\n\r\n\t/**\r\n\t * Type of the chunk.\r\n\t *\r\n\t * @type {\"value\" | \"text\" | \"format\" | \"image\"}\r\n\t */\r\n\t\"type\": \"value\" | \"text\" | \"format\" | \"image\",\r\n\r\n\t/**\r\n\t * Text.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\t\"text\": string\r\n\r\n}\r\n\r\n/**\r\n * A list of Adapters for [[TextFormatter]].\r\n */\r\nexport interface ITextFormatterAdapters {\r\n\r\n\t/**\r\n\t * Applied to each chunk of text when it is parsed and added to chunk list.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tchunk: string\r\n\r\n}\r\n\r\n/**\r\n * Handles formatting of pseudo-markdown in text.\r\n *\r\n * @todo Encode < > in output\r\n * @todo Add more adapters\r\n * @important\r\n */\r\nexport class TextFormatter extends BaseObject {\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IExportAdapters}\r\n\t */\r\n\tpublic _adapter!: ITextFormatterAdapters;\r\n\r\n\t/**\r\n\t * Adapter.\r\n\t *\r\n\t * @type {Adapter<TextFormatter, ITextFormatterAdapters>}\r\n\t */\r\n\tpublic adapter = new Adapter<TextFormatter, ITextFormatterAdapters>(this);\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"TextFormatter\";\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\tprotected debug(): void {}\r\n\r\n\t/**\r\n\t * Formats the text according to specifications passed in.\r\n\t *\r\n\t * @param  {string}  text    Text to format\r\n\t * @param  {string}  output  Output format (svg, html)\r\n\t * @return {string}          Formatted text\r\n\t */\r\n\tpublic format(text: string, output?: string): string {\r\n\r\n\t\t// Apply default\r\n\t\tif (!$type.hasValue(output)) {\r\n\t\t\toutput = \"svg\";\r\n\t\t}\r\n\r\n\t\t// Init return value\r\n\t\tlet formatted: string = \"\";\r\n\r\n\t\t// Replace double (escaped) square spaces with remporary codes\r\n\t\ttext = this.escape(text);\r\n\r\n\t\t// Divvy up the string by style tags\r\n\t\tlet styles: string[] | null = text.match(/\\[([^\\]]*?)\\]/gm);\r\n\r\n\t\tif (!styles) {\r\n\t\t\t// Nothing to do here - no formatting elements\r\n\t\t\treturn this.wrap(text, \"\", output);\r\n\t\t}\r\n\r\n\t\t// Get pure text - no style tags\r\n\t\tlet texts: string[] = text.split(/\\[[^\\[\\]]*\\]/);\r\n\r\n\t\t// Go through each of the texts and wrap it in style tags\r\n\t\tfor (let i = 0; i < texts.length; i++) {\r\n\r\n\t\t\t// Get text bit\r\n\t\t\tlet t: string = texts[i];\r\n\r\n\t\t\t// Check if string is empty\r\n\t\t\tif (t === \"\") {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\t// Run through an adapter\r\n\t\t\tt = this.adapter.apply(\"chunk\", t);\r\n\r\n\t\t\t// Get related style\r\n\t\t\tlet s: string = \"\";\r\n\t\t\tif (i > 0) {\r\n\t\t\t\ts = styles[i - 1].replace('[', '').replace(']', '');\r\n\t\t\t}\r\n\r\n\t\t\t// Wrap text in tag\r\n\t\t\tformatted += this.wrap(t, s, output);\r\n\t\t}\r\n\r\n\t\t// Replace placeholders back\r\n\t\tformatted = this.unescape(formatted);\r\n\r\n\t\t// Return result\r\n\t\treturn this.cleanUp(formatted);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Replaces brackets with temporary placeholders.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {string}  text  Input text\r\n\t * @return {string}        Escaped text\r\n\t */\r\n\tpublic escape(text: string): string {\r\n\t\treturn text.replace(\"[[\", $strings.PLACEHOLDER_L).replace(\"]]\", $strings.PLACEHOLDER_R).replace(\"''\", $strings.PLACEHOLDER_Q);\r\n\t}\r\n\r\n\t/**\r\n\t * Replaces placeholders back to brackets.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {string}  text  Escaped text\r\n\t * @return {string}        Unescaped text\r\n\t */\r\n\tpublic unescape(text: string): string {\r\n\t\treturn text.replace($strings.PLACEHOLDER_L, \"[[\").replace($strings.PLACEHOLDER_R, \"]]\").replace($strings.PLACEHOLDER_Q, \"'\");\r\n\t}\r\n\r\n\t/**\r\n\t * Cleans up the text text for leftover double square brackets.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {string}  text  Input text\r\n\t * @return {string}        Cleaned up text\r\n\t */\r\n\tpublic cleanUp(text: string): string {\r\n\t\treturn text.replace(\"[[\", \"[\").replace(\"]]\", \"]\").replace(\"''\", \"'\");\r\n\t}\r\n\r\n\t/**\r\n\t * Wraps text into corresponding tags.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {string}  text   Text to wrap\r\n\t * @param  {string}  style  Styles\r\n\t * @param  {string}  output  Format to output in (svg, html)\r\n\t * @return {string}          Formatted string\r\n\t */\r\n\tpublic wrap(text: string, style: string, output: string): string {\r\n\r\n\t\tif (style === \"\" || style === \"/\") {\r\n\t\t\t//return text;\r\n\t\t\tstyle = \"\";\r\n\t\t}\r\n\r\n\t\tswitch (output) {\r\n\t\t\tcase \"html\":\r\n\t\t\t\treturn this.wrapHtml(text, this.translateStyleShortcuts(style));\r\n\t\t\tdefault:\r\n\t\t\t\treturn this.wrapSvg(text, this.translateStyleShortcuts(style));\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Wraps text in styled SVG tag.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {string}  text   Text to wrap\r\n\t * @param  {string}  style  Style property\r\n\t * @return {string}         Formatted tag\r\n\t */\r\n\tpublic wrapSvg(text: string, style: string): string {\r\n\t\tif (style === \"\") {\r\n\t\t\treturn \"<tspan>\" + text + \"</tspan>\";\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn \"<tspan style='\" + style + \"'>\" + text + \"</tspan>\";\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns an SVG `<tspan>` element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {string}     text   Text\r\n\t * @param  {string}     style  Style\r\n\t * @return {AMElement}         Element\r\n\t */\r\n\tpublic getSvgElement(text: string, style?: string): AMElement {\r\n\t\tlet element = new AMElement(\"tspan\");\r\n\t\telement.textContent = text;\r\n\t\tif (style) {\r\n\t\t\telement.node.setAttribute(\"style\", style);\r\n\t\t}\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t * Wraps text in HTML <span> tag.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {string}  text   Text to wrap\r\n\t * @param  {string}  style  Style property\r\n\t * @return {string}         Formatted tag\r\n\t * @todo Translate SVG styles into HTML ones\r\n\t */\r\n\tpublic wrapHtml(text: string, style: string): string {\r\n\t\tif (style === \"\") {\r\n\t\t\treturn \"<span>\" + text + \"</span>\";\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn \"<span style='\" + this.styleSvgToHtml(style) + \"'>\" + text + \"</span>\";\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns an HTML `<span>` element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {string}       text   Text/HTML\r\n\t * @param  {string}       style  Style definition\r\n\t * @return {HTMLElement}         HTML element\r\n\t */\r\n\tpublic getHtmlElement(text: string, style?: string): HTMLElement {\r\n\t\tlet element = document.createElement(\"span\");\r\n\t\telement.innerHTML = text;\r\n\t\tif (style) {\r\n\t\t\telement.setAttribute(\"style\", style);\r\n\t\t}\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t * Trabslates SVG CSS into HTML CSS.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {string}  style  SVG CSS\r\n\t * @return {string}         HTML CSS\r\n\t * @todo Implement actual translation\r\n\t */\r\n\tpublic styleSvgToHtml(style: string): string {\r\n\t\tstyle = style.replace(/fill:/, \"color:\");\r\n\t\treturn style;\r\n\t}\r\n\r\n\t/**\r\n\t * Translates style shortcuts into full styles, i.e.:\r\n\t * \"bold\" => \"font-weight: bold\"\r\n\t * \"#f00\" => \"fill: #f00\"\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {string}  style  Untranslated style\r\n\t * @return {string}         Translated style\r\n\t * @todo Implement actual translation\r\n\t */\r\n\tpublic translateStyleShortcuts(style: string): string {\r\n\r\n\t\t// Get style parts\r\n\t\tlet b: string[] | null = style.match(/([\\w\\-]*:[\\s]?[^;\\s\\]]*)|(\\#[\\w]{1,6})|([\\w]+)|(\\/)/gi);\r\n\r\n\t\t// Empty?\r\n\t\tif (!b) {\r\n\t\t\treturn style;\r\n\t\t}\r\n\r\n\r\n\t\t// Check each part\r\n\t\tfor (let i: number = 0; i < b.length; i++) {\r\n\r\n\t\t\tif (b[i].match(/^bold$/i)) {\r\n\t\t\t\t// Bold\r\n\t\t\t\tb[i] = \"font-weight:\" + b[i];\r\n\t\t\t}\r\n\t\t\telse if (b[i] == \"/\") {\r\n\t\t\t\t// Just closing tag\r\n\t\t\t\t// Do nothing\r\n\t\t\t\tb[i] = \"\";\r\n\t\t\t}\r\n\t\t\telse if (!b[i].match(/:/)) {\r\n\t\t\t\t// Color\r\n\t\t\t\tb[i] = \"fill:\" + b[i];\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn b.join(';');\r\n\t}\r\n\r\n\t/**\r\n\t * Splits string into chunks. (style blocks, quoted blocks, regular blocks)\r\n\t *\r\n\t * If the second parameter `quotedBlocks` is set to `true` this method will\r\n\t * also single out text blocks enclosed within single quotes that no\r\n\t * formatting should be applied to, and they should be displayed as is.\r\n\t *\r\n\t * Default for the above is `false`, so that you can use single quote in text\r\n\t * without escaping it.\r\n\t *\r\n\t * If enabled, single quotes can be escaped by doubling it - adding two\r\n\t * single quotes, which will be replaced by a one single quote in the final\r\n\t * output.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {string}    text          Text to chunk\r\n\t * @param  {boolean}   quotedBlocks  Use quoted blocks\r\n\t * @return {string[]}                Array of string chunks\r\n\t */\r\n\tpublic chunk(text: string, quotedBlocks: boolean = false): ITextChunk[] {\r\n\r\n\t\t// Init result\r\n\t\tlet res: ITextChunk[] = [];\r\n\r\n\t\t// Replace double (escaped) square spaces and quotes with temporary codes\r\n\t\ttext = this.escape(text);\r\n\r\n\t\t// Deal with style blocks\r\n\t\tlet chunks = quotedBlocks ? text.split(\"'\") : [text];\r\n\t\tfor (let i: number = 0; i < chunks.length; i++) {\r\n\t\t\tlet chunk: string = chunks[i];\r\n\r\n\t\t\t// Empty?\r\n\t\t\tif (chunk === \"\") {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif ((i % 2) === 0) {\r\n\r\n\t\t\t\t// Text outside quotes\r\n\t\t\t\t// Parse for style blocks which are \"text\" chunks, the rest chunks are\r\n\t\t\t\t// \"value\"\r\n\r\n\t\t\t\tchunk = chunk.replace(\"][\", \"]\" + $strings.PLACEHOLDER + \"[\");\r\n\t\t\t\tlet chunks2 = chunk.split(/[\\[\\]]+/);\r\n\t\t\t\tfor (let i2: number = 0; i2 < chunks2.length; i2++) {\r\n\t\t\t\t\tlet chunk2: string = this.unescape(chunks2[i2]);\r\n\r\n\t\t\t\t\t// Placeholder?\r\n\t\t\t\t\tif (chunk2 === $strings.PLACEHOLDER) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Empty?\r\n\t\t\t\t\tif (chunk2 === \"\") {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Block or value\r\n\t\t\t\t\tif ((i2 % 2) === 0) {\r\n\t\t\t\t\t\tres.push({\r\n\t\t\t\t\t\t\t\"type\": \"value\",\r\n\t\t\t\t\t\t\t\"text\": this.adapter.apply(\"chunk\", chunk2)\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tres.push({\r\n\t\t\t\t\t\t\t\"type\": \"format\",\r\n\t\t\t\t\t\t\t\"text\": \"[\" + chunk2 + \"]\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\telse {\r\n\r\n\t\t\t\t// A text within doublequotes\r\n\t\t\t\t// All chunks are \"text\"\r\n\r\n\t\t\t\tlet chunks2 = chunk.split(/[\\[\\]]+/);\r\n\t\t\t\tfor (let i2: number = 0; i2 < chunks2.length; i2++) {\r\n\t\t\t\t\tlet chunk2: string = this.unescape(chunks2[i2]);\r\n\r\n\t\t\t\t\t// Empty?\r\n\t\t\t\t\tif (chunk2 === \"\") {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Block or text\r\n\t\t\t\t\tif ((i2 % 2) === 0) {\r\n\t\t\t\t\t\tres.push({\r\n\t\t\t\t\t\t\t\"type\": \"text\",\r\n\t\t\t\t\t\t\t\"text\": chunk2\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (this.isImage(chunk2)) {\r\n\t\t\t\t\t\tres.push({\r\n\t\t\t\t\t\t\t\"type\": \"image\",\r\n\t\t\t\t\t\t\t\"text\": \"[\" + chunk2 + \"]\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tres.push({\r\n\t\t\t\t\t\t\t\"type\": \"format\",\r\n\t\t\t\t\t\t\t\"text\": \"[\" + chunk2 + \"]\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if supplied format contains image information and should be\r\n\t * formatted as such.\r\n\t * I.e.: `[img: myImage.png]`\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {string}   text  Format\r\n\t * @return {boolean}        `true` if it is an image\r\n\t */\r\n\tpublic isImage(text: string): boolean {\r\n\t\treturn text.match(/img[ ]?:/) ? true : false;\r\n\t}\r\n\r\n}\r\n\r\n\r\nlet formatter: TextFormatter;\r\n\r\n/**\r\n * Returns the global instance of [[TextFormatter]].\r\n *\r\n * All classes and instances should reuse this universal text formatter,\r\n * rather than create their own instance of it.\r\n *\r\n * @type {TextFormatter}\r\n */\r\nexport function getTextFormatter(): TextFormatter {\r\n\tif (formatter == null) {\r\n\t\tformatter = new TextFormatter();\r\n\t}\r\n\r\n\treturn formatter;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/formatters/TextFormatter.ts","/**\r\n * Handles date and time formatting\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Sprite } from \"../Sprite\";\r\nimport { Language, ILocaleProperties } from \"../utils/Language\";\r\nimport { BaseObject } from \"../Base\";\r\nimport { ITextChunk, getTextFormatter } from \"../formatters/TextFormatter\";\r\nimport * as $strings from \"../utils/Strings\";\r\nimport * as $utils from \"../utils/Utils\";\r\nimport * as $type from \"../utils/Type\";\r\n\r\n/**\r\n * Interface describing parsed date format definition.\r\n */\r\nexport interface DateFormatInfo {\r\n\t\"template\": string;\r\n\t\"parts\": any[];\r\n}\r\n\r\n/**\r\n * Month names.\r\n *\r\n * @type {string}\r\n */\r\nexport type MonthNames = \"January\" | \"February\" | \"March\" | \"April\" | \"May\" | \"June\" | \"July\" | \"August\" | \"September\" | \"October\" | \"November\" | \"December\";\r\n\r\n/**\r\n * Short month names.\r\n *\r\n * @param {string}\r\n */\r\nexport type ShortMonthNames = \"Jan\" | \"Feb\" | \"Mar\" | \"Apr\" | \"May(short)\" | \"Jun\" | \"Jul\" | \"Aug\" | \"Sep\" | \"Oct\" | \"Nov\" | \"Dec\";\r\n\r\n/**\r\n * Weekedays.\r\n *\r\n * @type {string}\r\n */\r\nexport type Weekdays = \"Sunday\" | \"Monday\" | \"Tuesday\" | \"Wednesday\" | \"Thursday\" | \"Friday\" | \"Saturday\";\r\n\r\n/**\r\n * Short weekday names.\r\n *\r\n * @type {string}\r\n */\r\nexport type ShortWeekdays = \"Sun\" | \"Mon\" | \"Tue\" | \"Wed\" | \"Thu\" | \"Fri\" | \"Sat\";\r\n\r\n/**\r\n * Handles date and time formatting.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v4/concepts/formatters/formatting-date-time/} Tutorial on date/time formatting\r\n * @todo Better type casting of passed in date?\r\n * @todo Quarter support?\r\n * @todo When parsing named months make the search case-insensitive\r\n * @todo Escape a.m./p.m. properly when used in RegEx\r\n */\r\nexport class DateFormatter extends BaseObject {\r\n\r\n\t/**\r\n\t * Date format.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tprotected _dateFormat: string = \"yyyy-MM-dd\";\r\n\r\n\t/**\r\n\t * Input date format.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tprotected _inputDateFormat: string = \"yyyy-MM-dd\";\r\n\r\n\t/**\r\n\t * Assume UTC time zone.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tprotected _utc: boolean = false;\r\n\r\n\t/**\r\n\t * First day of week.\r\n\t *\r\n\t * 0 - Sunday\r\n\t * 1 - Monday\r\n\t *\r\n\t * Etc.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tprotected _firstDayOfWeek: number = 1;\r\n\r\n\t/**\r\n\t * A list of month names.\r\n\t *\r\n\t * @type {Array<MonthNames>}\r\n\t */\r\n\tprotected _months: Array<MonthNames> = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\r\n\r\n\t/**\r\n\t * A list of short month names.\r\n\t *\r\n\t * @param {Array<ShortMonthNames>}\r\n\t */\r\n\tprotected _monthsShort: Array<ShortMonthNames> = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May(short)\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\r\n\r\n\t/**\r\n\t * A list of weekday names.\r\n\t *\r\n\t * @type {Array<Weekdays>}\r\n\t */\r\n\tprotected _weekdays: Array<Weekdays> = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\r\n\r\n\t/**\r\n\t * A list of short weekday names.\r\n\t *\r\n\t * @type {Array<ShortWeekdays>}\r\n\t */\r\n\tprotected _weekdaysShort: Array<ShortWeekdays> = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\r\n\r\n\t/**\r\n\t * Output format to produce. If the format calls for applying color to the\r\n\t * formatted value, this setting will determine what markup to use: SVG or\r\n\t * HTML.\r\n\t *\r\n\t * Available options: svg, html.\r\n\t *\r\n\t * @default \"svg\"\r\n\t * @type {string}\r\n\t */\r\n\tprotected _outputFormat: string = \"svg\";\r\n\r\n\t/**\r\n\t * Holds reference to parent [[Sprite]] object.\r\n\t *\r\n\t * @type {Optional<Sprite>}\r\n\t */\r\n\tpublic sprite: $type.Optional<Sprite>;\r\n\r\n\t/**\r\n\t * Holds reference to [[Language]] object.\r\n\t *\r\n\t * @type {Optional<Language>}\r\n\t */\r\n\tpublic language: $type.Optional<Language>;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"DateFormatter\";\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Formats the date value according to specified format.\r\n\t *\r\n\t * @see {@link https://www.amcharts.com/docs/v4/concepts/formatters/formatting-date-time/} Tutorial on date/time formatting\r\n\t * @param  {any}     source  Date value\r\n\t * @param  {string}  format  Format\r\n\t * @return {string}          Formatted date string\r\n\t */\r\n\tpublic format(source: any, format?: string): string {\r\n\r\n\t\t// No language?\r\n\t\tif (!this.language) {\r\n\t\t\tif (this.sprite) {\r\n\t\t\t\tthis.language = this.sprite.language;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.language = new Language;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// No format passed in or it's empty\r\n\t\tif (typeof format === \"undefined\" || format === \"\") {\r\n\t\t\tformat = this._dateFormat;\r\n\t\t}\r\n\r\n\t\t// Clean format\r\n\t\tformat = $utils.cleanFormat(format);\r\n\r\n\t\t// get format info (it will also deal with parser caching)\r\n\t\tlet info = this.parseFormat(format);\r\n\r\n\t\t// Do any casting if required\r\n\t\t// This will take care of timestamps as well as Date objects\r\n\t\tlet date: Date = $utils.anyToDate(source);\r\n\r\n\t\t// Check if it's a valid date\r\n\t\tif (!$type.isNumber(date.getTime())) {\r\n\t\t\treturn this.language.translate(\"Invalid date\");\r\n\t\t}\r\n\r\n\t\t// Apply format\r\n\t\tlet formatted = this.applyFormat(date, info, this.language);\r\n\r\n\t\t// We're done\r\n\t\treturn formatted;\r\n\t}\r\n\r\n\t/**\r\n\t * Parses format into structured infromation.\r\n\t *\r\n\t * @param {string} format Format template\r\n\t */\r\n\tprotected parseFormat(format: string): DateFormatInfo {\r\n\t\t// Check cache\r\n\t\tif (typeof (this.getCache(format)) !== \"undefined\") {\r\n\t\t\treturn this.getCache(format);\r\n\t\t}\r\n\r\n\t\t// Init format parse info holder\r\n\t\tlet info: DateFormatInfo = {\r\n\t\t\t\"template\": \"\",\r\n\t\t\t\"parts\": <any>[]\r\n\t\t};\r\n\r\n\t\t// Let TextFormatter split into chunks\r\n\t\tlet chunks: ITextChunk[] = getTextFormatter().chunk(format, true);\r\n\t\tfor (let i: number = 0; i < chunks.length; i++) {\r\n\t\t\tlet chunk: ITextChunk = chunks[i];\r\n\r\n\t\t\tif (chunk.type === \"value\") {\r\n\r\n\t\t\t\t// Just \"Date\"?\r\n\t\t\t\tif (chunk.text.match(/^date$/i)) {\r\n\t\t\t\t\tchunk.text = this._dateFormat;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Find all possible parts\r\n\t\t\t\tlet matches = chunk.text.match(/G|yyyy|yyy|yy|y|YYYY|YYY|YY|Y|u|MMMMM|MMMM|MMM|MM|M|ww|w|W|dd|d|DDD|DD|D|F|g|EEEEE|EEEE|EEE|EE|E|eeeee|eeee|eee|ee|e|aaa|aa|a|hh|h|HH|H|KK|K|kk|k|mm|m|ss|s|SSS|SS|S|A|zzzz|zzz|zz|z|ZZ|Z|t|x|nnn|nn|n|i|I/g);\r\n\r\n\t\t\t\t// Found?\r\n\t\t\t\tif (matches) {\r\n\r\n\t\t\t\t\t// Populate template\r\n\t\t\t\t\tfor (let x = 0; x < matches.length; x++) {\r\n\t\t\t\t\t\tinfo.parts.push(matches[x]);\r\n\t\t\t\t\t\tchunk.text = chunk.text.replace(matches[x], $strings.PLACEHOLDER);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Apply to template\r\n\t\t\tinfo.template += chunk.text;\r\n\t\t}\r\n\r\n\t\t// Apply style formatting\r\n\t\t//info.template = getTextFormatter().format(info.template, this.outputFormat);\r\n\r\n\t\t// Save cache\r\n\t\tthis.setCache(format, info);\r\n\r\n\t\treturn info;\r\n\t}\r\n\r\n\t/**\r\n\t * Applies format to Date.\r\n\t *\r\n\t * @param  {Date}            date      Date object\r\n\t * @param  {DateFormatInfo}  info      Parsed format information\r\n\t * @param  {Language}        language  Language\r\n\t * @return {string}                    Formatted date string\r\n\t */\r\n\tprotected applyFormat(date: Date, info: DateFormatInfo, language: Language): string {\r\n\r\n\t\t// Init return value\r\n\t\tlet res = info.template;\r\n\r\n\t\t// Get values\r\n\t\tlet fullYear: number,\r\n\t\t\tmonth: number,\r\n\t\t\tweekday: number,\r\n\t\t\tday: number,\r\n\t\t\thours: number,\r\n\t\t\tminutes: number,\r\n\t\t\tseconds: number,\r\n\t\t\tmilliseconds: number,\r\n\t\t\toffset: number = date.getTimezoneOffset(),\r\n\t\t\ttimestamp: number = date.getTime();\r\n\t\tif (this.utc) {\r\n\t\t\tfullYear = date.getUTCFullYear();\r\n\t\t\tmonth = date.getUTCMonth();\r\n\t\t\tweekday = date.getUTCDay();\r\n\t\t\tday = date.getUTCDate();\r\n\t\t\thours = date.getUTCHours();\r\n\t\t\tminutes = date.getUTCMinutes();\r\n\t\t\tseconds = date.getUTCSeconds();\r\n\t\t\tmilliseconds = date.getUTCMilliseconds();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tfullYear = date.getFullYear();\r\n\t\t\tmonth = date.getMonth();\r\n\t\t\tweekday = date.getDay();\r\n\t\t\tday = date.getDate();\r\n\t\t\thours = date.getHours();\r\n\t\t\tminutes = date.getMinutes();\r\n\t\t\tseconds = date.getSeconds();\r\n\t\t\tmilliseconds = date.getMilliseconds();\r\n\t\t}\r\n\r\n\t\t// Go through each part and format/replace it in template\r\n\t\tfor (let i = 0; i < info.parts.length; i++) {\r\n\t\t\tlet value: string = \"\";\r\n\t\t\tswitch (info.parts[i]) {\r\n\r\n\t\t\t\tcase \"G\":\r\n\t\t\t\t\tvalue = language.translate(\r\n\t\t\t\t\t\tfullYear < 0\r\n\t\t\t\t\t\t\t? \"_era_bc\"\r\n\t\t\t\t\t\t\t: \"_era_ad\"\r\n\t\t\t\t\t);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"yyyy\":\r\n\t\t\t\t\tvalue = fullYear.toString();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"yyy\":\r\n\t\t\t\tcase \"yy\":\r\n\t\t\t\tcase \"y\":\r\n\t\t\t\t\tvalue = fullYear.toString().substr(-info.parts[i].length);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"YYYY\":\r\n\t\t\t\tcase \"YYY\":\r\n\t\t\t\tcase \"YY\":\r\n\t\t\t\tcase \"Y\":\r\n\t\t\t\t\tlet week = $utils.getWeek(date);\r\n\t\t\t\t\tlet year = fullYear;\r\n\t\t\t\t\tif (week == 1 && weekday > 1) {\r\n\t\t\t\t\t\tyear++;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (info.parts[i] == \"YYYY\") {\r\n\t\t\t\t\t\tvalue = year.toString();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tvalue = year.toString().substr(-info.parts[i].length);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"u\":\r\n\t\t\t\t\t// @todo\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"MMMMM\":\r\n\t\t\t\t\tvalue = language.translate(this._months[month]).substr(0, 1);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"MMMM\":\r\n\t\t\t\t\tvalue = language.translate(this._months[month]);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"MMM\":\r\n\t\t\t\t\tvalue = language.translate(this._monthsShort[month]);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"MM\":\r\n\t\t\t\t\tvalue = $utils.padString(month + 1, 2, \"0\");\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"M\":\r\n\t\t\t\t\tvalue = (month + 1).toString();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"ww\":\r\n\t\t\t\t\tvalue = $utils.padString($utils.getWeek(date, this.utc), 2, \"0\");\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"w\":\r\n\t\t\t\t\tvalue = $utils.getWeek(date, this.utc).toString();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"W\":\r\n\t\t\t\t\tvalue = $utils.getMonthWeek(date, this.utc).toString();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"dd\":\r\n\t\t\t\t\tvalue = $utils.padString(day, 2, \"0\");\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"d\":\r\n\t\t\t\t\tvalue = day.toString();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"DD\":\r\n\t\t\t\tcase \"DDD\":\r\n\t\t\t\t\tvalue = $utils.padString($utils.getYearDay(date, this.utc).toString(), info.parts[i].length, \"0\");\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"D\":\r\n\t\t\t\t\tvalue = $utils.getYearDay(date, this.utc).toString();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"F\":\r\n\t\t\t\t\t// @todo\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"g\":\r\n\t\t\t\t\t// @todo\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"t\":\r\n\t\t\t\t\tvalue = language.translateFunc(\"_dateOrd\").call(this, day);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"E\":\r\n\t\t\t\t\tvalue = (weekday || 7).toString();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"EE\":\r\n\t\t\t\t\tvalue = $utils.padString((weekday || 7).toString(), 2, \"0\");\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"EEE\":\r\n\t\t\t\tcase \"eee\":\r\n\t\t\t\t\tvalue = language.translate(this._weekdaysShort[weekday]);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"EEEE\":\r\n\t\t\t\tcase \"eeee\":\r\n\t\t\t\t\tvalue = language.translate(this._weekdays[weekday]);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"EEEEE\":\r\n\t\t\t\tcase \"eeeee\":\r\n\t\t\t\t\tvalue = language.translate(this._weekdays[weekday]).substr(0, 1);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"e\":\r\n\t\t\t\tcase \"ee\":\r\n\t\t\t\t\tvalue = (weekday - this.firstDayOfWeek + 1).toString();\r\n\t\t\t\t\tif (info.parts[i] == \"ee\") {\r\n\t\t\t\t\t\tvalue = $utils.padString(value, 2, \"0\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"a\":\r\n\t\t\t\t\tif (hours > 12) {\r\n\t\t\t\t\t\tvalue = language.translate(\"PM\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (hours === 12 && (minutes > 0)) {\r\n\t\t\t\t\t\tvalue = language.translate(\"PM\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tvalue = language.translate(\"AM\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"aa\":\r\n\t\t\t\t\tif (hours > 12) {\r\n\t\t\t\t\t\tvalue = language.translate(\"P.M.\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (hours === 12 && (minutes > 0)) {\r\n\t\t\t\t\t\tvalue = language.translate(\"P.M.\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tvalue = language.translate(\"A.M.\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"aaa\":\r\n\t\t\t\t\tif (hours > 12) {\r\n\t\t\t\t\t\tvalue = language.translate(\"P\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (hours === 12 && (minutes > 0)) {\r\n\t\t\t\t\t\tvalue = language.translate(\"P\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tvalue = language.translate(\"A\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"h\":\r\n\t\t\t\t\tvalue = $utils.get12Hours(hours).toString();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"hh\":\r\n\t\t\t\t\tvalue = $utils.padString($utils.get12Hours(hours), 2, \"0\");\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"H\":\r\n\t\t\t\t\tvalue = hours.toString();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"HH\":\r\n\t\t\t\t\tvalue = $utils.padString(hours, 2, \"0\");\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"K\":\r\n\t\t\t\t\tvalue = $utils.get12Hours(hours, 0).toString();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"KK\":\r\n\t\t\t\t\tvalue = $utils.padString($utils.get12Hours(hours, 0), 2, \"0\");\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"k\":\r\n\t\t\t\t\tvalue = (hours + 1).toString();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"kk\":\r\n\t\t\t\t\tvalue = $utils.padString(hours + 1, 2, \"0\");\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"m\":\r\n\t\t\t\t\tvalue = minutes.toString();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"mm\":\r\n\t\t\t\t\tvalue = $utils.padString(minutes, 2, \"0\");\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"s\":\r\n\t\t\t\t\tvalue = seconds.toString();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"ss\":\r\n\t\t\t\t\tvalue = $utils.padString(seconds, 2, \"0\");\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"S\":\r\n\t\t\t\tcase \"SS\":\r\n\t\t\t\tcase \"SSS\":\r\n\t\t\t\t\tvalue = Math.round((milliseconds / 1000) * Math.pow(10, info.parts[i].length)).toString();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"x\":\r\n\t\t\t\t\tvalue = timestamp.toString();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"n\":\r\n\t\t\t\tcase \"nn\":\r\n\t\t\t\tcase \"nnn\":\r\n\t\t\t\t\tvalue = $utils.padString(milliseconds, info.parts[i].length, \"0\");\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"z\":\r\n\t\t\t\t\tvalue = $utils.getTimeZone(date, false, false, this.utc);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"zz\":\r\n\t\t\t\t\tvalue = $utils.getTimeZone(date, true, false, this.utc);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"zzz\":\r\n\t\t\t\t\tvalue = $utils.getTimeZone(date, false, true, this.utc);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"zzzz\":\r\n\t\t\t\t\tvalue = $utils.getTimeZone(date, true, true, this.utc);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"Z\":\r\n\t\t\t\tcase \"ZZ\":\r\n\t\t\t\t\tlet tz = Math.abs(offset) / 60;\r\n\t\t\t\t\tlet tzh = Math.floor(tz);\r\n\t\t\t\t\tlet tzm = tz * 60 - tzh * 60;\r\n\r\n\t\t\t\t\tif (info.parts[i] == \"Z\") {\r\n\t\t\t\t\t\tvalue = \"GMT\";\r\n\t\t\t\t\t\tvalue += offset > 0 ? \"-\" : \"+\";\r\n\t\t\t\t\t\tvalue += $utils.padString(tzh, 2) + \":\" + $utils.padString(tzm, 2);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tvalue = offset > 0 ? \"-\" : \"+\";\r\n\t\t\t\t\t\tvalue += $utils.padString(tzh, 2) + $utils.padString(tzm, 2);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"i\":\r\n\t\t\t\t\tvalue = date.toISOString();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"I\":\r\n\t\t\t\t\tvalue = date.toUTCString();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\t\t\tres = res.replace($strings.PLACEHOLDER, value);\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * Parses any input value into Date object.\r\n\t *\r\n\t * @see {@link https://www.amcharts.com/docs/v4/concepts/formatters/formatting-date-time/#Parsing_Dates} Tutorial on date/time parsing\r\n\t * @param  {any}     source  Source value\r\n\t * @param  {string}  format  Source format\r\n\t * @return {Date}            Date object\r\n\t */\r\n\tpublic parse(source: any, format?: string): Date {\r\n\r\n\t\t// Format set?\r\n\t\tif (!$type.hasValue(format)) {\r\n\t\t\tformat = this.inputDateFormat;\r\n\t\t}\r\n\r\n\t\t// Is it already a Date\r\n\t\tif (source instanceof Date) {\r\n\t\t\treturn source;\r\n\t\t}\r\n\r\n\t\t// Is it a numeric timestamp\r\n\t\tif (typeof source === \"number\") {\r\n\t\t\treturn new Date(source);\r\n\t\t}\r\n\r\n\t\t// No? Let's check if it's string, and try converting to it if nec\r\n\t\tif (typeof source !== \"string\") {\r\n\t\t\tsource = source.toString();\r\n\t\t}\r\n\r\n\t\t// no language?\r\n\t\tif (!this.language) {\r\n\t\t\tif (this.sprite) {\r\n\t\t\t\tthis.language = this.sprite.language;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.language = new Language;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Init return value\r\n\t\tlet res: Date = new Date(1970, 0, 1, 0, 0, 0);\r\n\r\n\t\t// Init RegEx for parsing\r\n\t\tlet reg: string = \"\";\r\n\r\n\t\t// Clean format\r\n\t\tformat = $utils.cleanFormat(format);\r\n\r\n\t\t// Parse format\r\n\t\tlet info = this.parseFormat(format);\r\n\r\n\t\t// Init parsed items holder\r\n\t\tlet parsedIndexes = {\r\n\t\t\t\"year\": -1,\r\n\t\t\t\"year3\": -1,\r\n\t\t\t\"year2\": -1,\r\n\t\t\t\"year1\": -1,\r\n\t\t\t\"month\": -1,\r\n\t\t\t\"monthShort\": -1,\r\n\t\t\t\"monthLong\": -1,\r\n\t\t\t\"weekdayShort\": -1,\r\n\t\t\t\"weekdayLong\": -1,\r\n\t\t\t\"day\": -1,\r\n\t\t\t\"yearDay\": -1,\r\n\t\t\t\"week\": -1,\r\n\t\t\t\"hourBase0\": -1,\r\n\t\t\t\"hour12Base0\": -1,\r\n\t\t\t\"hourBase1\": -1,\r\n\t\t\t\"hour12Base1\": -1,\r\n\t\t\t\"minute\": -1,\r\n\t\t\t\"second\": -1,\r\n\t\t\t\"millisecond\": -1,\r\n\t\t\t\"millisecondDigits\": -1,\r\n\t\t\t\"am\": -1,\r\n\t\t\t\"zone\": -1,\r\n\t\t\t\"timestamp\": -1,\r\n\t\t\t\"iso\": -1\r\n\t\t};\r\n\r\n\t\t// Index adjuster\r\n\t\tlet indexAdjust: number = 0,\r\n\t\t\tindex: number = 0;\r\n\r\n\t\t// Iterate through all of the parts\r\n\t\tfor (let i: number = 0; i < info.parts.length; i++) {\r\n\r\n\t\t\t// Set current match index\r\n\t\t\tindex = i + indexAdjust + 1;\r\n\r\n\t\t\tswitch (info.parts[i]) {\r\n\r\n\t\t\t\tcase \"yyyy\":\r\n\t\t\t\tcase \"YYYY\":\r\n\t\t\t\t\treg += \"([0-9]{4,})\";\r\n\t\t\t\t\tparsedIndexes.year = index;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"yyy\":\r\n\t\t\t\tcase \"YYY\":\r\n\t\t\t\t\treg += \"([0-9]{3})\";\r\n\t\t\t\t\tparsedIndexes.year3 = index;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"yy\":\r\n\t\t\t\tcase \"YY\":\r\n\t\t\t\t\treg += \"([0-9]{2})\";\r\n\t\t\t\t\tparsedIndexes.year2 = index;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"y\":\r\n\t\t\t\tcase \"Y\":\r\n\t\t\t\t\treg += \"([0-9]{1})\";\r\n\t\t\t\t\tparsedIndexes.year1 = index;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"MMMM\":\r\n\t\t\t\t\treg += \"(\" + this.getStringList(this._months).join(\"|\") + \")\";\r\n\t\t\t\t\tparsedIndexes.monthLong = index;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"MMM\":\r\n\t\t\t\t\treg += \"(\" + this.getStringList(this._monthsShort).join(\"|\") + \")\";\r\n\t\t\t\t\tparsedIndexes.monthShort = index;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"MM\":\r\n\t\t\t\tcase \"M\":\r\n\t\t\t\t\treg += \"([0-9]{2}|[0-9]{1})\";\r\n\t\t\t\t\tparsedIndexes.month = index;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"ww\":\r\n\t\t\t\tcase \"w\":\r\n\t\t\t\t\treg += \"([0-9]{2}|[0-9]{1})\";\r\n\t\t\t\t\tparsedIndexes.week = index;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"dd\":\r\n\t\t\t\tcase \"d\":\r\n\t\t\t\t\treg += \"([0-9]{2}|[0-9]{1})\";\r\n\t\t\t\t\tparsedIndexes.day = index;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"DDD\":\r\n\t\t\t\tcase \"DD\":\r\n\t\t\t\tcase \"D\":\r\n\t\t\t\t\treg += \"([0-9]{3}|[0-9]{2}|[0-9]{1})\";\r\n\t\t\t\t\tparsedIndexes.yearDay = index;\r\n\t\t\t\t\tbreak;\r\n\r\n\r\n\t\t\t\tcase \"dddd\":\r\n\t\t\t\t\treg += \"(\" + this.getStringList(this._weekdays).join(\"|\") + \")\";\r\n\t\t\t\t\tparsedIndexes.weekdayLong = index;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"ddd\":\r\n\t\t\t\t\treg += \"(\" + this.getStringList(this._weekdaysShort).join(\"|\") + \")\";\r\n\t\t\t\t\tparsedIndexes.weekdayShort = index;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"aaa\":\r\n\t\t\t\tcase \"aa\":\r\n\t\t\t\tcase \"a\":\r\n\t\t\t\t\t// TODO: fix (escape regex)\r\n\t\t\t\t\treg += \"(\" + this.getStringList([\"AM\", \"PM\", \"A.M.\", \"P.M.\", \"A\", \"P\"]).join(\"|\") + \")\";\r\n\t\t\t\t\tparsedIndexes.am = index;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"hh\":\r\n\t\t\t\tcase \"h\":\r\n\t\t\t\t\treg += \"([0-9]{2}|[0-9]{1})\";\r\n\t\t\t\t\tparsedIndexes.hour12Base1 = index;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"HH\":\r\n\t\t\t\tcase \"H\":\r\n\t\t\t\t\treg += \"([0-9]{2}|[0-9]{1})\";\r\n\t\t\t\t\tparsedIndexes.hourBase0 = index;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"KK\":\r\n\t\t\t\tcase \"K\":\r\n\t\t\t\t\treg += \"([0-9]{2}|[0-9]{1})\";\r\n\t\t\t\t\tparsedIndexes.hour12Base0 = index;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"kk\":\r\n\t\t\t\tcase \"k\":\r\n\t\t\t\t\treg += \"([0-9]{2}|[0-9]{1})\";\r\n\t\t\t\t\tparsedIndexes.hourBase1 = index;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"mm\":\r\n\t\t\t\tcase \"m\":\r\n\t\t\t\t\treg += \"([0-9]{2}|[0-9]{1})\";\r\n\t\t\t\t\tparsedIndexes.minute = index;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"ss\":\r\n\t\t\t\tcase \"s\":\r\n\t\t\t\t\treg += \"([0-9]{2}|[0-9]{1})\";\r\n\t\t\t\t\tparsedIndexes.second = index;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"SSS\":\r\n\t\t\t\tcase \"SS\":\r\n\t\t\t\tcase \"S\":\r\n\t\t\t\t\treg += \"([0-9]{3}|[0-9]{2}|[0-9]{1})\";\r\n\t\t\t\t\tparsedIndexes.millisecond = index;\r\n\t\t\t\t\tparsedIndexes.millisecondDigits = info.parts[i].length;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"nnn\":\r\n\t\t\t\tcase \"nn\":\r\n\t\t\t\tcase \"n\":\r\n\t\t\t\t\treg += \"([0-9]{3}|[0-9]{2}|[0-9]{1})\";\r\n\t\t\t\t\tparsedIndexes.millisecond = index;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"x\":\r\n\t\t\t\t\treg += \"([0-9]{1,})\";\r\n\t\t\t\t\tparsedIndexes.timestamp = index;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"Z\":\r\n\t\t\t\t\treg += \"GMT([-+]+[0-9]{2}:[0-9]{2})\";\r\n\t\t\t\t\tparsedIndexes.zone = index;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"ZZ\":\r\n\t\t\t\t\treg += \"([\\\\-+]+[0-9]{2}[0-9]{2})\";\r\n\t\t\t\t\tparsedIndexes.zone = index;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"i\":\r\n\t\t\t\t\treg += \"([0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}\\.[0-9]{3}Z)\";\r\n\t\t\t\t\tparsedIndexes.iso = index;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"G\":\r\n\t\t\t\tcase \"YYYY\":\r\n\t\t\t\tcase \"YYY\":\r\n\t\t\t\tcase \"YY\":\r\n\t\t\t\tcase \"Y\":\r\n\t\t\t\tcase \"MMMMM\":\r\n\t\t\t\tcase \"W\":\r\n\t\t\t\tcase \"EEEEE\":\r\n\t\t\t\tcase \"EEEE\":\r\n\t\t\t\tcase \"EEE\":\r\n\t\t\t\tcase \"EE\":\r\n\t\t\t\tcase \"E\":\r\n\t\t\t\tcase \"eeeee\":\r\n\t\t\t\tcase \"eeee\":\r\n\t\t\t\tcase \"eee\":\r\n\t\t\t\tcase \"ee\":\r\n\t\t\t\tcase \"e\":\r\n\t\t\t\tcase \"zzzz\":\r\n\t\t\t\tcase \"zzz\":\r\n\t\t\t\tcase \"zz\":\r\n\t\t\t\tcase \"z\":\r\n\t\t\t\tcase \"t\":\r\n\t\t\t\t\t// Ignore\r\n\t\t\t\t\tindexAdjust--;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\treg += \"[^0-9]*\";\r\n\t\t}\r\n\r\n\t\t// Try matching\r\n\t\tlet regex = new RegExp(reg);\r\n\t\tlet matches: RegExpMatchArray;\r\n\t\tif (matches = source.match(regex)) {\r\n\t\t\t// Populate the date object\r\n\r\n\t\t\t// Full year\r\n\t\t\tif (parsedIndexes.year > -1) {\r\n\t\t\t\tlet val = parseInt(matches[parsedIndexes.year]);\r\n\t\t\t\tif (this.utc) {\r\n\t\t\t\t\tres.setUTCFullYear(val);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tres.setFullYear(val);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// 3-digit year\r\n\t\t\tif (parsedIndexes.year3 > -1) {\r\n\t\t\t\tlet val = parseInt(matches[parsedIndexes.year3]);\r\n\t\t\t\tval += 1000;\r\n\t\t\t\tif (this.utc) {\r\n\t\t\t\t\tres.setUTCFullYear(val);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tres.setFullYear(val);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// 2-digit year\r\n\t\t\tif (parsedIndexes.year2 > -1) {\r\n\t\t\t\tlet val = parseInt(matches[parsedIndexes.year2]);\r\n\t\t\t\tif (val > 50) {\r\n\t\t\t\t\tval += 1000;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tval += 2000;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.utc) {\r\n\t\t\t\t\tres.setUTCFullYear(val);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tres.setFullYear(val);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// 1-digit year\r\n\t\t\tif (parsedIndexes.year1 > -1) {\r\n\t\t\t\tlet val = parseInt(matches[parsedIndexes.year1]);\r\n\t\t\t\tval = Math.floor((new Date().getFullYear()) / 10) * 10 + val;\r\n\t\t\t\tif (this.utc) {\r\n\t\t\t\t\tres.setUTCFullYear(val);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tres.setFullYear(val);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Full month\r\n\t\t\tif (parsedIndexes.monthLong > -1) {\r\n\t\t\t\tlet val = this.resolveMonth(<any>matches[parsedIndexes.monthLong]);\r\n\t\t\t\tif (this.utc) {\r\n\t\t\t\t\tres.setUTCMonth(val);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tres.setMonth(val);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Short month\r\n\t\t\tif (parsedIndexes.monthShort > -1) {\r\n\t\t\t\tlet val = this.resolveShortMonth(<any>matches[parsedIndexes.monthShort]);\r\n\t\t\t\tif (this.utc) {\r\n\t\t\t\t\tres.setUTCMonth(val);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tres.setMonth(val);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Numeric month\r\n\t\t\tif (parsedIndexes.month > -1) {\r\n\t\t\t\tlet val = parseInt(matches[parsedIndexes.month]) - 1;\r\n\t\t\t\tif (this.utc) {\r\n\t\t\t\t\tres.setUTCMonth(val);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tres.setMonth(val);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Weekday\r\n\t\t\t// @todo\r\n\r\n\t\t\t// Week\r\n\t\t\tif ((parsedIndexes.week > -1) && (parsedIndexes.day === -1)) {\r\n\t\t\t\t// We parse weeks ONLY if day is not explicitly set\r\n\t\t\t\t// TODO: this needs work\r\n\t\t\t\t// (but maybe later - I can hardly imagine anyone passing their dates in weeks)\r\n\t\t\t\tlet val = $utils.getDayFromWeek(\r\n\t\t\t\t\tparseInt(matches[parsedIndexes.week]),\r\n\t\t\t\t\tthis.utc ? res.getUTCFullYear() : res.getFullYear(),\r\n\t\t\t\t\t1,\r\n\t\t\t\t\tthis.utc\r\n\t\t\t\t);\r\n\t\t\t\tif (this.utc) {\r\n\t\t\t\t\tres.setUTCMonth(0);\r\n\t\t\t\t\tres.setUTCDate(val);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tres.setMonth(0);\r\n\t\t\t\t\tres.setDate(val);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Day\r\n\t\t\tif (parsedIndexes.day > -1) {\r\n\t\t\t\tlet val = parseInt(matches[parsedIndexes.day]);\r\n\t\t\t\tif (this.utc) {\r\n\t\t\t\t\tres.setUTCDate(val);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tres.setDate(val);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Year day\r\n\t\t\tif (parsedIndexes.yearDay > -1) {\r\n\t\t\t\tlet val = parseInt(matches[parsedIndexes.yearDay]);\r\n\t\t\t\tif (this.utc) {\r\n\t\t\t\t\tres.setUTCMonth(0);\r\n\t\t\t\t\tres.setUTCDate(val);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tres.setMonth(0);\r\n\t\t\t\t\tres.setDate(val);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// 24 Hour (0-23)\r\n\t\t\tif (parsedIndexes.hourBase0 > -1) {\r\n\t\t\t\tlet val = parseInt(matches[parsedIndexes.hourBase0]);\r\n\t\t\t\tif (this.utc) {\r\n\t\t\t\t\tres.setUTCHours(val);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tres.setHours(val);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// 24 Hour (1-24)\r\n\t\t\tif (parsedIndexes.hourBase1 > -1) {\r\n\t\t\t\tlet val = parseInt(matches[parsedIndexes.hourBase1]) - 1;\r\n\t\t\t\tif (this.utc) {\r\n\t\t\t\t\tres.setUTCHours(val);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tres.setHours(val);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// 12 Hour (0-11)\r\n\t\t\tif (parsedIndexes.hour12Base0 > -1) {\r\n\t\t\t\tlet val = parseInt(matches[parsedIndexes.hour12Base0]);\r\n\t\t\t\tif ((parsedIndexes.am > -1) && !this.isAm(matches[parsedIndexes.am])) {\r\n\t\t\t\t\tval += 12;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.utc) {\r\n\t\t\t\t\tres.setUTCHours(val);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tres.setHours(val);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// 12 Hour (1-12)\r\n\t\t\tif (parsedIndexes.hour12Base1 > -1) {\r\n\t\t\t\tlet val = parseInt(matches[parsedIndexes.hour12Base1]) - 1;\r\n\t\t\t\tif ((parsedIndexes.am > -1) && !this.isAm(matches[parsedIndexes.am])) {\r\n\t\t\t\t\tval += 12;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.utc) {\r\n\t\t\t\t\tres.setUTCHours(val);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tres.setHours(val);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Minute\r\n\t\t\tif (parsedIndexes.minute > -1) {\r\n\t\t\t\tlet val = parseInt(matches[parsedIndexes.minute]);\r\n\t\t\t\tif (this.utc) {\r\n\t\t\t\t\tres.setUTCMinutes(val);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tres.setMinutes(val);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Second\r\n\t\t\tif (parsedIndexes.second > -1) {\r\n\t\t\t\tlet val = parseInt(matches[parsedIndexes.second]);\r\n\t\t\t\tif (this.utc) {\r\n\t\t\t\t\tres.setUTCSeconds(val);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tres.setSeconds(val);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Millisecond\r\n\t\t\tif (parsedIndexes.millisecond > -1) {\r\n\t\t\t\tlet val = parseInt(matches[parsedIndexes.millisecond]);\r\n\t\t\t\tif (parsedIndexes.millisecondDigits == 2) {\r\n\t\t\t\t\tval *= 10;\r\n\t\t\t\t}\r\n\t\t\t\telse if (parsedIndexes.millisecondDigits == 1) {\r\n\t\t\t\t\tval *= 100;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.utc) {\r\n\t\t\t\t\tres.setUTCMilliseconds(val);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tres.setMilliseconds(val);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Timestamp\r\n\t\t\tif (parsedIndexes.timestamp > -1) {\r\n\t\t\t\tres.setTime(parseInt(matches[parsedIndexes.timestamp]))\r\n\t\t\t}\r\n\r\n\t\t\t// Adjust time zone\r\n\t\t\tif (parsedIndexes.zone > -1) {\r\n\t\t\t\tlet zone = matches[parsedIndexes.zone].replace(/:/, \"\");\r\n\t\t\t\tlet match = $type.getValue(zone.match(/([+\\-]?)([0-9]{2})([0-9]{2})/));\r\n\t\t\t\tlet dir = match[1];\r\n\t\t\t\tlet hour = match[2];\r\n\t\t\t\tlet minute = match[3];\r\n\t\t\t\tlet offset = parseInt(hour) * 60 + parseInt(minute);\r\n\r\n\t\t\t\t// Adjust offset\r\n\t\t\t\t// Making it negative does not seem to make sense, but it's right\r\n\t\t\t\t// because of how JavaScript calculates GTM offsets\r\n\t\t\t\tif (dir == \"+\") {\r\n\t\t\t\t\toffset *= -1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Check the difference in offset\r\n\t\t\t\tlet originalOffset = res.getTimezoneOffset();\r\n\t\t\t\tlet diff = offset - originalOffset;\r\n\t\t\t\tif (diff != 0) {\r\n\t\t\t\t\tres.setMinutes(res.getMinutes() + diff);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// ISO\r\n\t\t\tif (parsedIndexes.iso > -1) {\r\n\t\t\t\tres = new Date(matches[parsedIndexes.iso]);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// Didn't match anything\r\n\t\t\t// Let's try dropping it into Date constructor and hope for the best\r\n\t\t\tres = new Date(source);\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * Resolves month name (i.e. \"December\") into a month number (11).\r\n\t *\r\n\t * @param  {MonthNames}  value  Month name\r\n\t * @return {number}             Month number\r\n\t */\r\n\tprotected resolveMonth(value: MonthNames): number {\r\n\r\n\t\t// Let's try English first\r\n\t\tlet month: number = this._months.indexOf(value);\r\n\t\tif (month > -1) {\r\n\t\t\treturn month;\r\n\t\t}\r\n\r\n\t\t// Try the translation\r\n\t\tif (this.language && !this.language.isDefault()) {\r\n\t\t\tmonth = this.language.translateAll(this._months).indexOf(value);\r\n\t\t\tif (month > -1) {\r\n\t\t\t\treturn month\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn 0;\r\n\t}\r\n\r\n\t/**\r\n\t * Resolves short month name (i.e. \"Dec\") into a month number.\r\n\t *\r\n\t * @param  {ShortMonthNames}  value  Short month name\r\n\t * @return {number}                  Month number\r\n\t */\r\n\tprotected resolveShortMonth(value: ShortMonthNames): number {\r\n\r\n\t\t// Let's try English first\r\n\t\tlet month: number = this._monthsShort.indexOf(value);\r\n\t\tif (month > -1) {\r\n\t\t\treturn month;\r\n\t\t}\r\n\r\n\t\t// Try the translation\r\n\t\tif (this.language && !this.language.isDefault()) {\r\n\t\t\tmonth = this.language.translateAll(this._monthsShort).indexOf(value);\r\n\t\t\tif (month > -1) {\r\n\t\t\t\treturn month\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn 0;\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if passed in string represents AM/PM notation in many of its\r\n\t * versions.\r\n\t *\r\n\t * @param  {string}   value  Source string\r\n\t * @return {boolean}         Is it AM/PM?\r\n\t */\r\n\tprotected isAm(value: string): boolean {\r\n\t\tlet list = this.getStringList([\"AM\", \"A.M.\", \"A\"]);\r\n\t\treturn list.indexOf(value.toUpperCase()) > -1;\r\n\t}\r\n\r\n\t/**\r\n\t * Invalidates related [[Sprite]] causing it to redraw.\r\n\t */\r\n\tprotected invalidateSprite(): void {\r\n\t\tif (this.sprite) {\r\n\t\t\tthis.sprite.invalidate();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Translates list of strings.\r\n\t *\r\n\t * @param  {Array<keyof ILocaleProperties>}  list  Source strings\r\n\t * @return {Array<string>}                         Translated strings\r\n\t */\r\n\tprotected getStringList(list: Array<keyof ILocaleProperties>): Array<string> {\r\n\t\tlet res: string[] = [];\r\n\t\tfor (let i: number = 0; i < list.length; i++) {\r\n\t\t\tres.push(list[i]);\r\n\t\t\t// translate?\r\n\t\t\tif (this.language && !this.language.isDefault()) {\r\n\t\t\t\tres.push(this.language.translate(list[i]));\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * Date format to use.\r\n\t *\r\n\t * If format is not supplied in-line in the string, this setting will be\r\n\t * used.\r\n\t *\r\n\t * @default \"yyyy-MM-dd\"\r\n\t * @param {string} value Date format\r\n\t */\r\n\tpublic set dateFormat(value: string) {\r\n\t\tthis._dateFormat = value;\r\n\t\tthis.invalidateSprite();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {string} Date format\r\n\t */\r\n\tpublic get dateFormat(): string {\r\n\t\treturn this._dateFormat;\r\n\t}\r\n\r\n\t/**\r\n\t * Date format to use when parsing dates.\r\n\t *\r\n\t * @default \"yyyy-MM-dd\"\r\n\t * @param {string} value Date format\r\n\t */\r\n\tpublic set inputDateFormat(value: string) {\r\n\t\tthis._inputDateFormat = value;\r\n\t\tthis.invalidateSprite();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {string} Date format\r\n\t */\r\n\tpublic get inputDateFormat(): string {\r\n\t\treturn this._inputDateFormat;\r\n\t}\r\n\r\n\t/**\r\n\t * Should formatter use UTC functions?\r\n\t *\r\n\t * If UTC is used, all date/time values will be independent on client's\r\n\t * time zone.\r\n\t *\r\n\t * @param {boolean} value Use UTC?\r\n\t */\r\n\tpublic set utc(value: boolean) {\r\n\t\tthis._utc = value;\r\n\t\tthis.invalidateSprite();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Use UTC?\r\n\t */\r\n\tpublic get utc(): boolean {\r\n\t\treturn this._utc;\r\n\t}\r\n\r\n\t/**\r\n\t * Dirst day of the week:\r\n\t *\r\n\t * * 0 - Sunday\r\n\t * * 1 - Monday\r\n\t * * 2 - Tuesday\r\n\t *\r\n\t * Etc.\r\n\t *\r\n\t * @param {number} value First day of week\r\n\t */\r\n\tpublic set firstDayOfWeek(value: number) {\r\n\t\tthis._firstDayOfWeek = value;\r\n\t\tthis.invalidateSprite();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} First day of week\r\n\t */\r\n\tpublic get firstDayOfWeek(): number {\r\n\t\treturn this._firstDayOfWeek;\r\n\t}\r\n\r\n\t/**\r\n\t * Output format for the formatted date.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {string}  value  Format\r\n\t */\r\n\tpublic set outputFormat(value: string) {\r\n\t\tthis._outputFormat = value.toLowerCase();\r\n\t\tthis.invalidateSprite();\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore Exclude from docs\r\n\t * @return {string} Format\r\n\t */\r\n\tpublic get outputFormat(): string {\r\n\t\treturn this._outputFormat;\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/formatters/DateFormatter.ts","/**\r\n * Polyline module\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Sprite, ISpriteProperties, ISpriteAdapters, ISpriteEvents, SpriteEventDispatcher, AMEvent } from \"../Sprite\";\r\nimport { IPoint, IOrientationPoint } from \"../defs/IPoint\";\r\nimport { color } from \"../utils/Color\";\r\nimport { registry } from \"../Registry\";\r\nimport * as $path from \"../rendering/Path\";\r\nimport * as $math from \"../utils/Math\";\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[Polyline]].\r\n */\r\nexport interface IPolylineProperties extends ISpriteProperties {\r\n\r\n\t/**\r\n\t * A list of segment coordinates for the multi-part line.\r\n\t *\r\n\t * @type {IPoint[][]}\r\n\t */\r\n\tsegments?: IPoint[][];\r\n\r\n}\r\n\r\n/**\r\n * Defines events for [[Polyline]].\r\n */\r\nexport interface IPolylineEvents extends ISpriteEvents { }\r\n\r\n/**\r\n * Defines adapters for [[Polyline]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface IPolylineAdapters extends ISpriteAdapters, IPolylineProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Draws a polyline.\r\n *\r\n * @see {@link IPolylineEvents} for a list of available events\r\n * @see {@link IPolylineAdapters} for a list of available Adapters\r\n */\r\nexport class Polyline extends Sprite {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IPolylineProperties}\r\n\t */\r\n\tpublic _properties!: IPolylineProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IPolylineAdapters}\r\n\t */\r\n\tpublic _adapter!: IPolylineAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IPolylineEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IPolylineEvents;\r\n\r\n\t/**\r\n\t * [_distance description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\tprotected _distance: number;\r\n\r\n\t/**\r\n\t * [_realSegments]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {IPoint[][]}\r\n\t */\r\n\tprotected _realSegments: IPoint[][];\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"Polyline\";\r\n\t\tthis.element = this.paper.add(\"path\");\r\n\t\tthis.shapeRendering = \"auto\";\r\n\t\tthis.fill = color();\r\n\t\tthis.strokeOpacity = 1;\r\n\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Creats and adds an SVG path for the arc.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic makePath(): void {\r\n\t\tthis._distance = 0;\r\n\t\tlet segments = this.segments;\r\n\r\n\t\tif (segments && segments.length > 0) {\r\n\t\t\tlet path: string = \"\";\r\n\r\n\t\t\tfor (let i = 0; i < segments.length; i++) {\r\n\t\t\t\tlet points: IPoint[] = segments[i];\r\n\t\t\t\tif (points.length > 0) {\r\n\t\t\t\t\tpath += $path.moveTo(points[0]);\r\n\r\n\t\t\t\t\tfor (let p = 1; p < points.length; p++) {\r\n\t\t\t\t\t\tlet point: IPoint = points[p];\r\n\t\t\t\t\t\tpath += $path.lineTo(point);\r\n\t\t\t\t\t\tthis._distance += $math.getDistance(points[p - 1], point);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.element.attr({ \"d\": path });\r\n\t\t}\r\n\r\n\t\tthis._realSegments = segments;\r\n\t}\r\n\r\n\t/**\r\n\t * A list of segment coordinates for the multi-part line.\r\n\t *\r\n\t * @todo Example\r\n\t * @param {IPoint[][]}  segments  Segments\r\n\t */\r\n\tpublic set segments(segments: IPoint[][]) {\r\n\t\tthis.setPropertyValue(\"segments\", segments);\r\n\t\tthis.makePath();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {IPoint[]} Segments\r\n\t */\r\n\tpublic get segments(): IPoint[][] {\r\n\t\treturn this.getPropertyValue(\"segments\");\r\n\t}\r\n\r\n\t/**\r\n\t * [distance description]\r\n\t *\r\n\t * @todo Description\r\n\t * @return {number} [description]\r\n\t */\r\n\tpublic get distance(): number {\r\n\t\treturn this._distance;\r\n\t}\r\n\r\n\t/**\r\n\t * Converts relative position along the line (0-1) into pixel coordinates.\r\n\t *\r\n\t * @param  {number}             position  Position (0-1)\r\n\t * @return {IOrientationPoint}            Coordinates\r\n\t */\r\n\tpublic positionToPoint(position: number): IOrientationPoint {\r\n\r\n\t\tlet deltaAngle: number = 0;\r\n\r\n\t\tif (position < 0) {\r\n\t\t\tposition = Math.abs(position);\r\n\t\t\tdeltaAngle = 180;\r\n\t\t}\r\n\r\n\t\tlet segments: IPoint[][] = this._realSegments;\r\n\t\tif (segments) {\r\n\t\t\tlet totalDistance: number = this.distance;\r\n\t\t\tlet currentDistance: number = 0;\r\n\r\n\t\t\tlet distanceAB: number;\r\n\t\t\tlet positionA: number = 0;\r\n\t\t\tlet positionB: number = 0;\r\n\t\t\tlet pointA: IPoint;\r\n\t\t\tlet pointB: IPoint;\r\n\r\n\t\t\tfor (let s = 0; s < segments.length; s++) {\r\n\t\t\t\tlet points: IPoint[] = segments[s];\r\n\t\t\t\tif (points.length > 1) {\r\n\t\t\t\t\tfor (let p = 1; p < points.length; p++) {\r\n\t\t\t\t\t\tpointA = points[p - 1];\r\n\t\t\t\t\t\tpointB = points[p];\r\n\r\n\t\t\t\t\t\tpositionA = currentDistance / totalDistance;\r\n\t\t\t\t\t\tdistanceAB = $math.getDistance(pointA, pointB);\r\n\t\t\t\t\t\tcurrentDistance += distanceAB;\r\n\t\t\t\t\t\tpositionB = currentDistance / totalDistance;\r\n\r\n\t\t\t\t\t\tif (positionA <= position && positionB > position) {\r\n\t\t\t\t\t\t\ts = segments.length;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet positionAB: number = (position - positionA) / (positionB - positionA);\r\n\t\t\tlet midPoint: IPoint = $math.getMidPoint(pointA, pointB, positionAB);\r\n\r\n\t\t\treturn { x: midPoint.x, y: midPoint.y, angle: deltaAngle + $math.getAngle(pointA, pointB) };\r\n\t\t}\r\n\t\treturn { x: 0, y: 0, angle: 0 };\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"Polyline\"] = Polyline;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/elements/Polyline.ts","/**\r\n * Provides functionality used to build scrollbars.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\nimport { Container, IContainerProperties, IContainerAdapters, IContainerEvents } from \"../Container\";\r\nimport { IRange } from \"../defs/IRange\";\r\nimport { Sprite, ISpriteEvents, SpriteEventDispatcher, AMEvent } from \"../Sprite\";\r\nimport { Orientation } from \"../defs/Orientation\";\r\nimport { ResizeButton } from \"../elements/ResizeButton\";\r\nimport { Button } from \"../elements/Button\";\r\nimport { getInteraction } from \"../interaction/Interaction\";\r\nimport { MouseCursorStyle } from \"../interaction/Mouse\";\r\nimport { RoundedRectangle } from \"../elements/RoundedRectangle\";\r\nimport { IPoint } from \"../defs/IPoint\";\r\nimport { Animation } from \"../utils/Animation\";\r\nimport { IDisposer } from \"../utils/Disposer\";\r\nimport { registry } from \"../Registry\";\r\nimport { keyboard } from \"../utils/Keyboard\";\r\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\r\nimport { percent } from \"../utils/Percent\";\r\nimport * as $math from \"../utils/Math\";\r\nimport * as $ease from \"../utils/Ease\";\r\nimport * as $type from \"../utils/Type\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[Scrollbar]].\r\n */\r\nexport interface IScrollbarProperties extends IContainerProperties {\r\n\r\n\t/**\r\n\t * Duration in milliseconds of Scrollbar animation.\r\n\t *\r\n\t * This affects how fast Scrollbar elements move/resize. For example when\r\n\t * chart zooms or pans, Scrollbar elements' positions need to be adjusted\r\n\t * as well. This setting will affect whether they will be relocated\r\n\t * instantenously (0), or will animte gradually.\r\n\t *\r\n\t * @see {@link https://www.amcharts.com/docs/v4/concepts/animations/} for more info about animations\r\n\t * @type {number}\r\n\t */\r\n\tanimationDuration?: number;\r\n\r\n\t/**\r\n\t * An easing function to use when animating (moving/sizing) Scrollbar\r\n\t * elements.\r\n\t *\r\n\t * @type {(value: number) => number}\r\n\t */\r\n\tanimationEasing?: (value: number) => number;\r\n\r\n}\r\n\r\n/**\r\n * Defines events for [[Scrollbar]].\r\n */\r\nexport interface IScrollbarEvents extends IContainerEvents {\r\n\r\n\t/**\r\n\t * Invoked when range of scrollbar selection changes.\r\n\t */\r\n\trangechanged: {};\r\n\r\n}\r\n\r\n/**\r\n * Defines adapters for [[Scrollbar]].\r\n */\r\nexport interface IScrollbarAdapters extends IContainerAdapters, IScrollbarProperties {\r\n\r\n\t/**\r\n\t * Applied to a position value when it is retrieved.\r\n\t */\r\n\tpositionValue: {\r\n\t\tvalue: any,\r\n\t\tposition: number\r\n\t}\r\n\r\n};\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Scrollbar is a generic control allowing to select a range of values or pan\r\n * the selection.\r\n *\r\n * @see {@link IScrollbarEvents} for a list of available events\r\n * @see {@link IScrollbarAdapters} for a list of available Adapters\r\n */\r\nexport class Scrollbar extends Container {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {PointedRectangleProperties}\r\n\t */\r\n\tpublic _properties!: IScrollbarProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IScrollbarAdapters}\r\n\t */\r\n\tpublic _adapter!: IScrollbarAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IScrollbarEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IScrollbarEvents;\r\n\r\n\t/**\r\n\t * Holds a reference to a draggable rectangle that fills the space between\r\n\t * two selection grips. It can be used to pan the selection maintaining the\r\n\t * distance between start and end grips.\r\n\t *\r\n\t * @type {Button}\r\n\t */\r\n\tprotected _thumb: Button;\r\n\r\n\t/**\r\n\t * Orientation of the scrollbar.\r\n\t *\r\n\t * @type {Orientation}\r\n\t */\r\n\tprotected _orientation: Orientation;\r\n\r\n\t/**\r\n\t * A button (grip) instance to be used to select lower range value.\r\n\t *\r\n\t * @type {ResizeButton}\r\n\t */\r\n\tprotected _startGrip: ResizeButton;\r\n\r\n\t/**\r\n\t * A button (grip) instance to be used to select upper range value.\r\n\t *\r\n\t * @type {ResizeButton}\r\n\t */\r\n\tprotected _endGrip: ResizeButton;\r\n\r\n\t/**\r\n\t * Currently selected lower (start) value.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tprotected _start: number;\r\n\r\n\t/**\r\n\t * Currently selected upper (end) value.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tprotected _end: number;\r\n\r\n\t/**\r\n\t * Previously selected lower (start) value.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tprotected _previousStart: number;\r\n\r\n\t/**\r\n\t * Previously selected upper (end) value.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tprotected _previousEnd: number;\r\n\r\n\t/**\r\n\t * An [[Animation]] instance that moves \"thumb\".\r\n\t *\r\n\t * @type {Animation}\r\n\t */\r\n\tprotected _thumbAnimation: Animation;\r\n\r\n\t/**\r\n\t * An [[Animation]] instance that moves zoom grip buttons.\r\n\t *\r\n\t * @type {Animation}\r\n\t */\r\n\tprotected _zoomAnimation: Animation;\r\n\r\n\t/**\r\n\t * A value of previously selected lower value, used for doubleclick function.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tprotected _prevStart: number = 0;\r\n\r\n\t/**\r\n\t * A value of previously selected upper value, used for doubleclick function.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tprotected _prevEnd: number = 1;\r\n\r\n\t/**\r\n\t * Indicates if the Scrollbar is currently \"busy\" (animating and or\r\n\t * performing zoom by user interaction).\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tprotected _isBusy: boolean = false;\r\n\r\n\t/**\r\n\t * [_skipRangeEvents description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {boolean}\r\n\t */\r\n\tprotected _skipRangeEvents: boolean = false;\r\n\r\n\t/**\r\n\t * Holds timeout reference that resets \"busy\" status.\r\n\t *\r\n\t * @type {IDisposer}\r\n\t */\r\n\tprotected _unbusyTimeout: IDisposer;\r\n\r\n\t/**\r\n\t * [undefined description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {\"start\" | \"end\" | undefined}\r\n\t */\r\n\tprotected _usingGrip: \"start\" | \"end\" | undefined;\r\n\r\n\t/**\r\n\t * Sets the type of the element to use as background.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {RoundedRectangle}\r\n\t */\r\n\tpublic _background: RoundedRectangle;\r\n\r\n\t/**\r\n\t * Hide grips when not hovered over scrollbar?\r\n\t *\r\n\t * @default false\r\n\t * @type {boolean}\r\n\t */\r\n\tprotected _hideGrips: boolean;\r\n\r\n\t/**\r\n\t * A disposer for the hover event.\r\n\t *\r\n\t * @type {IDisposer}\r\n\t */\r\n\tprotected _overDisposer: IDisposer;\r\n\r\n\t/**\r\n\t * A disposer for the out event.\r\n\t *\r\n\t * @type {IDisposer}\r\n\t */\r\n\tprotected _outDisposer: IDisposer;\r\n\r\n\t/**\r\n\t * Update the selection when dragging the grips.\r\n\t *\r\n\t * If set to `false` selection will be updated only when the grip is\r\n\t * released.\r\n\t *\r\n\t * @default true\r\n\t * @type {boolean}\r\n\t */\r\n\tpublic updateWhileMoving: boolean = true;\r\n\r\n\t/**\r\n\t * Construtor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.className = \"Scrollbar\";\r\n\r\n\t\tthis.minHeight = 12;\r\n\t\tthis.minWidth = 12;\r\n\r\n\t\tthis.animationDuration = 0;\r\n\t\tthis.animationEasing = $ease.cubicOut;\r\n\r\n\t\tthis.margin(10, 10, 10, 10);\r\n\r\n\t\tlet interfaceColors = new InterfaceColorSet();\r\n\r\n\t\t// background is also container as it might contain graphs, grid, etc\r\n\t\tlet background: RoundedRectangle = this.background;\r\n\t\tbackground.cornerRadius(10, 10, 10, 10);\r\n\t\tbackground.fill = interfaceColors.getFor(\"fill\");\r\n\t\tbackground.fillOpacity = 0.5;\r\n\r\n\t\tthis.startGrip = new ResizeButton();\r\n\t\tthis.endGrip = new ResizeButton();\r\n\r\n\t\t// Default orientation...\r\n\t\t// ... is set in `applyInternalDefaults()` because it accesses `language`\r\n\t\t// and should only be started to access when parent is set\r\n\r\n\t\t// Set events\r\n\t\tthis.events.on(\"transformed\", this.updateThumb, this);\r\n\r\n\t\t// Initial positions\r\n\t\tthis.start = 0;\r\n\t\tthis.end = 1;\r\n\r\n\t\t// Set roles\r\n\t\tthis.role = \"scrollbar\";\r\n\t\tthis.thumb.role = \"slider\";\r\n\t\tthis.thumb.readerLive = \"polite\";\r\n\t\tthis.startGrip.role = \"slider\";\r\n\t\tthis.endGrip.role = \"slider\";\r\n\r\n\t\t// otherwise range changed wont' be registered\r\n\t\tthis.events.once(\"inited\", () => {\r\n\t\t\tthis._previousStart = undefined;\r\n\t\t\tthis.dispatchRangeChange();\r\n\t\t})\r\n\r\n\r\n\t\tthis.hideGrips = false;\r\n\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Sets defaults that instantiate some objects that rely on parent, so they\r\n\t * cannot be set in constructor.\r\n\t */\r\n\tprotected applyInternalDefaults(): void {\r\n\t\tsuper.applyInternalDefaults();\r\n\t\tif (!this._orientation) {\r\n\t\t\tthis.orientation = \"horizontal\";\r\n\t\t}\r\n\r\n\t\t// Set screen reader tetxt accordingly\r\n\t\tif (this.orientation === \"horizontal\") {\r\n\t\t\tif (!$type.hasValue(this.readerTitle)) {\r\n\t\t\t\tthis.readerTitle = this.language.translate(\"Use TAB to select grip buttons or left and right arrows to change selection\");\r\n\t\t\t}\r\n\t\t\tif (!$type.hasValue(this.thumb.readerDescription)) {\r\n\t\t\t\tthis.thumb.readerDescription = this.language.translate(\"Use left and right arrows to move selection\");\r\n\t\t\t}\r\n\t\t\tif (!$type.hasValue(this.startGrip.readerDescription)) {\r\n\t\t\t\tthis.startGrip.readerDescription = this.language.translate(\"Use left and right arrows to move left selection\");\r\n\t\t\t}\r\n\t\t\tif (!$type.hasValue(this.endGrip.readerDescription)) {\r\n\t\t\t\tthis.endGrip.readerDescription = this.language.translate(\"Use left and right arrows to move right selection\");\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (!$type.hasValue(this.readerTitle)) {\r\n\t\t\t\tthis.readerTitle = this.language.translate(\"Use TAB select grip buttons or up and down arrows to change selection\");\r\n\t\t\t}\r\n\t\t\tif (!$type.hasValue(this.thumb.readerDescription)) {\r\n\t\t\t\tthis.thumb.readerDescription = this.language.translate(\"Use up and down arrows to move selection\");\r\n\t\t\t}\r\n\t\t\tif (!$type.hasValue(this.startGrip.readerDescription)) {\r\n\t\t\t\tthis.startGrip.readerDescription = this.language.translate(\"Use up and down arrows to move upper selection\");\r\n\t\t\t}\r\n\t\t\tif (!$type.hasValue(this.endGrip.readerDescription)) {\r\n\t\t\t\tthis.endGrip.readerDescription = this.language.translate(\"Use up and down arrows to move lower selection\");\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Validates the layout of the scrollbar's elements.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic validateLayout(): void {\r\n\t\tthis.updateSize();\r\n\t\tsuper.validateLayout();\r\n\r\n\t\t// when size changes, need to update extremes\r\n\t\tthis.updateExtremes();\r\n\t}\r\n\r\n\t/**\r\n\t * Update background for the scrollbar.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic processBackground(): void {\r\n\t\tsuper.processBackground();\r\n\t\tlet background = this.background;\r\n\r\n\t\tbackground.clickable = true;\r\n\t\tbackground.events.on(\"hit\", this.handleBgHit, this);\r\n\t}\r\n\r\n\t/**\r\n\t * Zooms to the particular place when clicked/tapped on the scrollbar\r\n\t * background.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {ISpriteEvents[\"hit\"]}  event  Event\r\n\t */\r\n\tpublic handleBgHit(event: ISpriteEvents[\"hit\"]): void {\r\n\t\tthis.makeBusy();\r\n\t\tlet point: IPoint = event.spritePoint;\r\n\t\tlet thumb: Sprite = this.thumb;\r\n\t\tif (this.orientation == \"horizontal\") {\r\n\t\t\tlet thumbX: number = point.x - thumb.pixelWidth / 2;\r\n\t\t\tthumbX = $math.fitToRange(thumbX, 0, this.innerWidth - thumb.pixelWidth);\r\n\t\t\tthis._thumbAnimation = thumb.animate({ property: \"x\", to: thumbX }, this.animationDuration, this.animationEasing);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tlet thumbY: number = point.y - thumb.pixelHeight / 2;\r\n\t\t\tthumbY = $math.fitToRange(thumbY, 0, this.innerHeight - thumb.pixelHeight);\r\n\t\t\tthis._thumbAnimation = thumb.animate({ property: \"y\", to: thumbY }, this.animationDuration, this.animationEasing);\r\n\t\t}\r\n\t\tif (this.animationDuration > 0) {\r\n\t\t\tthis._thumbAnimation.events.on(\"animationended\", this.makeUnbusy, this);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis._thumb.validate();\r\n\t\t\tthis.makeUnbusy();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Set scrollbar as busy. (currently zooming)\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic makeBusy(): void {\r\n\t\tthis._isBusy = true;\r\n\t\tthis._skipRangeEvents = false;\r\n\t\tif (this._unbusyTimeout) {\r\n\t\t\tthis.removeDispose(this._unbusyTimeout);\r\n\t\t}\r\n\t\tthis._unbusyTimeout = null;\r\n\t\tthis.stopAnimations();\r\n\t}\r\n\r\n\t/**\r\n\t * Stops all animations, currently playing for the scrollbar.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic stopAnimations(): void {\r\n\t\tif (this._thumbAnimation) {\r\n\t\t\tthis._thumbAnimation.stop(true);\r\n\t\t}\r\n\t\tif (this._zoomAnimation) {\r\n\t\t\tthis._zoomAnimation.stop(true);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Cancels \"busy\" status of the Scrollbar.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic makeUnbusy(): void {\r\n\t\t/**\r\n\t\t * We cannot make Scrollbar not busy right after release, because then axes\r\n\t\t * will take over controll and Scrollbar will start to animate.\r\n\t\t * Theorethically, it's not right to set timeout by `animationDuration`,\r\n\t\t * however we can not know all the durations of elements we scroll, so we\r\n\t\t * assume that animation duration will be the same as\r\n\t\t * `interpolationDuration` or `rangeChange` duration.\r\n\t\t */\r\n\t\tthis._unbusyTimeout = this.setTimeout(this.makeUnbusyReal.bind(this), this.animationDuration * 1.1);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * [makeUnbusyReal description]\r\n\t *\r\n\t * @todo Description\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic makeUnbusyReal(): void {\r\n\t\tthis._usingGrip = undefined;\r\n\t\tthis._isBusy = false;\r\n\t\tif (!this.updateWhileMoving) {\r\n\t\t\tthis.dispatchRangeChange();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Disptatches rangechanged event if it really changed\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tprotected dispatchRangeChange() {\r\n\t\tif (this._previousEnd != this.end || this._previousStart != this.start) {\r\n\t\t\tthis._previousStart = this.start;\r\n\t\t\tthis._previousEnd = this.end;\r\n\t\t\tthis.dispatch(\"rangechanged\");\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Updates the \"thumb\" element. A draggable element between the grips.\r\n\t */\r\n\tprotected updateThumb(): void {\r\n\r\n\t\tif (!this.parent) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet thumb: Sprite = this.thumb;\r\n\r\n\t\tlet start: number = this.start;\r\n\t\tlet end: number = this.end;\r\n\r\n\t\tlet startGrip: ResizeButton = this.startGrip;\r\n\t\tlet endGrip: ResizeButton = this.endGrip;\r\n\r\n\t\tif (this.orientation == \"horizontal\") {\r\n\r\n\t\t\tlet innerWidth: number = this.innerWidth;\r\n\r\n\t\t\tthumb.width = innerWidth * (end - start);\r\n\t\t\tthumb.maxX = innerWidth - thumb.pixelWidth;\r\n\t\t\tthumb.x = start * innerWidth;\r\n\r\n\t\t\tstartGrip.moveTo({ x: thumb.pixelX, y: 0 }, undefined, undefined, true); // overrides dragging\r\n\t\t\tendGrip.moveTo({ x: thumb.pixelX + thumb.pixelWidth, y: 0 }, undefined, undefined, true);\r\n\r\n\t\t\tstartGrip.readerTitle = this.language.translate(\r\n\t\t\t\t\"From %1\",\r\n\t\t\t\tundefined,\r\n\t\t\t\tthis.adapter.apply(\"positionValue\", {\r\n\t\t\t\t\tvalue: Math.round(start * 100) + \"%\",\r\n\t\t\t\t\tposition: start\r\n\t\t\t\t}).value\r\n\t\t\t);\r\n\r\n\t\t\tendGrip.readerTitle = this.language.translate(\r\n\t\t\t\t\"To %1\",\r\n\t\t\t\tundefined,\r\n\t\t\t\tthis.adapter.apply(\"positionValue\", {\r\n\t\t\t\t\tvalue: Math.round(end * 100) + \"%\",\r\n\t\t\t\t\tposition: end\r\n\t\t\t\t}).value\r\n\t\t\t);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tlet innerHeight: number = this.innerHeight;\r\n\r\n\t\t\tthumb.height = innerHeight * (end - start);\r\n\t\t\tthumb.maxY = innerHeight - thumb.pixelHeight;\r\n\t\t\tthumb.y = (1 - end) * innerHeight;\r\n\r\n\t\t\tstartGrip.moveTo({ x: 0, y: thumb.pixelY + thumb.pixelHeight }, undefined, undefined, true);\r\n\t\t\tendGrip.moveTo({ x: 0, y: thumb.pixelY }, undefined, undefined, true);\r\n\r\n\t\t\tstartGrip.readerTitle = this.language.translate(\r\n\t\t\t\t\"To %1\",\r\n\t\t\t\tundefined,\r\n\t\t\t\tthis.adapter.apply(\"positionValue\", {\r\n\t\t\t\t\tvalue: Math.round((1 - start) * 100) + \"%\",\r\n\t\t\t\t\tposition: (1 - start)\r\n\t\t\t\t}).value\r\n\t\t\t);\r\n\r\n\t\t\tendGrip.readerTitle = this.language.translate(\r\n\t\t\t\t\"From %1\",\r\n\t\t\t\tundefined,\r\n\t\t\t\tthis.adapter.apply(\"positionValue\", {\r\n\t\t\t\t\tvalue: Math.round((1 - end) * 100) + \"%\",\r\n\t\t\t\t\tposition: (1 - end)\r\n\t\t\t\t}).value\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\t// Add accessibility\r\n\t\tthumb.readerTitle = this.language.translate(\r\n\t\t\t\"From %1 to %2\",\r\n\t\t\tundefined,\r\n\t\t\tthis.adapter.apply(\"positionValue\", {\r\n\t\t\t\tvalue: Math.round(start * 100) + \"%\",\r\n\t\t\t\tposition: start\r\n\t\t\t}).value,\r\n\t\t\tthis.adapter.apply(\"positionValue\", {\r\n\t\t\t\tvalue: Math.round(end * 100) + \"%\",\r\n\t\t\t\tposition: end\r\n\t\t\t}).value\r\n\t\t);\r\n\r\n\t\tif (!this._skipRangeEvents && this.updateWhileMoving) {\r\n\t\t\tthis.dispatchRangeChange();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Updates extremes of the scrollbar.\r\n\t */\r\n\tprotected updateExtremes(): void {\r\n\t\tlet orientation = this.orientation;\r\n\t\tlet minX: number = 0;\r\n\t\tlet minY: number = 0;\r\n\t\tlet maxX: number = 0;\r\n\t\tlet maxY: number = 0;\r\n\r\n\t\tif (orientation == \"horizontal\") {\r\n\t\t\tmaxX = this.innerWidth;\r\n\t\t\tminY = maxY = this.innerHeight / 2;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tmaxY = this.innerHeight;\r\n\t\t\tminX = maxX = this.innerWidth / 2;\r\n\t\t}\r\n\r\n\t\tlet startGrip: ResizeButton = this.startGrip;\r\n\t\tstartGrip.minX = minX;\r\n\t\tstartGrip.maxX = maxX;\r\n\t\tstartGrip.minY = minY;\r\n\t\tstartGrip.maxY = maxY;\r\n\r\n\t\tlet endGrip: ResizeButton = this.endGrip;\r\n\t\tendGrip.minX = minX;\r\n\t\tendGrip.maxX = maxX;\r\n\t\tendGrip.minY = minY;\r\n\t\tendGrip.maxY = maxY;\r\n\r\n\t\tlet thumb = this.thumb;\r\n\t\tthumb.minX = minX;\r\n\t\tthumb.maxX = maxX;\r\n\t\tthumb.minY = minY;\r\n\t\tthumb.maxY = maxY;\r\n\t}\r\n\r\n\t/**\r\n\t * Updates size of the scrollbar.\r\n\t */\r\n\tprotected updateSize(): void {\r\n\t\tlet orientation = this.orientation;\r\n\r\n\t\tlet startGrip = this.startGrip;\r\n\t\tif (startGrip) {\r\n\t\t\tstartGrip.orientation = orientation;\r\n\t\t}\r\n\t\tif (this.endGrip) {\r\n\t\t\tthis.endGrip.orientation = orientation;\r\n\t\t}\r\n\r\n\t\tlet thumb: Sprite = this.thumb;\r\n\t\tif (thumb) {\r\n\t\t\tif (orientation == \"horizontal\") {\r\n\t\t\t\tif (!$type.isNumber(this._pixelWidth)) {\r\n\t\t\t\t\tthis.width = percent(100);\r\n\t\t\t\t}\r\n\t\t\t\t// this teorethically might be wrong, if user indeed sets height of a horizontal scrollbar in percent\r\n\t\t\t\t// however without this height might be equal to 100% if previous orientation was set to horizontal\r\n\t\t\t\t// so this is ok solution, in case user really wants to have scrollbar height set in percent,\r\n\t\t\t\t// he should do this after orientation.\r\n\t\t\t\tif ($type.hasValue(this.percentHeight)) {\r\n\t\t\t\t\tthis.height = this.minHeight;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthumb.height = this.innerHeight;\r\n\r\n\t\t\t\tthumb.verticalCenter = \"middle\";\r\n\t\t\t\tthumb.horizontalCenter = \"left\";\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (!$type.isNumber(this._pixelHeight)) {\r\n\t\t\t\t\tthis.height = percent(100);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// same as above with percentHeight\r\n\t\t\t\tif ($type.hasValue(this.percentWidth)) {\r\n\t\t\t\t\tthis.width = this.minWidth;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthumb.width = this.innerWidth;\r\n\t\t\t\tthumb.verticalCenter = \"top\";\r\n\t\t\t\tthumb.horizontalCenter = \"middle\";\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * ==========================================================================\r\n\t * POSITIONS\r\n\t * ==========================================================================\r\n\t * @hidden\r\n\t */\r\n\r\n\t/**\r\n\t * Relative position (0-1) of the start grip.\r\n\t *\r\n\t * @param {number}  position  Position (0-1)\r\n\t */\r\n\tpublic set start(position: number) {\r\n\t\tif (!this._isBusy) {\r\n\t\t\tthis.__start = position;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Position (0-1)\r\n\t */\r\n\tpublic get start(): number {\r\n\t\treturn Math.min(this.getPosition(this._start), this.getPosition(this._end));\r\n\t}\r\n\r\n\t/**\r\n\t * [__start description]\r\n\t *\r\n\t * @todo Description\r\n\t * @param {number} position [description]\r\n\t */\r\n\tprotected set __start(position: number) {\r\n\t\tthis._start = this.getPosition(position);\r\n\t\tthis.updateThumb();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} [description]\r\n\t */\r\n\tprotected get __start(): number {\r\n\t\treturn this._start;\r\n\t}\r\n\r\n\t/**\r\n\t * Relative position (0-1) of the end grip.\r\n\t *\r\n\t * @param {number}  position  Position (0-1)\r\n\t */\r\n\tpublic set end(position: number) {\r\n\t\tif (!this._isBusy) {\r\n\t\t\tthis.__end = position;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Position (0-1)\r\n\t */\r\n\tpublic get end(): number {\r\n\t\treturn Math.max(this.getPosition(this._start), this.getPosition(this._end));\r\n\t}\r\n\r\n\t/**\r\n\t * [__end description]\r\n\t *\r\n\t * @todo Description\r\n\t * @param {number} position [description]\r\n\t */\r\n\tprotected set __end(position: number) {\r\n\t\tthis._end = this.getPosition(position);\r\n\t\tthis.updateThumb();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} [description]\r\n\t */\r\n\tprotected get __end(): number {\r\n\t\treturn this._end;\r\n\t}\r\n\r\n\t/**\r\n\t * Current selection range.\r\n\t *\r\n\t * @readonly\r\n\t * @return {IRange} Range\r\n\t */\r\n\tpublic get range(): IRange {\r\n\t\treturn { start: this.start, end: this.end, priority: this._usingGrip };\r\n\t}\r\n\r\n\t/**\r\n\t * Disables range change events.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic skipRangeEvents(): void {\r\n\t\tif (!this._isBusy) {\r\n\t\t\tthis._skipRangeEvents = true;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * [fixRange description]\r\n\t *\r\n\t * @todo Description\r\n\t * @ignore Exclude from docs\r\n\t * @param {IRange}  range  Range\r\n\t */\r\n\tpublic fixRange(range: IRange): void {\r\n\t\tif (range.start != $math.round(this._start, 2) || range.end != $math.round(this._end, 2)) {\r\n\t\t\tthis._start = range.start;\r\n\t\t\tthis._end = range.end;\r\n\r\n\t\t\tthis._skipRangeEvents = true;\r\n\t\t\tthis.updateThumb();\r\n\t\t\tthis._skipRangeEvents = false;\r\n\t\t\tthis.thumb.validate();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * [getPosition description]\r\n\t *\r\n\t * @todo Description\r\n\t * @param  {number}  position  [description]\r\n\t * @return {number}            [description]\r\n\t */\r\n\tprotected getPosition(position: number): number {\r\n\t\treturn $math.fitToRange($math.round(position, 4), 0, 1);\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * ==========================================================================\r\n\t * MISC\r\n\t * ==========================================================================\r\n\t * @hidden\r\n\t */\r\n\r\n\t/**\r\n\t * Orientation of the scrollbar.\r\n\t *\r\n\t * Available options: \"horizontal\" (default) and \"vertical\".\r\n\t *\r\n\t * @default \"horizontal\"\r\n\t * @param {Orientation}  value  Orientation\r\n\t */\r\n\tpublic set orientation(value: Orientation) {\r\n\r\n\t\tthis._orientation = value;\r\n\r\n\t\t// Set mouse cursors and screen reader tetxt accordingly\r\n\t\tif (value === \"horizontal\") {\r\n\r\n\t\t\t// Mouse styles\r\n\t\t\tthis.startGrip.cursorOverStyle = MouseCursorStyle.horizontalResize;\r\n\t\t\tthis.endGrip.cursorOverStyle = MouseCursorStyle.horizontalResize;\r\n\r\n\t\t\t// Reader text\r\n\t\t\t/*this.readerTitle = this.language.translate(\"Use TAB to select grip buttons or left and right arrows to change selection\");\r\n\t\t\tthis.thumb.readerDescription = this.language.translate(\"Use left and right arrows to move selection\");\r\n\t\t\tthis.startGrip.readerDescription = this.language.translate(\"Use left and right arrows to move left selection\");\r\n\t\t\tthis.endGrip.readerDescription = this.language.translate(\"Use left and right arrows to move right selection\");*/\r\n\r\n\t\t}\r\n\t\telse {\r\n\r\n\t\t\t// Mouse styles\r\n\t\t\tthis.startGrip.cursorOverStyle = MouseCursorStyle.verticalResize;\r\n\t\t\tthis.endGrip.cursorOverStyle = MouseCursorStyle.verticalResize;\r\n\r\n\t\t\t// Reader text\r\n\t\t\t/*this.readerTitle = this.language.translate(\"Use TAB select grip buttons or up and down arrows to change selection\");\r\n\t\t\tthis.thumb.readerDescription = this.language.translate(\"Use up and down arrows to move selection\");\r\n\t\t\tthis.startGrip.readerDescription = this.language.translate(\"Use up and down arrows to move upper selection\");\r\n\t\t\tthis.endGrip.readerDescription = this.language.translate(\"Use up and down arrows to move lower selection\");*/\r\n\r\n\t\t}\r\n\t\tthis.updateByOrientation();\r\n\t\tthis.invalidate();\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore\r\n\t */\r\n\tprotected updateByOrientation() {\r\n\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * @return {Orientation} Orientation\r\n\t */\r\n\tpublic get orientation(): Orientation {\r\n\t\treturn this._orientation;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * ==========================================================================\r\n\t * GRIPS\r\n\t * ==========================================================================\r\n\t * @hidden\r\n\t */\r\n\r\n\t/**\r\n\t * Start grip element. (button)\r\n\t *\r\n\t * @param {ResizeButton}  button  Grip element\r\n\t */\r\n\tpublic set startGrip(button: ResizeButton) {\r\n\t\tif (this._startGrip) {\r\n\t\t\tthis.removeDispose(this._startGrip);\r\n\t\t}\r\n\t\tthis._startGrip = button;\r\n\t\tthis.processGrip(button);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {ResizeButton} Grip element\r\n\t */\r\n\tpublic get startGrip(): ResizeButton {\r\n\t\treturn this._startGrip;\r\n\t}\r\n\r\n\t/**\r\n\t * End grip element. (button)\r\n\t *\r\n\t * @param {ResizeButton}  button  Grip element\r\n\t */\r\n\tpublic set endGrip(button: ResizeButton) {\r\n\t\tif (this._endGrip) {\r\n\t\t\tthis.removeDispose(this._endGrip);\r\n\t\t}\r\n\t\tthis._endGrip = button;\r\n\t\tthis.processGrip(button);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {ResizeButton} Grip element\r\n\t */\r\n\tpublic get endGrip(): ResizeButton {\r\n\t\treturn this._endGrip;\r\n\t}\r\n\r\n\t/**\r\n\t * Decorates the grip button with properties and events.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {ResizeButton} button Grip button\r\n\t */\r\n\tpublic processGrip(button: ResizeButton) {\r\n\t\tbutton.parent = this;\r\n\t\tbutton.isMeasured = false;\r\n\t\tbutton.hoverable = true;\r\n\t\tbutton.focusable = true;\r\n\r\n\t\t// Set button defaults\r\n\t\tbutton.showSystemTooltip = true;\r\n\t\tbutton.zIndex = 100;\r\n\r\n\t\tbutton.events.on(\"drag\", this.handleGripDrag, this);\r\n\t\tbutton.events.on(\"dragstop\", this.makeUnbusy, this);\r\n\t\tbutton.events.on(\"down\", this.makeBusy, this);\r\n\r\n\t\tthis._disposers.push(button);\r\n\t}\r\n\r\n\t/**\r\n\t * Updates positions of related elements after grip element is dragged.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {AMEvent<ResizeButton, ISpriteEvents>[\"drag\"]}  event  Event\r\n\t */\r\n\tpublic handleGripDrag(event: AMEvent<ResizeButton, ISpriteEvents>[\"drag\"]): void {\r\n\t\tthis.makeBusy();\r\n\r\n\t\tif (event.target === this._startGrip) {\r\n\t\t\tthis._usingGrip = \"start\";\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis._usingGrip = \"end\";\r\n\t\t}\r\n\r\n\t\tif (this.orientation == \"horizontal\") {\r\n\t\t\tthis._start = this.startGrip.pixelX / this.innerWidth;\r\n\t\t\tthis._end = this.endGrip.pixelX / this.innerWidth;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis._start = 1 - this.startGrip.pixelY / this.innerHeight;\r\n\t\t\tthis._end = 1 - this.endGrip.pixelY / this.innerHeight;\r\n\t\t}\r\n\r\n\t\tthis.updateThumb();\r\n\t}\r\n\r\n\t/**\r\n\t * A \"thumb\" element.\r\n\t *\r\n\t * It's a draggable square space between the grips, that can be used to\r\n\t * pan the seleciton.\r\n\t *\r\n\t * @param {RoundedRectangle}  thumb  Thumb element\r\n\t */\r\n\tpublic set thumb(thumb: Button) {\r\n\t\tif (thumb) {\r\n\r\n\t\t\tif (this._thumb) {\r\n\t\t\t\tthis.removeDispose(this._thumb);\r\n\t\t\t}\r\n\r\n\t\t\tthis._thumb = thumb;\r\n\t\t\tthumb.parent = this;\r\n\t\t\tthumb.isMeasured = false;\r\n\t\t\tthumb.inert = true;\r\n\t\t\tthumb.draggable = true;\r\n\t\t\tthumb.clickable = true;\r\n\t\t\tthumb.hoverable = true;\r\n\t\t\tthumb.focusable = true;\r\n\t\t\t//thumb.zIndex = 0;\r\n\r\n\t\t\t// TODO remove closures ?\r\n\t\t\t// Add events\r\n\r\n\t\t\t// Add cursor styles to thumb\r\n\t\t\tthumb.cursorOverStyle = MouseCursorStyle.grab;\r\n\t\t\tthumb.cursorDownStyle = MouseCursorStyle.grabbing;\r\n\r\n\t\t\tthumb.events.on(\"dragstart\", this.makeBusy, this);\r\n\t\t\tthumb.events.on(\"dragstop\", this.makeUnbusy, this);\r\n\t\t\tthumb.events.on(\"positionchanged\", this.handleThumbPosition, this);\r\n\t\t\tthumb.events.on(\"sizechanged\", this.handleThumbPosition, this);\r\n\t\t\tthumb.events.on(\"doublehit\", this.handleDoubleClick, this);\r\n\r\n\t\t\t// Add event for space and ENTER to toggle full zoom out and back\r\n\t\t\t// (same as doubleclick)\r\n\t\t\tthis._disposers.push(getInteraction().body.events.on(\"keyup\", (ev) => {\r\n\t\t\t\tif (keyboard.isKey(ev.event, [\"space\", \"enter\"]) && this.thumb.isFocused) {\r\n\t\t\t\t\tev.event.preventDefault();\r\n\t\t\t\t\tthis.handleDoubleClick();\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\r\n\t\t\tthis._disposers.push(this._thumb);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {RoundedRectangle} Thumb element\r\n\t */\r\n\tpublic get thumb(): Button {\r\n\t\tif (!this._thumb) {\r\n\t\t\t// Create scrollbar controls (setters will handle adding disposers)\r\n\t\t\tlet thumb = new Button();\r\n\t\t\tthumb.background.cornerRadius(10, 10, 10, 10);\r\n\t\t\tthumb.padding(0, 0, 0, 0);\r\n\t\t\tthis.thumb = thumb;\r\n\t\t}\r\n\t\treturn this._thumb;\r\n\t}\r\n\r\n\t/**\r\n\t * Zooms-in and out the selection on double-click of the thumb.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic handleDoubleClick(): void {\r\n\r\n\t\tthis.makeBusy();\r\n\r\n\t\tlet newStart: number = 0;\r\n\t\tlet newEnd: number = 1;\r\n\r\n\t\tif (this.start != 0 || this.end != 1) {\r\n\t\t\tthis._prevStart = this.start;\r\n\t\t\tthis._prevEnd = this.end;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tnewStart = this._prevStart;\r\n\t\t\tnewEnd = this._prevEnd;\r\n\t\t}\r\n\r\n\t\tthis._zoomAnimation = this.animate([{ property: \"__start\", to: newStart }, { property: \"__end\", to: newEnd }], this.animationDuration, this.animationEasing);\r\n\t\tif (this.animationDuration > 0) {\r\n\t\t\tthis._zoomAnimation.events.on(\"animationended\", this.makeUnbusy, this);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.makeUnbusy();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Updates positions of other elements when thumb is moved.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic handleThumbPosition(): void {\r\n\t\tlet thumb = this.thumb;\r\n\t\tif (this.orientation == \"horizontal\") {\r\n\t\t\tlet innerWidth = this.innerWidth;\r\n\t\t\tlet w = thumb.innerWidth;\r\n\t\t\tlet x = thumb.pixelX;\r\n\r\n\t\t\tthis._start = x / innerWidth;\r\n\t\t\tthis._end = (x + w) / innerWidth;\r\n\t\t\tthis.updateThumb();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tlet innerHeight = this.innerHeight;\r\n\t\t\tlet h = thumb.innerHeight;\r\n\t\t\tlet y = thumb.pixelY;\r\n\r\n\t\t\tthis._start = 1 - (y + h) / innerHeight;\r\n\t\t\tthis._end = 1 - y / innerHeight;\r\n\t\t\tthis.updateThumb();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a background element for the scrollbar.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {RoundedRectangle} Background\r\n\t */\r\n\tpublic createBackground(): this[\"_background\"] {\r\n\t\treturn new RoundedRectangle();\r\n\t}\r\n\r\n\t/**\r\n\t * Use this property to set whether grips should be always visible (`false`),\r\n\t * or they should just appear on scrollbar hover (`true`).\r\n\t *\r\n\t * @param {boolean}  value  Show only on hover?\r\n\t */\r\n\tpublic set hideGrips(value: boolean) {\r\n\r\n\t\tthis._hideGrips = value;\r\n\r\n\t\tif (this._overDisposer) {\r\n\t\t\tthis.removeDispose(this._overDisposer);\r\n\t\t}\r\n\t\tif (this._outDisposer) {\r\n\t\t\tthis.removeDispose(this._outDisposer);\r\n\t\t}\r\n\r\n\t\tif (value) {\r\n\t\t\tthis._overDisposer = this.events.on(\"over\", () => {\r\n\t\t\t\tthis.startGrip.show();\r\n\t\t\t\tthis.endGrip.show();\r\n\t\t\t})\r\n\t\t\tthis._outDisposer = this.events.on(\"out\", () => {\r\n\t\t\t\tthis.startGrip.hide();\r\n\t\t\t\tthis.endGrip.hide();\r\n\t\t\t})\r\n\t\t\tthis.startGrip.hide();\r\n\t\t\tthis.endGrip.hide();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.startGrip.show();\r\n\t\t\tthis.endGrip.show();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Show only on hover?\r\n\t */\r\n\tpublic get hideGrips(): boolean {\r\n\t\treturn this._hideGrips;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Duration in milliseconds of scrollbar animation (happens when user clicks on a background of a scrollbar)\r\n\t * @default 0\r\n\t * @param {number} value number\r\n\t */\r\n\tpublic set animationDuration(value: number) {\r\n\t\tthis.setPropertyValue(\"animationDuration\", value);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {PointerOrientation} Orientation\r\n\t */\r\n\tpublic get animationDuration(): number {\r\n\t\treturn this.getPropertyValue(\"animationDuration\");\r\n\t}\r\n\r\n\t/**\r\n\t * Animation easing function.\r\n\t * @todo: review description and default\r\n\t * @default $ease.cubicOut\r\n\t * @param {Function}  value (value: number) => number\r\n\t */\r\n\tpublic set animationEasing(value: (value: number) => number) {\r\n\t\tthis.setPropertyValue(\"animationEasing\", value);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Function}\r\n\t */\r\n\tpublic get animationEasing(): (value: number) => number {\r\n\t\treturn this.getPropertyValue(\"animationEasing\");\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"Scrollbar\"] = Scrollbar;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/elements/Scrollbar.ts","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\n// eslint-disable-next-line no-prototype-builtins\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_iobject.js\n// module id = 105\n// module chunks = 26","exports.f = {}.propertyIsEnumerable;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_object-pie.js\n// module id = 106\n// module chunks = 26","// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = require('./_cof');\nvar TAG = require('./_wks')('toStringTag');\n// ES3 wrong here\nvar ARG = cof(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (e) { /* empty */ }\n};\n\nmodule.exports = function (it) {\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_classof.js\n// module id = 107\n// module chunks = 26","/**\r\n * AmChartsLogo module.\r\n *\r\n * AmChartsLogo shows amCharts logo for non-commercial users of a library.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Container, IContainerProperties, IContainerAdapters, IContainerEvents } from \"../Container\";\r\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\r\nimport { SpriteEventDispatcher, AMEvent } from \"../Sprite\";\r\nimport { Polyspline } from \"./Polyspline\";\r\nimport { color } from \"../utils/Color\";\r\nimport { LinearGradient } from \"../rendering/fills/LinearGradient\";\r\nimport { DesaturateFilter } from \"../rendering/filters/DesaturateFilter\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[AmChartsLogo]].\r\n * @ignore Exclude from docs\r\n */\r\nexport interface IAmChartsLogoProperties extends IContainerProperties { }\r\n\r\n/**\r\n * Defines events for [[AmChartsLogo]].\r\n * @ignore Exclude from docs\r\n */\r\nexport interface IAmChartsLogoEvents extends IContainerEvents { }\r\n\r\n/**\r\n * Defines adapters for [[AmChartsLogo]].\r\n *\r\n * @see {@link Adapter}\r\n * @ignore Exclude from docs\r\n */\r\nexport interface IAmChartsLogoAdapters extends IContainerAdapters, IAmChartsLogoProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * A class used to draw and display progress indicator.\r\n *\r\n * @see {@link IAmChartsLogoEvents} for a list of available events\r\n * @see {@link IAmChartsLogoAdapters} for a list of available Adapters\r\n * @ignore Exclude from docs\r\n */\r\nexport class AmChartsLogo extends Container {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IAmChartsLogoProperties}\r\n\t */\r\n\tpublic _properties!: IAmChartsLogoProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IAmChartsLogoAdapters}\r\n\t */\r\n\tpublic _adapter!: IAmChartsLogoAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IAmChartsLogoEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IAmChartsLogoEvents;\r\n\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\r\n\t\t// Init\r\n\t\tsuper();\r\n\t\tthis.className = \"AmChartsLogo\";\r\n\r\n\t\tthis.valign = \"bottom\";\r\n\r\n\t\tlet d = 0.3;\r\n\t\tthis.opacity = 0.3;\r\n\t\tthis.defaultState.properties.opacity = 0.4;\r\n\t\tthis.url = \"https://www.amcharts.com/\";\r\n\r\n\t\tthis.showSystemTooltip = true;\r\n\t\tthis.readerTitle = \"chart created using amCharts library\";\r\n\t\tthis.width = 220 * d;\r\n\t\tthis.height = 70 * d;\r\n\t\tthis.background.opacity = 0;\r\n\r\n\t\tlet aColor = color(\"#474758\");\r\n\t\tif (new InterfaceColorSet().getFor(\"background\").alternative.hex == \"#ffffff\") {\r\n\t\t\taColor = color(\"#ffffff\");\r\n\t\t}\r\n\r\n\t\tlet aGradient = new LinearGradient();\r\n\r\n\t\taGradient.addColor(aColor);\r\n\t\taGradient.addColor(aColor, 1, 0.75);\r\n\t\taGradient.addColor(color(\"#3cabff\"), 1, 0.755);\r\n\t\taGradient.rotation = -10;\r\n\r\n\t\tlet aStroke = aGradient;\r\n\r\n\t\tlet m = this.createChild(Polyspline)\r\n\t\tm.shouldClone = false;\r\n\t\tm.isMeasured = false;\r\n\t\tm.segments = [[{ x: 50 * d, y: 50 * d }, { x: 90 * d, y: 50 * d }, { x: 120 * d, y: 20 * d }, { x: 135 * d, y: 35 * d }, { x: 150 * d, y: 20 * d }, { x: 180 * d, y: 50 * d }, { x: 200 * d, y: 50 * d }]]\r\n\t\tm.strokeWidth = 6 * d;\r\n\t\tm.tensionX = 0.8;\r\n\t\tm.tensionY = 1;\r\n\r\n\t\tm.stroke = color(\"#3cabff\");\r\n\r\n\t\tlet a = this.createChild(Polyspline);\r\n\t\ta.shouldClone = false;\r\n\t\ta.isMeasured = false;\r\n\t\ta.segments = [[{ x: 20 * d, y: 50 * d }, { x: 50 * d, y: 50 * d }, { x: 90 * d, y: 12 * d }, { x: 133 * d, y: 50 * d }, { x: 170 * d, y: 50 * d }, { x: 200 * d, y: 50 * d }]]\r\n\t\ta.strokeWidth = 6 * d;\r\n\t\ta.tensionX = 0.75;\r\n\t\ta.tensionY = 1;\r\n\t\ta.stroke = aStroke;\r\n\r\n\t\tlet desaturateFilter = new DesaturateFilter();\r\n\t\tthis.filters.push(desaturateFilter);\r\n\r\n\t\tlet desaturateFilterHover = new DesaturateFilter();\r\n\t\tdesaturateFilterHover.saturation = 1;\r\n\r\n\t\tlet hoverState = this.states.create(\"hover\");\r\n\t\thoverState.properties.opacity = 1;\r\n\t\thoverState.filters.push(desaturateFilterHover);\r\n\r\n\t\t// temp\r\n\t\t//this.scale = 0.001;\r\n\r\n\t\t// Apply theme\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/elements/AmChartsLogo.ts","/**\r\n * Module, defining base Axis Renderer.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Container, ContainerLayout, IContainerProperties, IContainerAdapters, IContainerEvents } from \"../../core/Container\";\r\nimport { Sprite, SpriteEventDispatcher, AMEvent } from \"../../core/Sprite\";\r\nimport { IPoint } from \"../../core/defs/IPoint\";\r\nimport { MutableValueDisposer } from \"../../core/utils/Disposer\";\r\nimport { Axis } from \"./Axis\";\r\nimport { AxisLine } from \"./AxisLine\";\r\nimport { AxisFill } from \"./AxisFill\";\r\nimport { Grid } from \"./Grid\";\r\nimport { AxisLabel } from \"./AxisLabel\";\r\nimport { AxisTick } from \"./AxisTick\";\r\nimport { AxisBreak } from \"./AxisBreak\";\r\nimport { Chart } from \"../Chart\";\r\nimport { Tooltip, PointerOrientation } from \"../../core/elements/Tooltip\";\r\nimport { ListTemplate, ListDisposer } from \"../../core/utils/List\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { percent } from \"../../core/utils/Percent\";\r\nimport * as $math from \"../../core/utils/Math\";\r\nimport { XYChart } from \"../types/XYChart\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[AxisRenderer]].\r\n */\r\nexport interface IAxisRendererProperties extends IContainerProperties {\r\n\r\n\t/**\r\n\t * Minimum distance in pixels between grid elements.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tminGridDistance?: number;\r\n\r\n\t/**\r\n\t * Draw axis labels inside axis.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tinside?: boolean;\r\n\r\n\t/**\r\n\t * Draw axis on opposite side of the plot area?\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\topposite?: boolean;\r\n\r\n\t/**\r\n\t * Inverse the order of the scale for the Axis.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tinversed?: boolean;\r\n\r\n\t/**\r\n\t * Location of the cell start. (0-1)\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tcellStartLocation?: number;\r\n\r\n\t/**\r\n\t * Location of the cell end. (0-1)\r\n\t * @type {number}\r\n\t */\r\n\tcellEndLocation?: number;\r\n\r\n\t/**\r\n\t * Location of the axis tooltip. (0-1)\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\ttooltipLocation?: number;\r\n\r\n\t/**\r\n\t * Resize axis tooltip to the full width of the cell.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tfullWidthTooltip?: boolean;\r\n\r\n\t/**\r\n\t * Labels with position less than this will be hidden.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tminLabelPosition?: number;\r\n\r\n\t/**\r\n\t * Labels with position bigger than this will be hidden.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tmaxLabelPosition?: number;\r\n\r\n}\r\n\r\n/**\r\n * Defines events for [[AxisRenderer]].\r\n */\r\nexport interface IAxisRendererEvents extends IContainerEvents { }\r\n\r\n/**\r\n * Defines adapters for [[AxisRenderer]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface IAxisRendererAdapters extends IContainerAdapters, IAxisRendererProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * A base class for all axis renderers.\r\n *\r\n * @see {@link IAxisRendererEvents} for a list of available events\r\n * @see {@link IAxisRendererAdapters} for a list of available Adapters\r\n */\r\nexport class AxisRenderer extends Container {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IAxisRendererProperties}\r\n\t */\r\n\tpublic _properties!: IAxisRendererProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IAxisRendererAdapters}\r\n\t */\r\n\tpublic _adapter!: IAxisRendererAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IAxisRendererEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IAxisRendererEvents;\r\n\r\n\t/**\r\n\t * A related Axis.\r\n\t *\r\n\t * @type {Axis}\r\n\t */\r\n\tprotected _axis: Axis;\r\n\r\n\t/**\r\n\t * An Axis line of the related Axis.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {AxisLine}\r\n\t */\r\n\tpublic line: AxisLine;\r\n\r\n\t/**\r\n\t * Base grid element. ([[Sprite]])\r\n\t *\r\n\t * For value axes base grid is at value 0.\r\n\t *\r\n\t * For category/date axis it is added at the end of the last item/date.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Sprite}\r\n\t */\r\n\tpublic baseGrid: Sprite;\r\n\r\n\t/**\r\n\t * A [[Container]] holding all of the [[Grid]] elements.\r\n\t *\r\n\t * @type {Container}\r\n\t */\r\n\tpublic gridContainer: Container;\r\n\r\n\t/**\r\n\t * A [[Container]] holding all of the [[AxisBreak]] elements.\r\n\t *\r\n\t * @type {Container}\r\n\t */\r\n\tpublic breakContainer: Container;\r\n\r\n\t/**\r\n\t * A related chart.\r\n\t *\r\n\t * @todo Description\r\n\t * @type {MutableValueDisposer}\r\n\t */\r\n\tprotected _chart = new MutableValueDisposer<Chart>();\r\n\r\n\t/**\r\n\t * Defines type of the grid elements.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Grid}\r\n\t */\r\n\tpublic _gridType: Grid;\r\n\r\n\t/**\r\n\t * Defines type for the fill elements.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {AxisFill}\r\n\t */\r\n\tpublic _fillType: AxisFill;\r\n\r\n\t/**\r\n\t * Defines type for tick elements.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {AxisTick}\r\n\t */\r\n\tpublic _tickType: AxisTick;\r\n\r\n\t/**\r\n\t * Defines type for the label elements.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {AxisLabel}\r\n\t */\r\n\tpublic _labelType: AxisLabel;\r\n\r\n\t/**\r\n\t * A list of grid elements.\r\n\t */\r\n\tprotected _grid: ListTemplate<this[\"_gridType\"]>;\r\n\r\n\t/**\r\n\t * A list of tick elements.\r\n\t */\r\n\tprotected _ticks: ListTemplate<this[\"_tickType\"]>;\r\n\r\n\t/**\r\n\t * A list of label elements.\r\n\t */\r\n\tprotected _labels: ListTemplate<this[\"_labelType\"]>;\r\n\r\n\t/**\r\n\t * A list of fill elements.\r\n\t */\r\n\tprotected _axisFills: ListTemplate<this[\"_fillType\"]>;\r\n\r\n\r\n\t/**\r\n\t * Constructor.\r\n\t *\r\n\t * @param {Axis} axis Related axis\r\n\t */\r\n\tconstructor() {\r\n\r\n\t\t// Init\r\n\t\tsuper();\r\n\t\tthis.className = \"AxisRenderer\";\r\n\r\n\t\t// Set defaults\r\n\t\tthis.minGridDistance = 50;\r\n\t\tthis.inside = false;\r\n\t\tthis.inversed = false;\r\n\t\tthis.tooltipLocation = 0.5;\r\n\t\tthis.fullWidthTooltip = false;\r\n\t\tthis.cellStartLocation = 0;\r\n\t\tthis.cellEndLocation = 1;\r\n\r\n\t\tthis.minLabelPosition = 0;\r\n\t\tthis.maxLabelPosition = 1;\r\n\t\tthis.shouldClone = false;\r\n\r\n\t\tlet gridContainer = this.createChild(Container);\r\n\t\tgridContainer.shouldClone = false;\r\n\t\tgridContainer.layout = \"none\";\r\n\t\tgridContainer.isMeasured = false;\r\n\t\tgridContainer.width = percent(100);\r\n\t\tgridContainer.height = percent(100);\r\n\t\tthis.gridContainer = gridContainer;\r\n\r\n\t\tlet breakContainer = this.createChild(Container);\r\n\t\tbreakContainer.shouldClone = false;\r\n\t\tbreakContainer.isMeasured = false;\r\n\t\tbreakContainer.layout = \"none\";\r\n\t\tbreakContainer.width = percent(100);\r\n\t\tbreakContainer.height = percent(100);\r\n\t\tthis.breakContainer = breakContainer;\r\n\r\n\t\tthis.line = this.createChild(AxisLine); // yes, to axis, not to renderer\r\n\t\tthis.line.shouldClone = false;\r\n\t\tthis.line.strokeOpacity = 0;\r\n\t\tthis.ticks.template.strokeOpacity = 0;\r\n\r\n\t\t//this.ticks.template.disabled = true;\r\n\t\t//this.axisFills.template.disabled = true;\r\n\r\n\t\tlet baseGrid: Grid = this.createChild(Grid);\r\n\t\tbaseGrid.shouldClone = false;\r\n\t\tthis.baseGrid = baseGrid;\r\n\r\n\t\t//this.gridContainer.events.on(\"maxsizechanged\", this.invalidateAxisItems, this);\r\n\r\n\t\t// Make elements disposable\r\n\t\tlet disposers = this._disposers;\r\n\t\tdisposers.push(baseGrid);\r\n\t\tdisposers.push(this.line);\r\n\t\tdisposers.push(gridContainer);\r\n\t\tdisposers.push(breakContainer);\r\n\t\tdisposers.push(this._chart);\r\n\r\n\t\t// Apply theme\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\r\n\tset axis(axis: Axis) {\r\n\t\tthis.setAxis(axis);\r\n\t}\r\n\r\n\tget axis(): Axis {\r\n\t\treturn this._axis;\r\n\t}\r\n\r\n\t/**\r\n\t* @ignore\r\n\t*/\r\n\tpublic setAxis(axis: Axis) {\r\n\t\tthis._axis = axis;\r\n\t\tthis.baseGrid.parent = axis;\r\n\t\tthis.line.parent = axis;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Called when rendered is attached to an Axis, as well as a property of\r\n\t * Axis that might affect the appearance is updated.\r\n\t *\r\n\t * E.g. `axis.opposite`, `axis.inside`, etc.\r\n\t *\r\n\t * This method is called **before** draw, so that any related setting\r\n\t * changed in this method can be changed.\r\n\t *\r\n\t * @todo Description (review)\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic processRenderer(): void {\r\n\t\tthis.events.on(\"sizechanged\", this.updateTooltip, this);\r\n\t\tthis.events.on(\"positionchanged\", this.updateTooltip, this);\r\n\t\tthis.labels.template.inside = this.inside;\r\n\t\tthis.ticks.template.inside = this.inside;\r\n\t}\r\n\r\n\t/**\r\n\t * Updates Axis' tooltip.\r\n\t *\r\n\t * @todo Description (review)\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic updateTooltip(): void {\r\n\t\t// This is a placeholder method for extending classes to override.\r\n\t}\r\n\r\n\t/**\r\n\t * Returns actual length of the Axis, in pixels.\r\n\t *\r\n\t * @return {number} Length (px)\r\n\t */\r\n\tpublic get axisLength(): number {\r\n\t\t// This is a placeholder method for extending classes to override.\r\n\t\treturn 0;\r\n\t}\r\n\r\n\t/**\r\n\t * Re-positions an element to new coordinates.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {Sprite}  item   A target element\r\n\t * @param {IPoint}  point  New coordinates\r\n\t */\r\n\tpublic positionItem(item: Sprite, point: IPoint): void {\r\n\t\tif (item) {\r\n\t\t\titem.moveTo(point);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Converts relative position on axis to point coordinates.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {number}  position  Position (0-1)\r\n\t * @return {IPoint}            Point\r\n\t */\r\n\tpublic positionToPoint(position: number): IPoint {\r\n\t\t// This is a placeholder method for extending classes to override.\r\n\t\treturn { x: 0, y: 0 };\r\n\t}\r\n\r\n\t/**\r\n\t * Converts relative position on axis to angle.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description (review / units)\r\n\t * @param  {number}  position  Position (0-1)\r\n\t * @return {number}            Angle\r\n\t */\r\n\tpublic positionToAngle(position: number): number {\r\n\t\t// This is a placeholder method for extending classes to override.\r\n\t\treturn 0;\r\n\t}\r\n\r\n\t/**\r\n\t * Converts relative position (0-1) on axis to a pixel coordinate.\r\n\t *\r\n\t * @todo Description (review)\r\n\t * @param  {number}  position  Position (0-1)\r\n\t * @return {number}            Coordinate (px)\r\n\t */\r\n\tpublic positionToCoordinate(position: number): number {\r\n\t\tlet coordinate: number;\r\n\t\tlet axis: Axis = this.axis;\r\n\t\tlet axisFullLength = axis.axisFullLength;\r\n\r\n\t\tif (axis.renderer.inversed) {\r\n\t\t\tcoordinate = (axis.end - position) * axisFullLength;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tcoordinate = (position - axis.start) * axisFullLength;\r\n\t\t}\r\n\t\treturn $math.round(coordinate, 1);\r\n\t}\r\n\r\n\r\n\tprotected getHeight(): number {\r\n\t\tlet axis = this.axis;\r\n\t\tif (axis && axis.chart) {\r\n\t\t\tlet chart = <XYChart>this.axis.chart;\r\n\t\t\tif (chart.plotContainer) {\r\n\t\t\t\treturn chart.plotContainer.pixelHeight;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this.gridContainer.pixelHeight;\r\n\t}\r\n\r\n\tprotected getWidth(): number {\r\n\t\tlet axis = this.axis;\r\n\t\tif (axis && axis.chart) {\r\n\t\t\tlet chart = <XYChart>this.axis.chart;\r\n\t\t\tif (chart.plotContainer) {\r\n\t\t\t\treturn chart.plotContainer.pixelWidth;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this.gridContainer.pixelWidth;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Converts a coordinate in pixels to a relative position. (0-1)\r\n\t *\r\n\t * @todo Description (review)\r\n\t * @param  {number}  coordinate  Coordinate (px)\r\n\t * @return {number}              Position (0-1)\r\n\t */\r\n\tpublic coordinateToPosition(coordinate: number): number {\r\n\t\tlet position: number;\r\n\t\tlet axis: Axis = this.axis;\r\n\t\tlet axisFullLength = axis.axisFullLength;\r\n\r\n\t\tif (axis.renderer.inversed) {\r\n\t\t\tposition = axis.end - coordinate / axisFullLength;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tposition = coordinate / axisFullLength + axis.start;\r\n\t\t}\r\n\r\n\t\treturn $math.round(position, 5);\r\n\t}\r\n\r\n\t/**\r\n\t * Converts a point at specific coordinates to a relative position (0-1)\r\n\t * on the axis.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {IPoint}  point  Point\r\n\t * @return {number}         Position (0-1)\r\n\t */\r\n\tpublic pointToPosition(point: IPoint): number {\r\n\t\t// This is a placeholder method for extending classes to override.\r\n\t\treturn 0;\r\n\t}\r\n\r\n\t/**\r\n\t * [getPositionRangePath description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @param  {number}  startPosition  Starting position\r\n\t * @param  {number}  endPosition    End position\r\n\t * @return {string}                 SVG path\r\n\t */\r\n\tpublic getPositionRangePath(startPosition: number, endPosition: number): string {\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\t/**\r\n\t * Invalidates all axis data items, effectively causing them re-evaluated.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description (review)\r\n\t */\r\n\tpublic invalidateAxisItems(): void {\r\n\t\tlet axis: Axis = this.axis;\r\n\t\tif (axis) {\r\n\t\t\taxis.invalidateDataItems();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Updates and positions a grid element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {Grid}    grid         Grid element\r\n\t * @param {number}  position     Starting position\r\n\t * @param {number}  endPosition  End position\r\n\t */\r\n\tpublic updateGridElement(grid: Sprite, position: number, endPosition: number): void {\r\n\t\t// This is a placeholder method for extending classes to override.\r\n\t}\r\n\r\n\t/**\r\n\t * Updates and positions a tick element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {AxisTick}  tick         Tick element\r\n\t * @param {number}    position     Starting position\r\n\t * @param {number}    endPosition  End position\r\n\t */\r\n\tpublic updateTickElement(tick: AxisTick, position: number, endPosition: number): void {\r\n\t\t// This is a placeholder method for extending classes to override.\r\n\t}\r\n\r\n\t/**\r\n\t * Updates and positions a label element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {AxisLabel}  label        Label element\r\n\t * @param {number}     position     Starting position\r\n\t * @param {number}     endPosition  Ending position\r\n\t */\r\n\tpublic updateLabelElement(label: AxisLabel, position: number, endPosition: number): void {\r\n\t\t// This is a placeholder method for extending classes to override.\r\n\t}\r\n\r\n\t/**\r\n\t * Updates and positions the axis line element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {AxisFill}  fill         Fill element\r\n\t * @param {number}    position     Starting position\r\n\t * @param {number}    endPosition  Ending position\r\n\t */\r\n\tpublic updateFillElement(fill: AxisFill, position: number, endPosition: number): void {\r\n\t\tfill.startPosition = position;\r\n\t\tfill.endPosition = endPosition;\r\n\t}\r\n\r\n\t/**\r\n\t * Updates and positions the axis line element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic updateAxisLine(): void {\r\n\t\t// This is a placeholder method for extending classes to override.\r\n\t}\r\n\r\n\t/**\r\n\t * Updates and positions the base grid element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic updateBaseGridElement(): void {\r\n\t\t// This is a placeholder method for extending classes to override.\r\n\t}\r\n\r\n\t/**\r\n\t * Updates and positions an axis break element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {AxisBreak} axisBreak Break element\r\n\t */\r\n\tpublic updateBreakElement(axisBreak: AxisBreak): void {\r\n\t\tthis.positionItem(axisBreak.startLine, axisBreak.startPoint);\r\n\t\tthis.toggleVisibility(axisBreak.startLine, axisBreak.startPosition, 0, 1);\r\n\t\tthis.positionItem(axisBreak.endLine, axisBreak.endPoint);\r\n\t\tthis.toggleVisibility(axisBreak.endLine, axisBreak.endPosition, 0, 1);\r\n\t}\r\n\r\n\t/**\r\n\t * Minimum distance in pixels between grid elements.\r\n\t *\r\n\t * @param {number}  value  Min distance (px)\r\n\t */\r\n\tpublic set minGridDistance(value: number) {\r\n\t\tif (this.setPropertyValue(\"minGridDistance\", value)) {\r\n\t\t\tif (this.axis) {\r\n\t\t\t\tthis.axis.invalidateLayout();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Min distance (px)\r\n\t */\r\n\tpublic get minGridDistance(): number {\r\n\t\treturn this.getPropertyValue(\"minGridDistance\");\r\n\t}\r\n\r\n\t/**\r\n\t * A chart, associated with the Axis.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {Chart}  value  Chart\r\n\t */\r\n\tpublic set chart(value: Chart) {\r\n\t\tthis._chart.set(value, null);\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore Exclude from docs\r\n\t * @return {Chart} Chart\r\n\t */\r\n\tpublic get chart(): Chart {\r\n\t\treturn this._chart.get();\r\n\t}\r\n\r\n\t/**\r\n\t * Toggles visibility of an element, based on its current position and\r\n\t * min/max position settings.\r\n\t *\r\n\t * E.g. labels based on `minLabelPosition` and `maxLabelPosition`.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {Sprite}  sprite       An element to toggle\r\n\t * @param {number}  position     Elements current position\r\n\t * @param {number}  minPosition  Min position setting\r\n\t * @param {number}  maxPosition  Max position setting\r\n\t */\r\n\tprotected toggleVisibility(sprite: Sprite, position: number, minPosition: number, maxPosition: number): void {\r\n\t\tlet axis = this.axis;\r\n\r\n\t\tlet updatedStart = axis.start + (axis.end - axis.start) * minPosition - 0.00001;\r\n\t\tlet updatedEnd = axis.start + (axis.end - axis.start) * maxPosition + 0.00001;\r\n\r\n\t\tif (position < updatedStart || position > updatedEnd) {\r\n\t\t\tsprite.__disabled = true;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsprite.__disabled = false;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Creates visual elements for and axis break.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {AxisBreak} axisBreak Axis break\r\n\t */\r\n\tpublic createBreakSprites(axisBreak: AxisBreak) {\r\n\t\t// This is a placeholder method for extending classes to override.\r\n\t}\r\n\r\n\t/**\r\n\t * A list of Axis' Fill elements.\r\n\t *\r\n\t * @return {ListTemplate} Fill elements\r\n\t */\r\n\tpublic get axisFills(): ListTemplate<this[\"_fillType\"]> {\r\n\t\tif (!this._axisFills) {\r\n\t\t\tthis._axisFills = new ListTemplate<AxisFill>(this.createFill(this.axis));\r\n\t\t\tthis._disposers.push(new ListDisposer(this._axisFills));\r\n\t\t\tthis._disposers.push(this._axisFills.template);\r\n\t\t}\r\n\t\treturn this._axisFills;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a new fill element, suitable for this Axis Renderer type.\r\n\t *\r\n\t * @return {AxisFill} Fill element\r\n\t */\r\n\tpublic createFill(axis: Axis): this[\"_fillType\"] {\r\n\t\treturn new AxisFill(axis);\r\n\t}\r\n\r\n\t/**\r\n\t * A list of Axis' Grid elements.\r\n\t *\r\n\t * @return {ListTemplate} Grid elements\r\n\t */\r\n\tpublic get grid(): ListTemplate<this[\"_gridType\"]> {\r\n\t\tif (!this._grid) {\r\n\t\t\tthis._grid = new ListTemplate<Grid>(this.createGrid());\r\n\t\t\tthis._disposers.push(new ListDisposer(this._grid));\r\n\t\t\tthis._disposers.push(this._grid.template);\r\n\t\t}\r\n\t\treturn this._grid;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a new grid element, suitable for this Axis Renderer type.\r\n\t *\r\n\t * @return {Grid} Grid element\r\n\t */\r\n\tpublic createGrid(): this[\"_gridType\"] {\r\n\t\treturn new Grid();\r\n\t}\r\n\r\n\t/**\r\n\t * A list of Axis' Tick elements.\r\n\t *\r\n\t * @return {ListTemplate} Tick elements\r\n\t */\r\n\tpublic get ticks(): ListTemplate<this[\"_tickType\"]> {\r\n\t\tif (!this._ticks) {\r\n\t\t\tlet tick: AxisTick = this.createTick();\r\n\t\t\ttick.isMeasured = false;\r\n\t\t\tthis._ticks = new ListTemplate<AxisTick>(tick);\r\n\t\t\tthis._disposers.push(new ListDisposer(this._ticks));\r\n\t\t\tthis._disposers.push(this._ticks.template);\r\n\t\t}\r\n\t\treturn this._ticks;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a new tick element, suitable for this Axis Renderer type.\r\n\t *\r\n\t * @return {AxisTick} Tick element\r\n\t */\r\n\tpublic createTick(): this[\"_tickType\"] {\r\n\t\treturn new AxisTick();\r\n\t}\r\n\r\n\t/**\r\n\t * A list of Axis' Label elements.\r\n\t *\r\n\t * @return {ListTemplate} Label elements\r\n\t */\r\n\tpublic get labels(): ListTemplate<this[\"_labelType\"]> {\r\n\t\tif (!this._labels) {\r\n\t\t\tthis._labels = new ListTemplate<AxisLabel>(this.createLabel());\r\n\t\t\tthis._disposers.push(new ListDisposer(this._labels));\r\n\t\t\tthis._disposers.push(this._labels.template);\r\n\t\t}\r\n\t\treturn this._labels;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a new label element, suitable for this Axis Renderer type.\r\n\t *\r\n\t * @return {AxisLabel} Label element\r\n\t */\r\n\tpublic createLabel(): this[\"_labelType\"] {\r\n\t\treturn new AxisLabel();\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether Axis' labels and ticks should be drawn inside Plot area.\r\n\t *\r\n\t * Does not work with all renderers, like AxisRendererRadial.\r\n\t *\r\n\t * @param {boolean}  value  Labels inside?\r\n\t */\r\n\tpublic set inside(value: boolean) {\r\n\t\tthis.setPropertyValue(\"inside\", value);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Labels inside?\r\n\t */\r\n\tpublic get inside(): boolean {\r\n\t\treturn this.getPropertyValue(\"inside\");\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether Axis should be drawn on the opposite side of the plot\r\n\t * area than it would normally be drawn based on chart's settings.\r\n\t *\r\n\t * Does not work with all renderers, like [[AxisRendererRadial]] and\r\n\t * [[AxisRenderer Circular].\r\n\t *\r\n\t * @param {boolean}  value  Draw axis on opposite side?\r\n\t */\r\n\tpublic set opposite(value: boolean) {\r\n\t\tthis.setPropertyValue(\"opposite\", value);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Draw axis on opposite side?\r\n\t */\r\n\tpublic get opposite(): boolean {\r\n\t\treturn this.getPropertyValue(\"opposite\");\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates if Axis tooltip should take the whole width of the axis cell.\r\n\t * (between two grid lines)\r\n\t *\r\n\t * NOTE: this setting is ignored on circular axis types.\r\n\t *\r\n\t * @param {boolean} value Full width tooltip?\r\n\t */\r\n\tpublic set fullWidthTooltip(value: boolean) {\r\n\t\tthis.setPropertyValue(\"fullWidthTooltip\", value);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Full width tooltip?\r\n\t */\r\n\tpublic get fullWidthTooltip(): boolean {\r\n\t\treturn this.getPropertyValue(\"fullWidthTooltip\");\r\n\t}\r\n\r\n\t/**\r\n\t * Location within axis cell to show tooltip on. (0-1)\r\n\t *\r\n\t * 0 - show at the start\r\n\t * 0.5 - show right in the middle\r\n\t * 1 - show at the end\r\n\t *\r\n\t * @param {number} value Tooltip location\r\n\t */\r\n\tpublic set tooltipLocation(value: number) {\r\n\t\tthis.setPropertyValue(\"tooltipLocation\", value);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Tooltip location\r\n\t */\r\n\tpublic get tooltipLocation(): number {\r\n\t\treturn this.getPropertyValue(\"tooltipLocation\");\r\n\t}\r\n\r\n\t/**\r\n\t * Location for the cell start.\r\n\t *\r\n\t * Normally a \"cell\" is the whole available width in a category.\r\n\t *\r\n\t * If there are several clustered column-like series available, the whole\r\n\t * space is divided between each clustered column, or column stacks.\r\n\t *\r\n\t * `cellStartLocation` identifies where, within available space, the actual\r\n\t * cell starts.\r\n\t *\r\n\t * This, together with column series' `width` will affect actual width of\r\n\t * columns, and thus gaps between them.\r\n\t *\r\n\t * This will affect category-like axes only, like [[DateAxis]], or\r\n\t * [[CategoryAxis]].\r\n\t *\r\n\t * This is used to limit a space occupied by series like column.\r\n\t *\r\n\t * @see {@link https://www.amcharts.com/docs/v4/concepts/axes/positioning-axis-elements/} for more info.\r\n\t * @param {number} value Cell start (0-1)\r\n\t */\r\n\tpublic set cellStartLocation(value: number) {\r\n\t\tthis.setPropertyValue(\"cellStartLocation\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Cell start (0-1)\r\n\t */\r\n\tpublic get cellStartLocation(): number {\r\n\t\treturn this.getPropertyValue(\"cellStartLocation\");\r\n\t}\r\n\r\n\t/**\r\n\t * Location for the cell end.\r\n\t *\r\n\t * Normally a \"cell\" is the whole available width in a category.\r\n\t *\r\n\t * If there are several clustered column-like series available, the whole\r\n\t * space is divided between each clustered column, or column stacks.\r\n\t *\r\n\t * `cellEndLocation` identifies where, within available space, the actual\r\n\t * cell ends.\r\n\t *\r\n\t * This, together with column series' `width` will affect actual width of\r\n\t * columns, and thus gaps between them.\r\n\t *\r\n\t * This will affect category-like axes only, like [[DateAxis]], or\r\n\t * [[CategoryAxis]].\r\n\t *\r\n\t * This is used to limit a space occupied by series like column.\r\n\t *\r\n\t * @see {@link https://www.amcharts.com/docs/v4/concepts/axes/positioning-axis-elements/} for more info.\r\n\t * @param {number} value Cell end (0-1)\r\n\t */\r\n\tpublic set cellEndLocation(value: number) {\r\n\t\tthis.setPropertyValue(\"cellEndLocation\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Cell end (0-1)\r\n\t */\r\n\tpublic get cellEndLocation(): number {\r\n\t\treturn this.getPropertyValue(\"cellEndLocation\");\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates if the scale of the axis should be flipped.\r\n\t *\r\n\t * @param {boolean} value Flip axis?\r\n\t */\r\n\tpublic set inversed(value: boolean) {\r\n\t\tthis.setPropertyValue(\"inversed\", value);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Flip axis?\r\n\t */\r\n\tpublic get inversed(): boolean {\r\n\t\treturn this.getPropertyValue(\"inversed\");\r\n\t}\r\n\r\n\t/**\r\n\t * Minimum position along the Axis, for labels.\r\n\t *\r\n\t * Labels, which have their position closer to the start of the Axis, will be\r\n\t * automatically hidden.\r\n\t *\r\n\t * E.g., setting this to 0.05 (5% of total axis length) would hide labels,\r\n\t * that would otherwise be drawn very near start of the Axis.\r\n\t *\r\n\t * This is especially usefull with `inside = true`, or if the chart hasn't\r\n\t * got any extra margins.\r\n\t *\r\n\t * @see {@link https://www.amcharts.com/docs/v4/concepts/axes/positioning-axis-elements/} for more info.\r\n\t * @param {number}  value  Min label position (0-1)\r\n\t */\r\n\tpublic set minLabelPosition(value: number) {\r\n\t\tthis.setPropertyValue(\"minLabelPosition\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Min label position (0-1)\r\n\t */\r\n\tpublic get minLabelPosition(): number {\r\n\t\treturn this.getPropertyValue(\"minLabelPosition\");\r\n\t}\r\n\r\n\t/**\r\n\t * Maximum position along the Axis, for labels.\r\n\t *\r\n\t * Labels, which have their position closer to the and of the Axis, will be\r\n\t * automatically hidden.\r\n\t *\r\n\t * E.g., setting this to 0.95 (95% of total axis length) would hide labels,\r\n\t * that would otherwise be drawn very near end of the Axis.\r\n\t *\r\n\t * This is especially usefull with `inside = true`, or if the chart hasn't\r\n\t * got any extra margins.\r\n\t *\r\n\t * @see {@link https://www.amcharts.com/docs/v4/concepts/axes/positioning-axis-elements/} for more info.\r\n\t * @param {number}  value  Max label position (0-1)\r\n\t */\r\n\tpublic set maxLabelPosition(value: number) {\r\n\t\tthis.setPropertyValue(\"maxLabelPosition\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Max label position (0-1)\r\n\t */\r\n\tpublic get maxLabelPosition(): number {\r\n\t\treturn this.getPropertyValue(\"maxLabelPosition\");\r\n\t}\r\n\r\n\t/**\r\n\t * Copies all settings and related items from another object of the same\r\n\t * type.\r\n\t *\r\n\t * @param {this}  source  Source object\r\n\t */\r\n\tpublic copyFrom(source: this) {\r\n\t\tsuper.copyFrom(source);\r\n\t\tthis.grid.template.copyFrom(source.grid.template);\r\n\t\tthis.ticks.template.copyFrom(source.ticks.template);\r\n\t\tthis.labels.template.copyFrom(source.labels.template);\r\n\t\tthis.axisFills.template.copyFrom(source.axisFills.template);\r\n\t\tthis.line.copyFrom(source.line);\r\n\t\tthis.baseGrid.copyFrom(source.baseGrid);\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"AxisRenderer\"] = AxisRenderer;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/charts/axes/AxisRenderer.ts","/**\r\n * Module, defining Axis Renderer for vertical axes.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { AxisRenderer, IAxisRendererProperties, IAxisRendererAdapters, IAxisRendererEvents } from \"./AxisRenderer\";\r\nimport { Sprite, SpriteEventDispatcher, AMEvent } from \"../../core/Sprite\";\r\nimport { IPoint } from \"../../core/defs/IPoint\";\r\nimport { IDisposer, MutableValueDisposer } from \"../../core/utils/Disposer\";\r\nimport { Axis } from \"./Axis\";\r\nimport { Grid } from \"./Grid\";\r\nimport { Label } from \"../../core/elements/Label\";\r\nimport { AxisTick } from \"./AxisTick\";\r\nimport { AxisLabel } from \"./AxisLabel\";\r\nimport { AxisBreak } from \"./AxisBreak\";\r\nimport { WavedLine } from \"../../core/elements/WavedLine\";\r\nimport { WavedRectangle } from \"../../core/elements/WavedRectangle\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { percent } from \"../../core/utils/Percent\";\r\nimport * as $math from \"../../core/utils/Math\";\r\nimport * as $path from \"../../core/rendering/Path\";\r\nimport * as $utils from \"../../core/utils/Utils\";\r\n\r\n\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[AxisRendererX]].\r\n */\r\nexport interface IAxisRendererXProperties extends IAxisRendererProperties { }\r\n\r\n/**\r\n * Defines events for [[AxisRendererX]].\r\n */\r\nexport interface IAxisRendererXEvents extends IAxisRendererEvents { }\r\n\r\n/**\r\n * Defines adapters for [[AxisRendererX]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface IAxisRendererXAdapters extends IAxisRendererAdapters, IAxisRendererXProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * A renderer for horizontal axis.\r\n *\r\n * @see {@link IAxisRendererEvents} for a list of available events\r\n * @see {@link IAxisRendererAdapters} for a list of available Adapters\r\n */\r\nexport class AxisRendererX extends AxisRenderer {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IAxisRendererXProperties}\r\n\t */\r\n\tpublic _properties!: IAxisRendererXProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IAxisRendererXAdapters}\r\n\t */\r\n\tpublic _adapter!: IAxisRendererXAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IAxisRendererXEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IAxisRendererXEvents;\r\n\r\n\t/**\r\n\t * Constructor.\r\n\t *\r\n\t * @param {Axis} axis Related axis\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.className = \"AxisRendererX\";\r\n\r\n\t\tthis.minGridDistance = 120;\r\n\r\n\t\tthis.opposite = false;\r\n\r\n\t\tthis.rotation = 0;\r\n\r\n\t\tthis.width = percent(100);\r\n\r\n\t\tthis.labels.template.horizontalCenter = \"middle\";\r\n\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t* @ignore\r\n\t*/\r\n\tpublic setAxis(axis: Axis) {\r\n\t\tsuper.setAxis(axis);\r\n\t\taxis.layout = \"vertical\";\r\n\t}\r\n\r\n\t/**\r\n\t * Called when rendered is attached to an Axis, as well as a property of\r\n\t * Axis that might affect the appearance is updated.\r\n\t *\r\n\t * E.g. `axis.opposite`, `axis.inside`, etc.\r\n\t *\r\n\t * This method is called **before** draw, so that any related setting\r\n\t * changed in this method can be changed.\r\n\t *\r\n\t * @todo Description (review)\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic processRenderer(): void {\r\n\t\tsuper.processRenderer();\r\n\r\n\t\t// can not do this in init, as axis is set later\r\n\t\tlet axis = this.axis;\r\n\r\n\t\tif (axis) {\r\n\t\t\taxis.width = percent(100);\r\n\r\n\t\t\t// @todo Is thi sneeded?\r\n\t\t\tthis.line;\r\n\r\n\t\t\tlet title: Label = axis.title;\r\n\t\t\ttitle.rotation = 0;\r\n\t\t\ttitle.align = \"center\";\r\n\r\n\t\t\tif (this.opposite) {\r\n\t\t\t\tthis.line.toFront();\r\n\t\t\t\ttitle.toBack();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\ttitle.toFront();\r\n\t\t\t\tthis.line.toBack();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Updates some of the Axis tooltip's visual properties, related to\r\n\t * rendering of the Axis.\r\n\t *\r\n\t * @todo Description (review)\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic updateTooltip() {\r\n\t\tlet axis: Axis = this.axis;\r\n\t\tif (axis) {\r\n\t\t\tlet bigNum: number = 1000;\r\n\t\t\tlet bbx: number = this.line.pixelX;\r\n\t\t\tlet bby: number = this.line.pixelY;\r\n\t\t\tlet bbw: number = this.measuredWidth;\r\n\r\n\t\t\tlet bbh: number = bigNum;\r\n\r\n\t\t\t// top\r\n\t\t\tif (this.opposite) {\r\n\t\t\t\tif (!this.inside) {\r\n\t\t\t\t\tbby = - bigNum;\r\n\t\t\t\t\tbbh = bigNum;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// bottom\r\n\t\t\telse {\r\n\t\t\t\tif (this.inside) {\r\n\t\t\t\t\tbby = - bigNum;\r\n\t\t\t\t\tbbh = bigNum;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.axis.updateTooltip(\"vertical\", { x: bbx, y: bby, width: bbw, height: bbh });\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Updates and positions a label element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {AxisLabel}  label        Label element\r\n\t * @param {number}     position     Starting position\r\n\t * @param {number}     endPosition  Ending position\r\n\t */\r\n\tpublic updateLabelElement(label: AxisLabel, position: number, endPosition: number) {\r\n\t\tposition = position + (endPosition - position) * label.location;\r\n\t\tlet point: IPoint = this.positionToPoint(position);\r\n\r\n\t\tlabel.isMeasured = !label.inside;\r\n\r\n\t\tif (!this.opposite && label.inside) {\r\n\t\t\tlabel.verticalCenter = \"bottom\";\r\n\t\t}\r\n\r\n\t\tthis.positionItem(label, point);\r\n\t\tthis.toggleVisibility(label, position, this.minLabelPosition, this.maxLabelPosition);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns actual length of the Axis, in pixels.\r\n\t *\r\n\t * @return {number} Length (px)\r\n\t */\r\n\tpublic get axisLength(): number {\r\n\t\tlet axis = this.axis;\r\n\t\treturn axis.measuredWidth - axis.pixelPaddingRight - axis.pixelPaddingLeft;\r\n\t}\r\n\r\n\t/**\r\n\t * Converts relative position on axis to point coordinates.\r\n\t *\r\n\t * @param  {number}  position  Position (0-1)\r\n\t * @return {IPoint}            Point\r\n\t */\r\n\tpublic positionToPoint(position: number): IPoint {\r\n\t\treturn { x: this.positionToCoordinate(position), y: 0 };\r\n\t}\r\n\r\n\t/**\r\n\t * Converts a point at specific coordinates to a relative position (0-1)\r\n\t * on the axis.\r\n\t *\r\n\t * @param  {IPoint}  point  Point\r\n\t * @return {number}         Position (0-1)\r\n\t */\r\n\tpublic pointToPosition(point: IPoint) {\r\n\t\treturn this.coordinateToPosition(point.x);\r\n\t}\r\n\r\n\t/**\r\n\t * [getPositionRangePath description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @param  {number}  startPosition  Starting position\r\n\t * @param  {number}  endPosition    End position\r\n\t * @return {string}                 SVG path\r\n\t */\r\n\tpublic getPositionRangePath(startPosition: number, endPosition: number): string {\r\n\t\tlet x1: number = $math.fitToRange(this.positionToCoordinate(startPosition), 0, this.axisLength);\r\n\t\tlet x2: number = $math.fitToRange(this.positionToCoordinate(endPosition), 0, this.axisLength);\r\n\r\n\t\tlet w: number = Math.abs(x2 - x1);\r\n\t\tlet h: number = this.getHeight();\r\n\t\tlet x: number = Math.min(x1, x2);\r\n\t\tlet y: number = 0;\r\n\r\n\t\treturn $path.rectToPath({\r\n\t\t\tx: x,\r\n\t\t\ty: y,\r\n\t\t\twidth: w,\r\n\t\t\theight: h\r\n\t\t}, true);\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Updates and positions an axis break element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {AxisBreak} axisBreak Break element\r\n\t */\r\n\tpublic updateBreakElement(axisBreak: AxisBreak): void {\r\n\t\tsuper.updateBreakElement(axisBreak);\r\n\r\n\t\tlet startLine = axisBreak.startLine;\r\n\t\tlet endLine = axisBreak.endLine;\r\n\t\tlet fillShape = axisBreak.fillShape;\r\n\r\n\t\tlet startPoint: IPoint = axisBreak.startPoint;\r\n\t\tlet endPoint: IPoint = axisBreak.endPoint;\r\n\r\n\t\tlet y1: number = axisBreak.pixelMarginLeft;\r\n\t\tlet y2: number = this.getHeight() - axisBreak.pixelMarginTop - axisBreak.pixelMarginBottom;\r\n\r\n\t\tstartPoint.x = $math.fitToRange(startPoint.x, -1, this.pixelWidth + 1);\r\n\t\tendPoint.x = $math.fitToRange(endPoint.x, -1, this.pixelWidth + 1);\r\n\r\n\t\tif (startPoint.x == endPoint.x && (startPoint.x < 0 || startPoint.x > this.pixelWidth)) {\r\n\t\t\taxisBreak.fillShape.__disabled = true;\r\n\t\t}\r\n\t\telse {\r\n\t\t\taxisBreak.fillShape.__disabled = false;\r\n\t\t}\r\n\r\n\t\tstartLine.y = y1;\r\n\t\tstartLine.width = 0;\r\n\t\tstartLine.height = y2;\r\n\r\n\t\tendLine.y = y1;\r\n\t\tendLine.width = 0;\r\n\t\tendLine.height = y2;\r\n\r\n\t\tfillShape.height = y2;\r\n\t\tfillShape.width = Math.abs(endPoint.x - startPoint.x);\r\n\t\tfillShape.y = y1;\r\n\t\tfillShape.x = startPoint.x;\r\n\t}\r\n\r\n\t/**\r\n\t * Updates and positions a grid element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {Grid}    grid         Grid element\r\n\t * @param {number}  position     Starting position\r\n\t * @param {number}  endPosition  End position\r\n\t */\r\n\tpublic updateGridElement(grid: Grid, position: number, endPosition: number): void {\r\n\t\tposition = position + (endPosition - position) * grid.location;\r\n\t\tlet point: IPoint = this.positionToPoint(position);\r\n\r\n\t\tif (grid.element) {\r\n\t\t\tgrid.element.attr({ \"d\": $path.moveTo({ x: 0, y: 0 }) + $path.lineTo({ x: 0, y: this.getHeight() }) });\r\n\t\t}\r\n\t\tthis.positionItem(grid, point);\r\n\r\n\t\tthis.toggleVisibility(grid, position, 0, 1);\r\n\t}\r\n\r\n\t/**\r\n\t * Updates and positions a tick element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {AxisTick}  tick         Tick element\r\n\t * @param {number}    position     Starting position\r\n\t * @param {number}    endPosition  End position\r\n\t */\r\n\tpublic updateTickElement(tick: AxisTick, position: number, endPosition: number): void {\r\n\t\tposition = position + (endPosition - position) * tick.location;\r\n\t\tlet point: IPoint = this.positionToPoint(position);\r\n\r\n\t\tlet tickLength = tick.length;\r\n\t\tif (this.opposite) {\r\n\t\t\tpoint.y = this.pixelHeight;\r\n\t\t\ttickLength *= (tick.inside ? 1 : -1);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttickLength *= (tick.inside ? -1 : 1);\r\n\t\t}\r\n\r\n\t\ttick.element.attr({ \"d\": $path.moveTo({ x: 0, y: 0 }) + $path.lineTo({ x: 0, y: tickLength }) });\r\n\r\n\t\tthis.positionItem(tick, point);\r\n\r\n\t\tthis.toggleVisibility(tick, position, 0, 1);\r\n\t}\r\n\r\n\t/**\r\n\t * Updates and positions the axis line element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic updateAxisLine(): void {\r\n\t\tlet element = this.line.element;\r\n\t\tif (element) {\r\n\t\t\telement.attr({ \"d\": $path.moveTo({ x: 0, y: 0 }) + $path.lineTo({ x: this.axisLength, y: 0 }) });\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Updates and positions the base grid element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic updateBaseGridElement(): void {\r\n\t\tsuper.updateBaseGridElement();\r\n\r\n\t\tlet axis: Axis = this.axis;\r\n\t\tlet h: number = this.getHeight();\r\n\t\tlet w: number = this.getWidth();\r\n\t\tlet baseGrid: Sprite = this.baseGrid;\r\n\r\n\t\tlet x: number = axis.basePoint.x;\r\n\t\tif (x < 0 || x > w) {\r\n\t\t\tbaseGrid.hide(0);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tlet y = $utils.spritePointToSprite({ x: 0, y: 0 }, this.gridContainer, baseGrid.parent).y;\r\n\t\t\tbaseGrid.element.attr({ \"d\": $path.moveTo({ x: 0, y: 0 }) + $path.lineTo({ x: 0, y: h }) });\r\n\t\t\tbaseGrid.moveTo({ x: x, y: y });\r\n\t\t\tbaseGrid.show(0);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Creates visual elements for and axis break.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {AxisBreak} axisBreak Axis break\r\n\t */\r\n\tpublic createBreakSprites(axisBreak: AxisBreak): void {\r\n\t\taxisBreak.startLine = new WavedLine();\r\n\t\taxisBreak.endLine = new WavedLine();\r\n\t\tlet wavedRectangle: WavedRectangle = new WavedRectangle();\r\n\t\twavedRectangle.setWavedSides(false, true, false, true);\r\n\t\taxisBreak.fillShape = wavedRectangle;\r\n\t}\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"AxisRendererX\"] = AxisRendererX;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/charts/axes/AxisRendererX.ts","/**\r\n * Serial chart module.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Chart, IChartProperties, IChartDataFields, IChartAdapters, IChartEvents, ChartDataItem } from \"../Chart\";\r\nimport { SpriteEventDispatcher, AMEvent } from \"../../core/Sprite\";\r\nimport { IListEvents, ListTemplate, ListDisposer } from \"../../core/utils/List\";\r\nimport { Container } from \"../../core/Container\";\r\nimport { Series } from \"../series/Series\";\r\nimport { percent } from \"../../core/utils/Percent\";\r\nimport { ColorSet } from \"../../core/utils/ColorSet\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\nimport * as $type from \"../../core/utils/Type\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines a [[DataItem]] for [[SerialChart]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nexport class SerialChartDataItem extends ChartDataItem {\r\n\r\n\t/**\r\n\t * Defines a type of [[Component]] this data item is used for.\r\n\t *\r\n\t * @type {SerialChart}\r\n\t */\r\n\tpublic _component!: SerialChart;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"SerialChartDataItem\";\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines data fields for [[SerialChart]].\r\n */\r\nexport interface ISerialChartDataFields extends IChartDataFields { }\r\n\r\n/**\r\n * Defines properties for [[SerialChart]]\r\n */\r\nexport interface ISerialChartProperties extends IChartProperties {\r\n\r\n\t/**\r\n\t * A set of colors to be used for chart elements, like Series, Slices, etc.\r\n\t *\r\n\t * @type {ColorSet}\r\n\t */\r\n\tcolors?: ColorSet;\r\n\r\n}\r\n\r\n/**\r\n * Defines events for [[SerialChart]].\r\n */\r\nexport interface ISerialChartEvents extends IChartEvents { }\r\n\r\n/**\r\n * Defines adapters for [[SerialChart]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface ISerialChartAdapters extends IChartAdapters, ISerialChartProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * A base class for all series-based charts, like XY, Pie, etc.\r\n *\r\n * Is not useful on its own.\r\n *\r\n * @see {@link ISerialChartEvents} for a list of available Events\r\n * @see {@link ISerialChartAdapters} for a list of available Adapters\r\n */\r\nexport class SerialChart extends Chart {\r\n\r\n\t/**\r\n\t * Defines data fields.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ISerialChartDataFields}\r\n\t */\r\n\tpublic _dataFields: ISerialChartDataFields;\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ISerialChartProperties}\r\n\t */\r\n\tpublic _properties!: ISerialChartProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ISerialChartAdapters}\r\n\t */\r\n\tpublic _adapter!: ISerialChartAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {ISerialChartEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: ISerialChartEvents;\r\n\r\n\t/**\r\n\t * Defines a type of series that this chart uses.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Series}\r\n\t */\r\n\tpublic _seriesType: Series;\r\n\r\n\t/**\r\n\t * Holds a list of [[Series]] displayed on the chart.\r\n\t */\r\n\tprotected _series: ListTemplate<this[\"_seriesType\"]>\r\n\r\n\t/**\r\n\t * Holds the reference to the container actual series are drawn in.\r\n\t *\r\n\t * @type {Container}\r\n\t */\r\n\tpublic readonly seriesContainer: Container;\r\n\r\n\t/**\r\n\t * Holds a reference to the container series' bullets are drawn in.\r\n\t *\r\n\t * @type {Container}\r\n\t */\r\n\tpublic readonly bulletsContainer: Container;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\r\n\t\t// Init\r\n\t\tsuper();\r\n\t\tthis.className = \"SerialChart\";\r\n\r\n\t\tthis.colors = new ColorSet();\r\n\r\n\t\t// Create a container for series\r\n\t\tlet seriesContainer: Container = this.chartContainer.createChild(Container);\r\n\t\tseriesContainer.shouldClone = false;\r\n\t\tseriesContainer.width = percent(100);\r\n\t\tseriesContainer.height = percent(100);\r\n\t\tseriesContainer.isMeasured = false;\r\n\t\tseriesContainer.layout = \"none\";\r\n\t\tthis.seriesContainer = seriesContainer;\r\n\r\n\t\t// Create a container for bullets\r\n\t\tlet bulletsContainer: Container = this.chartContainer.createChild(Container);\r\n\t\tbulletsContainer.shouldClone = false;\r\n\t\tbulletsContainer.width = percent(100);\r\n\t\tbulletsContainer.height = percent(100);\r\n\t\tbulletsContainer.isMeasured = false;\r\n\t\tbulletsContainer.layout = \"none\";\r\n\t\tthis.bulletsContainer = bulletsContainer;\r\n\r\n\t\t// Apply theme\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\tpublic dispose(): void {\r\n\t\tsuper.dispose();\r\n\r\n\t\tif (this.colors) {\r\n\t\t\tthis.colors.dispose();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Sets defaults that instantiate some objects that rely on parent, so they\r\n\t * cannot be set in constructor\r\n\t */\r\n\tprotected applyInternalDefaults(): void {\r\n\r\n\t\tsuper.applyInternalDefaults();\r\n\r\n\t\t// Add a default screen reader title for accessibility\r\n\t\t// This will be overridden in screen reader if there are any `titles` set\r\n\t\tif (!$type.hasValue(this.readerTitle)) {\r\n\t\t\tthis.readerTitle = this.language.translate(\"Serial chart\");\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * A list of chart's series.\r\n\t *\r\n\t * @return {List} Chart's series\r\n\t */\r\n\tpublic get series(): ListTemplate<this[\"_seriesType\"]> {\r\n\t\tif (!this._series) {\r\n\t\t\tthis._series = new ListTemplate<this[\"_seriesType\"]>(this.createSeries());\r\n\t\t\tthis._series.events.on(\"inserted\", this.processSeries, this);\r\n\t\t\tthis._series.events.on(\"removed\", (event) => {\r\n\t\t\t\tthis.dataUsers.removeValue(event.oldValue)\r\n\t\t\t});\r\n\t\t\tthis._disposers.push(new ListDisposer(this._series));\r\n\t\t\tthis._disposers.push(this._series.template);\r\n\t\t}\r\n\t\treturn this._series;\r\n\t}\r\n\r\n\t/**\r\n\t * Decorates a new [[Series]] object with required parameters when it is\r\n\t * added to the chart.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {IListEvents<Series>[\"inserted\"]}  event  Event\r\n\t * @todo Consider renaming to \"handle*\" as it would suit event handler better\r\n\t */\r\n\tpublic processSeries(event: IListEvents<Series>[\"inserted\"]): void {\r\n\t\tlet series: Series = event.newValue;\r\n\t\tseries.chart = this;\r\n\t\tseries.parent = this.seriesContainer;\r\n\r\n\t\tseries.bulletsContainer.parent = this.bulletsContainer;\r\n\r\n\t\tthis._dataUsers.moveValue(series);\r\n\r\n\t\tthis.feedLegend();\r\n\t}\r\n\r\n\t/**\r\n\t * Setups the legend to use the chart's data.\r\n\t */\r\n\tprotected feedLegend(): void {\r\n\t\tlet legend = this.legend;\r\n\t\tif (legend) {\r\n\t\t\tlet legendData: Array<this[\"_seriesType\"]> = [];\r\n\r\n\t\t\t$iter.each(this.series.iterator(), (series) => {\r\n\t\t\t\tlegendData.push(series);\r\n\t\t\t});\r\n\r\n\t\t\tlegend.dataFields.name = \"name\";\r\n\t\t\tlegend.itemContainers.template.propertyFields.disabled = \"hiddenInLegend\";\r\n\r\n\t\t\tlegend.data = legendData;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Creates and returns a new Series, suitable for this chart type.\r\n\t *\r\n\t * @return {this} New series\r\n\t */\r\n\tprotected createSeries(): this[\"_seriesType\"] {\r\n\t\treturn new Series();\r\n\t}\r\n\r\n\t/**\r\n\t * Chart's color list.\r\n\t *\r\n\t * This list can be used by a number of serial items, like applying a new\r\n\t * color for each Series added. Or, applying a new color for each slice\r\n\t * of a Pie chart.\r\n\t *\r\n\t * Please see [[ColorSet]] for information on how you can set up to generate\r\n\t * unique colors.\r\n\t *\r\n\t * A theme you are using may override default pre-defined colors.\r\n\t *\r\n\t * @param {ColorSet} value Color list\r\n\t */\r\n\tpublic set colors(value: ColorSet) {\r\n\t\tthis.setPropertyValue(\"colors\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {ColorSet} Color list\r\n\t */\r\n\tpublic get colors(): ColorSet {\r\n\t\treturn this.getPropertyValue(\"colors\");\r\n\t}\r\n\r\n\t/**\r\n\t * Copies all parameters from another [[SerialChart]].\r\n\t *\r\n\t * @param {SerialChart} source Source SerialChart\r\n\t */\r\n\tpublic copyFrom(source: this) {\r\n\t\tsuper.copyFrom(source);\r\n\t\tthis.series.copyFrom(source.series);\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"SerialChart\"] = SerialChart;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/charts/types/SerialChart.ts","/**\r\n * Module contains functionality related to [[Sprite]] states.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { BaseObject } from \"./Base\";\r\nimport { Adapter } from \"./utils/Adapter\";\r\nimport { ListTemplate, ListDisposer } from \"./utils/List\";\r\nimport { Filter } from \"./rendering/filters/Filter\";\r\nimport { Sprite } from \"./Sprite\";\r\n\r\nimport { toColor } from \"./utils/Color\";\r\nimport { percent } from \"./utils/Percent\";\r\nimport * as $utils from \"./utils/Utils\";\r\nimport * as $ease from \"./utils/Ease\";\r\nimport * as $object from \"./utils/Object\";\r\nimport * as $type from \"./utils/Type\";\r\n\r\n/**\r\n * Defines a state for [[Sprite]].\r\n *\r\n * A \"state\" is a special object that has all the same properties as the\r\n * [[Sprite]] of the same type, and which can be used to quickly apply a set\r\n * of property values. (set state)\r\n *\r\n * When [[Sprite]] (or any object that extends Sprite) is created it creates a\r\n * \"default\" state. You can modify the \"default\" state so that when the Sprite\r\n * returns to default state certain properties are added.\r\n *\r\n * Default state can be accessed using Sprite's `defaultState` getter.\r\n *\r\n * ```TypeScript\r\n * sprite.defaultState.properties.fillOpacity = 0.5;\r\n * ```\r\n * ```JavaScript\r\n * sprite.defaultState.properties.fillOpacity = 0.5;\r\n * ```\r\n * ```JSON\r\n * {\r\n *   // ...\r\n *   \"defaultState\": {\r\n *     \"properties\": {\r\n *       \"fillOpacity\": 0.5\r\n *     }\r\n *   }\r\n * }\r\n * ```\r\n *\r\n * If Sprite is \"hoverable\", it automatically adds a \"hover\" state, which is\r\n * applied when it has a cursor over it.\r\n *\r\n * ```TypeScript\r\n * let hoverstate = sprite.states.create(\"hover\");\r\n * hoverstate.properties.fillOpacity = 1;\r\n * ```\r\n * ```JavaScript\r\n * var hoverstate = sprite.states.create(\"hover\");\r\n * hoverstate.properties.fillOpacity = 1;\r\n * ```\r\n * ```JSON\r\n * {\r\n *   // ...\r\n *   \"states\": {\r\n *     \"hover\": {\r\n *       \"properties\": {\r\n *         \"fillOpacity\": 0.5\r\n *       }\r\n *     }\r\n *   }\r\n * }\r\n * ```\r\n *\r\n * The above will automatically apply \"hover\" state when the Sprite is hovered,\r\n * thus will set its `fillOpacity` property to 1, and will reset it to 0.5 when\r\n * it's no longer hovered.\r\n *\r\n * Every object that inherits from [[Sprite]] can and will add their own\r\n * properties to the available list.\r\n *\r\n * User can create their own states, and apply them as needed:\r\n *\r\n * ```TypeScript\r\n * let myCustomState = sprite.states.create(\"mystate\");\r\n * myCustomState.properties.fillOpacity = 0.5;\r\n * myCustomState.properties.strokeOpacity = 0.8;\r\n * sprite.setState(\"mystate\");\r\n * ```\r\n * ```JavaScript\r\n * var myCustomState = sprite.states.create(\"mystate\");\r\n * myCustomState.properties.fillOpacity = 0.5;\r\n * myCustomState.properties.strokeOpacity = 0.8;\r\n * sprite.setState(\"mystate\");\r\n * ```\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v4/concepts/states/}\r\n * @important\r\n */\r\nexport class SpriteState<P, A> extends BaseObject {\r\n\r\n\t/**\r\n\t * Defines property types.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ISpriteProperties}\r\n\t */\r\n\tpublic _properties!: P;\r\n\r\n\t/**\r\n\t * Defines adapter types.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {SpriteAdapters}\r\n\t */\r\n\tpublic _adapter!: A;\r\n\r\n\t/**\r\n\t * Title of the state, i.e. \"default\", \"hidden\", etc.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tpublic name: string;\r\n\r\n\t/**\r\n\t * Reference to [[Sprite]] element this State is for.\r\n\t *\r\n\t * @type {Optional<Sprite>}\r\n\t */\r\n\tpublic sprite: $type.Optional<Sprite>;\r\n\r\n\t/**\r\n\t * Holds Adapter.\r\n\t *\r\n\t * @type {Adapter<Sprite, SpriteAdapters>}\r\n\t */\r\n\tpublic adapter = new Adapter<this, A>(this);\r\n\r\n\t/**\r\n\t * Duration of the transition to this state. 0 means instantenous transition.\r\n\t * Any number means the [[Sprite]] will transit smoothly to this state,\r\n\t * animating all animatable properties.\r\n\t *\r\n\t * @default 0\r\n\t * @see {@link https://www.amcharts.com/docs/v4/concepts/animations/} for more info about animations\r\n\t * @type {number}\r\n\t */\r\n\tpublic transitionDuration: number = 0;\r\n\r\n\t/**\r\n\t * Easing function to use when transitioning to this state.\r\n\t *\r\n\t * @default cubicOut\r\n\t * @see {@link Ease}\r\n\t * @see {@link https://www.amcharts.com/docs/v4/concepts/animations/} for more info about animations\r\n\t * @type {(number) => number}\r\n\t */\r\n\tpublic transitionEasing: (value: number) => number = $ease.cubicOut;\r\n\r\n\t/**\r\n\t * Collection of properties and their values that should be applied to [[Sprite]]\r\n\t * when switching to this State.\r\n\t *\r\n\t * The property values set on a [[SpriteState]] will override the ones set\r\n\t * directly on a [[Sprite]].\r\n\t *\r\n\t * @type {Dictionary<string, any>}\r\n\t */\r\n\tpublic properties: P = <P>{};\r\n\r\n\t/**\r\n\t * A collection of key/value pairs that can be used to bind specific Sprite\r\n\t * properties to [[DataItem]].\r\n\t *\r\n\t * For example: `fill` property can be bound to `myCustomColor` field in\r\n\t * DataItem. The Sprite will automatically get the value for `fill` from its\r\n\t * DataItem.\r\n\t *\r\n\t * SpriteState-specific binding will override binding set directly on\r\n\t * [[Sprite]]. I.e. you can make Sprite use different fill color on hover by\r\n\t * adding a `fill` binding to a different DataItem key for Sprite's \"hover\"\r\n\t * state object.\r\n\t *\r\n\t * @see {@link Sprite}\r\n\t * @type {Object}\r\n\t */\r\n\tpublic propertyFields: { [index in keyof this[\"_properties\"]]?: string } = {};\r\n\t//public propertyFields: Dictionary<keyof this[\"_properties\"], string> = new Dictionary<keyof this[\"_properties\"], string>();;\r\n\r\n\t/**\r\n\t * A list of [[Filter]] elements to be applied to the relative [[Sprite]]\r\n\t * when switching to this State.\r\n\t *\r\n\t * @param {ListTemplate<Filter>}\r\n\t */\r\n\tpublic filters = new ListTemplate<Filter>(new Filter());\r\n\r\n\t/**\r\n\t * Identifies if this object is a \"template\" and should not be treated as\r\n\t * real object that is drawn or actually used in the chart.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tpublic isTemplate: boolean = false;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\r\n\t\t// Init\r\n\t\tsuper();\r\n\t\tthis.className = \"SpriteState\";\r\n\r\n\t\t// Make filter list disposable\r\n\t\tthis._disposers.push(new ListDisposer(this.filters));\r\n\t\tthis._disposers.push(this.filters.template);\r\n\r\n\t\t// Decorate adapter with events so that we can apply its settings whenever\r\n\t\t// it is modified\r\n\t\tthis.adapter.events.on(\"inserted\", (ev: any) => {\r\n\t\t\t(<any>this)[ev.newValue.key] = (<any>this)[ev.newValue.key];\r\n\t\t});\r\n\t\tthis.adapter.events.on(\"removed\", (ev: any) => {\r\n\t\t\t(<any>this)[ev.newValue.key] = (<any>this)[ev.newValue.key];\r\n\t\t});\r\n\r\n\t\t// Apply theme\r\n\t\tthis.applyTheme();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns [[Sprite]] element's property value.\r\n\t *\r\n\t * Will check if there are any bindings with [[DataItem]] and if there are\r\n\t * any method callbacks set up for the specific property.\r\n\t *\r\n\t * @param  {Properties}  propertyName  Property name\r\n\t * @return {any}                       Property value\r\n\t */\r\n\tpublic getPropertyValue<Key extends keyof P>(propertyName: Key): P[Key] {\r\n\t\tlet propValue: any = this.properties[propertyName];\r\n\t\tlet sprite: $type.Optional<Sprite> = this.sprite;\r\n\r\n\t\tif (sprite) {\r\n\t\t\tlet fieldName: string = this.propertyFields[propertyName];\r\n\r\n\t\t\tif ($type.hasValue(fieldName)) {\r\n\t\t\t\tif (sprite.dataItem) {\r\n\t\t\t\t\tpropValue = (<any>sprite.dataItem.dataContext)[fieldName];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Apply adapters\r\n\t\t\t// If the value itself is undefined, we're going to pass in Sprite's\r\n\t\t\t// value to adapters\r\n\t\t\t// @todo get rid of <any>\r\n\t\t\tif (!$type.hasValue(propValue)) {\r\n\t\t\t\tlet spriteValue = sprite.getPropertyValue(<any>propertyName);\r\n\t\t\t\tpropValue = this.adapter.apply(<any>propertyName, sprite.getPropertyValue(<any>propertyName));\r\n\t\t\t\tif (propValue == spriteValue) {\r\n\t\t\t\t\tpropValue = undefined;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tpropValue = this.adapter.apply(<any>propertyName, propValue)\r\n\t\t\t}\r\n\r\n\t\t\t/*let method = this.propertyMethods.getKey(propertyName);\r\n\t\t\tif (method) {\r\n\t\t\t\tpropValue = method(sprite, propertyName);\r\n\t\t\t}*/\r\n\r\n\t\t}\r\n\r\n\t\treturn propValue;\r\n\t}\r\n\r\n\t/**\r\n\t * Copies all property and style values from another [[SpriteState]] object.\r\n\t *\r\n\t * @param {SpriteState}  source  Source [[SpriteState]]\r\n\t */\r\n\tpublic copyFrom(source: this) {\r\n\t\tif (source != this) {\r\n\t\t\tthis.transitionDuration = source.transitionDuration;\r\n\t\t\tthis.transitionEasing = source.transitionEasing;\r\n\r\n\t\t\t$utils.copyProperties(source.properties, this.properties);\r\n\t\t\t$utils.copyProperties(source.propertyFields, this.propertyFields);\r\n\t\t\tthis.filters.copyFrom(source.filters);\r\n\t\t\tthis.adapter.copyFrom(source.adapter);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns all values that should be applied by the SpriteState.\r\n\t *\r\n\t * It takes adapters into account.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {ISpriteProperties} Properties\r\n\t * @todo Add adapter values\r\n\t * @todo proper type this[\"_properties\"]\r\n\t */\r\n\tpublic get allValues(): P {\r\n\r\n\t\t// Init return value\r\n\t\tlet res: P = <P>{};\r\n\r\n\t\t// Apply adapters to all values\r\n\t\t$object.each(this.properties, (prop, value) => {\r\n\t\t\tres[prop] = this.getPropertyValue(prop);\r\n\t\t});\r\n\r\n\t\t// Cycle through all adapters and add values for missing properties\r\n\t\tlet keys = this.adapter.keys();\r\n\t\tfor (let x in keys) {\r\n\t\t\tlet prop = keys[x];\r\n\t\t\tlet value = this.getPropertyValue<any>(prop);\r\n\t\t\t(<any>res)[prop] = value;\r\n\t\t}\r\n\r\n\t\t// Cycle through all property fileds and add values for missing properties\r\n\t\tlet propertyFields = this.propertyFields;\r\n\t\tfor (let prop in propertyFields) {\r\n\t\t\tlet value = this.getPropertyValue<any>(prop);\r\n\t\t\t(<any>res)[prop] = value;\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * Resets the State to initial state - no values or Filters applied.\r\n\t */\r\n\tpublic reset(): void {\r\n\t\tthis.properties = <P>{};\r\n\t\tthis.filters.clear();\r\n\t}\r\n\r\n\t/**\r\n\t * Processes JSON-based config before it is applied to the object.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {object}  config  Config\r\n\t */\r\n\tpublic processConfig(config?: { [index: string]: any }): void {\r\n\r\n\t\tif ($type.hasValue(config) && $type.hasValue(config[\"properties\"])) {\r\n\t\t\t$object.each(config[\"properties\"], (key, value) => {\r\n\t\t\t\tif ($type.isString(value)) {\r\n\t\t\t\t\tif (value.match(/^[0-9.\\-]+\\%$/)) {\r\n\t\t\t\t\t\tconfig[\"properties\"][key] = percent($type.toNumber(value));\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (value.match(/^\\#[0-9abcdef]{3,}$/i)) {\r\n\t\t\t\t\t\tconfig[\"properties\"][key] = toColor(value);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tsuper.processConfig(config);\r\n\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../src/.internal/core/SpriteState.ts","/**\n * ============================================================================\n * IMPORTS\n * ============================================================================\n * @hidden\n */\nimport { Ordering } from \"./Order\";\n\n\n/**\n * ============================================================================\n * COMPARING FUNCTIONS\n * ============================================================================\n * @hidden\n */\n\n/**\n * Comparing function used for ordering.\n *\n * @ignore Exclude from docs\n * @todo Use localeCompare\n * @param  {string}    a  Item 1\n * @param  {string}    b  Item 2\n * @return {Ordering}     Result\n */\nexport function order(a: string, b: string): Ordering {\n\tif (a === b) {\n\t\treturn 0;\n\n\t} else if (a < b) {\n\t\treturn -1;\n\n\t} else {\n\t\treturn 1;\n\t}\n}\n\n\n/**\n * ============================================================================\n * OTHER FUNCTIONS\n * ============================================================================\n * @hidden\n */\n\n/**\n * Repeats a `string` number of times as set in `amount`.\n * \n * @ignore Exclude from docs\n * @todo Make this faster\n * @param  {string}  string  Source string\n * @param  {number}  amount  Number of times to repeat string\n * @return {string}          New string\n */\nexport function repeat(string: string, amount: number): string {\n\treturn new Array(amount + 1).join(string);\n}\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/utils/String.ts","/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { EventDispatcher, AMEvent } from \"./EventDispatcher\";\r\nimport { Ordering } from \"./Order\";\r\nimport { IClone } from \"./Clone\";\r\nimport * as $array from \"./Array\";\r\nimport * as $iter from \"./Iterator\";\r\nimport * as $type from \"./Type\";\r\n\r\n/**\r\n * Defines evends for [[SortedList]].\r\n */\r\nexport interface ISortedListEvents<A> {\r\n\r\n\t/**\r\n\t * Invoked when new value is inserted into the list.\r\n\t */\r\n\tinserted: {\r\n\r\n\t\t/**\r\n\t\t * Inserted value.\r\n\t\t *\r\n\t\t * @type {A}\r\n\t\t */\r\n\t\tnewValue: A;\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when a value is removed from the list.\r\n\t */\r\n\tremoved: {\r\n\r\n\t\t/**\r\n\t\t * Removed value.\r\n\t\t *\r\n\t\t * @type {A}\r\n\t\t */\r\n\t\toldValue: A;\r\n\t};\r\n\r\n}\r\n\r\n/**\r\n * Ordered list contains values of any type in an indexed array.\r\n */\r\nexport class OrderedList<T> {\r\n\r\n\t/**\r\n\t * Holds list values.\r\n\t *\r\n\t * @type {Array<T>}\r\n\t */\r\n\tprotected _values: Array<T> = [];\r\n\r\n\t/**\r\n\t * Event dispatcher.\r\n\t *\r\n\t * @type {EventDispatcher<AMEvent<this, ISortedListEvents<T>>>}\r\n\t */\r\n\tpublic events: EventDispatcher<AMEvent<this, ISortedListEvents<T>>> = new EventDispatcher();\r\n\r\n\t/**\r\n\t * Constructor\r\n\t *\r\n\t * @param {Array<T>}  initial  Inital list of values to add to list\r\n\t */\r\n\tconstructor(initial?: Array<T>) {\r\n\t\tif (initial != null) {\r\n\t\t\tthis.setAll(initial);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * All items of the list.\r\n\t *\r\n\t * Do not modify the list directly. Rather use `insert()` and `remove()`\r\n\t * methods.\r\n\t *\r\n\t * @return {Array<T>} List values\r\n\t */\r\n\tpublic get values(): Array<T> {\r\n\t\treturn this._values;\r\n\t}\r\n\r\n\t/**\r\n\t * Inserts a value into list item array.\r\n\t *\r\n\t * @param {T}  value  Value\r\n\t */\r\n\tprotected _insert(value: T): void {\r\n\t\tthis._values.push(value);\r\n\t}\r\n\r\n\t/**\r\n\t * Number of items in the list.\r\n\t *\r\n\t * @readonly\r\n\t * @return {number} Length\r\n\t */\r\n\tpublic get length(): number {\r\n\t\treturn this._values.length;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the index of the specific `value`.\r\n\t *\r\n\t * -1 if not found.\r\n\t *\r\n\t * @param  {T}       value  Value\r\n\t * @return {number}        Index\r\n\t */\r\n\tpublic indexOf(value: T): number {\r\n\t\treturn $array.indexOf(this._values, value);\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if list contains the `value`.\r\n\t *\r\n\t * @param  {T}        value  Value\r\n\t * @return {boolean}         In the list?\r\n\t */\r\n\tpublic contains(value: T): boolean {\r\n\t\treturn this.indexOf(value) !== -1;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns an item at specific `index`.\r\n\t *\r\n\t * @param  {number}  index  Index\r\n\t * @return {T}              Item\r\n\t */\r\n\tpublic getIndex(index: number): T | undefined {\r\n\t\treturn this._values[index];\r\n\t}\r\n\r\n\t/**\r\n\t * First item in the list.\r\n\t *\r\n\t * @return {T} Item\r\n\t */\r\n\tpublic get first(): T | undefined {\r\n\t\treturn this._values[0];\r\n\t}\r\n\r\n\t/**\r\n\t * Last item in the list.\r\n\t *\r\n\t * @return {T} Item\r\n\t */\r\n\tpublic get last(): T | undefined {\r\n\t\treturn this._values[this._values.length - 1];\r\n\t}\r\n\r\n\t/**\r\n\t * Inserts a value into list.\r\n\t *\r\n\t * @param {T}  value  Value\r\n\t */\r\n\tpublic insert(value: T): void {\r\n\t\tthis._insert(value);\r\n\r\n\t\tif (this.events.isEnabled(\"inserted\")) {\r\n\t\t\tthis.events.dispatchImmediately(\"inserted\", {\r\n\t\t\t\ttype: \"inserted\",\r\n\t\t\t\ttarget: this,\r\n\t\t\t\tnewValue: value\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Removes an item with the `value` from the list.\r\n\t *\r\n\t * @param {T}  value  Value\r\n\t */\r\n\tpublic remove(value: T): void {\r\n\t\tconst index = this.indexOf(value);\r\n\r\n\t\tif (index !== -1) {\r\n\t\t\tconst oldValue = this._values[index];\r\n\r\n\t\t\t$array.removeIndex(this._values, index);\r\n\r\n\t\t\tif (this.events.isEnabled(\"removed\")) {\r\n\t\t\t\tthis.events.dispatchImmediately(\"removed\", {\r\n\t\t\t\t\ttype: \"removed\",\r\n\t\t\t\t\ttarget: this,\r\n\t\t\t\t\toldValue: oldValue\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Sets multiple items to the list.\r\n\t *\r\n\t * All current items are removed.\r\n\t *\r\n\t * @param {Array<T>}  newArray  New items\r\n\t */\r\n\tpublic setAll(newArray: Array<T>): void {\r\n\t\tconst oldArray = $array.copy(this._values);\r\n\r\n\t\tthis._values.length = 0;\r\n\r\n\t\t$array.each(newArray, (value) => {\r\n\t\t\tthis._insert(value);\r\n\t\t});\r\n\r\n\t\tif (this.events.isEnabled(\"removed\")) {\r\n\t\t\t$array.each(oldArray, (x) => {\r\n\t\t\t\tthis.events.dispatchImmediately(\"removed\", {\r\n\t\t\t\t\ttype: \"removed\",\r\n\t\t\t\t\ttarget: this,\r\n\t\t\t\t\toldValue: x\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (this.events.isEnabled(\"inserted\")) {\r\n\t\t\t$array.each(this._values, (x) => {\r\n\t\t\t\tthis.events.dispatchImmediately(\"inserted\", {\r\n\t\t\t\t\ttype: \"inserted\",\r\n\t\t\t\t\ttarget: this,\r\n\t\t\t\t\tnewValue: x\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Removes all items from the list.\r\n\t */\r\n\tpublic clear(): void {\r\n\t\tthis.setAll([]);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns part of the list between `start` and `end` indexes, as a new\r\n\t * [[OrderedList]].\r\n\t *\r\n\t * @param  {number}          start  Start index\r\n\t * @param  {number}          end    End index\r\n\t * @return {OrderedList<T>}         Items in range\r\n\t */\r\n\tpublic slice(start: number, end: number): OrderedList<T> {\r\n\t\tconst out = new OrderedList<T>();\r\n\r\n\t\tout._values = this._values.slice(start, end);\r\n\r\n\t\treturn out;\r\n\t}\r\n\r\n\t/**\r\n\t * Finds a closest available index to the `value` in specified direction.\r\n\t *\r\n\t * @ignore exclude from docs\r\n\t * @param  {number}                      value      value to search for\r\n\t * @param  {function}                    fn         A callback function that returns value of the item\r\n\t * @param  {\"left\" | \"right\" |  \"any\" }  direction  Direciton\r\n\t * @return {number}                                 Index\r\n\t */\r\n\tpublic findClosestIndex(value: number, fn: (value: T) => number, direction: \"left\" | \"right\" | \"any\" = \"any\"): number {\r\n\t\t// Init temporary values\r\n\t\tlet closestIndex: number = -1;\r\n\t\tlet closestValue: number;\r\n\t\tlet closestDifference: number;\r\n\r\n\t\tlet i = 0;\r\n\r\n\t\t$iter.eachContinue(this.iterator(), (element) => {\r\n\t\t\tconst item: number = fn(element);\r\n\r\n\t\t\t// Exact match?\r\n\t\t\tif (item === value) {\r\n\t\t\t\t// Found exact value - don't bother searching further\r\n\t\t\t\tclosestIndex = i;\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\t// Calc difference\r\n\t\t\tif (direction === \"any\") {\r\n\t\t\t\tlet difference = Math.abs(value - item);\r\n\t\t\t\tif (!$type.hasValue(closestDifference) || (closestDifference > difference)) {\r\n\t\t\t\t\tclosestIndex = i;\r\n\t\t\t\t\tclosestValue = item;\r\n\t\t\t\t\tclosestDifference = difference;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (direction === \"left\" && (item < value)) {\r\n\t\t\t\tif (!$type.hasValue(closestValue) || (closestValue < item)) {\r\n\t\t\t\t\tclosestIndex = i;\r\n\t\t\t\t\tclosestValue = item;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (direction === \"right\" && (item > value)) {\r\n\t\t\t\tif (!$type.hasValue(closestValue) || (closestValue > item)) {\r\n\t\t\t\t\tclosestIndex = i;\r\n\t\t\t\t\tclosestValue = item;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t++i;\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\t// Found nothing?\r\n\t\tif (closestIndex === -1) {\r\n\t\t\tif (direction === \"left\") {\r\n\t\t\t\t// Use First one\r\n\t\t\t\tclosestIndex = 0;\r\n\t\t\t}\r\n\t\t\telse if (direction === \"right\") {\r\n\t\t\t\t// Use last item\r\n\t\t\t\tclosestIndex = this.length - 1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn closestIndex;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a list iterator.\r\n\t *\r\n\t * @return {Iterator} Iterator\r\n\t */\r\n\tpublic iterator(): $iter.Iterator<T> {\r\n\t\treturn $iter.fromArray(this._values);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns an ES6 iterator for the list.\r\n\t */\r\n\tpublic *[Symbol.iterator](): Iterator<T> {\r\n\t\tconst length = this._values.length;\r\n\r\n\t\tfor (let i = 0; i < length; ++i) {\r\n\t\t\tyield this._values[i];\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Calls `f` for each element in the list.\r\n\t */\r\n\tpublic each(f: (value: T) => void): void {\r\n\t\t$array.each(this._values, f);\r\n\t}\r\n}\r\n\r\n/**\r\n * A list where all items are ordered according to specific ordering function,\r\n * which is passed in via constructor parameter, when creating an instance of\r\n * [[SortedList]].\r\n */\r\nexport class SortedList<T> extends OrderedList<T> {\r\n\r\n\t/**\r\n\t * A reference to the ordering function.\r\n\t *\r\n\t * @type {T}\r\n\t */\r\n\tprivate _ordering: (left: T, right: T) => Ordering;\r\n\r\n\t/**\r\n\t * Constructor.\r\n\t *\r\n\t * @param {T) => Ordering}  sort  Ordering function\r\n\t */\r\n\tconstructor(sort: (left: T, right: T) => Ordering) {\r\n\t\tsuper();\r\n\t\tthis._ordering = sort;\r\n\t}\r\n\r\n\t/**\r\n\t * Inserts item into the list.\r\n\t *\r\n\t * @param {T}  value  Item\r\n\t */\r\n\tprotected _insert(value: T): void {\r\n\t\tconst { index } = $array.getSortedIndex(this._values, this._ordering, value);\r\n\r\n\t\t$array.insertIndex(this._values, index, value);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns index of the item in list if found.\r\n\t *\r\n\t * -1 if item is not in the list.\r\n\t *\r\n\t * @param  {T}       value  Item to search for\r\n\t * @return {number}         Index\r\n\t */\r\n\tpublic indexOf(value: T): number {\r\n\t\tconst { found, index } = $array.getSortedIndex(this._values, this._ordering, value);\r\n\r\n\t\tif (found) {\r\n\t\t\treturn index;\r\n\r\n\t\t} else {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * [udpate description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @param {T} value [description]\r\n\t */\r\n\tpublic update(value: T): void {\r\n\t\t// @todo test this\r\n\t\tconst index = $array.indexOf(this._values, value);\r\n\r\n\t\t// @todo throw an error if it doesn't exist ?\r\n\t\tif (index !== -1) {\r\n\t\t\tconst last = this._values.length - 1;\r\n\r\n\t\t\t// Check if the current ordering is correct\r\n\t\t\tif (!((index === 0 || this._ordering(this._values[index - 1], value) < 0) &&\r\n\t\t\t\t(index === last || this._ordering(value, this._values[index + 1]) < 0))) {\r\n\t\t\t\t$array.removeIndex(this._values, index);\r\n\t\t\t\tthis._insert(value);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\n\r\n/**\r\n * A version of a [[OrderedList]] that has a \"template\".\r\n *\r\n * A template is an instance of an object, that can be used to create new\r\n * elements in the list without actually needing to create instances for those.\r\n *\r\n * When new element is created in the list, e.g. by calling its `create()`\r\n * method, an exact copy of the element is created (including properties and\r\n * other attributes), inserted into the list and returned.\r\n */\r\nexport class OrderedListTemplate<T extends IClone<T> & { isTemplate: boolean }> extends OrderedList<T> {\r\n\r\n\t/**\r\n\t * A template object.\r\n\t *\r\n\t * @todo Make this private\r\n\t * @type {T}\r\n\t */\r\n\tpublic _template!: T;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t *\r\n\t * @param {T} t Template object\r\n\t */\r\n\tpublic constructor(t: T) {\r\n\t\tsuper();\r\n\t\tthis.template = t;\r\n\t}\r\n\r\n\t/**\r\n\t * A \"template\" object to copy all properties from when creating new list\r\n\t * items.\r\n\t *\r\n\t * @param {T}  v  Template object\r\n\t */\r\n\tpublic set template(v: T) {\r\n\t\tv.isTemplate = true;\r\n\t\tthis._template = v;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {T} Template object\r\n\t */\r\n\tpublic get template(): T {\r\n\t\treturn this._template;\r\n\t}\r\n\r\n\t/**\r\n\t * Copies all elements from other list.\r\n\t *\r\n\t * @param {OrderedListTemplate}  source  Source list\r\n\t */\r\n\tpublic copyFrom(source: this): void {\r\n\t\t$iter.each(source.iterator(), (value) => {\r\n\t\t\tthis.insert(value.clone());\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Returns part of the list, starting at `start` and ending at `end` indexes,\r\n\t * as a new [[OrderedListTemplate]].\r\n\t *\r\n\t * @param  {number}                  start  Start index\r\n\t * @param  {number}                  end    End index\r\n\t * @return {OrderedListTemplate<T>}         New list\r\n\t */\r\n\tpublic slice(start: number, end: number): OrderedListTemplate<T> {\r\n\t\tconst out = new OrderedListTemplate<T>(this.template);\r\n\r\n\t\tout._values = this._values.slice(start, end);\r\n\r\n\t\treturn out;\r\n\t}\r\n\r\n\t/**\r\n\t * Instantiates a new object of the specified type, adds it to the end of\r\n\t * the list, and returns it.\r\n\t *\r\n\t * @param make  Item type to use. Will use the default type for the list if not specified.\r\n\t * @return      Newly created item\r\n\t */\r\n\tpublic create<T>(make: { new(): T; }): T;\r\n\tpublic create(): T;\r\n\tpublic create(make?: { new(): T; }): T {\r\n\t\tconst clone =\r\n\t\t\t(make != null\r\n\t\t\t\t? new make()\r\n\t\t\t\t: this.template.clone());\r\n\r\n\t\tthis.insert(clone);\r\n\r\n\t\treturn clone;\r\n\t}\r\n}\r\n\r\n/**\r\n * A version of a [[SortedList]] that has a \"template\".\r\n *\r\n * A template is an instance of an object, that can be used to create new\r\n * elements in the list without actually needing to create instances for those.\r\n *\r\n * When new element is created in the list, e.g. by calling its `create()`\r\n * method, an exact copy of the element is created (including properties and\r\n * other attributes), inserted into the list and returned.\r\n */\r\nexport class SortedListTemplate<T extends IClone<T> & { isTemplate: boolean }> extends SortedList<T> {\r\n\r\n\t// @todo code duplication\r\n\r\n\t/**\r\n\t * A template object.\r\n\t *\r\n\t * @todo Make this private\r\n\t * @type {T}\r\n\t */\r\n\tpublic _template!: T;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t *\r\n\t * @param {T}         t     Template object\r\n\t * @param {function}  sort  Ordering function\r\n\t */\r\n\tpublic constructor(t: T, sort: (left: T, right: T) => Ordering) {\r\n\t\tsuper(sort);\r\n\t\tthis.template = t;\r\n\t}\r\n\r\n\t/**\r\n\t * A \"template\" object to copy all properties from when creating new list\r\n\t * items.\r\n\t *\r\n\t * @param {T}  v  Template object\r\n\t */\r\n\tpublic set template(v: T) {\r\n\t\tv.isTemplate = true;\r\n\t\tthis._template = v;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {T} Template object\r\n\t */\r\n\tpublic get template(): T {\r\n\t\treturn this._template;\r\n\t}\r\n\r\n\t/**\r\n\t * Copies all elements from other list.\r\n\t *\r\n\t * @param {SortedListTemplate}  source  Source list\r\n\t */\r\n\tpublic copyFrom(source: this): void {\r\n\t\t$iter.each(source.iterator(), (value) => {\r\n\t\t\tthis.insert(value.clone());\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Instantiates a new object of the specified type, adds it to the end of\r\n\t * the list, and returns it.\r\n\t *\r\n\t * @param make  Item type to use. Will use the default type for the list if not specified.\r\n\t * @return      Newly created item\r\n\t */\r\n\tpublic create<T>(make: { new(): T; }): T;\r\n\tpublic create(): T;\r\n\tpublic create(make?: { new(): T; }): T {\r\n\t\tconst clone =\r\n\t\t\t(make != null\r\n\t\t\t\t? new make()\r\n\t\t\t\t: this.template.clone());\r\n\r\n\t\tthis.insert(clone);\r\n\r\n\t\treturn clone;\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/utils/SortedList.ts","/**\n * A collection of functions for ordering.\n */\n\n/**\n * ============================================================================\n * UTILITY FUNCTIONS\n * ============================================================================\n * @hidden\n */\n\n/**\n * Defines values that ordering functions can return.\n * \n * @type {number}\n */\nexport type Ordering = -1 | 0 | 1;\n\n/**\n * [reverse description]\n *\n * @ignore Exclude from docs\n * @todo Description\n * @param  {Ordering}  a  [description]\n * @return {Ordering}     [description]\n */\nexport function reverse(a: Ordering): Ordering {\n\tswitch (a) {\n\t\tcase 0:\n\t\t\treturn 0;\n\t\tcase -1:\n\t\t\treturn 1;\n\t\tcase 1:\n\t\t\treturn -1;\n\t}\n}\n\n/**\n * [or description]\n *\n * @ignore Exclude from docs\n * @todo Description\n * @param  {Ordering}  a  Item 1\n * @param  {Ordering}  b  Item 2\n * @return {Ordering}     [description]\n */\nexport function or(a: Ordering, b: Ordering): Ordering {\n\tif (a === 0) {\n\t\treturn b;\n\n\t} else {\n\t\treturn a;\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/utils/Order.ts","/**\r\n * [[AMElement]] represents any SVG element and related functionality.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { IRectangle } from \"../defs/IRectangle\";\r\nimport { IDisposer } from \"../utils/Disposer\";\r\nimport { IPoint } from \"../defs/IPoint\";\r\nimport * as $dom from \"../utils/DOM\";\r\nimport * as $type from \"../utils/Type\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines available SVG attributes.\r\n */\r\nexport type SVGAttribute =\r\n\t\"accent-height\" | \"accumulate\" | \"additive\" | \"alignment-baseline\" | \"allowReorder\" | \"alphabetic\" | \"amplitude\" | \"arabic-form\" | \"aria-checked\" | \"aria-controls\" | \"aria-describedby\" | \"aria-hidden\" | \"aria-label\" | \"aria-labelledby\" | \"aria-live\" | \"ascent\" | \"attributeName\" | \"attributeType\" | \"autoReverse\" | \"azimuth\" | \"baseFrequency\" | \"baseline-shift\" | \"baseProfile\" | \"bbox\" | \"begin\" | \"bias\" | \"by\" | \"calcMode\" | \"cap-height\" | \"class\" | \"clip\" | \"clipPathUnits\" | \"clip-path\" | \"clip-rule\" | \"color\" | \"color-interpolation\" | \"color-interpolation-filters\" | \"color-profile\" | \"color-rendering\" | \"contentScriptType\" | \"contentStyleType\" | \"cursor\" | \"cx\" | \"cy\" | \"d\" | \"decelerate\" | \"descent\" | \"diffuseConstant\" | \"direction\" | \"display\" | \"divisor\" | \"dominant-baseline\" | \"dur\" | \"dx\" | \"dy\" | \"edgeMode\" | \"elevation\" | \"enable-background\" | \"end\" | \"exponent\" | \"externalResourcesRequired\" | \"fill\" | \"fill-opacity\" | \"fill-rule\" | \"filter\" | \"filterRes\" | \"filterUnits\" | \"flood-color\" | \"flood-opacity\" | \"focusable\" | \"font-family\" | \"font-size\" | \"font-size-adjust\" | \"font-stretch\" | \"font-style\" | \"font-variant\" | \"font-weight\" | \"format\" | \"from\" | \"fx\" | \"fy\" | \"g1\" | \"g2\" | \"glyph-name\" | \"glyph-orientation-horizontal\" | \"glyph-orientation-vertical\" | \"glyphRef\" | \"gradientTransform\" | \"gradientUnits\" | \"hanging\" | \"height\" | \"href\" | \"horiz-adv-x\" | \"horiz-origin-x\" | \"id\" | \"ideographic\" | \"image-rendering\" | \"in\" | \"in2\" | \"intercept\" | \"k\" | \"k1\" | \"k2\" | \"k3\" | \"k4\" | \"kernelMatrix\" | \"kernelUnitLength\" | \"kerning\" | \"keyPoints\" | \"keySplines\" | \"keyTimes\" | \"lang\" | \"lengthAdjust\" | \"letter-spacing\" | \"lighting-color\" | \"limitingConeAngle\" | \"local\" | \"marker-end\" | \"marker-mid\" | \"marker-start\" | \"markerHeight\" | \"markerUnits\" | \"markerWidth\" | \"mask\" | \"maskContentUnits\" | \"maskUnits\" | \"mathematical\" | \"max\" | \"media\" | \"method\" | \"min\" | \"mode\" | \"name\" | \"numOctaves\" | \"offset\" | \"onabort\" | \"onactivate\" | \"onbegin\" | \"onclick\" | \"onend\" | \"onerror\" | \"onfocusin\" | \"onfocusout\" | \"onload\" | \"onmousedown\" | \"onmousemove\" | \"onmouseout\" | \"onmouseover\" | \"onmouseup\" | \"onrepeat\" | \"onresize\" | \"onscroll\" | \"onunload\" | \"onzoom\" | \"opacity\" | \"operator\" | \"order\" | \"orient\" | \"orientation\" | \"origin\" | \"overflow\" | \"overline-position\" | \"overline-thickness\" | \"panose-1\" | \"paint-order\" | \"pathLength\" | \"patternContentUnits\" | \"patternTransform\" | \"patternUnits\" | \"pointer-events\" | \"points\" | \"pointsAtX\" | \"pointsAtY\" | \"pointsAtZ\" | \"preserveAlpha\" | \"preserveAspectRatio\" | \"primitiveUnits\" | \"r\" | \"radius\" | \"refX\" | \"refY\" | \"rendering-intent\" | \"repeatCount\" | \"repeatDur\" | \"requiredExtensions\" | \"requiredFeatures\" | \"restart\" | \"result\" | \"role\" | \"rotate\" | \"rx\" | \"ry\" | \"scale\" | \"seed\" | \"shape-rendering\" | \"slope\" | \"spacing\" | \"specularConstant\" | \"specularExponent\" | \"speed\" | \"spreadMethod\" | \"startOffset\" | \"stdDeviation\" | \"stemh\" | \"stemv\" | \"stitchTiles\" | \"stop-color\" | \"stop-opacity\" | \"strikethrough-position\" | \"strikethrough-thickness\" | \"string\" | \"stroke\" | \"stroke-dasharray\" | \"stroke-dashoffset\" | \"stroke-linecap\" | \"stroke-linejoin\" | \"stroke-miterlimit\" | \"stroke-opacity\" | \"stroke-width\" | \"style\" | \"surfaceScale\" | \"systemLanguage\" | \"tabindex\" | \"tableValues\" | \"target\" | \"targetX\" | \"targetY\" | \"text-anchor\" | \"text-decoration\" | \"text-rendering\" | \"textLength\" | \"to\" | \"transform\" | \"type\" | \"u1\" | \"u2\" | \"underline-position\" | \"underline-thickness\" | \"unicode\" | \"unicode-bidi\" | \"unicode-range\" | \"units-per-em\" | \"v-alphabetic\" | \"v-hanging\" | \"v-ideographic\" | \"v-mathematical\" | \"values\" | \"version\" | \"vert-adv-y\" | \"vert-origin-x\" | \"vert-origin-y\" | \"viewBox\" | \"viewTarget\" | \"visibility\" | \"width\" | \"widths\" | \"word-spacing\" | \"writing-mode\" | \"x\" | \"x-height\" | \"x1\" | \"x2\" | \"xChannelSelector\" | \"xlink:actuate\" | \"xlink:arcrole\" | \"xlink:href\" | \"xlink:role\" | \"xlink:show\" | \"xlink:title\" | \"xlink:type\" | \"xml:base\" | \"xml:lang\" | \"xml:space\" | \"y\" | \"y1\" | \"y2\" | \"yChannelSelector\" | \"z\" | \"zoomAndPan\";\r\n\r\n/**\r\n * Represents an interface for SVG attributes.\r\n *\r\n * This is a collection of all properties that an SVG element can have.\r\n */\r\nexport interface ISVGAttribute {\r\n\t\"accent-height\"?: any;\r\n\t\"accumulate\"?: any;\r\n\t\"additive\"?: any;\r\n\t\"alignment-baseline\"?: any;\r\n\t\"allowReorder\"?: any;\r\n\t\"alphabetic\"?: any;\r\n\t\"amplitude\"?: any;\r\n\t\"arabic-form\"?: any;\r\n\t\"aria-checked\"?: any;\r\n\t\"aria-controls\"?: any;\r\n\t\"aria-describedby\"?: any;\r\n\t\"aria-hidden\"?: any;\r\n\t\"aria-label\"?: any;\r\n\t\"aria-labelledby\"?: any;\r\n\t\"aria-live\"?: any;\r\n\t\"ascent\"?: any;\r\n\t\"attributeName\"?: any;\r\n\t\"attributeType\"?: any;\r\n\t\"autoReverse\"?: any;\r\n\t\"azimuth\"?: any;\r\n\t\"baseFrequency\"?: any;\r\n\t\"baseline-shift\"?: any;\r\n\t\"baseProfile\"?: any;\r\n\t\"bbox\"?: any;\r\n\t\"begin\"?: any;\r\n\t\"bias\"?: any;\r\n\t\"by\"?: any;\r\n\t\"calcMode\"?: any;\r\n\t\"cap-height\"?: any;\r\n\t\"class\"?: any;\r\n\t\"clip\"?: any;\r\n\t\"clipPathUnits\"?: any;\r\n\t\"clip-path\"?: any;\r\n\t\"clip-rule\"?: any;\r\n\t\"color\"?: any;\r\n\t\"color-interpolation\"?: any;\r\n\t\"color-interpolation-filters\"?: any;\r\n\t\"color-profile\"?: any;\r\n\t\"color-rendering\"?: any;\r\n\t\"contentScriptType\"?: any;\r\n\t\"contentStyleType\"?: any;\r\n\t\"cursor\"?: any;\r\n\t\"cx\"?: any;\r\n\t\"cy\"?: any;\r\n\t\"d\"?: any;\r\n\t\"decelerate\"?: any;\r\n\t\"descent\"?: any;\r\n\t\"diffuseConstant\"?: any;\r\n\t\"direction\"?: any;\r\n\t\"display\"?: any;\r\n\t\"divisor\"?: any;\r\n\t\"dominant-baseline\"?: any;\r\n\t\"dur\"?: any;\r\n\t\"dx\"?: any;\r\n\t\"dy\"?: any;\r\n\t\"edgeMode\"?: any;\r\n\t\"elevation\"?: any;\r\n\t\"enable-background\"?: any;\r\n\t\"end\"?: any;\r\n\t\"exponent\"?: any;\r\n\t\"externalResourcesRequired\"?: any;\r\n\t\"fill\"?: any;\r\n\t\"fill-opacity\"?: any;\r\n\t\"fill-rule\"?: any;\r\n\t\"filter\"?: any;\r\n\t\"filterRes\"?: any;\r\n\t\"filterUnits\"?: any;\r\n\t\"flood-color\"?: any;\r\n\t\"flood-opacity\"?: any;\r\n\t\"focusable\"?: any;\r\n\t\"font-family\"?: any;\r\n\t\"font-size\"?: any;\r\n\t\"font-size-adjust\"?: any;\r\n\t\"font-stretch\"?: any;\r\n\t\"font-style\"?: any;\r\n\t\"font-variant\"?: any;\r\n\t\"font-weight\"?: any;\r\n\t\"format\"?: any;\r\n\t\"from\"?: any;\r\n\t\"fx\"?: any;\r\n\t\"fy\"?: any;\r\n\t\"g1\"?: any;\r\n\t\"g2\"?: any;\r\n\t\"glyph-name\"?: any;\r\n\t\"glyph-orientation-horizontal\"?: any;\r\n\t\"glyph-orientation-vertical\"?: any;\r\n\t\"glyphRef\"?: any;\r\n\t\"gradientTransform\"?: any;\r\n\t\"gradientUnits\"?: any;\r\n\t\"hanging\"?: any;\r\n\t\"height\"?: any;\r\n\t\"href\"?: any;\r\n\t\"horiz-adv-x\"?: any;\r\n\t\"horiz-origin-x\"?: any;\r\n\t\"id\"?: any;\r\n\t\"ideographic\"?: any;\r\n\t\"image-rendering\"?: any;\r\n\t\"in\"?: any;\r\n\t\"in2\"?: any;\r\n\t\"intercept\"?: any;\r\n\t\"k\"?: any;\r\n\t\"k1\"?: any;\r\n\t\"k2\"?: any;\r\n\t\"k3\"?: any;\r\n\t\"k4\"?: any;\r\n\t\"kernelMatrix\"?: any;\r\n\t\"kernelUnitLength\"?: any;\r\n\t\"kerning\"?: any;\r\n\t\"keyPoints\"?: any;\r\n\t\"keySplines\"?: any;\r\n\t\"keyTimes\"?: any;\r\n\t\"lang\"?: any;\r\n\t\"lengthAdjust\"?: any;\r\n\t\"letter-spacing\"?: any;\r\n\t\"lighting-color\"?: any;\r\n\t\"limitingConeAngle\"?: any;\r\n\t\"local\"?: any;\r\n\t\"marker-end\"?: any;\r\n\t\"marker-mid\"?: any;\r\n\t\"marker-start\"?: any;\r\n\t\"markerHeight\"?: any;\r\n\t\"markerUnits\"?: any;\r\n\t\"markerWidth\"?: any;\r\n\t\"mask\"?: any;\r\n\t\"maskContentUnits\"?: any;\r\n\t\"maskUnits\"?: any;\r\n\t\"mathematical\"?: any;\r\n\t\"max\"?: any;\r\n\t\"media\"?: any;\r\n\t\"method\"?: any;\r\n\t\"min\"?: any;\r\n\t\"mode\"?: any;\r\n\t\"name\"?: any;\r\n\t\"numOctaves\"?: any;\r\n\t\"offset\"?: any;\r\n\t\"onabort\"?: any;\r\n\t\"onactivate\"?: any;\r\n\t\"onbegin\"?: any;\r\n\t\"onclick\"?: any;\r\n\t\"onend\"?: any;\r\n\t\"onerror\"?: any;\r\n\t\"onfocusin\"?: any;\r\n\t\"onfocusout\"?: any;\r\n\t\"onload\"?: any;\r\n\t\"onmousedown\"?: any;\r\n\t\"onmousemove\"?: any;\r\n\t\"onmouseout\"?: any;\r\n\t\"onmouseover\"?: any;\r\n\t\"onmouseup\"?: any;\r\n\t\"onrepeat\"?: any;\r\n\t\"onresize\"?: any;\r\n\t\"onscroll\"?: any;\r\n\t\"onunload\"?: any;\r\n\t\"onzoom\"?: any;\r\n\t\"opacity\"?: any;\r\n\t\"operator\"?: any;\r\n\t\"order\"?: any;\r\n\t\"orient\"?: any;\r\n\t\"orientation\"?: any;\r\n\t\"origin\"?: any;\r\n\t\"overflow\"?: any;\r\n\t\"overline-position\"?: any;\r\n\t\"overline-thickness\"?: any;\r\n\t\"panose-1\"?: any;\r\n\t\"paint-order\"?: any;\r\n\t\"pathLength\"?: any;\r\n\t\"patternContentUnits\"?: any;\r\n\t\"patternTransform\"?: any;\r\n\t\"patternUnits\"?: any;\r\n\t\"pointer-events\"?: any;\r\n\t\"points\"?: any;\r\n\t\"pointsAtX\"?: any;\r\n\t\"pointsAtY\"?: any;\r\n\t\"pointsAtZ\"?: any;\r\n\t\"preserveAlpha\"?: any;\r\n\t\"preserveAspectRatio\"?: any;\r\n\t\"primitiveUnits\"?: any;\r\n\t\"r\"?: any;\r\n\t\"radius\"?: any;\r\n\t\"refX\"?: any;\r\n\t\"refY\"?: any;\r\n\t\"rendering-intent\"?: any;\r\n\t\"repeatCount\"?: any;\r\n\t\"repeatDur\"?: any;\r\n\t\"requiredExtensions\"?: any;\r\n\t\"requiredFeatures\"?: any;\r\n\t\"restart\"?: any;\r\n\t\"result\"?: any;\r\n\t\"role\"?: any;\r\n\t\"rotate\"?: any;\r\n\t\"rx\"?: any;\r\n\t\"ry\"?: any;\r\n\t\"scale\"?: any;\r\n\t\"seed\"?: any;\r\n\t\"shape-rendering\"?: any;\r\n\t\"slope\"?: any;\r\n\t\"spacing\"?: any;\r\n\t\"specularConstant\"?: any;\r\n\t\"specularExponent\"?: any;\r\n\t\"speed\"?: any;\r\n\t\"spreadMethod\"?: any;\r\n\t\"startOffset\"?: any;\r\n\t\"stdDeviation\"?: any;\r\n\t\"stemh\"?: any;\r\n\t\"stemv\"?: any;\r\n\t\"stitchTiles\"?: any;\r\n\t\"stop-color\"?: any;\r\n\t\"stop-opacity\"?: any;\r\n\t\"strikethrough-position\"?: any;\r\n\t\"strikethrough-thickness\"?: any;\r\n\t\"string\"?: any;\r\n\t\"stroke\"?: any;\r\n\t\"stroke-dasharray\"?: any;\r\n\t\"stroke-dashoffset\"?: any;\r\n\t\"stroke-linecap\"?: any;\r\n\t\"stroke-linejoin\"?: any;\r\n\t\"stroke-miterlimit\"?: any;\r\n\t\"stroke-opacity\"?: any;\r\n\t\"stroke-width\"?: any;\r\n\t\"style\"?: any;\r\n\t\"surfaceScale\"?: any;\r\n\t\"systemLanguage\"?: any;\r\n\t\"tabindex\"?: any;\r\n\t\"tableValues\"?: any;\r\n\t\"target\"?: any;\r\n\t\"targetX\"?: any;\r\n\t\"targetY\"?: any;\r\n\t\"text-anchor\"?: any;\r\n\t\"text-decoration\"?: any;\r\n\t\"text-rendering\"?: any;\r\n\t\"textLength\"?: any;\r\n\t\"to\"?: any;\r\n\t\"transform\"?: any;\r\n\t\"type\"?: any;\r\n\t\"u1\"?: any;\r\n\t\"u2\"?: any;\r\n\t\"underline-position\"?: any;\r\n\t\"underline-thickness\"?: any;\r\n\t\"unicode\"?: any;\r\n\t\"unicode-bidi\"?: any;\r\n\t\"unicode-range\"?: any;\r\n\t\"units-per-em\"?: any;\r\n\t\"v-alphabetic\"?: any;\r\n\t\"v-hanging\"?: any;\r\n\t\"v-ideographic\"?: any;\r\n\t\"v-mathematical\"?: any;\r\n\t\"values\"?: any;\r\n\t\"version\"?: any;\r\n\t\"vert-adv-y\"?: any;\r\n\t\"vert-origin-x\"?: any;\r\n\t\"vert-origin-y\"?: any;\r\n\t\"viewBox\"?: any;\r\n\t\"viewTarget\"?: any;\r\n\t\"visibility\"?: any;\r\n\t\"width\"?: any;\r\n\t\"widths\"?: any;\r\n\t\"word-spacing\"?: any;\r\n\t\"writing-mode\"?: any;\r\n\t\"x\"?: any;\r\n\t\"x-height\"?: any;\r\n\t\"x1\"?: any;\r\n\t\"x2\"?: any;\r\n\t\"xChannelSelector\"?: any;\r\n\t\"xlink:actuate\"?: any;\r\n\t\"xlink:arcrole\"?: any;\r\n\t\"xlink:href\"?: any;\r\n\t\"xlink:role\"?: any;\r\n\t\"xlink:show\"?: any;\r\n\t\"xlink:title\"?: any;\r\n\t\"xlink:type\"?: any;\r\n\t\"xml:base\"?: any;\r\n\t\"xml:lang\"?: any;\r\n\t\"xml:space\"?: any;\r\n\t\"y\"?: any;\r\n\t\"y1\"?: any;\r\n\t\"y2\"?: any;\r\n\t\"yChannelSelector\"?: any;\r\n\t\"z\"?: any;\r\n\t\"zoomAndPan\"?: any;\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * A base class for all SVG elements. Provides low-level DOM functionality.\r\n *\r\n * All visual elements extend this class.\r\n */\r\nexport class AMElement implements IDisposer {\r\n\r\n\t/**\r\n\t * Indicates if the element was already disposed.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tprotected _isDisposed: boolean = false;\r\n\r\n\t/**\r\n\t * An SVG node of the element.\r\n\t *\r\n\t * @type {SVGSVGElement}\r\n\t */\r\n\tpublic node: SVGSVGElement;\r\n\r\n\t/**\r\n\t * Current X coordinate.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tprivate _x: number = 0;\r\n\r\n\t/**\r\n\t * Current Y coordinate.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tprivate _y: number = 0;\r\n\r\n\t/**\r\n\t * Current rotation.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tprivate _rotation: number = 0;\r\n\r\n\t/**\r\n\t * Current scale.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tprivate _scale: number = 1;\r\n\r\n\t/**\r\n\t * Constructor creates a new element or uses the one that was passed in.\r\n\t *\r\n\t * @param {string | SVGSVGElement} element Element reference node type\r\n\t */\r\n\tconstructor(element: string | SVGSVGElement) {\r\n\t\tif (typeof element === \"string\") {\r\n\t\t\tthis.node = <SVGSVGElement>document.createElementNS($dom.SVGNS, element);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.node = element;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Removes element's node from DOM.\r\n\t */\r\n\tpublic removeNode(): void {\r\n\t\tif (this.node) {\r\n\t\t\tif (this.node.parentNode) {\r\n\t\t\t\tthis.node.parentNode.removeChild(this.node);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns `transform` attribute of the element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {string} Transform attribute value\r\n\t */\r\n\tpublic get transformString(): string {\r\n\t\tif (this.node) {\r\n\t\t\treturn this.node.getAttribute(\"transform\");\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Appply position, rotation and scale properties via elemen's `transform`\r\n\t * property\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic transform(): void {\r\n\r\n\t\tlet transfromString = \"\";\r\n\r\n\t\ttransfromString += \"translate(\" + this._x + \",\" + this._y + \")\";\r\n\r\n\t\tif (this._scale != 1) {\r\n\t\t\ttransfromString += ((transfromString ? \" \" : \"\") + \"scale(\" + this._scale + \")\");\r\n\t\t}\r\n\r\n\t\tif (this._rotation != 0) {\r\n\t\t\ttransfromString += ((transfromString ? \" \" : \"\") + \"rotate(\" + this._rotation + \")\");\r\n\t\t}\r\n\r\n\t\tthis.node.setAttribute(\"transform\", transfromString);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns bounding box of the element.\r\n\t *\r\n\t * ATTENTION: Bounding box calculations are extremely costly so should be\r\n\t * used sparingly and cached whenever possible.\r\n\t *\r\n\t * @return {IRectangle} Bounding rectangle\r\n\t */\r\n\tpublic getBBox(): IRectangle {\r\n\t\tlet bbox: IRectangle = {\r\n\t\t\twidth: 0,\r\n\t\t\theight: 0,\r\n\t\t\tx: 0,\r\n\t\t\ty: 0\r\n\t\t};\r\n\t\tif (this.node) {\r\n\t\t\t// FF would fail if getBBox() is called without node added to parent\r\n\t\t\tif (this.node.parentNode) {\r\n\t\t\t\ttry { // again for ff. TODO: check if this doesn't slow down\r\n\t\t\t\t\tlet svgbbox = this.node.getBBox();\r\n\t\t\t\t\tbbox.x = svgbbox.x;\r\n\t\t\t\t\tbbox.y = svgbbox.y;\r\n\t\t\t\t\tbbox.width = svgbbox.width;\r\n\t\t\t\t\tbbox.height = svgbbox.height;\r\n\t\t\t\t}\r\n\t\t\t\tcatch (err) {\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn bbox;\r\n\t}\r\n\r\n\t/**\r\n\t * Moves the element to new coordinates.\r\n\t *\r\n\t * @param {number}  x  Target X\r\n\t * @param {number}  y  Target Y\r\n\t */\r\n\tpublic moveTo(point: IPoint): void {\r\n\t\tif (point) {\r\n\t\t\tlet x: number = point.x;\r\n\t\t\tlet y: number = point.y;\r\n\t\t\tif ((this._x != x && $type.isNumber(x)) || (this._y != y && $type.isNumber(y))) {\r\n\t\t\t\tthis._x = x;\r\n\t\t\t\tthis._y = y;\r\n\t\t\t\tthis.transform();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Element's SVG contents.\r\n\t *\r\n\t * @param {string} value Contents\r\n\t */\r\n\tpublic set content(value: string) {\r\n\t\t// @todo Do not use `innerHTML` as this is not reliable and will not work on all browsers\r\n\t\tthis.node.innerHTML = value;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns element's contents as SVG markup.\r\n\t *\r\n\t * @return {string} Contents\r\n\t */\r\n\tpublic get content(): string {\r\n\t\t// @todo Do not use `innerHTML` as this is not reliable and will not work on all browsers\r\n\t\treturn this.node.innerHTML || \"\";\r\n\t}\r\n\r\n\t/**\r\n\t * Text contents of the SVG element.\r\n\t *\r\n\t * @param {string} value Text contents\r\n\t */\r\n\tpublic set textContent(value: string) {\r\n\t\tthis.node.textContent = value;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {string} Text contents\r\n\t */\r\n\tpublic get textContent(): string {\r\n\t\treturn this.node.textContent || \"\";\r\n\t}\r\n\r\n\t/**\r\n\t * Element's X position in pixels.\r\n\t *\r\n\t * @param {number}  value  X coordinate (px)\r\n\t */\r\n\tpublic set x(value: number) {\r\n\t\tif (this._x != value && $type.isNumber(value)) {\r\n\t\t\tthis._x = value;\r\n\t\t\tthis.transform();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} X coordinate (px)\r\n\t */\r\n\tpublic get x(): number {\r\n\t\treturn this._x;\r\n\t}\r\n\r\n\t/**\r\n\t * Element's Y position in pixels.\r\n\t *\r\n\t * @param {number} value Y coordinate (px)\r\n\t */\r\n\tpublic set y(value: number) {\r\n\t\tif (this._y != value && $type.isNumber(value)) {\r\n\t\t\tthis._y = value;\r\n\t\t\tthis.transform();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Y coordinate (px)\r\n\t */\r\n\tpublic get y(): number {\r\n\t\treturn this._y;\r\n\t}\r\n\r\n\t/**\r\n\t * Element's rotation in degrees.\r\n\t *\r\n\t * @param {number} value Rotation\r\n\t */\r\n\tpublic set rotation(angle: number) {\r\n\t\tif (this._rotation != angle) {\r\n\t\t\tthis._rotation = angle;\r\n\t\t\tthis.transform();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Rotation\r\n\t */\r\n\tpublic get rotation(): number {\r\n\t\treturn this._rotation;\r\n\t}\r\n\r\n\t/**\r\n\t * Element's scale where 1 is original size.\r\n\t *\r\n\t * Setting to 0.5 will reduce element's size by 50%, 2 will make element\r\n\t * twice as large, etc.\r\n\t *\r\n\t * @param {number} value Scale\r\n\t */\r\n\tpublic set scale(value: number) {\r\n\t\tif (this._scale != value) {\r\n\t\t\tthis._scale = value;\r\n\t\t\tthis.transform();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Scale\r\n\t */\r\n\tpublic get scale(): number {\r\n\t\treturn this._scale;\r\n\t}\r\n\r\n\t/**\r\n\t * Removes an attribute from element.\r\n\t *\r\n\t * @param {string}  attribute  Attribute to remove\r\n\t */\r\n\tpublic removeAttr(attribute: string): void {\r\n\t\tthis.node.removeAttribute(attribute);\r\n\t}\r\n\r\n\t/**\r\n\t * Sets a set of attributes on a element.\r\n\t *\r\n\t * @param  {ISVGAttribute}  attributes  An object with attribute names (key) and values\r\n\t * @return {AMElement}                  The same element\r\n\t */\r\n\tpublic attr(attributes: ISVGAttribute): AMElement {\r\n\t\tfor (let attributeName in attributes) {\r\n\t\t\tif (!$type.hasValue((<any>attributes)[attributeName])) {\r\n\t\t\t\tthis.node.removeAttribute(attributeName);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.node.setAttribute(attributeName, (<any>attributes)[attributeName]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a value of a node attribute.\r\n\t *\r\n\t * @param  {string}  attribute  Attribute name\r\n\t * @return {string}             Attribute value\r\n\t */\r\n\tpublic getAttr(attribute: string): string {\r\n\t\treturn this.node.getAttribute(attribute);\r\n\t}\r\n\r\n\t/**\r\n\t * Sets a single attribute of the element's node using namesspace.\r\n\t *\r\n\t * @param  {string}     ns         Namespace\r\n\t * @param  {string}     attribute  Attribute\r\n\t * @param  {string}     value      Value\r\n\t * @return {AMElement}             The same element\r\n\t */\r\n\tpublic attrNS(ns: string, attribute: string, value: string): AMElement {\r\n\t\tthis.node.setAttributeNS(ns, attribute, value);\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a namespaced attribute value from node.\r\n\t *\r\n\t * @param  {string}  ns         Namespace\r\n\t * @param  {string}  attribute  Attribute\r\n\t * @return {string}             Attribute value\r\n\t */\r\n\tpublic getAttrNS(ns: string, attribute: string): string {\r\n\t\treturn this.node.getAttributeNS(ns, attribute);\r\n\t}\r\n\r\n\t/**\r\n\t * Removes `style` attribute from node.\r\n\t *\r\n\t * @param {string}  attribute  Attribute to remove\r\n\t */\r\n\tpublic removeStyle(attribute: string): void {\r\n\t\t// @todo Review because it's a bit messy and maybe not needed (pratically not used)\r\n\t\tdelete (<any>this.node.style)[attribute];\r\n\t}\r\n\r\n\t/**\r\n\t * Returns style attribute value.\r\n\t *\r\n\t * @param  {string}  attribute  Style attribute value\r\n\t * @return {string}             Attribute value\r\n\t */\r\n\tpublic getStyle(attribute: string): string {\r\n\t\t// @todo Review because it's a bit messy and maybe not needed (pratically not used)\r\n\t\treturn (<any>this.node.style)[attribute];\r\n\t}\r\n\r\n\t/**\r\n\t * Adds style attributes to element's node.\r\n\t *\r\n\t * @param  {Object}     attributes  Object containing attribute: value pairs\r\n\t * @return {AMElement}              The same element\r\n\t */\r\n\tpublic addStyle(attributes: Object): AMElement {\r\n\t\t// @todo Review because it's a bit messy and maybe not needed (pratically not used)\r\n\t\tfor (let attributeName in attributes) {\r\n\t\t\tif (!$type.hasValue((<any>attributes)[attributeName])) {\r\n\t\t\t\tthis.removeStyle(attributeName);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t(<any>this.node.style)[attributeName] = (<any>attributes)[attributeName];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * Adds a class to element.\r\n\t *\r\n\t * @param {string}  name  Class name\r\n\t */\r\n\tpublic addClass(name: string): void {\r\n\t\t$dom.addClass(this.node, name);\r\n\t}\r\n\r\n\t/**\r\n\t * Removes a class from element.\r\n\t *\r\n\t * @param {string} name Class name\r\n\t */\r\n\tpublic removeClass(name: string): void {\r\n\t\t$dom.removeClass(this.node, name);\r\n\t}\r\n\r\n\t/**\r\n\t * Sets a class name on element.\r\n\t *\r\n\t * @param {string}  name  Class name\r\n\t */\r\n\tpublic setClass(name: string): void {\r\n\t\tthis.node.setAttribute(\"class\", name);\r\n\t}\r\n\r\n\t/**\r\n\t * Removes all element's child nodes, basically leaving it empty.\r\n\t */\r\n\tpublic removeChildNodes(): void {\r\n\t\t// remove all children\r\n\t\twhile (this.node.childNodes.length > 0) {\r\n\t\t\tthis.node.removeChild(this.node.firstChild);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Was this element already been disposed?\r\n\t *\r\n\t * @return {boolean} Disposed?\r\n\t */\r\n\tpublic isDisposed(): boolean {\r\n\t\treturn this._isDisposed;\r\n\t}\r\n\r\n\t/**\r\n\t * Disposes element.\r\n\t */\r\n\tpublic dispose(): void {\r\n\t\tthis.removeNode();\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/rendering/AMElement.ts","/**\r\n * Pattern module.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { BaseObject } from \"../../Base\";\r\nimport { getSystem } from \"../../System\";\r\nimport { Group } from \"../Group\";\r\nimport { AMElement } from \"../AMElement\";\r\nimport { Paper } from \"../Paper\";\r\nimport { ShapeRendering } from \"../../defs/ShapeRendering\";\r\nimport { List, ListDisposer } from \"../../utils/List\";\r\nimport { MultiDisposer } from \"../../utils/Disposer\";\r\nimport { Animation, IAnimatable, IAnimationOptions, AnimationDisposer } from \"../../utils/Animation\";\r\nimport { registry } from \"../../Registry\";\r\nimport { Color } from \"../../utils/Color\";\r\nimport { InterfaceColorSet } from \"../../utils/InterfaceColorSet\";\r\nimport { percent, Percent } from \"../../utils/Percent\";\r\nimport * as $iter from \"../../utils/Iterator\";\r\nimport * as $object from \"../../utils/Object\";\r\nimport * as $type from \"../../utils/Type\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines available units to measure patterns.\r\n *\r\n * @type {string}\r\n */\r\nexport type PatternUnits = \"userSpaceOnUse\" | \"objectBoundingBox\";\r\n\r\n/**\r\n * Defines properties for [[Pattern]].\r\n *\r\n * @type {string}\r\n */\r\nexport interface PatternProperties {\r\n\tx: number;\r\n\ty: number;\r\n\twidth: number;\r\n\theight: number;\r\n\tbackgroundOpacity: number;\r\n\tbackgroundFill: Color;\r\n\tfillOpacity: number;\r\n\tfill: Color;\r\n\tstroke: Color;\r\n\tstrokeOpacity: number;\r\n\tstrokeWidth: number;\r\n\tshapeRendering: ShapeRendering;\r\n\trotation: number;\r\n\tpatternUnits: PatternUnits;\r\n};\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Base class to define patterns.\r\n */\r\nexport class Pattern extends BaseObject implements IAnimatable {\r\n\r\n\t/**\r\n\t * List of available animations currently running on a pattern.\r\n\t *\r\n\t * @type {Optional<Array<Animation>>}\r\n\t */\r\n\tprotected _animations: $type.Optional<Array<Animation>>;\r\n\r\n\t/**\r\n\t * An SVG `<group>` element to put sub-elements into.\r\n\t *\r\n\t * @type {Group}\r\n\t */\r\n\tpublic element: Group;\r\n\r\n\t/**\r\n\t * Reference to [[Paper]] instance.\r\n\t *\r\n\t * @type {Optional<Paper>}\r\n\t */\r\n\tprotected _paper: $type.Optional<Paper>;\r\n\r\n\t/**\r\n\t * List of elements the pattern consists of.\r\n\t *\r\n\t * @type {List<AMElement>}\r\n\t */\r\n\tprotected _elements: List<AMElement> = new List<AMElement>();\r\n\r\n\t/**\r\n\t * Defines property types.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {FilterProperties}\r\n\t */\r\n\tpublic _properties!: PatternProperties;\r\n\r\n\t/**\r\n\t * A storage for Filter property/value pairs.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @see {@link PatternProperties}\r\n\t * @type {PatternProperties}\r\n\t */\r\n\tpublic properties: this[\"_properties\"] = <any>{};\r\n\t//public propertyValues = new Dictionary<PatternProperties, any>();\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\r\n\t\t// Init\r\n\t\tsuper();\r\n\t\tthis.className = \"Pattern\";\r\n\r\n\t\t// Set defaults\r\n\t\tthis.width = 10;\r\n\t\tthis.height = 10;\r\n\t\tthis.x = 0;\r\n\t\tthis.y = 0;\r\n\t\tthis.patternUnits = \"userSpaceOnUse\";\r\n\r\n\t\tlet interfaceColors = new InterfaceColorSet();\r\n\r\n\t\tthis.backgroundFill = interfaceColors.getFor(\"background\");\r\n\t\tthis.backgroundOpacity = 0;\r\n\r\n\t\tthis.fillOpacity = 1;\r\n\t\tthis.fill = interfaceColors.getFor(\"alternativeBackground\");\r\n\t\tthis.stroke = interfaceColors.getFor(\"alternativeBackground\");\r\n\t\tthis.strokeOpacity = 1;\r\n\t\tthis.strokeWidth = 1;\r\n\t\tthis.shapeRendering = \"crispEdges\";\r\n\t\tthis.rotation = 0;\r\n\r\n\t\t// Create main group to store pattern elements inelements\r\n\t\tthis.element = this.paper.addGroup(\"pattern\");\r\n\t\tthis.id = \"pattern-\" + registry.getUniqueId();\r\n\t\tthis.element.attr({ \"id\": this.id });\r\n\t\tthis._disposers.push(this.element);\r\n\r\n\t\t// Make elements disposable\r\n\t\tthis._disposers.push(new ListDisposer(this._elements));\r\n\r\n\t\t// Request again to trigger getter/setter code\r\n\t\tthis.patternUnits = this.patternUnits;\r\n\t\tthis.width = this.width;\r\n\t\tthis.height = this.height;\r\n\r\n\t\t// Apply theme\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Draws the pattern.\r\n\t */\r\n\tprotected draw(): void {\r\n\r\n\t\tlet patternElement: Group = this.element;\r\n\t\tif (patternElement) {\r\n\r\n\t\t\tpatternElement.removeChildNodes();\r\n\r\n\t\t\tlet background = this.paper.add(\"rect\");\r\n\t\t\tbackground.attr({ \"width\": this.width, \"height\": this.height, \"shape-rendering\": \"crispEdges\", \"fill\": this.backgroundFill.hex, \"fill-opacity\": this.backgroundOpacity, \"stroke\": this.backgroundFill.hex, \"stroke-opacity\": this.backgroundOpacity });\r\n\t\t\tpatternElement.add(background);\r\n\r\n\t\t\tpatternElement.attr({ \"x\": this.x, \"y\": this.y, \"width\": this.width, \"height\": this.height, \"stroke\": this.stroke.hex, \"fill\": this.fill.hex, \"fill-opacity\": this.fillOpacity, \"stroke-opacity\": this.strokeOpacity, \"stroke-width\": this.strokeWidth, \"shape-rendering\": this.shapeRendering, \"patternUnits\": this.patternUnits });\r\n\r\n\t\t\t$iter.each(this._elements.iterator(), (element) => {\r\n\t\t\t\telement.rotation = this.rotation;\r\n\t\t\t\tthis.element.add(element);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Animate pattern properties.\r\n\t *\r\n\t * @see {@link Animation}\r\n\t * @param  {IAnimationOptions[] | IAnimationOptions}  animationOptions  Animation options\r\n\t * @param  {number}                                   duration          Duration (ms)\r\n\t * @param  {(number) => number}                       easing            Easing function\r\n\t * @return {Animation}                                                  Animation instance\r\n\t */\r\n\tpublic animate(animationOptions: IAnimationOptions[] | IAnimationOptions, duration: number, easing?: (value: number) => number): Animation {\r\n\t\treturn new Animation(this, animationOptions, duration, easing).start();\r\n\t}\r\n\r\n\t/**\r\n\t * Adds an element to the pattern.\r\n\t *\r\n\t * @param {AMElement}  element  Element\r\n\t */\r\n\tpublic addElement(element: AMElement): void {\r\n\t\tthis._elements.push(element);\r\n\t\tthis._disposers.push(element);\r\n\t}\r\n\r\n\t/**\r\n\t * Remove an element from the pattern.\r\n\t *\r\n\t * @param {AMElement}  element  Element\r\n\t */\r\n\tpublic removeElement(element: AMElement): void {\r\n\t\tthis._elements.removeValue(element);\r\n\t\tthis.removeDispose(element);\r\n\t}\r\n\r\n\t/**\r\n\t * Pattern fill opacity. (0-1)\r\n\t *\r\n\t * @param {number}  value  Opacity (0-1)\r\n\t */\r\n\tpublic set fillOpacity(value: number) {\r\n\t\tthis.properties[\"fillOpacity\"] = value;\r\n\t\tthis.draw();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Opacity (0-1)\r\n\t */\r\n\tpublic get fillOpacity(): number {\r\n\t\treturn this.properties[\"fillOpacity\"];\r\n\t}\r\n\r\n\t/**\r\n\t * Fill color of the pattern.\r\n\t *\r\n\t * @param {Color}  value  Fill color\r\n\t */\r\n\tpublic set fill(value: Color) {\r\n\t\tthis.properties[\"fill\"] = value;\r\n\t\tthis.draw();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Color} Fill color\r\n\t */\r\n\tpublic get fill(): Color {\r\n\t\treturn this.properties[\"fill\"];\r\n\t}\r\n\r\n\t/**\r\n\t * Pattern background fill color.\r\n\t *\r\n\t * @param {Color}  value  Background color\r\n\t */\r\n\tpublic set backgroundFill(value: Color) {\r\n\t\tthis.properties[\"backgroundFill\"] = value;\r\n\t\tthis.draw();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Color} Background color\r\n\t */\r\n\tpublic get backgroundFill(): Color {\r\n\t\treturn this.properties[\"backgroundFill\"];\r\n\t}\r\n\r\n\t/**\r\n\t * Pattern backgorund opacity. (0-1)\r\n\t *\r\n\t * @param {number}  value  Background opacity (0-1)\r\n\t */\r\n\tpublic set backgroundOpacity(value: number) {\r\n\t\tthis.properties[\"backgroundOpacity\"] = value;\r\n\t\tthis.draw();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Background opacity (0-1)\r\n\t */\r\n\tpublic get backgroundOpacity(): number {\r\n\t\treturn this.properties[\"backgroundOpacity\"];\r\n\t}\r\n\r\n\t/**\r\n\t * Pattern stroke (border) color.\r\n\t *\r\n\t * @param {Color}  value  Color\r\n\t */\r\n\tpublic set stroke(value: Color) {\r\n\t\tthis.properties[\"stroke\"] = value;\r\n\t\tthis.draw();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Color} Color\r\n\t */\r\n\tpublic get stroke(): Color {\r\n\t\treturn this.properties[\"stroke\"];\r\n\t}\r\n\r\n\t/**\r\n\t * Pattern stroke opacity. (0-1)\r\n\t *\r\n\t * @param {number}  value  Opacity (0-1)\r\n\t */\r\n\tpublic set strokeOpacity(value: number) {\r\n\t\tthis.properties[\"strokeOpacity\"] = value;\r\n\t\tthis.draw();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Opacity (0-1)\r\n\t */\r\n\tpublic get strokeOpacity(): number {\r\n\t\treturn this.properties[\"strokeOpacity\"];\r\n\t}\r\n\r\n\t/**\r\n\t * Pattern stroke thickness in pixels.\r\n\t *\r\n\t * @param {number}  value  Stroke thickness (px)\r\n\t */\r\n\tpublic set strokeWidth(value: number) {\r\n\t\tthis.properties[\"strokeWidth\"] = value;\r\n\t\tthis.draw();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Stroke thickness (px)\r\n\t */\r\n\tpublic get strokeWidth(): number {\r\n\t\treturn this.properties[\"strokeWidth\"];\r\n\t}\r\n\r\n\t/**\r\n\t * Shape rendering\r\n\t * @param {ShapeRendering} value [description]\r\n\t */\r\n\tpublic set shapeRendering(value: ShapeRendering) {\r\n\t\tthis.properties[\"shapeRendering\"] = value;\r\n\t\tthis.draw();\r\n\t}\r\n\r\n\tpublic get shapeRendering(): ShapeRendering {\r\n\t\treturn this.properties[\"shapeRendering\"];\r\n\t}\r\n\r\n\t/**\r\n\t * Pattern rotation in degrees.\r\n\t *\r\n\t * @param {number}  value  Rotation\r\n\t */\r\n\tpublic set rotation(value: number) {\r\n\t\tthis.properties[\"rotation\"] = value;\r\n\t\tthis.draw();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Rotation\r\n\t */\r\n\tpublic get rotation(): number {\r\n\t\treturn this.properties[\"rotation\"];\r\n\t}\r\n\r\n\t/**\r\n\t * Pattern measuring units.\r\n\t *\r\n\t * Available options: \"userSpaceOnUse\" | \"objectBoundingBox\".\r\n\t *\r\n\t * @param {\"userSpaceOnUse\" | \"objectBoundingBox\"}  value  Units\r\n\t */\r\n\tpublic set patternUnits(value: \"userSpaceOnUse\" | \"objectBoundingBox\") {\r\n\t\tthis.properties[\"patternUnits\"] = value;\r\n\t\tthis.draw();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {\"userSpaceOnUse\" | \"objectBoundingBox\"} Units\r\n\t */\r\n\tpublic get patternUnits(): \"userSpaceOnUse\" | \"objectBoundingBox\" {\r\n\t\treturn this.properties[\"patternUnits\"];\r\n\t}\r\n\r\n\t/**\r\n\t * Pattern width in pixels.\r\n\t *\r\n\t * @param {number}  value  Width (px)\r\n\t */\r\n\tpublic set width(value: number) {\r\n\t\tthis.properties[\"width\"] = value;\r\n\t\tthis.draw();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Width (px)\r\n\t */\r\n\tpublic get width(): number {\r\n\t\treturn this.properties[\"width\"];\r\n\t}\r\n\r\n\t/**\r\n\t * Pattern height in pixels.\r\n\t *\r\n\t * @param {number} value Height (px)\r\n\t */\r\n\tpublic set height(value: number) {\r\n\t\tthis.properties[\"height\"] = value;\r\n\t\tthis.draw();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Height (px)\r\n\t */\r\n\tpublic get height(): number {\r\n\t\treturn this.properties[\"height\"];\r\n\t}\r\n\r\n\t/**\r\n\t * X position. (pixels)\r\n\t *\r\n\t * @param {number} value X (px)\r\n\t */\r\n\tpublic set x(value: number) {\r\n\t\tthis.properties[\"x\"] = value;\r\n\t\tthis.draw();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} X (px)\r\n\t */\r\n\tpublic get x(): number {\r\n\t\treturn this.properties[\"x\"];\r\n\t}\r\n\r\n\t/**\r\n\t * Y position. (px)\r\n\t *\r\n\t * @param {number} value Y (px)\r\n\t */\r\n\tpublic set y(value: number) {\r\n\t\tthis.properties[\"y\"] = value;\r\n\t\tthis.draw();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Y (px)\r\n\t */\r\n\tpublic get y(): number {\r\n\t\treturn this.properties[\"y\"];\r\n\t}\r\n\r\n\t/**\r\n\t * [[Paper]] instance to draw pattern in.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {Paper}  paper  Paper\r\n\t */\r\n\tpublic set paper(paper: Paper) {\r\n\t\tif (this._paper != paper) {\r\n\t\t\tthis._paper = paper;\r\n\t\t\tthis.draw();\r\n\t\t\tpaper.appendDef(this.element);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore Exclude from docs\r\n\t * @return {Paper} Paper\r\n\t */\r\n\tpublic get paper(): Paper {\r\n\t\tif (this._paper) {\r\n\t\t\treturn this._paper;\r\n\t\t}\r\n\t\treturn getSystem().ghostPaper;\r\n\t}\r\n\r\n\t/**\r\n\t * Copies properties from another Pattern instance.\r\n\t *\r\n\t * @param {this}  source  Source pattern\r\n\t */\r\n\tpublic copyFrom(source: this) {\r\n\t\tsuper.copyFrom(source);\r\n\t\t$object.each(source.properties, (key, value) => {\r\n\t\t\t(<any>this)[key] = value;\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * A list of animations currently running on the patter.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {Array<Animation>} Animation list\r\n\t */\r\n\tpublic get animations(): Array<Animation> {\r\n\t\tif (!this._animations) {\r\n\t\t\tthis._animations = [];\r\n\t\t\tthis._disposers.push(new AnimationDisposer(this._animations));\r\n\t\t}\r\n\t\treturn this._animations;\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../../src/.internal/core/rendering/fills/Pattern.ts","/**\r\n * Functionality for drawing waved lines.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Line, ILineProperties, ILineAdapters, ILineEvents } from \"./Line\";\r\nimport { SpriteEventDispatcher, AMEvent } from \"../Sprite\";\r\nimport { IPoint } from \"../defs/IPoint\";\r\nimport { IWavedShape } from \"../defs/IWavedShape\";\r\nimport { color } from \"../utils/Color\";\r\nimport { wavedLine } from \"../rendering/Smoothing\";\r\nimport * as $path from \"../rendering/Path\";\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines available properties for [[WavedLine]].\r\n */\r\nexport interface IWavedLineProperties extends ILineProperties {\r\n\r\n\t/**\r\n\t * Wave length in pixels.\r\n\t *\r\n\t * @default 16\r\n\t * @type {number}\r\n\t */\r\n\twaveLength?: number;\r\n\r\n\t/**\r\n\t * Wave height in pixels.\r\n\t *\r\n\t * @default 4\r\n\t * @type {number}\r\n\t */\r\n\twaveHeight?: number;\r\n\r\n\t/**\r\n\t * Wave tension.\r\n\t *\r\n\t * @default 0.8\r\n\t * @type {number}\r\n\t */\r\n\ttension?: number;\r\n\r\n}\r\n\r\n/**\r\n * Defines events for [[WavedLine]].\r\n */\r\nexport interface IWavedLineEvents extends ILineEvents { }\r\n\r\n/**\r\n * Defines adapters for [[WavedLine]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface IWavedLineAdapters extends ILineAdapters, IWavedLineProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Draws a waved line.\r\n *\r\n * @see {@link IWavedLineEvents} for a list of available events\r\n * @see {@link IWavedLineAdapters} for a list of available Adapters\r\n */\r\nexport class WavedLine extends Line implements IWavedShape {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IWavedLineProperties}\r\n\t */\r\n\tpublic _properties!: IWavedLineProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IWavedLineAdapters}\r\n\t */\r\n\tpublic _adapter!: IWavedLineAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IWavedLineEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IWavedLineEvents;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"WavedLine\";\r\n\t\tthis.element = this.paper.add(\"path\");\r\n\t\tthis.waveLength = 16;\r\n\t\tthis.waveHeight = 4;\r\n\t\tthis.tension = 0.8;\r\n\t\tthis.pixelPerfect = false;\r\n\r\n\t\tthis.fill = color();\r\n\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Draws the waved line.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic draw(): void {\r\n\t\t//super.draw();\r\n\t\tlet p1: IPoint = { x: this.x1, y: this.y1 };\r\n\t\tlet p2: IPoint = { x: this.x2, y: this.y2 };\r\n\r\n\t\tlet d: string = $path.moveTo(p1) + wavedLine(p1, p2, this.waveLength, this.waveHeight, this.tension, true);\r\n\r\n\t\tthis.element.attr({ \"d\": d });\r\n\t}\r\n\r\n\t/**\r\n\t * Wave length in pixels.\r\n\t *\r\n\t * @default 16\r\n\t * @param {number}  value  Wave length (px)\r\n\t */\r\n\tpublic set waveLength(value: number) {\r\n\t\tthis.setPropertyValue(\"waveLength\", value);\r\n\t\tthis.invalidate();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Wave length (px)\r\n\t */\r\n\tpublic get waveLength(): number {\r\n\t\treturn this.getPropertyValue(\"waveLength\");\r\n\t}\r\n\r\n\t/**\r\n\t * Wave height in pixels.\r\n\t *\r\n\t * @default 4\r\n\t * @param {number}  value  Wave height (px)\r\n\t */\r\n\tpublic set waveHeight(value: number) {\r\n\t\tthis.setPropertyValue(\"waveHeight\", value);\r\n\t\tthis.invalidate();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Wave height (px)\r\n\t */\r\n\tpublic get waveHeight(): number {\r\n\t\treturn this.getPropertyValue(\"waveHeight\");\r\n\t}\r\n\r\n\t/**\r\n\t * Tension of the wave.\r\n\t *\r\n\t * @default 0.8\r\n\t * @param {number}  value  Tension\r\n\t */\r\n\tpublic set tension(value: number) {\r\n\t\tthis.setPropertyValue(\"tension\", value);\r\n\t\tthis.invalidate();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Tension\r\n\t */\r\n\tpublic get tension(): number {\r\n\t\treturn this.getPropertyValue(\"tension\");\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/elements/WavedLine.ts","/**\r\n * Base class for all Axis\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Component, IComponentProperties, IComponentDataFields, IComponentAdapters, IComponentEvents } from \"../../core/Component\";\r\nimport { SpriteEventDispatcher, AMEvent } from \"../../core/Sprite\";\r\nimport { Container } from \"../../core/Container\";\r\nimport { DataItem } from \"../../core/DataItem\";\r\n\r\nimport { Grid } from \"./Grid\";\r\nimport { AxisTick } from \"./AxisTick\";\r\nimport { AxisLabel } from \"./AxisLabel\";\r\nimport { AxisFill } from \"./AxisFill\";\r\nimport { AxisBreak } from \"./AxisBreak\";\r\nimport { AxisRenderer } from \"./AxisRenderer\";\r\n\r\n// Charts\r\nimport { Chart } from \"../Chart\";\r\n\r\n// Series\r\nimport { XYSeries, XYSeriesDataItem } from \"../series/XYSeries\";\r\n\r\n// Elements\r\nimport { IPoint, IOrientationPoint } from \"../../core/defs/IPoint\";\r\nimport { Label } from \"../../core/elements/Label\";\r\nimport { IRectangle } from \"../../core/defs/IRectangle\";\r\nimport { Tooltip, PointerOrientation } from \"../../core/elements/Tooltip\";\r\nimport { PointedRectangle } from \"../../core/elements/PointedRectangle\";\r\n\r\n// Types\r\nimport { IRange } from \"../../core/defs/IRange\";\r\n\r\n// Utils\r\nimport { Ordering } from \"../../core/utils/Order\";\r\nimport { SortedListTemplate } from \"../../core/utils/SortedList\";\r\nimport { List, ListTemplate, IListEvents, ListDisposer } from \"../../core/utils/List\";\r\nimport { IDisposer, Disposer, MultiDisposer } from \"../../core/utils/Disposer\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\nimport * as $math from \"../../core/utils/Math\";\r\nimport * as $utils from \"../../core/utils/Utils\";\r\nimport * as $number from \"../../core/utils/Number\";\r\nimport * as $array from \"../../core/utils/Array\";\r\nimport * as $type from \"../../core/utils/Type\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines a [[DataItem]] for [[Axis]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nexport class AxisDataItem extends DataItem {\r\n\r\n\t/**\r\n\t * Reference to a related [[Grid]] element.\r\n\t *\r\n\t * @type {Grid}\r\n\t */\r\n\tprotected _grid: Grid;\r\n\r\n\t/**\r\n\t * Reference to a related [[AxisTick]] element.\r\n\t *\r\n\t * @type {AxisTick}\r\n\t */\r\n\tprotected _tick: AxisTick;\r\n\r\n\t/**\r\n\t * Reference to a related [[AxisLabel]] element.\r\n\t *\r\n\t * @type {AxisLabel}\r\n\t */\r\n\tprotected _label: AxisLabel;\r\n\r\n\t/**\r\n\t * Reference to a related [[AxisFill]] element.\r\n\t *\r\n\t * @type {AxisFill}\r\n\t */\r\n\tprotected _axisFill: AxisFill;\r\n\r\n\t/**\r\n\t * A mask for axis. We're using [[AxisFill]] since the mask, basically, has\r\n\t * the same shape and features.\r\n\t *\r\n\t * @type {AxisFill}\r\n\t */\r\n\tprotected _mask: AxisFill;\r\n\r\n\t/**\r\n\t * Container which might be used to hold some extra items, like series\r\n\t * segments when data item is used for axis range.\r\n\t *\r\n\t * @type {Container}\r\n\t */\r\n\tprotected _contents: Container;\r\n\r\n\t/**\r\n\t * A text to be used as label for this data item.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tprotected _text: string;\r\n\r\n\t/**\r\n\t * Holds a physical position of the grid line associated with this data item,\r\n\t * so that it can be used when measuring distance between points, and hiding\r\n\t * some of them so they don't overlap.\r\n\t *\r\n\t * @type {IPoint}\r\n\t */\r\n\tpublic point: IPoint;\r\n\r\n\t/**\r\n\t * If the data item is within an existing [[AxisBreak]] this property will\r\n\t * hold a reference to that [[AxisBreak]].\r\n\t *\r\n\t * @type {AxisBreak}\r\n\t */\r\n\tprotected _axisBreak: AxisBreak;\r\n\r\n\t/**\r\n\t * Defines a type of [[Component]] this data item is used for.\r\n\t *\r\n\t * @type {Axis}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _component!: Axis;\r\n\r\n\t/**\r\n\t * Used to distinguish from real data points and those data items that are\r\n\t * used for ranges, like `series.axisRanges` or `axis.axisRanges`.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {boolean}\r\n\t */\r\n\tpublic isRange: boolean;\r\n\r\n\t/**\r\n\t * relative position of data item on axis\r\n\t */\r\n\tpublic position: number;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"AxisDataItem\";\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * A [[Grid]] element associated with this data item.\r\n\t *\r\n\t * If there is no grid element associated with data item, a new one is\r\n\t * created and returned.\r\n\t *\r\n\t * @param {Grid}  grid  Grid element\r\n\t */\r\n\tpublic set grid(grid: Grid) {\r\n\t\tif (this._grid && this._grid != grid) {\r\n\t\t\t$array.remove(this.sprites, this._grid);\r\n\t\t\tthis._grid.dataItem = undefined;\r\n\t\t}\r\n\r\n\t\tif (grid) {\r\n\t\t\tif (grid.dataItem && grid.dataItem != this) {\r\n\t\t\t\t$array.remove(grid.dataItem.sprites, grid);\r\n\t\t\t\tgrid.dataItem.grid = undefined;\r\n\t\t\t}\r\n\t\t\tgrid.__disabled = false;\r\n\t\t\tthis.addSprite(grid);\r\n\t\t}\r\n\t\tthis._grid = grid;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Grid} Grid element\r\n\t */\r\n\tpublic get grid(): Grid {\r\n\t\tif (!this._grid) {\r\n\t\t\tlet component = this.component;\r\n\t\t\tif (component) {\r\n\t\t\t\tthis.grid = component.renderer.grid.create();\r\n\t\t\t\tthis._disposers.push(this._grid);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this._grid;\r\n\t}\r\n\r\n\t/**\r\n\t * Override to cancel super call for data element validation.\r\n\t */\r\n\tprotected validateDataElements() {\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * An [[AxisTick]] element associated with this data item.\r\n\t *\r\n\t * If there is no tick element associated with data item, a new one is\r\n\t * created and returned.\r\n\t *\r\n\t * @param {AxisTick}  tick  Tick element\r\n\t */\r\n\tpublic set tick(tick: AxisTick) {\r\n\t\tif (this._tick && this._tick != tick) {\r\n\t\t\t$array.remove(this.sprites, this._tick);\r\n\t\t\tthis._tick.dataItem = undefined;\r\n\t\t}\r\n\r\n\t\tif (tick) {\r\n\t\t\tif (tick.dataItem && tick.dataItem != this) {\r\n\t\t\t\t$array.remove(tick.dataItem.sprites, tick);\r\n\t\t\t\ttick.dataItem.tick = undefined;\r\n\t\t\t}\r\n\t\t\ttick.__disabled = false;\r\n\t\t\tthis.addSprite(tick);\r\n\t\t}\r\n\t\tthis._tick = tick;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {AxisTick} Tick element\r\n\t */\r\n\tpublic get tick(): AxisTick {\r\n\t\tif (!this._tick) {\r\n\t\t\tlet component = this.component;\r\n\t\t\tif (component) {\r\n\t\t\t\tthis.tick = component.renderer.ticks.create();\r\n\t\t\t\tthis._disposers.push(this._tick);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this._tick;\r\n\t}\r\n\r\n\t/**\r\n\t * An [[AxisLabel]] element associated with this data item.\r\n\t *\r\n\t * If there is no label element associated with data item, a new one is\r\n\t * created and returned.\r\n\t *\r\n\t * @param {AxisLabel} label Label element\r\n\t */\r\n\tpublic set label(label: AxisLabel) {\r\n\t\tif (this._label && this._label != label) {\r\n\t\t\t$array.remove(this.sprites, this._label);\r\n\t\t\tthis._label.dataItem = undefined;\r\n\t\t}\r\n\r\n\t\tif (label) {\r\n\t\t\tif (label.dataItem && label.dataItem != this) {\r\n\t\t\t\t$array.remove(label.dataItem.sprites, label);\r\n\t\t\t\tlabel.dataItem.label = undefined;\r\n\t\t\t}\r\n\t\t\tlabel.__disabled = false;\r\n\t\t\tthis.addSprite(label);\r\n\t\t}\r\n\t\tthis._label = label;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {AxisLabel} Label element\r\n\t */\r\n\tpublic get label(): AxisLabel {\r\n\t\tif (!this._label) {\r\n\t\t\tlet component = this.component;\r\n\t\t\tif (component) {\r\n\t\t\t\tthis.label = component.renderer.labels.create();\r\n\t\t\t\tthis._disposers.push(this._label);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this._label;\r\n\t}\r\n\r\n\t/**\r\n\t * An [[AxisFill]] associated element with this data item.\r\n\t *\r\n\t * If there is no fill element associated with data item, a new one is\r\n\t * created and returned.\r\n\t *\r\n\t * @param {AxisFill} label Label element\r\n\t */\r\n\tpublic set axisFill(axisFill: AxisFill) {\r\n\t\tif (this._axisFill && this._axisFill != axisFill) {\r\n\t\t\t$array.remove(this.sprites, this._axisFill);\r\n\t\t\tthis._axisFill.dataItem = undefined;\r\n\t\t}\r\n\r\n\t\tif (axisFill) {\r\n\t\t\tif (axisFill.dataItem && axisFill.dataItem != this) {\r\n\t\t\t\t$array.remove(axisFill.dataItem.sprites, axisFill);\r\n\t\t\t\taxisFill.dataItem.axisFill = undefined;\r\n\t\t\t}\r\n\t\t\taxisFill.__disabled = false;\r\n\t\t\taxisFill.axis = this.component;\r\n\t\t\tthis.addSprite(axisFill);\r\n\t\t}\r\n\t\tthis._axisFill = axisFill;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {AxisFill} Label element\r\n\t */\r\n\tpublic get axisFill(): AxisFill {\r\n\t\tif (!this._axisFill) {\r\n\t\t\tlet component = this.component;\r\n\t\t\tif (component) {\r\n\t\t\t\tthis.axisFill = component.renderer.axisFills.create();\r\n\t\t\t\tthis._disposers.push(this._axisFill);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this._axisFill;\r\n\t}\r\n\r\n\t/**\r\n\t * Text to be used as data item's label.\r\n\t *\r\n\t * @param {string} text Text label\r\n\t */\r\n\tpublic set text(text: string) {\r\n\t\tthis._text = text;\r\n\t\tif (this._label) { // do not use getter, it will create unwanted instances!\r\n\t\t\tthis._label.text = text;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {string} Text label\r\n\t */\r\n\tpublic get text(): string {\r\n\t\treturn this._text;\r\n\t}\r\n\r\n\t/**\r\n\t * Data item's mask.\r\n\t *\r\n\t * @return {AxisFill} Mask\r\n\t */\r\n\tpublic get mask(): AxisFill {\r\n\t\treturn this._mask;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a [[Container]] to place all visual elements, related to data item\r\n\t * in.\r\n\t *\r\n\t * If there is no Container, a new one is created.\r\n\t *\r\n\t * @return {Container} Contents container\r\n\t */\r\n\tpublic get contents(): Container {\r\n\t\tif (!this._contents) {\r\n\t\t\tlet contents = new Container();\r\n\t\t\tthis.addSprite(contents);\r\n\t\t\tcontents.isMeasured = false;\r\n\t\t\tthis._contents = contents;\r\n\r\n\t\t\tlet component = this.component;\r\n\t\t\tif (component) {\r\n\t\t\t\tlet mask: AxisFill = component.renderer.axisFills.create();\r\n\t\t\t\tmask.axis = component;\r\n\t\t\t\tthis.addSprite(mask);\r\n\t\t\t\tthis._mask = mask;\r\n\r\n\t\t\t\tcontents.mask = mask;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this._contents;\r\n\t}\r\n\r\n\t/**\r\n\t * An [[AxisBreak]] this data item falls within.\r\n\t *\r\n\t * @param {AxisBreak} axisBreak Axis break\r\n\t */\r\n\tpublic set axisBreak(axisBreak: AxisBreak) {\r\n\t\tif (this._axisBreak) {\r\n\t\t\tthis._axisBreak.dataItems.removeValue(this);\r\n\t\t}\r\n\t\tif (axisBreak) {\r\n\t\t\taxisBreak.dataItems.push(this);\r\n\t\t}\r\n\t\tthis._axisBreak = axisBreak;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {AxisBreak} Axis break\r\n\t */\r\n\tpublic get axisBreak(): AxisBreak {\r\n\t\treturn this._axisBreak;\r\n\t}\r\n\r\n\t/**\r\n\t * Re-draws the element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic validate() {\r\n\t\tif (this.component) {\r\n\t\t\tthis.component.validateDataElement(this);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Appends data item's elements to the parent [[Container]].\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic appendChildren() {\r\n\t\tif (this.component) {\r\n\t\t\tthis.component.appendDataItem(this);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Ordering function used in JSON setup.\r\n\t *\r\n\t * @param  {string}  a  Item A\r\n\t * @param  {string}  b  Item B\r\n\t * @return {Ordering}   Order\r\n\t */\r\n\tprotected configOrder(a: string, b: string): Ordering {\r\n\t\tif (a == b) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\telse if (a == \"language\") {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\telse if (b == \"language\") {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t\telse if (a == \"component\") {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\telse if (b == \"component\") {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if data item has particular property set.\r\n\t *\r\n\t * @param  {string}   prop  Property name\r\n\t * @return {boolean}        Property set?\r\n\t */\r\n\tprotected hasProperty(prop: string): boolean {\r\n\t\treturn prop == \"component\" ? true : super.hasProperty(prop);\r\n\t}\r\n\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines named positions for data item's location within [[Axis]].\r\n */\r\nexport enum AxisItemLocation {\r\n\tStart = 0,\r\n\tMiddle = 0.5,\r\n\tEnd = 1\r\n}\r\n\r\n/**\r\n * Defines data fields for [[Axis]].\r\n */\r\nexport interface IAxisDataFields extends IComponentDataFields { }\r\n\r\n/**\r\n * Defines properties for [[Axis]].\r\n */\r\nexport interface IAxisProperties extends IComponentProperties { }\r\n\r\n/**\r\n * Defines events for [[Axis]].\r\n */\r\nexport interface IAxisEvents extends IComponentEvents {\r\n\r\n\t/**\r\n\t * Invoked when available axis lenght chganges, e.g. after resizing the whole\r\n\t * chart.\r\n\t */\r\n\tlengthchanged: {}\r\n\r\n}\r\n\r\n/**\r\n * Defines adapters for [[Axis]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface IAxisAdapters extends IComponentAdapters, IAxisProperties {\r\n\r\n\t/**\r\n\t * Applied to an axis label text before it's drawn.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tlabel: string\r\n\r\n\t/**\r\n\t * Applied to the tooltip text before it is shown.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tgetTooltipText: string;\r\n\r\n}\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * A base class for all Axis elements.\r\n *\r\n * @see {@link IAxisEvents} for a list of available Events\r\n * @see {@link IAxisAdapters} for a list of available Adapters\r\n */\r\nexport class Axis<T extends AxisRenderer = AxisRenderer> extends Component {\r\n\r\n\t/**\r\n\t * Defines list of data fields.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IAxisDataFields}\r\n\t */\r\n\tpublic _dataFields: IAxisDataFields;\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IAxisProperties}\r\n\t */\r\n\tpublic _properties!: IAxisProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IAxisAdapters}\r\n\t */\r\n\tpublic _adapter!: IAxisAdapters;\r\n\r\n\t/**\r\n\t * Defines the type of the [[DataItem]] used in the class.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {AxisDataItem}\r\n\t */\r\n\tpublic _dataItem: AxisDataItem;\r\n\r\n\t/**\r\n\t * A list of Axis Ranges.\r\n\t */\r\n\tprotected _axisRanges: ListTemplate<this[\"_dataItem\"]>;\r\n\r\n\t/**\r\n\t * Defines the type of the axis breaks.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {AxisBreak}\r\n\t */\r\n\tpublic _axisBreak: AxisBreak;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IAxisEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IAxisEvents;\r\n\r\n\t/**\r\n\t * A [[Label]] instance that is used for Axis title label.\r\n\t *\r\n\t * @type {Label}\r\n\t */\r\n\tpublic title: Label;\r\n\r\n\t/**\r\n\t * \"X\", \"Y\", etc.\r\n\t *\r\n\t * This is needed so that Axis knows which of the values from series' data\r\n\t * items it should use.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {string}\r\n\t */\r\n\tpublic axisLetter: string;\r\n\r\n\t/**\r\n\t * A reference to chart the axis is for.\r\n\t *\r\n\t * @type {Chart}\r\n\t */\r\n\tprotected _chart: Chart;\r\n\r\n\t/**\r\n\t * Indicates if cusor's tooltip should be shown on this Axis.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tprotected _cursorTooltipEnabled: boolean;\r\n\r\n\t/**\r\n\t * A type for renderer used for this Axis.\r\n\t * @type {T}\r\n\t */\r\n\tprotected _renderer: T;\r\n\r\n\t/**\r\n\t * Number of Grid elements on the axis.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tprotected _gridCount: number = 5;\r\n\r\n\t/**\r\n\t * A list of [[XYSeries]] that are using this Axis.\r\n\t *\r\n\t * @type {List<XYSeries>}\r\n\t */\r\n\tprotected _series: List<XYSeries> = new List<XYSeries>();\r\n\r\n\t/**\r\n\t * [_prevLength description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\tprotected _prevLength: number;\r\n\r\n\t/**\r\n\t * A list of Axis Breaks associated with this Axis.\r\n\t */\r\n\tprotected _axisBreaks: SortedListTemplate<this[\"_axisBreak\"]>;\r\n\r\n\t/**\r\n\t * A reference to the Iterator for Axis' data items.\r\n\t */\r\n\tprotected _dataItemsIterator: $iter.ListIterator<this[\"_dataItem\"]>;\r\n\r\n\t/**\r\n\t * [axisFieldName description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @type {string}\r\n\t */\r\n\tpublic axisFieldName: string;\r\n\r\n\t// we save these values so that cursur could use them if axis line is a fill\r\n\r\n\t/**\r\n\t * [currentItemStartPoint description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IPoint}\r\n\t */\r\n\tpublic currentItemStartPoint: IPoint;\r\n\r\n\t/**\r\n\t * [currentItemEndPoint description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IPoint}\r\n\t */\r\n\tpublic currentItemEndPoint: IPoint;\r\n\r\n\t/**\r\n\t * Holds reference to a function that accepts a DataItem and its index as\r\n\t * parameters.\r\n\t *\r\n\t * It can either return a fill opacity for a fill, or manipulate data item\r\n\t * directly, to create various highlighting scenarios.\r\n\t *\r\n\t * For example, you can set it up to highlight only weekends on a\r\n\t * [[DateAxis]].\r\n\t *\r\n\t * @param {AxisDataItem} dataItem [description]\r\n\t * @param {number}       index    [description]\r\n\t */\r\n\tpublic fillRule: (dataItem: AxisDataItem, index?: number) => any = function(dataItem: AxisDataItem, index?: number) {\r\n\t\tif (!$type.isNumber(index)) {\r\n\t\t\tindex = dataItem.index;\r\n\t\t}\r\n\t\tif (index / 2 == Math.round(index / 2)) {\r\n\t\t\tdataItem.axisFill.__disabled = true;\r\n\t\t\tdataItem.axisFill.opacity = 0;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tdataItem.axisFill.opacity = 1;\r\n\t\t\tdataItem.axisFill.__disabled = false;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tpublic axisFullLength: number;\r\n\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\r\n\t\t// Init\r\n\t\tsuper();\r\n\t\tthis.className = \"Axis\";\r\n\t\tthis.shouldClone = false;\r\n\t\tthis.cursorTooltipEnabled = true;\r\n\r\n\t\tlet interfaceColors = new InterfaceColorSet();\r\n\r\n\t\t// Create title\r\n\t\tthis.title = new Label();\r\n\t\tthis.title.shouldClone = false;\r\n\t\tthis._disposers.push(this.title);\r\n\r\n\t\t// Data item iterator\r\n\t\tthis._dataItemsIterator = new $iter.ListIterator<this[\"_dataItem\"]>(this.dataItems, () => this.dataItems.create());\r\n\t\tthis._dataItemsIterator.createNewItems = true;\r\n\r\n\t\t// Create tooltip\r\n\t\tlet tooltip: Tooltip = new Tooltip();\r\n\t\tthis._disposers.push(tooltip);\r\n\t\ttooltip.label.padding(5, 10, 5, 10);\r\n\t\ttooltip.background.pointerLength = 5;\r\n\t\ttooltip.fitPointerToBounds = true;\r\n\t\ttooltip.filters.clear();\r\n\r\n\t\t// Create background element for the tooltip\r\n\t\tlet background: PointedRectangle = <PointedRectangle>tooltip.background;\r\n\t\tbackground.cornerRadius = 0;\r\n\t\tbackground.fill = interfaceColors.getFor(\"alternativeBackground\");\r\n\t\tbackground.stroke = background.fill;\r\n\t\tbackground.strokeWidth = 1;\r\n\t\tbackground.fillOpacity = 1;\r\n\t\ttooltip.label.fill = interfaceColors.getFor(\"alternativeText\");\r\n\r\n\t\tthis.tooltip = tooltip;\r\n\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a new/empty DataItem of the type appropriate for this object.\r\n\t *\r\n\t * @see {@link DataItem}\r\n\t * @return {AxisDataItem} Data Item\r\n\t */\r\n\tprotected createDataItem(): this[\"_dataItem\"] {\r\n\t\treturn new AxisDataItem();\r\n\t}\r\n\r\n\t/**\r\n\t * Invalidates layout.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic invalidateLayout(): void {\r\n\t\tsuper.invalidateLayout();\r\n\t\t// this puts series after axis in invalidation order also makes series update it's data items in case widht/height of a series is not 100%\r\n\t\t$iter.each(this.series.iterator(), (series) => {\r\n\t\t\tseries.invalidateLayout();\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Recalculates the number of grid items on the axis.\r\n\t */\r\n\tprotected updateGridCount() {\r\n\t\tif (this.renderer) {\r\n\t\t\tthis._gridCount = this.axisLength / this.renderer.minGridDistance;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Redraws the element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic validateLayout(): void {\r\n\r\n\t\tthis.axisFullLength = this.axisLength / (this.end - this.start);\r\n\r\n\t\tsuper.validateLayout();\r\n\t\tthis.updateGridCount();\r\n\t\tthis.renderer.updateAxisLine();\r\n\t\tthis.renderer.updateBaseGridElement();\r\n\r\n\t\tif (this._prevLength != this.axisLength) {\r\n\t\t\tthis.dispatchImmediately(\"lengthchanged\");\r\n\t\t\tthis._prevLength = this.axisLength;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Initializes Axis' renderer.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic initRenderer(): void {\r\n\t\tif (this.renderer) {\r\n\t\t\tthis.renderer.processRenderer();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Appends data items.\r\n\t *\r\n\t * Does nothing on a base Axis.\r\n\t */\r\n\tprotected appendDataItems(): void {\r\n\t\t// void\r\n\t}\r\n\r\n\t/**\r\n\t * Adds a data item to the Axis.\r\n\t *\r\n\t * @param {this[\"_dataItem\"]} dataItem Data item\r\n\t */\r\n\tpublic appendDataItem(dataItem: this[\"_dataItem\"]) {\r\n\t\tsuper.appendDataItem(dataItem);\r\n\r\n\t\tlet renderer: AxisRenderer = this.renderer;\r\n\t\tdataItem.tick.parent = renderer;\r\n\t\tdataItem.label.parent = renderer;\r\n\t\tdataItem.grid.parent = renderer.gridContainer;\r\n\t\tdataItem.axisFill.parent = renderer.gridContainer;\r\n\t}\r\n\r\n\t/**\r\n\t * Redraws Axis' related items.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic validate(): void {\r\n\t\tsuper.validate();\r\n\t\tthis.axisFullLength = this.axisLength / (this.end - this.start);\r\n\t\tthis.validateAxisRanges();\r\n\t\tthis.validateBreaks();\r\n\t}\r\n\r\n\t/**\r\n\t * Redars Axis ranges.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic validateAxisRanges(): void {\r\n\t\t$iter.each(this.axisRanges.iterator(), (axisRange) => {\r\n\t\t\tthis.appendDataItem(axisRange);\r\n\t\t\tthis.validateDataElement(axisRange);\r\n\t\t\taxisRange.grid.validate();\r\n\t\t\taxisRange.tick.validate();\r\n\t\t\taxisRange.axisFill.validate();\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Invalidates all axis breaks, so they are redrawn.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic validateBreaks(): void {\r\n\t\t$iter.each(this.axisBreaks.iterator(), (axisBreak) => {\r\n\t\t\taxisBreak.invalidate();\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Associates an Axis break with this Axis, after it is inserted into\r\n\t * `axisBreaks`.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {IListEvents<AxisBreak>[\"inserted\"]} event Event\r\n\t */\r\n\tpublic processBreak(event: IListEvents<AxisBreak>[\"inserted\"]) {\r\n\t\tlet axisBreak: AxisBreak = event.newValue;\r\n\t\taxisBreak.parent = this.renderer.breakContainer;\r\n\t\taxisBreak.axis = this;\r\n\t}\r\n\r\n\t/**\r\n\t * Registers a [[XYSeries]] element with this Axis.\r\n\t *\r\n\t * Returns a [[Disposer]] for all events, added to Series for watching\r\n\t * changes in Axis, and vice versa.\r\n\t * @ignore\r\n\t * @param  {XYSeries}     series  Series\r\n\t * @return {IDisposer}          Event disposer\r\n\t */\r\n\tpublic registerSeries(series: XYSeries): IDisposer {\r\n\t\tthis.series.moveValue(series);\r\n\r\n\t\treturn new MultiDisposer([\r\n\t\t\tnew Disposer(() => {\r\n\t\t\t\tthis.series.removeValue(series);\r\n\t\t\t}),\r\n\r\n\t\t\tthis.events.on(\"lengthchanged\", series.invalidate, series)//,\r\n\r\n\t\t\t// TODO should these be disposed of ?\r\n\t\t\t//series.events.on(\"datavalidated\", this.processSeriesDataItems, this),\r\n\t\t\t//series.events.on(\"visibilitychanged\", this.processSeriesDataItems, this),\r\n\t\t\t//series.events.on(\"hidden\", this.processSeriesDataItems, this)\r\n\t\t]);\r\n\t}\r\n\r\n\t/**\r\n\t * An [[AxisRenderer]] to be used to render this Axis.\r\n\t *\r\n\t * Please note that most of the settings, related to Axis' appearance are set\r\n\t * via its renderer. Not directly on the Axis.\r\n\t *\r\n\t * E.g.:\r\n\t *\r\n\t * ```TypeScript\r\n\t * axis.renderer.inside = true;\r\n\t * axis.renderer.minLabelPosition = 0.1;\r\n\t * axis.renderer.maxLabelPosition = 0.9;\r\n\t * ```\r\n\t * ```JavaScript\r\n\t * axis.renderer.inside = true;\r\n\t * axis.renderer.minLabelPosition = 0.1;\r\n\t * axis.renderer.maxLabelPosition = 0.9;\r\n\t * ```\r\n\t *\r\n\t * @see {@link https://www.amcharts.com/docs/v4/concepts/axes/} for more info\r\n\t * @param {T}  renderer  Renderer\r\n\t */\r\n\tpublic set renderer(renderer: T) {\r\n\t\tthis._renderer = renderer;\r\n\t\trenderer.chart = this.chart;\r\n\t\trenderer.axis = this;\r\n\t\trenderer.parent = this;\r\n\t\tthis.title.parent = this; // we add title to axis and set layout in renderer to avoid one extra container, as otherwise axis container would be used for holding renderer only\r\n\t\tthis.initRenderer();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {T} Renderer\r\n\t */\r\n\tpublic get renderer(): T {\r\n\t\treturn this._renderer;\r\n\t}\r\n\r\n\t/**\r\n\t * Converts a relative position to angle. (for circular axes)\r\n\t *\r\n\t * @param  {number} position Position (0-1)\r\n\t * @return {number}          Angle\r\n\t */\r\n\tpublic positionToAngle(position: number): number {\r\n\t\treturn this.renderer.positionToAngle(position);\r\n\t}\r\n\r\n\t/**\r\n\t * Converts pixel coordinates to a relative position. (0-1)\r\n\t *\r\n\t * @param {IPoint}   point  Coorinates (px)\r\n\t * @return {number}         Position (0-1)\r\n\t */\r\n\tpublic pointToPosition(point: IPoint): number {\r\n\t\treturn this.renderer.pointToPosition(point);\r\n\t}\r\n\r\n\t/**\r\n\t * [getAnyRangePath description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @param  {any}     start  [description]\r\n\t * @param  {any}     end    [description]\r\n\t * @return {string}         [description]\r\n\t */\r\n\tpublic getAnyRangePath(start: any, end: any): string {\r\n\t\treturn this.renderer.getPositionRangePath(start, end);\r\n\t}\r\n\r\n\t/**\r\n\t * Converts any positional parameter to a relative position on axis.\r\n\t *\r\n\t * @todo Description (review)\r\n\t * @param  {any}     value  Pisition\r\n\t * @return {number}         Position (0-1)\r\n\t */\r\n\tpublic anyToPosition(value: any): number {\r\n\t\treturn 0;\r\n\t}\r\n\r\n\t/**\r\n\t * Converts any positional parameter to a relative position on axis.\r\n\t *\r\n\t * @todo Description (review)\r\n\t * @param  {any}     value  Pisition\r\n\t * @return {IOrientationPoint}  Orientation point\r\n\t */\r\n\tpublic anyToPoint(value: any): IOrientationPoint {\r\n\t\treturn { x: 0, y: 0, angle: 0 };\r\n\t}\r\n\r\n\t/**\r\n\t * [getPositionRangePath description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @param  {number} startPosition [description]\r\n\t * @param  {number} endPosition   [description]\r\n\t * @return {string}               [description]\r\n\t */\r\n\tpublic getPositionRangePath(startPosition: number, endPosition: number): string {\r\n\t\treturn this.renderer.getPositionRangePath(startPosition, endPosition);\r\n\t}\r\n\r\n\t/**\r\n\t * Actual axis length in pixels.\r\n\t *\r\n\t * @return {number} Axis length (px)\r\n\t */\r\n\tpublic get axisLength(): number {\r\n\t\treturn this.renderer.axisLength;\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates if axis should display a tooltip for chart's cursor.\r\n\t *\r\n\t * @param {boolean} value Display tooltip?\r\n\t */\r\n\tpublic set cursorTooltipEnabled(value: boolean) {\r\n\t\tthis._cursorTooltipEnabled = value;\r\n\r\n\t\tif (value && this.renderer) {\r\n\t\t\tthis.renderer.updateTooltip();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Display tooltip?\r\n\t */\r\n\tpublic get cursorTooltipEnabled(): boolean {\r\n\t\treturn this._cursorTooltipEnabled;\r\n\t}\r\n\r\n\t/**\r\n\t * Shows Axis tooltip at specific relative position within Axis. (0-1)\r\n\t *\r\n\t * @param {number} position Position (0-1)\r\n\t */\r\n\tpublic showTooltipAtPosition(position: number) {\r\n\r\n\t\tlet tooltip: Tooltip = this._tooltip;\r\n\r\n\t\tposition = this.toAxisPosition(position);\r\n\r\n\t\tlet renderer = this.renderer;\r\n\r\n\t\tif (tooltip) {\r\n\r\n\t\t\t//@todo: think of how to solve this better\r\n\t\t\tif (tooltip && !tooltip.parent) {\r\n\t\t\t\ttooltip.parent = this.tooltipContainer;\r\n\t\t\t}\r\n\r\n\t\t\tlet tooltipLocation = renderer.tooltipLocation;\r\n\r\n\t\t\tlet startPosition: number = this.getCellStartPosition(position);\r\n\t\t\tlet endPosition: number = this.getCellEndPosition(position);\r\n\r\n\t\t\tposition = startPosition + (endPosition - startPosition) * tooltipLocation;\r\n\r\n\t\t\tposition = $math.fitToRange(position, this.start, this.end);\r\n\r\n\t\t\tlet startPoint: IPoint = renderer.positionToPoint(startPosition);\r\n\t\t\tlet endPoint: IPoint = renderer.positionToPoint(endPosition);\r\n\r\n\t\t\t// save values so cursor could use them\r\n\t\t\tthis.currentItemStartPoint = startPoint;\r\n\t\t\tthis.currentItemEndPoint = endPoint;\r\n\r\n\t\t\tif (renderer.fullWidthTooltip) {\r\n\t\t\t\ttooltip.width = endPoint.x - startPoint.x;\r\n\t\t\t\ttooltip.height = endPoint.y - startPoint.y;\r\n\t\t\t}\r\n\r\n\t\t\tlet point: IPoint = renderer.positionToPoint(position);\r\n\t\t\tlet globalPoint: IPoint = $utils.spritePointToSvg(point, this.renderer.line);\r\n\t\t\ttooltip.text = this.getTooltipText(position);\r\n\t\t\ttooltip.pointTo(globalPoint);\r\n\t\t\ttooltip.show();\r\n\r\n\r\n\t\t\tif (!this.cursorTooltipEnabled) {\r\n\t\t\t\ttooltip.hide(0);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Converts relative position (0-1) to Axis position with zoom level and\r\n\t * inversed taken into account.\r\n\t *\r\n\t * @param  {number} position Global position (0-1)\r\n\t * @return {number}          Position within Axis (0-1)\r\n\t */\r\n\tpublic toAxisPosition(position: number): number {\r\n\t\tposition = position * (this.end - this.start);\r\n\t\tif (this.renderer.inversed) {\r\n\t\t\tposition = this.end - position;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tposition = this.start + position;\r\n\t\t}\r\n\r\n\t\treturn position;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns text to be used for cursor's Axis tooltip.\r\n\t *\r\n\t * This is a placeholder to override for extending classes.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {number}  position  Position coordinate (px)\r\n\t * @return {string}            Label text\r\n\t */\r\n\tpublic getTooltipText(position: number): string {\r\n\t\treturn;\r\n\t}\r\n\r\n\t/**\r\n\t * Updates Axis' tooltip's position and possibly size, and pointer (stem)\r\n\t * place.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {PointerOrientation}  pointerOrientation  Pointer (stem) orientation\r\n\t * @param {IRectangle}          boundingRectangle   A rectangle for tooltip to fit within\r\n\t */\r\n\tpublic updateTooltip(pointerOrientation: PointerOrientation, boundingRectangle: IRectangle): void {\r\n\t\tlet tooltip: Tooltip = this._tooltip;\r\n\t\tif (tooltip) {\r\n\t\t\ttooltip.pointerOrientation = pointerOrientation;\r\n\t\t\ttooltip.setBounds($utils.spriteRectToSvg(boundingRectangle, this.renderer.line));\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * [roundPosition description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @param  {number}            position  Relative position\r\n\t * @param  {AxisItemLocation}  location  Location on axis\r\n\t * @return {number}                      Rounded position\r\n\t */\r\n\tpublic roundPosition(position: number, location: AxisItemLocation): number {\r\n\t\treturn position;\r\n\t}\r\n\r\n\t/**\r\n\t * [getCellStartPosition description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @param  {number} position [description]\r\n\t * @return {number}          [description]\r\n\t */\r\n\tpublic getCellStartPosition(position: number): number {\r\n\t\treturn position;\r\n\t}\r\n\r\n\t/**\r\n\t * [getCellEndPosition description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @param  {number} position [description]\r\n\t * @return {number}          [description]\r\n\t */\r\n\tpublic getCellEndPosition(position: number): number {\r\n\t\treturn position;\r\n\t}\r\n\r\n\t/**\r\n\t * A list of axis ranges for this Axis.\r\n\t *\r\n\t * @return {ListTemplate} Axis ranges\r\n\t */\r\n\tpublic get axisRanges(): ListTemplate<this[\"_dataItem\"]> {\r\n\t\tif (!this._axisRanges) {\r\n\t\t\tlet dataItem: AxisDataItem = this.createDataItem();\r\n\t\t\tthis._axisRanges = new ListTemplate<this[\"_dataItem\"]>(dataItem);\r\n\t\t\tthis._axisRanges.events.on(\"inserted\", this.processAxisRange, this);\r\n\t\t\tthis._disposers.push(new ListDisposer(this._axisRanges));\r\n\t\t\tthis._disposers.push(this._axisRanges.template);\r\n\t\t}\r\n\t\treturn this._axisRanges;\r\n\t}\r\n\r\n\t/**\r\n\t * Decorates an axis range after it has been added to the axis range list.\r\n\t *\r\n\t * @param {IListEvents<AxisDataItem>[\"inserted\"]} event Event\r\n\t */\r\n\tprotected processAxisRange(event: IListEvents<AxisDataItem>[\"inserted\"]) {\r\n\t\tlet axisRange: AxisDataItem = event.newValue;\r\n\t\taxisRange.component = this;\r\n\t\taxisRange.isRange = true;\r\n\t}\r\n\r\n\t/**\r\n\t * A list of axis breaks on this Axis.\r\n\t *\r\n\t * @return {SortedListTemplate} Axis breaks.\r\n\t */\r\n\tpublic get axisBreaks(): SortedListTemplate<this[\"_axisBreak\"]> {\r\n\t\tif (!this._axisBreaks) {\r\n\t\t\tthis._axisBreaks = new SortedListTemplate<AxisBreak>(this.createAxisBreak(), (a, b) => {\r\n\t\t\t\treturn $number.order(a.adjustedStartValue, b.adjustedStartValue);\r\n\t\t\t});\r\n\r\n\t\t\tthis._axisBreaks.events.on(\"inserted\", this.processBreak, this);\r\n\t\t\tthis._disposers.push(new ListDisposer(this._axisBreaks));\r\n\t\t}\r\n\t\treturn this._axisBreaks;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a new axis break.\r\n\t *\r\n\t * @return {this[\"_axisBreak\"]} Axis break\r\n\t */\r\n\tprotected createAxisBreak(): this[\"_axisBreak\"] {\r\n\t\treturn new AxisBreak();\r\n\t}\r\n\r\n\t/**\r\n\t * A list of Series currently associated with this Axis.\r\n\t *\r\n\t * @return {List<XYSeries>} Series\r\n\t */\r\n\tpublic get series(): List<XYSeries> {\r\n\t\tif (!this._series) {\r\n\t\t\tthis._series = new List<XYSeries>();\r\n\t\t}\r\n\t\treturn this._series;\r\n\t}\r\n\r\n\t/**\r\n\t * Processes Series' data items.\r\n\t *\r\n\t * This is a placeholder to override for extending classes.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic processSeriesDataItems(): void {\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Processes Series' single data item.\r\n\t *\r\n\t * This is a placeholder to override for extending classes.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {XYSeriesDataItem} dataItem Data item\r\n\t */\r\n\tpublic processSeriesDataItem(dataItem: XYSeriesDataItem): void {\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Post-processes Serie's data items.\r\n\t *\r\n\t * This is a placeholder to override for extending classes.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic postProcessSeriesDataItems(): void {\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Post-processes Serie's single data item.\r\n\t *\r\n\t * This is a placeholder to override for extending classes.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {XYSeriesDataItem} dataItem Data item\r\n\t */\r\n\tpublic postProcessSeriesDataItem(dataItem: XYSeriesDataItem): void {\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\t/**\r\n\t * Updates Axis based on all Series that might influence it.\r\n\t *\r\n\t * Called by Series after Series data is validated.\r\n\t *\r\n\t * This is a placeholder to override for extending classes.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic updateAxisBySeries(): void {\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Hides unused data items.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description (review)\r\n\t */\r\n\tpublic hideUnusedDataItems(): void {\r\n\t\t// hide all unused\r\n\t\tlet dataItemsIterator: $iter.ListIterator<this[\"_dataItem\"]> = this._dataItemsIterator;\r\n\r\n\t\tdataItemsIterator.createNewItems = false;\r\n\r\n\t\t$iter.each(dataItemsIterator.iterator(), (dataItem) => {\r\n\t\t\tdataItem.__disabled = true;\r\n\t\t});\r\n\r\n\t\tdataItemsIterator.clear();\r\n\t\tdataItemsIterator.createNewItems = true;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a Series' data item that corresponds to specific position on Axis.\r\n\t *\r\n\t * This is a placeholder to override for extending classes.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {Series}          series    Series\r\n\t * @param  {number}          position  Position (0-1)\r\n\t * @return {XYSeriesDataItem}            Data item\r\n\t */\r\n\tpublic getSeriesDataItem(series: XYSeries, position: number): XYSeriesDataItem {\r\n\t\treturn;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns an angle that corresponds to specific angle.\r\n\t *\r\n\t * This is a placeholder to override for extending classes.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description (review)\r\n\t * @param  {XYSeriesDataItem}  dataItem  Data item\r\n\t * @param  {string}          key       ???\r\n\t * @param  {number}          location  Location\r\n\t * @param  {string}          stackKey  ???\r\n\t * @return {number}                    Angle\r\n\t */\r\n\tpublic getAngle(dataItem: XYSeriesDataItem, key: string, location?: number, stackKey?: string): number {\r\n\t\treturn;\r\n\t}\r\n\r\n\t/**\r\n\t * [getX description]\r\n\t *\r\n\t * This is a placeholder to override for extending classes.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description (review)\r\n\t * @param  {XYSeriesDataItem} dataItem [description]\r\n\t * @param  {string}         key      [description]\r\n\t * @param  {number}         location [description]\r\n\t * @param  {string}         stackKey [description]\r\n\t * @return {number}                  [description]\r\n\t */\r\n\tpublic getX(dataItem: XYSeriesDataItem, key: string, location?: number, stackKey?: string): number {\r\n\t\treturn;\r\n\t}\r\n\r\n\t/**\r\n\t * [getY description]\r\n\t *\r\n\t * This is a placeholder to override for extending classes.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description (review)\r\n\t * @param  {XYSeriesDataItem} dataItem [description]\r\n\t * @param  {string}         key      [description]\r\n\t * @param  {number}         location [description]\r\n\t * @param  {string}         stackKey [description]\r\n\t * @return {number}                  [description]\r\n\t */\r\n\tpublic getY(dataItem: XYSeriesDataItem, key: string, location?: number, stackKey?: string): number {\r\n\t\treturn;\r\n\t}\r\n\r\n\t/**\r\n\t * [basePoint description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description (review)\r\n\t * @return {IPoint} Base point coordinates\r\n\t */\r\n\tpublic get basePoint(): IPoint {\r\n\t\treturn { x: 0, y: 0 };\r\n\t}\r\n\r\n\t/**\r\n\t * [dataChangeUpdate description]\r\n\t *\r\n\t * This is a placeholder to override for extending classes.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t */\r\n\tpublic dataChangeUpdate(): void {\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Removes axis breaks that fall between `min` and `max` (???)\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description (review)\r\n\t * @param  {number}  min  Start value\r\n\t * @param  {number}  max  End value\r\n\t * @return {number}       Spread o\r\n\t */\r\n\tprotected adjustDifference(min: number, max: number): number {\r\n\t\tlet difference: number = max - min;\r\n\t\tif ($type.isNumber(difference)) {\r\n\t\t\t$iter.eachContinue(this.axisBreaks.iterator(), (axisBreak) => {\r\n\t\t\t\tlet startValue: number = axisBreak.adjustedStartValue;\r\n\t\t\t\tlet endValue: number = axisBreak.adjustedEndValue;\r\n\t\t\t\tif ($type.isNumber(startValue) && $type.isNumber(endValue)) {\r\n\t\t\t\t\t// breaks are sorted, we don't need go further anymore\r\n\t\t\t\t\tif (startValue > max) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (endValue >= min) {\r\n\t\t\t\t\t\tif ($type.isNumber(startValue) && $type.isNumber(endValue)) {\r\n\t\t\t\t\t\t\tlet breakSize: number = axisBreak.breakSize;\r\n\r\n\t\t\t\t\t\t\tlet intersection: IRange = $math.intersection({ start: startValue, end: endValue }, { start: min, end: max });\r\n\r\n\t\t\t\t\t\t\tif (intersection) {\r\n\t\t\t\t\t\t\t\tdifference -= (intersection.end - intersection.start) * (1 - breakSize);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn difference;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if specific value falls within a break.\r\n\t *\r\n\t * Returns [[AxisBreak]] the value falls into.\r\n\t *\r\n\t * @param  {number}     value  Value to check\r\n\t * @return {AxisBreak}         Axis break\r\n\t */\r\n\tprotected isInBreak(value: number): AxisBreak {\r\n\t\treturn $iter.find(this.axisBreaks.iterator(), (axisBreak) =>\r\n\t\t\tvalue >= axisBreak.adjustedStartValue &&\r\n\t\t\tvalue <= axisBreak.adjustedEndValue);\r\n\t}\r\n\r\n\t/**\r\n\t * [fixAxisBreaks description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t */\r\n\tprotected fixAxisBreaks(): void {\r\n\t\tlet axisBreaks: SortedListTemplate<AxisBreak> = this.axisBreaks;\r\n\t\tif (axisBreaks.length > 0) {\r\n\t\t\t// first make sure that startValue is <= end value\r\n\t\t\t// This needs to make a copy of axisBreaks because it mutates the list while traversing\r\n\t\t\t// TODO very inefficient\r\n\t\t\t$array.each($iter.toArray(axisBreaks.iterator()), (axisBreak) => {\r\n\t\t\t\tlet startValue: number = $math.min(axisBreak.startValue, axisBreak.endValue);\r\n\t\t\t\tlet endValue: number = $math.max(axisBreak.startValue, axisBreak.endValue);\r\n\r\n\t\t\t\taxisBreak.adjustedStartValue = startValue;\r\n\t\t\t\taxisBreak.adjustedEndValue = endValue;\r\n\r\n\t\t\t\tthis.axisBreaks.update(axisBreak);\r\n\t\t\t});\r\n\r\n\r\n\t\t\tlet firstAxisBreak: AxisBreak = axisBreaks.first;\r\n\t\t\tlet previousEndValue: number = Math.min(firstAxisBreak.startValue, firstAxisBreak.endValue);\r\n\r\n\t\t\t// process breaks\r\n\t\t\t// TODO does this need to call axisBreaks.update ?\r\n\t\t\t$iter.each(this.axisBreaks.iterator(), (axisBreak) => {\r\n\t\t\t\tlet startValue: number = axisBreak.adjustedStartValue;\r\n\t\t\t\tlet endValue: number = axisBreak.adjustedEndValue;\r\n\r\n\t\t\t\t// breaks can't overlap\r\n\t\t\t\t// if break starts before previous break ends\r\n\t\t\t\tif (startValue < previousEndValue) {\r\n\t\t\t\t\tstartValue = previousEndValue;\r\n\r\n\t\t\t\t\tif (endValue < previousEndValue) {\r\n\t\t\t\t\t\tendValue = previousEndValue;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\taxisBreak.adjustedStartValue = startValue;\r\n\t\t\t\taxisBreak.adjustedEndValue = endValue;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * We need start/end indexes of axes to be 0 - `dataItems.length`.\r\n\t *\r\n\t * Yes, also for category axis, this helps to avoid jumping of categories\r\n\t * while scrolling and does not do a lot of extra work as we use\r\n\t * protected `_startIndex` and `_endIndex` when working with items.\r\n\t *\r\n\t * @hidden\r\n\t */\r\n\r\n\t/**\r\n\t * [startIndex description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @param {number} value [description]\r\n\t */\r\n\tpublic set startIndex(value: number) {\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore Exclude from docs\r\n\t * @return {number} [description]\r\n\t */\r\n\tpublic get startIndex(): number {\r\n\t\treturn 0;\r\n\t}\r\n\r\n\t/**\r\n\t * [endIndex description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @param {number} value [description]\r\n\t */\r\n\tpublic set endIndex(value: number) {\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore Exclude from docs\r\n\t * @return {number} [description]\r\n\t */\r\n\tpublic get endIndex(): number {\r\n\t\treturn this.dataItems.length;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Returns a formatted label based on position.\r\n\t *\r\n\t * Individual axis types should override this method to generate a label\r\n\t * that is relevant to axis type.\r\n\t *\r\n\t * @param  {number}  position  Relative position on axis (0-1)\r\n\t * @return {string}            Position label\r\n\t */\r\n\tpublic getPositionLabel(position: number): string {\r\n\t\treturn Math.round(position * 100) + \"%x\";\r\n\t}\r\n\r\n\t/**\r\n\t * A Chart this Axis belongs to.\r\n\t *\r\n\t * @param {Chart}  value  Chart\r\n\t */\r\n\tpublic set chart(value: Chart) {\r\n\t\tthis._chart = value;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Chart} Chart\r\n\t */\r\n\tpublic get chart(): Chart {\r\n\t\treturn this._chart;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a data item for a Series range.\r\n\t *\r\n\t * @param  {XYSeries}  series  Target Series\r\n\t * @return {this}            Range data item\r\n\t */\r\n\tpublic createSeriesRange(series: XYSeries): this[\"_dataItem\"] {\r\n\t\tlet range = this.createDataItem();\r\n\t\trange.component = this;\r\n\t\tseries.axisRanges.push(range);\r\n\t\treturn range;\r\n\t}\r\n\r\n\t/**\r\n\t * Copies all properties and related data from a different instance of Axis.\r\n\t *\r\n\t * @param {this} source Source Axis\r\n\t */\r\n\tpublic copyFrom(source: this): void {\r\n\t\tsuper.copyFrom(source);\r\n\t\tif (this.renderer) {\r\n\t\t\tthis.renderer.copyFrom(source.renderer);\r\n\t\t}\r\n\t\tif (source.title) {\r\n\t\t\tthis.title = source.title.clone();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Resets internal iterator.\r\n\t */\r\n\tprotected resetIterators(): void {\r\n\t\tthis._dataItemsIterator.reset();\r\n\t}\r\n\r\n\t/**\r\n\t * Processes JSON-based config before it is applied to the object.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {object}  config  Config\r\n\t */\r\n\tpublic processConfig(config?: { [index: string]: any }): void {\r\n\r\n\t\tif (config) {\r\n\r\n\t\t\t// Set up axis ranges\r\n\t\t\tif ($type.hasValue(config.axisRanges) && $type.isArray(config.axisRanges)) {\r\n\t\t\t\tfor (let i = 0, len = config.axisRanges.length; i < len; i++) {\r\n\t\t\t\t\tlet range = config.axisRanges[i];\r\n\r\n\t\t\t\t\t// If `series` is set, we know it's a series range\r\n\t\t\t\t\tif ($type.hasValue(range[\"series\"])) {\r\n\t\t\t\t\t\tif ($type.isString(range[\"series\"])) {\r\n\t\t\t\t\t\t\tif (this.map.hasKey(range[\"series\"])) {\r\n\t\t\t\t\t\t\t\t//range[\"series\"] = this.map.getKey(range[\"series\"]);\r\n\t\t\t\t\t\t\t\tconfig.axisRanges[i] = this.createSeriesRange(this.map.getKey(range[\"series\"]));\r\n\t\t\t\t\t\t\t\tdelete (range[\"series\"]);\r\n\t\t\t\t\t\t\t\tconfig.axisRanges[i].config = range;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tsuper.processConfig(config);\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"Axis\"] = Axis;\r\nregistry.registeredClasses[\"AxisDataItem\"] = AxisDataItem;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/charts/axes/Axis.ts","/**\r\n * Axis break module\r\n */\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\nimport { Container, IContainerProperties, IContainerAdapters, IContainerEvents } from \"../../core/Container\";\r\nimport { Axis, AxisDataItem } from \"./Axis\";\r\nimport { AxisRenderer } from \"./AxisRenderer\";\r\nimport { SpriteEventDispatcher, AMEvent } from \"../../core/Sprite\";\r\nimport { MutableValueDisposer } from \"../../core/utils/Disposer\";\r\nimport { WavedLine } from \"../../core/elements/WavedLine\";\r\nimport { IWavedShape } from \"../../core/defs/IWavedShape\";\r\nimport { List } from \"../../core/utils/List\";\r\nimport { IPoint } from \"../../core/defs/IPoint\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { color } from \"../../core/utils/Color\";\r\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[AxisBreak]].\r\n */\r\nexport interface IAxisBreakProperties extends IContainerProperties {\r\n\r\n\t/**\r\n\t * [number description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\tbreakSize?: number;\r\n\r\n\t/**\r\n\t * Starting value.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tstartValue?: number;\r\n\r\n\t/**\r\n\t * End value.\r\n\t * @type {number}\r\n\t */\r\n\tendValue?: number;\r\n}\r\n\r\n/**\r\n * Defines events for [[AxisBreak]].\r\n */\r\nexport interface IAxisBreakEvents extends IContainerEvents { }\r\n\r\n/**\r\n * Defines [[AxisBreak]] adapters.\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface IAxisBreakAdapters extends IContainerAdapters, IAxisBreakProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Base class to define \"breaks\" on axes.\r\n *\r\n * @see {@link IAxisBreakEvents} for a list of available events\r\n * @see {@link IAxisBreakAdapters} for a list of available Adapters\r\n * @important\r\n */\r\nexport class AxisBreak extends Container {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IAxisBreakProperties}\r\n\t */\r\n\tpublic _properties!: IAxisBreakProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IAxisBreakAdapters}\r\n\t */\r\n\tpublic _adapter!: IAxisBreakAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IAxisBreakEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IAxisBreakEvents;\r\n\r\n\t/**\r\n\t * Defines the type of the Axis this break is used for.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Axis}\r\n\t */\r\n\tpublic _axisType: Axis;\r\n\r\n\t/**\r\n\t * Reference to parent Axis.\r\n\t *\r\n\t * @type {MutableValueDisposer}\r\n\t */\r\n\tprotected _axis = new MutableValueDisposer<this[\"_axisType\"]>();\r\n\r\n\t/**\r\n\t * A reference to starting line element.\r\n\t *\r\n\t * @type {IWavedShape}\r\n\t */\r\n\tprotected _startLine: IWavedShape;\r\n\r\n\t/**\r\n\t * A reference to ending line element.\r\n\t *\r\n\t * @type {IWavedShape}\r\n\t */\r\n\tprotected _endLine: IWavedShape;\r\n\r\n\t/**\r\n\t * A reference to fill shape.\r\n\t *\r\n\t * @type {IWavedShape}\r\n\t */\r\n\tprotected _fillShape: IWavedShape;\r\n\r\n\t/**\r\n\t * A list of axis data items which fall within this break.\r\n\t *\r\n\t * @type {List<AxisDataItem>}\r\n\t */\r\n\tpublic dataItems: List<AxisDataItem> = new List<AxisDataItem>();\r\n\r\n\t/**\r\n\t * Adjusted start value.\r\n\t *\r\n\t * Start and end values need to be adjusted so that they do not overlap with\r\n\t * adjacent breaks.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tpublic adjustedStartValue: number;\r\n\r\n\t/**\r\n\t * Adjusted end value.\r\n\t *\r\n\t * Start and end values need to be adjusted so that they do not overlap with\r\n\t * adjacent breaks.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tpublic adjustedEndValue: number;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\r\n\t\t// Init\r\n\t\tsuper();\r\n\t\tthis.className = \"AxisBreak\";\r\n\r\n\t\t// Set defaults\r\n\t\tthis.breakSize = 0.01;\r\n\t\tthis.marginLeft = -5;\r\n\t\tthis.marginRight = -5;\r\n\t\tthis.marginTop = -5;\r\n\t\tthis.marginBottom = -5;\r\n\r\n\t\tlet interfaceColors = new InterfaceColorSet();\r\n\r\n\t\t// Create elements\r\n\t\t// (these won't be used actually, just for setting properties)\r\n\t\tlet fillShape = new WavedLine();\r\n\t\tfillShape.fill = interfaceColors.getFor(\"background\");\r\n\t\tfillShape.stroke = color();\r\n\t\tfillShape.fillOpacity = 0.9;\r\n\t\tfillShape.zIndex = 0;\r\n\t\tthis._fillShape = fillShape;\r\n\r\n\t\tlet startLine = new WavedLine();\r\n\t\tstartLine.fill = color();\r\n\t\tstartLine.stroke = interfaceColors.getFor(\"grid\");\r\n\t\tstartLine.strokeOpacity = 0.3;\r\n\t\tstartLine.zIndex = 1;\r\n\t\tthis._startLine = startLine;\r\n\r\n\t\tlet endLine = new WavedLine();\r\n\t\tendLine.fill = color();\r\n\t\tendLine.stroke = color(\"#000000\");// interfaceColors.getFor(\"grid\");\r\n\t\tendLine.strokeOpacity = 0.3;\r\n\t\tendLine.zIndex = 2;\r\n\t\tthis._endLine = endLine;\r\n\r\n\t\tthis._disposers.push(this._axis);\r\n\r\n\t\t// Apply theme\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * An element used for the starting line of the break.\r\n\t *\r\n\t * @param {IWavedShape}  sprite  Element\r\n\t */\r\n\tpublic set startLine(sprite: IWavedShape) {\r\n\t\tif (this._startLine) {\r\n\t\t\tthis._startLine.dispose();\r\n\t\t}\r\n\t\tthis._startLine = sprite;\r\n\t\tthis.addBreakSprite(sprite);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {IWavedShape} Element\r\n\t */\r\n\tpublic get startLine(): IWavedShape {\r\n\t\treturn this._startLine;\r\n\t}\r\n\r\n\t/**\r\n\t * An element used for the end line of the break.\r\n\t *\r\n\t * @param {IWavedShape} sprite Element\r\n\t */\r\n\tpublic set endLine(sprite: IWavedShape) {\r\n\t\tif (this._endLine) {\r\n\t\t\tthis._endLine.dispose();\r\n\t\t}\r\n\t\tthis._endLine = sprite;\r\n\t\tthis.addBreakSprite(sprite);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {IWavedShape} Element\r\n\t */\r\n\tpublic get endLine(): IWavedShape {\r\n\t\treturn this._endLine;\r\n\t}\r\n\r\n\t/**\r\n\t * An element used for fill of the break.\r\n\t *\r\n\t * @param {IWavedShape} sprite Element\r\n\t */\r\n\tpublic set fillShape(sprite: IWavedShape) {\r\n\t\tif (this._fillShape) {\r\n\t\t\tthis._fillShape.dispose();\r\n\t\t}\r\n\r\n\t\tthis._fillShape = sprite;\r\n\t\tthis.addBreakSprite(sprite);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {IWavedShape} Element\r\n\t */\r\n\tpublic get fillShape(): IWavedShape {\r\n\t\treturn this._fillShape;\r\n\t}\r\n\r\n\t/**\r\n\t * Adds a break element (e.g. lines, fill) to the break, which is\r\n\t * [[Container]].\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {IWavedShape} sprite Element to add\r\n\t */\r\n\tpublic addBreakSprite(sprite: IWavedShape) {\r\n\t\tsprite.parent = this;\r\n\t\tsprite.isMeasured = false;\r\n\t\tthis._disposers.push(sprite);\r\n\t}\r\n\r\n\t/**\r\n\t * An Axis this Break is associated with.\r\n\t *\r\n\t * @param {Axis}  axis  Axis\r\n\t */\r\n\tpublic set axis(axis: this[\"_axisType\"]) {\r\n\t\tif (this._axis.get() !== axis) {\r\n\t\t\tthis._axis.set(axis, axis.renderer.gridContainer.events.on(\"transformed\", this.invalidate, this));\r\n\t\t\taxis.renderer.createBreakSprites(this);\r\n\r\n\t\t\t// this can't go to copyFrom, as axis is set later\r\n\t\t\tlet breakTemplate: AxisBreak = axis.axisBreaks.template;\r\n\r\n\t\t\tthis.startLine.copyFrom(breakTemplate.startLine);\r\n\t\t\tthis.endLine.copyFrom(breakTemplate.endLine);\r\n\t\t\tthis.fillShape.copyFrom(breakTemplate.fillShape);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Axis} Axis\r\n\t */\r\n\tpublic get axis(): this[\"_axisType\"] {\r\n\t\treturn this._axis.get();\r\n\t}\r\n\r\n\t/**\r\n\t * [breakSize description]\r\n\t *\r\n\t * @todo Description\r\n\t * @param {number} value [description]\r\n\t */\r\n\tpublic set breakSize(value: number) {\r\n\t\tif (this.setPropertyValue(\"breakSize\", value)) {\r\n\t\t\tif (this.axis) {\r\n\t\t\t\tthis.axis.invalidateDataRange();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} [description]\r\n\t */\r\n\tpublic get breakSize(): number {\r\n\t\treturn this.getPropertyValue(\"breakSize\");\r\n\t}\r\n\r\n\t/**\r\n\t * Returns pixel coordinates of axis break's start.\r\n\t *\r\n\t * @return {IPoint} Start point\r\n\t */\r\n\tpublic get startPoint(): IPoint {\r\n\t\tlet renderer: AxisRenderer = this.axis.renderer;\r\n\t\tif (renderer) {\r\n\t\t\treturn renderer.positionToPoint(this.startPosition);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns pixel coordinates of axis break's end.\r\n\t *\r\n\t * @return {IPoint} End point\r\n\t */\r\n\tpublic get endPoint(): IPoint {\r\n\t\tlet renderer: AxisRenderer = this.axis.renderer;\r\n\t\tif (renderer) {\r\n\t\t\treturn renderer.positionToPoint(this.endPosition);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a relative position at which axis break starts.\r\n\t *\r\n\t * This is a calculated position, meaning it shows relative position of the\r\n\t * break after break is applied.\r\n\t *\r\n\t * @return {number} Start position\r\n\t */\r\n\tpublic get startPosition(): number {\r\n\t\treturn;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a relative position at which axis break ends.\r\n\t *\r\n\t * This is a calculated position, meaning it shows relative position of the\r\n\t * break after break is applied.\r\n\t *\r\n\t * @return {number} End position\r\n\t */\r\n\tpublic get endPosition(): number {\r\n\t\treturn;\r\n\t}\r\n\r\n\t/**\r\n\t * Draws the axis break.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic draw(): void {\r\n\t\tsuper.draw();\r\n\t\tif (this.axis) {\r\n\t\t\tlet renderer: AxisRenderer = this.axis.renderer;\r\n\t\t\trenderer.updateBreakElement(this);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * A starting value for the break.\r\n\t *\r\n\t * @param {number}  value  Starting value\r\n\t */\r\n\tpublic set startValue(value: number) {\r\n\t\tif (this.setPropertyValue(\"startValue\", value)) {\r\n\t\t\tif (this.axis) {\r\n\t\t\t\tthis.axis.invalidateDataRange();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Starting value\r\n\t */\r\n\tpublic get startValue(): number {\r\n\t\treturn this.getPropertyValue(\"startValue\");\r\n\t}\r\n\r\n\t/**\r\n\t * An end value for the break.\r\n\t *\r\n\t * @param {number}  value  End value\r\n\t */\r\n\tpublic set endValue(value: number) {\r\n\t\tif (this.setPropertyValue(\"endValue\", value)) {\r\n\t\t\tif (this.axis) {\r\n\t\t\t\tthis.axis.invalidateDataRange();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} End value\r\n\t */\r\n\tpublic get endValue(): number {\r\n\t\treturn this.getPropertyValue(\"endValue\");\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"AxisBreak\"] = AxisBreak;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/charts/axes/AxisBreak.ts","/**\r\n * FlowDiagramNode module\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Container, IContainerProperties, IContainerAdapters, IContainerEvents } from \"../../core/Container\";\r\nimport { SpriteEventDispatcher, AMEvent } from \"../../core/Sprite\";\r\nimport { FlowDiagram, FlowDiagramDataItem } from \"../types/FlowDiagram\";\r\nimport { List } from \"../../core/utils/List\";\r\nimport { LabelBullet } from \"./LabelBullet\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { Color } from \"../../core/utils/Color\";\r\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\nimport * as $string from \"../../core/utils/String\";\r\nimport * as $order from \"../../core/utils/Order\";\r\nimport * as $number from \"../../core/utils/Number\";\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[FlowDiagramNode]].\r\n */\r\nexport interface IFlowDiagramNodeProperties extends IContainerProperties {\r\n\r\n\t/**\r\n\t * Name of the node.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tname?: string;\r\n\r\n\t/**\r\n\t * Node's numeric value.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tvalue?: number;\r\n\r\n\t/**\r\n\t * Node's color.\r\n\t *\r\n\t * @type {Color}\r\n\t */\r\n\tcolor?: Color;\r\n\r\n}\r\n\r\n/**\r\n * Defines events for [[FlowDiagramNode]].\r\n */\r\nexport interface IFlowDiagramNodeEvents extends IContainerEvents { }\r\n\r\n/**\r\n * Defines adapters for [[FlowDiagramNode]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface IFlowDiagramNodeAdapters extends IContainerAdapters, IFlowDiagramNodeProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Creates a node in a Flow Diagram.\r\n *\r\n * A Flow node is a block with a value, which represents its size on the\r\n * diagram.\r\n *\r\n * Nodes are connected via [[FlowLink]] elements.\r\n *\r\n * @see {@link IFlowDiagramNodeEvents} for a list of available events\r\n * @see {@link IFlowDiagramNodeAdapters} for a list of available Adapters\r\n * @important\r\n */\r\nexport class FlowDiagramNode extends Container {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IFlowDiagramNodeProperties}\r\n\t */\r\n\tpublic _properties!: IFlowDiagramNodeProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IFlowDiagramNodeAdapters}\r\n\t */\r\n\tpublic _adapter!: IFlowDiagramNodeAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IFlowDiagramNodeEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IFlowDiagramNodeEvents;\r\n\r\n\t/**\r\n\t * A list of data items of the items coming in from another node, one level\r\n\t * up.\r\n\t *\r\n\t * These are what ingoing links are build out of.\r\n\t *\r\n\t * @type {List<this[\"_dataItem\"]>}\r\n\t */\r\n\tprotected _incomingDataItems: List<this[\"_dataItem\"]>;\r\n\r\n\t/**\r\n\t * A list of data items of the items going out of the node.\r\n\t *\r\n\t * These are what outgoing links are build out of.\r\n\t *\r\n\t * @type {List<this[\"_dataItem\"]>}\r\n\t */\r\n\tprotected _outgoingDataItems: List<this[\"_dataItem\"]>;\r\n\r\n\t/**\r\n\t * Sorted list of incoming items.\r\n\t *\r\n\t * @type {Iterator<this[\"_dataItem\"]>}\r\n\t */\r\n\tprotected _incomingSorted: $iter.Iterator<this[\"_dataItem\"]>;\r\n\r\n\t/**\r\n\t * Sorted list of outgoing items.\r\n\t * @type {Iterator<this[\"_dataItem\"]>}\r\n\t */\r\n\tprotected _outgoingSorted: $iter.Iterator<this[\"_dataItem\"]>;\r\n\r\n\t/**\r\n\t * A chart instance this node is added to.\r\n\t *\r\n\t * @type {FlowDiagram}\r\n\t */\r\n\tpublic chart: FlowDiagram;\r\n\r\n\r\n\t/**\r\n\t * Defines the type of the [[FlowDiagramDataItem]] used in the class.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {FlowDiagramDataItem}\r\n\t */\r\n\tpublic _dataItem: FlowDiagramDataItem;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"FlowDiagramNode\";\r\n\r\n\t\tthis.isMeasured = false;\r\n\r\n\t\tlet interfaceColors = new InterfaceColorSet();\r\n\r\n\t\tthis.background.fill = interfaceColors.getFor(\"alternativeBackground\");\r\n\t\tthis.background.fillOpacity = 1;\r\n\r\n\t\tthis.pixelPerfect = false;\r\n\t\tthis.background.pixelPerfect = false;\r\n\r\n\t\tthis.draggable = true;\r\n\t\tthis.inert = true;\r\n\r\n\t\tthis.events.on(\"positionchanged\", this.invalidateLinks, this);\r\n\t\tthis.events.on(\"sizechanged\", this.invalidateLinks, this);\r\n\t}\r\n\r\n\t/**\r\n\t * Marks node as invalid, for redrawal in the next update cycle.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic validate(): void {\r\n\t\tsuper.validate();\r\n\t\tthis.invalidateLinks();\r\n\t}\r\n\r\n\t/**\r\n\t * Invalidates all links, attached to this node.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic invalidateLinks(): void {\r\n\r\n\t\tthis.outgoingDataItems.each((dataItem)=>{\r\n\t\t\tlet link = dataItem.link;\r\n\t\t\tif(link.colorMode == \"fromNode\"){\r\n\t\t\t\tlink.fill = link.dataItem.fromNode.color;\r\n\t\t\t}\r\n\r\n\t\t\tif (link.colorMode == \"gradient\") {\r\n\r\n\t\t\t\tlink.fill = link.gradient;\r\n\t\t\t\tlink.stroke = link.gradient;\r\n\r\n\t\t\t\tlet stop = link.gradient.stops.getIndex(0);\r\n\r\n\t\t\t\tif (stop) {\r\n\t\t\t\t\tstop.color = this.color;\r\n\t\t\t\t\tlink.gradient.validate();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.incomingDataItems.each((dataItem)=>{\r\n\t\t\tlet link = dataItem.link;\r\n\t\t\tif(link.colorMode == \"toNode\"){\r\n\t\t\t\tlink.fill = link.dataItem.toNode.color;\r\n\t\t\t}\r\n\r\n\t\t\tif (link.colorMode == \"gradient\") {\r\n\r\n\t\t\t\tlink.fill = link.gradient;\r\n\t\t\t\tlink.stroke = link.gradient;\r\n\r\n\t\t\t\tlet stop = link.gradient.stops.getIndex(1);\r\n\r\n\t\t\t\tif (stop) {\r\n\t\t\t\t\tstop.color = this.color;\r\n\t\t\t\t\tlink.gradient.validate();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * List of incoming items (links).\r\n\t *\r\n\t * @readonly\r\n\t * @return {List<FlowDiagramDataItem>} Incoming items\r\n\t */\r\n\tpublic get incomingDataItems(): List<FlowDiagramDataItem> {\r\n\t\tif (!this._incomingDataItems) {\r\n\t\t\tlet incomingDataItems = new List<FlowDiagramDataItem>();\r\n\t\t\tincomingDataItems.events.on(\"inserted\", () => {\r\n\t\t\t\tif (this.chart.sortBy == \"name\") {\r\n\t\t\t\t\tthis._incomingSorted = $iter.sort(this._incomingDataItems.iterator(), (x, y) => $string.order(x.fromName, y.fromName));\r\n\t\t\t\t}\r\n\t\t\t\telse if (this.chart.sortBy == \"value\") {\r\n\t\t\t\t\tthis._incomingSorted = $iter.sort(this._incomingDataItems.iterator(), (x, y) => $order.reverse($number.order(x.value, y.value)));\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis._incomingSorted = this._incomingDataItems.iterator();\r\n\t\t\t\t}\r\n\t\t\t}, this);\r\n\t\t\tthis._incomingDataItems = incomingDataItems;\r\n\t\t}\r\n\t\treturn this._incomingDataItems;\r\n\t}\r\n\r\n\t/**\r\n\t * List of outgoing items (links).\r\n\t *\r\n\t * @readonly\r\n\t * @return {List<FlowDiagramDataItem>} Outgoing items\r\n\t */\r\n\tpublic get outgoingDataItems(): List<FlowDiagramDataItem> {\r\n\t\tif (!this._outgoingDataItems) {\r\n\t\t\tlet outgoingDataItems = new List<FlowDiagramDataItem>();\r\n\t\t\toutgoingDataItems.events.on(\"inserted\", () => {\r\n\t\t\t\tif (this.chart.sortBy == \"name\") {\r\n\t\t\t\t\tthis._outgoingSorted = $iter.sort(this._outgoingDataItems.iterator(), (x, y) => $string.order(x.fromName, y.fromName));\r\n\t\t\t\t}\r\n\t\t\t\telse if (this.chart.sortBy == \"value\") {\r\n\t\t\t\t\tthis._outgoingSorted = $iter.sort(this._outgoingDataItems.iterator(), (x, y) => $order.reverse($number.order(x.value, y.value)));\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis._outgoingSorted = this._outgoingDataItems.iterator();\r\n\t\t\t\t}\r\n\r\n\t\t\t}, this);\r\n\t\t\tthis._outgoingDataItems = outgoingDataItems;\r\n\t\t}\r\n\t\treturn this._outgoingDataItems;\r\n\t}\r\n\r\n\t/**\r\n\t * A name of the node.\r\n\t *\r\n\t * @param {string}  value  Name\r\n\t */\r\n\tpublic set name(value: string) {\r\n\t\tthis.setPropertyValue(\"name\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {string} Name\r\n\t */\r\n\tpublic get name(): string {\r\n\t\treturn this.getPropertyValue(\"name\");\r\n\t}\r\n\r\n\t/**\r\n\t * Node's numeric value.\r\n\t *\r\n\t * @param {number}  value  Value\r\n\t */\r\n\tpublic set value(value: number) {\r\n\t\tthis.setPropertyValue(\"value\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Value\r\n\t */\r\n\tpublic get value(): number {\r\n\t\treturn this.getPropertyValue(\"value\");\r\n\t}\r\n\r\n\t/**\r\n\t * Node's color.\r\n\t *\r\n\t * @param {Color}  value  Color\r\n\t */\r\n\tpublic set color(value: Color) {\r\n\t\tthis.setPropertyValue(\"color\", value, true);\r\n\t\tthis.background.fill = value;\r\n\t\tthis.fill = value;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Color} Color\r\n\t */\r\n\tpublic get color(): Color {\r\n\t\treturn this.getPropertyValue(\"color\");\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"FlowDiagramNode\"] = FlowDiagramNode;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/charts/elements/FlowDiagramNode.ts","/**\r\n * FlowDiagramLink module\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Sprite, SpriteEventDispatcher, AMEvent } from \"../../core/Sprite\";\r\nimport { Container, IContainerProperties, IContainerEvents, IContainerAdapters } from \"../../core/Container\";\r\nimport { FlowDiagramDataItem } from \"../types/FlowDiagram\";\r\nimport { LinearGradient } from \"../../core/rendering/fills/LinearGradient\";\r\nimport { RadialGradient } from \"../../core/rendering/fills/RadialGradient\";\r\nimport { Pattern } from \"../../core/rendering/fills/Pattern\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { Bullet } from \"../elements/Bullet\";\r\nimport { Color, color } from \"../../core/utils/Color\";\r\nimport { ListTemplate, ListDisposer } from \"../../core/utils/List\";\r\nimport { Polyline } from \"../../core/elements/Polyline\";\r\nimport { Line } from \"../../core/elements/Line\";\r\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\r\nimport * as $math from \"../../core/utils/Math\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport * as $smoothing from \"../../core/rendering/Smoothing\";\r\nimport * as $path from \"../../core/rendering/Path\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[FlowDiagramLink]].\r\n */\r\nexport interface IFlowDiagramLinkProperties extends IContainerProperties {\r\n\r\n\t/**\r\n\t * [tension description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\ttension?: number;\r\n\r\n\t/**\r\n\t * [startX description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\tstartX?: number;\r\n\r\n\t/**\r\n\t * [startY description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\tstartY?: number;\r\n\r\n\t/**\r\n\t * [endX description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\tendX?: number;\r\n\r\n\t/**\r\n\t * [endY description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\tendY?: number;\r\n\r\n\t/**\r\n\t * [linkWidth description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\tlinkWidth?: number;\r\n\r\n\t/**\r\n\t * [startAngle description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\tstartAngle?: number;\r\n\r\n\t/**\r\n\t * [endAngle description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\tendAngle?: number;\r\n\r\n\t/**\r\n\t * Should link be filled with a solid color, color of from node, color of toNode or gradient between node colors.\r\n\t *\r\n\t * @type {\"solid\" | \"gradient\" | \"fromNode\" | \"toNode\"}\r\n\t */\r\n\tcolorMode?: \"solid\" | \"gradient\" | \"fromNode\" | \"toNode\";\r\n\r\n\t/**\r\n\t * [controlPointDistance description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\tcontrolPointDistance?: number;\r\n\r\n\t/**\r\n\t * [maskBullets description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {boolean}\r\n\t */\r\n\tmaskBullets?: boolean;\r\n\r\n\t/**\r\n\t * [tooltipLocation description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\ttooltipLocation?: number;\r\n}\r\n\r\n/**\r\n * Defines events for [[FlowDiagramLink]].\r\n */\r\nexport interface IFlowDiagramLinkEvents extends IContainerEvents { }\r\n\r\n/**\r\n * Defines adapters for [[FlowDiagramLink]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface IFlowDiagramLinkAdapters extends IContainerAdapters, IFlowDiagramLinkProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * This class creates a link (waved color-filled line) between two nodes in a\r\n * Flow Diagram.\r\n *\r\n * @see {@link IFlowDiagramLinkEvents} for a list of available events\r\n * @see {@link IFlowDiagramLinkAdapters} for a list of available Adapters\r\n * @important\r\n */\r\nexport class FlowDiagramLink extends Container {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IFlowDiagramLinkProperties}\r\n\t */\r\n\tpublic _properties!: IFlowDiagramLinkProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IFlowDiagramLinkAdapters}\r\n\t */\r\n\tpublic _adapter!: IFlowDiagramLinkAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IFlowDiagramLinkEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IFlowDiagramLinkEvents;\r\n\r\n\t/**\r\n\t * Defines a type of data item used by this class.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {FlowDiagramDataItem}\r\n\t */\r\n\tpublic _dataItem: FlowDiagramDataItem;\r\n\r\n\t/**\r\n\t * A gradiend instance that is used to provided colored gradient fills for\r\n\t * the Flow link.\r\n\t *\r\n\t * @type {LinearGradient}\r\n\t */\r\n\tpublic gradient: LinearGradient = new LinearGradient();\r\n\r\n\r\n\t/**\r\n\t * List of bullets\r\n\t * @ignore\r\n\t */\r\n\tprotected _bullets: ListTemplate<Bullet>;\r\n\r\n\t/**\r\n\t * Link sprite\r\n\t *\r\n\t * @type {Sprite}\r\n\t */\r\n\tpublic link: Sprite;\r\n\r\n\t/**\r\n\t * Bullets mask spite\r\n\t * @type Sprite\r\n     */\r\n\tpublic bulletsMask: Sprite;\r\n\r\n\t/**\r\n\t * Bullets container\r\n\t * @type Container\r\n     */\r\n\tpublic bulletsContainer: Container;\r\n\r\n\t/**\r\n\t * Spline which goes through the middle of a link, used to calculate bullet and tooltip positions, invisible by default\r\n\t * @type Polyspline\r\n     */\r\n\tpublic middleLine: Line | Polyline;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"FlowDiagramLink\";\r\n\r\n\t\tlet interfaceColors = new InterfaceColorSet();\r\n\r\n\t\tthis.maskBullets = false;\r\n\r\n\t\tthis.colorMode = \"fromNode\";\r\n\r\n\t\tthis.layout = \"none\";\r\n\t\tthis.isMeasured = false;\r\n\r\n\t\tthis.startAngle = 0;\r\n\t\tthis.endAngle = 0;\r\n\r\n\t\tthis.strokeOpacity = 0;\r\n\r\n\t\t// this is very important, otherwise the container will be shifted\r\n\t\tthis.verticalCenter = \"none\";\r\n\t\tthis.horizontalCenter = \"none\";\r\n\r\n\t\tthis.tooltipText = \"{fromName}{toName}:{value.value}\";\r\n\t\tthis.tooltipLocation = 0.5;\r\n\r\n\t\tthis.link = this.createChild(Sprite);\r\n\t\tthis.link.shouldClone = false;\r\n\t\tthis.link.element = this.paper.add(\"path\");\r\n\t\tthis.fillOpacity = 0.2;\r\n\t\tthis.fill = interfaceColors.getFor(\"alternativeBackground\");\r\n\r\n\t\tthis.bulletsContainer = this.createChild(Container);\r\n\t\tthis.bulletsContainer.shouldClone = false;\r\n\t\tthis.bulletsContainer.layout = \"none\";\r\n\r\n\t\tthis.bulletsMask = this.createChild(Sprite);\r\n\t\tthis.bulletsMask.shouldClone = false;\r\n\t\tthis.bulletsMask.element = this.paper.add(\"path\");\r\n\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Positions bullets\r\n\t * @ignore\r\n\t */\r\n\tprotected positionBullets() {\r\n\t\t$iter.each(this.bullets.iterator(), (bullet) => {\r\n\t\t\tbullet.parent = this.bulletsContainer;\r\n\t\t\tthis.positionBullet(bullet);\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * Positions bullets at relative bullet.locationX position on the link.\r\n\t * @ignore\r\n\t */\r\n\tprotected positionBullet(bullet: Bullet) {\r\n\t\tlet location = bullet.locationX;\r\n\r\n\t\tif (!$type.isNumber(location)) {\r\n\t\t\tlocation = bullet.locationY;\r\n\t\t}\r\n\r\n\t\tif (!$type.isNumber(location)) {\r\n\t\t\tlocation = 0.5;\r\n\t\t}\r\n\t\tlet point = this.middleLine.positionToPoint(location);\r\n\r\n\t\tbullet.moveTo(point);\r\n\r\n\t\tlet rotationField = bullet.propertyFields.rotation;\r\n\t\tlet angle: number;\r\n\t\tif (bullet.dataItem) {\r\n\t\t\tlet dataContext: any = bullet.dataItem.dataContext;\r\n\t\t\tangle = dataContext[rotationField];\r\n\t\t}\r\n\t\tif (!$type.isNumber(angle)) {\r\n\t\t\tangle = point.angle;\r\n\t\t}\r\n\t\tbullet.rotation = angle;\r\n\t}\r\n\r\n\t/**\r\n\t * [startAngle description]\r\n\t *\r\n\t * @todo Description\r\n\t * @param {number}  value  Start angle\r\n\t */\r\n\tpublic set startAngle(value: number) {\r\n\t\tthis.setPropertyValue(\"startAngle\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Start angle\r\n\t */\r\n\tpublic get startAngle(): number {\r\n\t\treturn this.getPropertyValue(\"startAngle\");\r\n\t}\r\n\r\n\t/**\r\n\t * [endAngle description]\r\n\t *\r\n\t * @todo Description\r\n\t * @param {number}  value  End angle\r\n\t */\r\n\tpublic set endAngle(value: number) {\r\n\t\tthis.setPropertyValue(\"endAngle\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} End angle\r\n\t */\r\n\tpublic get endAngle(): number {\r\n\t\treturn this.getPropertyValue(\"endAngle\");\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Should link be filled with a solid color, color of from node, color of toNode or gradient between node colors.\r\n\t * Some of the links, like ChordLink does not support gradiens well.\r\n\t *\r\n\t * @param {\"solid\" | \"gradient\" | \"fromNode\" | \"toNode\"}  value  Fill mode\r\n\t */\r\n\tpublic set colorMode(value: \"solid\" | \"gradient\" | \"fromNode\" | \"toNode\") {\r\n\t\tif (value == \"gradient\") {\r\n\t\t\tthis.fill = this.gradient;\r\n\t\t\tthis.stroke = this.gradient;\r\n\t\t}\r\n\t\tthis.setPropertyValue(\"colorMode\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @type {\"solid\" | \"gradient\"} Fill mode\r\n\t */\r\n\tpublic get colorMode(): \"solid\" | \"gradient\" | \"fromNode\" | \"toNode\" {\r\n\t\treturn this.getPropertyValue(\"colorMode\");\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Should link bullets be masked or not\r\n\t *\r\n\t * @param {boolean}  value\r\n\t * @default false;\r\n\t */\r\n\tpublic set maskBullets(value: boolean) {\r\n\t\tthis.setPropertyValue(\"maskBullets\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} mask bullets value\r\n\t */\r\n\tpublic get maskBullets(): boolean {\r\n\t\treturn this.getPropertyValue(\"maskBullets\");\r\n\t}\r\n\r\n\t/**\r\n\t * Relative location of a tooltip.\r\n\t * @default 0.5\r\n\t *\r\n\t * @param {number} value\r\n\t */\r\n\tpublic set tooltipLocation(value: number) {\r\n\t\tthis.setPropertyValue(\"tooltipLocation\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @type {number} tooltip location value\r\n\t */\r\n\tpublic get tooltipLocation(): number {\r\n\t\treturn this.getPropertyValue(\"tooltipLocation\");\r\n\t}\r\n\r\n\t/**\r\n\t * Adds color steps in the link gradient.\r\n\t *\r\n\t * @param {Color | Pattern | LinearGradient | RadialGradient}  value  Fill option\r\n\t */\r\n\tprotected setFill(value: Color | Pattern | LinearGradient | RadialGradient) {\r\n\t\tsuper.setFill(value)\r\n\t\tif (value instanceof Color) {\r\n\t\t\tthis.gradient.stops.clear();\r\n\t\t\tthis.gradient.addColor(value);\r\n\t\t\tthis.gradient.addColor(value);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Updates bounding box based on element dimension settings.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic measureElement(): void {\r\n\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * List of bullets\r\n\t *\r\n\t * @return {ListTemplate<Bullet>} [description]\r\n\t */\r\n\tpublic get bullets(): ListTemplate<Bullet> {\r\n\t\tif (!this._bullets) {\r\n\t\t\tthis._bullets = new ListTemplate<Bullet>(new Bullet());\r\n\t\t\tthis._disposers.push(new ListDisposer(this._bullets));\r\n\t\t\tthis._disposers.push(this._bullets.template);\r\n\t\t\tthis._bullets.events.on(\"inserted\", (event) => {\r\n\t\t\t\tevent.newValue.events.on(\"propertychanged\", (event) => {\r\n\t\t\t\t\tif (event.property == \"locationX\" || event.property == \"locationY\") {\r\n\t\t\t\t\t\tthis.positionBullet(event.target);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn this._bullets;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Copies properties from another [[FlowDiagramLink]].\r\n\t *\r\n\t * @param {FlowDiagramLink}  source  Source link\r\n\t */\r\n\tcopyFrom(source: this) {\r\n\t\tsuper.copyFrom(source);\r\n\t\tthis.bullets.copyFrom(source.bullets);\r\n\t\tlet middleLine = this.middleLine;\r\n\t\tif(middleLine){\r\n\t\t\tif (middleLine instanceof Line && source.middleLine instanceof Line) {\r\n\t\t\t\tmiddleLine.copyFrom(source.middleLine);\r\n\t\t\t}\r\n\r\n\t\t\tif (middleLine instanceof Polyline && source.middleLine instanceof Polyline) {\r\n\t\t\t\tmiddleLine.copyFrom(source.middleLine);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.link.copyFrom(source.link);\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore Exclude from docs\r\n\t * @return {number} Tooltip X (px)\r\n\t */\r\n\tgetTooltipX(): number {\r\n\t\tif (this.middleLine) {\r\n\t\t\treturn this.middleLine.positionToPoint(this.tooltipLocation).x;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore Exclude from docs\r\n\t * @return {number} Tooltip Y (px)\r\n\t */\r\n\tgetTooltipY(): number {\r\n\t\tif (this.middleLine) {\r\n\t\t\treturn this.middleLine.positionToPoint(this.tooltipLocation).y;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"FlowDiagramLink\"] = FlowDiagramLink;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/charts/elements/FlowDiagramLink.ts","/**\r\n * Polyspline (smoothed line) module.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Polyline, IPolylineProperties, IPolylineAdapters, IPolylineEvents } from \"./Polyline\";\r\nimport { SpriteEventDispatcher, AMEvent } from \"../Sprite\";\r\nimport { IPoint } from \"../../core/defs/IPoint\";\r\nimport { registry } from \"../Registry\";\r\nimport * as $math from \"../../core/utils/Math\";\r\nimport * as $path from \"../../core/rendering/Path\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[Polyspline]].\r\n */\r\nexport interface IPolysplineProperties extends IPolylineProperties {\r\n\r\n\t/**\r\n\t * Horizontal tension for the spline.\r\n\t *\r\n\t * Used by the line smoothing algorithm.\r\n\t *\r\n\t * @default 0.5\r\n\t * @type {number}\r\n\t */\r\n\ttensionX: number;\r\n\r\n\t/**\r\n\t * Vertical tension for the spline.\r\n\t *\r\n\t * Used by the line smoothing algorithm.\r\n\t *\r\n\t * @default 0.5\r\n\t * @type {number}\r\n\t */\r\n\ttensionY: number;\r\n\r\n}\r\n\r\n/**\r\n * Defines events for [[Polyspline]].\r\n */\r\nexport interface IPolysplineEvents extends IPolylineEvents { }\r\n\r\n/**\r\n * Defines adapters\r\n * Includes both the [[Adapter]] definitions and properties\r\n * @see {@link Adapter}\r\n */\r\nexport interface IPolysplineAdapters extends IPolylineAdapters, IPolysplineProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Draws a polysline. (smoothed multi-sigment line)\r\n *\r\n * @see {@link IPolysplineEvents} for a list of available events\r\n * @see {@link IPolysplineAdapters} for a list of available Adapters\r\n */\r\nexport class Polyspline extends Polyline {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @todo Description\r\n\t * @type {IPolysplineProperties}\r\n\t */\r\n\tpublic _properties!: IPolysplineProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @todo Description\r\n\t * @type {IPolysplineAdapters}\r\n\t */\r\n\tpublic _adapter!: IPolysplineAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IPolysplineEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IPolysplineEvents;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"Polyspline\";\r\n\r\n\t\tthis.tensionX = 0.5;\r\n\t\tthis.tensionY = 0.5;\r\n\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Creats and adds an SVG path for the arc.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic makePath(): void {\r\n\t\tthis._distance = 0;\r\n\t\tlet segments = this.segments;\r\n\r\n\t\tlet tensionX: number = this.tensionX;\r\n\t\tlet tensionY: number = this.tensionY;\r\n\r\n\t\tif (segments && segments.length > 0) {\r\n\t\t\tlet path: string = \"\";\r\n\t\t\tthis._realSegments = [];\r\n\r\n\t\t\tfor (let i = 0; i < segments.length; i++) {\r\n\t\t\t\tlet points: IPoint[] = segments[i];\r\n\t\t\t\tlet realPoints: IPoint[] = [];\r\n\t\t\t\tthis._realSegments.push(realPoints);\r\n\r\n\t\t\t\tif (points.length > 0) {\r\n\r\n\t\t\t\t\tpath += $path.moveTo(points[0]);\r\n\r\n\t\t\t\t\tfor (let p = 0; p < points.length - 1; p++) {\r\n\r\n\t\t\t\t\t\tlet p0: IPoint = points[p - 1];\r\n\r\n\t\t\t\t\t\tlet p1: IPoint = points[p];\r\n\r\n\t\t\t\t\t\tlet p2: IPoint = points[p + 1];\r\n\r\n\t\t\t\t\t\tlet p3: IPoint = points[p + 2];\r\n\r\n\t\t\t\t\t\tif (p === 0) {\r\n\t\t\t\t\t\t\tp0 = points[p];\r\n\t\t\t\t\t\t} else if (p == points.length - 2) {\r\n\t\t\t\t\t\t\tp3 = points[p + 1];\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (!p3) {\r\n\t\t\t\t\t\t\tp3 = p2;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tlet controlPointA: IPoint = $math.getCubicControlPointA(p0, p1, p2, p3, tensionX, tensionY);\r\n\t\t\t\t\t\tlet controlPointB: IPoint = $math.getCubicControlPointB(p0, p1, p2, p3, tensionX, tensionY);\r\n\r\n\t\t\t\t\t\tpath += $path.cubicCurveTo(p2, controlPointA, controlPointB);\r\n\r\n\t\t\t\t\t\t// now split to small segments so that we could have positionToPoint later\r\n\t\t\t\t\t\tlet stepCount: number = Math.ceil($math.getDistance(p1, p2)) / 2;\r\n\t\t\t\t\t\tlet prevPoint: IPoint = p1;\r\n\t\t\t\t\t\tfor (let s = 0; s <= stepCount; s++) {\r\n\t\t\t\t\t\t\tlet point = $math.getPointOnCubicCurve(p1, p2, controlPointA, controlPointB, s / stepCount);\r\n\t\t\t\t\t\t\trealPoints.push(point);\r\n\t\t\t\t\t\t\tthis._distance += $math.getDistance(prevPoint, point);\r\n\t\t\t\t\t\t\t//path += $path.lineTo(point);\r\n\t\t\t\t\t\t\tprevPoint = point;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.element.attr({ \"d\": path });\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Horizontal tension for the spline.\r\n\t *\r\n\t * Used by the line smoothing algorithm.\r\n\t *\r\n\t * @default 0.5\r\n\t * @param {number}  value  Tension\r\n\t */\r\n\tpublic set tensionX(value: number) {\r\n\t\tthis.setPropertyValue(\"tensionX\", value);\r\n\t\tthis.makePath();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Tension\r\n\t */\r\n\tpublic get tensionX(): number {\r\n\t\treturn this.getPropertyValue(\"tensionX\");\r\n\t}\r\n\r\n\t/**\r\n\t * Vertical tension for the spline.\r\n\t *\r\n\t * Used by the line smoothing algorithm.\r\n\t *\r\n\t * @default 0.5\r\n\t * @param {number}  value  Tensions\r\n\t */\r\n\tpublic set tensionY(value: number) {\r\n\t\tthis.setPropertyValue(\"tensionY\", value, true);\r\n\t\tthis.makePath();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Tension\r\n\t */\r\n\tpublic get tensionY(): number {\r\n\t\treturn this.getPropertyValue(\"tensionY\");\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"Polyspline\"] = Polyspline;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/elements/Polyspline.ts","/**\r\n * Functionality for drawing triangles.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Sprite, ISpriteProperties, ISpriteAdapters, ISpriteEvents, SpriteEventDispatcher, AMEvent } from \"../Sprite\";\r\nimport { registry } from \"../Registry\";\r\nimport * as $path from \"../rendering/Path\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[Triangle]].\r\n */\r\nexport interface ITriangleProperties extends ISpriteProperties {\r\n\tdirection: \"left\" | \"right\" | \"top\" | \"bottom\"\r\n}\r\n\r\n/**\r\n * Defines events for [[Triangle]].\r\n */\r\nexport interface ITriangleEvents extends ISpriteEvents { }\r\n\r\n/**\r\n * Defines adapters for [[Triangle]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface ITriangleAdapters extends ISpriteAdapters, ITriangleProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Used to draw a triangle.\r\n *\r\n * @see {@link ITriangleEvents} for a list of available events\r\n * @see {@link ITriangleAdapters} for a list of available Adapters\r\n */\r\nexport class Triangle extends Sprite {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ITriangleProperties}\r\n\t */\r\n\tpublic _properties!: ITriangleProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ITriangleAdapters}\r\n\t */\r\n\tpublic _adapter!: ITriangleAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {ITriangleEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: ITriangleEvents;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"Triangle\";\r\n\t\tthis.element = this.paper.add(\"path\");\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Draws the element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic draw(): void {\r\n\t\tsuper.draw();\r\n\t\tlet w: number = this.pixelWidth;\r\n\t\tlet h: number = this.pixelHeight;\r\n\r\n\t\tlet path: string;\r\n\r\n\r\n\r\n\t\tswitch (this.direction) {\r\n\t\t\tcase \"right\":\r\n\t\t\t\tpath = $path.moveTo({ x: 0, y: 0 })\r\n\t\t\t\t\t+ $path.lineTo({ x: w, y: h / 2 })\r\n\t\t\t\t\t+ $path.lineTo({ x: 0, y: h })\r\n\t\t\t\t\t+ $path.closePath();\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"left\":\r\n\t\t\t\tpath = $path.moveTo({ x: w, y: 0 })\r\n\t\t\t\t\t+ $path.lineTo({ x: 0, y: h / 2 })\r\n\t\t\t\t\t+ $path.lineTo({ x: w, y: h })\r\n\t\t\t\t\t+ $path.closePath();\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"bottom\":\r\n\t\t\t\tpath = $path.moveTo({ x: 0, y: 0 })\r\n\t\t\t\t\t+ $path.lineTo({ x: w, y: 0 })\r\n\t\t\t\t\t+ $path.lineTo({ x: w / 2, y: h })\r\n\t\t\t\t\t+ $path.closePath();\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"top\":\r\n\t\t\t\tpath = $path.moveTo({ x: w / 2, y: 0 })\r\n\t\t\t\t\t+ $path.lineTo({ x: w, y: h })\r\n\t\t\t\t\t+ $path.lineTo({ x: 0, y: h })\r\n\t\t\t\t\t+ $path.closePath();\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tthis.element.attr({ \"d\": path });\r\n\t}\r\n\r\n\t/**\r\n\t * Sets direction of a triangle\r\n\t *\r\n\t * @param {\"left\" | \"right\" | \"top\" | \"bottom\"} value\r\n\t */\r\n\tpublic set direction(value: \"left\" | \"right\" | \"top\" | \"bottom\") {\r\n\t\tthis.setPropertyValue(\"direction\", value, true);\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Returns direction of a triangle\r\n\t *\r\n\t * @return {\"left\" | \"right\" | \"top\" | \"bottom\"} value\r\n\t */\r\n\tpublic get direction(): \"left\" | \"right\" | \"top\" | \"bottom\" {\r\n\t\treturn this.getPropertyValue(\"direction\");\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"Triangle\"] = Triangle;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/elements/Triangle.ts","var global = require('./_global');\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function (key) {\n  return store[key] || (store[key] = {});\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_shared.js\n// module id = 128\n// module chunks = 26","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject');\nvar toLength = require('./_to-length');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_array-includes.js\n// module id = 129\n// module chunks = 26","exports.f = Object.getOwnPropertySymbols;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_object-gops.js\n// module id = 130\n// module chunks = 26","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg) {\n  return cof(arg) == 'Array';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_is-array.js\n// module id = 131\n// module chunks = 26","// 7.2.8 IsRegExp(argument)\nvar isObject = require('./_is-object');\nvar cof = require('./_cof');\nvar MATCH = require('./_wks')('match');\nmodule.exports = function (it) {\n  var isRegExp;\n  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : cof(it) == 'RegExp');\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_is-regexp.js\n// module id = 132\n// module chunks = 26","var ITERATOR = require('./_wks')('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function () { SAFE_CLOSING = true; };\n  // eslint-disable-next-line no-throw-literal\n  Array.from(riter, function () { throw 2; });\n} catch (e) { /* empty */ }\n\nmodule.exports = function (exec, skipClosing) {\n  if (!skipClosing && !SAFE_CLOSING) return false;\n  var safe = false;\n  try {\n    var arr = [7];\n    var iter = arr[ITERATOR]();\n    iter.next = function () { return { done: safe = true }; };\n    arr[ITERATOR] = function () { return iter; };\n    exec(arr);\n  } catch (e) { /* empty */ }\n  return safe;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_iter-detect.js\n// module id = 133\n// module chunks = 26","'use strict';\n// 21.2.5.3 get RegExp.prototype.flags\nvar anObject = require('./_an-object');\nmodule.exports = function () {\n  var that = anObject(this);\n  var result = '';\n  if (that.global) result += 'g';\n  if (that.ignoreCase) result += 'i';\n  if (that.multiline) result += 'm';\n  if (that.unicode) result += 'u';\n  if (that.sticky) result += 'y';\n  return result;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_flags.js\n// module id = 134\n// module chunks = 26","'use strict';\nvar hide = require('./_hide');\nvar redefine = require('./_redefine');\nvar fails = require('./_fails');\nvar defined = require('./_defined');\nvar wks = require('./_wks');\n\nmodule.exports = function (KEY, length, exec) {\n  var SYMBOL = wks(KEY);\n  var fns = exec(defined, SYMBOL, ''[KEY]);\n  var strfn = fns[0];\n  var rxfn = fns[1];\n  if (fails(function () {\n    var O = {};\n    O[SYMBOL] = function () { return 7; };\n    return ''[KEY](O) != 7;\n  })) {\n    redefine(String.prototype, KEY, strfn);\n    hide(RegExp.prototype, SYMBOL, length == 2\n      // 21.2.5.8 RegExp.prototype[@@replace](string, replaceValue)\n      // 21.2.5.11 RegExp.prototype[@@split](string, limit)\n      ? function (string, arg) { return rxfn.call(string, this, arg); }\n      // 21.2.5.6 RegExp.prototype[@@match](string)\n      // 21.2.5.9 RegExp.prototype[@@search](string)\n      : function (string) { return rxfn.call(string, this); }\n    );\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_fix-re-wks.js\n// module id = 135\n// module chunks = 26","// 7.3.20 SpeciesConstructor(O, defaultConstructor)\nvar anObject = require('./_an-object');\nvar aFunction = require('./_a-function');\nvar SPECIES = require('./_wks')('species');\nmodule.exports = function (O, D) {\n  var C = anObject(O).constructor;\n  var S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_species-constructor.js\n// module id = 136\n// module chunks = 26","'use strict';\nvar global = require('./_global');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar redefineAll = require('./_redefine-all');\nvar meta = require('./_meta');\nvar forOf = require('./_for-of');\nvar anInstance = require('./_an-instance');\nvar isObject = require('./_is-object');\nvar fails = require('./_fails');\nvar $iterDetect = require('./_iter-detect');\nvar setToStringTag = require('./_set-to-string-tag');\nvar inheritIfRequired = require('./_inherit-if-required');\n\nmodule.exports = function (NAME, wrapper, methods, common, IS_MAP, IS_WEAK) {\n  var Base = global[NAME];\n  var C = Base;\n  var ADDER = IS_MAP ? 'set' : 'add';\n  var proto = C && C.prototype;\n  var O = {};\n  var fixMethod = function (KEY) {\n    var fn = proto[KEY];\n    redefine(proto, KEY,\n      KEY == 'delete' ? function (a) {\n        return IS_WEAK && !isObject(a) ? false : fn.call(this, a === 0 ? 0 : a);\n      } : KEY == 'has' ? function has(a) {\n        return IS_WEAK && !isObject(a) ? false : fn.call(this, a === 0 ? 0 : a);\n      } : KEY == 'get' ? function get(a) {\n        return IS_WEAK && !isObject(a) ? undefined : fn.call(this, a === 0 ? 0 : a);\n      } : KEY == 'add' ? function add(a) { fn.call(this, a === 0 ? 0 : a); return this; }\n        : function set(a, b) { fn.call(this, a === 0 ? 0 : a, b); return this; }\n    );\n  };\n  if (typeof C != 'function' || !(IS_WEAK || proto.forEach && !fails(function () {\n    new C().entries().next();\n  }))) {\n    // create collection constructor\n    C = common.getConstructor(wrapper, NAME, IS_MAP, ADDER);\n    redefineAll(C.prototype, methods);\n    meta.NEED = true;\n  } else {\n    var instance = new C();\n    // early implementations not supports chaining\n    var HASNT_CHAINING = instance[ADDER](IS_WEAK ? {} : -0, 1) != instance;\n    // V8 ~  Chromium 40- weak-collections throws on primitives, but should return false\n    var THROWS_ON_PRIMITIVES = fails(function () { instance.has(1); });\n    // most early implementations doesn't supports iterables, most modern - not close it correctly\n    var ACCEPT_ITERABLES = $iterDetect(function (iter) { new C(iter); }); // eslint-disable-line no-new\n    // for early implementations -0 and +0 not the same\n    var BUGGY_ZERO = !IS_WEAK && fails(function () {\n      // V8 ~ Chromium 42- fails only with 5+ elements\n      var $instance = new C();\n      var index = 5;\n      while (index--) $instance[ADDER](index, index);\n      return !$instance.has(-0);\n    });\n    if (!ACCEPT_ITERABLES) {\n      C = wrapper(function (target, iterable) {\n        anInstance(target, C, NAME);\n        var that = inheritIfRequired(new Base(), target, C);\n        if (iterable != undefined) forOf(iterable, IS_MAP, that[ADDER], that);\n        return that;\n      });\n      C.prototype = proto;\n      proto.constructor = C;\n    }\n    if (THROWS_ON_PRIMITIVES || BUGGY_ZERO) {\n      fixMethod('delete');\n      fixMethod('has');\n      IS_MAP && fixMethod('get');\n    }\n    if (BUGGY_ZERO || HASNT_CHAINING) fixMethod(ADDER);\n    // weak collections should not contains .clear method\n    if (IS_WEAK && proto.clear) delete proto.clear;\n  }\n\n  setToStringTag(C, NAME);\n\n  O[NAME] = C;\n  $export($export.G + $export.W + $export.F * (C != Base), O);\n\n  if (!IS_WEAK) common.setStrong(C, NAME, IS_MAP);\n\n  return C;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_collection.js\n// module id = 137\n// module chunks = 26","var global = require('./_global');\nvar hide = require('./_hide');\nvar uid = require('./_uid');\nvar TYPED = uid('typed_array');\nvar VIEW = uid('view');\nvar ABV = !!(global.ArrayBuffer && global.DataView);\nvar CONSTR = ABV;\nvar i = 0;\nvar l = 9;\nvar Typed;\n\nvar TypedArrayConstructors = (\n  'Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array'\n).split(',');\n\nwhile (i < l) {\n  if (Typed = global[TypedArrayConstructors[i++]]) {\n    hide(Typed.prototype, TYPED, true);\n    hide(Typed.prototype, VIEW, true);\n  } else CONSTR = false;\n}\n\nmodule.exports = {\n  ABV: ABV,\n  CONSTR: CONSTR,\n  TYPED: TYPED,\n  VIEW: VIEW\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_typed.js\n// module id = 138\n// module chunks = 26","'use strict';\n// Forced replacement prototype accessors methods\nmodule.exports = require('./_library') || !require('./_fails')(function () {\n  var K = Math.random();\n  // In FF throws only define methods\n  // eslint-disable-next-line no-undef, no-useless-call\n  __defineSetter__.call(null, K, function () { /* empty */ });\n  delete require('./_global')[K];\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_object-forced-pam.js\n// module id = 139\n// module chunks = 26","'use strict';\n// https://tc39.github.io/proposal-setmap-offrom/\nvar $export = require('./_export');\n\nmodule.exports = function (COLLECTION) {\n  $export($export.S, COLLECTION, { of: function of() {\n    var length = arguments.length;\n    var A = new Array(length);\n    while (length--) A[length] = arguments[length];\n    return new this(A);\n  } });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_set-collection-of.js\n// module id = 140\n// module chunks = 26","'use strict';\n// https://tc39.github.io/proposal-setmap-offrom/\nvar $export = require('./_export');\nvar aFunction = require('./_a-function');\nvar ctx = require('./_ctx');\nvar forOf = require('./_for-of');\n\nmodule.exports = function (COLLECTION) {\n  $export($export.S, COLLECTION, { from: function from(source /* , mapFn, thisArg */) {\n    var mapFn = arguments[1];\n    var mapping, A, n, cb;\n    aFunction(this);\n    mapping = mapFn !== undefined;\n    if (mapping) aFunction(mapFn);\n    if (source == undefined) return new this();\n    A = [];\n    if (mapping) {\n      n = 0;\n      cb = ctx(mapFn, arguments[2], 2);\n      forOf(source, false, function (nextItem) {\n        A.push(cb(nextItem, n++));\n      });\n    } else {\n      forOf(source, false, A.push, A);\n    }\n    return new this(A);\n  } });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_set-collection-from.js\n// module id = 141\n// module chunks = 26","/**\r\n * [[Chart]] class provides base functionality for all chart types to inherit.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Component, IComponentProperties, IComponentDataFields, IComponentEvents, IComponentAdapters } from \"../core/Component\";\r\nimport { SpriteEventDispatcher, AMEvent } from \"../core/Sprite\";\r\nimport { registry } from \"../core/Registry\";\r\nimport { ListTemplate, IListEvents, ListDisposer } from \"../core/utils/List\";\r\nimport { Container } from \"../core/Container\";\r\nimport { Label } from \"../core/elements/Label\";\r\nimport { Legend } from \"../charts/Legend\";\r\nimport { DataItem } from \"../core/DataItem\";\r\nimport { percent } from \"../core/utils/Percent\";\r\nimport * as $iter from \"../core/utils/Iterator\";\r\nimport * as $type from \"../core/utils/Type\";\r\n\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines a [[DataItem]] for [[Chart]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nexport class ChartDataItem extends DataItem {\r\n\r\n\t/**\r\n\t * Defines a type of [[Component]] this data item is used for.\r\n\t *\r\n\t * @type {Chart}\r\n\t */\r\n\tpublic _component!: Chart;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"ChartDataItem\";\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines data fields for [[Chart]].\r\n */\r\nexport interface IChartDataFields extends IComponentDataFields { }\r\n\r\n/**\r\n * Defines properties for [[Chart]].\r\n */\r\nexport interface IChartProperties extends IComponentProperties { }\r\n\r\n/**\r\n * Defines events for [[Chart]].\r\n */\r\nexport interface IChartEvents extends IComponentEvents { }\r\n\r\n/**\r\n * Defines adapters for [[Chart]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface IChartAdapters extends IComponentAdapters, IChartProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * A base class for all Charts.\r\n *\r\n * @see {@link IChartEvents} for a list of available Events\r\n * @see {@link IChartAdapters} for a list of available Adapters\r\n */\r\nexport class Chart extends Component {\r\n\r\n\t/**\r\n\t * Available data fields.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IChartDataFields}\r\n\t */\r\n\tpublic _dataFields: IChartDataFields;\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IChartProperties}\r\n\t */\r\n\tpublic _properties!: IChartProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IChartAdapters}\r\n\t */\r\n\tpublic _adapter!: IChartAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IChartEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IChartEvents;\r\n\r\n\t/**\r\n\t * A List of chart titles.\r\n\t *\r\n\t * @type {List<Label>}\r\n\t */\r\n\tpublic titles: ListTemplate<Label>;\r\n\r\n\t/**\r\n\t * Container that holds the chart itself.\r\n\t *\r\n\t * @type {Container}\r\n\t */\r\n\tpublic chartContainer: Container;\r\n\r\n\t/**\r\n\t * A reference to a container that holds both the chart and the legend.\r\n\t *\r\n\t * @type {Container}\r\n\t */\r\n\tpublic chartAndLegendContainer: Container;\r\n\r\n\t/**\r\n\t * A reference to chart's [[Legend]].\r\n\t * @ignore\r\n\t * @type {Legend}\r\n\t */\r\n\tprotected _legend: Legend;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\r\n\t\t// Init\r\n\t\tsuper();\r\n\t\tthis.className = \"Chart\";\r\n\r\n\t\t// Create a list of titles\r\n\t\tconst template = new Label();\r\n\t\tthis.titles = new ListTemplate<Label>(template);\r\n\t\tthis._disposers.push(new ListDisposer(this.titles));\r\n\t\tthis._disposers.push(template);\r\n\r\n\t\t// Chart component is also a container. it holds _chartAndLegendCont and titles\r\n\t\tthis.width = percent(100);\r\n\t\tthis.height = percent(100);\r\n\t\tthis.layout = \"vertical\";\r\n\r\n\t\t// Chart and legend\r\n\t\tlet chartAndLegendContainer: Container = this.createChild(Container);\r\n\t\tchartAndLegendContainer.shouldClone = false;\r\n\t\tchartAndLegendContainer.layout = \"vertical\";\r\n\t\tchartAndLegendContainer.width = percent(100);\r\n\t\tchartAndLegendContainer.height = percent(100);\r\n\t\tthis.chartAndLegendContainer = chartAndLegendContainer;\r\n\r\n\t\t// Chart container holds all the elements of a chart, extept titles and legend\r\n\t\tlet chartContainer = chartAndLegendContainer.createChild(Container);\r\n\t\tchartContainer.shouldClone = false;\r\n\t\tchartContainer.width = percent(100);\r\n\t\tchartContainer.height = percent(100);\r\n\t\tthis.chartContainer = chartContainer;\r\n\r\n\t\t// hides everything on first frame and shows only on second. helps to avoid technical flickering\r\n\t\tchartAndLegendContainer.visible = false;\r\n\r\n\t\tchartAndLegendContainer.events.once(\"validated\", () => {\r\n\t\t\tregistry.events.once(\"enterframe\", () => {\r\n\t\t\t\tchartAndLegendContainer.visible = true;\r\n\t\t\t})\r\n\t\t})\r\n\r\n\t\t// Add title list events to apply certain formatting options and to make\r\n\t\t// the chart reference them as accessible screen reader labels\r\n\t\tthis.titles.events.on(\"inserted\", (label) => {\r\n\t\t\tthis.processTitle(label);\r\n\t\t\tthis.updateReaderTitleReferences();\r\n\t\t}, this);\r\n\t\tthis.titles.events.on(\"removed\", (label) => {\r\n\t\t\tthis.updateReaderTitleReferences();\r\n\t\t}, this);\r\n\r\n\t\t// Accessibility\r\n\t\t// It seems we can't set focusable on the whole chart because it seems to\r\n\t\t// mess up the whole focus event system - getting a focus on an inside\r\n\t\t// object also trigger focus on parent\r\n\t\t//this.focusable = true;\r\n\t\tthis.role = \"region\";\r\n\r\n\t\t// Apply theme\r\n\t\tthis.applyTheme();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets defaults that instantiate some objects that rely on parent, so they\r\n\t * cannot be set in constructor.\r\n\t */\r\n\tprotected applyInternalDefaults(): void {\r\n\t\tsuper.applyInternalDefaults();\r\n\t\tif (!$type.hasValue(this.readerTitle)) {\r\n\t\t\tthis.readerTitle = this.language.translate(\"Chart\");\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Initiates drawing of the chart.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic draw(): void {\r\n\t\tthis.fixLayout();\r\n\t\tsuper.draw();\r\n\t}\r\n\r\n\t/**\r\n\t * Updates legend's hierarchy based on the position.\r\n\t */\r\n\tprotected fixLayout(): void {\r\n\t\tlet legend = this.legend;\r\n\t\tif (legend) {\r\n\t\t\tlet chartAndLegendContainer = this.chartAndLegendContainer;\r\n\t\t\tswitch (legend.position) {\r\n\t\t\t\tcase \"left\":\r\n\t\t\t\t\tchartAndLegendContainer.layout = \"horizontal\";\r\n\t\t\t\t\tif(!$type.isNumber(legend.width)){\r\n\t\t\t\t\t\tlegend.width = 200;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//legend.maxWidth = legend.width;\r\n\t\t\t\t\tlegend.toBack();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"right\":\r\n\t\t\t\t\tchartAndLegendContainer.layout = \"horizontal\";\r\n\t\t\t\t\tif(!$type.isNumber(legend.width)){\r\n\t\t\t\t\t\tlegend.width = 200;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//legend.maxWidth = legend.width;\r\n\r\n\t\t\t\t\tlegend.toFront();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"top\":\r\n\t\t\t\t\tchartAndLegendContainer.layout = \"vertical\";\r\n\t\t\t\t\tlegend.maxWidth = undefined;\r\n\t\t\t\t\tlegend.toBack();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"bottom\":\r\n\t\t\t\t\tchartAndLegendContainer.layout = \"vertical\";\r\n\t\t\t\t\tlegend.maxWidth = undefined;\r\n\t\t\t\t\tlegend.toFront();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Setups the legend to use the chart's data.\r\n\t */\r\n\tprotected feedLegend(): void {\r\n\r\n\t\t// Nothing here. This method is provided only as a \"placeholder\" for\r\n\t\t// extending classes to override\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Adds a new title to the chart when it is inserted into chart's titles\r\n\t * list.\r\n\t * @param  {IListEvents<Label>[\"inserted\"]}  event  An event object which is triggered when inserting into titles list\r\n\t * @return {Label}                               Label object\r\n\t */\r\n\tprotected processTitle(event: IListEvents<Label>[\"inserted\"]): Label {\r\n\t\tlet title: Label = event.newValue;\r\n\t\ttitle.parent = this;\r\n\t\ttitle.toBack();\r\n\t\ttitle.align = \"center\";\r\n\r\n\t\t// Need to explicitly apply the `id` attribute so it can be referenced by\r\n\t\t// `aria-labelledby`\r\n\t\ttitle.uidAttr();\r\n\t\treturn title;\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if chart has any title elements. If it does, we will use them in an\r\n\t * `aria-labelledby` attribute so that screen readers can use them to properly\r\n\t * describe the chart when it is focused or hovered.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic updateReaderTitleReferences(): void {\r\n\t\tif (this.titles.length) {\r\n\t\t\tlet titleIds: Array<string> = [];\r\n\t\t\t$iter.each(this.titles.iterator(), (title) => {\r\n\t\t\t\ttitleIds.push(title.uid);\r\n\t\t\t});\r\n\t\t\tthis.setSVGAttribute({ \"aria-labelledby\": titleIds.join(\" \") });\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.removeSVGAttribute(\"aria-labelledby\");\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Holds the instance of chart's [[Leged]].\r\n\t *\r\n\t * @see {@link https://www.amcharts.com/docs/v4/concepts/legend/} for more information about legends\r\n\t * @param {Legend} Legend\r\n\t */\r\n\tpublic set legend(legend: Legend) {\r\n\t\tthis.setLegend(legend);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Legend} Legend\r\n\t */\r\n\tpublic get legend(): Legend {\r\n\t\treturn this._legend;\r\n\t}\r\n\r\n\t/**\r\n\t * Prepares the legend instance for use in this chart.\r\n\t *\r\n\t * @param {Legend}  legend  Legend\r\n\t */\r\n\tprotected setLegend(legend: Legend) {\r\n\t\tif (this._legend != legend) {\r\n\r\n\t\t\tif (this._legend) {\r\n\t\t\t\tthis.removeDispose(this._legend);\r\n\t\t\t}\r\n\r\n\t\t\tthis._legend = legend;\r\n\r\n\t\t\tif (legend) {\r\n\t\t\t\tthis._disposers.push(legend);\r\n\t\t\t\t// Set legend options\r\n\t\t\t\tlegend.parent = this.chartAndLegendContainer;\r\n\t\t\t\tlegend.events.on(\"propertychanged\", (event) => {\r\n\t\t\t\t\tif (event.property == \"position\" || event.property == \"width\") {\r\n\t\t\t\t\t\tthis.fixLayout();\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tthis.feedLegend();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Processes JSON-based config before it is applied to the object.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {object}  config  Config\r\n\t */\r\n\tpublic processConfig(config?: { [index: string]: any }): void {\r\n\r\n\t\tif (config) {\r\n\r\n\t\t\t// Set up legend\r\n\t\t\tif ($type.hasValue(config.legend) && !$type.hasValue(config.legend.type)) {\r\n\t\t\t\tconfig.legend.type = \"Legend\";\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tsuper.processConfig(config);\r\n\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../src/.internal/charts/Chart.ts","/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Sprite, ISpriteProperties, ISpriteAdapters, ISpriteEvents, SpriteEventDispatcher, AMEvent } from \"../../core/Sprite\";\r\nimport { IDisposer, MutableValueDisposer } from \"../../core/utils/Disposer\";\r\nimport { Axis, AxisItemLocation, AxisDataItem } from \"./Axis\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\r\nimport * as $type from \"../../core/utils/Type\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[AxisFill]].\r\n */\r\nexport interface IAxisFillProperties extends ISpriteProperties {\r\n\r\n\t/**\r\n\t * Start position. (0-1)\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tstartPosition?: number;\r\n\r\n\t/**\r\n\t * End position. (0-1)\r\n\t * @type {number}\r\n\t */\r\n\tendPosition?: number;\r\n\r\n\t/**\r\n\t * Location within the axis.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tlocation?: number;\r\n}\r\n\r\n/**\r\n * Defines events for [[AxisFill]].\r\n */\r\nexport interface IAxisFillEvents extends ISpriteEvents { }\r\n\r\n/**\r\n * Defines adapters for [[AxisFill]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface IAxisFillAdapters extends ISpriteAdapters, IAxisFillProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * AxisFill is a base class used to defines fill shapes for various\r\n * type-specific Axes.\r\n *\r\n * Axis fills are used to add fills to specific ranges of those axes.\r\n *\r\n * @see {@link IAxisFillEvents} for a list of available events\r\n * @see {@link IAxisFillAdapters} for a list of available Adapters\r\n * @important\r\n */\r\nexport class AxisFill extends Sprite {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IAxisFillProperties}\r\n\t */\r\n\tpublic _properties!: IAxisFillProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IAxisFillAdapters}\r\n\t */\r\n\tpublic _adapter!: IAxisFillAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IAxisFillEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IAxisFillEvents;\r\n\r\n\t/**\r\n\t * A referecent to Axis element this fill is applied to.\r\n\t *\r\n\t * @type {Axis}\r\n\t */\r\n\tpublic axis: Axis;\r\n\r\n\t/**\r\n\t * An SVG path, used to draw fill shape.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description (review)\r\n\t * @type {string}\r\n\t */\r\n\tpublic fillPath: string;\r\n\r\n\t/**\r\n\t * [_dataItem description]\r\n\t *\r\n\t * Not sure what this is doing here?\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @type {AxisDataItem}\r\n\t */\r\n\tpublic _dataItem: AxisDataItem;\r\n\r\n\t/**\r\n\t * Constructor.\r\n\t *\r\n\t * @param {Axis} axis Axis\r\n\t */\r\n\tconstructor(axis: Axis) {\r\n\t\tsuper();\r\n\t\tthis.axis = axis;\r\n\t\tthis.element = this.paper.add(\"path\");\r\n\r\n\t\tthis.className = \"AxisFill\";\r\n\t\tthis.isMeasured = false;\r\n\r\n\t\tthis.location = 0;\r\n\r\n\t\tlet interfaceColors = new InterfaceColorSet();\r\n\r\n\t\tthis.fill = interfaceColors.getFor(\"alternativeBackground\");\r\n\t\tthis.fillOpacity = 0;\r\n\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Draws the fill element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic draw(): void {\r\n\t\tsuper.draw();\r\n\t\tif (this.axis && $type.isNumber(this.startPosition) && $type.isNumber(this.endPosition)) {\r\n\t\t\tthis.fillPath = this.axis.getPositionRangePath(this.startPosition, this.endPosition);\r\n\t\t\tthis.element.attr({ \"d\": this.fillPath });\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * An actual starting position of the fill.\r\n\t *\r\n\t * @param {number}  value  Starting position\r\n\t */\r\n\tpublic set startPosition(value: number) {\r\n\t\tthis.setPropertyValue(\"startPosition\", value);\r\n\t\tthis.invalidate(); // this is needed as relative position might not change when zooming\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Start position\r\n\t */\r\n\tpublic get startPosition(): number {\r\n\t\treturn this.getPropertyValue(\"startPosition\");\r\n\t}\r\n\r\n\t/**\r\n\t * An actual end position of the fill.\r\n\t *\r\n\t * @param {number} value End position\r\n\t */\r\n\tpublic set endPosition(value: number) {\r\n\t\tthis.setPropertyValue(\"endPosition\", value);\r\n\t\tthis.invalidate(); // this is needed as relative position might not change when zooming\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} End position\r\n\t */\r\n\tpublic get endPosition(): number {\r\n\t\treturn this.getPropertyValue(\"endPosition\");\r\n\t}\r\n\r\n\t/**\r\n\t * Relative location of the fill. (0-1)\r\n\t *\r\n\t * @param {number} value Location (0-1)\r\n\t */\r\n\tpublic set location(value: AxisItemLocation) {\r\n\t\tthis.setPropertyValue(\"location\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {AxisItemLocation} Location (0-1)\r\n\t */\r\n\tpublic get location(): AxisItemLocation {\r\n\t\treturn this.getPropertyValue(\"location\");\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"AxisFill\"] = AxisFill;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/charts/axes/AxisFill.ts","/**\r\n * A module defining functionality for axis grid elements.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Sprite, ISpriteProperties, ISpriteEvents, SpriteEventDispatcher, AMEvent, ISpriteAdapters } from \"../../core/Sprite\";\r\nimport { AxisItemLocation, AxisDataItem } from \"./Axis\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { color } from \"../../core/utils/Color\";\r\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[Grid]].\r\n */\r\nexport interface IGridProperties extends ISpriteProperties {\r\n\r\n\t/**\r\n\t * Location of the grid item within cell. (0-1)\r\n\t *\r\n\t * @type {AxisItemLocation}\r\n\t */\r\n\tlocation?: AxisItemLocation;\r\n\r\n}\r\n\r\n/**\r\n * Defines events for [[Grid]].\r\n */\r\nexport interface IGridEvents extends ISpriteEvents { }\r\n\r\n/**\r\n * Defines adapters  for [[Grid]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface IGridAdapters extends ISpriteAdapters, IGridProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Displays an axis grid line.\r\n *\r\n * @see {@link IGridEvents} for a list of available events\r\n * @see {@link IGridAdapters} for a list of available Adapters\r\n * @todo Review: container is better, as we'll be able to attach something to the grid, also with 3d charts we might need some additional elements\r\n * @important\r\n */\r\nexport class Grid extends Sprite {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IGridProperties}\r\n\t */\r\n\tpublic _properties!: IGridProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IGridAdapters}\r\n\t */\r\n\tpublic _adapter!: IGridAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IGridEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IGridEvents;\r\n\r\n\t/**\r\n\t * A grid visual element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Sprite}\r\n\t */\r\n\tpublic gridSprite: Sprite;\r\n\r\n\t/**\r\n\t * An axis data item that corresponds to the this grid element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {AxisDataItem}\r\n\t */\r\n\tpublic _dataItem: AxisDataItem;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"Grid\";\r\n\r\n\t\tthis.element = this.paper.add(\"path\");\r\n\r\n\t\tthis.location = 0.5;\r\n\t\tthis.isMeasured = false;\r\n\r\n\t\tlet interfaceColors = new InterfaceColorSet();\r\n\t\tthis.stroke = interfaceColors.getFor(\"grid\");\r\n\r\n\t\tthis.pixelPerfect = true;\r\n\t\tthis.strokeOpacity = 0.15;\r\n\t\tthis.fill = color(); // \"none\";\r\n\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Location within axis cell to place grid line on.\r\n\t *\r\n\t * * 0 - start\r\n\t * * 0.5 - middle\r\n\t * * 1 - end\r\n\t *\r\n\t * @param {AxisItemLocation}  value  Location (0-1)\r\n\t */\r\n\tpublic set location(value: AxisItemLocation) {\r\n\t\tthis.setPropertyValue(\"location\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {AxisItemLocation} Location (0-1)\r\n\t */\r\n\tpublic get location(): AxisItemLocation {\r\n\t\treturn this.getPropertyValue(\"location\");\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"Grid\"] = Grid;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/charts/axes/Grid.ts","/**\r\n * Axis Label module\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Label, ILabelProperties, ILabelAdapters, ILabelEvents } from \"../../core/elements/Label\";\r\nimport { SpriteEventDispatcher, AMEvent } from \"../../core/Sprite\";\r\nimport { AxisItemLocation, AxisDataItem } from \"./Axis\";\r\nimport { registry } from \"../../core/Registry\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[AxisLabel]].\r\n */\r\nexport interface IAxisLabelProperties extends ILabelProperties {\r\n\r\n\t/**\r\n\t * Relative location of the label. (0-1)\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tlocation?: number;\r\n\r\n\t/**\r\n\t * Draw the label on the inside of the Axis?\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tinside?: boolean;\r\n\r\n}\r\n\r\n/**\r\n * Defines events for [[AxisLabel]].\r\n */\r\nexport interface IAxisLabelEvents extends ILabelEvents { }\r\n\r\n/**\r\n * Defines adapters for [[AxisLabel]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface IAxisLabelAdapters extends ILabelAdapters, IAxisLabelProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Use to create labels on Axis.\r\n *\r\n * @see {@link IAxisLabelEvents} for a list of available events\r\n * @see {@link IAxisLabelAdapters} for a list of available Adapters\r\n * @important\r\n */\r\nexport class AxisLabel extends Label {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IAxisLabelProperties}\r\n\t */\r\n\tpublic _properties!: IAxisLabelProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IAxisLabelAdapters}\r\n\t */\r\n\tpublic _adapter!: IAxisLabelAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IAxisLabelEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IAxisLabelEvents;\r\n\r\n\t/**\r\n\t * Related data item.\r\n\t *\r\n\t * @type {AxisDataItem}\r\n\t */\r\n\tpublic _dataItem: AxisDataItem;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"AxisLabel\";\r\n\t\tthis.isMeasured = false;\r\n\t\tthis.padding(10, 10, 10, 10);\r\n\t\tthis.renderingFrequency = 1;\r\n\t\tthis.location = 0.5;\r\n\t\tthis.nonScaling = true;\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Relative location of the label. (0-1)\r\n\t *\r\n\t * @param {AxisItemLocation}  value  Location (0-1)\r\n\t */\r\n\tpublic set location(value: AxisItemLocation) {\r\n\t\tthis.setPropertyValue(\"location\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {AxisItemLocation} Location (0-1)\r\n\t */\r\n\tpublic get location(): AxisItemLocation {\r\n\t\treturn this.getPropertyValue(\"location\");\r\n\t}\r\n\r\n\t/**\r\n\t * Sets if label should be drawn inside axis.\r\n\t *\r\n\t * @param {boolean}  value  Inside?\r\n\t */\r\n\tpublic set inside(value: boolean) {\r\n\t\tthis.setPropertyValue(\"inside\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns if label is set to be drawn inside axis.\r\n\t *\r\n\t * @return {boolean} Inside?\r\n\t */\r\n\tpublic get inside(): boolean {\r\n\t\treturn this.getPropertyValue(\"inside\");\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"AxisLabel\"] = AxisLabel;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/charts/axes/AxisLabel.ts","/**\r\n * Legend-related functionality.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Component, IComponentProperties, IComponentDataFields, IComponentAdapters, IComponentEvents } from \"../core/Component\";\r\nimport { EventDispatcher, AMEvent } from \"../core/utils/EventDispatcher\";\r\nimport { DataItem, IDataItemEvents } from \"../core/DataItem\";\r\nimport { ListTemplate, ListDisposer } from \"../core/utils/List\";\r\nimport { RoundedRectangle } from \"../core/elements/RoundedRectangle\";\r\nimport { Container } from \"../core/Container\";\r\nimport { Label } from \"../core/elements/Label\";\r\nimport { Optional } from \"../core/utils/Type\";\r\nimport { Preloader } from \"../core/elements/Preloader\";\r\nimport { keyboard } from \"../core/utils/Keyboard\";\r\nimport { registry } from \"../core/Registry\";\r\nimport { getInteraction } from \"../core/interaction/Interaction\";\r\nimport { percent } from \"../core/utils/Percent\";\r\nimport { InterfaceColorSet } from \"../core/utils/InterfaceColorSet\";\r\nimport * as $type from \"../core/utils/Type\";\r\n\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines a [[DataItem]] for [[Legend]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nexport class LegendDataItem<T, E extends ILegendItemEvents> extends DataItem {\r\n\r\n\t/**\r\n\t * A container data item's elements will be placed in.\r\n\t *\r\n\t * @type {Container}\r\n\t */\r\n\tpublic itemContainer: Container;\r\n\r\n\t/**\r\n\t * A [[Label]] element for the item label.\r\n\t *\r\n\t * @type {Container}\r\n\t */\r\n\tpublic label: Label;\r\n\r\n\t/**\r\n\t * A [[Container]] for legend item marker.\r\n\t *\r\n\t * @type {Container}\r\n\t */\r\n\tpublic marker: Container;\r\n\r\n\t/**\r\n\t * A [[Label]] element for the value label.\r\n\t *\r\n\t * @type {Label}\r\n\t */\r\n\tpublic valueLabel: Label;\r\n\r\n\t/**\r\n\t * A data context for legend item. It could be any object that implementes\r\n\t * [[ILegendItem]] interface, i.e. Series, Pie slice, etc.\r\n\t *\r\n\t * @type {ILegendItem}\r\n\t */\r\n\tpublic dataContext: ILegendItem<T, E>;\r\n\r\n\t/**\r\n\t * Defines a type of [[Component]] this data item is used for.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Legend}\r\n\t */\r\n\tpublic _component!: Legend;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"LegendDataItem\";\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines a class that carries legend settings.\r\n *\r\n * A legend might change its settings dynamically. Legend can also be shared\r\n * by several elements, requiring different settings.\r\n *\r\n * Having legend's settings in a separate object is a good way to \"hot swap\"\r\n * a set of settings for the legend.\r\n */\r\nexport class LegendSettings {\r\n\r\n\t/**\r\n\t * [valueText description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {string}\r\n\t */\r\n\tpublic valueText: string;\r\n\r\n\t/**\r\n\t * [labelText description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {string}\r\n\t */\r\n\tpublic labelText: string;\r\n\r\n\t/**\r\n\t * A text template for the value part of the legend item.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tpublic itemValueText: string;\r\n\r\n\t/**\r\n\t * A text template for the label part of the legend item.\r\n\t * @type {string}\r\n\t */\r\n\tpublic itemLabelText: string;\r\n\r\n\t/**\r\n\t * Should marker be created for each legend item.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tpublic createMarker: boolean = true;\r\n}\r\n\r\n/**\r\n * Represents types available for Legend position.\r\n *\r\n * @type {string}\r\n */\r\nexport type LegendPosition = \"left\" | \"right\" | \"top\" | \"bottom\" | \"absolute\";\r\n\r\n/**\r\n * Defines data fields for [[Legend]].\r\n */\r\nexport interface ILegendDataFields extends IComponentDataFields {\r\n\r\n\t/**\r\n\t * A field name in the data item which holds name of the legend item.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tname?: string;\r\n\r\n\t/**\r\n\t * A field name in data item which holds boolean value whether item should\r\n\t * be displayed in legend or not.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tvisible?: string;\r\n\r\n}\r\n\r\n/**\r\n * Defines properties for [[Legend]].\r\n */\r\nexport interface ILegendProperties extends IComponentProperties {\r\n\r\n\t/**\r\n\t * Should legend use default marker?\r\n\t *\r\n\t * If set to `false`, the legend will try to mirror the look of the actual\r\n\t * item, like series.\r\n\t *\r\n\t * @default true\r\n\t * @type {boolean}\r\n\t */\r\n\tuseDefaultMarker?: boolean;\r\n\r\n\t/**\r\n\t * Position of the legend.\r\n\t *\r\n\t * Options: \"left\", \"right\", \"top\", \"bottom\" (default), or \"absolute\".\r\n\t *\r\n\t * @default \"bottom\"\r\n\t * @type {LegendPosition}\r\n\t */\r\n\tposition?: LegendPosition\r\n\r\n}\r\n\r\n/**\r\n * Defines events for [[Legend]].\r\n */\r\nexport interface ILegendEvents extends IComponentEvents { }\r\n\r\n/**\r\n * Defines adapters for [[Legend]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface ILegendAdapters extends IComponentAdapters, ILegendProperties { }\r\n\r\nexport interface ILegendItemEvents {\r\n\tpropertychanged: {\r\n\t\t/**\r\n\t\t * Property key.\r\n\t\t *\r\n\t\t * @type {string}\r\n\t\t */\r\n\t\tproperty: string;\r\n\t};\r\n}\r\n\r\n/**\r\n * Represents a an interface for leged item.\r\n */\r\nexport interface ILegendItem<T, E extends ILegendItemEvents> {\r\n\r\n\t/**\r\n\t * Legend item needs to have an EventDispatcher so that legend can monitor\r\n\t * changes in its properties, i.e. `visible`\r\n\t *\r\n\t * @type {EventDispatcher}\r\n\t */\r\n\tevents: EventDispatcher<AMEvent<T, E>>;\r\n\r\n\t/**\r\n\t * Method that creates a legend marker for the item.\r\n\t *\r\n\t * @type {any}\r\n\t * @todo Better type\r\n\t */\r\n\tcreateLegendMarker: (container: Container) => any;\r\n\r\n\t/**\r\n\t * Settings that should be applied to legend item.\r\n\t *\r\n\t * @type {LegendSettings}\r\n\t */\r\n\tlegendSettings: LegendSettings;\r\n\r\n\t/**\r\n\t * A [[DataItem]] that will be used to extract value for the legend.\r\n\t *\r\n\t * @type {DataItem}\r\n\t */\r\n\tlegendDataItem: DataItem;\r\n\r\n\t/**\r\n\t * Is the item currently visible or turned off?\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tvisible: boolean;\r\n\r\n\t/**\r\n\t * Is the item currently being hidden. (hide animation is being played)\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tisHiding?: boolean;\r\n\r\n\t/**\r\n\t * Legend item needs to return a unique id of its element while and ensure\r\n\t * the `id` attribute is set on the actual node so that it can be referenced\r\n\t * to.\r\n\t *\r\n\t * @type {Function}\r\n\t */\r\n\tuidAttr: () => string;\r\n\r\n\t/**\r\n\t * Legend item's event to show it when it's toggled on in legend.\r\n\t *\r\n\t * @type {function}\r\n\t */\r\n\tshow: () => void;\r\n\r\n\t/**\r\n\t * Legend item's event to hide it when it's toggled off in legend\r\n\t *\r\n\t * @type {function}\r\n\t */\r\n\thide: () => void;\r\n\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * [[Legend]] class is used to create legend for the chart.\r\n *\r\n * @see {@link ILegendEvents} for a list of available events\r\n * @see {@link ILegendAdapters} for a list of available Adapters\r\n * @todo Verify/implement dynamic updating of legend items once the properties of related Series change\r\n */\r\nexport class Legend extends Component {\r\n\r\n\t/**\r\n\t * Defines the type of the data fields.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ILegendDataFields}\r\n\t */\r\n\tpublic _dataFields: ILegendDataFields;\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ILegendProperties}\r\n\t */\r\n\tpublic _properties!: ILegendProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ILegendAdapters}\r\n\t */\r\n\tpublic _adapter!: ILegendAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {ILegendEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: ILegendEvents;\r\n\r\n\t/**\r\n\t * Defines data item type.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {LegendDataItem<DataItem, IDataItemEvents>}\r\n\t */\r\n\tpublic _dataItem: LegendDataItem<DataItem, IDataItemEvents>;\r\n\r\n\t/**\r\n\t * Position of the legend.\r\n\t *\r\n\t * @type {LegendPosition}\r\n\t * @deprecated Moved to prroperties\r\n\t */\r\n\t//protected _position: LegendPosition;\r\n\r\n\t/**\r\n\t * List of legend Item containers. Legend item containers contain marker, title label and value label.\r\n\t *\r\n\t * @type {ListTemplate<Container>}\r\n\t */\r\n\tpublic itemContainers: ListTemplate<Container>;\r\n\r\n\t/**\r\n\t * List of legend item labels.\r\n\t *\r\n\t * @type {ListTemplate<Label>}\r\n\t */\r\n\tpublic labels: ListTemplate<Label>;\r\n\r\n\t/**\r\n\t * List of legend item markers.\r\n\t *\r\n\t * @type {ListTemplate<Container>}\r\n\t */\r\n\tpublic markers: ListTemplate<Container>;\r\n\r\n\t/**\r\n\t * List of legend item value labels.\r\n\t *\r\n\t * @type {ListTemplate<Label>}\r\n\t */\r\n\tpublic valueLabels: ListTemplate<Label>;\r\n\r\n\t/**\r\n\t * Currently focused legend item (for toggling via keyboard)\r\n\t *\r\n\t * @type {this[\"_dataItem\"]}\r\n\t */\r\n\tpublic focusedItem: Optional<this[\"_dataItem\"]>;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"Legend\";\r\n\r\n\t\t// Set defaults\r\n\t\tthis.layout = \"grid\";\r\n\t\tthis.useDefaultMarker = false;\r\n\t\tthis.contentAlign = \"center\";\r\n\r\n\t\t// Create a template container and list for legend items\r\n\t\tlet itemContainer: Container = new Container();\r\n\t\titemContainer.padding(10, 0, 10, 0);\r\n\t\titemContainer.margin(0, 5, 0, 0);\r\n\t\titemContainer.layout = \"horizontal\";\r\n\t\titemContainer.clickable = true;\r\n\t\titemContainer.focusable = true;\r\n\t\titemContainer.role = \"checkbox\";\r\n\t\titemContainer.background.fillOpacity = 0; // creates hit area\r\n\t\titemContainer.togglable = true;\r\n\r\n\t\t// Add click/tap event to toggle item\r\n\t\titemContainer.events.on(\"hit\", (ev) => {\r\n\t\t\tthis.toggleDataItem(<this[\"_dataItem\"]>ev.target.dataItem);\r\n\t\t}, this);\r\n\r\n\t\t// Add focus event so that we can track which object is currently in focus\r\n\t\t// for keyboard toggling\r\n\t\titemContainer.events.on(\"focus\", (ev) => {\r\n\t\t\tthis.focusedItem = <this[\"_dataItem\"]>ev.target.dataItem;\r\n\t\t});\r\n\t\titemContainer.events.on(\"blur\", (ev) => {\r\n\t\t\tthis.focusedItem = undefined;\r\n\t\t});\r\n\r\n\t\t// Create container list using item template we just created\r\n\t\tthis.itemContainers = new ListTemplate<Container>(itemContainer);\r\n\t\tthis._disposers.push(new ListDisposer(this.itemContainers));\r\n\t\tthis._disposers.push(this.itemContainers.template);\r\n\r\n\t\t// Set up global keyboard events for toggling elements\r\n\t\tthis._disposers.push(getInteraction().body.events.on(\"keyup\", (ev) => {\r\n\t\t\tif (keyboard.isKey(ev.event, \"enter\") && this.focusedItem) {\r\n\t\t\t\tthis.toggleDataItem(this.focusedItem);\r\n\t\t\t}\r\n\t\t}, this));\r\n\r\n\t\tlet interfaceColors = new InterfaceColorSet();\r\n\r\n\t\t// Create a template container and list for the a marker\r\n\t\tlet marker: Container = new Container();\r\n\t\tmarker.width = 23;\r\n\t\tmarker.height = 23;\r\n\t\tmarker.interactionsEnabled = false;\r\n\t\tmarker.setStateOnChildren = true;\r\n\t\tmarker.background.fillOpacity = 0;\r\n\t\tmarker.background.strokeOpacity = 0;\r\n\t\tmarker.propertyFields.fill = \"fill\";\r\n\r\n\t\tlet disabledColor = interfaceColors.getFor(\"disabledBackground\");\r\n\r\n\t\tmarker.events.on(\"childadded\", (event) => {\r\n\t\t\tlet activeState = event.newValue.states.create(\"active\");\r\n\t\t\tactiveState.properties.stroke = disabledColor;\r\n\t\t\tactiveState.properties.fill = disabledColor;\r\n\t\t});\r\n\r\n\t\tthis.markers = new ListTemplate<Container>(marker);\r\n\t\tthis._disposers.push(new ListDisposer(this.markers));\r\n\t\tthis._disposers.push(this.markers.template);\r\n\r\n\t\t// Create a legend background element\r\n\t\tlet rectangle: RoundedRectangle = marker.createChild(RoundedRectangle);\r\n\t\trectangle.width = percent(100);\r\n\t\trectangle.height = percent(100);\r\n\t\trectangle.propertyFields.fill = \"fill\";\r\n\t\trectangle.strokeOpacity = 0;\r\n\r\n\t\t// Create a template container and list for item labels\r\n\t\tlet label: Label = new Label();\r\n\t\tlabel.text = \"{name}\";\r\n\t\tlabel.margin(0, 5, 0, 5);\r\n\t\tlabel.valign = \"middle\";\r\n\t\tlabel.states.create(\"active\").properties.fill = interfaceColors.getFor(\"disabledBackground\");\r\n\t\tlabel.renderingFrequency = 2;\r\n\t\tthis.labels = new ListTemplate<Label>(label);\r\n\t\tthis._disposers.push(new ListDisposer(this.labels));\r\n\t\tthis._disposers.push(this.labels.template);\r\n\r\n\t\t// Create a template container and list for item value labels\r\n\t\tlet valueLabel: Label = new Label();\r\n\t\tvalueLabel.margin(0, 5, 0, 0);\r\n\t\tvalueLabel.valign = \"middle\";\r\n\t\tvalueLabel.width = 40; // to avoid rearranging legend entries when value changes.\r\n\t\tvalueLabel.align = \"right\";\r\n\t\tvalueLabel.textAlign = \"end\";\r\n\t\tvalueLabel.states.create(\"active\").properties.fill = interfaceColors.getFor(\"disabledBackground\");\r\n\t\tvalueLabel.renderingFrequency = 2;\r\n\r\n\t\tthis.valueLabels = new ListTemplate<Label>(valueLabel);\r\n\t\tthis._disposers.push(new ListDisposer(this.valueLabels));\r\n\t\tthis._disposers.push(this.valueLabels.template);\r\n\r\n\t\tthis.position = \"bottom\";\r\n\r\n\t\t// Create a state for disabled legend items\r\n\t\titemContainer.states.create(\"active\");\r\n\t\titemContainer.setStateOnChildren = true;\r\n\r\n\t\t// Apply accessibility settings\r\n\t\tthis.role = \"group\";\r\n\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Sets defaults that instantiate some objects that rely on parent, so they\r\n\t * cannot be set in constructor.\r\n\t */\r\n\tprotected applyInternalDefaults(): void {\r\n\t\tsuper.applyInternalDefaults();\r\n\t\tif (!$type.hasValue(this.readerTitle)) {\r\n\t\t\tthis.readerTitle = this.language.translate(\"Legend\");\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a new/empty DataItem of the type appropriate for this object.\r\n\t *\r\n\t * @see {@link DataItem}\r\n\t * @return {LegendDataItem} Data Item\r\n\t */\r\n\tprotected createDataItem(): this[\"_dataItem\"] {\r\n\t\treturn new LegendDataItem<DataItem, IDataItemEvents>();\r\n\t}\r\n\r\n\t/**\r\n\t * Removes children before calling validate method of the super class. (which\r\n\t * initiates building of the legend)\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic validate(): void {\r\n\t\tthis.removeChildren();\r\n\t\tsuper.validate();\r\n\t}\r\n\r\n\t/**\r\n\t * [validateDataElement description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {LegendDataItem} dataItem Data item\r\n\t * @todo Description\r\n\t * @todo Figure out how to update appearance of legend item without losing focus\r\n\t * @todo Update legend marker appearance as apperance of related series changes\r\n\t */\r\n\tpublic validateDataElement(dataItem: this[\"_dataItem\"]): void {\r\n\r\n\t\tsuper.validateDataElement(dataItem);\r\n\r\n\t\t// Get data item (legend item's) container and assign it to legend container\r\n\t\tlet container: Container = dataItem.itemContainer;\r\n\r\n\t\tif (!container) {\r\n\t\t\t// Create new container for the data item\r\n\t\t\tcontainer = this.itemContainers.create();\r\n\t\t\tdataItem.addSprite(container);\r\n\t\t\tcontainer.readerTitle = this.language.translate(\"Click, tap or press ENTER to toggle\");\r\n\t\t\tif (dataItem.dataContext.uidAttr) {\r\n\t\t\t\tcontainer.readerControls = dataItem.dataContext.uidAttr();\r\n\t\t\t\tcontainer.readerLabelledBy = dataItem.dataContext.uidAttr();\r\n\t\t\t}\r\n\t\t\tdataItem.itemContainer = container;\r\n\r\n\t\t\t// Add an event to check for item's properties\r\n\t\t\t// We cannot do this on a template since template does not have\r\n\t\t\t// dataContext, yet\r\n\t\t\tif (dataItem.dataContext.events) {\r\n\t\t\t\tdataItem.dataContext.events.on(\"propertychanged\", (ev) => {\r\n\t\t\t\t\tif (ev.property == \"visible\") {\r\n\t\t\t\t\t\tcontainer.readerChecked = dataItem.dataContext.visible;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\t//this.validateDataElement(dataItem);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Set parent and update current state\r\n\t\tcontainer.parent = this;\r\n\t\tcontainer.readerChecked = dataItem.dataContext.visible;\r\n\r\n\t\t// Create a marker for legend item\r\n\t\tlet marker: Container = dataItem.marker;\r\n\t\tif (!marker) {\r\n\t\t\tmarker = this.markers.create();\r\n\t\t\tmarker.parent = container;\r\n\t\t\tdataItem.marker = marker;\r\n\t\t}\r\n\r\n\t\t// If we are not using default markers, create a unique legend marker based\r\n\t\t// on the data item type\r\n\t\tif (dataItem.dataContext.createLegendMarker && !this.useDefaultMarker) {\r\n\t\t\tdataItem.dataContext.createLegendMarker(marker);\r\n\t\t}\r\n\r\n\t\t// Create label\r\n\t\tlet label: Label = dataItem.label;\r\n\t\tif (!label) {\r\n\t\t\tlabel = this.labels.create();\r\n\t\t\tlabel.parent = container;\r\n\t\t\tdataItem.label = label;\r\n\t\t}\r\n\r\n\t\t// Create value label\r\n\t\tlet valueLabel: Label = dataItem.valueLabel;\r\n\t\tif (!valueLabel) {\r\n\t\t\tvalueLabel = this.valueLabels.create();\r\n\t\t\tvalueLabel.parent = container;\r\n\t\t\tdataItem.valueLabel = valueLabel;\r\n\t\t}\r\n\r\n\t\t// Tell series its legend data item\r\n\t\tdataItem.dataContext.legendDataItem = dataItem;\r\n\t}\r\n\r\n\t/**\r\n\t * Position of the legend.\r\n\t *\r\n\t * Options: \"left\", \"right\", \"top\", \"bottom\" (default), or \"absolute\".\r\n\t *\r\n\t * @default \"bottom\"\r\n\t * @param {LegendPosition}  value  Position\r\n\t */\r\n\tpublic set position(value: LegendPosition) {\r\n\t\tif (this.setPropertyValue(\"position\", value)) {\r\n\t\t\tif (value == \"left\" || value == \"right\") {\r\n\t\t\t\tthis.margin(10, 20, 10, 20);\r\n\t\t\t\tthis.valign = \"middle\";\r\n\t\t\t\tthis.itemContainers.template.width = percent(100);\r\n\t\t\t\tthis.valueLabels.template.width = percent(100);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.itemContainers.template.maxWidth = undefined;\r\n\t\t\t\tthis.width = percent(100);\r\n\t\t\t\tthis.valueLabels.template.width = 40;\r\n\t\t\t}\r\n\t\t\tthis.invalidate();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {LegendPosition} Position\r\n\t */\r\n\tpublic get position(): LegendPosition {\r\n\t\treturn this.getPropertyValue(\"position\");\r\n\t}\r\n\r\n\t/**\r\n\t * Should legend try to mirror the look of the related item when building\r\n\t * the marker for legend item?\r\n\t *\r\n\t * If set to `true` it will try to make the marker look like its related\r\n\t * item.\r\n\t *\r\n\t * E.g. if an item is for a Line Series, it will display a line of the\r\n\t * same thickness, color, and will use the same bullets if series have them.\r\n\t *\r\n\t * @default false\r\n\t * @param {boolean} value Use default marker?\r\n\t */\r\n\tpublic set useDefaultMarker(value: boolean) {\r\n\t\tthis.setPropertyValue(\"useDefaultMarker\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Use default marker?\r\n\t */\r\n\tpublic get useDefaultMarker(): boolean {\r\n\t\treturn this.getPropertyValue(\"useDefaultMarker\");\r\n\t}\r\n\r\n\t/**\r\n\t * Toggles a legend item.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {this[\"_dataItem\"]} item Legend item\r\n\t * @todo Maybe do it with togglable instead\r\n\t */\r\n\tpublic toggleDataItem(item: this[\"_dataItem\"]): void {\r\n\t\tlet dataContext = item.dataContext;\r\n\t\tif (!dataContext.visible || dataContext.isHiding) {\r\n\t\t\tif (dataContext.show) {\r\n\t\t\t\tdataContext.show();\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (dataContext.hide) {\r\n\t\t\t\tdataContext.hide();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Override preloader method so that legend does not accidentally show its\r\n\t * own preloader.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {Preloader} Always `undefined`\r\n\t */\r\n\tpublic get preloader(): Optional<Preloader> {\r\n\t\treturn;\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"Legend\"] = Legend;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../src/.internal/charts/Legend.ts","/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Dictionary } from \"./Dictionary\";\r\nimport * as $type from \"./Type\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines an interface for cache items.\r\n */\r\ninterface CacheItem<A> {\r\n\r\n\t/**\r\n\t * A timestamp of when the item was created/updated.\r\n\t * \r\n\t * @type {number}\r\n\t */\r\n\t\"touched\": number,\r\n\r\n\t/**\r\n\t * TTL (time to live) in milliseconds.\r\n\t * \r\n\t * @type {number}\r\n\t */\r\n\t\"ttl\"?: number,\r\n\r\n\t/**\r\n\t * Cached value.\r\n\t * \r\n\t * @type {A}\r\n\t */\r\n\t\"value\": A,\r\n\r\n\t/**\r\n\t * Is this item expired?\r\n\t * \r\n\t * @todo a system process that would check chace element TTLs and expire them\r\n\t * @type {boolean}\r\n\t */\r\n\t\"expired\"?: boolean\r\n\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Represents object cache.\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Better storage\r\n * @todo TTL logging\r\n * @todo Garbage collector\r\n */\r\nexport class Cache<A> {\r\n\r\n\t/**\r\n\t * Storage for cache items.\r\n\t * \r\n\t * @type {Object}\r\n\t */\r\n\tprivate _storage = new Dictionary<string, Dictionary<string, CacheItem<A>>>();\r\n\r\n\t/**\r\n\t * Default TTL in milliseconds.\r\n\t * \r\n\t * @type {number}\r\n\t */\r\n\tpublic ttl: number = 1000;\r\n\r\n\t/**\r\n\t * Caches or updates cached value, resets TTL.\r\n\t * \r\n\t * @param {string}  owner  An id of the object that owns this cache\r\n\t * @param {string}  key    Index key\r\n\t * @param {A}       value  Value\r\n\t */\r\n\tpublic set(owner: string, key: string, value: A): void {\r\n\r\n\t\t// Create if storage does not exist for this owner\r\n\t\tlet ownerStorage = this._storage.insertKeyIfEmpty(owner, () => new Dictionary<string, CacheItem<A>>());\r\n\r\n\t\t// Create cache item\r\n\t\tlet item: CacheItem<A> = {\r\n\t\t\t\"touched\": new Date().getTime(),\r\n\t\t\t\"ttl\": this.ttl,\r\n\t\t\t\"value\": value\r\n\t\t};\r\n\r\n\t\t// Set\r\n\t\townerStorage.setKey(key, item);\r\n\t}\r\n\r\n\t/**\r\n\t * Rerturns cached item, respecting TTL.\r\n\t * \r\n\t * @param  {string}  owner  An id of the object that owns this cache\r\n\t * @param  {string}  key    Index key\r\n\t * @return {A}              Value, or `undefined` if not set\r\n\t */\r\n\tpublic get(owner: string, key: string): $type.Optional<A> {\r\n\t\t// \t\t || ypeof this._storage[owner][key] === \"undefined\" || this._storage[owner][key].expired === true) {\r\n\t\tif (this._storage.hasKey(owner)) {\r\n\t\t\tlet ownerStorage = <Dictionary<string, CacheItem<A>>>this._storage.getKey(owner);\r\n\r\n\t\t\tif (ownerStorage.hasKey(key)) {\r\n\t\t\t\tlet cacheItem: CacheItem<A> = <CacheItem<A>>ownerStorage.getKey(key);\r\n\t\t\t\treturn cacheItem.expired === true ? undefined : cacheItem.value;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Clears cache for specific owner or everything.\r\n\t * \r\n\t * @param {string} owner Owner to clear cache for\r\n\t */\r\n\tpublic clear(owner?: string): void {\r\n\t\tif (owner) {\r\n\t\t\tthis._storage.removeKey(owner);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis._storage.clear();\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * ============================================================================\r\n * GLOBAL INSTANCE\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * A global instance of cache. Use this instance to cache any values.\r\n *\r\n * @ignore Exclude from docs\r\n */\r\nexport let cache: Cache<any> = new Cache();\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/utils/Cache.ts","/**\r\n * This functionality is related to the HTML wrapper that houses `<svg>` tag.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Container } from \"../Container\";\r\nimport { IDisposer } from \"../utils/Disposer\";\r\nimport * as $utils from \"../utils/Utils\";\r\nimport * as $dom from \"../utils/DOM\";\r\nimport * as $array from \"../utils/Array\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n\r\n/**\r\n * A array of all SVG Containers (one SVG container per chart instance).\r\n *\r\n * @ignore Exclude from docs\r\n * @type {Array<SVGContainer>}\r\n */\r\nexport const svgContainers: Array<SVGContainer> = [];\r\n\r\n/**\r\n * A class used to create an HTML wrapper for the SVG contents.\r\n */\r\nexport class SVGContainer implements IDisposer {\r\n\r\n\t/**\r\n\t * Indicates if this object has already been deleted. Any\r\n\t * destruction/disposal code should take this into account when deciding\r\n\t * wheter to run potentially costly disposal operations if they already have\r\n\t * been run.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tprotected _disposed: boolean = false;\r\n\r\n\t/**\r\n\t * Width of HTML element.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tpublic width: number;\r\n\r\n\t/**\r\n\t * Height of HTML element.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tpublic height: number;\r\n\r\n\t/**\r\n\t * A [[Container]] element which is placed into container.\r\n\t *\r\n\t * @type {Container}\r\n\t */\r\n\tprotected _container: Container;\r\n\r\n\t/**\r\n\t * A parent HTML container that SVG wrapper element is placed in.\r\n\t *\r\n\t * @type {HTMLElement}\r\n\t */\r\n\tpublic htmlElement: HTMLElement;\r\n\r\n\t/**\r\n\t * If this component is in a separate HTML container, `autoResize` means the\r\n\t * module will constantly measure container's size and adopt contents to it.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\tpublic autoResize: Boolean = true;\r\n\r\n\t/**\r\n\t * A `<div>` element which acts as a wrapper/holder for the SVG element.\r\n\t *\r\n\t * @type {HTMLDivElement}\r\n\t */\r\n\tpublic SVGContainer: HTMLDivElement;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t *\r\n\t * * Creates an HTML wrapper for SVG\r\n\t */\r\n\tconstructor(htmlElement: HTMLElement) {\r\n\r\n\t\t// Log parent HTML element\r\n\t\tthis.htmlElement = htmlElement;\r\n\r\n\t\t// Adds to containers array\r\n\t\tsvgContainers.push(this);\r\n\r\n\t\t/**\r\n\t\t * Create child div for the container - it will have svg node\r\n\t\t * It might seem that this container is not necessay, however having it solves\r\n\t\t * a problems with mouse position detection and some other.\r\n\t\t */\r\n\t\tlet svgContainer = document.createElement(\"div\");\r\n\t\tlet style = svgContainer.style;\r\n\t\tstyle.width = \"100%\";\r\n\t\tstyle.height = \"100%\";\r\n\t\tstyle.position = \"relative\";\r\n\t\thtmlElement.appendChild(svgContainer);\r\n\r\n\t\tthis.SVGContainer = svgContainer;\r\n\t}\r\n\r\n\t/**\r\n\t * Measures size of parent HTML element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic measure(): void {\r\n\t\tlet width: number = $utils.width(this.htmlElement);\r\n\t\tlet height: number = $utils.height(this.htmlElement);\r\n\t\tif (this.container) {\r\n\t\t\tif (this.width != width || this.height != height) {\r\n\t\t\t\tthis.width = width;\r\n\t\t\t\tthis.height = height;\r\n\r\n\t\t\t\tlet container = this.container;\r\n\t\t\t\tcontainer.maxWidth = width;\r\n\t\t\t\tcontainer.maxHeight = height;\r\n\r\n\t\t\t\t$dom.fixPixelPerfect(this.SVGContainer);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * A [[Container]] element which is placed into container.\r\n\t *\r\n\t * @param {Container}  container  Container\r\n\t */\r\n\tpublic set container(container: Container) {\r\n\t\tthis._container = container;\r\n\t\tthis.measure();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Container} Container\r\n\t */\r\n\tpublic get container(): Container {\r\n\t\treturn this._container;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns if this object has been already been disposed.\r\n\t *\r\n\t * @return {boolean} Is disposed?\r\n\t */\r\n\tpublic isDisposed(): boolean {\r\n\t\treturn this._disposed;\r\n\t}\r\n\r\n\t/**\r\n\t * Removes this container from SVG container list in system, which\r\n\t * effectively disables size change monitoring for it.\r\n\t */\r\n\tpublic dispose(): void {\r\n\t\tif (!this._disposed) {\r\n\t\t\t$array.remove(svgContainers, this);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/rendering/SVGContainer.ts","/**\r\n * Paper class just like the white sheet of pressed fiber it draws its name\r\n * inspiration from is used as a starting point to start a drawing.\r\n *\r\n * Before we can start adding elements (drawing) we need to take out a new sheet\r\n * of paper, or in this instance create a blank SVG element.\r\n *\r\n * This class creates such element, as well as implements methods needed to\r\n * start adding elements to it.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { AMElement } from \"./AMElement\";\r\nimport { Group } from \"./Group\";\r\nimport * as $dom from \"../utils/DOM\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Represents available SVG elements that can be added to paper.\r\n *\r\n * @type {string}\r\n * @todo Review if we can remove commented out methods\r\n */\r\nexport type SVGElementNames = \"a\" | \"altGlyph\" | \"altGlyphDef\" | \"altGlyphItem\" | \"animate\" | \"animateColor\" | \"animateMotion\" | \"animateTransform\" | \"circle\" | \"clipPath\" | \"color-profile\" | \"cursor\" | \"defs\" | \"desc\" | \"ellipse\" | \"feBlend\" | \"feColorMatrix\" | \"feComponentTransfer\" | \"feComposite\" | \"feConvolveMatrix\" | \"feDiffuseLighting\" | \"feDisplacementMap\" | \"feDistantLight\" | \"feFlood\" | \"feFuncA\" | \"feFuncB\" | \"feFuncG\" | \"feFuncR\" | \"feGaussianBlur\" | \"feImage\" | \"feMerge\" | \"feMergeNode\" | \"feMorphology\" | \"feOffset\" | \"fePointLight\" | \"feSpecularLighting\" | \"feSpotLight\" | \"feTile\" | \"feTurbulence\" | \"feConvolveMatrix\" | \"filter\" | \"font\" | \"font-face\" | \"font-face-format\" | \"font-face-name\" | \"font-face-src\" | \"font-face-uri\" | \"foreignObject\" | \"g\" | \"glyph\" | \"glyphRef\" | \"hkern\" | \"image\" | \"line\" | \"linearGradient\" | \"marker\" | \"mask\" | \"metadata\" | \"missing-glyph\" | \"mpath\" | \"path\" | \"pattern\" | \"polygon\" | \"polyline\" | \"radialGradient\" | \"rect\" | \"script\" | \"set\" | \"stop\" | \"style\" | \"svg\" | \"switch\" | \"symbol\" | \"text\" | \"textPath\" | \"title\" | \"tref\" | \"tspan\" | \"use\" | \"view\" | \"vkern\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Paper class which when instantiated will create an SVG element as well as\r\n * some of the sub-elements like `<desc>`, `<defs>`.\r\n *\r\n * Use its methods like `addGroup` and `append` to add elements to the paper.\r\n */\r\nexport class Paper {\r\n\r\n\t/**\r\n\t * A reference `<svg>` element.\r\n\t *\r\n\t * @type {SVGSVGElement}\r\n\t */\r\n\tpublic svg: SVGSVGElement;\r\n\r\n\t/**\r\n\t * A reference to the HTML container the `<svg>` element is placed in.\r\n\t *\r\n\t * @type {HTMLElement}\r\n\t */\r\n\tpublic container: HTMLElement;\r\n\r\n\t/**\r\n\t * A reference to the `<defs>` element.\r\n\t *\r\n\t * @type {SVGDefsElement}\r\n\t */\r\n\tpublic defs: SVGDefsElement;\r\n\r\n\t/**\r\n\t * An id of the element.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tpublic id: string;\r\n\r\n\t/**\r\n\t * Creates main `<svg>` container and related elements.\r\n\t *\r\n\t * @param {HTMLElement} container A reference to HTML element to create `<svg>` in\r\n\t */\r\n\tconstructor(container: HTMLElement) {\r\n\r\n\t\t// Store container reference\r\n\t\tthis.container = container;\r\n\r\n\t\t// Create SVG element\r\n\t\tlet svg = <SVGSVGElement>document.createElementNS($dom.SVGNS, \"svg\");\r\n\t\tsvg.setAttribute(\"version\", \"1.1\");\r\n\t\tsvg.setAttributeNS($dom.XMLNS, \"xmlns\", $dom.SVGNS);\r\n\t\tsvg.setAttributeNS($dom.XMLNS, \"xmlns:xlink\", $dom.XLINK);\r\n\t\tsvg.setAttribute(\"role\", \"group\");\r\n\t\tthis.container.appendChild(svg);\r\n\r\n\t\t// Add description\r\n\t\tlet desc: SVGElement = <SVGElement>document.createElementNS($dom.SVGNS, \"desc\");\r\n\t\tdesc.appendChild(document.createTextNode(\"JavaScript chart by amCharts\"));\r\n\t\tsvg.appendChild(desc);\r\n\r\n\t\t// Add defs\r\n\t\tthis.defs = <SVGDefsElement>document.createElementNS($dom.SVGNS, \"defs\");\r\n\t\tsvg.appendChild(this.defs);\r\n\r\n\t\t// Set width and height to fit container\r\n\t\tsvg.style.width = \"100%\";\r\n\t\tsvg.style.height = \"100%\";\r\n\t\tsvg.style.overflow = \"visible\";\r\n\r\n\t\t// Store variable\r\n\t\tthis.svg = svg;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates and returns a new element. Does not attach it to Paper yet.\r\n\t *\r\n\t * @param  {SVGElementNames}  elementName  Element name\r\n\t * @return {AMElement}                     New element\r\n\t */\r\n\tpublic add(elementName: SVGElementNames): AMElement {\r\n\t\treturn new AMElement(elementName);\r\n\t}\r\n\r\n\t/**\r\n\t * Creates and returns a new Group element. Does not attach it to Paper.\r\n\t *\r\n\t * @param  {SVGElementNames}  groupName  Element name\r\n\t * @return {Group}                       New Group\r\n\t */\r\n\tpublic addGroup(groupName: SVGElementNames): Group {\r\n\t\treturn new Group(groupName);\r\n\t}\r\n\r\n\t/**\r\n\t * Appends an element to Paper.\r\n\t *\r\n\t * @param {AMElement} element Element to append\r\n\t */\r\n\tpublic append(element: AMElement): void {\r\n\t\tif (element) {\r\n\t\t\tthis.svg.appendChild(element.node);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Appends an element to `<defs>` block of the Paper.\r\n\t *\r\n\t * @param {AMElement}  element  Element\r\n\t */\r\n\tpublic appendDef(element: AMElement): void {\r\n\t\tif (element) {\r\n\t\t\tthis.defs.appendChild(element.node);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Creates and returns new `<foreignObject>` element. Does not append it to\r\n\t * Paper.\r\n\t *\r\n\t * @return {AMElement} A foreignObject element\r\n\t */\r\n\tpublic foreignObject(): AMElement {\r\n\t\tlet element = new AMElement(\"foreignObject\");\r\n\t\t//this.append(element);\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if browser supports `<foreignObject>` elements.\r\n\t *\r\n\t * @return {boolean} Supports `foreignObject`?\r\n\t */\r\n\tpublic supportsForeignObject(): boolean {\r\n\t\treturn document.implementation.hasFeature(\"http://www.w3.org/TR/SVG11/feature#Extensibility\", \"1.1\");\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/rendering/Paper.ts","/**\r\n * Popup class is used to display information over chart area.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport popupCSS from \"./PopupCSS\";\r\nimport { Adapter } from \"../utils/Adapter\";\r\nimport { BaseObject } from \"../Base\";\r\nimport { Sprite } from \"../Sprite\";\r\nimport { getInteraction } from \"../interaction/Interaction\";\r\nimport { InteractionObject } from \"../interaction/InteractionObject\";\r\nimport { keyboard } from \"../utils/Keyboard\";\r\nimport { Percent } from \"../utils/Percent\";\r\nimport { MultiDisposer } from \"../utils/Disposer\";\r\nimport { Align } from \"../defs/Align\";\r\nimport { VerticalAlign } from \"../defs/VerticalAlign\";\r\nimport { IPoint } from \"../defs/IPoint\";\r\nimport * as $type from \"../utils/Type\";\r\nimport * as $object from \"../utils/Object\";\r\n\r\n/**\r\n * Represents a list of available adapters for Export.\r\n */\r\nexport interface IPopupAdapters {\r\n\r\n\t/**\r\n\t * Applied to the class prefixes.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tclassPrefix: string,\r\n\r\n\t/**\r\n\t * Applied to popup content before it is shown.\r\n\t * @type {string}\r\n\t */\r\n\tcontent: string,\r\n\r\n\t/**\r\n\t * Applied to popup title before it is shown.\r\n\t * @type {string}\r\n\t */\r\n\ttitle: string,\r\n\r\n\t/**\r\n\t * Applied to the screen reader title.\r\n\t * @type {string}\r\n\t */\r\n\treaderTitle: string,\r\n\r\n\t/**\r\n\t * Applied to default `defaultStyles` property before it is retrieved.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tdefaultStyles: boolean,\r\n\r\n\t/**\r\n\t * Applied to default `showCurtain` property before it is retrieved.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tshowCurtain: boolean,\r\n\r\n\t/**\r\n\t * Applied to default `draggable` property before it is retrieved.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tdraggable: boolean,\r\n\r\n\t/**\r\n\t * Applied to horizontal alignment of the popup.\r\n\t *\r\n\t * @type {Align}\r\n\t */\r\n\talign: Align;\r\n\r\n\t/**\r\n\t * Applied to vertical alignment of the popup.\r\n\t *\r\n\t * @type {VerticalAlign}\r\n\t */\r\n\tverticalAlign: VerticalAlign;\r\n\r\n\t/**\r\n\t * Appliet to `left` position value.\r\n\t *\r\n\t * @type {number | Percent}\r\n\t */\r\n\tleft: number | Percent;\r\n\r\n\t/**\r\n\t * Appliet to `right` position value.\r\n\t *\r\n\t * @type {number | Percent}\r\n\t */\r\n\tright: number | Percent;\r\n\r\n\t/**\r\n\t * Appliet to `top` position value.\r\n\t *\r\n\t * @type {number | Percent}\r\n\t */\r\n\ttop: number | Percent;\r\n\r\n\t/**\r\n\t * Appliet to `bottom` position value.\r\n\t *\r\n\t * @type {number | Percent}\r\n\t */\r\n\tbottom: number | Percent;\r\n\r\n\t/**\r\n\t * Applied to class names list that are added ass `class` for various popup\r\n\t * elements.\r\n\t */\r\n\tclassNames: {\r\n\t\twrapperClass: string,\r\n\t\ttitleClass: string,\r\n\t\tcontentClass: string,\r\n\t\tcurtainClass: string,\r\n\t\tcloseClass: string\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Shows an HTML popup which covers window or a chart area.\r\n *\r\n * @todo Positioning over whole window\r\n */\r\nexport class Popup extends BaseObject {\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IExportAdapters}\r\n\t */\r\n\tpublic _adapter!: IPopupAdapters;\r\n\r\n\t/**\r\n\t * Adapter.\r\n\t *\r\n\t * @type {Adapter<Popup, IPopupAdapters>}\r\n\t */\r\n\tpublic adapter: Adapter<Popup, IPopupAdapters> = new Adapter<Popup, IPopupAdapters>(this);\r\n\r\n\t/**\r\n\t * A reference to an HTML element to be used for container. If not set, popup\r\n\t * will cover the whole window.\r\n\t *\r\n\t * @type {HTMLElement}\r\n\t */\r\n\tpublic container: HTMLElement | Document;\r\n\r\n\t/**\r\n\t * A parent element this Popup belongs to.\r\n\t *\r\n\t * @type {Sprite}\r\n\t */\r\n\tpublic sprite: Sprite;\r\n\r\n\t/**\r\n\t * Holds references to various HTML elements, Popup consists of.\r\n\t */\r\n\tprotected _elements: {\r\n\t\twrapper?: HTMLElement;\r\n\t\ttitle?: HTMLElement;\r\n\t\tcontent?: HTMLElement;\r\n\t\tcurtain?: HTMLElement;\r\n\t} = {};\r\n\r\n\t/**\r\n\t * Holdes Interaction objects for various Popup's elements.\r\n\t */\r\n\tprotected _IOs: {\r\n\t\twrapper?: InteractionObject;\r\n\t\tcontent?: InteractionObject;\r\n\t\tclose?: InteractionObject;\r\n\t\tcurtain?: InteractionObject;\r\n\t} = {};\r\n\r\n\t/**\r\n\t * Contents of popup window.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tprotected _content: string = \"\";\r\n\r\n\t/**\r\n\t * Title of the popup window.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tprotected _title: string = \"\";\r\n\r\n\t/**\r\n\t * Prefix to apply to class names for popup elements.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tprotected _classPrefix: string = \"ampopup\"\r\n\r\n\t/**\r\n\t * If set to `true` [[Popup]] will use default styles.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tprotected _defaultStyles: boolean = true;\r\n\r\n\t/**\r\n\t * If set to `true` [[Popup]] will dim out all chart content behind it by\r\n\t * showing a semi-transparent fill. (curtain)\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tprotected _showCurtain: boolean = false;\r\n\r\n\t/**\r\n\t * Indicates whether popup can be dragged.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tprotected _draggable: boolean = true;\r\n\r\n\t/**\r\n\t * Horizontal position of the content window.\r\n\t *\r\n\t * @type {Align}\r\n\t */\r\n\tprotected _align: Align = \"center\";\r\n\r\n\t/**\r\n\t * Vertical position of the content window.\r\n\t *\r\n\t * @type {VerticalAlign}\r\n\t */\r\n\tprotected _verticalAlign: VerticalAlign = \"middle\";\r\n\r\n\t/**\r\n\t * Shift in position of the element. (used for dragging)\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tprotected _shift: IPoint = {\r\n\t\tx: 0,\r\n\t\ty: 0\r\n\t};\r\n\r\n\t/**\r\n\t * Temporary shift in position of the element. (used for dragging)\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tprotected _tempShift: IPoint = {\r\n\t\tx: 0,\r\n\t\ty: 0\r\n\t};\r\n\r\n\t/**\r\n\t * \"left\" position of the popup content.\r\n\t *\r\n\t * @type {number | Percent}\r\n\t */\r\n\tprotected _left: number | Percent;\r\n\r\n\t/**\r\n\t * \"right\" position of the popup content.\r\n\t *\r\n\t * @type {number | Percent}\r\n\t */\r\n\tprotected _right: number | Percent;\r\n\r\n\t/**\r\n\t * \"top\" position of the popup content.\r\n\t *\r\n\t * @type {number | Percent}\r\n\t */\r\n\tprotected _top: number | Percent;\r\n\r\n\t/**\r\n\t * \"bottom\" position of the popup content.\r\n\t *\r\n\t * @type {number | Percent}\r\n\t */\r\n\tprotected _bottom: number | Percent;\r\n\r\n\t/**\r\n\t * A title for screen readers. It is very highly recommended to set that title\r\n\t * so that people using screen reader tools can get an immediate summary of\r\n\t * the information in the popup.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tpublic readerTitle: string = \"\";\r\n\r\n\t/**\r\n\t * Is popup closable?\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tprivate _closable: boolean = true;\r\n\r\n\t/**\r\n\t * Was CSS already loaded?\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tprivate _cssLoaded: boolean = false;\r\n\r\n\t/**\r\n\t * Used to log original value of `interactionsEnabled` so that it can be restored\r\n\t * after temporarily disabling it.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tprivate _spriteInteractionsEnabled: boolean;\r\n\r\n\t/**\r\n\t * Identifies if this object is a \"template\" and should not be treated as\r\n\t * real object that is drawn or actually used in the chart.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tpublic isTemplate: boolean = false;\r\n\r\n\t/**\r\n\t * Indicates if the element was already sized and should not be measured for\r\n\t * sized again, saving some precious resources.\r\n\t * \r\n\t * @type {boolean}\r\n\t */\r\n\tprivate _sized: boolean = false;\r\n\r\n\t/**\r\n\t * Cached bounding rectangle info.\r\n\t * \r\n\t * @type {DOMRect | ClientRect}\r\n\t */\r\n\tprivate _bbox: DOMRect | ClientRect;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"Popup\";\r\n\t}\r\n\r\n\t/**\r\n\t * Shows popup window.\r\n\t */\r\n\tpublic show(): void {\r\n\t\tif (this.container) {\r\n\t\t\tif (this._elements.wrapper) {\r\n\t\t\t\tthis.container.appendChild(this._elements.wrapper);\r\n\t\t\t}\r\n\t\t\tif (this._elements.curtain) {\r\n\t\t\t\tthis.container.appendChild(this._elements.curtain);\r\n\t\t\t}\r\n\t\t\tthis.positionElement();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Hides popup window.\r\n\t */\r\n\tpublic hide(): void {\r\n\t\tif (this._elements.wrapper) {\r\n\t\t\tif (this._elements.wrapper.parentElement) {\r\n\t\t\t\tthis._elements.wrapper.parentElement.removeChild(this._elements.wrapper);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this._elements.curtain) {\r\n\t\t\tif (this._elements.curtain.parentElement) {\r\n\t\t\t\tthis._elements.curtain.parentElement.removeChild(this._elements.curtain);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._releasePointers();\r\n\t}\r\n\r\n\t/**\r\n\t * Destroy (dispose) popup.\r\n\t */\r\n\tpublic dispose(): void {\r\n\t\tsuper.dispose();\r\n\t\tthis.hide();\r\n\t}\r\n\r\n\t/**\r\n\t * Positions content element in the center of popup based on its actual size.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic positionElement(forceResize: boolean = true): void {\r\n\r\n\t\tif (!this._elements.wrapper) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsetTimeout(() => {\r\n\r\n\t\t\tif (forceResize || !this._sized) {\r\n\t\t\t\tthis._elements.wrapper.style.opacity = \"0.01\";\r\n\t\t\t\tthis._elements.wrapper.style.left = \"0\";\r\n\t\t\t\tthis._elements.wrapper.style.top = \"0\";\r\n\r\n\t\t\t\t// Size the element, but only for the first time\r\n\t\t\t\tif (!this._elements.wrapper.style.width) {\r\n\t\t\t\t\tlet bbox = this._elements.wrapper.getBoundingClientRect();\r\n\t\t\t\t\tthis._elements.wrapper.style.width = bbox.width + \"px\";\r\n\t\t\t\t\tthis._elements.wrapper.style.height = bbox.height + \"px\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._sized = true;\r\n\t\t\t}\r\n\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tlet bbox: DOMRect | ClientRect;\r\n\t\t\t\tif ((forceResize || !this._sized) && this._bbox) {\r\n\t\t\t\t\tbbox = this._bbox;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tbbox = this._elements.wrapper.getBoundingClientRect();\r\n\t\t\t\t\tthis._elements.wrapper.style.opacity = \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Set horizontal positioning\r\n\t\t\t\tswitch (this.align) {\r\n\t\t\t\t\tcase \"left\":\r\n\t\t\t\t\t\tthis._elements.wrapper.style.left = \"0\";\r\n\t\t\t\t\t\tthis._elements.wrapper.style.right = \"auto\";\r\n\t\t\t\t\t\tthis._elements.wrapper.style.marginLeft = (this._shift.x + this._tempShift.x).toString();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"center\":\r\n\t\t\t\t\t\tthis._elements.wrapper.style.left = \"50%\";\r\n\t\t\t\t\t\tthis._elements.wrapper.style.right = \"auto\";\r\n\t\t\t\t\t\tthis._elements.wrapper.style.marginLeft = (Math.round(-bbox.width / 2) + (this._shift.x + this._tempShift.x)) + \"px\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"right\":\r\n\t\t\t\t\t\tthis._elements.wrapper.style.left = \"auto\";\r\n\t\t\t\t\t\tthis._elements.wrapper.style.right = \"0\";\r\n\t\t\t\t\t\tthis._elements.wrapper.style.marginLeft = (this._shift.x + this._tempShift.x).toString();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tthis._elements.wrapper.style.left = this.toStyle(this.left) || \"auto\";\r\n\t\t\t\t\t\tthis._elements.wrapper.style.right = this.toStyle(this.right) || \"auto\";\r\n\t\t\t\t\t\tthis._elements.wrapper.style.marginLeft = (this._shift.x + this._tempShift.x).toString();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Set vertical positioning\r\n\t\t\t\tswitch (this.verticalAlign) {\r\n\t\t\t\t\tcase \"top\":\r\n\t\t\t\t\t\tthis._elements.wrapper.style.top = \"0\";\r\n\t\t\t\t\t\tthis._elements.wrapper.style.bottom = \"auto\";\r\n\t\t\t\t\t\tthis._elements.wrapper.style.marginTop = (this._shift.y + this._tempShift.y).toString();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"middle\":\r\n\t\t\t\t\t\tthis._elements.wrapper.style.top = \"50%\";\r\n\t\t\t\t\t\tthis._elements.wrapper.style.bottom = \"auto\";\r\n\t\t\t\t\t\tthis._elements.wrapper.style.marginTop = (Math.round(-bbox.height / 2) + (this._shift.y + this._tempShift.y)).toString() + \"px\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"bottom\":\r\n\t\t\t\t\t\tthis._elements.wrapper.style.top = \"auto\";\r\n\t\t\t\t\t\tthis._elements.wrapper.style.bottom = \"0\";\r\n\t\t\t\t\t\tthis._elements.wrapper.style.marginTop = (this._shift.y + this._tempShift.y).toString();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tthis._elements.wrapper.style.top = this.toStyle(this.top) || \"auto\";\r\n\t\t\t\t\t\tthis._elements.wrapper.style.bottom = this.toStyle(this.bottom) || \"auto\";\r\n\t\t\t\t\t\tthis._elements.wrapper.style.marginTop = (this._shift.y + this._tempShift.y).toString();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t}, 1);\r\n\t\t}, 1);\r\n\r\n\t}\r\n\r\n\tprotected setupDragging(): void {\r\n\t\tif (this.draggable) {\r\n\t\t\tif (!this._IOs.wrapper.events.has(\"drag\")) {\r\n\t\t\t\tthis._IOs.wrapper.events.on(\"drag\", (ev) => {\r\n\t\t\t\t\tthis._tempShift.x = ev.shift.x;\r\n\t\t\t\t\tthis._tempShift.y = ev.shift.y;\r\n\t\t\t\t\tthis.positionElement(false);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (!this._IOs.wrapper.events.has(\"dragstop\")) {\r\n\t\t\t\tthis._IOs.wrapper.events.on(\"dragstop\", (ev) => {\r\n\t\t\t\t\tthis._shift.x += this._tempShift.x;\r\n\t\t\t\t\tthis._shift.y += this._tempShift.y;\r\n\t\t\t\t\tthis._tempShift.x = 0;\r\n\t\t\t\t\tthis._tempShift.y = 0;\r\n\t\t\t\t\tthis.positionElement(false);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// @todo Remove events\r\n\t\t}\r\n\t}\r\n\r\n\tprotected toStyle(value: number | Percent): string {\r\n\t\tif (!$type.hasValue(value)) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\telse if ($type.isNumber(value)) {\r\n\t\t\treturn \"\" + value + \"px\";\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn value.toString();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * A prefix that is applied to class names of various popup elements.\r\n\t *\r\n\t * @return {string} Class name prefix\r\n\t */\r\n\tpublic get classPrefix(): string {\r\n\t\treturn this.adapter.apply(\"classPrefix\", this._classPrefix);\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} value Class name prefix\r\n\t */\r\n\tpublic set classPrefix(value: string) {\r\n\t\tthis._classPrefix = value;\r\n\t}\r\n\r\n\t/**\r\n\t * Popup content.\r\n\t *\r\n\t * Popup content can be any valid HTML, including CSS.\r\n\t *\r\n\t * @param {string} value Popup content\r\n\t */\r\n\tpublic set content(value: string) {\r\n\t\tif (this._content != value) {\r\n\t\t\tthis._content = value;\r\n\t\t\tif (!this._elements.content) {\r\n\t\t\t\tthis.createContentElement();\r\n\t\t\t}\r\n\t\t\tthis._elements.content.innerHTML = value;\r\n\t\t\tthis.positionElement();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {string} Popup content\r\n\t */\r\n\tpublic get content(): string {\r\n\t\treturn this.adapter.apply(\"content\", this._content);\r\n\t}\r\n\r\n\tprotected getClassNames() {\r\n\t\treturn this.adapter.apply(\"classNames\", {\r\n\t\t\twrapperClass: this.classPrefix + \"\",\r\n\t\t\ttitleClass: this.classPrefix + \"-title\",\r\n\t\t\tcontentClass: this.classPrefix + \"-content\",\r\n\t\t\tcurtainClass: this.classPrefix + \"-curtain\",\r\n\t\t\tcloseClass: this.classPrefix + \"-close\"\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Creates content element.\r\n\t */\r\n\tprotected createContentElement(): void {\r\n\r\n\t\t// Check if it's created already\r\n\t\tif (this._elements.wrapper) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Get class names for popup elements\r\n\t\tlet classNames = this.getClassNames();\r\n\r\n\t\t// Create content element\r\n\t\tlet wrapper = document.createElement(\"div\");\r\n\t\twrapper.className = classNames.contentClass;\r\n\t\twrapper.style.opacity = \"0.01\";\r\n\r\n\t\t// Create close button\r\n\t\tlet close = document.createElement(\"a\");\r\n\t\tclose.className = classNames.closeClass;\r\n\r\n\t\t// Content title\r\n\t\tlet title = document.createElement(\"div\");\r\n\t\ttitle.innerHTML = this.title;\r\n\t\ttitle.className = classNames.titleClass;\r\n\t\tif (!this.title) {\r\n\t\t\ttitle.style.display = \"none\";\r\n\t\t}\r\n\r\n\t\t// Content div\r\n\t\tlet content = document.createElement(\"div\");\r\n\t\tcontent.innerHTML = this.content;\r\n\r\n\t\t// Set up events for content\r\n\t\tthis._IOs.wrapper = getInteraction().getInteraction(wrapper);\r\n\t\tthis._disposers.push(this._IOs.wrapper);\r\n\r\n\t\t// Set hover/out events\r\n\t\tthis._IOs.wrapper.events.on(\"over\", this._disablePointers, this);\r\n\t\tthis._IOs.wrapper.events.on(\"out\", this._releasePointers, this);\r\n\r\n\t\t// Create an InteractionObject for close\r\n\t\tthis._IOs.close = getInteraction().getInteraction(close);\r\n\t\tthis._disposers.push(this._IOs.close);\r\n\r\n\t\t// Hide close for now\r\n\t\tclose.style.visibility = \"hidden\";\r\n\r\n\t\t// Add accessible stuff\r\n\t\twrapper.setAttribute(\"role\", \"dialog\");\r\n\t\twrapper.setAttribute(\"aria-label\", this.adapter.apply(\"readerTitle\", this.readerTitle));\r\n\r\n\t\t// Add to wrapper\r\n\t\twrapper.appendChild(close);\r\n\t\twrapper.appendChild(title);\r\n\t\twrapper.appendChild(content);\r\n\t\tthis.container.appendChild(wrapper);\r\n\r\n\t\t// Save for later access\r\n\t\tthis._elements.wrapper = wrapper;\r\n\t\tthis._elements.content = content;\r\n\t\tthis._elements.title = title;\r\n\r\n\t\t// Load CSS\r\n\t\tif (this.defaultStyles) {\r\n\t\t\tthis.loadDefaultCSS();\r\n\t\t}\r\n\r\n\t\t// Create curtain as well\r\n\t\tthis.createCurtainElement();\r\n\r\n\t\t// Apply events\r\n\t\tthis._applyEvents();\r\n\r\n\t\t// Draggable?\r\n\t\tthis.setupDragging();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Popup ttile.\r\n\t *\r\n\t * Popup title can be any valid HTML, including CSS.\r\n\t * @param {string} value Popup content\r\n\t */\r\n\tpublic set title(value: string) {\r\n\t\tif (this._title != value) {\r\n\t\t\tthis._title = value;\r\n\t\t\tif (!this._elements.content) {\r\n\t\t\t\tthis.createContentElement();\r\n\t\t\t}\r\n\t\t\tthis._elements.title.innerHTML = value;\r\n\t\t\tthis.positionElement();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {string} Popup content\r\n\t */\r\n\tpublic get title(): string {\r\n\t\treturn this.adapter.apply(\"title\", this._title);\r\n\t}\r\n\r\n\t/**\r\n\t * Is popup closable?\r\n\t *\r\n\t * If it is, it can be closed in a number of ways, e.g. by hitting ESC key,\r\n\t * clicking curtain, or clicking the close button.\r\n\t *\r\n\t * If it is not closable, the only way to close it is via `hide()` call.\r\n\t *\r\n\t * @param {boolean} value Closable?\r\n\t */\r\n\tpublic set closable(value: boolean) {\r\n\t\tif (value !== this._closable) {\r\n\t\t\tthis._closable = value;\r\n\t\t\tthis._applyEvents();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Closable?\r\n\t */\r\n\tpublic get closable(): boolean {\r\n\t\treturn this._closable;\r\n\t}\r\n\r\n\t/**\r\n\t * Should popup use default CSS?\r\n\t *\r\n\t * If default CSS is disabled, an external CSS should handle the look of the\r\n\t * popup, since it will look quite out of place otherwise.\r\n\t *\r\n\t * @default true\r\n\t * @param {string} Use default CSS?\r\n\t */\r\n\tpublic set defaultStyles(value: boolean) {\r\n\t\tif (this._defaultStyles != value) {\r\n\t\t\tthis._defaultStyles = value;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Use default CSS?\r\n\t */\r\n\tpublic get defaultStyles(): boolean {\r\n\t\treturn this.adapter.apply(\"defaultStyles\", this._defaultStyles);\r\n\t}\r\n\r\n\t/**\r\n\t * Should popup use dim out all content behind it?\r\n\t *\r\n\t * @default false\r\n\t * @param {boolean} Show curtain?\r\n\t */\r\n\tpublic set showCurtain(value: boolean) {\r\n\t\tif (this._showCurtain != value) {\r\n\t\t\tthis._showCurtain = value;\r\n\t\t\tif (this._elements.curtain) {\r\n\t\t\t\tthis._elements.curtain.style.display = value ? \"block\" : \"none\";\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Show curtain?\r\n\t */\r\n\tpublic get showCurtain(): boolean {\r\n\t\treturn this.adapter.apply(\"showCurtain\", this._showCurtain);\r\n\t}\r\n\r\n\t/**\r\n\t * Creates curtain element.\r\n\t */\r\n\tprotected createCurtainElement(): void {\r\n\r\n\t\t// Get class names for popup elements\r\n\t\tlet classNames = this.getClassNames();\r\n\r\n\t\t// Create the curtain\r\n\t\tlet curtain = document.createElement(\"div\");\r\n\t\tcurtain.className = classNames.curtainClass;\r\n\r\n\t\t// Append curtain to wrapper\r\n\t\tthis.container.appendChild(curtain);\r\n\r\n\t\t// Create an InteractionObject for curtain because we might need to\r\n\t\t// set interactions on it\r\n\t\tthis._IOs.curtain = getInteraction().getInteraction(curtain);\r\n\r\n\t\t// Add Curtain IO to disposers\r\n\t\tthis._disposers.push(this._IOs.curtain);\r\n\r\n\t\t// Set events to disable underlying interactivity\r\n\t\tthis._IOs.curtain.events.on(\"over\", this._disablePointers, this);\r\n\t\tthis._IOs.curtain.events.on(\"out\", this._releasePointers, this);\r\n\r\n\t\t// Save for later\r\n\t\tthis._elements.curtain = curtain;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Can the popup be dragged with a pointer?\r\n\t *\r\n\t * @default false\r\n\t * @param {boolean} Show curtain?\r\n\t */\r\n\tpublic set draggable(value: boolean) {\r\n\t\tif (this._draggable != value) {\r\n\t\t\tthis._draggable = value;\r\n\t\t\tthis.setupDragging();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Show curtain?\r\n\t */\r\n\tpublic get draggable(): boolean {\r\n\t\treturn this.adapter.apply(\"draggable\", this._draggable);\r\n\t}\r\n\r\n\t/**\r\n\t * Horizontal positioning of the content window.\r\n\t *\r\n\t * Available options: \"left\", \"center\" (default), \"right\", and \"none\".\r\n\t *\r\n\t * @default \"center\"\r\n\t * @param {Align} Horizontal position\r\n\t */\r\n\tpublic set align(value: Align) {\r\n\t\tif (this._align != value) {\r\n\t\t\tthis._align = value;\r\n\t\t\tthis.positionElement();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Horizontal position\r\n\t */\r\n\tpublic get align(): Align {\r\n\t\treturn this.adapter.apply(\"align\", this._align);\r\n\t}\r\n\r\n\t/**\r\n\t * Vertical positioning of the content window.\r\n\t *\r\n\t * Available options: \"top\", \"middle\" (default), \"bottom\", and \"none\".\r\n\t *\r\n\t * @default \"middle\"\r\n\t * @param {VerticalAlign} Vertical position\r\n\t */\r\n\tpublic set verticalAlign(value: VerticalAlign) {\r\n\t\tif (this._verticalAlign != value) {\r\n\t\t\tthis._verticalAlign = value;\r\n\t\t\tthis.positionElement();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Vertical position\r\n\t */\r\n\tpublic get verticalAlign(): VerticalAlign {\r\n\t\treturn this.adapter.apply(\"verticalAlign\", this._verticalAlign);\r\n\t}\r\n\r\n\t/**\r\n\t * \"left\" coordinate of a non-aligned (`align = \"none\"`) popup.\r\n\t *\r\n\t * Can be either absolute pixel value, or relative (`Percent`).\r\n\t *\r\n\t * Setting this property will automatically set `align` to \"none\".\r\n\t *\r\n\t * NOTE: The position is relative to the chart container.\r\n\t *\r\n\t * @param {number | Percent} Left\r\n\t */\r\n\tpublic set left(value: number | Percent) {\r\n\t\tif (this.left != value) {\r\n\t\t\tthis._left = value;\r\n\t\t\tthis._align = \"none\";\r\n\t\t\tthis.positionElement();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Left\r\n\t */\r\n\tpublic get left(): number | Percent {\r\n\t\treturn this.adapter.apply(\"left\", this._left);\r\n\t}\r\n\r\n\t/**\r\n\t * \"right\" coordinate of a non-aligned (`align = \"none\"`) popup.\r\n\t *\r\n\t * Can be either absolute pixel value, or relative (`Percent`).\r\n\t *\r\n\t * Setting this property will automatically set `align` to \"none\".\r\n\t *\r\n\t * NOTE: The position is relative to the chart container.\r\n\t *\r\n\t * @param {number | Percent} Right\r\n\t */\r\n\tpublic set right(value: number | Percent) {\r\n\t\tif (this.right != value) {\r\n\t\t\tthis._right = value;\r\n\t\t\tthis._align = \"none\";\r\n\t\t\tthis.positionElement();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Right\r\n\t */\r\n\tpublic get right(): number | Percent {\r\n\t\treturn this.adapter.apply(\"right\", this._right);\r\n\t}\r\n\r\n\t/**\r\n\t * \"top\" coordinate of a non-aligned (`verticalAlign = \"none\"`) popup.\r\n\t *\r\n\t * Can be either absolute pixel value, or relative (`Percent`).\r\n\t *\r\n\t * Setting this property will automatically set `verticalAlign` to \"none\".\r\n\t *\r\n\t * NOTE: The position is relative to the chart container.\r\n\t *\r\n\t * @param {number | Percent} Top\r\n\t */\r\n\tpublic set top(value: number | Percent) {\r\n\t\tif (this.top != value) {\r\n\t\t\tthis._top = value;\r\n\t\t\tthis._verticalAlign = \"none\";\r\n\t\t\tthis.positionElement();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Top\r\n\t */\r\n\tpublic get top(): number | Percent {\r\n\t\treturn this.adapter.apply(\"top\", this._top);\r\n\t}\r\n\r\n\t/**\r\n\t * \"bottom\" coordinate of a non-aligned (`verticalAlign = \"none\"`) popup.\r\n\t *\r\n\t * Can be either absolute pixel value, or relative (`Percent`).\r\n\t *\r\n\t * Setting this property will automatically set `verticalAlign` to \"none\".\r\n\t *\r\n\t * NOTE: The position is relative to the chart container.\r\n\t *\r\n\t * @param {number | Percent} Bottom\r\n\t */\r\n\tpublic set bottom(value: number | Percent) {\r\n\t\tif (this.bottom != value) {\r\n\t\t\tthis._bottom = value;\r\n\t\t\tthis._verticalAlign = \"none\";\r\n\t\t\tthis.positionElement();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Bottom\r\n\t */\r\n\tpublic get bottom(): number | Percent {\r\n\t\treturn this.adapter.apply(\"bottom\", this._bottom);\r\n\t}\r\n\r\n\t/**\r\n\t * Loads popup CSS.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic loadDefaultCSS(): void {\r\n\t\tif (!this._cssLoaded) {\r\n\t\t\tthis._disposers.push(popupCSS(this.classPrefix));\r\n\t\t\t$object.each(this._elements, (key, el) => {\r\n\t\t\t\tel.style.display = \"initial\";\r\n\t\t\t});\r\n\t\t\tthis._cssLoaded = true;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * If popup is closable, this method adds various events to popup elements.\r\n\t */\r\n\tprotected _applyEvents(): void {\r\n\t\tif (this._IOs.close) {\r\n\t\t\tif (this.closable) {\r\n\t\t\t\tthis._IOs.close.element.style.visibility = \"visible\";\r\n\r\n\t\t\t\tlet disposers = [\r\n\t\t\t\t\tgetInteraction().body.events.on(\"keyup\", (ev) => {\r\n\t\t\t\t\t\tif (keyboard.isKey(ev.event, \"esc\") && this.closable) {\r\n\t\t\t\t\t\t\tthis.hide()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tthis._IOs.close.events.on(\"hit\", (ev) => {\r\n\t\t\t\t\t\tthis.hide();\r\n\t\t\t\t\t})\r\n\t\t\t\t];\r\n\t\t\t\tdisposers.push(this._IOs.curtain.events.on(\"hit\", (ev) => {\r\n\t\t\t\t\tif (this.showCurtain) {\r\n\t\t\t\t\t\tthis.hide();\r\n\t\t\t\t\t}\r\n\t\t\t\t}));\r\n\t\t\t\tthis._disposers.push(new MultiDisposer(disposers));\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._IOs.close.element.style.visibility = \"hidden\";\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Disables interactivity on parent chart.\r\n\t */\r\n\tprotected _disablePointers(): void {\r\n\t\tthis._spriteInteractionsEnabled = this.sprite.interactionsEnabled;\r\n\t\tthis.sprite.interactionsEnabled = false;\r\n\t}\r\n\r\n\t/**\r\n\t * Releases temporarily disabled pointers on parent chart.\r\n\t */\r\n\tprotected _releasePointers(): void {\r\n\t\tif ($type.hasValue(this._spriteInteractionsEnabled)) {\r\n\t\t\tthis.sprite.interactionsEnabled = this._spriteInteractionsEnabled;\r\n\t\t\tthis._spriteInteractionsEnabled = undefined;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Copies all properties and related data from different element.\r\n\t *\r\n\t * @param {this} object Source element\r\n\t */\r\n\tpublic copyFrom(source: this): void {\r\n\t\tsuper.copyFrom(source);\r\n\t\tthis.container = source.container;\r\n\t\tthis.sprite = source.sprite;\r\n\t\tthis.classPrefix = source.classPrefix;\r\n\t\tthis.content = source.content;\r\n\t\tthis.title = source.title;\r\n\t\tthis.readerTitle = source.readerTitle;\r\n\t\tthis.defaultStyles = source.defaultStyles;\r\n\t\tthis.showCurtain = source.showCurtain;\r\n\t\tthis.align = source.align;\r\n\t\tthis.verticalAlign = source.verticalAlign;\r\n\t\tthis.left = source.left;\r\n\t\tthis.right = source.right;\r\n\t\tthis.top = source.top;\r\n\t\tthis.bottom = source.bottom;\r\n\t\tthis.adapter.copyFrom(source.adapter);\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/elements/Popup.ts","/**\r\n * Modal class is used to display information over chart area.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Popup, IPopupAdapters } from \"./Popup\";\r\nimport { Adapter } from \"../utils/Adapter\";\r\n\r\n/**\r\n * Represents a list of available adapters for Export.\r\n */\r\nexport interface IModalAdapters extends IPopupAdapters {}\r\n\r\n/**\r\n * Shows an HTML modal which covers window or a chart area.\r\n *\r\n * @todo Positioning over whole window\r\n */\r\nexport class Modal extends Popup {\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IExportAdapters}\r\n\t */\r\n\tpublic _adapter!: IModalAdapters;\r\n\r\n\t/**\r\n\t * Adapter.\r\n\t *\r\n\t * @type {Adapter<Modal, IModalAdapters>}\r\n\t */\r\n\tpublic adapter: Adapter<Modal, IModalAdapters> = new Adapter<Modal, IModalAdapters>(this);\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"Modal\";\r\n\t\tthis.showCurtain = true;\r\n\t\tthis.draggable = false;\r\n\t}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/elements/Modal.ts","/**\r\n * This module defines a [[Validatable]] class which can be used by all\r\n * non-[[Sprite]] classes to use system beats to revalidate themselves.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { BaseObjectEvents } from \"../Base\";\r\nimport { registry } from \"../Registry\";\r\n\r\n/**\r\n * This module defines a [[Validatable]] class which can be used by all\r\n * non-[[Sprite]] classes to use system update cycle to revalidate themselves.\r\n *\r\n * @ignore Exclude from docs\r\n */\r\nexport class Validatable extends BaseObjectEvents {\r\n\r\n\t/**\r\n\t * Is invalid and should be revalidated?\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tprotected _invalid: boolean = false;\r\n\r\n\t/**\r\n\t * Invalidates the element, so that it can re-validate/redraw itself in the\r\n\t * next cycle.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic invalidate(): void {\r\n\t\tif (this._invalid === false) {\r\n\t\t\tthis._invalid = true;\r\n\t\t\tregistry.events.on(\"exitframe\", this.validate, this);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Validates itself.\r\n\t *\r\n\t * Most probably the extending class will have an overriding `validate()`\r\n\t * method which will do actual work, as well as call this method using\r\n\t * `super.validate()`.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic validate(): void {\r\n\t\tif (this._invalid === true) {\r\n\t\t\tthis._invalid = false;\r\n\t\t\tregistry.events.off(\"exitframe\", this.validate, this);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/utils/Validatable.ts","/**\r\n * CSV parser.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { DataParser, IDataParserOptions } from \"./DataParser\";\r\nimport { DateFormatter } from \"../formatters/DateFormatter\";\r\nimport * as $type from \"../utils/Type\";\r\n\r\n/**\r\n * Defines options for CSV format parser\r\n */\r\nexport interface ICSVOptions extends IDataParserOptions {\r\n\r\n\t/**\r\n\t * A delimiter character for columns.\r\n\t *\r\n\t * @default ','\r\n\t * @type {string}\r\n\t */\r\n\tdelimiter?: string;\r\n\r\n\t/**\r\n\t * The data is in reverse order.\r\n\t *\r\n\t * If iset to `true`, parser will invert the order of the data items before\r\n\t * passing back the data.\r\n\t *\r\n\t * @default false\r\n\t * @type {number}\r\n\t */\r\n\treverse?: boolean;\r\n\r\n\t/**\r\n\t * Skip a number of rows from the beginning of the data.\r\n\t *\r\n\t * Useful if your data contains non-data headers, such as column names.\r\n\t *\r\n\t * @default 0\r\n\t * @type {number}\r\n\t */\r\n\tskipRows?: number;\r\n\r\n\t/**\r\n\t * Skip empty rows.\r\n\t *\r\n\t * If set to `false`, parser will generate empty data points for empty rows\r\n\t * in data.\r\n\t *\r\n\t * @default true\r\n\t * @type {boolean}\r\n\t */\r\n\tskipEmpty?: boolean;\r\n\r\n\t/**\r\n\t * Use the first row in data to generte column names.\r\n\t *\r\n\t * Normally, parser will name each column `col0`, `col1`, etc.\r\n\t *\r\n\t * Setting this to `true` will make the parser look at the first row, for\r\n\t * actual column names.\r\n\t *\r\n\t * @default false\r\n\t * @type {boolean}\r\n\t */\r\n\tuseColumnNames?: boolean;\r\n\r\n\t/**\r\n\t * A list of fields that should be treaded as numeric.\r\n\t *\r\n\t * Any information container in such fields will be converted to `number`.\r\n\t *\r\n\t * @type {string[]}\r\n\t */\r\n\tnumberFields?: string[];\r\n\r\n\t/**\r\n\t * A list of fields that hold date/time infromation.\r\n\t *\r\n\t * Parser will try to convert such fields into `Date` objects.\r\n\t *\r\n\t * @type {string[]}\r\n\t */\r\n\tdateFields?: string[];\r\n\r\n\t/**\r\n\t * A date formatted to be used when parsing dates.\r\n\t *\r\n\t * @type {DateFormatter}\r\n\t */\r\n\tdateFormatter?: DateFormatter;\r\n}\r\n\r\n/**\r\n * Define possible separators.\r\n */\r\nlet separators = [\",\", \";\", \"\\t\"];\r\n\r\n/**\r\n * A parser for CSV format.\r\n *\r\n * @important\r\n */\r\nexport class CSVParser extends DataParser {\r\n\r\n\t/**\r\n\t * Tests if the format is CSV.\r\n\t *\r\n\t * @param  {string}   data  Source data\r\n\t * @return {boolean}        Is it CSV?\r\n\t */\r\n\tstatic isCSV(data: string): boolean {\r\n\t\treturn CSVParser.getDelimiterFromData(data) ? true : false;\r\n\t}\r\n\r\n\t/**\r\n\t * Tries to determine a column separator.\r\n\t *\r\n\t * @param  {string}  data  Source data\r\n\t * @return {string}        Separator\r\n\t */\r\n\tstatic getDelimiterFromData(data: string): string {\r\n\r\n\t\t// We're going to take first few lines of the CSV with different\r\n\t\t// possible separators and check if it results in same number of columns.\r\n\t\t// If it does, we're going to assume it's a CSV\r\n\t\tlet lines = data.split(\"\\n\");\r\n\t\tlet separator: string;\r\n\r\n\t\t// TODO replace with iterators\r\n\t\tfor (let sep of separators) {\r\n\t\t\tlet columns = 0,\r\n\t\t\t\tlineColums = 0;\r\n\t\t\tfor (let i in lines) {\r\n\r\n\t\t\t\t// Get number of columns in a line\r\n\t\t\t\tcolumns = lines[i].split(sep).length;\r\n\r\n\t\t\t\tif (columns > 1) {\r\n\r\n\t\t\t\t\t// More than one column - possible candidate\r\n\t\t\t\t\tif (lineColums === 0) {\r\n\t\t\t\t\t\t// First line\r\n\t\t\t\t\t\tlineColums = columns;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (columns != lineColums) {\r\n\t\t\t\t\t\t// Incorrect number of columns, give up on this separator\r\n\t\t\t\t\t\tlineColums = 0;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\r\n\t\t\t\t\t// Not this separator\r\n\t\t\t\t\t// Not point in continuing\r\n\t\t\t\t\tlineColums = 0;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Check if we have a winner\r\n\t\t\tif (lineColums) {\r\n\t\t\t\tseparator = sep;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn separator;\r\n\t}\r\n\r\n\t/**\r\n\t * Content-type suitable for CSV format.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tpublic type: string = \"text/csv\";\r\n\r\n\t/**\r\n\t * Parser options.\r\n\t *\r\n\t * @see {@link ICSVOptions} for description of each option\r\n\t * @type {ICSVOptions}\r\n\t */\r\n\tpublic options: ICSVOptions = {\r\n\t\tdelimiter: \"\",\r\n\t\treverse: false,\r\n\t\tskipRows: 0,\r\n\t\tskipEmpty: true,\r\n\t\tuseColumnNames: false\r\n\t};\r\n\r\n\t/**\r\n\t * Parses and returns data.\r\n\t *\r\n\t * @param  {string}  data  Unparsed data\r\n\t * @return {any}           Parsed data\r\n\t */\r\n\tpublic parse(csv: string): any[] {\r\n\r\n\t\t// Check if we have delimiter set\r\n\t\tif (!this.options.delimiter) {\r\n\t\t\tthis.options.delimiter = CSVParser.getDelimiterFromData(csv);\r\n\t\t}\r\n\r\n\t\t// Get CSV data as array\r\n\t\tlet data = this.CSVToArray(csv, this.options.delimiter);\r\n\r\n\t\t// Do we need to cast some fields to numbers?\r\n\t\tlet empty = $type.hasValue(this.options.emptyAs);\r\n\t\tlet numbers = this.parsableNumbers;\r\n\t\tlet dates = this.parsableDates;\r\n\r\n\t\t// Init resuling array\r\n\t\tlet res: any[] = [],\r\n\t\t\tcols: string[] = [],\r\n\t\t\tcol: string,\r\n\t\t\ti: number;\r\n\r\n\t\t// First row holds column names?\r\n\t\tif (this.options.useColumnNames) {\r\n\t\t\tcols = data.shift();\r\n\r\n\t\t\t// Normalize column names\r\n\t\t\tfor (let x = 0; x < cols.length; x++) {\r\n\t\t\t\t// trim\r\n\t\t\t\tcol = cols[x].replace(/^\\s+|\\s+$/gm, \"\");\r\n\r\n\t\t\t\t// Check for empty\r\n\t\t\t\tif (\"\" === col)\r\n\t\t\t\t\tcol = \"col\" + x;\r\n\r\n\t\t\t\tcols[x] = col;\r\n\t\t\t}\r\n\r\n\t\t\tif (0 < this.options.skipRows)\r\n\t\t\t\tthis.options.skipRows--;\r\n\t\t}\r\n\r\n\t\t// Skip rows\r\n\t\tfor (i = 0; i < this.options.skipRows; i++)\r\n\t\t\tdata.shift();\r\n\r\n\t\t// Iterate through the result set\r\n\t\tlet row;\r\n\t\twhile ((row = this.options.reverse ? data.pop() : data.shift())) {\r\n\t\t\tif (this.options.skipEmpty && row.length === 1 && row[0] === \"\")\r\n\t\t\t\tcontinue;\r\n\t\t\tlet dataPoint: any = {};\r\n\t\t\tfor (i = 0; i < row.length; i++) {\r\n\t\t\t\tcol = undefined === cols[i] ? \"col\" + i : cols[i];\r\n\t\t\t\tdataPoint[col] = row[i] === \"\" ? this.options.emptyAs : row[i];\r\n\r\n\t\t\t\t// Convert\r\n\t\t\t\tif (empty) {\r\n\t\t\t\t\trow[col] = this.maybeToEmpty(dataPoint[col]);\r\n\t\t\t\t}\r\n\t\t\t\tif (numbers) {\r\n\t\t\t\t\trow[col] = this.maybeToNumber(col, dataPoint[col]);\r\n\t\t\t\t}\r\n\t\t\t\tif (dates) {\r\n\t\t\t\t\trow[col] = this.maybeToDate(col, dataPoint[col]);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\tres.push(dataPoint);\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n \t * Converts CSV into array.\r\n \t *\r\n \t * The functionality of this function is taken from here:\r\n \t * http://www.bennadel.com/blog/1504-ask-ben-parsing-csv-strings-with-javascript-exec-regular-expression-command.htm\r\n \t *\r\n \t * @param  {string}  data       Source data\r\n \t * @param  {string}  delimiter  Column delimiter\r\n \t * @return {any[]}              Parsed array\r\n \t */\r\n\tpublic CSVToArray(data: string, delimiter: string): any[] {\r\n\r\n\t\t// Check to see if the delimiter is defined. If not,\r\n\t\t// then default to comma.\r\n\t\tdelimiter = (delimiter || ',');\r\n\r\n\t\t// Create a regular expression to parse the CSV values.\r\n\t\tlet objPattern = new RegExp(\r\n\t\t\t(\r\n\t\t\t\t// Delimiters.\r\n\t\t\t\t\"(\\\\\" + delimiter + \"|\\\\r?\\\\n|\\\\r|^)\" +\r\n\r\n\t\t\t\t// Quoted fields.\r\n\t\t\t\t\"(?:\\\"([^\\\"]*(?:\\\"\\\"[^\\\"]*)*)\\\"|\" +\r\n\r\n\t\t\t\t// Standard fields.\r\n\t\t\t\t\"([^\\\"\\\\\" + delimiter + \"\\\\r\\\\n]*))\"\r\n\t\t\t),\r\n\t\t\t\"gi\"\r\n\t\t);\r\n\r\n\r\n\t\t// Create an array to hold our data. Give the array\r\n\t\t// a default empty first row.\r\n\t\tlet arrData: any[] = [\r\n\t\t\t[]\r\n\t\t];\r\n\r\n\t\t// Create an array to hold our individual pattern\r\n\t\t// matching groups.\r\n\t\tlet arrMatches = null;\r\n\r\n\t\t// Keep looping over the regular expression matches\r\n\t\t// until we can no longer find a match.\r\n\t\twhile ((arrMatches = objPattern.exec(data))) {\r\n\r\n\t\t\t// Get the delimiter that was found.\r\n\t\t\tlet strMatchedDelimiter = arrMatches[1];\r\n\r\n\t\t\t// Check to see if the given delimiter has a length\r\n\t\t\t// (is not the start of string) and if it matches\r\n\t\t\t// field delimiter. If id does not, then we know\r\n\t\t\t// that this delimiter is a row delimiter.\r\n\t\t\tif (\r\n\t\t\t\tstrMatchedDelimiter.length &&\r\n\t\t\t\t(strMatchedDelimiter !== delimiter)\r\n\t\t\t) {\r\n\r\n\t\t\t\t// Since we have reached a new row of data,\r\n\t\t\t\t// add an empty row to our data array.\r\n\t\t\t\tarrData.push([]);\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Now that we have our delimiter out of the way,\r\n\t\t\t// let's check to see which kind of value we\r\n\t\t\t// captured (quoted or unquoted).\r\n\t\t\tlet strMatchedValue;\r\n\t\t\tif (arrMatches[2]) {\r\n\r\n\t\t\t\t// We found a quoted value. When we capture\r\n\t\t\t\t// this value, unescape any double quotes.\r\n\t\t\t\tstrMatchedValue = arrMatches[2].replace(\r\n\t\t\t\t\tnew RegExp(\"\\\"\\\"\", \"g\"),\r\n\t\t\t\t\t\"\\\"\"\r\n\t\t\t\t);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// We found a non-quoted value.\r\n\t\t\t\tstrMatchedValue = arrMatches[3];\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Now that we have our value string, let's add\r\n\t\t\t// it to the data array.\r\n\t\t\tarrData[arrData.length - 1].push(strMatchedValue);\r\n\t\t}\r\n\r\n\t\t// Return the parsed data.\r\n\t\treturn (arrData);\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/data/CSVParser.ts","/**\r\n * Data parser module.\r\n */\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { DateFormatter } from \"../formatters/DateFormatter\";\r\nimport * as $utils from \"../utils/Utils\";\r\nimport * as $type from \"../utils/Type\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines common options for all data parsers.\r\n */\r\nexport interface IDataParserOptions {\r\n\r\n\t/**\r\n\t * Empty values (e.g. empty strings, `null`, etc.) will be replaced with\r\n\t * this.\r\n\t * \r\n\t * @type {any}\r\n\t */\r\n\temptyAs?: any;\r\n\r\n\t/**\r\n\t * List of fields in data that hold numeric values. Parser will try to \r\n\t * convert the value in those fields to a `number`.\r\n\t * \r\n\t * @type {string[]}\r\n\t */\r\n\tnumberFields?: string[];\r\n\r\n\t/**\r\n\t * List of fields in data that need to be treated as Dates, i.e. converted \r\n\t * to `Date` objects from whatever source format they are currently in.\r\n\t * \r\n\t * @type {string[]}\r\n\t */\r\n\tdateFields?: string[];\r\n\r\n\t/**\r\n\t * An instance of [[DateFormatter]] to use when parsing string-based dates.\r\n\t * If it's not set, the parser will create it's own instance of \r\n\t * [[DateFormatter]], should any date parsing required. (`dateFields` is set)\r\n\t *\r\n\t * Unless `dateFormat` is set in parser options, the parser will try to look\r\n\t * for `dateFormat` in `dateFormatter`.\r\n\t *\r\n\t * @see {@link https://www.amcharts.com/docs/v4/concepts/formatters/formatting-date-time/#Parsing_Dates} Tutorial on date parsing\r\n\t * @type {DateFormatter}\r\n\t */\r\n\tdateFormatter?: DateFormatter;\r\n\r\n\t/**\r\n\t * Override date format set in `dateFormatter`.\r\n\t *\r\n\t * @see {@link https://www.amcharts.com/docs/v4/concepts/formatters/formatting-date-time/#Parsing_Dates} Tutorial on date parsing \r\n\t * @type {string}\r\n\t */\r\n\tdateFormat?: string;\r\n\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Base class for the data parsers.\r\n */\r\nexport class DataParser {\r\n\r\n\t/**\r\n\t * Content type, relevant to the specific format.\r\n\t * \r\n\t * @type {string}\r\n\t */\r\n\tpublic type: string;\r\n\r\n\t/**\r\n\t * Parser options.\r\n\t *\r\n\t * @see {@link IDataParserOptions} for description of each option\r\n\t * @type {IDataParserOptions}\r\n\t */\r\n\tpublic options: IDataParserOptions;\r\n\r\n\t/**\r\n\t * A \"placeholder\" function for real parsers to override.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {string}  data  Source data\r\n\t * @return {any}           Parsed data (empty)\r\n\t */\r\n\tpublic parse(data: string): any {\r\n\t\treturn [];\r\n\t};\r\n\r\n\t/**\r\n\t * Checks if there are any numeric fields that need to be converted to\r\n\t * numbers.\r\n\t * \r\n\t * @return {boolean} Numeric fields?\r\n\t */\r\n\tprotected get parsableNumbers(): boolean {\r\n\t\treturn this.options.numberFields && (this.options.numberFields.length > 0);\r\n\t}\r\n\r\n\t/**\r\n\t * Converts a value to 'number' if it is in `numberFields`.\r\n\t * \r\n\t * @param  {string}  field  Field name\r\n\t * @param  {any}     value  Value\r\n\t * @return {any}            Parsed or original value\r\n\t */\r\n\tprotected maybeToNumber(field: string, value: any): any {\r\n\t\tif (this.options.numberFields.indexOf(field) !== -1) {\r\n\t\t\treturn $utils.anyToNumber(value);\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if there are any date fields that need to be converted to `Date`\r\n\t * objects.\r\n\t * \r\n\t * @return {boolean} Date fields?\r\n\t */\r\n\tprotected get parsableDates(): boolean {\r\n\t\treturn this.options.dateFields && (this.options.dateFields.length > 0);\r\n\t}\r\n\r\n\t/**\r\n\t * Converts a value to `Date` if it is in `dateFields`.\r\n\t * \r\n\t * @param  {string}  field  Field name\r\n\t * @param  {any}     value  Value\r\n\t * @return {any}            Parsed or original value\r\n\t */\r\n\tprotected maybeToDate(field: string, value: any): any {\r\n\t\tif (this.options.dateFields.indexOf(field) !== -1) {\r\n\t\t\treturn this.options.dateFormatter.parse(value, this.dateFormat);\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\t/**\r\n\t * Replaces empty value with something else.\r\n\t * \r\n\t * @param  {any}  value  Source value\r\n\t * @return {any}         Source value or replacement\r\n\t */\r\n\tprotected maybeToEmpty(value: any): any {\r\n\t\tif ((!$type.hasValue(value) || value == \"\") && $type.hasValue(this.options.emptyAs)) {\r\n\t\t\treturn this.options.emptyAs;\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\t/**\r\n\t * [[DateFormatter]] object for date parsing.\r\n\t * \r\n\t * If there was not [[DateFormatter]] supplied in parser options, a new one \r\n\t * is created.\r\n\t * \r\n\t * @return {DateFormatter} Date formatter\r\n\t * @see {@link DateFormatter}\r\n\t */\r\n\tprotected get dateFormatter(): DateFormatter {\r\n\t\tif (!this.options.dateFormatter) {\r\n\t\t\tthis.options.dateFormatter = new DateFormatter;\r\n\t\t\tif (this.options.dateFormat) {\r\n\t\t\t\tthis.options.dateFormat = this.options.dateFormat;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this.options.dateFormatter;\r\n\t}\r\n\r\n\t/**\r\n\t * A date format to use when parsing dates.\r\n\t * \r\n\t * @return {string} Date format\r\n\t * @see {@link DateFormatter}\r\n\t */\r\n\tprotected get dateFormat(): string {\r\n\t\treturn this.options.dateFormat || this.dateFormatter.dateFormat;\r\n\t}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/data/DataParser.ts","/**\r\n * JSON parser.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { DataParser, IDataParserOptions } from \"./DataParser\";\r\nimport { DateFormatter } from \"../formatters/DateFormatter\";\r\nimport * as $object from \"../utils/Object\";\r\nimport * as $type from \"../utils/Type\";\r\n\r\n\r\n/**\r\n * Defines options for JSON format parser\r\n */\r\nexport interface IJSONOptions extends IDataParserOptions {\r\n\r\n\t/**\r\n\t * A list of fields that should be treaded as numeric.\r\n\t *\r\n\t * Any information container in such fields will be converted to `number`.\r\n\t *\r\n\t * @type {string[]}\r\n\t */\r\n\tnumberFields?: string[];\r\n\r\n\t/**\r\n\t * A list of fields that hold date/time infromation.\r\n\t *\r\n\t * Parser will try to convert such fields into `Date` objects.\r\n\t *\r\n\t * @type {string[]}\r\n\t */\r\n\tdateFields?: string[];\r\n\r\n\t/**\r\n\t * A date formatted to be used when parsing dates.\r\n\t * \r\n\t * @type {DateFormatter}\r\n\t */\r\n\tdateFormatter?: DateFormatter;\r\n\r\n}\r\n\r\n/**\r\n * A parser for JSON.\r\n *\r\n * @important\r\n */\r\nexport class JSONParser extends DataParser {\r\n\r\n\t/**\r\n\t * Tests if the data is valid JSON.\r\n\t * \r\n\t * @param  {string}   data  Source data\r\n\t * @return {boolean}        Is it JSON?\r\n\t */\r\n\tstatic isJSON(data: string): boolean {\r\n\t\ttry {\r\n\r\n\t\t\t// Try parsing JSON\r\n\t\t\tJSON.parse(data);\r\n\r\n\t\t\t// If we got to this point it means it's a valid JSON\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Content-type suitable for JSON format.\r\n\t * \r\n\t * @type {string}\r\n\t */\r\n\tpublic type: string = \"application/json\";\r\n\r\n\t/**\r\n\t * Parser options.\r\n\t *\r\n\t * @see {@link IJSONOptions} for description of each option\r\n\t * @type {IJSONOptions}\r\n\t */\r\n\tpublic options: IJSONOptions = {};\r\n\r\n\t/**\r\n\t * Parses and returns data.\r\n\t * \r\n\t * @param  {string}  data  Unparsed data\r\n\t * @return {any}           Parsed data\r\n\t */\r\n\tpublic parse(data: string): any {\r\n\r\n\t\t// Init return\r\n\t\tlet res: any;\r\n\r\n\t\t// Try parsing\r\n\t\ttry {\r\n\t\t\tif ($type.hasValue(JSON)) {\r\n\t\t\t\tres = JSON.parse(data);\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\r\n\t\t// Do we need to cast some fields to numbers or dates?\r\n\t\tlet empty = $type.hasValue(this.options.emptyAs);\r\n\t\tlet numbers = this.parsableNumbers;\r\n\t\tlet dates = this.parsableDates;\r\n\t\tif (Array.isArray(res) && (numbers || dates || empty)) {\r\n\r\n\t\t\t// Iterate through the data and check if it needs to be converted\r\n\t\t\tfor (let i = 0, len = res.length; i < len; i++) {\r\n\t\t\t\tlet row = res[i];\r\n\t\t\t\t$object.each(row, (key, value) => {\r\n\t\t\t\t\tif (empty) {\r\n\t\t\t\t\t\trow[key] = this.maybeToEmpty(row[key]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (numbers) {\r\n\t\t\t\t\t\trow[key] = this.maybeToNumber(key, row[key]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (dates) {\r\n\t\t\t\t\t\trow[key] = this.maybeToDate(key, row[key]);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Convert to array\r\n\t\t//return Array.isArray(res) ? res : [res];\r\n\t\treturn res;\r\n\r\n\t}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/data/JSONParser.ts","/**\r\n * Tick module\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Sprite, ISpriteProperties, ISpriteAdapters, ISpriteEvents, SpriteEventDispatcher, AMEvent } from \"../../core/Sprite\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[Tick]].\r\n */\r\nexport interface ITickProperties extends ISpriteProperties {\r\n\r\n\t/**\r\n\t * Length of the tick. (px)\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tlength?: number;\r\n\r\n}\r\n\r\n/**\r\n * Defines events for [[Tick]].\r\n */\r\nexport interface ITickEvents extends ISpriteEvents { }\r\n\r\n/**\r\n * Defines adapters for [[Tick]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface ITickAdapters extends ISpriteAdapters, ITickProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * A basic Tick class.\r\n *\r\n * A tick is a short dash, mainly connecting an object like axis or slice to\r\n * it's textual label.\r\n *\r\n * @see {@link ITickEvents} for a list of available events\r\n * @see {@link ITickAdapters} for a list of available Adapters\r\n * @important\r\n */\r\nexport class Tick extends Sprite {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ITickProperties}\r\n\t */\r\n\tpublic _properties!: ITickProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ITickAdapters}\r\n\t */\r\n\tpublic _adapter!: ITickAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {ITickEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: ITickEvents;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"Tick\";\r\n\r\n\t\tlet interfaceColors = new InterfaceColorSet();\r\n\r\n\t\tthis.fillOpacity = 0;\r\n\t\tthis.length = 6;\r\n\t\tthis.strokeOpacity = 0.2;\r\n\t\tthis.stroke = interfaceColors.getFor(\"grid\");\r\n\t\tthis.isMeasured = false;\r\n\t\tthis.nonScalingStroke = true;\r\n\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Length of the tick in pixels.\r\n\t *\r\n\t * @param {number}  value  Length (px)\r\n\t */\r\n\tpublic set length(value: number) {\r\n\t\tthis.setPropertyValue(\"length\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Length (px)\r\n\t */\r\n\tpublic get length(): number {\r\n\t\tif (this.disabled) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\treturn this.getPropertyValue(\"length\");\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"Tick\"] = Tick;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/charts/elements/Tick.ts","/**\r\n * Functionality for drawing rectangles with waved edges.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Rectangle, IRectangleProperties, IRectangleAdapters, IRectangleEvents } from \"./Rectangle\";\r\nimport { SpriteEventDispatcher, AMEvent } from \"../Sprite\";\r\nimport { IPoint } from \"../defs/IPoint\";\r\nimport { IWavedShape } from \"../defs/IWavedShape\";\r\nimport { wavedLine } from \"../rendering/Smoothing\";\r\nimport * as $path from \"../rendering/Path\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines available properties for [[WavedRectangle]].\r\n */\r\nexport interface IWavedRectangleProperties extends IRectangleProperties {\r\n\r\n\t/**\r\n\t * Wave length in pixels.\r\n\t *\r\n\t * @default 16\r\n\t * @type {number}\r\n\t */\r\n\twaveHeight?: number;\r\n\r\n\t/**\r\n\t * Wave height in pixels.\r\n\t *\r\n\t * @default 4\r\n\t * @type {number}\r\n\t */\r\n\twaveLength?: number;\r\n\r\n\t/**\r\n\t * Wave tension.\r\n\t *\r\n\t * @default 0.8\r\n\t * @type {number}\r\n\t */\r\n\ttension?: number;\r\n}\r\n\r\n/**\r\n * Defines events for [[WavedRectangle]].\r\n */\r\nexport interface IWavedRectangleEvents extends IRectangleEvents { }\r\n\r\n/**\r\n * Defines adapters for [[WavedRectangle]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface IWavedRectangleAdapters extends IRectangleAdapters, IWavedRectangleProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Draws a rectangle with waved edges.\r\n *\r\n * @see {@link IWavedRectangleEvents} for a list of available events\r\n * @see {@link IWavedRectangleAdapters} for a list of available Adapters\r\n */\r\nexport class WavedRectangle extends Rectangle implements IWavedShape {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IWavedRectangleProperties}\r\n\t */\r\n\tpublic _properties!: IWavedRectangleProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IWavedRectangleAdapters}\r\n\t */\r\n\tpublic _adapter!: IWavedRectangleAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IWavedRectangleEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IWavedRectangleEvents;\r\n\r\n\t/**\r\n\t * Top waved?\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tprotected _twaved: boolean = true;\r\n\r\n\t/**\r\n\t * Right side waved?\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tprotected _rwaved: boolean = true;\r\n\r\n\t/**\r\n\t * Bottom waved?\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tprotected _bwaved: boolean = true;\r\n\r\n\t/**\r\n\t * Left side waved?\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tprotected _lwaved: boolean = true;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\r\n\t\t// Init\r\n\t\tsuper();\r\n\t\tthis.className = \"WavedRectangle\";\r\n\r\n\t\t// Add path element\r\n\t\tthis.element = this.paper.add(\"path\");\r\n\r\n\t\t// Set defaults\r\n\t\tthis.waveLength = 16;\r\n\t\tthis.waveHeight = 4;\r\n\t\tthis.tension = 0.8;\r\n\r\n\r\n\t\t// Apply theme\r\n\t\tthis.applyTheme();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Draws the waved rectangle.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic draw(): void {\r\n\t\tsuper.draw();\r\n\r\n\t\tlet w: number = this.pixelWidth;\r\n\t\tlet h: number = this._pixelHeight;\r\n\r\n\t\tif (w > 0 && h > 0) {\r\n\t\t\tlet p1: IPoint = { x: 0, y: 0 };\r\n\t\t\tlet p2: IPoint = { x: w, y: 0 };\r\n\t\t\tlet p3: IPoint = { x: w, y: h };\r\n\t\t\tlet p4: IPoint = { x: 0, y: h };\r\n\r\n\t\t\tlet waveLength: number = this.waveLength;\r\n\t\t\tlet waveHeight: number = this.waveHeight;\r\n\r\n\t\t\tlet td: string = \"\";\r\n\t\t\tlet rd: string = \"\";\r\n\t\t\tlet bd: string = \"\";\r\n\t\t\tlet ld: string = \"\";\r\n\r\n\t\t\tif (this._twaved) {\r\n\t\t\t\ttd = wavedLine(p1, p2, waveLength, waveHeight, this.tension, true);\r\n\t\t\t}\r\n\t\t\tif (this._rwaved) {\r\n\t\t\t\tld = wavedLine(p2, p3, waveLength, waveHeight, this.tension, true);\r\n\t\t\t}\r\n\t\t\tif (this._bwaved) {\r\n\t\t\t\tbd = wavedLine(p3, p4, waveLength, waveHeight, this.tension, true);\r\n\t\t\t}\r\n\t\t\tif (this._rwaved) {\r\n\t\t\t\trd = wavedLine(p4, p1, waveLength, waveHeight, this.tension, true);\r\n\t\t\t}\r\n\r\n\t\t\tlet d: string = $path.moveTo(p1) + td + $path.lineTo(p2) + ld + $path.lineTo(p3) + bd + $path.lineTo(p4) + rd + \"z\";\r\n\r\n\t\t\tthis.element.attr({ \"d\": d });\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Wave length in pixels.\r\n\t *\r\n\t * @default 16\r\n\t * @param {number}  value  Wave length (px)\r\n\t */\r\n\tpublic set waveLength(value: number) {\r\n\t\tthis.setPropertyValue(\"waveLength\", value);\r\n\t\tthis.invalidate();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Wave length (px)\r\n\t */\r\n\tpublic get waveLength(): number {\r\n\t\treturn this.getPropertyValue(\"waveLength\");\r\n\t}\r\n\r\n\t/**\r\n\t * Wave height in pixels.\r\n\t *\r\n\t * @default 4\r\n\t * @param {number}  value  Wave height (px)\r\n\t */\r\n\tpublic set waveHeight(value: number) {\r\n\t\tthis.setPropertyValue(\"waveHeight\", value);\r\n\t\tthis.invalidate();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Wave height (px)\r\n\t */\r\n\tpublic get waveHeight(): number {\r\n\t\treturn this.getPropertyValue(\"waveHeight\");\r\n\t}\r\n\r\n\t/**\r\n\t * Sets which side should be waved or not. If particular side is set to\r\n\t * `false`, a straight line will be drawn on that side.\r\n\t *\r\n\t * @param {boolean}  top     Top waved?\r\n\t * @param {boolean}  right   Right side waved?\r\n\t * @param {boolean}  bottom  Bottom Waved?\r\n\t * @param {boolean}  left    Left side waved?\r\n\t */\r\n\tpublic setWavedSides(top: boolean, right: boolean, bottom: boolean, left: boolean): void {\r\n\t\tthis._twaved = top;\r\n\t\tthis._lwaved = right;\r\n\t\tthis._bwaved = bottom;\r\n\t\tthis._rwaved = left;\r\n\t}\r\n\r\n\t/**\r\n\t * Updates bounding box based on element dimension settings.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic measureElement(): void {\r\n\t\tthis.bbox = {\r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\twidth: this.innerWidth,\r\n\t\t\theight: this.innerHeight\r\n\t\t};\r\n\t}\r\n\r\n\t/**\r\n\t * Tension of the wave.\r\n\t *\r\n\t * @default 0.8\r\n\t * @param {number}  value  Tension\r\n\t */\r\n\tpublic set tension(value: number) {\r\n\t\tthis.setPropertyValue(\"tension\", value);\r\n\t\tthis.invalidate();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Tension\r\n\t */\r\n\tpublic get tension(): number {\r\n\t\treturn this.getPropertyValue(\"tension\");\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/elements/WavedRectangle.ts","/**\r\n * A module which defines functionality related to Value Axis Break.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\nimport { AxisBreak, IAxisBreakProperties, IAxisBreakAdapters, IAxisBreakEvents } from \"./AxisBreak\";\r\nimport { SpriteEventDispatcher, AMEvent } from \"../../core/Sprite\";\r\nimport { ValueAxis } from \"./ValueAxis\";\r\nimport { IDisposer, MutableValueDisposer } from \"../../core/utils/Disposer\";\r\nimport { registry } from \"../../core/Registry\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[ValueAxisBreak]].\r\n */\r\nexport interface IValueAxisBreakProperties extends IAxisBreakProperties {\r\n\r\n\t/**\r\n\t * Value break starts on.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tstartValue?: number;\r\n\r\n\t/**\r\n\t * Value break ends on.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tendValue?: number;\r\n\r\n}\r\n\r\n/**\r\n * Defines events for [[ValueAxisBreak]].\r\n */\r\nexport interface IValueAxisBreakEvents extends IAxisBreakEvents { }\r\n\r\n/**\r\n * Defines adapters for [[ValueAxisBreak]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface IValueAxisBreakAdapters extends IAxisBreakAdapters, IValueAxisBreakProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Base class to define \"breaks\" on value axis.\r\n *\r\n * A \"break\" can be used to \"cut out\" specific ranges of the axis scale, e.g.\r\n * when comparing columns with relatively similar values, it would make sense\r\n * to cut out their mid section, so that their tip differences are more\r\n * prominent.\r\n *\r\n * @see {@link IValueAxisBreakEvents} for a list of available events\r\n * @see {@link IValueAxisBreakAdapters} for a list of available Adapters\r\n * @important\r\n */\r\nexport class ValueAxisBreak extends AxisBreak {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IValueAxisBreakProperties}\r\n\t */\r\n\tpublic _properties!: IValueAxisBreakProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IValueAxisBreakAdapters}\r\n\t */\r\n\tpublic _adapter!: IValueAxisBreakAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IValueAxisBreakEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IValueAxisBreakEvents;\r\n\r\n\t/**\r\n\t * Defines the type of the Axis this break is used for.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ValueAxis}\r\n\t */\r\n\tpublic _axisType: ValueAxis;\r\n\r\n\t/**\r\n\t * [adjustedStep description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\tpublic adjustedStep: number;\r\n\r\n\t/**\r\n\t * [adjustedMin description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\tpublic adjustedMin: number;\r\n\r\n\t/**\r\n\t * [adjustedMax description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\tpublic adjustedMax: number;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"ValueAxisBreak\";\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Pixel position of the break's start.\r\n\t *\r\n\t * @return {number} Position (px)\r\n\t * @readonly\r\n\t */\r\n\tpublic get startPosition(): number {\r\n\t\tif (this.axis) {\r\n\t\t\treturn this.axis.valueToPosition(this.adjustedStartValue);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Pixel position of the break's end.\r\n\t *\r\n\t * @return {number} Position (px)\r\n\t * @readonly\r\n\t */\r\n\tpublic get endPosition(): number {\r\n\t\tif (this.axis) {\r\n\t\t\treturn this.axis.valueToPosition(this.adjustedEndValue);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"ValueAxisBreak\"] = ValueAxisBreak;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/charts/axes/ValueAxisBreak.ts","/**\r\n * Module for \"Lighten\" filter.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Filter, FilterProperties } from \"./Filter\";\r\nimport { AMElement } from \"../AMElement\";\r\nimport { registry } from \"../../Registry\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines additional properties relative to the \"Lighten\" filter\r\n */\r\nexport interface LightenFilterProperties extends FilterProperties {\r\n\r\n\t/**\r\n\t * Lightness. (0-1)\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tlightness: number;\r\n\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Creates a \"Lighten\" filter.\r\n */\r\nexport class LightenFilter extends Filter {\r\n\r\n\t/**\r\n\t * Defines property types.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {LightenFilterProperties}\r\n\t */\r\n\tpublic _properties!: LightenFilterProperties;\r\n\r\n\t/**\r\n\t * A storage for Filter property/value pairs.\r\n\t * @see [@link LightenFilterProperties]\r\n\t * @type {Dictionary<LightenFilterProperties, any>}\r\n\t */\r\n\t//public propertyValues: Dictionary<LightenFilterProperties, any>;\r\n\r\n\t/**\r\n\t * Reference to the `<feColorMatrix>` element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {AMElement}\r\n\t */\r\n\tpublic feColorMatrix: AMElement;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t * * Creates primitve (effect) elements\r\n\t * * Sets default properties\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"LightenFilter\";\r\n\r\n\t\t// Create elements\r\n\t\t// NOTE: we do not need to add each individual element to `_disposers`\r\n\t\t// because `filterPrimitives` has an event handler which automatically adds\r\n\t\t// anything added to it to `_disposers`\r\n\t\tthis.feColorMatrix = this.paper.add(\"feColorMatrix\");\r\n\t\tthis.feColorMatrix.attr({ \"type\": \"matrix\" });\r\n\t\tthis.filterPrimitives.push(this.feColorMatrix);\r\n\r\n\t\t// Set default properties\r\n\t\tthis.lightness = 0;\r\n\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Lightness. (0-1)\r\n\t *\r\n\t * @param {number} value Lightness (0-1)\r\n\t */\r\n\tpublic set lightness(value: number) {\r\n\t\tthis.properties[\"lightness\"] = value;\r\n\t\tlet v = value + 1;\r\n\t\tthis.feColorMatrix.attr({ \"values\": v + \" 0 0 0 0 0 \" + v + \" 0 0 0 0 0 \" + v + \" 0 0 0 0 0 1 0\" });\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Lightness (0-1)\r\n\t */\r\n\tpublic get lightness(): number {\r\n\t\treturn this.properties[\"lightness\"];\r\n\t}\r\n\r\n}\r\n\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"LightenFilter\"] = LightenFilter;\n\n\n// WEBPACK FOOTER //\n// ../../../../../../src/.internal/core/rendering/filters/LightenFilter.ts","/**\r\n * FlowDiagram module.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Chart, IChartProperties, IChartDataFields, IChartAdapters, IChartEvents, ChartDataItem } from \"../Chart\";\r\nimport { SpriteEventDispatcher, AMEvent } from \"../../core/Sprite\";\r\nimport { percent } from \"../../core/utils/Percent\";\r\nimport { DataItem, IDataItemEvents } from \"../../core/DataItem\";\r\nimport { ListTemplate, ListDisposer } from \"../../core/utils/List\";\r\nimport { DictionaryTemplate, DictionaryDisposer } from \"../../core/utils/Dictionary\";\r\nimport { Legend, ILegendDataFields, LegendDataItem, ILegendItem } from \"../Legend\";\r\nimport { Container } from \"../../core/Container\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { FlowDiagramNode } from \"../elements/FlowDiagramNode\";\r\nimport { FlowDiagramLink } from \"../elements/FlowDiagramLink\";\r\nimport { LinearGradientModifier } from \"../../core/rendering/fills/LinearGradientModifier\";\r\nimport { ColorSet } from \"../../core/utils/ColorSet\";\r\nimport { toColor, Color } from \"../../core/utils/Color\";\r\nimport { Orientation } from \"../../core/defs/Orientation\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\nimport * as $math from \"../../core/utils/Math\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport * as $number from \"../../core/utils/Number\";\r\nimport * as $order from \"../../core/utils/Order\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n//@todo rearange notes after dragged\r\n\r\n/**\r\n * Defines a [[DataItem]] for [[FlowDiagram]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nexport class FlowDiagramDataItem extends ChartDataItem {\r\n\r\n\t/**\r\n\t * Defines a type of [[Component]] this data item is used for.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {FlowDiagram}\r\n\t */\r\n\tpublic _component!: FlowDiagram;\r\n\r\n\t/**\r\n\t * An a link element, connecting two nodes.\r\n\t * @ignore\r\n\t * @type {FlowDiagramLink}\r\n\t */\r\n\tpublic _link: FlowDiagramLink;\r\n\r\n\t/**\r\n\t * An origin node.\r\n\t *\r\n\t * @type {FlowDiagramNode}\r\n\t */\r\n\tpublic fromNode: FlowDiagramNode;\r\n\r\n\t/**\r\n\t * A destination node.\r\n\t *\r\n\t * @type {FlowDiagramNode}\r\n\t */\r\n\tpublic toNode: FlowDiagramNode;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"FlowDiagramDataItem\";\r\n\r\n\t\tthis.values.value = {};\r\n\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Source node's name.\r\n\t *\r\n\t * @param {string}  value  Name\r\n\t */\r\n\tpublic set fromName(value: string) {\r\n\t\tthis.setProperty(\"fromName\", value);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {string} name\r\n\t */\r\n\tpublic get fromName(): string {\r\n\t\treturn this.properties.fromName;\r\n\t}\r\n\r\n\t/**\r\n\t * Destination node's name.\r\n\t *\r\n\t * @param {string}  value  Name\r\n\t */\r\n\tpublic set toName(value: string) {\r\n\t\tthis.setProperty(\"toName\", value);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {string} name\r\n\t */\r\n\tpublic get toName(): string {\r\n\t\treturn this.properties.toName;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Node color\r\n\t *\r\n\t * @param {string}  value  Name\r\n\t */\r\n\tpublic set color(value: Color) {\r\n\t\tthis.setProperty(\"color\", toColor(value));\r\n\t}\r\n\r\n\t/**\r\n\t * @return {string} color\r\n\t */\r\n\tpublic get color(): Color {\r\n\t\treturn this.properties.color;\r\n\t}\r\n\r\n\t/**\r\n\t * Link's value.\r\n\t *\r\n\t * @param {number}  value  Value\r\n\t */\r\n\tpublic set value(value: number) {\r\n\t\tthis.setValue(\"value\", value);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Value\r\n\t */\r\n\tpublic get value(): number {\r\n\t\treturn this.values.value.value;\r\n\t}\r\n\r\n\t/**\r\n\t * A visual element, representing link between the source and target nodes.\r\n\t *\r\n\t * Link's actual thickness will be determined by `value` of this link and\r\n\t * `value` of the source node.\r\n\t *\r\n\t * @readonly\r\n\t * @return {FlowDiagramLink} Link element\r\n\t */\r\n\tpublic get link(): this[\"_link\"] {\r\n\t\tif (!this._link) {\r\n\t\t\tthis._link = this.component.links.create();\r\n\t\t\tthis.addSprite(this._link);\r\n\t\t}\r\n\t\treturn this._link;\r\n\t}\r\n\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines data fields for [[FlowDiagram]].\r\n */\r\nexport interface IFlowDiagramDataFields extends IChartDataFields {\r\n\r\n\t/**\r\n\t * Name of the source node.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tfromName?: string;\r\n\r\n\t/**\r\n\t * Name of the target node.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\ttoName?: string;\r\n\r\n\t/**\r\n\t * Value of the link between two nodes.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tvalue?: string;\r\n\r\n\t/**\r\n\t * Color of a from node\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tcolor?: string;\r\n}\r\n\r\n/**\r\n * Defines properties for [[FlowDiagram]]\r\n */\r\nexport interface IFlowDiagramProperties extends IChartProperties {\r\n\r\n\t/**\r\n\t * Padding for node square in pixels.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tnodePadding?: number;\r\n\r\n\t/**\r\n\t * Sort nodes by name or value or do not sort a\r\n\t *\r\n\t * @type {\"none\" | \"name\" | \"value\"}\r\n\t */\r\n\tsortBy?: \"none\" | \"name\" | \"value\";\r\n\r\n\t/**\r\n\t * Sometimes nodes can get very small if their value is little. With this setting you\r\n\t * can set min size of a node (this is relative value from the total size of all nodes)\r\n\t */\r\n\tminNodeSize: number;\r\n}\r\n\r\n/**\r\n * Defines events for [[FlowDiagram]].\r\n */\r\nexport interface IFlowDiagramEvents extends IChartEvents { }\r\n\r\n/**\r\n * Defines adapters for [[FlowDiagram]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface IFlowDiagramAdapters extends IChartAdapters, IFlowDiagramProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Creates a Pie chart\r\n * @see {@link IFlowDiagramEvents} for a list of available Events\r\n * @see {@link IFlowDiagramAdapters} for a list of available Adapters\r\n * @important\r\n */\r\nexport class FlowDiagram extends Chart {\r\n\r\n\t/**\r\n\t * A Color Set to use when applying/generating colors for each subsequent\r\n\t * node.\r\n\t *\r\n\t * @type {ColorSet}\r\n\t */\r\n\tpublic colors: ColorSet = new ColorSet();\r\n\r\n\t/**\r\n\t * Defines a type for the DataItem.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {FlowDiagramDataItem}\r\n\t */\r\n\tpublic _dataItem: FlowDiagramDataItem;\r\n\r\n\t/**\r\n\t * Defines available data fields.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IFlowDiagramDataFields}\r\n\t */\r\n\tpublic _dataFields: IFlowDiagramDataFields;\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IFlowDiagramProperties}\r\n\t */\r\n\tpublic _properties!: IFlowDiagramProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {SeriesAdapters}\r\n\t */\r\n\tpublic _adapter!: IFlowDiagramAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IFlowDiagramEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IFlowDiagramEvents;\r\n\r\n\r\n\t/**\r\n\t * @ignore\r\n\t */\r\n\tpublic _node:FlowDiagramNode;\r\n\r\n\r\n\t/**\r\n\t * A list of chart's FlowDiagram nodes.\r\n\t *\r\n\t * @param {DictionaryTemplate<string, this[\"_node\"]>}\r\n\t */\r\n\tprotected _nodes: DictionaryTemplate<string, this[\"_node\"]>;\r\n\r\n\r\n\t/**\r\n\t * @ignore\r\n\t */\r\n\tpublic _link:FlowDiagramLink;\t\r\n\r\n\t/**\r\n\t * A list of FlowDiagram links connecting nodes.\r\n\t *\r\n\t * @param {ListTemplate<this[\"_link\"]>}\r\n\t */\r\n\tprotected _links: ListTemplate<this[\"_link\"]>;\r\n\r\n\t/**\r\n\t * A container that holds all of the link elements.\r\n\t *\r\n\t * @type {Container}\r\n\t */\r\n\tpublic linksContainer: Container;\r\n\r\n\t/**\r\n\t * A container that holds all of the node elements.\r\n\t * @type {Container}\r\n\t */\r\n\tpublic nodesContainer: Container;\r\n\r\n\t/**\r\n\t * Sorted nodes iterator.\r\n\t *\r\n\t * @ignore\r\n\t * @type {Iterator}\r\n\t */\r\n\tprotected _sorted: $iter.Iterator<[string, FlowDiagramNode]>;\r\n\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\r\n\t\t// Init\r\n\t\tsuper();\r\n\t\tthis.className = \"FlowDiagram\";\r\n\t\tthis.nodePadding = 20;\r\n\t\tthis.sortBy = \"none\";\r\n\t\tthis.sequencedInterpolation = true;\r\n\r\n\t\tthis.colors.step = 2;\r\n\t\tthis.minNodeSize = 0.02;\r\n\r\n\t\tlet linksContainer = this.chartContainer.createChild(Container);\r\n\t\tlinksContainer.shouldClone = false;\r\n\t\tlinksContainer.layout = \"none\";\r\n\t\tlinksContainer.isMeasured = false;\r\n\t\tthis.linksContainer = linksContainer;\r\n\r\n\t\tlet nodesContainer = this.chartContainer.createChild(Container);\r\n\t\tnodesContainer.shouldClone = false;\r\n\t\tnodesContainer.layout = \"none\";\r\n\t\tnodesContainer.isMeasured = false;\r\n\t\tthis.nodesContainer = nodesContainer;\r\n\r\n\t\t// this data item holds sums, averages, etc\r\n\t\tthis.dataItem = this.createDataItem();\r\n\t\tthis.dataItem.component = this;\r\n\r\n\t\t// Apply theme\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * (Re)validates chart's data, effectively causing the chart to redraw.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic validateData(): void {\r\n\r\n\t\tthis.nodes.clear();\r\n\t\tthis.links.clear();\r\n\t\tthis.sortNodes();\r\n\r\n\t\tsuper.validateData();\r\n\r\n\t\tlet sum = 0;\r\n\t\tlet count = 0;\r\n\t\tlet low: number;\r\n\t\tlet high: number;\r\n\r\n\r\n\t\t// build blocks\r\n\t\t$iter.each(this.dataItems.iterator(), (dataItem) => {\r\n\t\t\tlet fromName = dataItem.fromName;\r\n\r\n\t\t\tif (fromName) {\r\n\t\t\t\tlet node = this.nodes.getKey(fromName);\r\n\t\t\t\tif (!node) {\r\n\t\t\t\t\tnode = this.nodes.create(fromName);\r\n\t\t\t\t\tnode.name = fromName;\r\n\t\t\t\t\tnode.chart = this;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdataItem.addSprite(node);\r\n\t\t\t\tdataItem.fromNode = node;\r\n\t\t\t\tdataItem.fromNode.outgoingDataItems.push(dataItem);\r\n\t\t\t}\r\n\t\t\tlet toName = dataItem.toName;\r\n\t\t\tif (toName) {\r\n\t\t\t\tlet node = this.nodes.getKey(toName);\r\n\t\t\t\tif (!node) {\r\n\t\t\t\t\tnode = this.nodes.create(toName);\r\n\t\t\t\t\tnode.name = toName;\r\n\t\t\t\t\tnode.chart = this;\r\n\t\t\t\t\tif (!node.dataItem) {\r\n\t\t\t\t\t\tdataItem.addSprite(node);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tdataItem.toNode = node;\r\n\t\t\t\tdataItem.toNode.incomingDataItems.push(dataItem);\r\n\t\t\t}\r\n\r\n\t\t\tif (!dataItem.fromNode) {\r\n\t\t\t\tlet strokeModifier = new LinearGradientModifier();\r\n\t\t\t\tstrokeModifier.opacities = [0, 1];\r\n\t\t\t\tdataItem.link.strokeModifier = strokeModifier;\r\n\t\t\t}\r\n\r\n\t\t\tif (!dataItem.toNode) {\r\n\t\t\t\tlet fillModifier = new LinearGradientModifier();\r\n\t\t\t\tfillModifier.opacities = [1, 0];\r\n\t\t\t\tdataItem.link.strokeModifier = fillModifier;\r\n\t\t\t}\r\n\r\n\t\t\tlet value = dataItem.value;\r\n\t\t\tif ($type.isNumber(value)) {\r\n\t\t\t\tsum += value;\r\n\t\t\t\tcount++;\r\n\r\n\t\t\t\tif (low > value || !$type.isNumber(low)) {\r\n\t\t\t\t\tlow = value;\r\n\t\t\t\t}\r\n\t\t\t\tif (high < value || !$type.isNumber(high)) {\r\n\t\t\t\t\thigh = value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tlet key = \"value\";\r\n\r\n\t\tthis.dataItem.setCalculatedValue(key, high, \"high\");\r\n\t\tthis.dataItem.setCalculatedValue(key, low, \"low\");\r\n\t\tthis.dataItem.setCalculatedValue(key, sum, \"sum\");\r\n\t\tthis.dataItem.setCalculatedValue(key, sum / count, \"average\");\r\n\t\tthis.dataItem.setCalculatedValue(key, count, \"count\");\r\n\r\n\r\n\t\t$iter.each(this.nodes.iterator(), (strNode) => {\r\n\t\t\tlet node = strNode[1];\r\n\r\n\t\t\tif (node.fill instanceof Color) {\r\n\t\t\t\tnode.color = node.fill;\r\n\t\t\t}\r\n\r\n\t\t\tif (node.color == undefined) {\r\n\t\t\t\tnode.color = this.colors.next();\r\n\t\t\t}\r\n\r\n\t\t\tif (node.dataItem.color != undefined) {\r\n\t\t\t\tnode.color = node.dataItem.color;\r\n\t\t\t}\r\n\r\n\t\t\tthis.getNodeValue(node);\r\n\r\n\t\t});\r\n\r\n\t\tthis.sortNodes();\r\n\r\n\t\tif (this.interpolationDuration > 0) {\r\n\t\t\tthis.events.once(\"validated\", this.appear, this);\r\n\t\t}\r\n\t}\r\n\r\n\tprotected handleDataItemWorkingValueChange(event: AMEvent<FlowDiagramDataItem, IDataItemEvents>[\"workingvaluechanged\"]): void {\r\n\t\tthis.invalidate();\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * [appear description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t */\r\n\tpublic appear(): void {\r\n\t\tthis.hide(0);\r\n\t\tthis.show();\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Sorts nodes by either their values or names, based on `sortBy` setting.\r\n\t */\r\n\tprotected sortNodes() {\r\n\t\tif (this.sortBy == \"name\") {\r\n\t\t\tthis._sorted = this.nodes.sortedIterator();\r\n\t\t}\r\n\t\telse if (this.sortBy == \"value\") {\r\n\t\t\tthis._sorted = $iter.sort(this.nodes.iterator(), (x, y) => $order.reverse($number.order(x[1].value, y[1].value)));\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis._sorted = this.nodes.iterator();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Updates a cummulative value of the node.\r\n\t *\r\n\t * A node's value is determined by summing values of all of the incoming\r\n\t * links or all of the outgoing links, whichever results in bigger number.\r\n\t *\r\n\t * @param {FlowDiagramNode}  node  Node value\r\n\t */\r\n\tprotected getNodeValue(node: FlowDiagramNode) {\r\n\t\tlet fromSum = 0;\r\n\t\tlet toSum = 0;\r\n\r\n\t\t$iter.each(node.incomingDataItems.iterator(), (dataItem: FlowDiagramDataItem) => {\r\n\t\t\tfromSum += dataItem.getWorkingValue(\"value\");\r\n\t\t});\r\n\r\n\t\t$iter.each(node.outgoingDataItems.iterator(), (dataItem: FlowDiagramDataItem) => {\r\n\t\t\ttoSum += dataItem.getWorkingValue(\"value\");\r\n\t\t});\r\n\r\n\t\tnode.value = $math.max(fromSum, toSum);\r\n\t\tthis.fixMin(node);\r\n\t};\r\n\r\n\t/**\r\n\t * Limit size of a node for it not to be too small\r\n\t * @ignore\r\n\t */\r\n\tprotected fixMin(node: FlowDiagramNode) {\r\n\t\tlet minNodeSize = this.minNodeSize;\r\n\t\tif (minNodeSize > 0) {\r\n\t\t\tlet total = this.dataItem.values.value.sum\r\n\t\t\tif (node.value < total * minNodeSize) {\r\n\t\t\t\tnode.value = total * minNodeSize;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Changes the sort type of the nodes.\r\n\t *\r\n\t * This will actually reshuffle nodes using nice animation.\r\n\t */\r\n\tprotected changeSorting() {\r\n\t\tthis.sortNodes();\r\n\t}\r\n\r\n\t/**\r\n\t * Sets defaults that instantiate some objects that rely on parent, so they\r\n\t * cannot be set in constructor.\r\n\t */\r\n\tprotected applyInternalDefaults(): void {\r\n\r\n\t\tsuper.applyInternalDefaults();\r\n\r\n\t\t// Add a default screen reader title for accessibility\r\n\t\t// This will be overridden in screen reader if there are any `titles` set\r\n\t\tif (!$type.hasValue(this.readerTitle)) {\r\n\t\t\tthis.readerTitle = this.language.translate(\"Flow diagram\");\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Creates and returns a new data item.\r\n\t *\r\n\t * @return {this} Data item\r\n\t */\r\n\tprotected createDataItem(): this[\"_dataItem\"] {\r\n\t\treturn new FlowDiagramDataItem();\r\n\t}\r\n\r\n\t/**\r\n\t * Padding for node square in pixels.\r\n\t *\r\n\t * Padding will add extra space around node's name label.\r\n\t *\r\n\t * @param {number} value Padding (px)\r\n\t */\r\n\tpublic set nodePadding(value: number) {\r\n\t\tthis.setPropertyValue(\"nodePadding\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Padding (px)\r\n\t */\r\n\tpublic get nodePadding(): number {\r\n\t\treturn this.getPropertyValue(\"nodePadding\");\r\n\t}\r\n\r\n\t/**\r\n\t * Sort nodes by \"name\" or \"value\" or do not sort at all. If not sorted, nodes will appear in the same order as they are in the data.\r\n\t * @default \"none\"\r\n\t * @param {\"none\" | \"name\" | \"value\"}  value  Node sorting\r\n\t */\r\n\tpublic set sortBy(value: \"none\" | \"name\" | \"value\") {\r\n\t\tthis.setPropertyValue(\"sortBy\", value);\r\n\t\tthis.changeSorting();\r\n\t}\r\n\r\n\t/**\r\n\t * @returns {\"none\" | name\" | \"value\"} Node sorting\r\n\t */\r\n\tpublic get sortBy(): \"none\" | \"name\" | \"value\" {\r\n\t\treturn this.getPropertyValue(\"sortBy\");\r\n\t}\r\n\r\n\t/**\r\n\t * Sometimes nodes can get very small if their value is little. With this setting you\r\n\t * can set min size of a node (this is relative value from the total size of all nodes)\r\n\t * @default 0.02\r\n\t * @param {\"none\" | \"name\" | \"value\"}  value  Node sorting\r\n\t */\r\n\tpublic set minNodeSize(value: number) {\r\n\t\tthis.setPropertyValue(\"minNodeSize\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @returns {number} min node size\r\n\t */\r\n\tpublic get minNodeSize(): number {\r\n\t\treturn this.getPropertyValue(\"minNodeSize\");\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * A list of chart's nodes.\r\n\t *\r\n\t * @param {DictionaryTemplate<string, this[\"_node\"]>}\r\n\t */\r\n\tpublic get nodes():DictionaryTemplate<string, this[\"_node\"]>{\r\n\t\tif(!this._nodes){\r\n\t\t\tthis._nodes = new DictionaryTemplate<string, this[\"_node\"]>(this.createNode());\r\n\t\t\tthis._disposers.push(new DictionaryDisposer(this._nodes));\r\n\t\t}\r\n\t\treturn this._nodes;\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore\r\n\t */ \r\n\tpublic createNode():this[\"_node\"]{\r\n\t\tlet node = new FlowDiagramNode();\r\n\t\tthis._disposers.push(node);\r\n\t\treturn node;\r\n\t}\r\n\r\n\t/**\r\n\t * A list of chart's links.\r\n\t *\r\n\t * @param {ListTemplate<this[\"_link\"]>}\r\n\t */\r\n\tpublic get links():ListTemplate<this[\"_link\"]>{\r\n\t\tif(!this._links){\r\n\t\t\tthis._links = new ListTemplate<this[\"_link\"]>(this.createLink());\r\n\t\t\tthis._disposers.push(new ListDisposer(this._links));\r\n\t\t}\r\n\t\treturn this._links;\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore\r\n\t */ \r\n\tpublic createLink():this[\"_link\"]{\r\n\t\tlet link = new FlowDiagramLink();\r\n\t\tthis._disposers.push(link);\r\n\t\treturn link;\r\n\t}\t\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"FlowDiagram\"] = FlowDiagram;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/charts/types/FlowDiagram.ts","/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { ColorModifier } from \"./ColorModifier\";\r\nimport { LinearGradient } from \"./LinearGradient\";\r\nimport { RadialGradient } from \"./RadialGradient\";\r\nimport { Color } from \"../../utils/Color\";\r\nimport { registry } from \"../../Registry\";\r\nimport * as $math from \"../../utils/Math\";\r\nimport * as $type from \"../../utils/Type\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * This class can be used to modify linear gradient steps, changing visual\r\n * properties like lightness, brightness, opacity of each set.\r\n *\r\n * It can also set offsets for each gradient step.\r\n *\r\n * E.g. if I want to fill a columns in a column series to be a solid fill from\r\n * top to 80% of height, then gradually fades out, I can use the following\r\n * gradient modifier as a `fillModifier`:\r\n *\r\n * ```TypeScript\r\n * let fillModifier = new am4core.LinearGradientModifier();\r\n * fillModifier.opacities = [1, 1, 0];\r\n * fillModifier.offsets = [0, 0.8, 1];\r\n * columnSeries.columns.template.fillModifier = fillModifier;\r\n * ```\r\n * ```JavaScript\r\n * var fillModifier = new am4core.LinearGradientModifier();\r\n * fillModifier.opacities = [1, 1, 0];\r\n * fillModifier.offsets = [0, 0.8, 1];\r\n * columnSeries.columns.template.fillModifier = fillModifier;\r\n * ```\r\n * ```JSON\r\n * \"series\": [{\r\n *   \"type\": \"ColumnSeries\",\r\n *   \"columns\": {\r\n *     \"fillModifier\": {\r\n *       \"type\": \"LinearGradientModifier\",\r\n *       \"opacities\": [1, 1, 0],\r\n *       \"offsets\": [0, 0.8, 1]\r\n *     }\r\n *   }\r\n * }]\r\n * ```\r\n */\r\nexport class LinearGradientModifier extends ColorModifier {\r\n\r\n\t/**\r\n\t * A reference to the gradient instance that this modifier is used for.\r\n\t *\r\n\t * @type {LinearGradient}\r\n\t */\r\n\tpublic gradient: LinearGradient = new LinearGradient();\r\n\r\n\t/**\r\n\t * An array of lightness values for each step.\r\n\t *\r\n\t * @type {number[]}\r\n\t */\r\n\tprotected _lightnesses!: number[];\r\n\r\n\t/**\r\n\t * An array of brightness values for each step.\r\n\t *\r\n\t * @type {number[]}\r\n\t */\r\n\tprotected _brightnesses!: number[];\r\n\r\n\t/**\r\n\t * An array of opacity values for each step.\r\n\t *\r\n\t * @type {number[]}\r\n\t */\r\n\tprotected _opacities!: number[];\r\n\r\n\t/**\r\n\t * An array of relative position (0-1) for each step.\r\n\t *\r\n\t * If not set, all steps will be of equal relative length.\r\n\t *\r\n\t * @type {number[]}\r\n\t */\r\n\tprotected _offsets!: number[];\r\n\r\n\t/**\r\n\t * Constructor.\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.lightnesses = [];\r\n\t\tthis.brightnesses = [];\r\n\t\tthis.opacities = [];\r\n\t\tthis.offsets = [];\r\n\t\tthis.className = \"LinearGradientModifier\";\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * An array of lightness values for each step.\r\n\t *\r\n\t * @param {number[]}  value  Lightness values\r\n\t */\r\n\tpublic set lightnesses(value: number[]) {\r\n\t\tthis._lightnesses = value;\r\n\t\tthis._brightnesses = [];\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number[]} Lightness values\r\n\t */\r\n\tpublic get lightnesses(): number[] {\r\n\t\treturn this._lightnesses;\r\n\t}\r\n\r\n\t/**\r\n\t * An array of brightness values for each step.\r\n\t *\r\n\t * @param {number[]}  value  Brightness values\r\n\t */\r\n\tpublic set brightnesses(value: number[]) {\r\n\t\tthis._brightnesses = value;\r\n\t\tthis._lightnesses = [];\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number[]} Brightness values\r\n\t */\r\n\tpublic get brightnesses(): number[] {\r\n\t\treturn this._brightnesses;\r\n\t}\r\n\r\n\t/**\r\n\t * An array of opacity values for each step.\r\n\t *\r\n\t * @param {number[]}  value  Opacity values\r\n\t */\r\n\tpublic set opacities(value: number[]) {\r\n\t\tthis._opacities = value;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number[]} Opacity values\r\n\t */\r\n\tpublic get opacities(): number[] {\r\n\t\treturn this._opacities;\r\n\t}\r\n\r\n\t/**\r\n\t * An array of relative position (0-1) for each step.\r\n\t *\r\n\t * If not set, all steps will be of equal relative length.\r\n\t *\r\n\t * @param {number[]}  value  Offsets\r\n\t */\r\n\tpublic set offsets(value: number[]) {\r\n\t\tthis._offsets = value;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number[]} Offsets\r\n\t */\r\n\tpublic get offsets(): number[] {\r\n\t\treturn this._offsets;\r\n\t}\r\n\r\n\t/**\r\n\t * Modifies the color based on step setting.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {Color}  value  Source color\r\n\t * @return {Color}         A gradient that matches set modification rules\r\n\t */\r\n\tpublic modify(value: Color): Color | LinearGradient | RadialGradient {\r\n\r\n\t\t// Clear current gradient\r\n\t\tthis.gradient.clear();\r\n\r\n\t\t// Get step count\r\n\t\tlet count: number = 0;\r\n\t\tif (this.opacities) {\r\n\t\t\tcount = $math.max(count, this.opacities.length);\r\n\t\t}\r\n\t\tif (this.lightnesses) {\r\n\t\t\tcount = $math.max(count, this.lightnesses.length);\r\n\t\t}\r\n\t\tif (this.brightnesses) {\r\n\t\t\tcount = $math.max(count, this.brightnesses.length);\r\n\t\t}\r\n\r\n\t\t// Init step values\r\n\t\tlet opacity: number = 1,\r\n\t\t\tlightness: $type.Optional<number>,\r\n\t\t\tbrightness: $type.Optional<number>;\r\n\r\n\t\t// Apply steps\r\n\t\tfor (let i = 0; i < count; i++) {\r\n\r\n\t\t\t// Take base color\r\n\t\t\tlet color = value;\r\n\r\n\t\t\t// Check if there are any parameters for this step\r\n\t\t\tif (this.opacities && $type.isNumber(this.opacities[i])) {\r\n\t\t\t\topacity = this.opacities[i];\r\n\t\t\t}\r\n\t\t\tif (this.lightnesses && $type.isNumber(this.lightnesses[i])) {\r\n\t\t\t\tlightness = this.lightnesses[i];\r\n\t\t\t\tbrightness = undefined;\r\n\t\t\t}\r\n\t\t\tif (this.brightnesses && $type.isNumber(this.brightnesses[i])) {\r\n\t\t\t\tbrightness = this.brightnesses[i];\r\n\t\t\t\tlightness = undefined;\r\n\t\t\t}\r\n\r\n\t\t\t// Check if we need to brighten/lighten color\r\n\t\t\tif ($type.isNumber(brightness)) {\r\n\t\t\t\tcolor = value.brighten(this.brightnesses[i]);\r\n\t\t\t}\r\n\t\t\telse if ($type.isNumber(lightness)) {\r\n\t\t\t\tcolor = value.lighten(this.lightnesses[i]);\r\n\t\t\t}\r\n\r\n\t\t\t// Get offset (it's OK if it's undefined)\r\n\t\t\tlet offset: number = this.offsets[i];\r\n\r\n\t\t\t// Apply step\r\n\t\t\tthis.gradient.addColor(color, opacity, offset);\r\n\t\t}\r\n\t\treturn this.gradient;\r\n\t}\r\n\r\n\tpublic copyFrom(source:this){\r\n\t\tsuper.copyFrom(source);\r\n\t\tthis.gradient = source.gradient.clone();\r\n\r\n\t\tthis._offsets = source.offsets;\r\n\t\tthis._brightnesses = source.brightnesses;\r\n\t\tthis._lightnesses = source.brightnesses;\r\n\t\tthis._opacities = source.opacities;\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"LinearGradientModifier\"] = LinearGradientModifier;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../../src/.internal/core/rendering/fills/LinearGradientModifier.ts","/**\r\n * Resize button module.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Button, IButtonProperties, IButtonAdapters, IButtonEvents } from \"./Button\";\r\nimport { Sprite, SpriteEventDispatcher, AMEvent } from \"../Sprite\";\r\nimport { RoundedRectangle, IRoundedRectangleProperties, IRoundedRectangleAdapters } from \"./RoundedRectangle\";\r\nimport { Orientation } from \"../defs/Orientation\";\r\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\r\nimport { registry } from \"../Registry\";\r\nimport * as $path from \"../rendering/Path\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[ResizeButton]].\r\n */\r\nexport interface IResizeButtonProperties extends IButtonProperties { }\r\n\r\n/**\r\n * Defines events for [[ResizeButton]] for [[ResizeButton]].\r\n */\r\nexport interface IResizeButtonEvents extends IButtonEvents { }\r\n\r\n/**\r\n * Defines adapters for [[ResizeButton]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface IResizeButtonAdapters extends IButtonAdapters, IResizeButtonProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Creates a draggable resize/grip button.\r\n *\r\n * @see {@link IResizeButtonEvents} for a list of available events\r\n * @see {@link IResizeButtonAdapters} for a list of available Adapters\r\n */\r\nexport class ResizeButton extends Button {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IResizeButtonProperties}\r\n\t */\r\n\tpublic _properties!: IResizeButtonProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IResizeButtonAdapters}\r\n\t */\r\n\tpublic _adapter!: IResizeButtonAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IResizeButtonEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IResizeButtonEvents;\r\n\r\n\t/**\r\n\t * Orientation of the resize direction.\r\n\t *\r\n\t * @deprecated Not used\r\n\t * @type {Orientation}\r\n\t */\r\n\tprotected _orientation: Orientation;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\r\n\t\t// Init\r\n\t\tsuper();\r\n\t\tthis.className = \"ResizeButton\";\r\n\r\n\t\t// Set defaults\r\n\t\tthis.orientation = \"horizontal\";\r\n\t\tthis.layout = \"absolute\";\r\n\t\tthis.horizontalCenter = \"middle\";\r\n\t\tthis.verticalCenter = \"middle\";\r\n\r\n\t\tthis.draggable = true;\r\n\t\tthis.padding(8, 8, 8, 8);\r\n\r\n\t\tthis.background.cornerRadius(20, 20, 20, 20);\r\n\r\n\t\t// Create an icon\r\n\t\tlet icon: Sprite = new Sprite();\r\n\t\ticon.element = this.paper.add(\"path\");\r\n\r\n\t\tlet path = $path.moveTo({ x: -2, y: -6 });\r\n\t\tpath += $path.lineTo({ x: -2, y: 6 });\r\n\t\tpath += $path.moveTo({ x: 2, y: -6 });\r\n\t\tpath += $path.lineTo({ x: 2, y: 6 });\r\n\t\ticon.element.attr({ \"d\": path });\r\n\r\n\t\ticon.pixelPerfect = true;\r\n\t\ticon.padding(0, 4, 0, 4);\r\n\t\ticon.stroke = new InterfaceColorSet().getFor(\"alternativeText\");\r\n\t\ticon.strokeOpacity = 0.7;\r\n\t\t//icon.align = \"center\";\r\n\t\t//icon.valign = \"middle\";\r\n\t\tthis.icon = icon;\r\n\r\n\t\tthis.label.dispose();\r\n\t\tthis.label = undefined;\r\n\r\n\t\t// Apply theme\r\n\t\tthis.applyTheme();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Use for setting of direction (orientation) of the resize button.\r\n\t *\r\n\t * Available options: \"horizontal\", \"vertical\".\r\n\t *\r\n\t * @param {Orientation} value Orientation\r\n\t */\r\n\tpublic set orientation(value: Orientation) {\r\n\t\tlet icon = this.icon;\r\n\t\tif (icon) {\r\n\t\t\tif (value == \"horizontal\") {\r\n\t\t\t\ticon.rotation = 0;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\ticon.rotation = -90;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"ResizeButton\"] = ResizeButton;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/elements/ResizeButton.ts","/**\r\n * Module for \"Desaturate\" filter.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Filter, FilterProperties } from \"./Filter\";\r\nimport { AMElement } from \"../AMElement\";\r\nimport { registry } from \"../../Registry\";\r\nimport * as $type from \"../../utils/Type\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines additional properties relative to the \"Desaturate\" filter\r\n */\r\nexport interface DesaturateFilterProperties extends FilterProperties {\r\n\r\n\t/**\r\n\t * Saturation. (0-1)\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tsaturation: number;\r\n\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Creats a \"Desaturate\" filter\r\n */\r\nexport class DesaturateFilter extends Filter {\r\n\r\n\t/**\r\n\t * Defines property types.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {DesaturateFilterProperties}\r\n\t */\r\n\tpublic _properties!: DesaturateFilterProperties;\r\n\r\n\t/**\r\n\t * A storage for Filter property/value pairs.\r\n\t * @see [@link DesaturateFilterProperties]\r\n\t * @type {Dictionary<DesaturateFilterProperties, any>}\r\n\t */\r\n\t//public propertyValues: Dictionary<DesaturateFilterProperties, any>;\r\n\r\n\t/**\r\n\t * Reference to the `<feColorMatrix>` element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {AMElement}\r\n\t */\r\n\tpublic feColorMatrix: AMElement;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t * * Creates primitve (effect) elements\r\n\t * * Sets default properties\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"DesaturateFilter\";\r\n\r\n\t\t// Create elements\r\n\t\t// NOTE: we do not need to add each individual element to `_disposers`\r\n\t\t// because `filterPrimitives` has an event handler which automatically adds\r\n\t\t// anything added to it to `_disposers`\r\n\t\tthis.feColorMatrix = this.paper.add(\"feColorMatrix\");\r\n\t\tthis.feColorMatrix.attr({ \"type\": \"saturate\" });\r\n\t\tthis.filterPrimitives.push(this.feColorMatrix);\r\n\r\n\t\t// Set default properties\r\n\t\tthis.width = 120;\r\n\t\tthis.height = 120;\r\n\r\n\t\tthis.saturation = 0;\r\n\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Saturation.\r\n\t *\r\n\t * 0 - completely desaturated.\r\n\t * 1 - fully saturated.\r\n\t *\r\n\t * @param {number}  value  Saturation (0-1)\r\n\t * @todo Describe possible values\r\n\t */\r\n\tpublic set saturation(value: number) {\r\n\t\tthis.properties[\"saturation\"] = value;\r\n\t\tthis.feColorMatrix.attr({ \"values\": value.toString() });\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Saturation (0-1)\r\n\t */\r\n\tpublic get saturation(): number {\r\n\t\treturn this.properties[\"saturation\"];\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"DesaturateFilter\"] = DesaturateFilter;\n\n\n// WEBPACK FOOTER //\n// ../../../../../../src/.internal/core/rendering/filters/DesaturateFilter.ts","var isObject = require('./_is-object');\nvar document = require('./_global').document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_dom-create.js\n// module id = 172\n// module chunks = 26","var global = require('./_global');\nvar core = require('./_core');\nvar LIBRARY = require('./_library');\nvar wksExt = require('./_wks-ext');\nvar defineProperty = require('./_object-dp').f;\nmodule.exports = function (name) {\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if (name.charAt(0) != '_' && !(name in $Symbol)) defineProperty($Symbol, name, { value: wksExt.f(name) });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_wks-define.js\n// module id = 173\n// module chunks = 26","var shared = require('./_shared')('keys');\nvar uid = require('./_uid');\nmodule.exports = function (key) {\n  return shared[key] || (shared[key] = uid(key));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_shared-key.js\n// module id = 174\n// module chunks = 26","// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_enum-bug-keys.js\n// module id = 175\n// module chunks = 26","var document = require('./_global').document;\nmodule.exports = document && document.documentElement;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_html.js\n// module id = 176\n// module chunks = 26","// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar isObject = require('./_is-object');\nvar anObject = require('./_an-object');\nvar check = function (O, proto) {\n  anObject(O);\n  if (!isObject(proto) && proto !== null) throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function (test, buggy, set) {\n      try {\n        set = require('./_ctx')(Function.call, require('./_object-gopd').f(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch (e) { buggy = true; }\n      return function setPrototypeOf(O, proto) {\n        check(O, proto);\n        if (buggy) O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_set-proto.js\n// module id = 177\n// module chunks = 26","module.exports = '\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003' +\n  '\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_string-ws.js\n// module id = 178\n// module chunks = 26","var isObject = require('./_is-object');\nvar setPrototypeOf = require('./_set-proto').set;\nmodule.exports = function (that, target, C) {\n  var S = target.constructor;\n  var P;\n  if (S !== C && typeof S == 'function' && (P = S.prototype) !== C.prototype && isObject(P) && setPrototypeOf) {\n    setPrototypeOf(that, P);\n  } return that;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_inherit-if-required.js\n// module id = 179\n// module chunks = 26","'use strict';\nvar toInteger = require('./_to-integer');\nvar defined = require('./_defined');\n\nmodule.exports = function repeat(count) {\n  var str = String(defined(this));\n  var res = '';\n  var n = toInteger(count);\n  if (n < 0 || n == Infinity) throw RangeError(\"Count can't be negative\");\n  for (;n > 0; (n >>>= 1) && (str += str)) if (n & 1) res += str;\n  return res;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_string-repeat.js\n// module id = 180\n// module chunks = 26","// 20.2.2.28 Math.sign(x)\nmodule.exports = Math.sign || function sign(x) {\n  // eslint-disable-next-line no-self-compare\n  return (x = +x) == 0 || x != x ? x : x < 0 ? -1 : 1;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_math-sign.js\n// module id = 181\n// module chunks = 26","// 20.2.2.14 Math.expm1(x)\nvar $expm1 = Math.expm1;\nmodule.exports = (!$expm1\n  // Old FF bug\n  || $expm1(10) > 22025.465794806719 || $expm1(10) < 22025.4657948067165168\n  // Tor Browser bug\n  || $expm1(-2e-17) != -2e-17\n) ? function expm1(x) {\n  return (x = +x) == 0 ? x : x > -1e-6 && x < 1e-6 ? x + x * x / 2 : Math.exp(x) - 1;\n} : $expm1;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_math-expm1.js\n// module id = 182\n// module chunks = 26","var toInteger = require('./_to-integer');\nvar defined = require('./_defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function (TO_STRING) {\n  return function (that, pos) {\n    var s = String(defined(that));\n    var i = toInteger(pos);\n    var l = s.length;\n    var a, b;\n    if (i < 0 || i >= l) return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_string-at.js\n// module id = 183\n// module chunks = 26","'use strict';\nvar LIBRARY = require('./_library');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar $iterCreate = require('./_iter-create');\nvar setToStringTag = require('./_set-to-string-tag');\nvar getPrototypeOf = require('./_object-gpo');\nvar ITERATOR = require('./_wks')('iterator');\nvar BUGGY = !([].keys && 'next' in [].keys()); // Safari has buggy iterators w/o `next`\nvar FF_ITERATOR = '@@iterator';\nvar KEYS = 'keys';\nvar VALUES = 'values';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED) {\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function (kind) {\n    if (!BUGGY && kind in proto) return proto[kind];\n    switch (kind) {\n      case KEYS: return function keys() { return new Constructor(this, kind); };\n      case VALUES: return function values() { return new Constructor(this, kind); };\n    } return function entries() { return new Constructor(this, kind); };\n  };\n  var TAG = NAME + ' Iterator';\n  var DEF_VALUES = DEFAULT == VALUES;\n  var VALUES_BUG = false;\n  var proto = Base.prototype;\n  var $native = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT];\n  var $default = $native || getMethod(DEFAULT);\n  var $entries = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined;\n  var $anyNative = NAME == 'Array' ? proto.entries || $native : $native;\n  var methods, key, IteratorPrototype;\n  // Fix native\n  if ($anyNative) {\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base()));\n    if (IteratorPrototype !== Object.prototype && IteratorPrototype.next) {\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if (!LIBRARY && typeof IteratorPrototype[ITERATOR] != 'function') hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEF_VALUES && $native && $native.name !== VALUES) {\n    VALUES_BUG = true;\n    $default = function values() { return $native.call(this); };\n  }\n  // Define iterator\n  if ((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])) {\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG] = returnThis;\n  if (DEFAULT) {\n    methods = {\n      values: DEF_VALUES ? $default : getMethod(VALUES),\n      keys: IS_SET ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if (FORCED) for (key in methods) {\n      if (!(key in proto)) redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_iter-define.js\n// module id = 184\n// module chunks = 26","'use strict';\nvar create = require('./_object-create');\nvar descriptor = require('./_property-desc');\nvar setToStringTag = require('./_set-to-string-tag');\nvar IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./_hide')(IteratorPrototype, require('./_wks')('iterator'), function () { return this; });\n\nmodule.exports = function (Constructor, NAME, next) {\n  Constructor.prototype = create(IteratorPrototype, { next: descriptor(1, next) });\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_iter-create.js\n// module id = 185\n// module chunks = 26","// helper for String#{startsWith, endsWith, includes}\nvar isRegExp = require('./_is-regexp');\nvar defined = require('./_defined');\n\nmodule.exports = function (that, searchString, NAME) {\n  if (isRegExp(searchString)) throw TypeError('String#' + NAME + \" doesn't accept regex!\");\n  return String(defined(that));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_string-context.js\n// module id = 186\n// module chunks = 26","var MATCH = require('./_wks')('match');\nmodule.exports = function (KEY) {\n  var re = /./;\n  try {\n    '/./'[KEY](re);\n  } catch (e) {\n    try {\n      re[MATCH] = false;\n      return !'/./'[KEY](re);\n    } catch (f) { /* empty */ }\n  } return true;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_fails-is-regexp.js\n// module id = 187\n// module chunks = 26","// check on default Array iterator\nvar Iterators = require('./_iterators');\nvar ITERATOR = require('./_wks')('iterator');\nvar ArrayProto = Array.prototype;\n\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_is-array-iter.js\n// module id = 188\n// module chunks = 26","'use strict';\nvar $defineProperty = require('./_object-dp');\nvar createDesc = require('./_property-desc');\n\nmodule.exports = function (object, index, value) {\n  if (index in object) $defineProperty.f(object, index, createDesc(0, value));\n  else object[index] = value;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_create-property.js\n// module id = 189\n// module chunks = 26","var classof = require('./_classof');\nvar ITERATOR = require('./_wks')('iterator');\nvar Iterators = require('./_iterators');\nmodule.exports = require('./_core').getIteratorMethod = function (it) {\n  if (it != undefined) return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/core.get-iterator-method.js\n// module id = 190\n// module chunks = 26","// 9.4.2.3 ArraySpeciesCreate(originalArray, length)\nvar speciesConstructor = require('./_array-species-constructor');\n\nmodule.exports = function (original, length) {\n  return new (speciesConstructor(original))(length);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_array-species-create.js\n// module id = 191\n// module chunks = 26","// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)\n'use strict';\nvar toObject = require('./_to-object');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nvar toLength = require('./_to-length');\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = toLength(O.length);\n  var aLen = arguments.length;\n  var index = toAbsoluteIndex(aLen > 1 ? arguments[1] : undefined, length);\n  var end = aLen > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_array-fill.js\n// module id = 192\n// module chunks = 26","'use strict';\nvar addToUnscopables = require('./_add-to-unscopables');\nvar step = require('./_iter-step');\nvar Iterators = require('./_iterators');\nvar toIObject = require('./_to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./_iter-define')(Array, 'Array', function (iterated, kind) {\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var kind = this._k;\n  var index = this._i++;\n  if (!O || index >= O.length) {\n    this._t = undefined;\n    return step(1);\n  }\n  if (kind == 'keys') return step(0, index);\n  if (kind == 'values') return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.array.iterator.js\n// module id = 193\n// module chunks = 26","var ctx = require('./_ctx');\nvar invoke = require('./_invoke');\nvar html = require('./_html');\nvar cel = require('./_dom-create');\nvar global = require('./_global');\nvar process = global.process;\nvar setTask = global.setImmediate;\nvar clearTask = global.clearImmediate;\nvar MessageChannel = global.MessageChannel;\nvar Dispatch = global.Dispatch;\nvar counter = 0;\nvar queue = {};\nvar ONREADYSTATECHANGE = 'onreadystatechange';\nvar defer, channel, port;\nvar run = function () {\n  var id = +this;\n  // eslint-disable-next-line no-prototype-builtins\n  if (queue.hasOwnProperty(id)) {\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listener = function (event) {\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif (!setTask || !clearTask) {\n  setTask = function setImmediate(fn) {\n    var args = [];\n    var i = 1;\n    while (arguments.length > i) args.push(arguments[i++]);\n    queue[++counter] = function () {\n      // eslint-disable-next-line no-new-func\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id) {\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if (require('./_cof')(process) == 'process') {\n    defer = function (id) {\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Sphere (JS game engine) Dispatch API\n  } else if (Dispatch && Dispatch.now) {\n    defer = function (id) {\n      Dispatch.now(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if (MessageChannel) {\n    channel = new MessageChannel();\n    port = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if (global.addEventListener && typeof postMessage == 'function' && !global.importScripts) {\n    defer = function (id) {\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listener, false);\n  // IE8-\n  } else if (ONREADYSTATECHANGE in cel('script')) {\n    defer = function (id) {\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function () {\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function (id) {\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set: setTask,\n  clear: clearTask\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_task.js\n// module id = 194\n// module chunks = 26","var global = require('./_global');\nvar macrotask = require('./_task').set;\nvar Observer = global.MutationObserver || global.WebKitMutationObserver;\nvar process = global.process;\nvar Promise = global.Promise;\nvar isNode = require('./_cof')(process) == 'process';\n\nmodule.exports = function () {\n  var head, last, notify;\n\n  var flush = function () {\n    var parent, fn;\n    if (isNode && (parent = process.domain)) parent.exit();\n    while (head) {\n      fn = head.fn;\n      head = head.next;\n      try {\n        fn();\n      } catch (e) {\n        if (head) notify();\n        else last = undefined;\n        throw e;\n      }\n    } last = undefined;\n    if (parent) parent.enter();\n  };\n\n  // Node.js\n  if (isNode) {\n    notify = function () {\n      process.nextTick(flush);\n    };\n  // browsers with MutationObserver, except iOS Safari - https://github.com/zloirock/core-js/issues/339\n  } else if (Observer && !(global.navigator && global.navigator.standalone)) {\n    var toggle = true;\n    var node = document.createTextNode('');\n    new Observer(flush).observe(node, { characterData: true }); // eslint-disable-line no-new\n    notify = function () {\n      node.data = toggle = !toggle;\n    };\n  // environments with maybe non-completely correct, but existent Promise\n  } else if (Promise && Promise.resolve) {\n    var promise = Promise.resolve();\n    notify = function () {\n      promise.then(flush);\n    };\n  // for other environments - macrotask based on:\n  // - setImmediate\n  // - MessageChannel\n  // - window.postMessag\n  // - onreadystatechange\n  // - setTimeout\n  } else {\n    notify = function () {\n      // strange IE + webpack dev server bug - use .call(global)\n      macrotask.call(global, flush);\n    };\n  }\n\n  return function (fn) {\n    var task = { fn: fn, next: undefined };\n    if (last) last.next = task;\n    if (!head) {\n      head = task;\n      notify();\n    } last = task;\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_microtask.js\n// module id = 195\n// module chunks = 26","'use strict';\n// 25.4.1.5 NewPromiseCapability(C)\nvar aFunction = require('./_a-function');\n\nfunction PromiseCapability(C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aFunction(resolve);\n  this.reject = aFunction(reject);\n}\n\nmodule.exports.f = function (C) {\n  return new PromiseCapability(C);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_new-promise-capability.js\n// module id = 196\n// module chunks = 26","'use strict';\nvar global = require('./_global');\nvar DESCRIPTORS = require('./_descriptors');\nvar LIBRARY = require('./_library');\nvar $typed = require('./_typed');\nvar hide = require('./_hide');\nvar redefineAll = require('./_redefine-all');\nvar fails = require('./_fails');\nvar anInstance = require('./_an-instance');\nvar toInteger = require('./_to-integer');\nvar toLength = require('./_to-length');\nvar toIndex = require('./_to-index');\nvar gOPN = require('./_object-gopn').f;\nvar dP = require('./_object-dp').f;\nvar arrayFill = require('./_array-fill');\nvar setToStringTag = require('./_set-to-string-tag');\nvar ARRAY_BUFFER = 'ArrayBuffer';\nvar DATA_VIEW = 'DataView';\nvar PROTOTYPE = 'prototype';\nvar WRONG_LENGTH = 'Wrong length!';\nvar WRONG_INDEX = 'Wrong index!';\nvar $ArrayBuffer = global[ARRAY_BUFFER];\nvar $DataView = global[DATA_VIEW];\nvar Math = global.Math;\nvar RangeError = global.RangeError;\n// eslint-disable-next-line no-shadow-restricted-names\nvar Infinity = global.Infinity;\nvar BaseBuffer = $ArrayBuffer;\nvar abs = Math.abs;\nvar pow = Math.pow;\nvar floor = Math.floor;\nvar log = Math.log;\nvar LN2 = Math.LN2;\nvar BUFFER = 'buffer';\nvar BYTE_LENGTH = 'byteLength';\nvar BYTE_OFFSET = 'byteOffset';\nvar $BUFFER = DESCRIPTORS ? '_b' : BUFFER;\nvar $LENGTH = DESCRIPTORS ? '_l' : BYTE_LENGTH;\nvar $OFFSET = DESCRIPTORS ? '_o' : BYTE_OFFSET;\n\n// IEEE754 conversions based on https://github.com/feross/ieee754\nfunction packIEEE754(value, mLen, nBytes) {\n  var buffer = new Array(nBytes);\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var rt = mLen === 23 ? pow(2, -24) - pow(2, -77) : 0;\n  var i = 0;\n  var s = value < 0 || value === 0 && 1 / value < 0 ? 1 : 0;\n  var e, m, c;\n  value = abs(value);\n  // eslint-disable-next-line no-self-compare\n  if (value != value || value === Infinity) {\n    // eslint-disable-next-line no-self-compare\n    m = value != value ? 1 : 0;\n    e = eMax;\n  } else {\n    e = floor(log(value) / LN2);\n    if (value * (c = pow(2, -e)) < 1) {\n      e--;\n      c *= 2;\n    }\n    if (e + eBias >= 1) {\n      value += rt / c;\n    } else {\n      value += rt * pow(2, 1 - eBias);\n    }\n    if (value * c >= 2) {\n      e++;\n      c /= 2;\n    }\n    if (e + eBias >= eMax) {\n      m = 0;\n      e = eMax;\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * pow(2, mLen);\n      e = e + eBias;\n    } else {\n      m = value * pow(2, eBias - 1) * pow(2, mLen);\n      e = 0;\n    }\n  }\n  for (; mLen >= 8; buffer[i++] = m & 255, m /= 256, mLen -= 8);\n  e = e << mLen | m;\n  eLen += mLen;\n  for (; eLen > 0; buffer[i++] = e & 255, e /= 256, eLen -= 8);\n  buffer[--i] |= s * 128;\n  return buffer;\n}\nfunction unpackIEEE754(buffer, mLen, nBytes) {\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var nBits = eLen - 7;\n  var i = nBytes - 1;\n  var s = buffer[i--];\n  var e = s & 127;\n  var m;\n  s >>= 7;\n  for (; nBits > 0; e = e * 256 + buffer[i], i--, nBits -= 8);\n  m = e & (1 << -nBits) - 1;\n  e >>= -nBits;\n  nBits += mLen;\n  for (; nBits > 0; m = m * 256 + buffer[i], i--, nBits -= 8);\n  if (e === 0) {\n    e = 1 - eBias;\n  } else if (e === eMax) {\n    return m ? NaN : s ? -Infinity : Infinity;\n  } else {\n    m = m + pow(2, mLen);\n    e = e - eBias;\n  } return (s ? -1 : 1) * m * pow(2, e - mLen);\n}\n\nfunction unpackI32(bytes) {\n  return bytes[3] << 24 | bytes[2] << 16 | bytes[1] << 8 | bytes[0];\n}\nfunction packI8(it) {\n  return [it & 0xff];\n}\nfunction packI16(it) {\n  return [it & 0xff, it >> 8 & 0xff];\n}\nfunction packI32(it) {\n  return [it & 0xff, it >> 8 & 0xff, it >> 16 & 0xff, it >> 24 & 0xff];\n}\nfunction packF64(it) {\n  return packIEEE754(it, 52, 8);\n}\nfunction packF32(it) {\n  return packIEEE754(it, 23, 4);\n}\n\nfunction addGetter(C, key, internal) {\n  dP(C[PROTOTYPE], key, { get: function () { return this[internal]; } });\n}\n\nfunction get(view, bytes, index, isLittleEndian) {\n  var numIndex = +index;\n  var intIndex = toIndex(numIndex);\n  if (intIndex + bytes > view[$LENGTH]) throw RangeError(WRONG_INDEX);\n  var store = view[$BUFFER]._b;\n  var start = intIndex + view[$OFFSET];\n  var pack = store.slice(start, start + bytes);\n  return isLittleEndian ? pack : pack.reverse();\n}\nfunction set(view, bytes, index, conversion, value, isLittleEndian) {\n  var numIndex = +index;\n  var intIndex = toIndex(numIndex);\n  if (intIndex + bytes > view[$LENGTH]) throw RangeError(WRONG_INDEX);\n  var store = view[$BUFFER]._b;\n  var start = intIndex + view[$OFFSET];\n  var pack = conversion(+value);\n  for (var i = 0; i < bytes; i++) store[start + i] = pack[isLittleEndian ? i : bytes - i - 1];\n}\n\nif (!$typed.ABV) {\n  $ArrayBuffer = function ArrayBuffer(length) {\n    anInstance(this, $ArrayBuffer, ARRAY_BUFFER);\n    var byteLength = toIndex(length);\n    this._b = arrayFill.call(new Array(byteLength), 0);\n    this[$LENGTH] = byteLength;\n  };\n\n  $DataView = function DataView(buffer, byteOffset, byteLength) {\n    anInstance(this, $DataView, DATA_VIEW);\n    anInstance(buffer, $ArrayBuffer, DATA_VIEW);\n    var bufferLength = buffer[$LENGTH];\n    var offset = toInteger(byteOffset);\n    if (offset < 0 || offset > bufferLength) throw RangeError('Wrong offset!');\n    byteLength = byteLength === undefined ? bufferLength - offset : toLength(byteLength);\n    if (offset + byteLength > bufferLength) throw RangeError(WRONG_LENGTH);\n    this[$BUFFER] = buffer;\n    this[$OFFSET] = offset;\n    this[$LENGTH] = byteLength;\n  };\n\n  if (DESCRIPTORS) {\n    addGetter($ArrayBuffer, BYTE_LENGTH, '_l');\n    addGetter($DataView, BUFFER, '_b');\n    addGetter($DataView, BYTE_LENGTH, '_l');\n    addGetter($DataView, BYTE_OFFSET, '_o');\n  }\n\n  redefineAll($DataView[PROTOTYPE], {\n    getInt8: function getInt8(byteOffset) {\n      return get(this, 1, byteOffset)[0] << 24 >> 24;\n    },\n    getUint8: function getUint8(byteOffset) {\n      return get(this, 1, byteOffset)[0];\n    },\n    getInt16: function getInt16(byteOffset /* , littleEndian */) {\n      var bytes = get(this, 2, byteOffset, arguments[1]);\n      return (bytes[1] << 8 | bytes[0]) << 16 >> 16;\n    },\n    getUint16: function getUint16(byteOffset /* , littleEndian */) {\n      var bytes = get(this, 2, byteOffset, arguments[1]);\n      return bytes[1] << 8 | bytes[0];\n    },\n    getInt32: function getInt32(byteOffset /* , littleEndian */) {\n      return unpackI32(get(this, 4, byteOffset, arguments[1]));\n    },\n    getUint32: function getUint32(byteOffset /* , littleEndian */) {\n      return unpackI32(get(this, 4, byteOffset, arguments[1])) >>> 0;\n    },\n    getFloat32: function getFloat32(byteOffset /* , littleEndian */) {\n      return unpackIEEE754(get(this, 4, byteOffset, arguments[1]), 23, 4);\n    },\n    getFloat64: function getFloat64(byteOffset /* , littleEndian */) {\n      return unpackIEEE754(get(this, 8, byteOffset, arguments[1]), 52, 8);\n    },\n    setInt8: function setInt8(byteOffset, value) {\n      set(this, 1, byteOffset, packI8, value);\n    },\n    setUint8: function setUint8(byteOffset, value) {\n      set(this, 1, byteOffset, packI8, value);\n    },\n    setInt16: function setInt16(byteOffset, value /* , littleEndian */) {\n      set(this, 2, byteOffset, packI16, value, arguments[2]);\n    },\n    setUint16: function setUint16(byteOffset, value /* , littleEndian */) {\n      set(this, 2, byteOffset, packI16, value, arguments[2]);\n    },\n    setInt32: function setInt32(byteOffset, value /* , littleEndian */) {\n      set(this, 4, byteOffset, packI32, value, arguments[2]);\n    },\n    setUint32: function setUint32(byteOffset, value /* , littleEndian */) {\n      set(this, 4, byteOffset, packI32, value, arguments[2]);\n    },\n    setFloat32: function setFloat32(byteOffset, value /* , littleEndian */) {\n      set(this, 4, byteOffset, packF32, value, arguments[2]);\n    },\n    setFloat64: function setFloat64(byteOffset, value /* , littleEndian */) {\n      set(this, 8, byteOffset, packF64, value, arguments[2]);\n    }\n  });\n} else {\n  if (!fails(function () {\n    $ArrayBuffer(1);\n  }) || !fails(function () {\n    new $ArrayBuffer(-1); // eslint-disable-line no-new\n  }) || fails(function () {\n    new $ArrayBuffer(); // eslint-disable-line no-new\n    new $ArrayBuffer(1.5); // eslint-disable-line no-new\n    new $ArrayBuffer(NaN); // eslint-disable-line no-new\n    return $ArrayBuffer.name != ARRAY_BUFFER;\n  })) {\n    $ArrayBuffer = function ArrayBuffer(length) {\n      anInstance(this, $ArrayBuffer);\n      return new BaseBuffer(toIndex(length));\n    };\n    var ArrayBufferProto = $ArrayBuffer[PROTOTYPE] = BaseBuffer[PROTOTYPE];\n    for (var keys = gOPN(BaseBuffer), j = 0, key; keys.length > j;) {\n      if (!((key = keys[j++]) in $ArrayBuffer)) hide($ArrayBuffer, key, BaseBuffer[key]);\n    }\n    if (!LIBRARY) ArrayBufferProto.constructor = $ArrayBuffer;\n  }\n  // iOS Safari 7.x bug\n  var view = new $DataView(new $ArrayBuffer(2));\n  var $setInt8 = $DataView[PROTOTYPE].setInt8;\n  view.setInt8(0, 2147483648);\n  view.setInt8(1, 2147483649);\n  if (view.getInt8(0) || !view.getInt8(1)) redefineAll($DataView[PROTOTYPE], {\n    setInt8: function setInt8(byteOffset, value) {\n      $setInt8.call(this, byteOffset, value << 24 >> 24);\n    },\n    setUint8: function setUint8(byteOffset, value) {\n      $setInt8.call(this, byteOffset, value << 24 >> 24);\n    }\n  }, true);\n}\nsetToStringTag($ArrayBuffer, ARRAY_BUFFER);\nsetToStringTag($DataView, DATA_VIEW);\nhide($DataView[PROTOTYPE], $typed.VIEW, true);\nexports[ARRAY_BUFFER] = $ArrayBuffer;\nexports[DATA_VIEW] = $DataView;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_typed-buffer.js\n// module id = 197\n// module chunks = 26","var global = require('./_global');\nvar navigator = global.navigator;\n\nmodule.exports = navigator && navigator.userAgent || '';\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_user-agent.js\n// module id = 198\n// module chunks = 26","/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { AMElement } from \"./AMElement\";\r\nimport { List } from \"../utils/List\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Creates an SVG `<g>` element.\r\n *\r\n * SVG groups are used for elements that need more elements just one.\r\n *\r\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/SVG/Element/g} About `<g>` element\r\n */\r\nexport class Group extends AMElement {\r\n\r\n\t/**\r\n\t * All child elements contained in the group.\r\n\t * \r\n\t * @type {List<AMElement>}\r\n\t */\r\n\tpublic children: List<AMElement> = new List<AMElement>();\r\n\r\n\t/**\r\n\t * Constructor.\r\n\t * \r\n\t * @param {string} elementName Element type (should be \"g\")\r\n\t */\r\n\tconstructor(elementName: string) {\r\n\t\tsuper(elementName);\r\n\t}\r\n\r\n\t/**\r\n\t * Adds an element to group.\r\n\t *\r\n\t * This will manipulate DOM. `element` will be physically moved into group.\r\n\t * \r\n\t * @param {AMElement}  element  Element\r\n\t */\r\n\tpublic add(element: AMElement): void {\r\n\t\tif (element) {\t\t\t\r\n\t\t\tthis.children.moveValue(element);\r\n\t\t\tthis.node.appendChild(element.node);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Adds an element to group.\r\n\t *\r\n\t * This will manipulate DOM. `element` will be physically moved into group.\r\n\t * \r\n\t * @param {AMElement}  element  Element\r\n\t */\r\n\tpublic addToBack(element: AMElement): void {\r\n\t\tif (element) {\r\n\t\t\tlet first = this.node.childNodes[0];\r\n\t\t\tif(first){\r\n\t\t\t\tthis.node.insertBefore(element.node, first);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.node.appendChild(element.node);\r\n\t\t\t}\r\n\t\t\tthis.children.moveValue(element);\r\n\t\t}\r\n\t}\t\r\n\r\n\t/**\r\n\t * Removes the `element` from group.\r\n\t *\r\n\t * Please note that this will not dispose the element itself, it will just\r\n\t * remove it from the group.\r\n\t * \r\n\t * @param {AMElement}  element  Element\r\n\t */\r\n\tpublic removeElement(element: AMElement): void {\r\n\t\t// todo: not sure about the speed, need to investigate, maybe it's faster to check if node is a child\r\n\t\tif (element) {\r\n\t\t\ttry {\r\n\t\t\t\tthis.node.removeChild(element.node);\r\n\t\t\t}\r\n\t\t\tcatch (err) {\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.children.removeValue(element);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * First element in the group.\r\n\t * \r\n\t * @return {AMElement} First element\r\n\t */\r\n\tpublic get firstChild(): AMElement {\r\n\t\tif (this.children.length) {\r\n\t\t\treturn this.children.getIndex(0);\r\n\t\t}\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\t/**\r\n\t * Last element in the group.\r\n\t * \r\n\t * @return {AMElement} Last element\r\n\t */\r\n\tpublic get lastChild(): AMElement {\r\n\t\tlet len: number\r\n\t\tif (len = this.children.length) {\r\n\t\t\treturn this.children.getIndex(len - 1);\r\n\t\t}\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\t/**\r\n\t * Content of the group element.\r\n\t *\r\n\t * Can be used to add a lot of proprietary SVG markup into group.\r\n\t * \r\n\t * @param {string}  value  SVG markup\r\n\t */\r\n\tpublic set content(value: string) {\r\n\t\tthis.node.innerHTML = value;\r\n\t\tthis.populateChildren();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {string} SVG markup\r\n\t */\r\n\tpublic get content(): string {\r\n\t\treturn this.node.innerHTML;\r\n\t}\r\n\r\n\t/**\r\n\t * Removes all children from the group.\r\n\t *\r\n\t * This will note dispose the children. They will remain in memory as\r\n\t * orphans. To automatically remove and dispose children elements use\r\n\t * `disposeChildren()` instead.\r\n\t */\r\n\tpublic removeChildren(): void {\r\n\t\twhile (this.children.length > 0) {\r\n\t\t\tlet child: AMElement = this.children.getIndex(0);\r\n\t\t\tif(child.node && child.node.parentNode){\r\n\t\t\t\tchild.node.parentNode.removeChild(child.node);\r\n\t\t\t}\t\t\t\r\n\t\t\tthis.children.removeValue(child);\t\t\t\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Removes and disposes all elements in the group.\r\n\t */\r\n\tpublic disposeChildren() {\r\n\t\t// TODO make this more efficient\r\n\t\twhile (this.children.length > 0) {\r\n\t\t\tlet child: AMElement = this.children.getIndex(0);\r\n\t\t\tthis.children.removeValue(child);\r\n\t\t\tchild.dispose();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Regenerates internal `children` list out of the actual nodes in DOM.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic populateChildren(): void {\r\n\t\tthis.children.clear();\r\n\t\tfor (let i: number = 0, len: number = this.node.childNodes.length; i < len; i++) {\r\n\t\t\tlet element: SVGSVGElement = <SVGSVGElement>this.node.childNodes[i];\r\n\t\t\tthis.children.push(new AMElement(element));\r\n\t\t}\r\n\t}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/rendering/Group.ts","/**\r\n * \r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Color, color } from \"../utils/Color\"\r\n\r\n/**\r\n * Defines a class that holds default properties for new SVG elements\r\n */\r\nexport class SVGDefaults {\r\n\tstatic opacity: number = 1;\r\n\tstatic strokeOpacity: number = 1;\r\n\tstatic strokeWidth: number = 1;\r\n\tstatic fillOpacity: number = 1;\r\n\tstatic fill: Color = color(\"#000000\");\r\n\tstatic stroke: Color = color(\"#000000\");\r\n\tstatic focusable: boolean = undefined;\r\n\tstatic tabindex: number = 0;\r\n}\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/defs/SVGDefaults.ts","/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Sprite } from \"./Sprite\";\r\nimport { Dictionary } from \"./utils/Dictionary\";\r\nimport { EventListener, TargetedEventDispatcher, AMEvent } from \"./utils/EventDispatcher\";\r\nimport { InteractionObject, IInteractionObjectEvents } from \"./interaction/InteractionObject\";\r\nimport { IPointer } from \"./interaction/Pointer\";\r\nimport { MultiDisposer, IDisposer, CounterDisposer } from \"./utils/Disposer\";\r\nimport { IPoint } from \"./defs/IPoint\";\r\nimport * as $utils from \"./utils/Utils\";\r\nimport * as $object from \"./utils/Object\";\r\n\r\n/**\r\n * ============================================================================\r\n * RE-EXPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nexport { AMEvent };\r\n\r\n/**\r\n * An [[EventDispatcher]] for [[Sprite]].\r\n *\r\n * @type {TargetedEventDispatcher}\r\n * @important\r\n */\r\nexport class SpriteEventDispatcher<T extends AMEvent<Sprite, ISpriteEvents>> extends TargetedEventDispatcher<Sprite, T> {\r\n\r\n\t/**\r\n\t * [_interactionEvents description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {Dictionary}\r\n\t */\r\n\tprivate _interactionEvents = new Dictionary<keyof IInteractionObjectEvents, CounterDisposer>();\r\n\r\n\t/**\r\n\t * [_dispatchSpriteEvent description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {[type]}\r\n\t */\r\n\tprivate _dispatchSpriteEvent<Key extends keyof IInteractionObjectEvents>(ev: AMEvent<InteractionObject, IInteractionObjectEvents>[Key]): void {\r\n\t\tif (this.target.disabled || this.target.isTemplate) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// TODO remove this <any> later\r\n\t\tif (this.target.events.isEnabled(ev.type)) {\r\n\t\t\tlet imev: AMEvent<Sprite, ISpriteEvents>[Key] = <any>$object.merge(ev, {\r\n\t\t\t\ttarget: this.target\r\n\t\t\t});\r\n\t\t\tthis.target.events.dispatchImmediately(imev.type, imev);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * [_dispatchSpritePointEvent description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {[type]}\r\n\t */\r\n\tprivate _dispatchSpritePointEvent<Key extends \"hit\" | \"track\">(ev: AMEvent<InteractionObject, IInteractionObjectEvents>[Key]): void {\r\n\t\tif (this.target.disabled || this.target.isTemplate) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// TODO remove this <any> later\r\n\t\tif (this.target.events.isEnabled(ev.type)) {\r\n\r\n\t\t\tlet imev: AMEvent<Sprite, ISpriteEvents>[Key] = <any>$object.merge(ev, {\r\n\t\t\t\ttarget: this.target,\r\n\t\t\t\tspritePoint: $utils.documentPointToSprite(ev.point, this.target),\r\n\t\t\t\tsvgPoint: this.target.getSvgPoint(ev.point)\r\n\t\t\t});\r\n\t\t\tthis.target.events.dispatchImmediately(imev.type, imev);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * [_addInteractionObjectEvent description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {[type]}\r\n\t */\r\n\tprivate _addInteractionObjectEvent<C, Key extends keyof IInteractionObjectEvents>(type: Key, callback: (this: C, ev: AMEvent<InteractionObject, IInteractionObjectEvents>[Key]) => void, context: C): IDisposer {\r\n\t\tconst counter = this._interactionEvents.insertKeyIfEmpty(type, () => {\r\n\t\t\tconst disposer = this.target.interactions.events.on(type, callback, context);\r\n\r\n\t\t\treturn new CounterDisposer(() => {\r\n\t\t\t\tthis._interactionEvents.removeKey(type);\r\n\t\t\t\tdisposer.dispose();\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\treturn counter.increment();\r\n\t}\r\n\r\n\t/**\r\n\t * [_on description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {[type]}\r\n\t */\r\n\tprotected _on<A, B, Key extends keyof T>(once: boolean, type: Key | null, callback: A, context: B, dispatch: (type: Key, event: T[Key]) => void): EventListener<T> {\r\n\t\tconst info = super._on(once, type, callback, context, dispatch);\r\n\r\n\t\tconst disposers = [info.disposer];\r\n\r\n\t\t/**\r\n\t\t * Catching Sprite-related events, converting them to [[SpriteEvent]] and\r\n\t\t * triggering them on sprite\r\n\t\t */\r\n\t\tswitch (type) {\r\n\t\t\tcase \"hit\":\r\n\t\t\tcase \"track\":\r\n\t\t\tcase \"doublehit\":\r\n\t\t\tcase \"wheel\":\r\n\t\t\tcase \"wheelup\":\r\n\t\t\tcase \"wheeldown\":\r\n\t\t\tcase \"wheelleft\":\r\n\t\t\tcase \"wheelright\":\r\n\t\t\t\tdisposers.push(this._addInteractionObjectEvent(type, this._dispatchSpritePointEvent, this));\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"rightclick\":\r\n\t\t\tcase \"down\":\r\n\t\t\tcase \"hold\":\r\n\t\t\tcase \"up\":\r\n\t\t\tcase \"drag\":\r\n\t\t\tcase \"dragstart\":\r\n\t\t\tcase \"dragstop\":\r\n\t\t\tcase \"over\":\r\n\t\t\tcase \"out\":\r\n\t\t\tcase \"swipe\":\r\n\t\t\tcase \"swipeleft\":\r\n\t\t\tcase \"swiperight\":\r\n\t\t\tcase \"resize\":\r\n\t\t\tcase \"rotate\":\r\n\t\t\tcase \"focus\":\r\n\t\t\tcase \"blur\":\r\n\t\t\tcase \"toggled\":\r\n\t\t\t\tdisposers.push(this._addInteractionObjectEvent(type, this._dispatchSpriteEvent, this));\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Set functional properties based on events. For example if we add a\r\n\t\t * \"drag\" event handler, we want to make the Sprite draggable, even if we\r\n\t\t * don't explicitly set \"draggable\"\r\n\t\t */\r\n\t\tswitch (type) {\r\n\t\t\tcase \"hit\":\r\n\t\t\tcase \"doublehit\":\r\n\t\t\tcase \"rightclick\":\r\n\t\t\tcase \"down\":\r\n\t\t\tcase \"up\":\r\n\t\t\t\tthis.target.clickable = true;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"toggled\":\r\n\t\t\t\tthis.target.togglable = true;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"drag\":\r\n\t\t\tcase \"dragstart\":\r\n\t\t\tcase \"dragstop\":\r\n\t\t\t\tthis.target.draggable = true;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"track\":\r\n\t\t\t\tthis.target.trackable = true;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"rotate\":\r\n\t\t\t\tthis.target.rotatable = true;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"resize\":\r\n\t\t\t\tthis.target.resizable = true;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"swipe\":\r\n\t\t\tcase \"swipeleft\":\r\n\t\t\tcase \"swiperight\":\r\n\t\t\t\tthis.target.swipeable = true;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"wheel\":\r\n\t\t\tcase \"wheelup\":\r\n\t\t\tcase \"wheeldown\":\r\n\t\t\tcase \"wheelleft\":\r\n\t\t\tcase \"wheelright\":\r\n\t\t\t\tthis.target.wheelable = true;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"over\":\r\n\t\t\tcase \"out\":\r\n\t\t\t\tthis.target.hoverable = true;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"focus\":\r\n\t\t\tcase \"blur\":\r\n\t\t\t\tthis.target.focusable = true;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tinfo.disposer = new MultiDisposer(disposers);\r\n\r\n\t\treturn info;\r\n\t}\r\n}\r\n\r\n\r\n/**\r\n * Defines property set for a [[Sprite]] event that contains point information.\r\n *\r\n * @type {Object}\r\n */\r\nexport type SpritePointEvent = {\r\n\t/**\r\n\t * Event point in global (document) coordinates.\r\n\t *\r\n\t * @type {IPoint}\r\n\t */\r\n\tpoint: IPoint;\r\n\r\n\t/**\r\n\t * Event point in local Sprite coordinates.\r\n\t *\r\n\t * @type {IPoint}\r\n\t */\r\n\tspritePoint: IPoint;\r\n\r\n\t/**\r\n\t * Event point with chart (svg) coodinates.\r\n\t *\r\n\t * @type {IPoint}\r\n\t */\r\n\tsvgPoint: IPoint;\r\n};\r\n\r\n\r\n/**\r\n * Defines a type of event that has a related Pointer.\r\n */\r\nexport type SpritePointerEvent = {\r\n\r\n\t/**\r\n\t * Coordinates of the primary cursor position.\r\n\t *\r\n\t * @type {Pointer}\r\n\t */\r\n\tpointer: IPointer;\r\n\r\n};\r\n\r\n\r\n/**\r\n * Defines property set for a [[Sprite]] event that contains mouse or touch\r\n * event.\r\n *\r\n * @type {Object}\r\n */\r\nexport type SpriteMouseTouchEvent = {\r\n\r\n\t/**\r\n\t * Original mouse/touch event.\r\n\t *\r\n\t * @type {MouseEvent | TouchEvent}\r\n\t */\r\n\tevent: MouseEvent | TouchEvent;\r\n\r\n};\r\n\r\n/**\r\n * Defines property set for a [[Sprite]] event that contains coordinate shift\r\n * information, such as drag events.\r\n *\r\n * @type {Object}\r\n */\r\nexport type SpriteShiftEvent = {\r\n\r\n\t/**\r\n\t * Shift in coordinates after dragging.\r\n\t *\r\n\t * @type {IPoint}\r\n\t */\r\n\tshift: IPoint;\r\n\r\n};\r\n\r\n/**\r\n * Defines available events available for [[Sprite]].\r\n */\r\nexport interface ISpriteEvents extends IInteractionObjectEvents {\r\n\r\n\t/**\r\n\t * Invoked when Sprite completes transition to a [[SpriteState]].\r\n\t */\r\n\ttransitionended: {};\r\n\r\n\t/**\r\n\t * Invoked when size of the Sprite changes.\r\n\t */\r\n\tsizechanged: {};\r\n\r\n\t/**\r\n\t * Invoked when maximum available size of the Sprite changes, i.e. when the\r\n\t * size of parent container changes.\r\n\t */\r\n\tmaxsizechanged: {};\r\n\r\n\t/**\r\n\t * @todo Description\r\n\t */\r\n\ttransformed: {\r\n\r\n\t\t/**\r\n\t\t * [string description]\r\n\t\t * @type {string}\r\n\t\t * @todo Needs description\r\n\t\t */\r\n\t\tdummyData?: string;\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when position of the [[Sprite]] changes.\r\n\t */\r\n\tpositionchanged: {};\r\n\r\n\t/**\r\n\t * Invoked when [[Sprite]] is initialized.\r\n\t */\r\n\tinited: {};\r\n\r\n\r\n\t/**\r\n\t * Invoked before [[Sprite]] is validated.\r\n\t *\r\n\t * @todo Description (check)\r\n\t */\r\n\tbeforevalidated: {};\r\n\r\n\t/**\r\n\t * Invoked when [[Sprite]] is validated. (on init or after update)\r\n\t *\r\n\t * @todo Description (check)\r\n\t */\r\n\tvalidated: {};\r\n\r\n\t/**\r\n\t * Invoked when visibility of the [[Sprite]] changes. (from visible to hidden,\r\n\t * and vice versa)\r\n\t */\r\n\tvisibilitychanged: {};\r\n\r\n\t/**\r\n\t * Invoked when hidden [[Sprite]] is shown.\r\n\t */\r\n\tshown: {};\r\n\r\n\t/**\r\n\t * Invoked when visible [[Sprite]] is hidden.\r\n\t */\r\n\thidden: {};\r\n\r\n\t/**\r\n\t * Invoked when zIndex of a sprite is changed\r\n\t */\r\n\tzIndexChanged: {};\t\r\n\r\n\t/**\r\n\t * Invoked when property of the [[Sprite]] changes.\r\n\t */\r\n\tpropertychanged: {\r\n\r\n\t\t/**\r\n\t\t * Property key.\r\n\t\t *\r\n\t\t * @type {string}\r\n\t\t */\r\n\t\tproperty: string;\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when the global scale changed, meaning that scale of [[Sprite]]\r\n\t * or any of its ascendants changed.\r\n\t */\r\n\tglobalscalechanged: {};\r\n\r\n\t/**\r\n\t * Invoked when [[Sprite]] is clicked or touched.\r\n\t */\r\n\thit: SpritePointEvent & SpriteMouseTouchEvent;\r\n\r\n\t/**\r\n\t * Invoked when [[Sprite]] is clicked or touched twice in rapid succession.\r\n\t */\r\n\tdoublehit: SpritePointEvent & SpriteMouseTouchEvent;\r\n\r\n\t/**\r\n\t * Invoked when pointer (mouse cursor or touch point) moves over `trackable`\r\n\t * [[Sprite]].\r\n\t */\r\n\ttrack: SpritePointEvent & SpritePointerEvent & SpriteMouseTouchEvent;\r\n\r\n\t/**\r\n\t * Invoked when user turns mouse wheel while over the [[Sprite]].\r\n\t */\r\n\twheel: SpritePointEvent & SpriteShiftEvent & {\r\n\r\n\t\t/**\r\n\t\t * Original JavaScript event.\r\n\t\t *\r\n\t\t * @type {WheelEvent}\r\n\t\t */\r\n\t\tevent: WheelEvent\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when user turns mouse wheel upwards while over the [[Sprite]].\r\n\t */\r\n\twheelup: SpritePointEvent & SpriteShiftEvent & {\r\n\r\n\t\t/**\r\n\t\t * Original JavaScript event\r\n\t\t * @type {WheelEvent}\r\n\t\t */\r\n\t\tevent: WheelEvent\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when user turns mouse wheel downwards while over the [[Sprite]].\r\n\t */\r\n\twheeldown: SpritePointEvent & SpriteShiftEvent & {\r\n\r\n\t\t/**\r\n\t\t * Original JavaScript event.\r\n\t\t *\r\n\t\t * @type {WheelEvent}\r\n\t\t */\r\n\t\tevent: WheelEvent\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when user turns mouse wheel leftwards while over the [[Sprite]].\r\n\t */\r\n\twheelleft: SpritePointEvent & SpriteShiftEvent & {\r\n\r\n\t\t/**\r\n\t\t * Original JavaScript event\r\n\t\t * @type {WheelEvent}\r\n\t\t */\r\n\t\tevent: WheelEvent\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when user turns mouse wheel rightwards while over the [[Sprite]].\r\n\t */\r\n\twheelright: SpritePointEvent & SpriteShiftEvent & {\r\n\r\n\t\t/**\r\n\t\t * Original JavaScript event.\r\n\t\t *\r\n\t\t * @type {WheelEvent}\r\n\t\t */\r\n\t\tevent: WheelEvent\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when `togglable` Sprite is being toggled on and off. (its\r\n\t * `isActive` property is being changed)\r\n\t */\r\n\ttoggled: {};\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../src/.internal/core/SpriteEvents.ts","/**\r\n * Contains code and logic for generating radial gradients.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { BaseObject } from \"../../Base\";\r\nimport { getSystem } from \"../../System\";\r\nimport { List } from \"../../utils/List\";\r\nimport { Group } from \"../Group\";\r\nimport { AMElement } from \"../AMElement\";\r\nimport { Paper } from \"../Paper\";\r\nimport { registry } from \"../../Registry\";\r\nimport { IGradientStop } from \"./LinearGradient\";\r\nimport { IPoint } from \"../../defs/IPoint\";\r\nimport { Color } from \"../../utils/Color\";\r\nimport * as $iter from \"../../utils/Iterator\";\r\nimport * as $type from \"../../utils/Type\";\r\nimport { percent, Percent } from \"../../utils/Percent\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Radial gradient class.\r\n */\r\nexport class RadialGradient extends BaseObject {\r\n\r\n\t/**\r\n\t * List of colors switch definitions in a gradient.\r\n\t *\r\n\t * @type {List<IGradientStop>}\r\n\t */\r\n\tprotected _stops: List<IGradientStop> = new List<IGradientStop>();\r\n\r\n\t/**\r\n\t * An SVG `<group>` element used to draw gradient.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Group}\r\n\t */\r\n\tpublic element: Group;\r\n\r\n\t/**\r\n\t * Reference to Paper to add element to.\r\n\t *\r\n\t * @type {Optional<Paper>}\r\n\t */\r\n\tprotected _paper: $type.Optional<Paper>;\r\n\r\n\t/**\r\n\t * A center x coordinate for the radial gradient, can be set in pixels or as Percent\r\n\t *\r\n\t * @type {Optional<number | Percent>}\r\n\t */\r\n\tprotected _cx: $type.Optional<number | Percent>;\r\n\r\n\t/**\r\n\t * A center y coordinate for the radial gradient, can be set in pixels or as Percent\r\n\t *\r\n\t * @type {Optional<number | Percent>}\r\n\t */\r\n\tprotected _cy: $type.Optional<number | Percent>;\r\n\r\n\t/**\r\n\t * A y coordinate of the focal point of a gradient, can be set in pixels or as Percent\r\n\t *\r\n\t * @type {Optional<number | Percent>}\r\n\t */\r\n\tprotected _fx: $type.Optional<number | Percent>;\r\n\r\n\t/**\r\n\t * A y coordinate of the focal point of a gradient, can be set in pixels or as Percent\r\n\t *\r\n\t * @type {Optional<number | Percent>}\r\n\t */\r\n\tprotected _fy: $type.Optional<number | Percent>;\r\n\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.element = this.paper.addGroup(\"radialGradient\");\r\n\t\tthis.id = \"gradient-\" + registry.getUniqueId();\r\n\t\tthis.element.attr({ \"id\": this.id });\r\n\t\tthis._disposers.push(this.element);\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Draws gradient.\r\n\t */\r\n\tprotected draw(): void {\r\n\r\n\t\tlet gradientElement = this.element;\r\n\r\n\t\tif (this.cx) {\r\n\t\t\tlet value:any = this.cx;\r\n\t\t\tif(value instanceof Percent){\r\n\t\t\t\tvalue = value.percent + \"%\";\r\n\t\t\t}\r\n\t\t\tgradientElement.attr({ \"cx\": value });\r\n\t\t}\r\n\r\n\t\tif (this.cy) {\r\n\t\t\tlet value:any = this.cy;\r\n\t\t\tif(value instanceof Percent){\r\n\t\t\t\tvalue = value.percent + \"%\";\r\n\t\t\t}\r\n\t\t\tgradientElement.attr({ \"cy\": value });\r\n\t\t}\r\n\r\n\t\tif (this.fx) {\r\n\t\t\tlet value:any = this.fx;\r\n\t\t\tif(value instanceof Percent){\r\n\t\t\t\tvalue = value.percent + \"%\";\r\n\t\t\t}\r\n\t\t\tgradientElement.attr({ \"fx\": value});\r\n\t\t}\r\n\r\n\t\tif (this.fy) {\r\n\t\t\tlet value:any = this.fy;\r\n\t\t\tif(value instanceof Percent){\r\n\t\t\t\tvalue = value.percent + \"%\";\r\n\t\t\t}\r\n\t\t\tgradientElement.attr({ \"fy\": value});\r\n\t\t}\r\n\r\n\t\tgradientElement.removeChildNodes();\r\n\r\n\t\t$iter.each($iter.indexed(this._stops.iterator()), (a) => {\r\n\t\t\tlet i = a[0];\r\n\t\t\tlet stop = a[1];\r\n\t\t\tlet offset: number = stop.offset;\r\n\r\n\t\t\tif (isNaN(offset)) {\r\n\t\t\t\toffset = i / (this._stops.length - 1)\r\n\t\t\t}\r\n\r\n\t\t\tlet gradientStop: AMElement = this.paper.add(\"stop\");\r\n\t\t\tgradientStop.attr({ \"stop-color\": stop.color });\r\n\t\t\tif (!isNaN(stop.opacity)) {\r\n\t\t\t\tgradientStop.attr({ \"stop-opacity\": stop.opacity });\r\n\t\t\t}\r\n\t\t\tif (!isNaN(offset)) {\r\n\t\t\t\tgradientStop.attr({ \"offset\": offset });\r\n\t\t\t}\r\n\r\n\t\t\tgradientElement.add(gradientStop);\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Adds a color step to the gradient.\r\n\t *\r\n\t * @param {Color}   color    Color (hex code or named color)\r\n\t * @param {number}  opacity  Opacity (value from 0 to 1; 0 completely transaprent, 1 fully opaque)\r\n\t * @param {number}  offset   Position of color in the gradient (value 0 to 1; 0 meaning start of the gradient and 1 end)\r\n\t */\r\n\tpublic addColor(color: Color, opacity?: number, offset?: number): void {\r\n\t\tthis._stops.push({ color: color, opacity: opacity, offset: offset });\r\n\t\tthis.draw();\r\n\t}\r\n\r\n\t/**\r\n\t * A [[Paper]] instace to use for the gradient.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {Paper}  paper  Paper\r\n\t */\r\n\tpublic set paper(paper: Paper) {\r\n\t\tif (this._paper != paper) {\r\n\t\t\tthis._paper = paper;\r\n\t\t\tthis.draw();\r\n\t\t\tpaper.appendDef(this.element);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore Exclude from docs\r\n\t * @return {Paper} Paper\r\n\t */\r\n\tpublic get paper(): Paper {\r\n\t\tif (this._paper) {\r\n\t\t\treturn this._paper;\r\n\t\t}\r\n\t\treturn getSystem().ghostPaper;\r\n\t}\r\n\r\n\t/**\r\n\t * Center x coordinate of the gradient, can be set as number or Percent\r\n\t *\r\n\t * @param {Optional<number | Percent>}  point  Center point\r\n\t */\r\n\tpublic set cx(value: $type.Optional<number | Percent>) {\r\n\t\tthis._cx = value;\r\n\t\tthis.draw();\r\n\t}\r\n\r\n\tpublic get cx(): $type.Optional<number | Percent> {\r\n\t\treturn this._cx;\r\n\t}\r\n\r\n\t/**\r\n\t * Center y coordinate of the gradient, can be set as number or Percent\r\n\t *\r\n\t * @param {Optional<number | Percent>}  point  Center point\r\n\t */\r\n\tpublic set cy(value: $type.Optional<number | Percent>) {\r\n\t\tthis._cy = value;\r\n\t\tthis.draw();\r\n\t}\r\n\r\n\tpublic get cy(): $type.Optional<number | Percent> {\r\n\t\treturn this._cy;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * y coordinate of the focal point of a gradient, can be set in pixels or as Percent\r\n\t *\r\n\t * @param {Optional<number | Percent>}  point  Center point\r\n\t */\r\n\tpublic set fx(value: $type.Optional<number | Percent>) {\r\n\t\tthis._fx = value;\r\n\t\tthis.draw();\r\n\t}\r\n\r\n\tpublic get fx(): $type.Optional<number | Percent> {\r\n\t\treturn this._fx;\r\n\t}\r\n\r\n\t/**\r\n\t * y coordinate of the focal point of a gradient, can be set in pixels or as Percent\r\n\t *\r\n\t * @param {Optional<number | Percent>}  point  Center point\r\n\t */\r\n\tpublic set fy(value: $type.Optional<number | Percent>) {\r\n\t\tthis._fy = value;\r\n\t\tthis.draw();\r\n\t}\r\n\r\n\tpublic get fy(): $type.Optional<number | Percent> {\r\n\t\treturn this._fy;\r\n\t}\r\n\r\n\r\n\r\n\tpublic copyFrom(source:this){\r\n\t\tsuper.copyFrom(source);\r\n\t\tthis._stops = source.stops;\r\n\r\n\t\tthis.cx = source.cx;\r\n\t\tthis.cy = source.cy;\r\n\r\n\t\tthis.fx = source.fx;\r\n\t\tthis.fy = source.fy;\r\n\t}\r\n\r\n\t/**\r\n\t * A list of color stops in the gradient.\r\n\t *\r\n\t * @return {List<IGradientStop>} Stops\r\n\t */\r\n\tpublic get stops(): List<IGradientStop> {\r\n\t\treturn this._stops;\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../../src/.internal/core/rendering/fills/RadialGradient.ts","/**\r\n * Interaction Object module\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { IInteractionObjectEvents, InteractionObjectEventDispatcher } from \"./InteractionObjectEvents\";\r\nimport { BaseObjectEvents } from \"../Base\";\r\nimport { List } from \"../utils/List\";\r\nimport { Dictionary, DictionaryDisposer } from \"../utils/Dictionary\";\r\nimport { AMEvent } from \"../utils/EventDispatcher\";\r\nimport { IPoint } from \"../defs/IPoint\";\r\nimport { IPointer } from \"./Pointer\";\r\nimport { IInertiaOptions, ISwipeOptions, IHitOptions, IHoverOptions, ICursorOptions, IKeyboardOptions } from \"./InteractionOptions\";\r\nimport { InteractionKeyboardObject } from \"./InteractionKeyboardObject\";\r\nimport { getInteraction } from \"./Interaction\";\r\nimport { Inertia, InertiaTypes } from \"./Inertia\";\r\nimport { IDisposer } from \"../utils/Disposer\";\r\nimport { Optional } from \"../utils/Type\";\r\nimport * as $iter from \"../utils/Iterator\";\r\nimport * as $type from \"../utils/Type\";\r\n\r\n\r\n/**\r\n * Re-exports\r\n */\r\nexport { IInteractionObjectEvents, InteractionObjectEventDispatcher };\r\n\r\n/**\r\n * Interaction object represents an object that is subject for any kind of\r\n * interaction with it with any input devices: mouse, touch or keyboard.\r\n *\r\n * Any DOM element can be wrapped into an Internaction object which in turn\r\n * enables attaching various interaction events to it, such as: hit, drag,\r\n * swipe, etc.\r\n *\r\n * To create an [[InteractionObject]] out of a [[Sprite]], use:\r\n * `interaction.getInteractionFromSprite(sprite: Sprite)`\r\n *\r\n * To create an [[InteractionObject]] out of a a regular element:\r\n * `interaction.getInteraction(element: HTMLElement)`\r\n */\r\nexport class InteractionObject extends BaseObjectEvents {\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IInteractionObjectEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IInteractionObjectEvents;\r\n\r\n\t/**\r\n\t * An [[EventDispatcher]] instance which holds events for this object\r\n\t */\r\n\tpublic events: InteractionObjectEventDispatcher<AMEvent<this, this[\"_events\"]>> = new InteractionObjectEventDispatcher(this);\r\n\r\n\t/**\r\n\t * Collection of Disposers for various events. (so that those get disposed\r\n\t * when the whole InteractionObject is disposed)\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Dictionary<string, IDisposer>}\r\n\t */\r\n\tpublic eventDisposers: Dictionary<string, IDisposer> = new Dictionary<string, IDisposer>();\r\n\r\n\t/**\r\n\t * A [[Dictionary]] that holds temporarily replaced original style values for\r\n\t * HTML element, so that they can be restored when the functionality that\r\n\t * replaced them is done.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Dictionary<string, string>}\r\n\t */\r\n\tpublic replacedStyles: Dictionary<string, string> = new Dictionary<string, string>();\r\n\r\n\tprotected _clickable: boolean = false;\r\n\tprotected _hoverable: boolean = false;\r\n\tprotected _trackable: boolean = false;\r\n\tprotected _draggable: boolean = false;\r\n\tprotected _swipeable: boolean = false;\r\n\tprotected _resizable: boolean = false;\r\n\tprotected _rotatable: boolean = false;\r\n\tprotected _wheelable: boolean = false;\r\n\tprotected _inert: boolean = false;\r\n\tprotected _focusable: $type.Optional<boolean>;\r\n\tprotected _tabindex: Optional<number>;\r\n\r\n\t/**\r\n\t * Element to attach events to.\r\n\t *\r\n\t * @type {HTMLElement}\r\n\t */\r\n\tprivate _element: HTMLElement | SVGSVGElement;\r\n\r\n\t/**\r\n\t * Original coordinates for the [[InteractionObject]]. (before application\r\n\t * of the drag)\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IPoint}\r\n\t */\r\n\tpublic _originalPosition: Optional<IPoint>;\r\n\r\n\t/**\r\n\t * Original angle for the [[InteractionObject]]. (before rotation started)\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<number>}\r\n\t */\r\n\tpublic _originalAngle: $type.Optional<number>;\r\n\r\n\t/**\r\n\t * Original scale of the [[InteractionObject]]. (before resizing started)\r\n\t * @type {Optional<number>}\r\n\t */\r\n\tpublic _originalScale: $type.Optional<number>;\r\n\r\n\t/**\r\n\t * Coordinates of the primary cursor position.\r\n\t *\r\n\t * @type {IPoint}\r\n\t * @deprecated\r\n\t * @todo Remove\r\n\t */\r\n\t//public pointer: IPoint;\r\n\r\n\t/**\r\n\t * List of pointers current over element.\r\n\t *\r\n\t * @type {Optional<List<IPointer>>}\r\n\t */\r\n\tprotected _overPointers: $type.Optional<List<IPointer>>;\r\n\r\n\t/**\r\n\t * List of pointer currently pressing down on element.\r\n\t *\r\n\t * @type {Optional<List<IPointer>>}\r\n\t */\r\n\tprotected _downPointers: $type.Optional<List<IPointer>>;\r\n\r\n\t/**\r\n\t * Is element currently hovered?\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tprotected _isHover: boolean = false;\r\n\r\n\t/**\r\n\t * Has element got any pointers currently pressing down on it?\r\n\t * @type {boolean}\r\n\t */\r\n\tprotected _isDown: boolean = false;\r\n\r\n\t/**\r\n\t * Does element have focus?\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tprotected _isFocused: boolean = false;\r\n\r\n\t/**\r\n\t * A timestamp of the last hit.\r\n\t *\r\n\t * Used to calculate double-hit.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<number>}\r\n\t */\r\n\tpublic lastHit: $type.Optional<number>;\r\n\r\n\t/**\r\n\t * A pointer element that was used for the last hit.\r\n\t *\r\n\t * We need to keep this since only the same pointer can generate doublehit.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<IPointer>}\r\n\t */\r\n\tpublic lastHitPointer: $type.Optional<IPointer>;\r\n\r\n\t/**\r\n\t * A reference to last \"out\" event in case we had to delay its execution\r\n\t * until mouseup.\r\n\t *\r\n\t * This is not on [[Pointer]] because one \"out\" event can happen at the same\r\n\t * time on several elements.\r\n\t *\r\n\t * @type {MouseEvent | TouchEvent}\r\n\t */\r\n\tpublic lastOutEvent?: MouseEvent | TouchEvent;\r\n\r\n\t/**\r\n\t * Options used for inertia functionality.\r\n\t *\r\n\t * @type {Dictionary<InertiaTypes, IInertiaOptions>}\r\n\t */\r\n\tpublic inertiaOptions: Dictionary<InertiaTypes, IInertiaOptions> = new Dictionary<InertiaTypes, IInertiaOptions>();\r\n\r\n\t/**\r\n\t * A collection of different inertia types, currently playing out.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Dictionary<InertiaTypes, Inertia>}\r\n\t */\r\n\tpublic inertias: Dictionary<InertiaTypes, Inertia> = new Dictionary<InertiaTypes, Inertia>();\r\n\r\n\t/**\r\n\t * Click/tap options.\r\n\t *\r\n\t * @type {IHitOptions}\r\n\t */\r\n\tpublic hitOptions: IHitOptions = {};\r\n\r\n\t/**\r\n\t * Hover options.\r\n\t *\r\n\t * @type {IHoverOptions}\r\n\t */\r\n\tpublic hoverOptions: IHoverOptions = {};\r\n\r\n\t/**\r\n\t * Swipe gesture options.\r\n\t *\r\n\t * @type {ISwipeOptions}\r\n\t */\r\n\tpublic swipeOptions: ISwipeOptions = {};\r\n\r\n\t/**\r\n\t * Keyboard options.\r\n\t *\r\n\t * @type {IKeyboarOptions}\r\n\t */\r\n\tpublic keyboardOptions: IKeyboardOptions = {};\r\n\r\n\t/**\r\n\t * Cursor options.\r\n\t *\r\n\t * @type {ICursorOptions}\r\n\t */\r\n\tpublic cursorOptions: ICursorOptions = {\r\n\t\t\"defaultStyle\": [{\r\n\t\t\t\"property\": \"cursor\",\r\n\t\t\t\"value\": \"default\"\r\n\t\t}]\r\n\t};\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor(element: HTMLElement | SVGSVGElement) {\r\n\t\tsuper();\r\n\t\tthis._element = element;\r\n\t\tthis.className = \"InteractionObject\";\r\n\t\tthis._disposers.push(new DictionaryDisposer(this.inertias));\r\n\t\tthis._disposers.push(new DictionaryDisposer(this.eventDisposers));\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Sets if this element is currently hovered.\r\n\t *\r\n\t * @param {boolean} value Hovered?\r\n\t */\r\n\tpublic set isHover(value: boolean) {\r\n\t\tif (this.isHover != value) {\r\n\t\t\tthis._isHover = value;\r\n\t\t\tif (value) {\r\n\t\t\t\tgetInteraction().overObjects.moveValue(this);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tgetInteraction().overObjects.removeValue(this);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns if this element is currently hovered.\r\n\t *\r\n\t * @return {boolean} Hovered?\r\n\t */\r\n\tpublic get isHover(): boolean {\r\n\t\treturn this._isHover;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a list of pointers currently over the element.\r\n\t *\r\n\t * @see {@link Pointer}\r\n\t * @return {List<IPointer>} List if pointers currently hovering the element\r\n\t */\r\n\tpublic get overPointers(): List<IPointer> {\r\n\t\tif (!this._overPointers) {\r\n\t\t\tthis._overPointers = new List<IPointer>();\r\n\t\t}\r\n\t\treturn this._overPointers;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets if this element has currently any pointers pressing on it.\r\n\t *\r\n\t * @param {boolean} value Has down pointers?\r\n\t */\r\n\tpublic set isDown(value: boolean) {\r\n\t\tif (this.isDown != value) {\r\n\t\t\tthis._isDown = value;\r\n\t\t\tif (value) {\r\n\t\t\t\tgetInteraction().downObjects.moveValue(this);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tgetInteraction().downObjects.removeValue(this);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns if this element has currently any pointers pressing on it.\r\n\t *\r\n\t * @return {boolean} Has down pointers?\r\n\t */\r\n\tpublic get isDown(): boolean {\r\n\t\treturn this._isDown;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a list of pointers currently pressing down on this element.\r\n\t *\r\n\t * @see {@link Pointer}\r\n\t * @return {List<IPointer>} List of down pointers\r\n\t */\r\n\tpublic get downPointers(): List<IPointer> {\r\n\t\tif (!this._downPointers) {\r\n\t\t\tthis._downPointers = new List<IPointer>();\r\n\t\t}\r\n\t\treturn this._downPointers;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets if this element is currently focused.\r\n\t *\r\n\t * @param {boolean} value Focused?\r\n\t */\r\n\tpublic set isFocused(value: boolean) {\r\n\t\tif (this.isFocused != value) {\r\n\t\t\tthis._isFocused = value;\r\n\t\t\tif (value) {\r\n\t\t\t\tgetInteraction().focusedObject = this;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tgetInteraction().focusedObject = undefined;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns if this element is currently focused.\r\n\t *\r\n\t * @return {boolean} Focused?\r\n\t */\r\n\tpublic get isFocused(): boolean {\r\n\t\treturn this._isFocused;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Is element clickable? Clickable elements will generate \"hit\" events when\r\n\t * clicked or tapped.\r\n\t *\r\n\t * @param {boolean} value Clickable?\r\n\t */\r\n\tpublic set clickable(value: boolean) {\r\n\t\tif (this._clickable !== value) {\r\n\t\t\tthis._clickable = value;\r\n\t\t\tgetInteraction().processClickable(this);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns if element is currently set as clickable.\r\n\t *\r\n\t * @return {boolean} Clickable?\r\n\t */\r\n\tpublic get clickable(): boolean {\r\n\t\treturn this._clickable;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets if element should generate hover events.\r\n\t *\r\n\t * @param {boolean} value Hoverable?\r\n\t */\r\n\tpublic set hoverable(value: boolean) {\r\n\t\tif (this._hoverable !== value) {\r\n\t\t\tthis._hoverable = value;\r\n\t\t\tgetInteraction().processHoverable(this);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns if element is currently set to generate hover events.\r\n\t *\r\n\t * @return {boolean} Hoverable?\r\n\t */\r\n\tpublic get hoverable(): boolean {\r\n\t\treturn this._hoverable;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets if pointer movement over element should be tracked.\r\n\t *\r\n\t * @param {boolean} value Track pointer?\r\n\t */\r\n\tpublic set trackable(value: boolean) {\r\n\t\tif (this._trackable !== value) {\r\n\t\t\tthis._trackable = value;\r\n\t\t\tgetInteraction().processTrackable(this);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns if element is set to track pointer movement over it.\r\n\t *\r\n\t * @return {boolean} Track pointer?\r\n\t */\r\n\tpublic get trackable(): boolean {\r\n\t\treturn this._trackable;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets if element can be dragged. (moved)\r\n\t *\r\n\t * @param {boolean} value Draggable?\r\n\t */\r\n\tpublic set draggable(value: boolean) {\r\n\t\tif (this._draggable !== value) {\r\n\t\t\tthis._draggable = value;\r\n\t\t\tgetInteraction().processDraggable(this);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns if element is currently set as draggable.\r\n\t *\r\n\t * @return {boolean} Draggable?\r\n\t */\r\n\tpublic get draggable(): boolean {\r\n\t\treturn this._draggable;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets whether element should react to swipe gesture.\r\n\t *\r\n\t * @param {boolean} value Track swipe?\r\n\t */\r\n\tpublic set swipeable(value: boolean) {\r\n\t\tif (this._swipeable !== value) {\r\n\t\t\tthis._swipeable = value;\r\n\t\t\tgetInteraction().processSwipeable(this);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns if element is currently set to track swipe gesture.\r\n\t *\r\n\t * @return {boolean} Track swipe?\r\n\t */\r\n\tpublic get swipeable(): boolean {\r\n\t\treturn this._swipeable;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets if element can be resized.\r\n\t *\r\n\t * @param {boolean} value Resizeable?\r\n\t */\r\n\tpublic set resizable(value: boolean) {\r\n\t\tif (this._resizable !== value) {\r\n\t\t\tthis._resizable = value;\r\n\t\t\tgetInteraction().processResizable(this);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns if element is currently set as resizeable.\r\n\t *\r\n\t * @return {boolean} Resizeble?\r\n\t */\r\n\tpublic get resizable(): boolean {\r\n\t\treturn this._resizable;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets whether element can be rotated.\r\n\t *\r\n\t * @param {boolean} value Can rotate?\r\n\t */\r\n\tpublic set rotatable(value: boolean) {\r\n\t\tif (this._rotatable !== value) {\r\n\t\t\tthis._rotatable = value;\r\n\t\t\tgetInteraction().processRotatable(this);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns if element is currently set as rotatable.\r\n\t *\r\n\t * @return {boolean} Can rotate?\r\n\t */\r\n\tpublic get rotatable(): boolean {\r\n\t\treturn this._rotatable;\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether track moouse wheel rotation over element.\r\n\t *\r\n\t * @param {boolean} value Track wheel?\r\n\t */\r\n\tpublic set wheelable(value: boolean) {\r\n\t\tif (this._wheelable !== value) {\r\n\t\t\tthis._wheelable = value;\r\n\t\t\tgetInteraction().processWheelable(this);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Track wheel?\r\n\t */\r\n\tpublic get wheelable(): boolean {\r\n\t\treturn this._wheelable;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets if element is inert, i.e. if it should carry movement momentum after\r\n\t * it is dragged and released.\r\n\t *\r\n\t * @param {boolean} value Inert?\r\n\t */\r\n\tpublic set inert(value: boolean) {\r\n\t\tif (this._inert !== value) {\r\n\t\t\tthis._inert = value;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns if element is currently set as inert.\r\n\t *\r\n\t * @return {boolean} Inert?\r\n\t */\r\n\tpublic get inert(): boolean {\r\n\t\treturn this._inert;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets if element can gain focus.\r\n\t *\r\n\t * @param {Optional<boolean>} value Focusable?\r\n\t */\r\n\tpublic set focusable(value: $type.Optional<boolean>) {\r\n\t\tif (this._focusable !== value) {\r\n\t\t\tthis._focusable = value;\r\n\t\t\tif (this._focusable && this.tabindex == -1) {\r\n\t\t\t\tthis._tabindex = 1;\r\n\t\t\t}\r\n\t\t\tgetInteraction().processFocusable(this);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns if element is currently set as focusable.\r\n\t *\r\n\t * @return {Optional<boolean>} Focusable?\r\n\t */\r\n\tpublic get focusable(): $type.Optional<boolean> {\r\n\t\treturn this._focusable;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets element's tab index.\r\n\t *\r\n\t * @param {number} value Tab index\r\n\t */\r\n\tpublic set tabindex(value: number) {\r\n\t\tif (this._tabindex !== value) {\r\n\t\t\tthis._tabindex = value;\r\n\t\t\tif (value > -1) {\r\n\t\t\t\tthis.focusable = true;\r\n\t\t\t}\r\n\t\t\tgetInteraction().processFocusable(this);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns element's current tab index.\r\n\t *\r\n\t * @return {number} Tab index\r\n\t */\r\n\tpublic get tabindex(): number {\r\n\t\treturn $type.getValueDefault(this._tabindex, -1 as number);\r\n\t}\r\n\r\n\t/**\r\n\t * Sets DOM element associated with this element\r\n\t * @param {HTMLElement | SVGSVGElement} element Element\r\n\t */\r\n\tpublic set element(element: HTMLElement | SVGSVGElement) {\r\n\t\tthis._element = element;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns DOM element associated with this element\r\n\t * @return {HTMLElement | SVGSVGElement} Element\r\n\t */\r\n\tpublic get element(): HTMLElement | SVGSVGElement {\r\n\t\treturn this._element;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets element's original position.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {Optional<IPoint>} value Position\r\n\t */\r\n\tpublic set originalPosition(value: Optional<IPoint>) {\r\n\t\tthis._originalPosition = value;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns element's original position.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {Optional<IPoint>} Position.\r\n\t */\r\n\tpublic get originalPosition(): Optional<IPoint> {\r\n\t\treturn this._originalPosition || { x: 0, y: 0 };\r\n\t}\r\n\r\n\t/**\r\n\t * Sets element's original scale.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {number} value Scale\r\n\t */\r\n\tpublic set originalScale(value: number) {\r\n\t\tif (this._originalScale !== value) {\r\n\t\t\tthis._originalScale = value;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns element's original scale.\r\n\t *\r\n\t * @return {number} Scale\r\n\t */\r\n\tpublic get originalScale(): number {\r\n\t\treturn $type.getValueDefault(this._originalScale, 1 as number);\r\n\t}\r\n\r\n\t/**\r\n\t * Sets element's original angle.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {number} value Angle\r\n\t */\r\n\tpublic set originalAngle(value: number) {\r\n\t\tif (this._originalAngle !== value) {\r\n\t\t\tthis._originalAngle = value;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns element's original angle.\r\n\t *\r\n\t * @return {number} Angle\r\n\t */\r\n\tpublic get originalAngle(): number {\r\n\t\treturn $type.getValueDefault(this._originalAngle, 0 as number);\r\n\t}\r\n\r\n\t/**\r\n\t * Copies all properties and related assets from another object of the same\r\n\t * type.\r\n\t *\r\n\t * @param {this} source Source object\r\n\t */\r\n\tpublic copyFrom(source: this): void {\r\n\t\tsuper.copyFrom(source);\r\n\t\tthis.inertiaOptions = source.inertiaOptions;\r\n\t\tthis.hitOptions = source.hitOptions;\r\n\t\tthis.hoverOptions = source.hoverOptions;\r\n\t\tthis.swipeOptions = source.swipeOptions;\r\n\t\tthis.keyboardOptions = source.keyboardOptions;\r\n\t\tthis.cursorOptions = source.cursorOptions;\r\n\t\tgetInteraction().applyCursorOverStyle(this);\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic setEventDisposer(key: string, value: boolean, f: () => IDisposer): void {\r\n\t\tconst disposer = this.eventDisposers.getKey(key);\r\n\r\n\t\tif (value) {\r\n\t\t\tif (disposer == null) {\r\n\t\t\t\tthis.eventDisposers.setKey(key, f());\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\tif (disposer != null) {\r\n\t\t\t\tdisposer.dispose();\r\n\t\t\t\tthis.eventDisposers.removeKey(key);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/interaction/InteractionObject.ts","/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { IBaseObjectEvents } from \"../Base\";\r\nimport { IPoint } from \"../defs/IPoint\";\r\nimport { IPointer } from \"../interaction/Pointer\";\r\nimport { InteractionObject } from \"../interaction/InteractionObject\";\r\nimport { EventListener, TargetedEventDispatcher, AMEvent } from \"../utils/EventDispatcher\";\r\nimport { MultiDisposer, IDisposer, CounterDisposer } from \"../utils/Disposer\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines a type of event that has a single point of reference.\r\n */\r\nexport type PointEvent = {\r\n\r\n\t/**\r\n\t * Event point in global (document) coordinates.\r\n\t * \r\n\t * @type {IPoint}\r\n\t */\r\n\tpoint: IPoint;\r\n\r\n};\r\n\r\n/**\r\n * Defines a type of event that has a related Pointer.\r\n */\r\nexport type PointerEvent = {\r\n\r\n\t/**\r\n\t * Coordinates of the primary cursor position.\r\n\t * \r\n\t * @type {Pointer}\r\n\t */\r\n\tpointer: IPointer;\r\n\r\n};\r\n\r\n/**\r\n * Defines a type of event that represents some kind of shift in coordinates,\r\n * like draging an element.\r\n */\r\nexport type ShiftEvent = {\r\n\r\n\t/**\r\n\t * Shift in coordinates after dragging.\r\n\t * \r\n\t * @type {IPoint}\r\n\t */\r\n\tshift: IPoint;\r\n\r\n};\r\n\r\n/**\r\n * Defines a type of event that represents change in angle, like rotation.\r\n */\r\nexport type AngleEvent = {\r\n\r\n\t/**\r\n\t * Angle to apply to the element.\r\n\t * \r\n\t * @type {number}\r\n\t */\r\n\tangle: number;\r\n};\r\n\r\n\r\n/**\r\n * Defines a type of event that represents change in element's scale, like\r\n * resize.\r\n */\r\nexport type ScaleEvent = {\r\n\r\n\t/**\r\n\t * Scale to apply to the element.\r\n\t * \r\n\t * @type {number}\r\n\t */\r\n\tscale: number;\r\n\r\n};\r\n\r\n/**\r\n * Defines an event that contains event center coordindates.\r\n */\r\nexport type CenterEvent = {\r\n\r\n\t/**\r\n\t * A center point for specific operation.\r\n\t * \r\n\t * @type {IPoint}\r\n\t */\r\n\tcenter?: IPoint;\r\n\r\n};\r\n\r\n/**\r\n * Defines an event that can be triggered either by touch device or mouse.\r\n */\r\nexport type MouseTouchEvent = {\r\n\r\n\t/**\r\n\t * An original mouse or touch event.\r\n\t * \r\n\t * @type {MouseEvent | TouchEvent}\r\n\t */\r\n\tevent: MouseEvent | TouchEvent;\r\n\r\n};\r\n\r\n/**\r\n * Defines an event that was not generated by keyboard directly, but rather\r\n * was simulated to trigger require keyboard-related handlers.\r\n */\r\nexport type SimulatedKeyboardEvent = {\r\n\r\n\t/**\r\n\t * A keyboard event.\r\n\t * \r\n\t * @type {KeyboardEvent}\r\n\t */\r\n\tevent: KeyboardEvent;\r\n\r\n}\r\n\r\n/**\r\n * Defines events for [[InteractionObject]].\r\n */\r\nexport interface IInteractionObjectEvents extends IBaseObjectEvents {\r\n\r\n\t/**\r\n\t * Invoked when object is clicked or touched.\r\n\t */\r\n\thit: PointEvent & MouseTouchEvent;\r\n\r\n\t/**\r\n\t * Invoked when object is clicked or touched twice in rapid succession.\r\n\t *\r\n\t * Check [[IHitOptions]] for settings about double hit.\r\n\t */\r\n\tdoublehit: PointEvent & MouseTouchEvent;\r\n\r\n\t/**\r\n\t * Invoked when right mouse button is clicked on the object.\r\n\t */\r\n\trightclick: MouseTouchEvent;\r\n\r\n\t/**\r\n\t * Invoked when mouse or touch pointer is held down over object for some time.\r\n\t */\r\n\thold: PointerEvent & MouseTouchEvent;\r\n\r\n\t/**\r\n\t * Invoked when the mouse button is pressed or touch starts.\r\n\t */\r\n\tdown: PointerEvent & MouseTouchEvent;\r\n\r\n\t/**\r\n\t * Invoked when the mouse button is released or touch ends.\r\n\t */\r\n\tup: PointerEvent & MouseTouchEvent;\r\n\r\n\t/**\r\n\t * Invoked when `draggable` object is being dragged. (using mouse, touch or\r\n\t * keyboard)\r\n\t */\r\n\tdrag: ShiftEvent & PointEvent & {\r\n\r\n\t\t/**\r\n\t\t * Original coordinates of the pointer's position when the dragging started.\r\n\t\t * \r\n\t\t * @type {IPoint}\r\n\t\t */\r\n\t\tstartPoint: IPoint,\r\n\r\n\t\t/**\r\n\t\t * An original JavaScript event that triggered dragging.\r\n\t\t * \r\n\t\t * @type {MouseEvent | TouchEvent | KeyboardEvent}\r\n\t\t */\r\n\t\tevent?: MouseEvent | TouchEvent | KeyboardEvent\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when `draggable` object dragging starts. This event is not\r\n\t * invoked immediatelly after `down`, but only if there's a movement of the\r\n\t * pointer.\r\n\t */\r\n\tdragstart: {\r\n\r\n\t\t/**\r\n\t\t * An original JavaScript event that triggered dragging.\r\n\t\t * \r\n\t\t * @type {MouseEvent | TouchEvent | KeyboardEvent}\r\n\t\t */\r\n\t\tevent?: MouseEvent | TouchEvent | KeyboardEvent\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Invoked when `draggable` object is released. This event will not fire if\r\n\t * position of the object did not change.\r\n\t */\r\n\tdragstop: {\r\n\r\n\t\t/**\r\n\t\t * An original JavaScript event that triggered dragging.\r\n\t\t * \r\n\t\t * @type {MouseEvent | TouchEvent | KeyboardEvent}\r\n\t\t */\r\n\t\tevent?: MouseTouchEvent | KeyboardEvent\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when pointer (mouse cursor or touch point) moves over `trackable`\r\n\t * object.\r\n\t */\r\n\ttrack: PointEvent & PointerEvent & MouseTouchEvent;\r\n\r\n\t/**\r\n\t * Invoked when `rotatable` object is being rotated either by mouse or touch\r\n\t * gesture.\r\n\t */\r\n\trotate: AngleEvent & CenterEvent & {\r\n\r\n\t\t/**\r\n\t\t * Original JavaScript event that triggered rotation.\r\n\t\t * \r\n\t\t * @type {MouseEvent | TouchEvent}\r\n\t\t */\r\n\t\tevent?: MouseEvent | TouchEvent\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when `resizable` object is being resized either by mouse or touch\r\n\t * pinch gesture.\r\n\t */\r\n\tresize: ScaleEvent & MouseTouchEvent & {\r\n\r\n\t\t/**\r\n\t\t * The starting coordinates of the first reference point.\r\n\t\t * \r\n\t\t * @type {IPoint}\r\n\t\t */\r\n\t\tstartPoint1: IPoint,\r\n\r\n\t\t/**\r\n\t\t * Current coordinates of the first reference point.\r\n\t\t * \r\n\t\t * @type {IPoint}\r\n\t\t */\r\n\t\tpoint1: IPoint,\r\n\r\n\t\t/**\r\n\t\t * The starting coordinates of the second reference point.\r\n\t\t * \r\n\t\t * @type {IPoint}\r\n\t\t */\r\n\t\tstartPoint2: IPoint,\r\n\r\n\t\t/**\r\n\t\t * Current coordinates of the second reference point.\r\n\t\t * \r\n\t\t * @type {IPoint}\r\n\t\t */\r\n\t\tpoint2: IPoint\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when user performs \"swiping\" gesture (quick horizontal movement)\r\n\t * on the object, either using mouse or touch.\r\n\t */\r\n\tswipe: MouseTouchEvent;\r\n\r\n\t/**\r\n\t * Invoked when user performs \"swiping\" gesture towards left.\r\n\t */\r\n\tswipeleft: MouseTouchEvent;\r\n\r\n\t/**\r\n\t * Invoked when user performs \"swiping\" gesture towards right.\r\n\t */\r\n\tswiperight: MouseTouchEvent;\r\n\r\n\t/**\r\n\t * Invoked when user turns mouse wheel while over the object.\r\n\t */\r\n\twheel: PointEvent & ShiftEvent & {\r\n\r\n\t\t/**\r\n\t\t * Original JavaScript event.\r\n\t\t * \r\n\t\t * @type {WheelEvent}\r\n\t\t */\r\n\t\tevent: WheelEvent\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when user turns mouse wheel upwards while over the object.\r\n\t */\r\n\twheelup: PointEvent & ShiftEvent & {\r\n\r\n\t\t/**\r\n\t\t * Original JavaScript event.\r\n\t\t * \r\n\t\t * @type {WheelEvent}\r\n\t\t */\r\n\t\tevent: WheelEvent\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when user turns mouse wheel downwards while over the object.\r\n\t */\r\n\twheeldown: PointEvent & ShiftEvent & {\r\n\r\n\t\t/**\r\n\t\t * Original JavaScript event.\r\n\t\t * \r\n\t\t * @type {WheelEvent}\r\n\t\t */\r\n\t\tevent: WheelEvent\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when user turns mouse wheel leftwards while over the object.\r\n\t */\r\n\twheelleft: PointEvent & ShiftEvent & {\r\n\r\n\t\t/**\r\n\t\t * Original JavaScript event.\r\n\t\t * \r\n\t\t * @type {WheelEvent}\r\n\t\t */\r\n\t\tevent: WheelEvent\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when user turns mouse wheel rightwards while over the object.\r\n\t */\r\n\twheelright: PointEvent & ShiftEvent & {\r\n\r\n\t\t/**\r\n\t\t * Original JavaScript event.\r\n\t\t * \r\n\t\t * @type {WheelEvent}\r\n\t\t */\r\n\t\tevent: WheelEvent\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when mouse cursor moves over `hoverable` object or it is touched.\r\n\t */\r\n\tover: MouseTouchEvent & PointerEvent;\r\n\r\n\t/**\r\n\t * Invoked when mouse cursor moves out of `hoverable` object or it is no\r\n\t * longer touched.\r\n\t */\r\n\tout: MouseTouchEvent & PointerEvent;\r\n\r\n\t/**\r\n\t * Invoked when `focusable` object gains focus, e.g. by using TAB button.\r\n\t */\r\n\tfocus: {\r\n\r\n\t\t/**\r\n\t\t * Original JavaScript `FocusEvent`.\r\n\t\t * \r\n\t\t * @type {FocusEvent}\r\n\t\t */\r\n\t\tevent: FocusEvent\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when `focusable` object loses focus, e.g. by clicking outside\r\n\t * it or pressing TAB button to focus on the next focusable object.\r\n\t */\r\n\tblur: {\r\n\r\n\t\t/**\r\n\t\t * Original JavaScript `FocusEvent`.\r\n\t\t * \r\n\t\t * @type {FocusEvent}\r\n\t\t */\r\n\t\tevent: FocusEvent\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when the key is pressed on the keyboard.\r\n\t */\r\n\tkeydown: {\r\n\r\n\t\t/**\r\n\t\t * Orginal JavaScript `KeyboardEvent`.\r\n\t\t * \r\n\t\t * @type {KeyboardEvent}\r\n\t\t */\r\n\t\tevent: KeyboardEvent\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when the key is released on the keyboard.\r\n\t */\r\n\tkeyup: {\r\n\r\n\t\t/**\r\n\t\t * Orginal JavaScript `KeyboardEvent`.\r\n\t\t * \r\n\t\t * @type {KeyboardEvent}\r\n\t\t */\r\n\t\tevent: KeyboardEvent\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when the key generates a \"press\", e.g. pressing and holding a\r\n\t * letter key will generate repeated \"keypress\" events.\r\n\t */\r\n\tkeypress: {\r\n\r\n\t\t/**\r\n\t\t * Orginal JavaScript `KeyboardEvent`.\r\n\t\t * \r\n\t\t * @type {KeyboardEvent}\r\n\t\t */\r\n\t\tevent: KeyboardEvent\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked whenever information changes in the textual input elements, like\r\n\t * `<input>`, `<textarea>`, etc.\r\n\t */\r\n\tinput: {\r\n\r\n\t\t/**\r\n\t\t * Orginal JavaScript `KeyboardEvent`.\r\n\t\t * \r\n\t\t * @type {KeyboardEvent}\r\n\t\t */\r\n\t\tevent: KeyboardEvent\r\n\r\n\t};\r\n}\r\n\r\n/**\r\n * Represents an Event Dispatcher for [[InteractionObject]].\r\n * \r\n * Besides regular [[EventDispatcher]] functionality it adds new events with\r\n * direct application to DOM nodes. Primarily used to handle keyboard events,\r\n * but can turn into something else moving forward.\r\n */\r\nexport class InteractionObjectEventDispatcher<T extends AMEvent<InteractionObject, IInteractionObjectEvents>> extends TargetedEventDispatcher<InteractionObject, T> {\r\n\r\n\t/**\r\n\t * Holds a list of Disposers for DOM events added.\r\n\t */\r\n\tprivate _domEvents: { [key: string]: CounterDisposer } = {};\r\n\r\n\t/**\r\n\t * Adds a DOM event and returns Disposer.\r\n\t * \r\n\t * @return {IDisposer} Disposer\r\n\t */\r\n\tprivate _addDOMEvent<E extends Event, Key extends keyof IInteractionObjectEvents, C>(\r\n\t\ttype: string,\r\n\t\tkey: Key,\r\n\t\tlistener: (this: C, key: Key, evt: E) => void,\r\n\t\tcontext: C\r\n\t): IDisposer {\r\n\t\tif (!this._domEvents[type]) {\r\n\t\t\tconst callback = function(e: E): void {\r\n\t\t\t\tlistener.call(context, key, e);\r\n\t\t\t}\r\n\r\n\t\t\tthis.target.element.addEventListener(type, callback, false);\r\n\r\n\t\t\tthis._domEvents[type] = new CounterDisposer(() => {\r\n\t\t\t\tdelete this._domEvents[type];\r\n\r\n\t\t\t\tthis.target.element.removeEventListener(type, callback, false);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn this._domEvents[type].increment();\r\n\t}\r\n\r\n\tprivate _dispatchKeyboardEvent<Key extends \"keydown\" & \"keyup\" & \"keypress\" & \"input\">(key: Key, ev: KeyboardEvent): void {\r\n\t\t// TODO use this.dispatchImmediately ?\r\n\t\tif (this.target.events.isEnabled(key)) {\r\n\t\t\tthis.target.events.dispatchImmediately(key, {\r\n\t\t\t\ttype: key,\r\n\t\t\t\ttarget: this.target,\r\n\t\t\t\tevent: ev\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tprotected _on<A, B, Key extends keyof T>(once: boolean, type: Key | null, callback: A, context: B, dispatch: (type: Key, event: T[Key]) => void): EventListener<T> {\r\n\t\tconst info = super._on(once, type, callback, context, dispatch);\r\n\r\n\t\tconst disposers = [info.disposer];\r\n\r\n\t\tswitch (type) {\r\n\t\t\tcase \"hit\":\r\n\t\t\tcase \"doublehit\":\r\n\t\t\tcase \"rightclick\":\r\n\t\t\tcase \"down\":\r\n\t\t\tcase \"up\":\r\n\t\t\t\tthis.target.clickable = true;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"drag\":\r\n\t\t\tcase \"dragstart\":\r\n\t\t\tcase \"dragstop\":\r\n\t\t\t\tthis.target.draggable = true;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"track\":\r\n\t\t\t\tthis.target.trackable = true;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"rotate\":\r\n\t\t\t\tthis.target.rotatable = true;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"resize\":\r\n\t\t\t\tthis.target.resizable = true;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"swipe\":\r\n\t\t\tcase \"swipeleft\":\r\n\t\t\tcase \"swiperight\":\r\n\t\t\t\tthis.target.swipeable = true;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"wheel\":\r\n\t\t\tcase \"wheelup\":\r\n\t\t\tcase \"wheeldown\":\r\n\t\t\tcase \"wheelleft\":\r\n\t\t\tcase \"wheelright\":\r\n\t\t\t\tthis.target.wheelable = true;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"over\":\r\n\t\t\tcase \"out\":\r\n\t\t\t\tthis.target.hoverable = true;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"focus\":\r\n\t\t\tcase \"blur\":\r\n\t\t\tcase \"focusin\":\r\n\t\t\tcase \"focusout\":\r\n\t\t\t\tthis.target.focusable = true;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"keydown\":\r\n\t\t\t\tdisposers.push(this._addDOMEvent<KeyboardEvent, \"keydown\", this>(type, type, this._dispatchKeyboardEvent, this));\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"keyup\":\r\n\t\t\t\tdisposers.push(this._addDOMEvent<KeyboardEvent, \"keyup\", this>(type, type, this._dispatchKeyboardEvent, this));\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"keypress\":\r\n\t\t\t\tdisposers.push(this._addDOMEvent<KeyboardEvent, \"keypress\", this>(type, type, this._dispatchKeyboardEvent, this));\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"input\":\r\n\t\t\t\tdisposers.push(this._addDOMEvent<KeyboardEvent, \"input\", this>(type, type, this._dispatchKeyboardEvent, this));\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tinfo.disposer = new MultiDisposer(disposers);\r\n\r\n\t\treturn info;\r\n\t}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/interaction/InteractionObjectEvents.ts","/**\r\n * Functionality related simulating of dragging of elements using keyboard.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { getInteraction } from \"./Interaction\";\r\nimport { InteractionObject } from \"./InteractionObject\";\r\nimport { animations, IAnimationObject } from \"../utils/Animation\";\r\nimport { IPoint } from \"../defs/IPoint\";\r\nimport { IDisposer } from \"../utils/Disposer\";\r\nimport * as $array from \"../utils/Array\";\r\n\r\n/**\r\n * [[InteractionKeyboardObject]] is used to simulate dragging of the `draggable`\r\n * element using keyboard arrows.\r\n *\r\n * @ignore Exclude from docs\r\n */\r\nexport class InteractionKeyboardObject implements IAnimationObject, IDisposer {\r\n\r\n\t/**\r\n\t * A [[InteractionObject]] representation of an element we're performing\r\n\t * animation on.\r\n\t *\r\n\t * @type {Sprite}\r\n\t */\r\n\tpublic interaction: InteractionObject;\r\n\r\n\t/**\r\n\t * Indicates if this object has already been deleted. Any\r\n\t * destruction/disposal code should take this into account when deciding\r\n\t * wheter to run potentially costly disposal operations if they already have\r\n\t * been run.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tprotected _disposed: boolean = false;\r\n\r\n\t/**\r\n\t * Timestamp on when animation started.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tprivate _startedOn: number;\r\n\r\n\t/**\r\n\t * Indicates direction of current horizontal movement.\r\n\t *\r\n\t * 0 - not moving horizontally\r\n\t * 1 - moving right\r\n\t * -1 - moving left\r\n\t * @type {number}\r\n\t */\r\n\tpublic directionX: 0 | 1 | -1 = 0;\r\n\r\n\t/**\r\n\t * Indicates direction of current vertical movement.\r\n\t *\r\n\t * 0 - not moving vertically\r\n\t * 1 - moving down\r\n\t * -1 - moving up\r\n\t * @type {number}\r\n\t */\r\n\tpublic directionY: 0 | 1 | -1 = 0;\r\n\r\n\t/**\r\n\t * Holds reference to original keyboard event.\r\n\t *\r\n\t * @type {KeyboardEvent}\r\n\t */\r\n\tpublic keyboardEvent: KeyboardEvent;\r\n\r\n\t/**\r\n\t * Constructor.\r\n\t *\r\n\t * @param {InteractionObject} io An InteractionObject\r\n\t */\r\n\tconstructor(io: InteractionObject) {\r\n\t\tthis.interaction = io;\r\n\t\tthis._startedOn = new Date().getTime();\r\n\t\tgetInteraction().processDragStart(io);\r\n\t\tanimations.push(this);\r\n\t}\r\n\r\n\t/**\r\n\t * It's an update method which is called by the system if\r\n\t * [[InteractionObject]] is used as animation.\r\n\t *\r\n\t * This will update coordinates of the element based on the movement\r\n\t * directions.\r\n\t */\r\n\tpublic update(): void {\r\n\r\n\t\t// Init and get settings\r\n\t\tlet io = this.interaction;\r\n\t\tlet speed = getInteraction().getKeyboardOption(io, \"speed\"),\r\n\t\t\taccelleration = getInteraction().getKeyboardOption(io, \"accelleration\"),\r\n\t\t\taccellerationDelay = getInteraction().getKeyboardOption(io, \"accellerationDelay\"),\r\n\t\t\tshift: IPoint = {\r\n\t\t\t\tx: 0,\r\n\t\t\t\ty: 0\r\n\t\t\t};\r\n\r\n\t\t// If SHIFT key is pressed we slash speed by half and disable accelleration\r\n\t\tif (this.keyboardEvent.shiftKey) {\r\n\t\t\tspeed *= 0.5;\r\n\t\t\taccelleration = 1;\r\n\t\t}\r\n\t\t// If CTRL is pressed we increase speed by x2\r\n\t\telse if (this.keyboardEvent.ctrlKey) {\r\n\t\t\tspeed *= 2;\r\n\t\t}\r\n\r\n\t\t// Get elapsed time\r\n\t\tlet ms = new Date().getTime() - this._startedOn;\r\n\t\tlet accelleratedMs = ms - accellerationDelay;\r\n\r\n\t\t// Add accellerated movement\r\n\t\tif ((accelleration > 0) && (accelleratedMs > 0)) {\r\n\t\t\tlet accellerationFactor = ms / accellerationDelay;\r\n\t\t\tms = accellerationDelay;\r\n\t\t\tshift.x += this.directionX * (speed * accelleration * accellerationFactor * accelleratedMs);\r\n\t\t\tshift.y += this.directionY * (speed * accelleration * accellerationFactor * accelleratedMs);\r\n\t\t}\r\n\r\n\t\t// Calculate position\r\n\t\tshift.x += this.directionX * (speed * ms);\r\n\t\tshift.y += this.directionY * (speed * ms);\r\n\r\n\t\t// Simulate move on Interaction\r\n\t\tgetInteraction().handleTransformMove(io, shift, { x: 0, y: 0 }, this.keyboardEvent, true);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns if this object has been already been disposed.\r\n\t *\r\n\t * @return {boolean} Is disposed?\r\n\t */\r\n\tpublic isDisposed(): boolean {\r\n\t\treturn this._disposed;\r\n\t}\r\n\r\n\t/**\r\n\t * Disposes this object. Removes from system animations.\r\n\t */\r\n\tpublic dispose(): void {\r\n\t\tif (!this._disposed) {\r\n\t\t\tgetInteraction().processDragStop(this.interaction);\r\n\t\t\t$array.remove(animations, this);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/interaction/InteractionKeyboardObject.ts","/**\r\n * Functionality related to inertia\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { BaseObject } from \"../Base\";\r\nimport { MultiDisposer } from \"../utils/Disposer\";\r\nimport { getInteraction } from \"./Interaction\";\r\nimport { InteractionObject, IInteractionObjectEvents } from \"./InteractionObject\";\r\nimport { Animation, IAnimatable, AnimationDisposer } from \"../utils/Animation\";\r\nimport { AMEvent } from \"../utils/EventDispatcher\";\r\nimport { IPoint } from \"../defs/IPoint\";\r\nimport * as $type from \"../utils/Type\";\r\n\r\n/**\r\n * Defines a list of available inertia types.\r\n *\r\n * @type {string}\r\n */\r\nexport type InertiaTypes = \"move\" | \"resize\" | \"rotate\";\r\n\r\n/**\r\n * A point of inertia is to simulate gradually drecreasing motion even after\r\n * actual interaction by user, that caused it, has already ended.\r\n *\r\n * [[Inertia]] object will continue triggering the same [[Sprite]] handlers\r\n * as if the interaction was still happening, gradually reducing\r\n * shift/angle/scale values until full stop.\r\n *\r\n * Basically, from the target element's point of view, while inertia is\r\n * playing, it is still being interacted with by user, albeit with a\r\n * decreasing speed.\r\n */\r\nexport class Inertia extends BaseObject implements IAnimatable {\r\n\r\n\t/**\r\n\t * Holds what type of inertia it is.\r\n\t *\r\n\t * @type {InertiaTypes}\r\n\t */\r\n\tpublic type: InertiaTypes;\r\n\r\n\t/**\r\n\t * An element we're performing animation on.\r\n\t *\r\n\t * @type {InteractionObject}\r\n\t */\r\n\tpublic interaction: InteractionObject;\r\n\r\n\t/**\r\n\t * Starting pointer position. The position of pointer when we \"released\"\r\n\t * the element.\r\n\t *\r\n\t * @type {IPoint}\r\n\t */\r\n\tpublic startPoint: IPoint;\r\n\r\n\t/**\r\n\t * Current (simulated) pointer position.\r\n\t *\r\n\t * @type {IPoint}\r\n\t */\r\n\tpublic point: IPoint;\r\n\r\n\t/**\r\n\t * List of animations currently playing.\r\n\t *\r\n\t * @type {List<Animation>}\r\n\t */\r\n\tpublic animations: Array<Animation> = [];\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\r\n\t\t// Init\r\n\t\tsuper();\r\n\t\tthis.className = \"Inertia\";\r\n\r\n\t\t// Make animations disposable\r\n\t\tthis._disposers.push(new AnimationDisposer(this.animations));\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets current X coordinate.\r\n\t *\r\n\t * Will trigger \"drag\" event for the target element.\r\n\t *\r\n\t * @param {number} value X\r\n\t */\r\n\tpublic set x(value: number) {\r\n\t\tif ($type.isNumber(value)) {\r\n\t\t\tthis.point.x = value;\r\n\t\t\tthis.handleMove();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns current X coordinate.\r\n\t *\r\n\t * @return {number} X\r\n\t */\r\n\tpublic get x(): number {\r\n\t\treturn this.point.x;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets current Y coordinate.\r\n\t *\r\n\t * Will trigger \"drag\" event for the target element.\r\n\t *\r\n\t * @param {number} value Y\r\n\t */\r\n\tpublic set y(value: number) {\r\n\t\tif ($type.isNumber(value)) {\r\n\t\t\tthis.point.y = value;\r\n\t\t\tthis.handleMove();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns current Y coordinate.\r\n\t *\r\n\t * @return {number} Y\r\n\t */\r\n\tpublic get y(): number {\r\n\t\treturn this.point.y;\r\n\t}\r\n\r\n\t/**\r\n\t * Simulates dragging of element.\r\n\t */\r\n\tpublic handleMove() {\r\n\r\n\t\t// Prepare {InteractionEvent} object\r\n\t\tif (this.interaction.events.isEnabled(\"drag\")) {\r\n\t\t\tlet imev: AMEvent<InteractionObject, IInteractionObjectEvents>[\"drag\"] = {\r\n\t\t\t\ttype: \"drag\",\r\n\t\t\t\ttarget: this.interaction,\r\n\t\t\t\tshift: {\r\n\t\t\t\t\tx: this.x - this.startPoint.x,\r\n\t\t\t\t\ty: this.y - this.startPoint.y\r\n\t\t\t\t},\r\n\t\t\t\tstartPoint: this.startPoint,\r\n\t\t\t\tpoint: {\r\n\t\t\t\t\tx: this.x,\r\n\t\t\t\t\ty: this.y\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\t// Call handler\r\n\t\t\tthis.interaction.events.dispatchImmediately(\"drag\", imev);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets current angle.\r\n\t *\r\n\t * Will trigger \"rotate\" event on a target element.\r\n\t *\r\n\t * @param {number} value Angle\r\n\t */\r\n\tpublic set rotation(value: number) {\r\n\t\tif ($type.isNumber(value)) {\r\n\t\t\tif (this.interaction.events.isEnabled(\"rotate\")) {\r\n\t\t\t\tlet imev: AMEvent<InteractionObject, IInteractionObjectEvents>[\"rotate\"] = {\r\n\t\t\t\t\ttype: \"rotate\",\r\n\t\t\t\t\ttarget: this.interaction,\r\n\t\t\t\t\tangle: value\r\n\t\t\t\t};\r\n\t\t\t\tthis.interaction.events.dispatchImmediately(\"rotate\", imev);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Finishes up the inertia animation. (removes reference to this animation\r\n\t * object)\r\n\t */\r\n\tpublic done() {\r\n\r\n\t\t// Remove inertia animation from the object\r\n\t\tthis.interaction.inertias.removeKey(this.type);\r\n\r\n\t\t// Move ended\r\n\t\tif (this.type === \"move\") {\r\n\t\t\tgetInteraction().processDragStop(this.interaction);\r\n\t\t}\r\n\r\n\t\t// Destroy\r\n\t\tthis.dispose();\r\n\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/interaction/Inertia.ts","/**\r\n * Number formatting-related functionality.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Sprite } from \"../Sprite\";\r\nimport { Language } from \"../utils/Language\";\r\nimport { BaseObject } from \"../Base\";\r\nimport { ITextChunk, getTextFormatter } from \"../formatters/TextFormatter\";\r\nimport * as $strings from \"../utils/Strings\";\r\nimport * as $object from \"../utils/Object\";\r\nimport * as $utils from \"../utils/Utils\";\r\nimport * as $type from \"../utils/Type\";\r\n\r\n/**\r\n * NumberFormatter class. Formats numbers according to specified formats.\r\n *\r\n * @todo Apply translations to suffixes/prefixes\r\n */\r\nexport class NumberFormatter extends BaseObject {\r\n\r\n\t/**\r\n\t * A base value for negative numbers. Will treat all numbers below this value\r\n\t * as negative numbers.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tprotected _negativeBase: number = 0;\r\n\r\n\t/**\r\n\t * Holds number format.\r\n\t *\r\n\t * @type {string}\r\n\t * @default #,###.#####\r\n\t */\r\n\tprotected _numberFormat = \"#,###.#####\";\r\n\r\n\t/**\r\n\t * Output format to produce. If the format calls for applying color to the\r\n\t * formatted value, this setting will determine what markup to use: SVG or\r\n\t * HTML.\r\n\t *\r\n\t * Available options: svg, html.\r\n\t *\r\n\t * @default \"svg\"\r\n\t * @type {string}\r\n\t */\r\n\tprotected _outputFormat: string = \"svg\";\r\n\r\n\t/**\r\n\t * Holds big number prefixes to apply to numbers if `a` modifier is used in\r\n\t * format.\r\n\t *\r\n\t * @type {Array}\r\n\t */\r\n\tprotected _bigNumberPrefixes = [\r\n\t\t{ \"number\": 1e+3, \"suffix\": \"K\" },\r\n\t\t{ \"number\": 1e+6, \"suffix\": \"M\" },\r\n\t\t{ \"number\": 1e+9, \"suffix\": \"G\" },\r\n\t\t{ \"number\": 1e+12, \"suffix\": \"T\" },\r\n\t\t{ \"number\": 1e+15, \"suffix\": \"P\" },\r\n\t\t{ \"number\": 1e+18, \"suffix\": \"E\" },\r\n\t\t{ \"number\": 1e+21, \"suffix\": \"Z\" },\r\n\t\t{ \"number\": 1e+24, \"suffix\": \"Y\" }\r\n\t];\r\n\r\n\t/**\r\n\t * Holds small number prefixes to apply to numbers if `a` modifier is used in\r\n\t * format.\r\n\t *\r\n\t * @type {Array}\r\n\t */\r\n\tprotected _smallNumberPrefixes = [\r\n\t\t{ \"number\": 1e-24, \"suffix\": \"y\" },\r\n\t\t{ \"number\": 1e-21, \"suffix\": \"z\" },\r\n\t\t{ \"number\": 1e-18, \"suffix\": \"a\" },\r\n\t\t{ \"number\": 1e-15, \"suffix\": \"f\" },\r\n\t\t{ \"number\": 1e-12, \"suffix\": \"p\" },\r\n\t\t{ \"number\": 1e-9, \"suffix\": \"n\" },\r\n\t\t{ \"number\": 1e-6, \"suffix\": \"\" },\r\n\t\t{ \"number\": 1e-3, \"suffix\": \"m\" }\r\n\t];\r\n\r\n\t/**\r\n\t * Holds prefixes to apply to data size numbers if `b` modifier is used in\r\n\t * format.\r\n\t *\r\n\t * @type {Array}\r\n\t */\r\n\tprotected _bytePrefixes = [\r\n\t\t{ \"number\": 0, \"suffix\": \"B\" },\r\n\t\t{ \"number\": 1024, \"suffix\": \"KB\" },\r\n\t\t{ \"number\": 1048576, \"suffix\": \"MB\" },\r\n\t\t{ \"number\": 1073741824, \"suffix\": \"GB\" },\r\n\t\t{ \"number\": 1099511627776, \"suffix\": \"TB\" },\r\n\t\t{ \"number\": 1125899906842624, \"suffix\": \"PB\" }\r\n\t];\r\n\r\n\t/**\r\n\t * Holds reference to parent [[Sprite]] object.\r\n\t *\r\n\t * @type {Optional<Sprite>}\r\n\t */\r\n\tpublic sprite: $type.Optional<Sprite>;\r\n\r\n\t/**\r\n\t * Holds reference to [[Language]] object.\r\n\t *\r\n\t * @type {Optional<Language>}\r\n\t */\r\n\tpublic language: $type.Optional<Language>;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"NumberFormatter\";\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Formats the number according to specific format.\r\n\t *\r\n\t * @param  {number | string}  value   Value to format\r\n\t * @param  {string}           format  Format to apply\r\n\t * @return {string}                   Formatted number\r\n\t */\r\n\tpublic format(value: number | string, format?: string): string {\r\n\r\n\t\t// no language?\r\n\t\tif (!this.language) {\r\n\t\t\tif (this.sprite) {\r\n\t\t\t\tthis.language = this.sprite.language;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.language = new Language;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// no format passed in or \"Number\"\r\n\t\tif (typeof format === \"undefined\" || format.toLowerCase() === \"number\") {\r\n\t\t\tformat = this._numberFormat;\r\n\t\t}\r\n\r\n\t\t// Clean format\r\n\t\tformat = $utils.cleanFormat(format);\r\n\r\n\t\t// Get format info (it will also deal with parser caching)\r\n\t\tlet info = this.parseFormat(format, this.language);\r\n\r\n\t\t// cast to number just in case\r\n\t\t// TODO: maybe use better casting\r\n\t\tlet source: number = Number(value);\r\n\r\n\t\t// format and replace the number\r\n\t\tlet details;\r\n\t\tif (source > this._negativeBase) {\r\n\t\t\tdetails = info.positive;\r\n\t\t}\r\n\t\telse if (source < this._negativeBase) {\r\n\t\t\tdetails = info.negative;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tdetails = info.zero;\r\n\t\t}\r\n\r\n\t\t// Format\r\n\t\tlet formatted = details.template.split($strings.PLACEHOLDER).join(this.applyFormat(source, details));\r\n\r\n\t\treturn formatted;\r\n\t}\r\n\r\n\t/**\r\n\t * Parses supplied format into structured object which can be used to format\r\n\t * the number.\r\n\t *\r\n\t * @param {string} format Format string, i.e. \"#,###.00\"\r\n\t * @param {Language} language Language\r\n\t */\r\n\tprotected parseFormat(format: string, language: Language): any {\r\n\r\n\t\t// check cache\r\n\t\tif (typeof (this.getCache(format)) !== \"undefined\") {\r\n\t\t\treturn this.getCache(format);\r\n\t\t}\r\n\r\n\t\t// init format parse info holder\r\n\t\tlet info: any = {\r\n\t\t\t\"positive\": {\r\n\t\t\t\t\"thousands\": {\r\n\t\t\t\t\t\"active\": -1,\r\n\t\t\t\t\t\"passive\": -1,\r\n\t\t\t\t\t\"interval\": -1,\r\n\t\t\t\t\t\"separator\": language.translateEmpty(\"_thousandSeparator\")\r\n\t\t\t\t},\r\n\t\t\t\t\"decimals\": {\r\n\t\t\t\t\t\"active\": -1,\r\n\t\t\t\t\t\"passive\": -1,\r\n\t\t\t\t\t\"separator\": language.translateEmpty(\"_decimalSeparator\")\r\n\t\t\t\t},\r\n\t\t\t\t\"template\": \"\",\r\n\t\t\t\t\"source\": \"\",\r\n\t\t\t\t\"parsed\": false\r\n\t\t\t},\r\n\t\t\t\"negative\": {\r\n\t\t\t\t\"thousands\": {\r\n\t\t\t\t\t\"active\": -1,\r\n\t\t\t\t\t\"passive\": -1,\r\n\t\t\t\t\t\"interval\": -1,\r\n\t\t\t\t\t\"separator\": language.translateEmpty(\"_thousandSeparator\")\r\n\t\t\t\t},\r\n\t\t\t\t\"decimals\": {\r\n\t\t\t\t\t\"active\": -1,\r\n\t\t\t\t\t\"passive\": -1,\r\n\t\t\t\t\t\"separator\": language.translateEmpty(\"_decimalSeparator\")\r\n\t\t\t\t},\r\n\t\t\t\t\"template\": \"\",\r\n\t\t\t\t\"source\": \"\",\r\n\t\t\t\t\"parsed\": false\r\n\t\t\t},\r\n\t\t\t\"zero\": {\r\n\t\t\t\t\"thousands\": {\r\n\t\t\t\t\t\"active\": -1,\r\n\t\t\t\t\t\"passive\": -1,\r\n\t\t\t\t\t\"interval\": -1,\r\n\t\t\t\t\t\"separator\": language.translateEmpty(\"_thousandSeparator\")\r\n\t\t\t\t},\r\n\t\t\t\t\"decimals\": {\r\n\t\t\t\t\t\"active\": -1,\r\n\t\t\t\t\t\"passive\": -1,\r\n\t\t\t\t\t\"separator\": language.translateEmpty(\"_decimalSeparator\")\r\n\t\t\t\t},\r\n\t\t\t\t\"template\": \"\",\r\n\t\t\t\t\"source\": \"\",\r\n\t\t\t\t\"parsed\": false\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// Escape double vertical bars (that mean display one vertical bar)\r\n\t\tformat = format.replace(\"||\", $strings.PLACEHOLDER2);\r\n\r\n\t\t// Split it up and deal with different formats\r\n\t\tlet parts = format.split(\"|\");\r\n\t\tinfo.positive.source = parts[0];\r\n\r\n\t\tif (typeof parts[2] === \"undefined\") {\r\n\t\t\tinfo.zero = info.positive;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tinfo.zero.source = parts[2];\r\n\t\t}\r\n\r\n\t\tif (typeof parts[1] === \"undefined\") {\r\n\t\t\tinfo.negative = info.positive;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tinfo.negative.source = parts[1];\r\n\t\t}\r\n\r\n\t\t// Parse each\r\n\t\t$object.each(info, (part, item) => {\r\n\t\t\t// Already parsed\r\n\t\t\tif (item.parsed) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Check cached\r\n\t\t\tif (typeof this.getCache(item.source) !== \"undefined\") {\r\n\t\t\t\tinfo[part] = this.getCache(item.source);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Begin parsing\r\n\t\t\tlet partFormat: string = item.source;\r\n\r\n\t\t\t// Just \"Number\"?\r\n\t\t\tif (partFormat.toLowerCase() === \"number\") {\r\n\t\t\t\tpartFormat = this._numberFormat;\r\n\t\t\t}\r\n\r\n\t\t\t// Let TextFormatter split into chunks\r\n\t\t\tlet chunks: ITextChunk[] = getTextFormatter().chunk(partFormat, true);\r\n\t\t\tfor (let i: number = 0; i < chunks.length; i++) {\r\n\t\t\t\tlet chunk: ITextChunk = chunks[i];\r\n\r\n\t\t\t\t// replace back double vertical bar\r\n\t\t\t\tchunk.text = chunk.text.replace($strings.PLACEHOLDER2, \"|\");\r\n\r\n\t\t\t\tif (chunk.type === \"value\") {\r\n\t\t\t\t\t// Parse format\r\n\r\n\t\t\t\t\t// Look for codes\r\n\t\t\t\t\tlet matches: string[] | null = [];\r\n\t\t\t\t\tif (matches = chunk.text.match(/[#0.,]+[ ]?[abesABES%]?[abesABES]?/)) {\r\n\r\n\t\t\t\t\t\tif (matches === null || matches[0] === \"\") {\r\n\t\t\t\t\t\t\t// no codes here - assume string\r\n\t\t\t\t\t\t\t// nothing to do here\r\n\t\t\t\t\t\t\titem.template += chunk.text;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\r\n\t\t\t\t\t\t\t// look for the format modifiers at the end\r\n\t\t\t\t\t\t\tlet mods: string[] | null = [];\r\n\t\t\t\t\t\t\tif (mods = matches[0].match(/[abesABES%]{2}|[abesABES%]{1}$/)) {\r\n\t\t\t\t\t\t\t\titem.mod = mods[0].toLowerCase();\r\n\t\t\t\t\t\t\t\titem.modSpacing = matches[0].match(/[ ]{1}[abesABES%]{1}$/) ? true : false;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// break the format up\r\n\t\t\t\t\t\t\tlet a = matches[0].split(\".\");\r\n\r\n\t\t\t\t\t\t\t// Deal with thousands\r\n\t\t\t\t\t\t\tif (a[0] === \"\") {\r\n\t\t\t\t\t\t\t\t// No directives for thousands\r\n\t\t\t\t\t\t\t\t// Leave default settings (no formatting)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t// Counts\r\n\t\t\t\t\t\t\t\titem.thousands.active = (a[0].match(/0/g) || []).length;\r\n\t\t\t\t\t\t\t\titem.thousands.passive = (a[0].match(/\\#/g) || []).length + item.thousands.active;\r\n\r\n\t\t\t\t\t\t\t\t// Separator interval\r\n\t\t\t\t\t\t\t\tlet b = a[0].split(\",\");\r\n\t\t\t\t\t\t\t\tif (b.length === 1) {\r\n\t\t\t\t\t\t\t\t\t// No thousands separators\r\n\t\t\t\t\t\t\t\t\t// Do nothing\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\t// Use length fo the last chunk as thousands length\r\n\t\t\t\t\t\t\t\t\titem.thousands.interval = $type.getValue(b.pop()).length;\r\n\t\t\t\t\t\t\t\t\tif (item.thousands.interval === 0)\r\n\t\t\t\t\t\t\t\t\t\titem.thousands.interval = -1;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// Deal with decimals\r\n\t\t\t\t\t\t\tif (typeof (a[1]) === \"undefined\") {\r\n\t\t\t\t\t\t\t\t// No directives for decimals\r\n\t\t\t\t\t\t\t\t// Leave at defaults (no formatting)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t// Counts\r\n\t\t\t\t\t\t\t\titem.decimals.active = (a[1].match(/0/g) || []).length;\r\n\t\t\t\t\t\t\t\titem.decimals.passive = (a[1].match(/\\#/g) || []).length + item.decimals.active;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// Add special code to template\r\n\t\t\t\t\t\t\titem.template += chunk.text.split(matches[0]).join($strings.PLACEHOLDER);\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t// Quoted string - take it as it is\r\n\t\t\t\t\titem.template += chunk.text;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Apply style formatting\r\n\t\t\t//item.template = getTextFormatter().format(item.template, this.outputFormat);\r\n\r\n\t\t\t// Save cache\r\n\t\t\tthis.setCache(item.source, item);\r\n\r\n\t\t\t// Mark this as parsed\r\n\t\t\titem.parsed = true;\r\n\r\n\t\t});\r\n\r\n\t\t// Save cache (the whole thing)\r\n\t\tthis.setCache(format, info);\r\n\r\n\t\treturn info;\r\n\t}\r\n\r\n\t/**\r\n\t * Applies parsed format to a numeric value.\r\n\t *\r\n\t * @param  {number}  value    Value\r\n\t * @param  {any}     details  Parsed format as returned by {parseFormat}\r\n\t * @return {string}          Formatted number\r\n\t */\r\n\tprotected applyFormat(value: number, details: any): string {\r\n\r\n\t\t// Use absolute values\r\n\t\tlet negative: boolean = value < 0;\r\n\t\tvalue = Math.abs(value);\r\n\r\n\t\t// Recalculate according to modifier\r\n\t\tlet prefix: string = \"\", suffix: string = \"\";\r\n\t\tlet mods: string[] = details.mod ? details.mod.split(\"\") : [];\r\n\t\tif (mods.indexOf(\"b\") !== -1) {\r\n\t\t\tlet a = this.applyPrefix(value, this._bytePrefixes);\r\n\t\t\tvalue = a[0];\r\n\t\t\tprefix = a[1];\r\n\t\t\tsuffix = a[2];\r\n\t\t\tif (details.modSpacing) {\r\n\t\t\t\tsuffix = \" \" + suffix;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (mods.indexOf(\"a\") !== -1) {\r\n\t\t\tlet a = this.applyPrefix(value, value < 1.00 ? this._smallNumberPrefixes : this._bigNumberPrefixes);\r\n\t\t\tvalue = a[0];\r\n\t\t\tprefix = a[1];\r\n\t\t\tsuffix = a[2];\r\n\t\t\tif (details.modSpacing) {\r\n\t\t\t\tsuffix = \" \" + suffix;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (mods.indexOf(\"%\") !== -1) {\r\n\t\t\tvalue *= 100;\r\n\t\t\tsuffix = \"%\";\r\n\t\t}\r\n\t\telse if (mods.indexOf(\"\") !== -1) {\r\n\t\t\tvalue *= 1000;\r\n\t\t\tsuffix = \"\";\r\n\t\t}\r\n\r\n\t\t// Round to passive\r\n\t\tif (mods.indexOf(\"e\") !== -1) {\r\n\t\t\t// convert the value to exponential\r\n\t\t\tlet exp: string[];\r\n\t\t\tif (details.decimals.passive >= 0) {\r\n\t\t\t\texp = value.toExponential(details.decimals.passive).split(\"e\");\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\texp = value.toExponential().split(\"e\");\r\n\t\t\t}\r\n\t\t\tvalue = Number(exp[0]);\r\n\t\t\tsuffix = \"e\" + exp[1];\r\n\t\t\tif (details.modSpacing) {\r\n\t\t\t\tsuffix = \" \" + suffix;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (details.decimals.passive === 0) {\r\n\t\t\tvalue = Math.round(value);\r\n\t\t}\r\n\t\telse if (details.decimals.passive > 0) {\r\n\t\t\tlet d: number = Math.pow(10, details.decimals.passive);\r\n\t\t\tvalue = Math.round(value * d) / d;\r\n\t\t}\r\n\r\n\t\t// Init return value\r\n\t\tlet res: string = \"\";\r\n\r\n\t\t// Calc integer and decimal parts\r\n\t\tlet a = $utils.numberToString(value).split(\".\");\r\n\r\n\t\t// Format integers\r\n\t\tlet ints = a[0];\r\n\r\n\t\t// Pad integers to active length\r\n\t\tif (ints.length < details.thousands.active) {\r\n\t\t\tints = Array(details.thousands.active - ints.length + 1).join(\"0\") + ints;\r\n\t\t}\r\n\r\n\t\t// Insert thousands separators\r\n\t\tif (details.thousands.interval > 0) {\r\n\t\t\tlet ip: string[] = [];\r\n\t\t\tlet intsr: string = ints.split(\"\").reverse().join(\"\");\r\n\t\t\tfor (let i = 0; i <= ints.length; i += details.thousands.interval) {\r\n\t\t\t\tlet c: string = intsr.substr(i, details.thousands.interval).split(\"\").reverse().join(\"\");\r\n\t\t\t\tif (c !== \"\") {\r\n\t\t\t\t\tip.unshift(c);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tints = ip.join(details.thousands.separator);\r\n\t\t}\r\n\r\n\t\t// Add integers\r\n\t\tres += ints;\r\n\r\n\t\t// Add decimals\r\n\t\tif (a.length === 1) {\r\n\t\t\ta.push(\"\");\r\n\t\t}\r\n\t\tlet decs: string = a[1];\r\n\r\n\t\t// Fill zeros?\r\n\t\tif (decs.length < details.decimals.active) {\r\n\t\t\tdecs += Array(details.decimals.active - decs.length + 1).join(\"0\");\r\n\t\t}\r\n\r\n\t\tif (decs !== \"\") {\r\n\t\t\tres += details.decimals.separator + decs;\r\n\t\t}\r\n\r\n\t\t// Can't have empty return value\r\n\t\tif (res === \"\") {\r\n\t\t\tres = \"0\";\r\n\t\t}\r\n\r\n\t\t// Add minus sign back\r\n\t\tif (negative && (mods.indexOf(\"s\") === -1)) {\r\n\t\t\tres = \"-\" + res;\r\n\t\t}\r\n\r\n\t\t// Add suffixes/prefixes\r\n\t\tif (prefix) {\r\n\t\t\tres = prefix + res;\r\n\t\t}\r\n\t\tif (suffix) {\r\n\t\t\tres += suffix;\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * Chooses appropriate prefix and suffix based on the passed in rules.\r\n\t *\r\n\t * @param  {number}  value     Value\r\n\t * @param  {any[]}   prefixes  Prefix array\r\n\t * @return {any}               Result\r\n\t */\r\n\tprotected applyPrefix(value: number, prefixes: any[]): any[] {\r\n\t\tlet newvalue: number = value,\r\n\t\t\tprefix: string = \"\",\r\n\t\t\tsuffix: string = \"\";\r\n\r\n\t\tfor (let i = 0; i < prefixes.length; i++) {\r\n\t\t\tif (prefixes[i].number <= value) {\r\n\t\t\t\tif (prefixes[i].number === 0) {\r\n\t\t\t\t\tnewvalue = 0;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tnewvalue = value / prefixes[i].number;\r\n\t\t\t\t}\r\n\t\t\t\tprefix = prefixes[i].prefix;\r\n\t\t\t\tsuffix = prefixes[i].suffix;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn [newvalue, prefix, suffix];\r\n\t}\r\n\r\n\t/**\r\n\t * Invalidates the parent [[Sprite]] object.\r\n\t */\r\n\tprotected invalidateSprite(): void {\r\n\t\tif (this.sprite) {\r\n\t\t\tthis.sprite.invalidate();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Number format.\r\n\t *\r\n\t * @see {@link https://www.amcharts.com/docs/v4/concepts/formatters/formatting-numbers/} Tutorial on number formatting\r\n\t * @param {string}  format  A format to use for number formatting\r\n\t */\r\n\tpublic set numberFormat(format: string) {\r\n\t\tthis._numberFormat = format;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {string} A format to use for number formatting\r\n\t */\r\n\tpublic get numberFormat(): string {\r\n\t\treturn this._numberFormat;\r\n\t}\r\n\r\n\t/**\r\n\t * Prefixes for big numbers.\r\n\t *\r\n\t * It's an array of objects of number/prefix pairs.\r\n\t *\r\n\t * ```JSON\r\n\t * [\r\n\t *   { \"number\": 1e+3, \"suffix\": \"K\" },\r\n\t *   { \"number\": 1e+6, \"suffix\": \"M\" },\r\n\t *   { \"number\": 1e+9, \"suffix\": \"G\" },\r\n\t *   { \"number\": 1e+12, \"suffix\": \"T\" },\r\n\t *   { \"number\": 1e+15, \"suffix\": \"P\" },\r\n\t *   { \"number\": 1e+18, \"suffix\": \"E\" },\r\n\t *   { \"number\": 1e+21, \"suffix\": \"Z\" },\r\n\t *   { \"number\": 1e+24, \"suffix\": \"Y\" }\r\n\t * ]\r\n\t * ```\r\n\t *\r\n\t * If the number is bigger than the `number` ir will be converted to the\r\n\t * appropriate bigger number with prefix.\r\n\t *\r\n\t * E.g. as per above `1500` will be converted to `1.5K`.\r\n\t *\r\n\t * Please note that for this transformation to be enabled, you need to\r\n\t * enable it specific modifier in your format setting.\r\n\t *\r\n\t * The modifier for big/small number modification is \"a\":\r\n\t *\r\n\t * ```Text\r\n\t * {myfield.formatNumber(\"#,###.00a\")}\r\n\t * ```\r\n\t *\r\n\t * @see {@link https://www.amcharts.com/docs/v4/concepts/formatters/formatting-numbers/} Tutorial on number formatting\r\n\t * @param {any[]}  prefixes  Prefixes for big numbers\r\n\t */\r\n\tpublic set bigNumberPrefixes(prefixes: any[]) {\r\n\t\tthis._bigNumberPrefixes = prefixes;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {any[]} Prefixes for big numbers\r\n\t */\r\n\tpublic get bigNumberPrefixes(): any[] {\r\n\t\treturn this._bigNumberPrefixes;\r\n\t}\r\n\r\n\t/**\r\n\t * Prefixes for big numbers.\r\n\t *\r\n\t * It's an array of objects of number/prefix pairs.\r\n\t *\r\n\t * ```JSON\r\n\t * [\r\n\t *   { \"number\": 1e-24, \"suffix\": \"y\" },\r\n\t *   { \"number\": 1e-21, \"suffix\": \"z\" },\r\n\t *   { \"number\": 1e-18, \"suffix\": \"a\" },\r\n\t *   { \"number\": 1e-15, \"suffix\": \"f\" },\r\n\t *   { \"number\": 1e-12, \"suffix\": \"p\" },\r\n\t *   { \"number\": 1e-9, \"suffix\": \"n\" },\r\n\t *   { \"number\": 1e-6, \"suffix\": \"\" },\r\n\t *   { \"number\": 1e-3, \"suffix\": \"m\" }\r\n\t * ]\r\n\t * ```\r\n\t *\r\n\t * If the number is smaller than the `number` ir will be converted to the\r\n\t * appropriate smaller number with prefix.\r\n\t *\r\n\t * E.g. as per above `0.0015` will be converted to `1.5m`.\r\n\t *\r\n\t * Please note that for this transformation to be enabled, you need to\r\n\t * enable it specific modifier in your format setting.\r\n\t *\r\n\t * The modifier for big/small number modification is \"a\":\r\n\t *\r\n\t * ```Text\r\n\t * {myfield.formatNumber(\"#,###.00a\")}\r\n\t * ```\r\n\t *\r\n\t * @see {@link https://www.amcharts.com/docs/v4/concepts/formatters/formatting-numbers/} Tutorial on number formatting\r\n\t * @param {any[]}  prefixes  Prefixes for small numbers\r\n\t */\r\n\tpublic set smallNumberPrefixes(prefixes: any[]) {\r\n\t\tthis._smallNumberPrefixes = prefixes;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {any[]} Prefixes for small numbers\r\n\t */\r\n\tpublic get smallNumberPrefixes(): any[] {\r\n\t\treturn this._smallNumberPrefixes;\r\n\t}\r\n\r\n\t/**\r\n\t * Basically the same as `bigNumberPrefixes`, except base for calculation\r\n\t * is not thousand but byte (1024).\r\n\t *\r\n\t * The modifier is \"b\".\r\n\t *\r\n\t *  ```Text\r\n\t * {myfield.formatNumber(\"#,###.00b\")}\r\n\t * ```\r\n\t *\r\n\t * The above `2048` will change to `2K`.\r\n\t *\r\n\t * @see {@link https://www.amcharts.com/docs/v4/concepts/formatters/formatting-numbers/} Tutorial on number formatting\r\n\t * @param {any[]}  prefixes  Prefixes for byte-size formatting\r\n\t */\r\n\tpublic set bytePrefixes(prefixes: any[]) {\r\n\t\tthis._bytePrefixes = prefixes;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {any[]} Prefixes for byte-size formatting\r\n\t */\r\n\tpublic get bytePrefixes(): any[] {\r\n\t\treturn this._bytePrefixes;\r\n\t}\r\n\r\n\t/**\r\n\t * Ooutput format: \"svg\" or \"html\".\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {string}  value  Output format\r\n\t */\r\n\tpublic set outputFormat(outputFormat: string) {\r\n\t\tthis._outputFormat = outputFormat.toLowerCase();\r\n\t\tthis.invalidateSprite();\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore Exclude from docs\r\n\t * @return {string} Output format\r\n\t */\r\n\tpublic get outputFormat(): string {\r\n\t\treturn this._outputFormat;\r\n\t}\r\n\r\n\t/**\r\n\t * Replaces brackets with temporary placeholders.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {string}  text  Input text\r\n\t * @return {string}        Escaped text\r\n\t */\r\n\tpublic escape(text: string): string {\r\n\t\treturn text.replace(\"||\", $strings.PLACEHOLDER2);\r\n\t}\r\n\r\n\t/**\r\n\t * Replaces placeholders back to brackets.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {string}  text  Escaped text\r\n\t * @return {string}        Unescaped text\r\n\t */\r\n\tpublic unescape(text: string): string {\r\n\t\treturn text.replace($strings.PLACEHOLDER2, \"|\");\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/formatters/NumberFormatter.ts","/**\r\n * Duration formatting functionality.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Sprite } from \"../Sprite\";\r\nimport { Language } from \"../utils/Language\";\r\nimport { BaseObject } from \"../Base\";\r\nimport { ITextChunk, getTextFormatter } from \"../formatters/TextFormatter\";\r\nimport * as $strings from \"../utils/Strings\";\r\nimport * as $object from \"../utils/Object\";\r\nimport * as $utils from \"../utils/Utils\";\r\nimport * as $type from \"../utils/Type\";\r\n\r\n/**\r\n * DurationFormatter class. Formats numbers as durations.\r\n *\r\n * `1000` as `16:40`\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v4/concepts/formatters/formatting-duration/} Tutorial on duration formatting\r\n * @todo Implement syntax to set base unit in format itself\r\n */\r\nexport class DurationFormatter extends BaseObject {\r\n\r\n\t/**\r\n\t * A base value for negative numbers. Will treat all numbers below this value\r\n\t * as negative numbers.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tprotected _negativeBase: number = 0;\r\n\r\n\t/**\r\n\t * Holds number format.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tprotected _durationFormat = \"mm:ss\";\r\n\r\n\t/**\r\n\t * A base unit to consider values are in.\r\n\t *\r\n\t * @default \"s\"\r\n\t * @type {string}\r\n\t */\r\n\tprotected _baseUnit = \"s\";\r\n\r\n\t/**\r\n\t * Output format to produce. If the format calls for applying color to the\r\n\t * formatted value, this setting will determine what markup to use: SVG or\r\n\t * HTML.\r\n\t *\r\n\t * Available options: svg, html.\r\n\t *\r\n\t * @default \"svg\"\r\n\t * @type {string}\r\n\t */\r\n\tprotected _outputFormat: string = \"svg\";\r\n\r\n\r\n\t/**\r\n\t * How many milliseconds each unit represents.\r\n\t *\r\n\t * @type {Object}\r\n\t */\r\n\tprotected _unitValues: { [index: string]: number } = {\r\n\t\t\"S\": 1,\r\n\t\t\"s\": 1000,\r\n\t\t\"m\": 60000,\r\n\t\t\"h\": 3600000,\r\n\t\t\"d\": 86400000,\r\n\t\t\"w\": 604800000,\r\n\t\t\"M\": 2592000000,\r\n\t\t\"y\": 31536000000,\r\n\t};\r\n\r\n\t/**\r\n\t * Collection of aliases for units.\r\n\t *\r\n\t * @type {Object}\r\n\t */\r\n\tprotected _unitAliases: { [index: string]: string } = {\r\n\t\t\"Y\": \"y\",\r\n\t\t\"D\": \"d\",\r\n\t\t\"H\": \"h\",\r\n\t\t\"K\": \"h\",\r\n\t\t\"k\": \"h\",\r\n\t\t\"n\": \"S\"\r\n\t};\r\n\r\n\t/**\r\n\t * Holds reference to parent [[Sprite]] object.\r\n\t *\r\n\t * @type {Optional<Sprite>}\r\n\t */\r\n\tpublic sprite: $type.Optional<Sprite>;\r\n\r\n\t/**\r\n\t * Holds reference to [[Language]] object.\r\n\t *\r\n\t * @type {Optional<Language>}\r\n\t */\r\n\tpublic language: $type.Optional<Language>;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"DurationFormatter\";\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Formats the number according as duration.\r\n\t *\r\n\t * For example `1000` (base unit seconds) would be converted to `16:40` as in\r\n\t * 16 minutes and 40 seconds.\r\n\t *\r\n\t * @see {@link https://www.amcharts.com/docs/v4/concepts/formatters/formatting-duration/} Tutorial on duration formatting\r\n\t * @param  {number | string}  value   Value to format\r\n\t * @param  {string}           format  Format to apply\r\n\t * @param  {string}           base    Override base unit\r\n\t * @return {string}                   Formatted number\r\n\t */\r\n\tpublic format(value: number | string, format?: string, base?: string): string {\r\n\r\n\t\t// no language?\r\n\t\tif (!this.language) {\r\n\t\t\tif (this.sprite) {\r\n\t\t\t\tthis.language = this.sprite.language;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.language = new Language;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// no base unit?\r\n\t\tlet baseUnit = base || this._baseUnit;\r\n\r\n\t\t// no format passed in or empty\r\n\t\tif (typeof format === \"undefined\" || format === \"\") {\r\n\t\t\tformat = this._durationFormat;\r\n\t\t}\r\n\r\n\t\t// Clean format\r\n\t\tformat = $utils.cleanFormat(format);\r\n\r\n\t\t// get format info (it will also deal with parser caching)\r\n\t\tlet info = this.parseFormat(format, baseUnit);\r\n\r\n\t\t// cast to number just in case\r\n\t\t// TODO: maybe use better casting\r\n\t\tlet source: number = Number(value);\r\n\r\n\t\t// format and replace the number\r\n\t\tlet details;\r\n\t\tif (source > this._negativeBase) {\r\n\t\t\tdetails = info.positive;\r\n\t\t}\r\n\t\telse if (source < this._negativeBase) {\r\n\t\t\tdetails = info.negative;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tdetails = info.zero;\r\n\t\t}\r\n\r\n\r\n\t\t// Format\r\n\t\tlet formatted = this.applyFormat(source, details);\r\n\r\n\t\t// Apply color?\r\n\t\tif (details.color !== \"\") {\r\n\t\t\tif (this._outputFormat === \"svg\") {\r\n\t\t\t\tformatted = \"<tspan fill='\" + details.color + \"'>\" + formatted + \"</tspan>\";\r\n\t\t\t}\r\n\t\t\telse if (this._outputFormat === \"html\") {\r\n\t\t\t\tformatted = \"<span style='color: \" + details.color + \";'>\" + formatted + \"</span>\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn formatted;\r\n\t}\r\n\r\n\t/**\r\n\t * Parses supplied format into structured object which can be used to format\r\n\t * the number.\r\n\t *\r\n\t * @param  {string}  format  Format string, i.e. \"#,###.00\"\r\n\t * @param  {string}  base    Override base unit\r\n\t * @return {any}             Parsed information\r\n\t */\r\n\tprotected parseFormat(format: string, base?: string): any {\r\n\r\n\t\t// check cache\r\n\t\tif (typeof (this.getCache(format)) !== \"undefined\") {\r\n\t\t\treturn this.getCache(format);\r\n\t\t}\r\n\r\n\t\t// no base unit?\r\n\t\tlet baseUnit = base || this._baseUnit;\r\n\r\n\t\t// Initialize duration parsing info\r\n\t\tlet info = {\r\n\t\t\t\"positive\": {\r\n\t\t\t\t\"color\": \"\",\r\n\t\t\t\t\"template\": \"\",\r\n\t\t\t\t\"parts\": <any>[],\r\n\t\t\t\t\"source\": \"\",\r\n\t\t\t\t\"baseUnit\": baseUnit,\r\n\t\t\t\t\"parsed\": false,\r\n\t\t\t\t\"absolute\": false\r\n\t\t\t},\r\n\t\t\t\"negative\": {\r\n\t\t\t\t\"color\": \"\",\r\n\t\t\t\t\"template\": \"\",\r\n\t\t\t\t\"parts\": <any>[],\r\n\t\t\t\t\"source\": \"\",\r\n\t\t\t\t\"baseUnit\": baseUnit,\r\n\t\t\t\t\"parsed\": false,\r\n\t\t\t\t\"absolute\": false\r\n\t\t\t},\r\n\t\t\t\"zero\": {\r\n\t\t\t\t\"color\": \"\",\r\n\t\t\t\t\"template\": \"\",\r\n\t\t\t\t\"parts\": <any>[],\r\n\t\t\t\t\"source\": \"\",\r\n\t\t\t\t\"baseUnit\": baseUnit,\r\n\t\t\t\t\"parsed\": false,\r\n\t\t\t\t\"absolute\": false\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// Escape double vertical bars (that mean display one vertical bar)\r\n\t\tformat = format.replace(\"||\", $strings.PLACEHOLDER2);\r\n\r\n\t\t// Split it up and deal with different formats\r\n\t\tlet parts = format.split(\"|\");\r\n\t\tinfo.positive.source = parts[0];\r\n\r\n\t\tif (typeof parts[2] === \"undefined\") {\r\n\t\t\tinfo.zero = info.positive;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tinfo.zero.source = parts[2];\r\n\t\t}\r\n\r\n\t\tif (typeof parts[1] === \"undefined\") {\r\n\t\t\tinfo.negative = info.positive;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tinfo.negative.source = parts[1];\r\n\t\t}\r\n\r\n\t\t// Parse each\r\n\t\t$object.each(info, (part, item) => {\r\n\t\t\t// Already parsed\r\n\t\t\tif (item.parsed) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Check cached\r\n\t\t\tif (typeof this.getCache(item.source) !== \"undefined\") {\r\n\t\t\t\tinfo[part] = this.getCache(item.source);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Begin parsing\r\n\t\t\tlet partFormat: string = item.source;\r\n\r\n\t\t\t// Check for [] directives\r\n\t\t\tlet dirs: string[] | null = [];\r\n\t\t\tdirs = item.source.match(/^\\[([^\\]]*)\\]/);\r\n\t\t\tif (dirs && dirs.length && dirs[0] !== \"\") {\r\n\t\t\t\tpartFormat = item.source.substr(dirs[0].length);\r\n\t\t\t\titem.color = dirs[1];\r\n\t\t\t}\r\n\r\n\r\n\t\t\t// Let TextFormatter split into chunks\r\n\t\t\tlet chunks: ITextChunk[] = getTextFormatter().chunk(partFormat, true);\r\n\t\t\tfor (let i: number = 0; i < chunks.length; i++) {\r\n\t\t\t\tlet chunk: ITextChunk = chunks[i];\r\n\r\n\t\t\t\t// replace back double vertical bar\r\n\t\t\t\tchunk.text = chunk.text.replace($strings.PLACEHOLDER2, \"|\");\r\n\r\n\t\t\t\tif (chunk.type === \"value\") {\r\n\r\n\t\t\t\t\t// Just \"Duration\"?\r\n\t\t\t\t\tif (chunk.text.toLowerCase() === \"duration\") {\r\n\t\t\t\t\t\tchunk.text = this._durationFormat;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Check for \"a\" (absolute) modifier\r\n\t\t\t\t\tif (chunk.text.match(/[yYMdDwhHKkmsSn]+a/)) {\r\n\t\t\t\t\t\titem.absolute = true;\r\n\t\t\t\t\t\tchunk.text = chunk.text.replace(/([yYMdDwhHKkmsSn]+)a/, \"$1\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Find all possible parts\r\n\t\t\t\t\tlet matches = chunk.text.match(/y+|Y+|M+|d+|D+|w+|h+|H+|K+|k+|m+|s+|S+|n+/g);\r\n\r\n\t\t\t\t\tif (matches) {\r\n\t\t\t\t\t\t// Populate template\r\n\t\t\t\t\t\tfor (let x = 0; x < matches.length; x++) {\r\n\t\t\t\t\t\t\t// Is it an alias?\r\n\t\t\t\t\t\t\tif (!$type.hasValue(matches[x])) {\r\n\t\t\t\t\t\t\t\tmatches[x] = this._unitAliases[matches[x]];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\titem.parts.push(matches[x]);\r\n\t\t\t\t\t\t\tchunk.text = chunk.text.replace(matches[x], $strings.PLACEHOLDER);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Apply to template\r\n\t\t\t\titem.template += chunk.text;\r\n\t\t\t}\r\n\r\n\t\t\t// Apply style formatting\r\n\t\t\t//item.template = getTextFormatter().format(item.template, this.outputFormat);\r\n\r\n\t\t\t// Save cache\r\n\t\t\tthis.setCache(item.source, item);\r\n\r\n\t\t\t// Mark this as parsed\r\n\t\t\titem.parsed = true;\r\n\t\t});\r\n\r\n\t\t// Save cache (the whole thing)\r\n\t\tthis.setCache(format, info);\r\n\r\n\t\treturn info;\r\n\t}\r\n\r\n\t/**\r\n\t * Applies parsed format to a numeric value.\r\n\t *\r\n\t * @param  {number}  value    Value\r\n\t * @param  {any}     details  Parsed format as returned by {parseFormat}\r\n\t * @return {string}           Formatted duration\r\n\t */\r\n\tprotected applyFormat(value: number, details: any): string {\r\n\r\n\t\t// Use absolute values\r\n\t\tlet negative: boolean = !details.absolute && (value < this._negativeBase);\r\n\t\tvalue = Math.abs(value);\r\n\r\n\t\t// Recalculate to milliseconds\r\n\t\tlet tstamp: number = this.toTimeStamp(value, details.baseUnit);\r\n\r\n\t\t// Init return value\r\n\t\tlet res: string = details.template;\r\n\r\n\t\t// Iterate through duration parts\r\n\t\tfor (let i = 0; i < details.parts.length; i++) {\r\n\r\n\t\t\t// Gather the part\r\n\t\t\tlet part: string = details.parts[i];\r\n\t\t\tlet unit: string = part.substr(0, 1);\r\n\t\t\tlet digits: number = part.length;\r\n\r\n\t\t\t// Calculate current unit value\r\n\t\t\tlet ints: number = Math.floor(tstamp / this._unitValues[unit]);\r\n\t\t\tres = res.replace($strings.PLACEHOLDER, $utils.padString(ints, digits, \"0\"));\r\n\r\n\t\t\t// Reduce timestamp\r\n\t\t\ttstamp -= ints * this._unitValues[unit];\r\n\t\t}\r\n\r\n\t\t// Reapply negative sign\r\n\t\tif (negative) {\r\n\t\t\tres = \"-\" + res;\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * Converts numeric value to timestamp in milliseconds.\r\n\t *\r\n\t * @param  {number}  value     A source value\r\n\t * @param  {string}  baseUnit  Base unit the source value is in: \"q\", \"s\", \"i\", \"h\", \"d\", \"w\", \"m\", \"y\"\r\n\t * @return {number}            Value representation as a timestamp in milliseconds\r\n\t */\r\n\tpublic toTimeStamp(value: number, baseUnit: string): number {\r\n\t\treturn value * this._unitValues[baseUnit];\r\n\t}\r\n\r\n\t/**\r\n\t * Invalidates the parent [[Sprite]] object.\r\n\t */\r\n\tprotected invalidateSprite(): void {\r\n\t\tif (this.sprite) {\r\n\t\t\tthis.sprite.invalidate();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Duration format.\r\n\t *\r\n\t * @default \"mm:ss\"\r\n\t * @see {@link https://www.amcharts.com/docs/v4/concepts/formatters/formatting-duration/} Tutorial on duration formatting\r\n\t * @param {string}  format  Duration format\r\n\t */\r\n\tpublic set durationFormat(format: string) {\r\n\t\tthis._durationFormat = format;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {string} Duration format\r\n\t */\r\n\tpublic get durationFormat(): string {\r\n\t\treturn this._durationFormat;\r\n\t}\r\n\r\n\t/**\r\n\t * Base unit the values are in.\r\n\t *\r\n\t * A base unit will be used to recalculate the numeric value to millisecond\r\n\t * timestamps.\r\n\t *\r\n\t * Available options:\r\n\t *\r\n\t * * \"q\" - millisecond\r\n\t * * \"s\" - second\r\n\t * * \"i\" - minute\r\n\t * * \"h\" - hour\r\n\t * * \"d\" - day\r\n\t * * \"w\" - week\r\n\t * * \"m\" - month\r\n\t * * \"y\" - year\r\n\t *\r\n\t * @default \"s\"\r\n\t * @param {string}  baseUnit  A base unit\r\n\t */\r\n\tpublic set baseUnit(baseUnit: string) {\r\n\t\tthis._baseUnit = baseUnit.toLowerCase();\r\n\t\tthis.invalidateSprite();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {string} Base unit\r\n\t */\r\n\tpublic get baseUnit(): string {\r\n\t\treturn this._baseUnit;\r\n\t}\r\n\r\n\t/**\r\n\t * Setter for output format: \"svg\" or \"html.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {string}  value  Output format\r\n\t */\r\n\tpublic set outputFormat(outputFormat: string) {\r\n\t\tthis._outputFormat = outputFormat.toLowerCase();\r\n\t\tthis.invalidateSprite();\r\n\t}\r\n\r\n\t/**\r\n\t * Getter for output format.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {string} Output format\r\n\t */\r\n\tpublic get outputFormat(): string {\r\n\t\treturn this._outputFormat;\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/formatters/DurationFormatter.ts","/**\r\n * Export module.\r\n *\r\n * Parts of Export functionality rely on the following third party libraries:\r\n *\r\n * [Fabric.js](http://fabricjs.com/)\r\n * Copyright (c) Printio (Juriy Zaytsev, Maxim Chernyak)\r\n * Licensed under [MIT](https://github.com/kangax/fabric.js/blob/master/LICENSE)\r\n *\r\n * [pdfmake](http://pdfmake.org/)\r\n * Copyright (c) 2014 bpampuch\r\n * Licensed under [MIT](https://github.com/bpampuch/pdfmake/blob/master/LICENSE)\r\n *\r\n * [SheetJS Community Edition](https://github.com/sheetjs/js-xlsx)\r\n * Licensed under [Apache License 2.0](https://github.com/SheetJS/js-xlsx/blob/master/LICENSE)\r\n *\r\n * [JSZip](http://stuartk.com/jszip)\r\n * Copyright (c) Stuart Knightley\r\n * Dual licenced under the [MIT license or GPLv3](https://raw.githubusercontent.com/Stuk/jszip/master/LICENSE.markdown).\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { ExportMenu } from \"./ExportMenu\";\r\nimport { Adapter } from \"../utils/Adapter\";\r\nimport { EventDispatcher, AMEvent } from \"../utils/EventDispatcher\";\r\nimport { Sprite } from \"../Sprite\";\r\nimport { Preloader } from \"../elements/Preloader\";\r\nimport { Modal } from \"../elements/Modal\";\r\nimport { List } from \"../utils/List\";\r\nimport { Dictionary } from \"../utils/Dictionary\";\r\nimport { IDisposer } from \"../utils/Disposer\";\r\nimport { DateFormatter } from \"../formatters/DateFormatter\";\r\nimport { Language } from \"../utils/Language\";\r\nimport { Validatable } from \"../utils/Validatable\";\r\nimport { keyboard, KeyboardKeys } from \"../utils/Keyboard\";\r\nimport { Color, color } from \"../utils/Color\";\r\nimport { registry } from \"../Registry\";\r\nimport { options } from \"../Options\";\r\nimport { getInteraction } from \"../interaction/Interaction\";\r\nimport { StyleRule } from \"../utils/DOM\";\r\nimport * as $object from \"../utils/Object\";\r\nimport * as $net from \"../utils/Net\";\r\nimport * as $dom from \"../utils/DOM\";\r\nimport * as $type from \"../utils/Type\";\r\nimport * as $utils from \"../utils/Utils\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Represents an Event object that comes from [[Export]].\r\n */\r\nexport type ExportOperation = {\r\n\tformat?: string;\r\n\toptions?: any;\r\n}\r\n\r\n/**\r\n * Defines image formats available for export.\r\n *\r\n * @type {string}\r\n */\r\nexport type imageFormats = \"png\" | \"gif\" | \"jpg\";\r\n\r\n/**\r\n * Represents options for image export.\r\n */\r\nexport interface IExportImageOptions {\r\n\r\n\t/**\r\n\t * Quality of the exported image. (0-1)\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tquality?: number;\r\n\r\n\t/**\r\n\t * Rescale image.\r\n\t *\r\n\t * Number less than 1 will shrink the image.\r\n\t *\r\n\t * Number bigger than 1 will scale up the image.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tscale?: number;\r\n\r\n\t/**\r\n\t * Normally, Export removes \"tainted\" images (images that are loaded from\r\n\t * other host than the chart itself) before export.\r\n\t *\r\n\t * Set this to `true` to disable it.\r\n\t *\r\n\t * Please note that removal of tainted images might trigger cross-origin\r\n\t * security restrictions in browser and prevent the whole export operation,\r\n\t * so use with caution.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tkeepTainted?: boolean;\r\n\r\n}\r\n\r\n/**\r\n * Represents options for SVG export.\r\n */\r\nexport interface IExportSVGOptions {\r\n}\r\n\r\n/**\r\n * Available PDF page sizes.\r\n *\r\n * @type {string}\r\n */\r\nexport type pageSizes = \"4A0\" | \"2A0\" | \"A0\" | \"A1\" | \"A2\" | \"A3\" | \"A4\" | \"A5\" | \"A6\" | \"A7\" | \"A8\" | \"A9\" | \"A10\" |\r\n\t\"B0\" | \"B1\" | \"B2\" | \"B3\" | \"B4\" | \"B5\" | \"B6\" | \"B7\" | \"B8\" | \"B9\" | \"B10\" |\r\n\t\"C0\" | \"C1\" | \"C2\" | \"C3\" | \"C4\" | \"C5\" | \"C6\" | \"C7\" | \"C8\" | \"C9\" | \"C10\" |\r\n\t\"RA0\" | \"RA1\" | \"RA2\" | \"RA3\" | \"RA4\" |\r\n\t\"SRA0\" | \"SRA1\" | \"SRA2\" | \"SRA3\" | \"SRA4\" |\r\n\t\"EXECUTIVE\" | \"FOLIO\" | \"LEGAL\" | \"LETTER\" | \"TABLOID\";\r\n\r\n/**\r\n * Represents options for PDF export.\r\n */\r\nexport interface IExportPDFOptions extends IExportImageOptions {\r\n\r\n\t/**\r\n\t * Font size to use for all texts.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tfontSize?: number;\r\n\r\n\t/**\r\n\t * An image format to use for embedded images in PDF.\r\n\t *\r\n\t * See `imageFormats` in [[Export_module]].\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\timageFormat?: imageFormats;\r\n\r\n\t/**\r\n\t * Whether to add a URL of the web page the chart has been exported from.\r\n\t *\r\n\t * @type {boolean}\r\n\t * @default true\r\n\t */\r\n\taddURL?: boolean;\r\n\r\n\t/**\r\n\t * Page size of the exported PDF.\r\n\t *\r\n\t * See `pageSizes` in [[Export_module]].\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tpageSize?: pageSizes;\r\n\r\n\t/**\r\n\t * Page orientation.\r\n\t */\r\n\tpageOrientation?: \"landscape\" | \"portrait\";\r\n\r\n\t/**\r\n\t * Page margins.\r\n\t *\r\n\t * Can be one of the following:\r\n\t *\r\n\t * A single number, in which case it will act as margin setting\r\n\t * for all four edges of the page.\r\n\t *\r\n\t * An array of two numbers `[ horizontal, vertical ]`.\r\n\t *\r\n\t * An array of four numbers `[ left, top, right, bottom ]`.\r\n\t */\r\n\tpageMargins?: number | number[];\r\n\r\n}\r\n\r\n/**\r\n * Represents options for CSV export.\r\n */\r\nexport interface IExportCSVOptions {\r\n\r\n\t/**\r\n\t * Separator string to separate columns with.\r\n\t *\r\n\t * @default \",\"\r\n\t * @type {string}\r\n\t */\r\n\tseparator?: string;\r\n\r\n\t/**\r\n\t * CSV format does not require enclosing values in quotes, unless it\r\n\t * contains strings.\r\n\t *\r\n\t * This setting can be used to enforce enclosing of all values in CSV with\r\n\t * quotes.\r\n\t *\r\n\t * @default false\r\n\t * @type {boolean}\r\n\t */\r\n\tforceQuotes?: boolean;\r\n\r\n\t/**\r\n\t * Add column names in first row?\r\n\t *\r\n\t * Export will try to use user-friendly column names where possible, either\r\n\t * from Export's `dataFields` or deduced from chart's series' names that are\r\n\t * bound to specific data fields.\r\n\t *\r\n\t * @default true\r\n\t * @type {boolean}\r\n\t */\r\n\taddColumnNames?: boolean;\r\n\r\n\t/**\r\n\t * Add rows in reverse order.\r\n\t *\r\n\t * @default false\r\n\t * @type {boolean}\r\n\t */\r\n\treverse?: boolean;\r\n\r\n\t/**\r\n\t * Use timestamps instead of formatted date/time values.\r\n\t *\r\n\t * @default false\r\n\t * @type {boolean}\r\n\t */\r\n\tuseTimestamps?: boolean;\r\n\r\n\t/**\r\n\t * Will try to format numbers and date/time according to user's locale\r\n\t * settings.\r\n\t *\r\n\t * @default true\r\n\t * @type {boolean}\r\n\t */\r\n\tuseLocale?: boolean;\r\n}\r\n\r\n/**\r\n * Represents options for JSON export\r\n */\r\nexport interface IExportJSONOptions {\r\n\r\n\t/**\r\n\t * Use timestamps instead of formatted date/time values.\r\n\t *\r\n\t * @default false\r\n\t * @type {boolean}\r\n\t */\r\n\tuseTimestamps?: boolean;\r\n\r\n\t/**\r\n\t * Will try to format numbers and date/time according to user's locale\r\n\t * settings.\r\n\t *\r\n\t * @default true\r\n\t * @type {boolean}\r\n\t */\r\n\tuseLocale?: boolean;\r\n\r\n\t/**\r\n\t * Sets indent size for each hierarchical elements.\r\n\t *\r\n\t * @default \"  \"\r\n\t * @type {number}\r\n\t */\r\n\tindent?: number;\r\n\r\n}\r\n\r\n/**\r\n * Represents options for XLSX export.\r\n */\r\nexport interface IExportExcelOptions {\r\n\r\n\t/**\r\n\t * Add column names in first row?\r\n\t *\r\n\t * Export will try to use user-friendly column names where possible, either\r\n\t * from Export's `dataFields` or deduced from chart's series' names that are\r\n\t * bound to specific data fields.\r\n\t *\r\n\t * @default true\r\n\t * @type {boolean}\r\n\t */\r\n\taddColumnNames?: boolean;\r\n\r\n\t/**\r\n\t * Use timestamps instead of formatted date/time values.\r\n\t *\r\n\t * @default false\r\n\t * @type {boolean}\r\n\t */\r\n\tuseTimestamps?: boolean;\r\n\r\n\t/**\r\n\t * Will try to format numbers and date/time according to user's locale\r\n\t * settings.\r\n\t *\r\n\t * @default true\r\n\t * @type {boolean}\r\n\t */\r\n\tuseLocale?: boolean;\r\n}\r\n\r\n/**\r\n * Represents options for print.\r\n */\r\nexport interface IExportPrintOptions extends IExportImageOptions {\r\n\r\n\t/**\r\n\t * A delay in milliseconds to wait before initiating print.\r\n\t *\r\n\t * This delay is necessary to ensure DOM is prepared and repainted before\r\n\t * print dialog kicks in.\r\n\t *\r\n\t * @default 500\r\n\t * @type {number}\r\n\t */\r\n\tdelay?: number;\r\n\r\n\t/**\r\n\t * Method to use for printing.\r\n\t *\r\n\t * If one fails for your particular setup, try the other.\r\n\t *\r\n\t * \"css\" - inserts dynamic CSS that hides everything, except the image being printed.\r\n\t * \"iframe\" - creates a dynamic `<iframe>` with the image, then prints it.\r\n\t *\r\n\t * @default \"iframe\"\r\n\t */\r\n\tprintMethod?: \"css\" | \"iframe\";\r\n\r\n}\r\n\r\n/**\r\n * Represents options for custom menu items.\r\n */\r\nexport interface IExportCustomOptions { }\r\n\r\n/**\r\n * Represents interface for a temporarily removed image.\r\n */\r\nexport interface IExportRemovedObject {\r\n\r\n\t/**\r\n\t * Element that was removed out of DOM.\r\n\t *\r\n\t * @type {Node}\r\n\t */\r\n\telement: Node;\r\n\r\n\t/**\r\n\t * A placeholder element that was placed instead of removed element so that\r\n\t * we know where to put removed element back in.\r\n\t *\r\n\t * @type {Node}\r\n\t */\r\n\tplaceholder: Node;\r\n\r\n}\r\n\r\n/**\r\n * Represents all available options for all export operations.\r\n */\r\nexport interface IExportOptions {\r\n\tpng: IExportImageOptions;\r\n\tgif: IExportImageOptions;\r\n\tjpg: IExportImageOptions;\r\n\tsvg: IExportSVGOptions;\r\n\tpdf: IExportPDFOptions;\r\n\txlsx: IExportExcelOptions;\r\n\tcsv: IExportCSVOptions;\r\n\tjson: IExportJSONOptions;\r\n\tprint: IExportPrintOptions;\r\n\tcustom: IExportCustomOptions;\r\n}\r\n\r\n/**\r\n * All export options as a type.\r\n *\r\n * @ignore Exclude from docs\r\n */\r\nexport type ExportOptions = IExportImageOptions | IExportSVGOptions | IExportPDFOptions | IExportExcelOptions | IExportCSVOptions | IExportJSONOptions | IExportPrintOptions;\r\n\r\n/**\r\n * Defines events for export operations.\r\n */\r\nexport interface IExportEvents {\r\n\r\n\t/**\r\n\t * Invoked when Export initializes.\r\n\t */\r\n\tinited: {};\r\n\r\n\t/**\r\n\t * Invoked when Export menu is created.\r\n\t */\r\n\tmenucreated: {};\r\n\r\n\t/**\r\n\t * Invoked when the Export starts export procedure.\r\n\t *\r\n\t * You can use event handlers here to modify config before actual export\r\n\t * starts.\r\n\t *\r\n\t * @type {ExportOperation}\r\n\t */\r\n\texportstarted: ExportOperation;\r\n\r\n\t/**\r\n\t * Invoked when export operation finishes.\r\n\t *\r\n\t * @type {ExportOperation}\r\n\t */\r\n\texportfinished: ExportOperation;\r\n\r\n\t/**\r\n\t * Invoked when export operation encounters error.\r\n\t *\r\n\t * @type {ExportOperation}\r\n\t */\r\n\terror: ExportOperation;\r\n\r\n\t/**\r\n\t * Invoked when export operation times out.\r\n\t *\r\n\t * Use Export's `timeoutDelay` setting to set timeout. (default: 2000ms)\r\n\t *\r\n\t * @type {ExportOperation}\r\n\t */\r\n\texporttimedout: ExportOperation;\r\n\r\n}\r\n\r\n/**\r\n * @ignore Exclude from docs\r\n */\r\nexport type Keys = keyof IExportOptions;\r\n\r\n/**\r\n * Represents a list of available adapters for [[Export]].\r\n */\r\nexport interface IExportAdapters {\r\n\r\n\tsupported: {\r\n\t\tsupported: boolean,\r\n\t\ttype: Keys,\r\n\t\toptions?: IExportOptions[Keys]\r\n\t},\r\n\r\n\texportFunction: {\r\n\t\tfunc: (type: Keys, options?: IExportOptions[Keys]) => Promise<any>,\r\n\t\ttype: Keys,\r\n\t\toptions?: IExportOptions[Keys]\r\n\t},\r\n\r\n\toptions: {\r\n\t\toptions: IExportOptions[Keys],\r\n\t\ttype?: Keys\r\n\t},\r\n\r\n\ttitle: {\r\n\t\ttitle: string,\r\n\t\toptions?: IExportOptions[Keys]\r\n\t},\r\n\r\n\tcharset: {\r\n\t\tcharset: string,\r\n\t\ttype?: Keys,\r\n\t\toptions?: IExportOptions[Keys]\r\n\t}\r\n\r\n\tsvgToDataURI: {\r\n\t\tdata: string,\r\n\t\toptions?: IExportOptions[Keys]\r\n\t},\r\n\r\n\tgetSVG: {\r\n\t\tdata: string,\r\n\t\toptions?: IExportOptions[Keys]\r\n\t},\r\n\r\n\tnormalizeSVG: {\r\n\t\tdata: string,\r\n\t\toptions?: IExportOptions[Keys]\r\n\t},\r\n\r\n\tgetCSV: {\r\n\t\tdata: string,\r\n\t\toptions?: IExportOptions[Keys]\r\n\t},\r\n\r\n\tgetJSON: {\r\n\t\tdata: string,\r\n\t\toptions?: IExportOptions[Keys]\r\n\t},\r\n\r\n\tgetExcel: {\r\n\t\tdata: string,\r\n\t\toptions?: IExportOptions[Keys]\r\n\t},\r\n\r\n\tpdfmakeDocument: {\r\n\t\tdoc: any,\r\n\t\toptions?: IExportOptions[Keys]\r\n\t},\r\n\r\n\tcontainer: {\r\n\t\tcontainer: HTMLElement\r\n\t},\r\n\r\n\tsprite: {\r\n\t\tsprite: Sprite\r\n\t},\r\n\r\n\tdata: {\r\n\t\tdata: Array<any>\r\n\t},\r\n\r\n\tdataFields: {\r\n\t\tdataFields: any\r\n\t},\r\n\r\n\tdateFormatter: {\r\n\t\tdateFormatter: DateFormatter\r\n\t},\r\n\r\n\tdateFormat: {\r\n\t\tdateFormat: string\r\n\t},\r\n\r\n\tdateFields: {\r\n\t\tdateFields: any\r\n\t},\r\n\r\n\tdataFieldName: {\r\n\t\tname: string,\r\n\t\tfield: string\r\n\t},\r\n\r\n\tisDateField: {\r\n\t\tisDateField: boolean,\r\n\t\tfield: string\r\n\t},\r\n\r\n\tcontentType: {\r\n\t\tcontentType: string,\r\n\t\ttype: Keys\r\n\t},\r\n\r\n\tfilePrefix: {\r\n\t\tfilePrefix: string\r\n\t},\r\n\r\n\tbackgroundColor: {\r\n\t\tbackgroundColor: Color\r\n\t},\r\n\r\n\ttimeoutMessage: {\r\n\t\tmessage: string\r\n\t},\r\n\r\n\txlsxWorkbookOptions: {\r\n\t\toptions: any\r\n\t},\r\n\r\n\txlsxSheetName: {\r\n\t\tname: string\r\n\t}\r\n\r\n\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * [[Export]] allows downloading of current snapshot of the chart as an\r\n * image, PDF, or its data in various formats.\r\n *\r\n * The export functionality is enabled by default in charts and is accessible\r\n * via API or optional export menu.\r\n *\r\n * To enable menu, simply access export's `menu` property. E.g.:\r\n *\r\n * ```TypeScript\r\n * chart.exporting.menu = new am4core.ExportMenu();\r\n * ```\r\n * ```JavaScript\r\n * chart.exporting.menu = new am4core.ExportMenu();\r\n * ```\r\n * ```JSON\r\n * {\r\n *   // ...\r\n *   \"exporting\": {\r\n *     \"menu\": {}\r\n *   }\r\n * }\r\n * ```\r\n *\r\n * To export via API, use `export()` method:\r\n *\r\n * ```TypeScript\r\n * chart.exporting.export(type, [options]);\r\n * ```\r\n * ```JavaScript\r\n * chart.exporting.export(type, [options]);\r\n * ```\r\n *\r\n * E.g.:\r\n *\r\n * ```TypeScript\r\n * chart.exporting.export(\"png\");\r\n * ```\r\n * ```JavaScript\r\n * chart.exporting.export(\"png\");\r\n * ```\r\n *\r\n * @todo Better loading indicator?\r\n * @todo Implement multiplier option\r\n * @todo Handling of hanged exports\r\n * @important\r\n */\r\nexport class Export extends Validatable {\r\n\r\n\t/**\r\n\t * XLINK namespace definition.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {string}\r\n\t */\r\n\tstatic XLINK: string = \"http://www.w3.org/1999/xlink\";\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IExportEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IExportEvents;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IExportAdapters}\r\n\t */\r\n\tpublic _adapter!: IExportAdapters;\r\n\r\n\t/**\r\n\t * Adapter.\r\n\t *\r\n\t * @type {Adapter<Export, IExportAdapters>}\r\n\t */\r\n\tpublic adapter = new Adapter<Export, IExportAdapters>(this);\r\n\r\n\t/**\r\n\t * Holds options for each format.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Dictionary<string, ExportOptions>}\r\n\t */\r\n\tprivate _formatOptions: Dictionary<string, ExportOptions> = new Dictionary<string, ExportOptions>();\r\n\r\n\t/**\r\n\t * An instance of [[Language]].\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Language}\r\n\t */\r\n\tprotected _language: $type.Optional<Language>;\r\n\r\n\t/**\r\n\t * An instance of [[ExportMenu]].\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<ExportMenu>}\r\n\t */\r\n\tprotected _menu: $type.Optional<ExportMenu>;\r\n\r\n\t/**\r\n\t * Reference to main container to place menu in.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {HTMLElement}\r\n\t */\r\n\tprotected _container: HTMLElement;\r\n\r\n\t/**\r\n\t * [[Sprite]] instance to be used when converting to image.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Optional<Sprite>}\r\n\t */\r\n\tprotected _sprite: $type.Optional<Sprite>;\r\n\r\n\t/**\r\n\t * Data storage to be used when exporting to data formats.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {any}\r\n\t */\r\n\tprotected _data: any;\r\n\r\n\t/**\r\n\t * Holds an object of field key / field name used to name columns when\r\n\t * exporting to data formats.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {any}\r\n\t */\r\n\tprotected _dataFields: any;\r\n\r\n\t/**\r\n\t * A reference to [[DateFormatter]].\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {DateFormatter}\r\n\t */\r\n\tprotected _dateFormatter: DateFormatter;\r\n\r\n\t/**\r\n\t * A Date format to be used when formatting dates in string-based data\r\n\t * formats.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {string}\r\n\t */\r\n\tprotected _dateFormat: string;\r\n\r\n\t/**\r\n\t * A list of column keys that hold date values.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {List<string>}\r\n\t */\r\n\tprotected _dateFields: List<string>;\r\n\r\n\t/**\r\n\t * Holds a list of objects that were temporarily removed from the DOM while\r\n\t * exporting. Those most probably are tainted images, or foreign objects that\r\n\t * would otherwise prevent SVG to be converted to canvas.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {List<IExportRemovedObject>}\r\n\t */\r\n\tprotected _removedObjects: List<IExportRemovedObject> = new List<IExportRemovedObject>();\r\n\r\n\t/**\r\n\t * Exported files will be prefixed with whatever it is set here.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {string}\r\n\t */\r\n\tprotected _filePrefix: string = \"amCharts\";\r\n\r\n\t/**\r\n\t * Export will try to determine proper background color itself. If you want to\r\n\t * override it and use some other color, set this property.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Color}\r\n\t */\r\n\tprotected _backgroundColor: Color;\r\n\r\n\t/**\r\n\t * A title to use for some document exports, mainly for print.\r\n\t * A document.title will be used if not set.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {string}\r\n\t */\r\n\tprotected _title: string;\r\n\r\n\t/**\r\n\t * If export operation takes longer than milliseconds in this second, we will\r\n\t * show a modal saying export operation took longer than expected.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tpublic timeoutDelay: number = 2000;\r\n\r\n\t/**\r\n\t * A reference to export timeout.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {number}\r\n\t */\r\n\tprotected _timeoutTimeout: IDisposer;\r\n\r\n\t/**\r\n\t * Holds reference to [[Modal]] instance.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Modal}\r\n\t */\r\n\tprotected _modal: Modal;\r\n\r\n\t/**\r\n\t * Used to log original value of `interactionsEnabled` so that it can be restored\r\n\t * after temporarily disabling it.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tprivate _spriteInteractionsEnabled: boolean;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"Export\";\r\n\r\n\t\t// Set default options\r\n\t\tthis._formatOptions.setKey(\"png\", {});\r\n\r\n\t\tthis._formatOptions.setKey(\"jpg\", {\r\n\t\t\tquality: 0.8\r\n\t\t});\r\n\r\n\t\tthis._formatOptions.setKey(\"gif\", {});\r\n\r\n\t\tthis._formatOptions.setKey(\"svg\", {});\r\n\r\n\t\tthis._formatOptions.setKey(\"pdf\", {\r\n\t\t\tfontSize: 14,\r\n\t\t\timageFormat: \"png\",\r\n\t\t\taddURL: true\r\n\t\t});\r\n\r\n\t\tthis._formatOptions.setKey(\"json\", {\r\n\t\t\tindent: 2,\r\n\t\t\tuseLocale: true\r\n\t\t});\r\n\r\n\t\tthis._formatOptions.setKey(\"csv\", {\r\n\t\t\taddColumnNames: true\r\n\t\t});\r\n\r\n\t\tthis._formatOptions.setKey(\"xlsx\", {\r\n\t\t\taddColumnNames: true,\r\n\t\t\tuseLocale: true\r\n\t\t});\r\n\r\n\t\tthis._formatOptions.setKey(\"print\", {\r\n\t\t\tdelay: 500,\r\n\t\t\tprintMethod: \"iframe\"\r\n\t\t});\r\n\r\n\t\t// Add options adapter\r\n\t\tthis.adapter.add(\"options\", (arg) => {\r\n\t\t\tlet formatOptions = this._formatOptions.getKey(arg.type);\r\n\t\t\tif (arg.options) {\r\n\t\t\t\targ.options = $object.merge(arg.options, formatOptions);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\targ.options = formatOptions;\r\n\t\t\t}\r\n\t\t\treturn arg;\r\n\t\t});\r\n\r\n\t\tthis.applyTheme();\r\n\r\n\t\tthis.dispatchImmediately(\"inited\");\r\n\t}\r\n\r\n\t/**\r\n\t * An instance of [[ExportMenu]].\r\n\t *\r\n\t * To add an export menu to a chart, set this to a new instance of\r\n\t * [[ExportMenu]].\r\n\t *\r\n\t * ```TypeScript\r\n\t * chart.exporting.menu = new am4core.ExportMenu();\r\n\t * ```\r\n\t * ```JavaScript\r\n\t * chart.exporting.menu = new am4core.ExportMenu();\r\n\t * ```\r\n\t * ```JSON\r\n\t * {\r\n\t *   // ...\r\n\t *   \"exporting\": {\r\n\t *     \"menu\": {}\r\n\t *   }\r\n\t * }\r\n\t * ```\r\n\t *\r\n\t * @param {Optional<ExportMenu>}  menu  ExportMenu instance\r\n\t */\r\n\tpublic set menu(menu: $type.Optional<ExportMenu>) {\r\n\t\tif (this._menu) {\r\n\t\t\tthis.removeDispose(this._menu);\r\n\t\t}\r\n\t\tthis._menu = menu;\r\n\r\n\t\t// Set container and language\r\n\t\tthis._menu.container = this.container;\r\n\t\tthis._menu.language = this._language;\r\n\r\n\t\t// Add adapter to check for browser support\r\n\t\tthis._menu.adapter.add(\"branch\", (arg) => {\r\n\t\t\targ.branch.unsupported = !this.typeSupported(arg.branch.type);\r\n\t\t\treturn arg;\r\n\t\t});\r\n\r\n\t\t// Add click events\r\n\t\tthis._menu.events.on(\"hit\", (ev) => {\r\n\t\t\tthis.export(ev.branch.type, ev.branch.options);\r\n\t\t\tthis.menu.close();\r\n\t\t});\r\n\r\n\t\tthis._menu.events.on(\"enter\", (ev) => {\r\n\t\t\tthis.export(ev.branch.type, ev.branch.options);\r\n\t\t\tthis.menu.close();\r\n\t\t});\r\n\r\n\t\tthis._menu.events.on(\"over\", (ev) => {\r\n\t\t\tthis._disablePointers();\r\n\t\t});\r\n\r\n\t\tthis._menu.events.on(\"out\", (ev) => {\r\n\t\t\tthis._releasePointers();\r\n\t\t});\r\n\r\n\t\t// Dispatch event\r\n\t\tthis.dispatchImmediately(\"menucreated\");\r\n\r\n\t\t// Prefix with Sprite's class name\r\n\t\tthis._menu.adapter.add(\"classPrefix\", (obj) => {\r\n\t\t\tobj.classPrefix = options.classNamePrefix + obj.classPrefix;\r\n\t\t\treturn obj;\r\n\t\t});\r\n\r\n\t\t// Add menu to disposers so that it's destroyed when Export is disposed\r\n\t\tthis._disposers.push(this._menu);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Optional<ExportMenu>} ExportMenu instance\r\n\t */\r\n\tpublic get menu(): $type.Optional<ExportMenu> {\r\n\t\treturn this._menu;\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if this specific menu item type is supported by current system.\r\n\t *\r\n\t * @param  {string}   type  Menu item type\r\n\t * @return {boolean}        `false` if not supported\r\n\t */\r\n\tpublic typeSupported<Key extends keyof IExportOptions>(type: Key): boolean {\r\n\t\tlet supported = true;\r\n\t\tif (type === \"pdf\") {\r\n\t\t\tsupported = this.downloadSupport();\r\n\t\t}\r\n\t\telse if (type === \"xlsx\") {\r\n\t\t\tsupported = (this.downloadSupport() && this.data) ? true : false;\r\n\t\t}\r\n\t\telse if (type == \"print\" && !(<any>window).print) {\r\n\t\t\tsupported = false;\r\n\t\t}\r\n\t\telse if ([\"json\", \"csv\"].indexOf(type) !== -1 && !this.data) {\r\n\t\t\tsupported = false;\r\n\t\t}\r\n\t\treturn this.adapter.apply(\"supported\", {\r\n\t\t\tsupported: supported,\r\n\t\t\ttype: type\r\n\t\t}).supported;\r\n\t}\r\n\r\n\t/**\r\n\t * Get function to handle export for particular format.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {this}\r\n\t */\r\n\tprivate _getFunction<Key extends keyof IExportOptions>(type: Key): (this: this, type: Key, options?: IExportOptions[Key]) => Promise<any> {\r\n\t\tswitch (type) {\r\n\t\t\tcase \"png\":\r\n\t\t\tcase \"gif\":\r\n\t\t\tcase \"jpg\":\r\n\t\t\t\treturn <any>this.getImage;\r\n\t\t\tcase \"svg\":\r\n\t\t\t\treturn <any>this.getSVG;\r\n\t\t\tcase \"pdf\":\r\n\t\t\t\treturn <any>this.getPDF;\r\n\t\t\tcase \"xlsx\":\r\n\t\t\t\treturn <any>this.getExcel;\r\n\t\t\tcase \"csv\":\r\n\t\t\t\treturn <any>this.getCSV;\r\n\t\t\tcase \"json\":\r\n\t\t\t\treturn <any>this.getJSON;\r\n\t\t\tcase \"print\":\r\n\t\t\t\treturn this.getPrint;\r\n\t\t\tdefault:\r\n\t\t\t\treturn this.unsupported;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Initiates export procedure.\r\n\t *\r\n\t * @param  {string}   type     Export type\r\n\t * @param  {Object}   options  Options\r\n\t * @return {boolean}           `true` if export was successful\r\n\t * @async\r\n\t */\r\n\tpublic async export<Key extends keyof IExportOptions>(type: Key, options?: IExportOptions[Key]): Promise<boolean> {\r\n\r\n\t\t// Dispatch event\r\n\t\tif (this.events.isEnabled(\"exportstarted\")) {\r\n\t\t\tconst event: AMEvent<this, IExportEvents>[\"exportstarted\"] = {\r\n\t\t\t\t\"type\": \"exportstarted\",\r\n\t\t\t\t\"target\": this,\r\n\t\t\t\t\"format\": type,\r\n\t\t\t\t\"options\": options\r\n\t\t\t};\r\n\t\t\tthis.events.dispatchImmediately(\"exportstarted\", event);\r\n\t\t}\r\n\r\n\t\t// Check if it's a custom item, and do nothing if it is\r\n\t\tif (type == \"custom\") {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t// Schedule a preloader\r\n\t\tthis.showPreloader()\r\n\r\n\t\t// Schedule a timeout\r\n\t\tif (this.timeoutDelay) {\r\n\t\t\tthis.hideTimeout();\r\n\t\t\tthis._timeoutTimeout = this.setTimeout((): void => {\r\n\r\n\t\t\t\t// Dispatch event\r\n\t\t\t\tif (this.events.isEnabled(\"exporttimedout\")) {\r\n\t\t\t\t\tconst event: AMEvent<this, IExportEvents>[\"exporttimedout\"] = {\r\n\t\t\t\t\t\t\"type\": \"exporttimedout\",\r\n\t\t\t\t\t\t\"target\": this,\r\n\t\t\t\t\t\t\"format\": type,\r\n\t\t\t\t\t\t\"options\": options\r\n\t\t\t\t\t};\r\n\t\t\t\t\tthis.events.dispatchImmediately(\"exporttimedout\", event);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Show modal\r\n\t\t\t\tthis.showTimeout()\r\n\r\n\t\t\t}, this.timeoutDelay);\r\n\t\t}\r\n\r\n\t\tlet func: (this: this, type: Key, options?: IExportOptions[Key]) => Promise<any> = this._getFunction(type);\r\n\r\n\t\t// Give chance for plugins to override both function and options\r\n\t\toptions = this.adapter.apply(\"options\", {\r\n\t\t\toptions: options,\r\n\t\t\ttype: type\r\n\t\t}).options;\r\n\r\n\r\n\t\tfunc = this.adapter.apply(\"exportFunction\", {\r\n\t\t\tfunc: func,\r\n\t\t\ttype: type,\r\n\t\t\toptions: options\r\n\t\t}).func;\r\n\r\n\t\t// Get exported stuff\r\n\t\tlet data = await func.call(this, type, options);\r\n\r\n\t\tif (data) {\r\n\r\n\r\n\t\t\t// Dispatch event\r\n\t\t\tif (this.events.isEnabled(\"exportfinished\")) {\r\n\t\t\t\tconst event: AMEvent<this, IExportEvents>[\"exportfinished\"] = {\r\n\t\t\t\t\t\"type\": \"exportfinished\",\r\n\t\t\t\t\t\"target\": this,\r\n\t\t\t\t\t\"format\": type,\r\n\t\t\t\t\t\"options\": options\r\n\t\t\t\t};\r\n\t\t\t\tthis.events.dispatchImmediately(\"exportfinished\", event);\r\n\t\t\t}\r\n\r\n\t\t\t// Hide preloader and timeout modals\r\n\t\t\tthis.hidePreloader();\r\n\t\t\tthis.hideTimeout();\r\n\r\n\t\t\t// Download or print\r\n\t\t\tif (type === \"print\") {\r\n\t\t\t\treturn this.print(data, <IExportOptions[\"print\"]>options, this.adapter.apply(\"title\", {\r\n\t\t\t\t\ttitle: this.title,\r\n\t\t\t\t\toptions: options\r\n\t\t\t\t}).title);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn this.download(data, this.filePrefix + \".\" + type);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// Throw exception?\r\n\t\t\t// @todo\r\n\r\n\t\t\t// Dispatch event\r\n\t\t\tif (this.events.isEnabled(\"error\")) {\r\n\t\t\t\tconst event: AMEvent<this, IExportEvents>[\"error\"] = {\r\n\t\t\t\t\t\"type\": \"error\",\r\n\t\t\t\t\t\"target\": this,\r\n\t\t\t\t\t\"format\": type,\r\n\t\t\t\t\t\"options\": options\r\n\t\t\t\t};\r\n\t\t\t\tthis.events.dispatchImmediately(\"error\", event);\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * A function that should handle unsupported export types.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {string}              type     Export type\r\n\t * @param  {IExportImageOptions} options  Options\r\n\t * @return {Promise<string>}               Promise\r\n\t * @async\r\n\t */\r\n\tpublic async unsupported<Key extends keyof IExportOptions>(type: Key, options?: IExportOptions[Key]): Promise<string> {\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\t/**\r\n\t * Requests a Print of the chart.\r\n\t *\r\n\t * @param  {string}               type     Export type\r\n\t * @param  {IExportImageOptions}  options  Options\r\n\t * @return {Promise<string>}               Promise\r\n\t * @async\r\n\t */\r\n\tpublic async getPrint(type: string, options?: IExportPrintOptions): Promise<string> {\r\n\t\treturn this.getImage(\"png\", options);\r\n\t}\r\n\r\n\t/**\r\n\t * Produces image output from the element.\r\n\t *\r\n\t * Converts to a `Canvas` first, then produces an image to download.\r\n\t *\r\n\t * This is an asynchronous function. Rather than returning a result, it\r\n\t * returns a Promise.\r\n\t *\r\n\t * You can use `await` notion from other async functions, or `then()`\r\n\t * anywhere else.\r\n\t *\r\n\t * ```TypeScript\r\n\t * // Async\r\n\t * let img = await chart.exporting.getImage( \"PNG\" );\r\n\t *\r\n\t * // Sync\r\n\t * let img;\r\n\t * chart.exporting.getImage( \"PNG\" ).then( ( data ) => {\r\n\t *   img = exporing;\r\n\t * } );\r\n\t * ```\r\n\t * ```JavaScript\r\n\t * var img;\r\n\t * chart.exporting.getImage( \"PNG\" ).then( ( data ) => {\r\n\t *   var = data;\r\n\t * } );\r\n\t * ```\r\n\t *\r\n\t * @param  {string}               type     Image format\r\n\t * @param  {IExportImageOptions}  options  Options\r\n\t * @return {Promise<string>}               Promise\r\n\t */\r\n\tpublic async getImage<Key extends imageFormats>(type: Key, options?: IExportImageOptions): Promise<string> {\r\n\r\n\t\t// Get background\r\n\t\tlet background = this.backgroundColor || this.findBackgroundColor(this.sprite.dom);\r\n\r\n\t\t// Are we using simplified export option?\r\n\t\tif (await this.simplifiedImageExport()) {\r\n\r\n\t\t\t/**\r\n\t\t\t * Simplified version using `createObjectURL`\r\n\t\t\t * Not supported in older browsers\r\n\t\t\t */\r\n\r\n\t\t\t// Get dimensions\r\n\t\t\tlet width = this.sprite.pixelWidth,\r\n\t\t\t\theight = this.sprite.pixelHeight,\r\n\t\t\t\tfont = this.findFont(this.sprite.dom),\r\n\t\t\t\tfontSize = this.findFontSize(this.sprite.dom);\r\n\r\n\t\t\t// Create canvas and its 2D context\r\n\t\t\tlet canvas = document.createElement(\"canvas\");\r\n\t\t\tcanvas.width = width;\r\n\t\t\tcanvas.height = height;\r\n\t\t\tlet ctx = canvas.getContext(\"2d\");\r\n\r\n\t\t\t// Add background if necessary\r\n\t\t\tif (background) {\r\n\t\t\t\tctx.fillStyle = background.toString();\r\n\t\t\t\tctx.fillRect(0, 0, width, height);\r\n\t\t\t}\r\n\r\n\t\t\t// Get DOM URL\r\n\t\t\tlet DOMURL = this.getDOMURL();\r\n\r\n\t\t\t// Do prepareations on a document\r\n\t\t\tawait Promise.all([\r\n\t\t\t\tthis.imagesToDataURI(this.sprite.dom, options),\r\n\t\t\t\tthis.prepForeignObjects(this.sprite.dom, options)\r\n\t\t\t]);\r\n\r\n\t\t\t// Add style (mainly for webfonts)\r\n\t\t\tlet fontStyle = \"\";\r\n\t\t\tif (font) {\r\n\t\t\t\tfontStyle = await this.getFontDataURIs(font);\r\n\t\t\t}\r\n\r\n\t\t\t// Get SVG representation of the Sprite\r\n\t\t\tlet data = this.normalizeSVG(\r\n\t\t\t\tthis.serializeElement(this.sprite.paper.defs) + this.serializeElement(this.sprite.dom),\r\n\t\t\t\toptions,\r\n\t\t\t\twidth,\r\n\t\t\t\theight,\r\n\t\t\t\tfont,\r\n\t\t\t\tfontSize,\r\n\t\t\t\tfontStyle\r\n\t\t\t);\r\n\r\n\t\t\tconsole.log(data);\r\n\r\n\t\t\t// Get Blob representation of SVG and create object URL\r\n\t\t\tlet svg = new Blob([data], { type: \"image/svg+xml\" });\r\n\t\t\tlet url = DOMURL.createObjectURL(svg);\r\n\r\n\t\t\t// Create temporary image element\r\n\t\t\ttry {\r\n\t\t\t\tlet img = await this.loadNewImage(url, width, height, \"anonymous\");\r\n\t\t\t\t// Draw image on canvas\r\n\t\t\t\tctx.drawImage(img, 0, 0);\r\n\t\t\t\tDOMURL.revokeObjectURL(url);\r\n\r\n\t\t\t\t// Options are set?\r\n\t\t\t\tif (!$type.hasValue(options)) {\r\n\t\t\t\t\toptions = {};\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Convert to data uri\r\n\t\t\t\tlet uri = canvas.toDataURL(this.getContentType(type), options.quality);\r\n\r\n\t\t\t\t// Restore replaced tainted images in DOM\r\n\t\t\t\tthis.restoreRemovedObjects();\r\n\r\n\t\t\t\t// Return value\r\n\t\t\t\treturn uri;\r\n\t\t\t}\r\n\t\t\tcatch (e) {\r\n\t\t\t\t// An error occurred, let's try advanced method\r\n\t\t\t\treturn await this.getImageAdvanced(type, options);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\telse {\r\n\r\n\t\t\t/**\r\n\t\t\t * Going the hard way. Converting to canvas from each node\r\n\t\t\t */\r\n\t\t\treturn await this.getImageAdvanced(type, options);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Tries to dynamically load [Fabric.js](http://fabricjs.com/) and export it\r\n\t * using its functions.\r\n\t *\r\n\t * This is an asynchronous function. Check the description of `getImage()`\r\n\t * for description and example usage.\r\n\t *\r\n\t * @param {string}               type     Image format\r\n\t * @param {IExportImageOptions}  options  Options\r\n\t * @return {Promise<string>}              Data uri\r\n\t * @todo Is toDataURL a Promise?\r\n\t */\r\n\tpublic async getImageAdvanced(type: imageFormats, options?: IExportImageOptions): Promise<string> {\r\n\r\n\t\t// Convert external images to data uris\r\n\t\tawait this.imagesToDataURI(this.sprite.dom, options);\r\n\r\n\t\t// Get Fabric\r\n\t\tlet fpromise = await this.fabric;\r\n\t\tlet fabric = fpromise.fabric;\r\n\r\n\t\t// Get dimensions\r\n\t\tlet width = this.sprite.pixelWidth,\r\n\t\t\theight = this.sprite.pixelHeight,\r\n\t\t\tfont = this.findFont(this.sprite.dom),\r\n\t\t\tfontSize = this.findFontSize(this.sprite.dom);\r\n\r\n\t\t// Get SVG representation of the Sprite\r\n\t\tlet data = this.normalizeSVG(\r\n\t\t\tthis.serializeElement(this.sprite.paper.defs) + this.serializeElement(this.sprite.dom),\r\n\t\t\toptions,\r\n\t\t\twidth,\r\n\t\t\theight,\r\n\t\t\tfont,\r\n\t\t\tfontSize\r\n\t\t);\r\n\r\n\t\t// Prepare canvas\r\n\t\tlet canvas = new fabric.StaticCanvas();\r\n\t\tcanvas.setDimensions({\r\n\t\t\twidth: width,\r\n\t\t\theight: height\r\n\t\t});\r\n\r\n\t\t// Set canvas background if necessary\r\n\t\tlet background = this.backgroundColor || this.findBackgroundColor(this.sprite.dom);\r\n\t\tif (background) {\r\n\t\t\tcanvas.setBackgroundColor(background.toString());\r\n\t\t}\r\n\r\n\t\t// Try loading from SVG\r\n\t\tlet uri: string = await new Promise<string>((success, error) => {\r\n\r\n\t\t\tfabric.loadSVGFromString(data, (objects: any, fabricOptions: any): void => {\r\n\t\t\t\tlet obj = fabric.util.groupSVGElements(objects, fabricOptions);\r\n\t\t\t\tcanvas.add(obj).renderAll();\r\n\t\t\t\tsuccess(canvas.toDataURL({\r\n\t\t\t\t\t\"type\": type,\r\n\t\t\t\t\t\"multiplier\": 1,\r\n\t\t\t\t\t\"quality\": (options && options.quality) || 1,\r\n\t\t\t\t\t\"enableRetina\": false\r\n\t\t\t\t}));\r\n\t\t\t}, this.prepFabricElement, {\r\n\t\t\t\t\t\"crossOrigin\": \"anonymous\"\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t});\r\n\r\n\t\treturn uri;\r\n\t}\r\n\r\n\t/**\r\n\t * Preps objects used by FabricJS before the export.\r\n\t *\r\n\t * It performs removal of embedded SVG images, since those would trigger\r\n\t * security error on older browsers. Newer browsers are fine, but they do not\r\n\t * use Fabric, so we can safely assume that if we got to this function, we\r\n\t * have an old browser on our hands.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {any} el  Element\r\n\t * @param {any} obj Fabric element object\r\n\t * @todo Check if we can somehow apply text formatting to `<tspan>` elements that is otherwise ignored by Fabric\r\n\t */\r\n\tpublic prepFabricElement(el: any, obj: any): void {\r\n\r\n\t\t// Remove in-line SVG images so they don't cause security error\r\n\t\tif (obj.type == \"image\" && obj[\"xlink:href\"] && obj[\"xlink:href\"].match(/^data:image\\/svg\\+xml/)) {\r\n\t\t\tobj.visible = false;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Converts all `<image>` tags in SVG to use data uris instead of external\r\n\t * URLs\r\n\t *\r\n\t * This is an asynchronous function. Check the description of `getImage()`\r\n\t * for description and example usage.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {SVGSVGElement}        el       SVG node\r\n\t * @param  {IExportImageOptions}  options  Options\r\n\t * @return {Promise<void>}                 Promise\r\n\t */\r\n\tpublic async imagesToDataURI(el: SVGSVGElement, options?: IExportImageOptions): Promise<void> {\r\n\r\n\t\t// Get and process all images\r\n\t\tlet images = el.querySelectorAll(\"image\");\r\n\t\tif (images.length) {\r\n\r\n\t\t\t// Init promises\r\n\t\t\tlet promises = [];\r\n\r\n\t\t\t// There are images, process each of them\r\n\t\t\tfor (let count = images.length, i = 0; i < count; i++) {\r\n\r\n\t\t\t\t// Get image and its href\r\n\t\t\t\tlet image = images[i];\r\n\t\t\t\tlet href = image.getAttributeNS(Export.XLINK, \"href\");\r\n\t\t\t\t//let href = image.getAttribute(\"href\");\r\n\r\n\t\t\t\tif (href.indexOf(\"data:image\") !== -1) {\r\n\t\t\t\t\t// Ignore image if it's already in Data URI format\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\r\n\t\t\t\t\t// SVG or bitmap image?\r\n\t\t\t\t\tif (href.indexOf(\".svg\") !== -1) {\r\n\t\t\t\t\t\tpromises.push(this.svgToDataURI(image, options));\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tpromises.push(this.imageToDataURI(image, options));\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tawait Promise.all(promises);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * `foreignObject` elements cannot be exported. This function hides them\r\n\t * temprarily. In the future it might try to convert them to SVG to make them\r\n\t * exportable.\r\n\t *\r\n\t * This is an asynchronous function. Check the description of `getImage()`\r\n\t * for description and example usage.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {SVGSVGElement}        el       SVG node\r\n\t * @param  {IExportImageOptions}  options  Options\r\n\t * @return {Promise<void>}                 Promise\r\n\t */\r\n\tpublic async prepForeignObjects(el: SVGSVGElement, options?: IExportImageOptions): Promise<void> {\r\n\r\n\t\t// Get and process all foreign objects\r\n\t\tlet objects = el.querySelectorAll(\"foreignObject\");\r\n\t\tif (objects.length) {\r\n\r\n\t\t\t// There are foreign objects, process each of them\r\n\t\t\tfor (let count = objects.length, i = 0; i < count; i++) {\r\n\t\t\t\tthis.temporarilyRemoveObject(objects[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn;\r\n\t}\r\n\r\n\t/**\r\n\t * Converts an SVG `<image>` to use its data uri for `href` instead of\r\n\t * external file.\r\n\t *\r\n\t * This is an asynchronous function. Check the description of `getImage()`\r\n\t * for description and example usage.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {SVGImageElement}     el       SVG element\r\n\t * @param {IExportImageOptions} options  Options\r\n\t */\r\n\tpublic async imageToDataURI(el: SVGImageElement, options?: IExportImageOptions): Promise<string> {\r\n\r\n\t\t// Create a new image and set its `crossOrigin`. This might not work on some\r\n\t\t// browsers. We'll deal with it if error occurs\r\n\t\tlet img: HTMLImageElement;\r\n\t\ttry {\r\n\r\n\t\t\t// Create image\r\n\t\t\timg = await this.loadNewImage(el.getAttributeNS(Export.XLINK, \"href\"), null, null, \"anonymous\");\r\n\r\n\t\t\t// Create new canvas\r\n\t\t\tlet canvas = document.createElement(\"canvas\");\r\n\t\t\tcanvas.width = img.width;\r\n\t\t\tcanvas.height = img.height;\r\n\r\n\t\t\t// Draw new image on it via `toDataURL`\r\n\t\t\tcanvas.getContext(\"2d\").drawImage(img, 0, 0);\r\n\r\n\t\t\t// Replace image `href` with data uri\r\n\t\t\t// If we got to this point it means image has loaded, however we might\r\n\t\t\t// still get an error with `toDataURL()`\r\n\t\t\ttry {\r\n\t\t\t\tlet uri = canvas.toDataURL();\r\n\t\t\t\tel.setAttribute(\"href\", uri);\r\n\t\t\t\treturn uri;\r\n\t\t\t}\r\n\t\t\tcatch (e) {\r\n\t\t\t\t// Give up and temporarily remove the element href temporarily\r\n\t\t\t\tif (options.keepTainted !== false) {\r\n\t\t\t\t\t/*this._removedObjects.push({\r\n\t\t\t\t\t\t\"element\": el,\r\n\t\t\t\t\t\t\"originalHref\": el.getAttributeNS(Export.XLINK, \"href\")\r\n\t\t\t\t\t});\r\n\t\t\t\t\tel.setAttributeNS(Export.XLINK, \"href\", \"\");*/\r\n\t\t\t\t\tthis.temporarilyRemoveObject(el);\r\n\t\t\t\t}\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tcatch (e) {\r\n\r\n\t\t\t// Give up and temporarily remove the element's href\r\n\t\t\tif (!options || options.keepTainted !== false) {\r\n\t\t\t\t/*this._removedObjects.push({\r\n\t\t\t\t\t\"element\": el,\r\n\t\t\t\t\t\"originalHref\": el.getAttributeNS(Export.XLINK, \"href\")\r\n\t\t\t\t});\r\n\t\t\t\tel.setAttributeNS(Export.XLINK, \"href\", \"\");*/\r\n\t\t\t\tthis.temporarilyRemoveObject(el);\r\n\t\t\t}\r\n\t\t\treturn undefined;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Converts `<image>` with external SVG source to data uri. Loads external SVG\r\n\t * file, then converts it to data uri and replaces the `xlink:href` parameter.\r\n\t *\r\n\t * This is an asynchronous function. Check the description of `getImage()`\r\n\t * for description and example usage.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {SVGImageElement}     el        An SVG element\r\n\t * @param {IExportImageOptions} options   Options\r\n\t */\r\n\tpublic async svgToDataURI(el: SVGImageElement, options?: IExportImageOptions): Promise<string> {\r\n\t\tlet href = el.getAttributeNS(Export.XLINK, \"href\");\r\n\t\ttry {\r\n\t\t\tlet data = await $net.load(href);\r\n\t\t\tlet charset = this.adapter.apply(\"charset\", {\r\n\t\t\t\tcharset: \"base64\",\r\n\t\t\t\ttype: \"svg\",\r\n\t\t\t\toptions: options\r\n\t\t\t}).charset;\r\n\r\n\t\t\tlet uri = this.adapter.apply(\"svgToDataURI\", {\r\n\t\t\t\tdata: \"data:\" + this.getContentType(\"svg\") + \";\" + charset + \",\" + btoa(data.response),\r\n\t\t\t\toptions: options\r\n\t\t\t}).data;\r\n\r\n\t\t\tel.setAttributeNS(Export.XLINK, \"href\", uri);\r\n\t\t\treturn uri;\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\t// Disable temporarily\r\n\t\t\tif (!options || options.keepTainted !== false) {\r\n\t\t\t\t/*this._removedObjects.push({\r\n\t\t\t\t\t\"element\": el,\r\n\t\t\t\t\t\"originalHref\": href\r\n\t\t\t\t});\r\n\t\t\t\tel.setAttributeNS(Export.XLINK, \"href\", \"\");*/\r\n\t\t\t\tthis.temporarilyRemoveObject(el);\r\n\t\t\t}\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Temporarily removes element from DOM, and replaces it with a dummy\r\n\t * placeholder, as well as stores it for later restoration.\r\n\t *\r\n\t * This is an asynchronous function. Check the description of `getImage()`\r\n\t * for description and example usage.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {Node} el Node\r\n\t */\r\n\tpublic temporarilyRemoveObject(el: Node, placeholder?: SVGSVGElement): void {\r\n\r\n\t\t// Get parent\r\n\t\tlet parent = el.parentElement || el.parentNode;\r\n\r\n\t\t// Create a placeholder group element if it has not been passed in\r\n\t\tif (!placeholder) {\r\n\t\t\tplaceholder = this.sprite.paper.add(\"g\").node;\r\n\t\t}\r\n\t\tparent.insertBefore(placeholder, el);\r\n\r\n\t\t// Check if we have a textContents we can replace with\r\n\t\t// @todo Perhaps we should explore alternatives to creating text nodes\r\n\t\t// i.e. creating a text version of the HTML-based Text, just for export\r\n\t\t// purposes. Converting HTML into SVG is very complicated\r\n\t\tif (el.textContent) {\r\n\t\t\t/*let text = this.sprite.paper.add(\"text\").node;\r\n\t\t\ttext.textContent = el.textContent;\r\n\t\t\tplaceholder.appendChild(text);\r\n\r\n\t\t\t// Copy properties from the removing element to the placeholder\r\n\t\t\t$dom.copyAttributes(el, placeholder);*/\r\n\t\t}\r\n\r\n\t\t// Remove the old element\r\n\t\tparent.removeChild(el);\r\n\r\n\t\t// Log removed item\r\n\t\tthis._removedObjects.push({\r\n\t\t\t\"element\": el,\r\n\t\t\t\"placeholder\": placeholder\r\n\t\t});\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Restores all (possibly tainted or unsupported) objects that were\r\n\t * temporarily removed when exporting.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic restoreRemovedObjects(): void {\r\n\t\tlet obj: IExportRemovedObject;\r\n\t\twhile (obj = this._removedObjects.pop()) {\r\n\t\t\t//obj.element.setAttribute(\"href\", obj.originalHref);\r\n\t\t\tlet parent = obj.placeholder.parentElement || obj.placeholder.parentNode;\r\n\t\t\tparent.insertBefore(obj.element, obj.placeholder);\r\n\t\t\t//parent.removeChild(obj.placeholder);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Checkes if simplified export can be used using `createObjectURL` and SVG\r\n\t * document does not contain any external images.\r\n\t *\r\n\t * This is an asynchronous function. Check the description of `getImage()`\r\n\t * for description and example usage.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {boolean} `true` if simplified export can be used\r\n\t */\r\n\tpublic async simplifiedImageExport(): Promise<boolean> {\r\n\t\t// Do we have this cached?\r\n\t\tlet cache = registry.getCache(\"simplifiedImageExport\");\r\n\t\tif (cache === false || cache === true) {\r\n\t\t\treturn cache;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t\t/*// Try generating a small SVG-embedded canvas\r\n\t\t// If exception occurs, simplified method is not supported\r\n\t\ttry {\r\n\t\t\tlet canvas = document.createElement(\"canvas\");\r\n\t\t\tcanvas.width = 1;\r\n\t\t\tcanvas.height = 1;\r\n\t\t\tlet ctx = canvas.getContext(\"2d\");\r\n\t\t\tlet DOMURL = this.getDOMURL();\r\n\t\t\tlet svg = new Blob([this.normalizeSVG(\"<g></g>\", {}, 1, 1)], { type: \"image/svg+xml\" });\r\n\t\t\tlet url = DOMURL.createObjectURL(svg);\r\n\t\t\tlet img = await this.loadNewImage(url, 1, 1);\r\n\t\t\tctx.drawImage(img, 0, 0);\r\n\t\t\tDOMURL.revokeObjectURL(url);\r\n\t\t\ttry {\r\n\t\t\t\t//let uri = canvas.toDataURL(\"image/png\");\r\n\t\t\t\tregistry.setCache(\"simplifiedImageExport\", true);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tcatch (e) {\r\n\t\t\t\tregistry.setCache(\"simplifiedImageExport\", false);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t} catch (e) {\r\n\t\t\tregistry.setCache(\"simplifiedImageExport\", false);\r\n\t\t\treturn false;\r\n\t\t}*/\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a new `<image>` element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {string}                     url          URL of the image\r\n\t * @param  {number}                     width        Width (px)\r\n\t * @param  {number}                     height       Height (px)\r\n\t * @param  {string}                     crossOrigin  Cross-Origin setting\r\n\t * @return {Promise<HTMLImageElement>}               Promise\r\n\t */\r\n\tpublic loadNewImage(url: string, width?: number, height?: number, crossOrigin?: string): Promise<HTMLImageElement> {\r\n\t\treturn new Promise((success, error) => {\r\n\r\n\t\t\t// New image\r\n\t\t\tlet image: HTMLImageElement;\r\n\t\t\tif (width && height) {\r\n\t\t\t\timage = new Image(width, height);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\timage = new Image();\r\n\t\t\t}\r\n\r\n\t\t\t// Set crossorigin\r\n\t\t\tif (crossOrigin) {\r\n\t\t\t\timage.setAttribute(\"crossOrigin\", crossOrigin);\r\n\t\t\t}\r\n\r\n\t\t\t// Rrport success on load\r\n\t\t\timage.onload = () => {\r\n\t\t\t\tsuccess(image);\r\n\t\t\t};\r\n\r\n\t\t\tfunction onerror() {\r\n\r\n\t\t\t\t// Error occurred. Just in case it's the crossOrigin issue, let's try\r\n\t\t\t\t// stripping off this attribute and trying again\r\n\t\t\t\tif (crossOrigin) {\r\n\r\n\t\t\t\t\t// Retain old uri\r\n\t\t\t\t\tlet currentHref = image.src;\r\n\r\n\t\t\t\t\t// Set up another `onerror` to handle situations where image is not\r\n\t\t\t\t\t// loadable at all (i.e. protected by CORS)\r\n\t\t\t\t\timage.onerror = () => {\r\n\t\t\t\t\t\t// Nope, no luck\r\n\t\t\t\t\t\terror(new Error(\"Loading image \\\"\" + url + \"\\\" failed\"));\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t// remove the `crossOrigin` attribute\r\n\t\t\t\t\timage.removeAttribute(\"crossorigin\");\r\n\r\n\t\t\t\t\t// retry\r\n\t\t\t\t\timage.src = \"\";\r\n\t\t\t\t\timage.src = currentHref;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\terror(new Error(\"Loading image \\\"\" + url + \"\\\" failed\"));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Set image error handlers\r\n\t\t\timage.onabort = onerror;\r\n\t\t\timage.onerror = onerror;\r\n\r\n\t\t\t// Trigger load\r\n\t\t\timage.src = url;\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Returns current DOM URL.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {any} URL\r\n\t */\r\n\tpublic getDOMURL(): any {\r\n\t\treturn self.URL || (<any>self).webkitURL || self;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns an SVG representation of the chart.\r\n\t *\r\n\t * This is an asynchronous function. Check the description of `getImage()`\r\n\t * for description and example usage.\r\n\t *\r\n\t * @param {string}             type     Type of the export\r\n\t * @param {IExportSVGOptions}  options  Options\r\n\t * @return {Promise<string>}            Promise\r\n\t */\r\n\tpublic async getSVG(type: \"svg\", options?: IExportSVGOptions): Promise<string> {\r\n\r\n\t\t// Get dimensions\r\n\t\tlet width = this.sprite.pixelWidth,\r\n\t\t\theight = this.sprite.pixelHeight,\r\n\t\t\tfont = this.findFont(this.sprite.dom),\r\n\t\t\tfontSize = this.findFontSize(this.sprite.dom);\r\n\r\n\t\t// Get SVG\r\n\t\tlet svg = this.normalizeSVG(\r\n\t\t\tthis.serializeElement(this.sprite.paper.defs) + this.serializeElement(this.sprite.dom),\r\n\t\t\toptions,\r\n\t\t\twidth,\r\n\t\t\theight,\r\n\t\t\tfont,\r\n\t\t\tfontSize\r\n\t\t);\r\n\t\t// Prep data URI\r\n\t\tlet charset = this.adapter.apply(\"charset\", {\r\n\t\t\tcharset: \"charset=utf-8\",\r\n\t\t\ttype: \"svg\",\r\n\t\t\toptions: options\r\n\t\t}).charset;\r\n\r\n\t\tlet uri = this.adapter.apply(\"getSVG\", {\r\n\t\t\tdata: \"data:\" + this.getContentType(type) + \";\" + charset + \",\" + encodeURIComponent(svg),\r\n\t\t\toptions: options\r\n\t\t}).data;\r\n\r\n\t\treturn uri;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if SVG is fully formatted. Encloses in `<svg>...</svg>` if\r\n\t * necessary.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {string}             svg       Input SVG\r\n\t * @param  {IExportSVGOptions}  options   Options\r\n\t * @param  {number}             width     Width of the SVG viewport\r\n\t * @param  {number}             height    Height of the SVG viewport\r\n\t * @param  {string}             font      Font family to use as a base\r\n\t * @param  {string}             fontSize  Font size to use as a base\r\n\t * @param  {string}             style     A CSS to add as a <style></style> block\r\n\t * @return {string}                       Output SVG\r\n\t * @todo Add style params to existing <svg>\r\n\t */\r\n\tpublic normalizeSVG(svg: string, options?: IExportSVGOptions, width?: number, height?: number, font?: string, fontSize?: string, style?: string): string {\r\n\r\n\t\t// Construct width/height params\r\n\t\tlet dimParams = \"\";\r\n\t\tif (width) {\r\n\t\t\tdimParams += \"width=\\\"\" + width + \"px\\\" \";\r\n\t\t}\r\n\t\tif (height) {\r\n\t\t\tdimParams += \"height=\\\"\" + height + \"px\\\" \";\r\n\t\t}\r\n\r\n\t\t// Apply font settings\r\n\t\tlet styleParams = \"\";\r\n\t\tif (font) {\r\n\t\t\tstyleParams += \"font-family: \" + this.normalizeFonts(font) + \";\";\r\n\t\t}\r\n\t\tif (fontSize) {\r\n\t\t\tstyleParams += \"font-size: \" + fontSize + \";\";\r\n\t\t}\r\n\t\tif (style) {\r\n\t\t\tstyle = \"<style>\" + style + \"</style>\";\r\n\t\t}\r\n\t\telse {\r\n\t\t\tstyle = \"\";\r\n\t\t}\r\n\r\n\t\tconsole.log(styleParams);\r\n\r\n\t\t// Add missing <svg> enclosure\r\n\t\tif (!svg.match(/<svg/)) {\r\n\t\t\tsvg = \"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?><svg \" + dimParams + \" style=\\\"\" + styleParams + \"\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\">\" + style + svg + \"</svg>\";\r\n\t\t}\r\n\t\telse {\r\n\r\n\t\t\tif (dimParams !== \"\") {\r\n\t\t\t\t// Clear current params\r\n\t\t\t\tsvg = svg.replace(/(<svg[^>]*)width=\"[^\"]*\"/, \"$1\");\r\n\t\t\t\tsvg = svg.replace(/(<svg[^>]*)height=\"[^\"]*\"/, \"$1\");\r\n\r\n\t\t\t\t// Add new params\r\n\t\t\t\tsvg = svg.replace(/(<svg)/, \"$1\" + dimParams);\r\n\t\t\t}\r\n\r\n\t\t\t/*if (styleParams !== \"\") {\r\n\t\t\t\t// Clear current params\r\n\t\t\t\tsvg = svg.replace(/(<svg[^>]*)stylewidth=\"[^\"]*\"/, \"$1\");\r\n\t\t\t\tsvg = svg.replace(/(<svg[^>]*)height=\"[^\"]*\"/, \"$1\");\r\n\r\n\t\t\t\t// Add new params\r\n\t\t\t\tsvg = svg.replace(/(<svg)/, \"$1\" + dimParams);\r\n\t\t\t}*/\r\n\t\t}\r\n\r\n\t\tsvg = this.adapter.apply(\"normalizeSVG\", {\r\n\t\t\tdata: svg,\r\n\t\t\toptions: options\r\n\t\t}).data;\r\n\r\n\t\treturn svg;\r\n\t}\r\n\r\n\t/**\r\n\t * [normalizeFonts description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {string} fonts [description]\r\n\t * @return {string}       [description]\r\n\t */\r\n\tpublic normalizeFonts(fonts: string): string {\r\n\t\tlet items = fonts.replace(/\"|'/g, \"\").split(\",\");\r\n\t\titems = items.map((item: string) => {\r\n\t\t\treturn \"'\" + $utils.trim(item) + \"'\";\r\n\t\t});\r\n\t\treturn items.join(\",\");\r\n\t}\r\n\r\n\t/**\r\n\t * Serializes an element and returns its contents.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {HTMLElement | SVGSVGElement}  element  An element to serialize\r\n\t * @return {string}                                A serialized XML\r\n\t */\r\n\tpublic serializeElement(element: HTMLElement | SVGSVGElement | SVGDefsElement): string {\r\n\t\treturn new XMLSerializer().serializeToString(element);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a PDF containing chart image.\r\n\t *\r\n\t * This is an asynchronous function. Check the description of `getImage()`\r\n\t * for description and example usage.\r\n\t *\r\n\t * @param {string}             type     Type of the export\r\n\t * @param {IExportPDFOptions}  options  Options\r\n\t * @return {Promise<string>}            Promise\r\n\t * @async\r\n\t * @todo Account for header when calculating vertical fit\r\n\t */\r\n\tpublic async getPDF(type: \"pdf\", options?: IExportPDFOptions): Promise<string> {\r\n\r\n\t\t// Get image\r\n\t\tlet image = await this.getImage(options.imageFormat || \"png\", options);\r\n\r\n\t\t// Load pdfmake\r\n\t\tlet pdfmake = await this.pdfmake;\r\n\r\n\t\t// Defaults\r\n\t\tlet defaultMargins = [30, 30, 30, 30];\r\n\r\n\t\t// Init content for PDF\r\n\t\tlet doc = {\r\n\t\t\tpageSize: options.pageSize || \"A4\",\r\n\t\t\tpageOrientation: options.pageOrientation || \"portrait\",\r\n\t\t\tpageMargins: options.pageMargins || defaultMargins,\r\n\t\t\t//header: <any>[],\r\n\t\t\tcontent: <any>[]\r\n\t\t};\r\n\r\n\t\t// Should we add title?\r\n\t\tlet title = this.adapter.apply(\"title\", {\r\n\t\t\ttitle: this.title,\r\n\t\t\toptions: options\r\n\t\t}).title;\r\n\r\n\t\tif (title) {\r\n\t\t\tdoc.content.push({\r\n\t\t\t\ttext: title,\r\n\t\t\t\tfontSize: options.fontSize,\r\n\t\t\t\tbold: true,\r\n\t\t\t\tmargin: [0, 0, 0, 15]\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// Add page URL?\r\n\t\tif (options.addURL) {\r\n\t\t\tdoc.content.push({\r\n\t\t\t\ttext: this.language.translate(\"Saved from\") + \": \" + document.location.href,\r\n\t\t\t\tfontSize: options.fontSize,\r\n\t\t\t\tmargin: [0, 0, 0, 15]\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// Add image\r\n\t\tdoc.content.push({\r\n\t\t\timage: image,\r\n\t\t\tfit: this.getPageSizeFit(doc.pageSize, doc.pageMargins)\r\n\t\t});\r\n\r\n\t\t// Apply adapters\r\n\t\tdoc = this.adapter.apply(\"pdfmakeDocument\", {\r\n\t\t\tdoc: doc,\r\n\t\t\toptions: options\r\n\t\t}).doc;\r\n\r\n\t\t// Create PDF\r\n\t\treturn await new Promise<string>((success, error) => {\r\n\t\t\tpdfmake.createPdf(doc).getDataUrl((uri: string) => {\r\n\t\t\t\tsuccess(uri);\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns fit dimensions for available page sizes.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {pageSizes} pageSize Page size\r\n\t * @return {number[]}           `[width, height]` in pixels\r\n\t */\r\n\tpublic getPageSizeFit(pageSize: pageSizes, margins?: number | number[]): number[] {\r\n\r\n\t\t// Check margins\r\n\t\tlet newMargins = [0, 0, 0, 0];\r\n\t\tif (typeof margins == \"number\") {\r\n\t\t\tnewMargins = [margins, margins, margins, margins];\r\n\t\t}\r\n\t\telse if (margins.length == 2) {\r\n\t\t\tnewMargins = [margins[0], margins[1], margins[0], margins[1]];\r\n\t\t}\r\n\t\telse if (margins.length == 4) {\r\n\t\t\tnewMargins = margins;\r\n\t\t}\r\n\r\n\t\t// Define available page sizes\r\n\t\tlet sizes = {\r\n\t\t\t\"4A0\": [4767.87, 6740.79],\r\n\t\t\t\"2A0\": [3370.39, 4767.87],\r\n\t\t\tA0: [2383.94, 3370.39],\r\n\t\t\tA1: [1683.78, 2383.94],\r\n\t\t\tA2: [1190.55, 1683.78],\r\n\t\t\tA3: [841.89, 1190.55],\r\n\t\t\tA4: [595.28, 841.89],\r\n\t\t\tA5: [419.53, 595.28],\r\n\t\t\tA6: [297.64, 419.53],\r\n\t\t\tA7: [209.76, 297.64],\r\n\t\t\tA8: [147.40, 209.76],\r\n\t\t\tA9: [104.88, 147.40],\r\n\t\t\tA10: [73.70, 104.88],\r\n\t\t\tB0: [2834.65, 4008.19],\r\n\t\t\tB1: [2004.09, 2834.65],\r\n\t\t\tB2: [1417.32, 2004.09],\r\n\t\t\tB3: [1000.63, 1417.32],\r\n\t\t\tB4: [708.66, 1000.63],\r\n\t\t\tB5: [498.90, 708.66],\r\n\t\t\tB6: [354.33, 498.90],\r\n\t\t\tB7: [249.45, 354.33],\r\n\t\t\tB8: [175.75, 249.45],\r\n\t\t\tB9: [124.72, 175.75],\r\n\t\t\tB10: [87.87, 124.72],\r\n\t\t\tC0: [2599.37, 3676.54],\r\n\t\t\tC1: [1836.85, 2599.37],\r\n\t\t\tC2: [1298.27, 1836.85],\r\n\t\t\tC3: [918.43, 1298.27],\r\n\t\t\tC4: [649.13, 918.43],\r\n\t\t\tC5: [459.21, 649.13],\r\n\t\t\tC6: [323.15, 459.21],\r\n\t\t\tC7: [229.61, 323.15],\r\n\t\t\tC8: [161.57, 229.61],\r\n\t\t\tC9: [113.39, 161.57],\r\n\t\t\tC10: [79.37, 113.39],\r\n\t\t\tRA0: [2437.80, 3458.27],\r\n\t\t\tRA1: [1729.13, 2437.80],\r\n\t\t\tRA2: [1218.90, 1729.13],\r\n\t\t\tRA3: [864.57, 1218.90],\r\n\t\t\tRA4: [609.45, 864.57],\r\n\t\t\tSRA0: [2551.18, 3628.35],\r\n\t\t\tSRA1: [1814.17, 2551.18],\r\n\t\t\tSRA2: [1275.59, 1814.17],\r\n\t\t\tSRA3: [907.09, 1275.59],\r\n\t\t\tSRA4: [637.80, 907.09],\r\n\t\t\tEXECUTIVE: [521.86, 756.00],\r\n\t\t\tFOLIO: [612.00, 936.00],\r\n\t\t\tLEGAL: [612.00, 1008.00],\r\n\t\t\tLETTER: [612.00, 792.00],\r\n\t\t\tTABLOID: [792.00, 1224.00]\r\n\t\t};\r\n\r\n\t\t// Calculate size\r\n\t\tlet fitSize = sizes[pageSize]\r\n\t\tfitSize[0] -= newMargins[0] + newMargins[2];\r\n\t\tfitSize[1] -= newMargins[1] + newMargins[3];\r\n\t\treturn fitSize;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns an Excel file of chart's data.\r\n\t *\r\n\t * This is an asynchronous function. Check the description of `getImage()`\r\n\t * for description and example usage.\r\n\t *\r\n\t * @param {string}               type     Type of the export\r\n\t * @param {IExportExcelOptions}  options  Options\r\n\t * @return {Promise<string>}              Promise\r\n\t * @async\r\n\t * @todo Handle dates\r\n\t * @todo Support for multi-sheet\r\n\t */\r\n\tpublic async getExcel(type: \"xlsx\", options?: IExportExcelOptions): Promise<string> {\r\n\r\n\t\t// Load xlsx\r\n\t\tlet XLSX = await this.xlsx;\r\n\r\n\t\t// Create workbook options\r\n\t\tlet wbOptions = this.adapter.apply(\"xlsxWorkbookOptions\", {\r\n\t\t\toptions: {\r\n\t\t\t\tbookType: \"xlsx\",\r\n\t\t\t\tbookSST: false,\r\n\t\t\t\ttype: \"base64\"\r\n\t\t\t}\r\n\t\t}).options;\r\n\r\n\t\t// Get sheet name\r\n\t\tlet sheetName = this.normalizeExcelSheetName(this.adapter.apply(\"xlsxSheetName\", {\r\n\t\t\tname: this.title || this.language.translate(\"Data\")\r\n\t\t}).name);\r\n\r\n\t\t// Create a workbook\r\n\t\tlet wb = {\r\n\t\t\tSheetNames: <any>[sheetName],\r\n\t\t\tSheets: <any>{}\r\n\t\t};\r\n\r\n\t\t// Init worksheet data\r\n\t\tlet data = [];\r\n\r\n\t\t// Add column names?\r\n\t\tif (options.addColumnNames) {\r\n\t\t\tdata.push(this.getExcelRow(this.dataFields, options));\r\n\t\t}\r\n\r\n\t\t// Add lines\r\n\t\tfor (let len = this.data.length, i = 0; i < len; i++) {\r\n\t\t\tdata.push(this.getExcelRow(this.data[i], options));\r\n\t\t}\r\n\r\n\t\t// Create sheet and add data\r\n\t\twb.Sheets[sheetName] = XLSX.utils.aoa_to_sheet(data);\r\n\r\n\t\t// Generate data uri\r\n\t\tlet uri = this.adapter.apply(\"getExcel\", {\r\n\t\t\tdata: \"data:\" + this.getContentType(type) + \";base64,\" + XLSX.write(wb, wbOptions),\r\n\t\t\toptions: options\r\n\t\t}).data;\r\n\r\n\t\treturn uri;\r\n\t}\r\n\r\n\t/**\r\n\t * This is needed to work around Excel limitations.\r\n\t *\r\n\t * @param  {string}  name  Source name\r\n\t * @return {string}        Normalized name\r\n\t */\r\n\tprivate normalizeExcelSheetName(name: string): string {\r\n\t\tname = name.replace(/([:\\\\\\/?*\\[\\]]+)/g, \" \");\r\n\t\treturn $utils.truncateWithEllipsis(name, 31, \"...\", true);\r\n\t}\r\n\r\n\t/**\r\n\t * Rertuns an array of values to be used as Excel row.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {any}                  row      Row data\r\n\t * @param  {IExportExcelOptions}  options  Options\r\n\t * @return {any[]}                         Array of values\r\n\t */\r\n\tpublic getExcelRow(row: any, options?: IExportExcelOptions): any[] {\r\n\t\t// Init\r\n\t\tlet items: any[] = [];\r\n\r\n\t\t// Process each row item\r\n\t\t$object.each(row, (key, value) => {\r\n\t\t\titems.push(this.convertDateValue<\"xlsx\">(key, value, options));\r\n\t\t});\r\n\r\n\t\treturn items;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns chart's data formatted as CSV.\r\n\t *\r\n\t * This is an asynchronous function. Check the description of `getImage()`\r\n\t * for description and example usage.\r\n\t *\r\n\t * @param {string}             type     Type of the export\r\n\t * @param {IExportCSVOptions}  options  Options\r\n\t * @return {Promise<string>}            Promise\r\n\t * @async\r\n\t */\r\n\tpublic async getCSV(type: \"csv\", options?: IExportCSVOptions): Promise<string> {\r\n\r\n\t\t// Init output\r\n\t\tlet csv = \"\";\r\n\r\n\t\t// Add rows\r\n\t\tlet br = \"\";\r\n\t\tfor (let len = this.data.length, i = 0; i < len; i++) {\r\n\t\t\tlet row = this.getCSVRow(this.data[i], options);\r\n\t\t\tif (options.reverse) {\r\n\t\t\t\tcsv = row + br + csv;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tcsv += br + row;\r\n\t\t\t}\r\n\t\t\tbr = \"\\n\";\r\n\t\t}\r\n\r\n\t\t// Add column names?\r\n\t\tif (options.addColumnNames) {\r\n\t\t\tcsv = this.getCSVRow(this.dataFields, options) + br + csv;\r\n\t\t}\r\n\r\n\t\t// Add content type\r\n\t\tlet charset = this.adapter.apply(\"charset\", {\r\n\t\t\tcharset: \"charset=utf-8\",\r\n\t\t\ttype: type,\r\n\t\t\toptions: options\r\n\t\t}).charset;\r\n\r\n\t\tlet uri = this.adapter.apply(\"getCSV\", {\r\n\t\t\tdata: \"data:\" + this.getContentType(type) + \";\" + charset + \",\" + encodeURIComponent(csv),\r\n\t\t\toptions: options\r\n\t\t}).data;\r\n\r\n\t\treturn uri;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Formats a row of CSV data.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {any}               row     An object holding data for the row\r\n\t * @param  {IExportCSVOptions} options Options\r\n\t * @return {string}                    Formated CSV line\r\n\t */\r\n\tpublic getCSVRow(row: any, options?: IExportCSVOptions): string {\r\n\r\n\t\t// Init\r\n\t\tlet separator = options.separator || \",\";\r\n\t\tlet items: any[] = [];\r\n\r\n\t\t// Process each row item\r\n\t\t$object.each(row, (key, value) => {\r\n\t\t\t// Convert dates\r\n\t\t\tlet item = this.convertDateValue<\"csv\">(key, value, options);\r\n\r\n\t\t\t// Cast and escape doublequotes\r\n\t\t\titem = \"\" + item;\r\n\t\t\titem = item.replace(/\"/g, '\"\"');\r\n\r\n\t\t\t// Enclose into double quotes\r\n\t\t\tif (options.forceQuotes || (item.search(new RegExp(\"\\\"|\\n|\" + separator, \"g\")) >= 0)) {\r\n\t\t\t\titem = \"\\\"\" + item + \"\\\"\";\r\n\t\t\t}\r\n\r\n\t\t\t// Add to item\r\n\t\t\titems.push(item);\r\n\t\t});\r\n\r\n\t\treturn items.join(separator);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns chart's data in JSON format.\r\n\t *\r\n\t * This is an asynchronous function. Check the description of `getImage()`\r\n\t * for description and example usage.\r\n\t *\r\n\t * @param {string}              type     Type of the export\r\n\t * @param {IExportJSONOptions}  options  Options\r\n\t * @return {Promise<string>}             Promise\r\n\t * @async\r\n\t */\r\n\tpublic async getJSON(type: \"json\", options?: IExportJSONOptions): Promise<string> {\r\n\r\n\t\t// Stringify JSON\r\n\t\tlet json = JSON.stringify(this.data, (key, value) => {\r\n\t\t\tif (typeof value == \"object\") {\r\n\t\t\t\t$object.each(value, (field, item) => {\r\n\t\t\t\t\tvalue[field] = this.convertDateValue<\"json\">(field, item, options);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn value;\r\n\t\t}, options.indent);\r\n\r\n\t\t// Add content type\r\n\t\tlet charset = this.adapter.apply(\"charset\", {\r\n\t\t\tcharset: \"charset=utf-8\",\r\n\t\t\ttype: type,\r\n\t\t\toptions: options\r\n\t\t}).charset;\r\n\r\n\t\tlet uri = this.adapter.apply(\"getJSON\", {\r\n\t\t\tdata: \"data:\" + this.getContentType(type) + \";\" + charset + \",\" + encodeURIComponent(json),\r\n\t\t\toptions: options\r\n\t\t}).data;\r\n\r\n\t\treturn uri;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Converts the value to proper date format.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {string}                                  field    Field name\r\n\t * @param  {any}                                     value    Value\r\n\t * @param  {IExportCSVOptions | IExportJSONOptions}  options  Options\r\n\t * @return {any}                                              Formatted date value or unmodified value\r\n\t */\r\n\tpublic convertDateValue<Key extends \"json\" | \"csv\" | \"xlsx\">(field: string, value: any, options?: IExportOptions[Key]): any {\r\n\r\n\t\t// Is this a timestamp?\r\n\t\tif (typeof value == \"number\" && this.isDateField(field)) {\r\n\t\t\tvalue = new Date(value);\r\n\t\t}\r\n\r\n\t\tif (value instanceof Date) {\r\n\t\t\tif (options.useTimestamps) {\r\n\t\t\t\tvalue = value.getTime();\r\n\t\t\t}\r\n\t\t\telse if (options.useLocale) {\r\n\t\t\t\tvalue = value.toLocaleString();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tvalue = this.dateFormatter.format(value, this.dateFormat);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn value;\r\n\t}\r\n\r\n\t/**\r\n\t * Triggers download of the file.\r\n\t *\r\n\t * This is an asynchronous function. Check the description of `getImage()`\r\n\t * for description and example usage.\r\n\t *\r\n\t * @param  {string}            uri       Data URI with file content\r\n\t * @param  {string}            fileName  File name\r\n\t * @return {Promise<boolean>}            Promise\r\n\t * @async\r\n\t */\r\n\tpublic async download(uri: string, fileName: string): Promise<boolean> {\r\n\r\n\t\t//if (window.navigator.msSaveOrOpenBlob === undefined) {\r\n\t\tif (this.linkDownloadSupport() && !this.blobDownloadSupport()) {\r\n\r\n\t\t\t/**\r\n\t\t\t * For regular browsers, we create a link then simulare click on it\r\n\t\t\t */\r\n\t\t\tlet link = document.createElement(\"a\");\r\n\t\t\tlink.download = fileName;\r\n\t\t\t//uri = uri.replace(/#/g, \"%23\");\r\n\t\t\tlink.href = uri;\r\n\t\t\tdocument.body.appendChild(link);\r\n\t\t\tlink.click();\r\n\t\t\tdocument.body.removeChild(link);\r\n\r\n\t\t}\r\n\t\telse if ($type.hasValue(window.navigator.msSaveBlob)) {\r\n\r\n\t\t\t/**\r\n\t\t\t * For all IEs 10 and up we use native method `msSaveBlob`\r\n\t\t\t */\r\n\r\n\t\t\t// Extract content type and get pure data without headers\r\n\t\t\tlet parts = uri.split(\";\");\r\n\t\t\tlet contentType = parts.shift().replace(/data:/, \"\");\r\n\t\t\turi = decodeURIComponent(parts.join(\";\").replace(/^[^,]*,/, \"\"));\r\n\r\n\t\t\t// Check if we need to Base64-decode\r\n\t\t\tif ([\"image/svg+xml\", \"application/json\", \"text/csv\"].indexOf(contentType) == -1) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tlet decoded = atob(uri);\r\n\t\t\t\t\turi = decoded;\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\t// Error occurred, meaning string was not Base64-encoded. Do nothing.\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Dissect uri into array\r\n\t\t\tlet chars = new Array(uri.length);\r\n\t\t\tfor (let i = 0; i < uri.length; ++i) {\r\n\t\t\t\tlet charCode = uri.charCodeAt(i);\r\n\t\t\t\tchars[i] = charCode;\r\n\t\t\t}\r\n\r\n\t\t\t// Prep Blob and force the download\r\n\t\t\tlet blob = new Blob([new Uint8Array(chars)], { type: contentType });\r\n\t\t\twindow.navigator.msSaveBlob(blob, fileName);\r\n\r\n\t\t}\r\n\t\telse if (this.legacyIE()) {\r\n\r\n\t\t\t/**\r\n\t\t\t * Old IEs (9 and down) we will use an <iframe> trick\r\n\t\t\t */\r\n\r\n\t\t\tlet parts = uri.match(/^data:(.*);[ ]*([^,]*),(.*)$/);\r\n\r\n\t\t\tif (parts.length === 4) {\r\n\t\t\t\t// Base64-encoded or text-based stuff?\r\n\t\t\t\tif (parts[2] == \"base64\") {\r\n\r\n\t\t\t\t\t// Base64-encoded - probably an image\r\n\t\t\t\t\tif (parts[1].match(/^image\\//)) {\r\n\r\n\t\t\t\t\t\t// Yep, an image. Let's create a temporary image placeholder,\r\n\t\t\t\t\t\t// so that user can use do Save As.\r\n\t\t\t\t\t\tthis.showModal(\r\n\t\t\t\t\t\t\t\"<img src=\\\"\" + uri + \"\\\" style=\\\"float: left; max-width: 50%; max-height: 80%; margin: 0 1em 0.5em 0; border: 1px solid #eee;\\\" />\" +\r\n\t\t\t\t\t\t\t\"<p>\" + this.language.translate(\r\n\t\t\t\t\t\t\t\t\"To save the image, right-click thumbnail on the left and choose \\\"Save picture as...\\\"\"\r\n\t\t\t\t\t\t\t) +\r\n\t\t\t\t\t\t\t\"</p>\" +\r\n\t\t\t\t\t\t\t\"<p style=\\\"text-align: center;\\\"><small>\" + this.language.translate(\r\n\t\t\t\t\t\t\t\t\"(Press ESC to close this message)\"\r\n\t\t\t\t\t\t\t) + \"</small></p>\",\r\n\t\t\t\t\t\t\tthis.language.translate(\"Image Export Complete\")\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\r\n\t\t\t\t\t// Text-based\r\n\r\n\t\t\t\t\t// IE9 is trippy about saving files with filenames of the extensions it\r\n\t\t\t\t\t// does not know. Let's use .txt extension for all text-based export\r\n\t\t\t\t\t// formats, except SVG.\r\n\t\t\t\t\tlet contentType;\r\n\t\t\t\t\tif (fileName.match(/\\.svg$/)) {\r\n\t\t\t\t\t\tcontentType = \"image/svg+xml\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tcontentType = \"text/plain\";\r\n\t\t\t\t\t\tfileName += \".txt\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Create temporary iframe\r\n\t\t\t\t\tlet iframe = document.createElement(\"iframe\");\r\n\t\t\t\t\tiframe.width = \"1px\";\r\n\t\t\t\t\tiframe.height = \"1px\"\r\n\t\t\t\t\tiframe.style.display = \"none\";\r\n\t\t\t\t\tdocument.body.appendChild(iframe);\r\n\r\n\t\t\t\t\t// Add our stuff to the document of the iframe and trigger save as\r\n\t\t\t\t\tlet idoc = iframe.contentDocument;\r\n\t\t\t\t\tidoc.open(contentType, \"replace\");\r\n\t\t\t\t\tidoc.charset = parts[2].replace(/charset=/, \"\");\r\n\t\t\t\t\tidoc.write(decodeURIComponent(parts[3]));\r\n\t\t\t\t\tidoc.close();\r\n\t\t\t\t\tidoc.execCommand(\"SaveAs\", true, fileName);\r\n\r\n\t\t\t\t\t// Destroy the iframe\r\n\t\t\t\t\tdocument.body.removeChild(iframe);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns `true` if browser has any supported methods to trigger download\r\n\t * of a binary file.\r\n\t * \r\n\t * @return {boolean} Supports downloads?\r\n\t */\r\n\tpublic downloadSupport(): boolean {\r\n\t\treturn this.linkDownloadSupport() || this.blobDownloadSupport();\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if the browser supports \"download\" attribute on links.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {boolean} Browser supports triggering downloads?\r\n\t */\r\n\tpublic linkDownloadSupport(): boolean {\r\n\t\t// Do we have this cached?\r\n\t\tlet cache = registry.getCache(\"linkDownloadSupport\");\r\n\t\tif (cache === false || cache === true) {\r\n\t\t\treturn cache;\r\n\t\t}\r\n\t\tlet a = document.createElement(\"a\");\r\n\t\tlet res = typeof a.download !== \"undefined\";\r\n\t\tregistry.setCache(\"linkDownloadSupport\", res);\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if the browser supports download via `msBlob`.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {boolean} Browser supports triggering downloads?\r\n\t */\r\n\tpublic blobDownloadSupport(): boolean {\r\n\t\treturn $type.hasValue(window.navigator.msSaveOrOpenBlob);\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if this is a legacy version of IE.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {boolean} IE9 or less?\r\n\t */\r\n\tpublic legacyIE(): boolean {\r\n\t\t// Create a temporary <div> with conditional tags in it an an <i> tag.\r\n\t\t// Count <i>s. If there are some, we have IE9 or late on our hands.\r\n\t\tlet div = document.createElement(\"div\");\r\n\t\tdiv.innerHTML = \"<!--[if lt IE 10]><i></i><![endif]-->\";\r\n\t\treturn div.getElementsByTagName(\"i\").length == 1;\r\n\t}\r\n\r\n\t/**\r\n\t * Initiates print of the chart.\r\n\t *\r\n\t * This is an asynchronous function. Check the description of `getImage()`\r\n\t * for description and example usage.\r\n\t *\r\n\t * @param {string}               data     Data URI for the image\r\n\t * @param {IExportPrintOptions}  options  Options\r\n\t * @param {string}               title    Optional title to use (uses window's title by default)\r\n\t * @return {Promise<boolean>}             Promise\r\n\t * @async\r\n\t */\r\n\tpublic async print(data: string, options?: IExportPrintOptions, title?: string): Promise<boolean> {\r\n\r\n\t\tif (options.printMethod == \"css\") {\r\n\t\t\treturn this.printViaCSS(data, options, title);\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn this.printViaIframe(data, options, title);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tprotected async printViaCSS(data: string, options?: IExportPrintOptions, title?: string): Promise<boolean> {\r\n\t\t// Save current scroll position\r\n\t\tlet scroll = document.documentElement.scrollTop || document.body.scrollTop;\r\n\r\n\t\t// Hide all current nodes of the document and save their current states\r\n\t\t// of `display` style\r\n\t\t/*let states: Array<string> = [];\r\n\t\tlet items = document.body.childNodes;\r\n\t\tfor (let len = items.length, i = 0; i < len; i++) {\r\n\t\t\tlet item = <HTMLElement>items[i];\r\n\t\t\tif ($dom.isElement(item)) {\r\n\t\t\t\tstates[i] = item.style.display;\r\n\t\t\t\titem.style.display = \"none\";\r\n\t\t\t}\r\n\t\t}*/\r\n\r\n\t\t// Hide all document nodes by applyin custom CSS\r\n\t\tlet rule = new StyleRule(\"body > *\", {\r\n\t\t\t\"display\": \"none\",\r\n\t\t\t\"position\": \"fixed\",\r\n\t\t\t\"visibility\": \"hidden\",\r\n\t\t\t\"opacity\": \"0\",\r\n\t\t\t\"clipPath\": \"polygon(0px 0px,0px 0px,0px 0px,0px 0px);\"\r\n\t\t});\r\n\r\n\t\t// Replace title?\r\n\t\tlet originalTitle: string;\r\n\t\tif (title && document && document.title) {\r\n\t\t\toriginalTitle = document.title;\r\n\t\t\tdocument.title = title;\r\n\t\t}\r\n\r\n\t\t// Create and add exported image\r\n\t\tlet img = new Image();\r\n\t\timg.src = data;\r\n\t\timg.style.maxWidth = \"100%\";\r\n\t\timg.style.display = \"block\";\r\n\t\timg.style.position = \"relative\";\r\n\t\timg.style.visibility = \"visible\";\r\n\t\timg.style.opacity = \"1\";\r\n\t\timg.style.clipPath = \"none\";\r\n\t\tdocument.body.appendChild(img);\r\n\r\n\t\t// Print\r\n\t\tthis.setTimeout(() => {\r\n\t\t\t(<any>window).print();\r\n\t\t}, 50);\r\n\r\n\t\t// Delay needs to be at least a second for iOS devices\r\n\t\tlet isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !(<any>window).MSStream;\r\n\t\tif (isIOS && (options.delay < 1000)) {\r\n\t\t\toptions.delay = 1000;\r\n\t\t}\r\n\t\telse if (options.delay < 100) {\r\n\t\t\toptions.delay = 100;\r\n\t\t}\r\n\r\n\t\t// Delay function that resets back the document the way ot was before\r\n\t\tthis.setTimeout(() => {\r\n\r\n\t\t\t// Remove image\r\n\t\t\tdocument.body.removeChild(img);\r\n\r\n\t\t\t// Reset back all elements\r\n\t\t\t/*for (let len = items.length, i = 0; i < len; i++) {\r\n\t\t\t\tlet item = <HTMLElement>items[i];\r\n\t\t\t\tif ($dom.isElement(item)) {\r\n\t\t\t\t\titem.style.display = states[i];\r\n\t\t\t\t}\r\n\t\t\t}*/\r\n\t\t\trule.dispose();\r\n\r\n\t\t\t// Restore title\r\n\t\t\tif (originalTitle) {\r\n\t\t\t\tdocument.title = document.title;\r\n\t\t\t}\r\n\r\n\t\t\t// Scroll back the document the way it was before\r\n\t\t\tdocument.documentElement.scrollTop = document.body.scrollTop = scroll;\r\n\r\n\t\t}, options.delay || 500);\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tprotected async printViaIframe(data: string, options?: IExportPrintOptions, title?: string): Promise<boolean> {\r\n\r\n\t\t// Create an iframe\r\n\t\tlet iframe = document.createElement(\"iframe\");\r\n\t\tiframe.style.visibility = \"hidden\";\r\n\t\tdocument.body.appendChild(iframe);\r\n\r\n\t\t// This is needed for FireFox\r\n\t\tiframe.contentWindow.document.open();\r\n\t\tiframe.contentWindow.document.close();\r\n\r\n\t\t// Create and add exported image\r\n\t\tlet img = new Image();\r\n\t\timg.src = data;\r\n\t\timg.style.maxWidth = \"100%\";\r\n\t\tif (title) {\r\n\t\t\tiframe.contentWindow.document.title = title;\r\n\t\t}\r\n\t\tiframe.contentWindow.document.body.appendChild(img);\r\n\r\n\t\t(<any>iframe).load = function() {\r\n\t\t\tiframe.contentWindow.document.body.appendChild(img);\r\n\t\t};\r\n\r\n\t\t// Print\r\n\t\tthis.setTimeout(() => {\r\n\t\t\ttry {\r\n\t\t\t\tif (!(<any>iframe).contentWindow.document.execCommand(\"print\", false, null)) {\r\n\t\t\t\t\t(<any>iframe).contentWindow.print();\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\t(<any>iframe).contentWindow.print();\r\n\t\t\t}\r\n\t\t}, options.delay || 50);\r\n\r\n\t\t// Delay needs to be at least a second for iOS devices\r\n\t\tlet isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !(<any>window).MSStream;\r\n\t\tif (isIOS && (options.delay < 1000)) {\r\n\t\t\toptions.delay = 1000;\r\n\t\t}\r\n\t\telse if (options.delay < 100) {\r\n\t\t\toptions.delay = 100;\r\n\t\t}\r\n\r\n\t\t// Delay function that resets back the document the way ot was before\r\n\t\tthis.setTimeout(() => {\r\n\r\n\t\t\t// Remove image\r\n\t\t\tdocument.body.removeChild(iframe);\r\n\r\n\t\t}, options.delay + 50 || 100);\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\t/**\r\n\t * Finds a background color for the element. If element is transparent it goes\r\n\t * up the DOM hierarchy to find a parent element that does.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {Element}  element Element\r\n\t * @return {Color}            Color code\r\n\t */\r\n\tpublic findBackgroundColor(element: Element): Color {\r\n\r\n\t\t// Check if element has styles set\r\n\t\tlet opacity = 1, currentColor = \"\";\r\n\t\tif ((<any>element).currentStyle) {\r\n\t\t\tcurrentColor = (<any>element).currentStyle[\"background-color\"];\r\n\t\t}\r\n\t\telse if (window.getComputedStyle) {\r\n\t\t\tcurrentColor = document.defaultView.getComputedStyle(element, null).getPropertyValue(\"background-color\");\r\n\t\t}\r\n\r\n\t\t// Check opacity\r\n\t\tif (currentColor.match(/[^,]*,[^,]*,[^,]*,[ ]?0/) || currentColor == \"transparent\") {\r\n\t\t\topacity = 0;\r\n\t\t}\r\n\r\n\t\tif (opacity == 0) {\r\n\t\t\tlet parent = element.parentElement;// || <Element>element.parentNode;\r\n\r\n\t\t\t// Completely transparent. Look for a parent\r\n\t\t\tif (parent) {\r\n\t\t\t\treturn this.findBackgroundColor(parent);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn color(\"#fff\");\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn color(currentColor, opacity);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a font fmaily name for the element (directly set or\r\n\t * computed/inherited).\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {Element}  element  Element\r\n\t * @return {string}            Font family\r\n\t */\r\n\tpublic findFont(element: Element): string {\r\n\r\n\t\t// Check if element has styles set\r\n\t\tlet font = \"\";\r\n\t\tif ((<any>element).currentStyle) {\r\n\t\t\tfont = (<any>element).currentStyle[\"font-family\"];\r\n\t\t}\r\n\t\telse if (window.getComputedStyle) {\r\n\t\t\tfont = document.defaultView.getComputedStyle(element, null).getPropertyValue(\"font-family\");\r\n\t\t}\r\n\r\n\t\tif (!font) {\r\n\t\t\t// Completely transparent. Look for a parent\r\n\t\t\tlet parent = element.parentElement || <Element>element.parentNode;\r\n\t\t\tif (parent) {\r\n\t\t\t\treturn this.findFont(parent);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn font;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a font fmaily name for the element (directly set or\r\n\t * computed/inherited).\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {Element}  element  Element\r\n\t * @return {string}            Font family\r\n\t */\r\n\tpublic findFontSize(element: Element): string {\r\n\r\n\t\t// Check if element has styles set\r\n\t\tlet font = \"\";\r\n\t\tif ((<any>element).currentStyle) {\r\n\t\t\tfont = (<any>element).currentStyle[\"font-size\"];\r\n\t\t}\r\n\t\telse if (window.getComputedStyle) {\r\n\t\t\tfont = document.defaultView.getComputedStyle(element, null).getPropertyValue(\"font-size\");\r\n\t\t}\r\n\r\n\t\tif (!font) {\r\n\t\t\t// Completely transparent. Look for a parent\r\n\t\t\tlet parent = element.parentElement || <Element>element.parentNode;\r\n\t\t\tif (parent) {\r\n\t\t\t\treturn this.findFont(parent);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn font;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * [getFontDataURIs description]\r\n\t * @param  {string} fonts [description]\r\n\t * @return {string}       [description]\r\n\t */\r\n\tprivate async getFontDataURIs(fonts: string): Promise<string> {\r\n\r\n\t\tlet items = fonts.split(\",\");\r\n\t\tlet output: string[] = [];\r\n\t\tlet font;\r\n\t\twhile (font = items.pop()) {\r\n\t\t\tfont = $utils.trim(font);\r\n\t\t}\r\n\r\n\t\t// Assemble a list of external font files\r\n\t\tfor (let i = 0; i < document.styleSheets.length; i++) {\r\n\t\t\tlet sheet = <CSSStyleSheet>document.styleSheets[i];\r\n\t\t\tfor (let x = 0; x < sheet.rules.length; x++) {\r\n\t\t\t\tlet rule = sheet.rules[x];\r\n\t\t\t\tif (rule instanceof CSSImportRule) {\r\n\t\t\t\t\tlet css = await $net.load(rule.href);\r\n\t\t\t\t\tif (css.response) {\r\n\t\t\t\t\t\t//console.log(css.response);\r\n\t\t\t\t\t\tlet urls = css.response.match(/url\\(([^\\)]*)\\)/g);\r\n\t\t\t\t\t\tfor (let y = 0; y < urls.length; y++) {\r\n\t\t\t\t\t\t\tlet url = urls[y];\r\n\t\t\t\t\t\t\tlet urlContent = await $net.load(url.replace(/url\\(([^\\)]*)\\)/g, \"$1\"));\r\n\t\t\t\t\t\t\tlet dataURI = btoa(unescape(encodeURIComponent((urlContent.response))));\r\n\t\t\t\t\t\t\tcss.response = css.response.replace(url, \"src(data:font/woff2;base64,\" + dataURI + \")\");\r\n\t\t\t\t\t\t\t//console.log(dataURI);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\titems.push(css.response);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn items.join(\"\\r\\n\");\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * A reference to a container to be used to place [[ExportMenu]] in.\r\n\t *\r\n\t * @param {HTMLElement} value Reference\r\n\t */\r\n\tpublic set container(value: HTMLElement) {\r\n\t\tthis._container = value;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {HTMLElement} Reference\r\n\t */\r\n\tpublic get container(): HTMLElement {\r\n\t\treturn this.adapter.apply(\"container\", {\r\n\t\t\tcontainer: this._container\r\n\t\t}).container;\r\n\t}\r\n\r\n\t/**\r\n\t * A reference to [[Sprite]] to export. Can be any Sprite, including some\r\n\t * internal elements.\r\n\t *\r\n\t * @param {Sprite} value Sprite\r\n\t */\r\n\tpublic set sprite(value: Sprite) {\r\n\t\tthis._sprite = value;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Sprite} Sprite\r\n\t */\r\n\tpublic get sprite(): Sprite {\r\n\t\treturn this.adapter.apply(\"sprite\", {\r\n\t\t\tsprite: this._sprite\r\n\t\t}).sprite;\r\n\t}\r\n\r\n\t/**\r\n\t * Data to export.\r\n\t *\r\n\t * @param {any} value Data\r\n\t */\r\n\tpublic set data(value: any) {\r\n\t\tthis._data = value;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {any} Data\r\n\t */\r\n\tpublic get data(): any {\r\n\t\treturn this.adapter.apply(\"data\", {\r\n\t\t\tdata: this._data\r\n\t\t}).data;\r\n\t}\r\n\r\n\t/**\r\n\t * Data fields in `{ field: fieldName }` format. Those are used for\r\n\t * exporting in data formats to name the columns.\r\n\t *\r\n\t * @param {any} value Field names\r\n\t */\r\n\tpublic set dataFields(value: any) {\r\n\t\tthis._dataFields = value;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {any} Field names `{ field: fieldName }`\r\n\t */\r\n\tpublic get dataFields(): any {\r\n\t\tif (!this._dataFields) {\r\n\t\t\tthis.generateDataFields();\r\n\t\t}\r\n\t\treturn this.adapter.apply(\"dataFields\", {\r\n\t\t\tdataFields: this._dataFields\r\n\t\t}).dataFields;\r\n\t}\r\n\r\n\t/**\r\n\t * A [[DateFormatter]] to use when formatting dates when exporting data.\r\n\t *\r\n\t * @param {any} value DateFormatter instance\r\n\t */\r\n\tpublic set dateFormatter(value: any) {\r\n\t\tthis._dateFormatter = value;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {any} A DateFormatter instance\r\n\t */\r\n\tpublic get dateFormatter(): any {\r\n\t\tif (!this._dateFormatter) {\r\n\t\t\tthis._dateFormatter = new DateFormatter();\r\n\t\t}\r\n\t\treturn this.adapter.apply(\"dateFormatter\", {\r\n\t\t\tdateFormatter: this._dateFormatter\r\n\t\t}).dateFormatter;\r\n\t}\r\n\r\n\t/**\r\n\t * A date format to use for exporting dates. Will use [[DateFormatter]]\r\n\t * format if not set.\r\n\t *\r\n\t * @param {string} value Date format\r\n\t */\r\n\tpublic set dateFormat(value: string) {\r\n\t\tthis._dateFormat = value;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {string} Date format\r\n\t */\r\n\tpublic get dateFormat(): string {\r\n\t\treturn this.adapter.apply(\"dateFormat\", {\r\n\t\t\tdateFormat: this._dateFormat\r\n\t\t}).dateFormat;\r\n\t}\r\n\r\n\t/**\r\n\t * A list of fields that hold date values.\r\n\t *\r\n\t * @param {List<string>} value Date field list\r\n\t */\r\n\tpublic set dateFields(value: List<string>) {\r\n\t\tthis._dateFields = value;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {List<string>} Date field list\r\n\t */\r\n\tpublic get dateFields(): List<string> {\r\n\t\tif (!this._dateFields) {\r\n\t\t\tthis._dateFields = new List<string>();\r\n\t\t}\r\n\t\treturn this.adapter.apply(\"dateFields\", {\r\n\t\t\tdateFields: this._dateFields\r\n\t\t}).dateFields;\r\n\t}\r\n\r\n\t/**\r\n\t * Generates data fields out of the first row of data.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic generateDataFields(): void {\r\n\t\tthis._dataFields = {};\r\n\t\tif (this.data.length) {\r\n\t\t\tlet row = this.data[0];\r\n\t\t\t$object.each(row, (key, value) => {\r\n\t\t\t\tthis._dataFields[key] = this.adapter.apply(\"dataFieldName\", {\r\n\t\t\t\t\tname: key,\r\n\t\t\t\t\tfield: key\r\n\t\t\t\t}).name;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Cheks against `dateFields` property to determine if this field holds\r\n\t * dates.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {string}        field   Field name\r\n\t * @param  {IExportOptions} options Options\r\n\t * @return {boolean}               `true` if it's a date field\r\n\t */\r\n\tpublic isDateField(field: string): boolean {\r\n\t\treturn this.adapter.apply(\"isDateField\", {\r\n\t\t\tisDateField: this.dateFields.contains(field),\r\n\t\t\tfield: field\r\n\t\t}).isDateField;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns proper content type for the export type.\r\n\t *\r\n\t * @param  {string}  type  Export format/type\r\n\t * @return {string}        Proper content type, i.e. \"image/jpeg\"\r\n\t */\r\n\tpublic getContentType<Key extends keyof IExportOptions>(type: Key): string {\r\n\r\n\t\tlet contentType = \"\";\r\n\t\tswitch (type) {\r\n\t\t\tcase \"png\":\r\n\t\t\tcase \"gif\":\r\n\t\t\t\tcontentType = \"image/\" + type;\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"jpg\":\r\n\t\t\t\tcontentType = \"image/jpeg\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"svg\":\r\n\t\t\t\tcontentType = \"image/svg+xml\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"csv\":\r\n\t\t\t\tcontentType = \"text/csv\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"json\":\r\n\t\t\t\tcontentType = \"application/json\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"pdf\":\r\n\t\t\t\tcontentType = \"application/pdf\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"xlsx\":\r\n\t\t\t\tcontentType = \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\";\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn this.adapter.apply(\"contentType\", {\r\n\t\t\tcontentType: contentType,\r\n\t\t\ttype: type\r\n\t\t}).contentType;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * A file prefix to be used for all exported formats.\r\n\t *\r\n\t * Export will apply format-related extension to it. E.g. if this is set to\r\n\t * \"myExport\", the file name of the PNG exported image will be \"myExport.png\".\r\n\t *\r\n\t * @param {string} value File prefix\r\n\t */\r\n\tpublic set filePrefix(value: string) {\r\n\t\tthis._filePrefix = value;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {string} File prefix\r\n\t */\r\n\tpublic get filePrefix(): string {\r\n\t\treturn this.adapter.apply(\"filePrefix\", {\r\n\t\t\tfilePrefix: this._filePrefix\r\n\t\t}).filePrefix;\r\n\t}\r\n\r\n\t/**\r\n\t * A background color to be used for exported images. If set, this will\r\n\t * override the automatically acquired background color.\r\n\t *\r\n\t * @param {Color} value Color\r\n\t */\r\n\tpublic set backgroundColor(value: Color) {\r\n\t\tthis._backgroundColor = value;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Color} Background color\r\n\t */\r\n\tpublic get backgroundColor(): Color {\r\n\t\treturn this.adapter.apply(\"backgroundColor\", {\r\n\t\t\tbackgroundColor: this._backgroundColor\r\n\t\t}).backgroundColor;\r\n\t}\r\n\r\n\t/**\r\n\t * A title to be used when printing.\r\n\t *\r\n\t * @param {string} value Title\r\n\t */\r\n\tpublic set title(value: string) {\r\n\t\tthis._title = value;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {string} Title\r\n\t */\r\n\tpublic get title(): string {\r\n\t\treturn this.adapter.apply(\"title\", {\r\n\t\t\ttitle: this._title\r\n\t\t}).title;\r\n\t}\r\n\r\n\t/**\r\n\t * Displays a preloader/exporting indicator.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Add ability to change text\r\n\t */\r\n\tpublic showPreloader(): void {\r\n\t\tlet preloader = this.preloader;\r\n\t\tif (preloader) {\r\n\t\t\tpreloader.progress = 0.5;\r\n\t\t\tpreloader.label.text = \"...\";\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Hides preloader/exporting indicator\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic hidePreloader(): void {\r\n\t\tlet preloader = this.preloader;\r\n\t\tif (preloader) {\r\n\t\t\tpreloader.progress = 1;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a an instance of [[Preloader]] associated with the Sprite being\r\n\t * exported.\r\n\t *\r\n\t * @return {Preloader} Preloader\r\n\t */\r\n\tpublic get preloader(): Preloader {\r\n\t\treturn this._sprite && this._sprite.parent && this._sprite.parent.preloader ?\r\n\t\t\tthis._sprite.parent.preloader :\r\n\t\t\tundefined;\r\n\t}\r\n\r\n\t/**\r\n\t * Displays a modal saying export is taking longer than expected.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic showTimeout(): void {\r\n\t\tthis.showModal(\r\n\t\t\tthis.adapter.apply(\"timeoutMessage\", {\r\n\t\t\t\tmessage: this.language.translate(\"Export operation took longer than expected. Something might have gone wrong.\")\r\n\t\t\t}).message\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * Hides preloader/exporting indicator.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic hideTimeout(): void {\r\n\t\tif (this._timeoutTimeout) {\r\n\t\t\tthis.removeDispose(this._timeoutTimeout);\r\n\t\t\tthis._timeoutTimeout = null;\r\n\t\t}\r\n\t\tthis.hideModal();\r\n\t}\r\n\r\n\t/**\r\n\t * A [[Language]] instance to be used for translations.\r\n\t *\r\n\t * @param {Language} value An instance of [[Language]]\r\n\t */\r\n\tpublic set language(value: Language) {\r\n\t\tthis._language = value;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Language} A [[Language]] instance to be used\r\n\t */\r\n\tpublic get language(): Language {\r\n\t\tif (!this._language) {\r\n\t\t\tthis._language = new Language();\r\n\t\t}\r\n\r\n\t\treturn this._language;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns (and creates) [[Modal]].\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {Modal} Modal instance\r\n\t */\r\n\tpublic get modal(): Modal {\r\n\t\tif (!this._modal) {\r\n\t\t\tthis._modal = new Modal();\r\n\r\n\t\t\t// Prefix with Sprite's class name\r\n\t\t\tthis._modal.adapter.add(\"classPrefix\", (value) => {\r\n\t\t\t\tvalue = options.classNamePrefix + value;\r\n\t\t\t\treturn value;\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn this._modal;\r\n\t}\r\n\r\n\t/**\r\n\t * Shows [[Modal]] with specific text.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {string} text Modal contents\r\n\t */\r\n\tpublic showModal(text: string, title?: string): void {\r\n\r\n\t\t// Hide previous modal and preloader\r\n\t\tthis.hideModal();\r\n\t\tthis.hidePreloader();\r\n\r\n\t\t// Create modal\r\n\t\tlet modal = this.modal;\r\n\t\tmodal.container = this.sprite.svgContainer.SVGContainer;\r\n\t\tmodal.content = text;\r\n\t\tmodal.readerTitle = title;\r\n\t\tmodal.show();\r\n\t}\r\n\r\n\t/**\r\n\t * Hides modal window if one's currently open.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic hideModal(): void {\r\n\t\tif (this._modal) {\r\n\t\t\tthis.modal.hide();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Loads Fabric dynamic module.\r\n\t *\r\n\t * This is an asynchronous function. Check the description of `getImage()`\r\n\t * for description and example usage.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {Promise<any>} Instance of Fabric\r\n\t * @async\r\n\t */\r\n\tprivate async _fabric(): Promise<any> {\r\n\t\treturn await import(/* webpackChunkName: \"fabric\" */ \"../../fabric/fabric\");\r\n\t}\r\n\r\n\t/**\r\n\t * Returns Fabric instance.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {Promise<any>} Instance of Fabric\r\n\t */\r\n\tpublic get fabric(): Promise<any> {\r\n\t\treturn this._fabric();\r\n\t}\r\n\r\n\t/**\r\n\t * Loads pdfmake dynamic module\r\n\t *\r\n\t * This is an asynchronous function. Check the description of `getImage()`\r\n\t * for description and example usage.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {Promise<any>} Instance of pdfmake\r\n\t * @async\r\n\t */\r\n\tprivate async _pdfmake(): Promise<any> {\r\n\t\tlet a = await Promise.all([\r\n\t\t\timport(/* webpackChunkName: \"pdfmake\" */ \"pdfmake/build/pdfmake.js\"),\r\n\t\t\timport(/* webpackChunkName: \"pdfmake\" */ \"pdfmake/build/vfs_fonts.js\")\r\n\t\t]);\r\n\t\tlet pdfmake = a[0];\r\n\t\tlet vfs_fonts = a[1];\r\n\t\tpdfmake.vfs = vfs_fonts.pdfMake.vfs;\r\n\t\treturn pdfmake;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns pdfmake instance.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {Promise<any>} Instance of pdfmake\r\n\t */\r\n\tpublic get pdfmake(): Promise<any> {\r\n\t\treturn this._pdfmake();\r\n\t}\r\n\r\n\t/**\r\n\t * Loads xlsx dynamic module.\r\n\t *\r\n\t * This is an asynchronous function. Check the description of `getImage()`\r\n\t * for description and example usage.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {Promise<any>} Instance of pdfmake\r\n\t * @async\r\n\t */\r\n\tprivate async _xlsx(): Promise<any> {\r\n\t\treturn await import(/* webpackChunkName: \"xlsx\" */ \"xlsx\");\r\n\t}\r\n\r\n\t/**\r\n\t * Returns xlsx instance.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {Promise<any>} Instance of pdfmake\r\n\t */\r\n\tpublic get xlsx(): Promise<any> {\r\n\t\treturn this._xlsx();\r\n\t}\r\n\r\n\t/**\r\n\t * Sets options for a format.\r\n\t *\r\n\t * @type {Key}\r\n\t */\r\n\tpublic setFormatOptions<Key extends keyof IExportOptions>(type: Key, options: IExportOptions[Key]): void {\r\n\t\tthis._formatOptions.setKey(type, options);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns current options for a format.\r\n\t */\r\n\tpublic getFormatOptions<Key extends keyof IExportOptions>(type: Key): IExportOptions[Key] {\r\n\t\treturn this._formatOptions.getKey(type);\r\n\t}\r\n\r\n\t/**\r\n * Disables interactivity on parent chart.\r\n */\r\n\tprotected _disablePointers(): void {\r\n\t\tif (!$type.hasValue(this._spriteInteractionsEnabled)) {\r\n\t\t\tthis._spriteInteractionsEnabled = this.sprite.interactionsEnabled;\r\n\t\t}\r\n\t\tthis.sprite.interactionsEnabled = false;\r\n\t}\r\n\r\n\t/**\r\n\t * Releases temporarily disabled pointers on parent chart.\r\n\t */\r\n\tprotected _releasePointers(): void {\r\n\t\tif ($type.hasValue(this._spriteInteractionsEnabled)) {\r\n\t\t\tthis.sprite.interactionsEnabled = this._spriteInteractionsEnabled;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Processes JSON-based config before it is applied to the object.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {object}  config  Config\r\n\t */\r\n\tpublic processConfig(config?: { [index: string]: any }): void {\r\n\r\n\t\tregistry.registeredClasses[\"ExportMenu\"] = ExportMenu;\r\n\r\n\t\tif (config) {\r\n\r\n\t\t\t// Set up menu\r\n\t\t\tif ($type.hasValue(config.menu) && !$type.hasValue(config.menu.type)) {\r\n\t\t\t\tconfig.menu.type = \"ExportMenu\";\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tsuper.processConfig(config);\r\n\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/export/Export.ts","/**\r\n * ExportMenu provides functionality for building Export menu\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport exportCSS from \"./ExportCSS\";\r\nimport { IExportOptions } from \"./Export\";\r\nimport { Adapter } from \"../utils/Adapter\";\r\nimport { List } from \"../utils/List\";\r\nimport { Align } from \"../defs/Align\";\r\nimport { VerticalAlign } from \"../defs/VerticalAlign\";\r\nimport { getInteraction } from \"../interaction/Interaction\";\r\nimport { InteractionObject } from \"../interaction/InteractionObject\";\r\nimport { EventDispatcher, AMEvent } from \"../utils/EventDispatcher\";\r\nimport { IDisposer, MutableValueDisposer } from \"../utils/Disposer\";\r\nimport { Language, ILocaleProperties } from \"../utils/Language\";\r\nimport { Validatable } from \"../utils/Validatable\";\r\nimport { keyboard, KeyboardKeys } from \"../utils/Keyboard\";\r\nimport * as $utils from \"../utils/Utils\";\r\nimport * as $iter from \"../utils/Iterator\";\r\nimport * as $dom from \"../utils/DOM\";\r\nimport * as $type from \"../utils/Type\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Export menu item interface.\r\n */\r\nexport interface IExportMenuItem {\r\n\r\n\t/**\r\n\t * Item type, usually an export format.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\ttype?: keyof IExportOptions;\r\n\r\n\t/**\r\n\t * Label to display in the menu.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tlabel?: string;\r\n\r\n\t/**\r\n\t * Export format. (optional)\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tformat?: string;\r\n\r\n\t/**\r\n\t * Menu item options.\r\n\t *\r\n\t * @see {@link IExportOptions}\r\n\t * @type {Object}\r\n\t */\r\n\toptions?: IExportOptions[keyof IExportOptions];\r\n\r\n\t/**\r\n\t * Priority.\r\n\t *\r\n\t * The items in Export menu will be sorted by their priority in ascending\r\n\t * order.\r\n\t *\r\n\t * @ignore Exclude from docs (this feature is not yet implemented)\r\n\t * @type {number}\r\n\t */\r\n\tpriority?: number;\r\n\r\n\t/**\r\n\t * An array of [[IExportMenuItem]] items, to construct a sub-menu out of.\r\n\t *\r\n\t * An Export menu can have any number of nesting levels.\r\n\t *\r\n\t * @type {Array<IExportMenuItem>}\r\n\t */\r\n\tmenu?: Array<IExportMenuItem>;\r\n\r\n\t/**\r\n\t * If this is set to true, it means that this specific menu item is not\r\n\t * supported by the current client system.\r\n\t *\r\n\t * This is usually populated by [[Export]]'s `supported` Adapter.\r\n\t *\r\n\t * @see {@link IExportAdapters}\r\n\t * @type {boolean}\r\n\t */\r\n\tunsupported?: boolean\r\n\r\n\t/**\r\n\t * An [[InteractionObject]] representation of the menu item.\r\n\t *\r\n\t * @type {InteractionObject}\r\n\t */\r\n\tinteractions?: InteractionObject;\r\n\r\n\t/**\r\n\t * Holds list of parent menu items to this item.\r\n\t */\r\n\tascendants?: List<IExportMenuItem>;\r\n\r\n\t/**\r\n\t * Holds timeout reference.\r\n\t *\r\n\t * Used to delay auto-closing of the menu when it is no longer hovered.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IDisposer}\r\n\t */\r\n\tcloseTimeout?: IDisposer;\r\n\r\n}\r\n\r\n/**\r\n * Defines [[ExportMenu]] events.\r\n */\r\nexport interface IExportMenuEvents {\r\n\r\n\t/**\r\n\t * Invoked when menu item is clicked/tapped.\r\n\t */\r\n\thit: {\r\n\t\tbranch: IExportMenuItem;\r\n\t\tevent: MouseEvent | TouchEvent;\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when menu item is hovered.\r\n\t */\r\n\tover: {\r\n\t\tbranch: IExportMenuItem;\r\n\t\tevent: MouseEvent | TouchEvent;\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when menu item is no longer hovered.\r\n\t */\r\n\tout: {\r\n\t\tbranch: IExportMenuItem;\r\n\t\tevent: MouseEvent | TouchEvent;\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when ENTER key is pressed when certain menu item is in focus.\r\n\t *\r\n\t * @type {KeyboardEvent}\r\n\t */\r\n\tenter: {\r\n\t\tbranch: IExportMenuItem;\r\n\t\tevent: KeyboardEvent;\r\n\t}\r\n\r\n\t/**\r\n\t * Invoked when menu branch is selected. (either by hover or keyboard)\r\n\t */\r\n\tbranchselected: {\r\n\t\tbranch: IExportMenuItem;\r\n\t}\r\n\r\n\t/**\r\n\t * Invoked when menu branch is unselected.\r\n\t */\r\n\tbranchunselected: {\r\n\t\tbranch: IExportMenuItem;\r\n\t}\r\n\r\n\t/**\r\n\t * Invoked when menu is closed.\r\n\t */\r\n\tclosed: {};\r\n\r\n}\r\n\r\n/**\r\n * Represents a list of available adapters for Export\r\n */\r\nexport interface IExportMenuAdapters {\r\n\r\n\titems: {\r\n\t\titems: Array<IExportMenuItem>\r\n\t},\r\n\r\n\tmenuElement: {\r\n\t\tmenuElement: HTMLElement\r\n\t},\r\n\r\n\tbranch: {\r\n\t\tbranch: IExportMenuItem,\r\n\t\tlevel: number\r\n\t},\r\n\r\n\trederLabel: {\r\n\t\tlabel: string,\r\n\t\tbranch: IExportMenuItem\r\n\t},\r\n\r\n\tmenuClass: {\r\n\t\tclassName: string,\r\n\t\tlevel: number\r\n\t},\r\n\r\n\titemClass: {\r\n\t\tclassName: string,\r\n\t\tlevel: number,\r\n\t\ttype: keyof IExportOptions\r\n\t},\r\n\r\n\tlabelClass: {\r\n\t\tclassName: string,\r\n\t\tlevel: number,\r\n\t\ttype: keyof IExportOptions\r\n\t},\r\n\r\n\tmenuTag: {\r\n\t\ttag: string\r\n\t},\r\n\r\n\titemTag: {\r\n\t\ttag: string\r\n\t},\r\n\r\n\tlabelTag: {\r\n\t\ttag: string\r\n\t},\r\n\r\n\talign: {\r\n\t\talign: Align\r\n\t},\r\n\r\n\tverticalAlign: {\r\n\t\tverticalAlign: VerticalAlign\r\n\t},\r\n\r\n\tclassPrefix: {\r\n\t\tclassPrefix: string\r\n\t},\r\n\r\n\tdefaultStyles: {\r\n\t\tdefaultStyles: boolean\r\n\t},\r\n\r\n\ttabindex: {\r\n\t\ttabindex: number\r\n\t}\r\n\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Creates a menu for Export operations.\r\n *\r\n * To add an export menu to a chart, set this to a new instance of\r\n * [[ExportMenu]].\r\n *\r\n * ```TypeScript\r\n * chart.exporting.menu = new am4core.ExportMenu();\r\n * ```\r\n * ```JavaScript\r\n * chart.exporting.menu = new am4core.ExportMenu();\r\n * ```\r\n * ```JSON\r\n * {\r\n *   // ...\r\n *   \"exporting\": {\r\n *     \"menu\": {}\r\n *   }\r\n * }\r\n * ```\r\n * @important\r\n */\r\nexport class ExportMenu extends Validatable {\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IExportMenuEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IExportMenuEvents;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IExportAdapters}\r\n\t */\r\n\tpublic _adapter!: IExportMenuAdapters;\r\n\r\n\t/**\r\n\t * An [[Adapter]].\r\n\t *\r\n\t * @type {Adapter<ExportMenu, IExportMenuAdapters>}\r\n\t */\r\n\tpublic adapter: Adapter<ExportMenu, IExportMenuAdapters> = new Adapter<ExportMenu, IExportMenuAdapters>(this);\r\n\r\n\t/**\r\n\t * How many milliseconds to hold menu/sub-menu open after it loses focus or\r\n\t * hover, before auto-closing it.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tpublic closeDelay: number = 1000;\r\n\r\n\t/**\r\n\t * An instance of [[Language]].\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {MutableValueDisposer<Language>}\r\n\t */\r\n\tprotected _language = new MutableValueDisposer<Language>();\r\n\r\n\t/**\r\n\t * Reference to DOM element that holds Export menu.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {HTMLElement}\r\n\t */\r\n\tprotected _container: HTMLElement;\r\n\r\n\t/**\r\n\t * Menu element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {HTMLElement}\r\n\t */\r\n\tprotected _element: HTMLElement;\r\n\r\n\t/**\r\n\t * Currently selected menu item.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IExportMenuItem}\r\n\t */\r\n\tprotected _currentSelection: IExportMenuItem;\r\n\r\n\t/**\r\n\t * What HTML tags to use to build menu.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {string}\r\n\t */\r\n\tprotected _menuTag: \"ul\" | \"div\" = \"ul\";\r\n\r\n\t/**\r\n\t * Which tag to use to enclose individual menu items.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {string}\r\n\t */\r\n\tprotected _itemTag: \"li\" | \"div\" = \"li\";\r\n\r\n\t/**\r\n\t * Tag to wrap menu item labels in.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {string}\r\n\t */\r\n\tprotected _labelTag: \"a\" = \"a\";\r\n\r\n\t/**\r\n\t * Prefix for class names applied to menu elements.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {string}\r\n\t */\r\n\tprotected _classPrefix: string = \"amexport\";\r\n\r\n\t/**\r\n\t * If set to `true` [[ExportMenu]] will load it's own external CSS when\r\n\t * instantiated.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {boolean}\r\n\t */\r\n\tprotected _defaultStyles: boolean = true;\r\n\r\n\t/**\r\n\t * Horizontal positioning.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Align}\r\n\t */\r\n\tprotected _align: Align = \"right\";\r\n\r\n\t/**\r\n\t * Vertical positioning.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {VerticalAlign}\r\n\t */\r\n\tprotected _verticalAlign: VerticalAlign = \"top\";\r\n\r\n\t/**\r\n\t * A tabindex to apply to Export Menu.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {number}\r\n\t */\r\n\tprotected _tabindex: number = 0;\r\n\r\n\t/**\r\n\t * Whether next menu close event should be ignored.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {boolean}\r\n\t */\r\n\tprotected _ignoreNextClose: boolean = false;\r\n\r\n\t/**\r\n\t * Default menu items.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Array<IExportMenuItem>}\r\n\t */\r\n\tprotected _items: Array<IExportMenuItem> = [\r\n\t\t{\r\n\t\t\t\"label\": \"...\",\r\n\t\t\t\"menu\": [\r\n\t\t\t\t{\r\n\t\t\t\t\t\"label\": \"Image\",\r\n\t\t\t\t\t\"menu\": [\r\n\t\t\t\t\t\t{ \"type\": \"png\", \"label\": \"PNG\" },\r\n\t\t\t\t\t\t{ \"type\": \"jpg\", \"label\": \"JPG\" },\r\n\t\t\t\t\t\t{ \"type\": \"gif\", \"label\": \"GIF\" },\r\n\t\t\t\t\t\t{ \"type\": \"svg\", \"label\": \"SVG\" },\r\n\t\t\t\t\t\t{ \"type\": \"pdf\", \"label\": \"PDF\" }\r\n\t\t\t\t\t]\r\n\t\t\t\t}, {\r\n\t\t\t\t\t\"label\": \"Data\",\r\n\t\t\t\t\t\"menu\": [\r\n\t\t\t\t\t\t{ \"type\": \"json\", \"label\": \"JSON\" },\r\n\t\t\t\t\t\t{ \"type\": \"csv\", \"label\": \"CSV\" },\r\n\t\t\t\t\t\t{ \"type\": \"xlsx\", \"label\": \"XLSX\" }\r\n\t\t\t\t\t]\r\n\t\t\t\t}, {\r\n\t\t\t\t\t\"label\": \"Print\", \"type\": \"print\"\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t];\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"ExportMenu\";\r\n\t\tthis._disposers.push(this._language);\r\n\t\tthis.invalidate();\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * (Re)draws the Export menu.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic validate(): void {\r\n\t\tthis.draw();\r\n\t\tsuper.validate();\r\n\t}\r\n\r\n\t/**\r\n\t * Draws the menu based on current items.\r\n\t *\r\n\t * Normally, there's no need to call this explicitly. The chart, if it has\r\n\t * export menu enabled, will automatically draw the menu.\r\n\t */\r\n\tpublic draw(): void {\r\n\r\n\t\t// Create top-level menu item, or clear it\r\n\t\tif (!this._element) {\r\n\t\t\tthis._element = this.createMenuElement(0);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis._element.innerHTML = \"\";\r\n\t\t\tthis._element.className = this.getMenuItemClass(0);\r\n\t\t}\r\n\r\n\t\t// See if we're loading external CSS\r\n\t\t// Hide it until CSS is loaded\r\n\t\tif (this.defaultStyles) {\r\n\t\t\tthis._element.style.display = \"none\";\r\n\t\t}\r\n\r\n\t\t// Append to container\r\n\t\tthis._container.appendChild(this._element);\r\n\r\n\t\t// Apply adapter to menu items before processing\r\n\t\tthis._items = this.adapter.apply(\"items\", {\r\n\t\t\titems: this._items\r\n\t\t}).items;\r\n\r\n\t\tfor (let len = this._items.length, i = 0; i < len; i++) {\r\n\t\t\tthis.drawBranch(this._element, this._items[i], 0);\r\n\t\t}\r\n\r\n\t\t// Apply adapter to finalized menu element\r\n\t\tthis._element = this.adapter.apply(\"menuElement\", {\r\n\t\t\tmenuElement: this._element\r\n\t\t}).menuElement;\r\n\r\n\t\t// Set up global \"down\" event\r\n\t\tthis._disposers.push(getInteraction().body.events.on(\"down\", (ev) => {\r\n\t\t\tif (!ev.pointer.touch) {\r\n\t\t\t\tthis._ignoreNextClose = false;\r\n\t\t\t}\r\n\t\t\tthis.close();\r\n\t\t}));\r\n\r\n\t\t// Set up global event on ESC press to close the menu\r\n\t\tthis._disposers.push(getInteraction().body.events.on(\"keyup\", (ev) => {\r\n\t\t\tlet key = keyboard.getEventKey(ev.event);\r\n\t\t\tswitch (key) {\r\n\t\t\t\tcase \"esc\":\r\n\t\t\t\t\tthis.close();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"up\":\r\n\t\t\t\tcase \"down\":\r\n\t\t\t\tcase \"left\":\r\n\t\t\t\tcase \"right\":\r\n\t\t\t\t\tthis.moveSelection(key);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\tif (this.defaultStyles) {\r\n\t\t\tthis.loadDefaultCSS();\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a new branch in export menu. This function is recursive for\r\n\t * building multi-level menus.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {HTMLElement}     container Container to put branch elements in\r\n\t * @param {IExportMenuItem} branch    Menu item\r\n\t * @param {number}          level     Current nesting level\r\n\t */\r\n\tprotected drawBranch(container: HTMLElement, branch: IExportMenuItem, level: number): void {\r\n\r\n\t\t// Apply adapter\r\n\t\tbranch = this.adapter.apply(\"branch\", {\r\n\t\t\tbranch: branch,\r\n\t\t\tlevel: level\r\n\t\t}).branch;\r\n\r\n\t\t// Unsupported?\r\n\t\t// ExportMenu does not check or know for specific browser/system\r\n\t\t// capabilities. It must happen in some other code and applied via Adapter.\r\n\t\t// Export itself will check compatibility, but there might be other plugins\r\n\t\t// that influence it or even add any specific export functionality.\r\n\t\tif (branch.unsupported === true) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Init ascendants\r\n\t\tif (!branch.ascendants) {\r\n\t\t\tbranch.ascendants = new List<IExportMenuItem>();\r\n\t\t}\r\n\r\n\t\t// Get type\r\n\t\tlet type: keyof IExportOptions | undefined | null = branch.type;\r\n\r\n\t\t// Create an item\r\n\t\tlet element = this.createItemElement(level, type);\r\n\r\n\t\t// Create label\r\n\t\tlet label = this.createLabelElement(level, type);\r\n\t\tlabel.innerHTML = (branch.label ? this.language.translate(<keyof ILocaleProperties>branch.label) : \"\");\r\n\r\n\t\t// Apply reader text to label\r\n\t\tlet readerLabel = this.getReaderLabel(branch, label.innerHTML);\r\n\t\tlabel.setAttribute(\"aria-label\", readerLabel);\r\n\r\n\t\t// Add Label\r\n\t\telement.appendChild(label);\r\n\r\n\t\t// Create interaction object\r\n\t\t// TODO clean this up when it's disposed\r\n\t\tbranch.interactions = getInteraction().getInteraction(label);\r\n\r\n\t\t// Create interaction manager we can set event listeners to\r\n\t\tif (this.typeClickable(type)) {\r\n\t\t\t//branch.interactions.clickable = true;\r\n\t\t\t// TODO clean this up when it's disposed\r\n\t\t\tbranch.interactions.events.on(\"hit\", (ev) => {\r\n\t\t\t\tif (this.events.isEnabled(\"hit\")) {\r\n\t\t\t\t\tconst event: AMEvent<this, IExportMenuEvents>[\"hit\"] = {\r\n\t\t\t\t\t\t\"type\": \"hit\",\r\n\t\t\t\t\t\t\"event\": ev.event,\r\n\t\t\t\t\t\t\"target\": this,\r\n\t\t\t\t\t\t\"branch\": branch\r\n\t\t\t\t\t};\r\n\t\t\t\t\tthis.events.dispatchImmediately(\"hit\", event);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// TODO clean this up when it's disposed\r\n\t\t\tbranch.interactions.events.on(\"keyup\", (ev) => {\r\n\t\t\t\tif (keyboard.isKey(ev.event, \"enter\")) {\r\n\t\t\t\t\tif (this.events.isEnabled(\"enter\")) {\r\n\t\t\t\t\t\tconst event: AMEvent<this, IExportMenuEvents>[\"enter\"] = {\r\n\t\t\t\t\t\t\t\"type\": \"enter\",\r\n\t\t\t\t\t\t\t\"event\": ev.event,\r\n\t\t\t\t\t\t\t\"target\": this,\r\n\t\t\t\t\t\t\t\"branch\": branch\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tthis.events.dispatchImmediately(\"enter\", event);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// Add ENTER event to open sub-menus\r\n\t\tif (this.hasSubMenu(branch)) {\r\n\t\t\t// TODO clean this up when it's disposed\r\n\t\t\tbranch.interactions.events.on(\"keyup\", (ev) => {\r\n\t\t\t\tif (keyboard.isKey(ev.event, \"enter\")) {\r\n\t\t\t\t\t// This is item has sub-menu, activate the first child on ENTER\r\n\t\t\t\t\tthis.selectBranch(branch.menu[0]);\r\n\r\n\t\t\t\t\t// Attempt to set focus\r\n\t\t\t\t\tthis.setFocus(branch.menu[0]);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// Add events\r\n\t\t// TODO clean this up when it's disposed\r\n\t\tbranch.interactions.events.on(\"over\", (ev) => {\r\n\t\t\tif (ev.pointer.touch) {\r\n\t\t\t\t// Cancel pending menu closure\r\n\t\t\t\tthis._ignoreNextClose = true;\r\n\t\t\t}\r\n\r\n\t\t\tthis.selectBranch(branch);\r\n\r\n\t\t\tif (this.events.isEnabled(\"over\")) {\r\n\t\t\t\tconst event: AMEvent<this, IExportMenuEvents>[\"over\"] = {\r\n\t\t\t\t\t\"type\": \"over\",\r\n\t\t\t\t\t\"event\": ev.event,\r\n\t\t\t\t\t\"target\": this,\r\n\t\t\t\t\t\"branch\": branch\r\n\t\t\t\t};\r\n\t\t\t\tthis.events.dispatchImmediately(\"over\", event);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// TODO clean this up when it's disposed\r\n\t\tbranch.interactions.events.on(\"out\", (ev) => {\r\n\t\t\tif (!ev.pointer.touch) {\r\n\t\t\t\tthis.delayUnselectBranch(branch);\r\n\t\t\t}\r\n\t\t\tif (this.events.isEnabled(\"out\")) {\r\n\t\t\t\tconst event: AMEvent<this, IExportMenuEvents>[\"out\"] = {\r\n\t\t\t\t\t\"type\": \"out\",\r\n\t\t\t\t\t\"event\": ev.event,\r\n\t\t\t\t\t\"target\": this,\r\n\t\t\t\t\t\"branch\": branch\r\n\t\t\t\t};\r\n\t\t\t\tthis.events.dispatchImmediately(\"out\", event);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// TODO clean this up when it's disposed\r\n\t\tbranch.interactions.events.on(\"focus\", (ev) => {\r\n\t\t\tthis.selectBranch(branch);\r\n\t\t});\r\n\r\n\t\t// TODO clean this up when it's disposed\r\n\t\tbranch.interactions.events.on(\"blur\", (ev) => {\r\n\t\t\tthis.delayUnselectBranch(branch);\r\n\t\t});\r\n\r\n\t\t// Increment level\r\n\t\tlet local_level = level + 1;\r\n\r\n\t\t// Has sub-menu?\r\n\t\tif (branch.menu) {\r\n\t\t\tlet submenu = this.createMenuElement(local_level);\r\n\t\t\tfor (let len = branch.menu.length, i = 0; i < len; i++) {\r\n\t\t\t\tbranch.menu[i].ascendants = new List<IExportMenuItem>();\r\n\t\t\t\tif (branch.ascendants.length) {\r\n\t\t\t\t\tbranch.menu[i].ascendants.copyFrom(branch.ascendants);\r\n\t\t\t\t}\r\n\t\t\t\tbranch.menu[i].ascendants.push(branch);\r\n\t\t\t\tthis.drawBranch(submenu, branch.menu[i], local_level);\r\n\t\t\t}\r\n\r\n\t\t\t// Sub-menu is empty (all items are not supported)\r\n\t\t\t// Do not draw this menu item at all\r\n\t\t\tif (submenu.innerHTML == \"\") {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\telement.appendChild(submenu);\r\n\t\t}\r\n\r\n\t\t// Append to container\r\n\t\tcontainer.appendChild(element);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a menu element to hold its elements in. Usually it's an `<ul>`\r\n\t * tag.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {number}       level  Current nesting level\r\n\t * @return {HTMLElement}         HTML element reference\r\n\t */\r\n\tpublic createMenuElement(level: number): HTMLElement {\r\n\t\tlet element: HTMLElement = document.createElement(this.menuTag);\r\n\t\telement.className = this.getMenuItemClass(level);\r\n\r\n\t\t// Accessibility\r\n\t\tif (level === 0) {\r\n\t\t\telement.setAttribute(\"role\", \"menu\");\r\n\t\t}\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t * Generates a class name for the menu element based on its nesting level.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {number}  level  Current nesting level\r\n\t * @return {string}         Class name(s)\r\n\t */\r\n\tpublic getMenuItemClass(level: number): string {\r\n\t\tlet className = this.classPrefix + \"-menu \" + this.classPrefix + \"-menu-level-\" + level;\r\n\t\tif (level === 0) {\r\n\t\t\tclassName += \" \" + this.classPrefix + \"-menu-root \" +\r\n\t\t\t\tthis.classPrefix + \"-\" + this.align + \" \" +\r\n\t\t\t\tthis.classPrefix + \"-\" + this.verticalAlign;\r\n\t\t}\r\n\t\treturn this.adapter.apply(\"menuClass\", {\r\n\t\t\tclassName: className,\r\n\t\t\tlevel: level\r\n\t\t}).className;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates menu item. Usually `<li>` tag. Its label and sub-elements will go\r\n\t * into this element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {number}       level  Current nesting level\r\n\t * @param  {string}       type   Type of the menu item\r\n\t * @return {HTMLElement}         HTML element reference\r\n\t */\r\n\tpublic createItemElement(level: number, type?: keyof IExportOptions): HTMLElement {\r\n\t\tlet element: HTMLElement = document.createElement(this.itemTag);\r\n\t\tlet className = this.classPrefix + \"-item \" + this.classPrefix\r\n\t\t\t+ \"-item-level-\" + level\r\n\t\t\t+ \" \" + this.classPrefix + \"-item-\" + (type || \"blank\");\r\n\t\telement.className = this.adapter.apply(\"itemClass\", {\r\n\t\t\tclassName: className,\r\n\t\t\tlevel: level,\r\n\t\t\ttype: type\r\n\t\t}).className;\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a \"label\" part of the menu item. It could be text or any HTML\r\n\t * content.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {number}       level  Current nesting level\r\n\t * @param  {string}       type   Type of the menu item\r\n\t * @return {HTMLElement}         An HTML Element\r\n\t */\r\n\tpublic createLabelElement(level: number, type?: keyof IExportOptions): HTMLElement {\r\n\t\tlet element: HTMLElement = document.createElement(this.labelTag);\r\n\t\tlet className = this.classPrefix + \"-label \" + this.classPrefix\r\n\t\t\t+ \"-label-level-\" + level\r\n\t\t\t+ \" \" + this.classPrefix + \"-item-\" + (type || \"blank\");\r\n\t\tif (this.typeClickable(type)) {\r\n\t\t\tclassName += \" \" + this.classPrefix + \"-clickable\";\r\n\t\t}\r\n\t\telement.className = this.adapter.apply(\"labelClass\", {\r\n\t\t\tclassName: className,\r\n\t\t\tlevel: level,\r\n\t\t\ttype: type\r\n\t\t}).className;\r\n\r\n\t\t// Accessible navigation\r\n\t\telement.setAttribute(\"tabindex\", this.tabindex.toString());\r\n\t\telement.setAttribute(\"role\", \"menuitem\");\r\n\t\treturn element;\r\n\t}\r\n\r\n\t/**\r\n\t * Destroys the menu and all its elements.\r\n\t */\r\n\tpublic dispose(): void {\r\n\t\tif (!this._disposed) {\r\n\t\t\tsuper.dispose();\r\n\t\t\tthis._element\r\n\t\t\t\t&& this._element.parentNode\r\n\t\t\t\t&& this._element.parentNode.removeChild(this._element);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Checks whether menu item type is supposed to be clickable.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {string}   type  Menu item type\r\n\t * @return {boolean}        Is clickable?\r\n\t */\r\n\tpublic typeClickable(type: keyof IExportOptions | undefined | null): type is keyof IExportOptions {\r\n\t\treturn $type.hasValue(type);\r\n\t}\r\n\r\n\t/**\r\n\t * Checks whether menu item has any sub-items.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {IExportMenuItem}  branch  A menu item\r\n\t * @return {boolean}                  Has sub-items?\r\n\t */\r\n\tpublic hasSubMenu(branch: IExportMenuItem): boolean {\r\n\t\treturn (branch.menu && branch.menu.length) ? true : false;\r\n\t}\r\n\r\n\t/**\r\n\t * Generates and returns an applicable label to be used for screen readers.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {IExportMenuItem}  item   A menu item instance\r\n\t * @param  {string}           label  Current label\r\n\t * @return {string}                  Reader text\r\n\t */\r\n\tpublic getReaderLabel(branch: IExportMenuItem, label: string): string {\r\n\r\n\t\t// Strip any HTML from the label\r\n\t\tlabel = $utils.stripTags(label);\r\n\r\n\t\t// Add textual note if the branch is clickable\r\n\t\tif (this.hasSubMenu(branch)) {\r\n\t\t\tlabel += \" [\" + this.language.translate(\"Click, tap or press ENTER to open\") + \"]\";\r\n\t\t}\r\n\t\telse if (branch.type == \"print\") {\r\n\t\t\tlabel = this.language.translate(\"Click, tap or press ENTER to print.\");\r\n\t\t}\r\n\t\telse if (this.typeClickable(branch.type)) {\r\n\t\t\tlabel = this.language.translate(\"Click, tap or press ENTER to export as %1.\", null, label);\r\n\t\t}\r\n\r\n\t\treturn this.adapter.apply(\"rederLabel\", {\r\n\t\t\tlabel: label,\r\n\t\t\tbranch: branch\r\n\t\t}).label;\r\n\t}\r\n\r\n\t/**\r\n\t * Getters and setters\r\n\t */\r\n\r\n\t/**\r\n\t * An HTML container to place the Menu in.\r\n\t *\r\n\t * A container must be an HTML element, because menu itself is HTML, and\r\n\t * cannot be placed into SVG.\r\n\t *\r\n\t * @param {HTMLElement} container Reference to container element\r\n\t * @todo Check if menu is already build. If it is, just move it to a new container\r\n\t */\r\n\tpublic set container(container: HTMLElement) {\r\n\t\tthis._container = container;\r\n\t\tthis.invalidate();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {HTMLElement} Container\r\n\t */\r\n\tpublic get container(): HTMLElement {\r\n\t\treturn this._container;\r\n\t}\r\n\r\n\t/**\r\n\t * A list of menu items. Can be nested.\r\n\t *\r\n\t * @param {Array<IExportMenuItem>}  items  Menu items\r\n\t */\r\n\tpublic set items(items: Array<IExportMenuItem>) {\r\n\t\tthis._items = items;\r\n\t\tthis.invalidate();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Array<IExportMenuItem>} Menu items\r\n\t */\r\n\tpublic get items(): Array<IExportMenuItem> {\r\n\t\treturn this._items;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets main menu tag to place menu in.\r\n\t *\r\n\t * This also sets up how menu items are built.\r\n\t *\r\n\t * If you set this to \"ul\", menu items will be wrapped into `<li>` tags.\r\n\t *\r\n\t * If set to \"div\", menu items will be wrapped in `<div>` tags.\r\n\t *\r\n\t * @default \"ul\"\r\n\t * @param {\"ul\" | \"div\"} tag Tag to use for menu\r\n\t */\r\n\tpublic set tag(tag: \"ul\" | \"div\") {\r\n\t\tthis._menuTag = tag;\r\n\t\tthis._itemTag = tag == \"ul\" ? \"li\" : \"div\";\r\n\t\tthis.invalidate();\r\n\t}\r\n\r\n\t/**\r\n\t * Returns current menu tag.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {string} Menu tag (item that contains sub-items)\r\n\t */\r\n\tpublic get menuTag(): string {\r\n\t\treturn this.adapter.apply(\"menuTag\", {\r\n\t\t\ttag: this._menuTag\r\n\t\t}).tag;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns tag to wrap items into.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {string} Item tag\r\n\t */\r\n\tpublic get itemTag(): string {\r\n\t\treturn this.adapter.apply(\"itemTag\", {\r\n\t\t\ttag: this._itemTag\r\n\t\t}).tag;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns menu label tag.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {string} Label tag\r\n\t */\r\n\tpublic get labelTag(): string {\r\n\t\treturn this.adapter.apply(\"labelTag\", {\r\n\t\t\ttag: this._labelTag\r\n\t\t}).tag;\r\n\t}\r\n\r\n\t/**\r\n\t * A horizontal alignment for the menu placement.\r\n\t *\r\n\t * @param {Align} value Horizontal alignment\r\n\t */\r\n\tpublic set align(value: Align) {\r\n\t\tthis._align = value;\r\n\t\tthis.invalidate();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Align} Horizontal alignment\r\n\t */\r\n\tpublic get align(): Align {\r\n\t\treturn this.adapter.apply(\"align\", {\r\n\t\t\talign: this._align\r\n\t\t}).align;\r\n\t}\r\n\r\n\t/**\r\n\t * A vertical alignment for the menu placement.\r\n\t *\r\n\t * @param {VerticalAlign} value Vertical alignment\r\n\t */\r\n\tpublic set verticalAlign(value: VerticalAlign) {\r\n\t\tthis._verticalAlign = value;\r\n\t\tthis.invalidate();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {VerticalAlign} Vertical alignment\r\n\t */\r\n\tpublic get verticalAlign(): VerticalAlign {\r\n\t\treturn this.adapter.apply(\"verticalAlign\", {\r\n\t\t\tverticalAlign: this._verticalAlign\r\n\t\t}).verticalAlign;\r\n\t}\r\n\r\n\t/**\r\n\t * Class name prefix.\r\n\t *\r\n\t * @default \"amexport\"\r\n\t * @param {string} value Class name prefix\r\n\t */\r\n\tpublic set classPrefix(value: string) {\r\n\t\tthis._classPrefix = value;\r\n\t\tthis.invalidate();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {string} Class name prefix\r\n\t */\r\n\tpublic get classPrefix(): string {\r\n\t\treturn this.adapter.apply(\"classPrefix\", {\r\n\t\t\tclassPrefix: this._classPrefix\r\n\t\t}).classPrefix;\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether [[ExportMenu]] should load external CSS to style itself.\r\n\t *\r\n\t * If set to `false`, the menu will not be styled, and will rely on some\r\n\t * external CSS.\r\n\t *\r\n\t * @default true\r\n\t * @param {string} Should ExportMenu load its own CSS?\r\n\t */\r\n\tpublic set defaultStyles(value: boolean) {\r\n\t\tif (this._defaultStyles != value) {\r\n\t\t\tthis._defaultStyles = value;\r\n\t\t\tif (value) {\r\n\t\t\t\tthis.loadDefaultCSS();\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.invalidate();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Should ExportMenu load its own CSS?\r\n\t */\r\n\tpublic get defaultStyles(): boolean {\r\n\t\treturn this.adapter.apply(\"defaultStyles\", {\r\n\t\t\tdefaultStyles: this._defaultStyles\r\n\t\t}).defaultStyles;\r\n\t}\r\n\r\n\t/**\r\n\t * Loads the default CSS.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic loadDefaultCSS(): void {\r\n\t\tthis._disposers.push(exportCSS(this.classPrefix));\r\n\t\tthis._element.style.display = \"\";\r\n\t}\r\n\r\n\t/**\r\n\t * A tab index for the menu.\r\n\t *\r\n\t * Tab index will influence the order in which elements on the chart and\r\n\t * the whole page are selected when pressing TAB key.\r\n\t *\r\n\t * @param {number} value Tab index\r\n\t */\r\n\tpublic set tabindex(value: number) {\r\n\t\tthis._tabindex = value;\r\n\t\tthis.invalidate();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Tab index\r\n\t */\r\n\tpublic get tabindex(): number {\r\n\t\treturn this.adapter.apply(\"tabindex\", {\r\n\t\t\ttabindex: this._tabindex\r\n\t\t}).tabindex;\r\n\t}\r\n\r\n\t/**\r\n\t * A [[Language]] instance.\r\n\t *\r\n\t * @param {Language} value An instance of [[Language]]\r\n\t */\r\n\tpublic set language(value: Language) {\r\n\t\tthis._language.set(value, value.events.on(\"localechanged\", (ev) => {\r\n\t\t\tthis.invalidate();\r\n\t\t}));\r\n\t\tthis.invalidate();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Language} A [[Language]] instance to be used\r\n\t */\r\n\tpublic get language(): Language {\r\n\t\tlet language = this._language.get();\r\n\r\n\t\tif (language == null) {\r\n\t\t\tlanguage = new Language();\r\n\r\n\t\t\t// TODO code duplication with `set language()`\r\n\t\t\tthis._language.set(language, language.events.on(\"localechanged\", (ev) => {\r\n\t\t\t\tthis.invalidate();\r\n\t\t\t}));\r\n\t\t}\r\n\r\n\t\treturn language;\r\n\t}\r\n\r\n\t/**\r\n\t * Controlling the menu\r\n\t */\r\n\r\n\t/**\r\n\t * Removes all active classes from menu items. Useful on touch devices and\r\n\t * keyboard navigation where open menu can be closed instantly by clicking or\r\n\t * tapping outside it.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic close(): void {\r\n\t\tif (this._ignoreNextClose) {\r\n\t\t\tthis._ignoreNextClose = false;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this._currentSelection) {\r\n\t\t\tthis.setBlur(this._currentSelection);\r\n\t\t\tthis._currentSelection = undefined;\r\n\t\t}\r\n\t\tlet items = this._element.getElementsByClassName(\"active\");\r\n\t\tfor (let len = items.length, i = len - 1; i >= 0; i--) {\r\n\t\t\tif (items[i]) {\r\n\t\t\t\t$dom.removeClass(<HTMLElement>items[i], \"active\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.events.dispatchImmediately(\"closed\", {\r\n\t\t\ttype: \"closed\",\r\n\t\t\ttarget: this\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Selects a branch in the menu.\r\n\t *\r\n\t * Handles closing of currently open branch.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {IExportMenuItem} branch Branch to select\r\n\t */\r\n\tpublic selectBranch(branch: IExportMenuItem): void {\r\n\r\n\t\t// Cancel previous closure\r\n\t\tif (branch.closeTimeout) {\r\n\t\t\tthis.removeDispose(branch.closeTimeout);\r\n\t\t\tbranch.closeTimeout = null;\r\n\t\t}\r\n\r\n\t\t// Add active class\r\n\t\t$dom.addClass(branch.interactions.element.parentElement, \"active\");\r\n\r\n\t\t// Remove current selection\r\n\t\tif (this._currentSelection && this._currentSelection !== branch) {\r\n\t\t\t$iter.each($iter.concat($iter.fromArray([this._currentSelection]), this._currentSelection.ascendants.iterator()), (ascendant) => {\r\n\t\t\t\tif (!branch.ascendants.contains(ascendant) && branch !== ascendant) {\r\n\t\t\t\t\tthis.unselectBranch(ascendant, true);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// Select and/or cancel timeout for current ascendants\r\n\t\t$iter.each(branch.ascendants.iterator(), (ascendant) => {\r\n\t\t\tif (ascendant.closeTimeout) {\r\n\t\t\t\tthis.removeDispose(ascendant.closeTimeout);\r\n\t\t\t\tascendant.closeTimeout = null;\r\n\t\t\t}\r\n\t\t\t$dom.addClass(ascendant.interactions.element.parentElement, \"active\");\r\n\t\t});\r\n\r\n\t\t// Log current selection\r\n\t\tthis._currentSelection = branch;\r\n\r\n\t\t// Invoke event\r\n\t\tif (this.events.isEnabled(\"branchselected\")) {\r\n\t\t\tconst event: AMEvent<this, IExportMenuEvents>[\"branchselected\"] = {\r\n\t\t\t\ttype: \"branchselected\",\r\n\t\t\t\ttarget: this,\r\n\t\t\t\tbranch: branch\r\n\t\t\t};\r\n\t\t\tthis.events.dispatchImmediately(\"branchselected\", event);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Unselects a branch. Also selects a branch one level up if necessary.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {IExportMenuItem} branch Branch to unselect\r\n\t * @param {boolean}         simple If `true`, only the branch will be unselected without selecting parent branch\r\n\t */\r\n\tpublic unselectBranch(branch: IExportMenuItem, simple?: boolean): void {\r\n\r\n\t\t// Remove active class\r\n\t\t$dom.removeClass(branch.interactions.element.parentElement, \"active\");\r\n\r\n\t\t// Remove current selection\r\n\t\tif (this._currentSelection == branch) {\r\n\t\t\tthis._currentSelection = undefined;\r\n\t\t}\r\n\r\n\t\t// Invoke event\r\n\t\tif (this.events.isEnabled(\"branchunselected\")) {\r\n\t\t\tconst event: AMEvent<this, IExportMenuEvents>[\"branchunselected\"] = {\r\n\t\t\t\ttype: \"branchunselected\",\r\n\t\t\t\ttarget: this,\r\n\t\t\t\tbranch: branch\r\n\t\t\t};\r\n\t\t\tthis.events.dispatchImmediately(\"branchunselected\", event);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Delay unselection of a branch. This can still be cancelled in some other\r\n\t * place if the branch or its children regain focus.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {IExportMenuItem} branch Branch to unselect\r\n\t * @param {boolean}         simple If `true`, only the branch will be unselected without selecting parent branch\r\n\t */\r\n\tpublic delayUnselectBranch(branch: IExportMenuItem, simple?: boolean): void {\r\n\r\n\t\t// Schedule branch unselection\r\n\t\tif (branch.closeTimeout) {\r\n\t\t\tthis.removeDispose(branch.closeTimeout);\r\n\t\t\tbranch.closeTimeout = null;\r\n\t\t}\r\n\t\tbranch.closeTimeout = this.setTimeout(() => {\r\n\t\t\tthis.unselectBranch(branch, simple);\r\n\t\t}, this.closeDelay);\r\n\r\n\t\t// Schedule unselection of all ascendants\r\n\t\t// In case focus went away from the export menu altogether, this will ensure\r\n\t\t// that all items will be closed.\r\n\t\t// In case we're jumping to other menu item, those delayed unselections will\r\n\t\t// be cancelled by `selectBranch`\r\n\t\tif (simple !== true) {\r\n\t\t\t$iter.each(branch.ascendants.iterator(), (ascendant) => {\r\n\t\t\t\tthis.delayUnselectBranch(ascendant, true);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Navigates the menu based on which direction kayboard key was pressed.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {KeyboardKeys} key A key that was pressed\r\n\t */\r\n\tpublic moveSelection(key: KeyboardKeys): void {\r\n\r\n\t\t// Check if there's a current selection\r\n\t\tif (!this._currentSelection) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tlet newSelection: IExportMenuItem;\r\n\r\n\t\tif (key == \"up\") {\r\n\t\t\t// Try moving up in current menu list, or to the last item if already\r\n\t\t\t// at the top\r\n\t\t\tnewSelection = this.getPrevSibling(this._currentSelection);\r\n\t\t}\r\n\t\telse if (key == \"down\") {\r\n\t\t\t// Try moving down in current menu list, or to the top item if already\r\n\t\t\t// at the bottom\r\n\t\t\tnewSelection = this.getNextSibling(this._currentSelection);\r\n\t\t}\r\n\t\telse if ((key == \"left\" && this.align == \"right\") || (key == \"right\" && this.align == \"left\")) {\r\n\t\t\t// Go one level-deeper\r\n\t\t\tif (this.hasSubMenu(this._currentSelection)) {\r\n\t\t\t\tnewSelection = this._currentSelection.menu[0]\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if ((key == \"right\" && this.align == \"right\") || (key == \"left\" && this.align == \"left\")) {\r\n\t\t\t// Go one level-deeper\r\n\t\t\tnewSelection = this.getParentItem(this._currentSelection);\r\n\t\t}\r\n\r\n\t\tif (newSelection && newSelection !== this._currentSelection) {\r\n\t\t\tthis.selectBranch(newSelection);\r\n\t\t\tthis.setFocus(newSelection);\r\n\t\t\tthis._currentSelection = newSelection;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns all siblings of a menu item, including this same menu item.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {IExportMenuItem}         branch  Menu item\r\n\t * @return {Array<IExportMenuItem>}          List of sibling menu items\r\n\t */\r\n\tpublic getSiblings(branch: IExportMenuItem): Array<IExportMenuItem> {\r\n\t\tlet parent = this.getParentItem(branch);\r\n\t\treturn parent ? parent.menu : [];\r\n\t}\r\n\r\n\t/**\r\n\t * Returns menu items parent item.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {IExportMenuItem}  branch  Menu item\r\n\t * @return {IExportMenuItem}          Parent menu item\r\n\t */\r\n\tpublic getParentItem(branch: IExportMenuItem): IExportMenuItem {\r\n\t\tif (branch.ascendants.length) {\r\n\t\t\treturn branch.ascendants.getIndex(branch.ascendants.length - 1);\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns next sibling in the same menu branch. If there is no next sibling,\r\n\t * the first one is returned. If there is just one item, that item is\r\n\t * returned. Unsupported menu items are skipped.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {IExportMenuItem}  branch  Menu item to search siblings for\r\n\t * @return {IExportMenuItem}          Menu item\r\n\t */\r\n\tpublic getNextSibling(branch: IExportMenuItem): IExportMenuItem {\r\n\t\tlet siblings = this.getSiblings(branch);\r\n\t\tif (siblings.length > 1) {\r\n\t\t\tlet next = siblings.indexOf(branch) + 1;\r\n\t\t\tnext = siblings.length == next ? 0 : next;\r\n\t\t\treturn siblings[next].unsupported ? this.getNextSibling(siblings[next]) : siblings[next];\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn branch;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns previous sibling in the same menu branch. If there is no next\r\n\t * sibling, the first one is returned. If there is just one item, that item is\r\n\t * returned. Unsupported menu items are skipped.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {IExportMenuItem}  branch  Menu item to search siblings for\r\n\t * @return {IExportMenuItem}          Menu item\r\n\t */\r\n\tpublic getPrevSibling(branch: IExportMenuItem): IExportMenuItem {\r\n\t\tlet siblings = this.getSiblings(branch);\r\n\t\tif (siblings.length > 1) {\r\n\t\t\tlet prev = siblings.indexOf(branch) - 1;\r\n\t\t\tprev = prev == -1 ? siblings.length - 1 : prev;\r\n\t\t\treturn siblings[prev].unsupported ? this.getPrevSibling(siblings[prev]) : siblings[prev];\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn branch;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Attempts to set focus on particular menu element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {IExportMenuItem} branch Menu item\r\n\t */\r\n\tpublic setFocus(branch: IExportMenuItem): void {\r\n\t\t(<HTMLElement>branch.interactions.element).focus();\r\n\t}\r\n\r\n\t/**\r\n\t * Attempts to remove focus from the menu element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {IExportMenuItem} branch Menu item\r\n\t */\r\n\tpublic setBlur(branch: IExportMenuItem): void {\r\n\t\t(<HTMLElement>branch.interactions.element).blur();\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/export/ExportMenu.ts","/**\r\n * A collection of network-related functions\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport * as $type from \"./Type\";\r\n\r\n/**\r\n * Defines an interface for objects that hold a net request result.\r\n */\r\nexport interface INetLoadResult<A> {\r\n\r\n\t/**\r\n\t * A reference to original [[XMLHttpRequest]].\r\n\t * \r\n\t * @type {XMLHttpRequest}\r\n\t */\r\n\txhr: XMLHttpRequest;\r\n\r\n\t/**\r\n\t * Request response body.\r\n\t * \r\n\t * @type {string}\r\n\t */\r\n\tresponse: string;\r\n\r\n\t/**\r\n\t * Response `Content-Type`.\r\n\t * \r\n\t * @type {string}\r\n\t */\r\n\ttype: string | null;\r\n\r\n\t/**\r\n\t * Was there an error?\r\n\t * \r\n\t * @type {boolean}\r\n\t */\r\n\terror: boolean;\r\n\r\n\t/**\r\n\t * A target object that made the net load request.\r\n\t * \r\n\t * @type {A}\r\n\t */\r\n\ttarget?: A;\r\n\r\n}\r\n\r\nexport interface INetRequestOptions {\r\n\r\n\t/**\r\n\t * Custom request headers to be added to HTTP(S) request.\r\n\t */\r\n\trequestHeaders?: { key: string, value: string}[];\r\n\r\n}\r\n\r\n/**\r\n * Loads an external file via its URL.\r\n *\r\n * Please note that this is an asynchronous function.\r\n *\r\n * It will not return the result, but rather a `Promise`.\r\n *\r\n * You can use the `await` notion, or `then()`.\r\n *\r\n * ```TypeScript\r\n * // Using await\r\n * let response = await Net.load( \"http://www.my.com/data.json\" );\r\n * console.log( response.response );\r\n *\r\n * // Using then()\r\n * Net.load( \"http://www.my.com/data.json\" ).then( ( response ) => {\r\n *   console.log( response.response );\r\n * } );\r\n * ```\r\n * ```JavaScript\r\n * // Using then()\r\n * Net.load( \"http://www.my.com/data.json\" ).then( function( response ) {\r\n *   console.log( response.response );\r\n * } );\r\n * ```\r\n * \r\n * @async\r\n * @param  {string}                      url      URL for the file to load\r\n * @param  {A}                           target   A target element that is requesting the net load\r\n * @param  {INetRequestOptions}          options  Request options\r\n * @return {Promise<INetLoadResult<A>>}           Result (Promise)\r\n */\r\nexport async function load<A>(url: string, target?: A, options?: INetRequestOptions): Promise<INetLoadResult<A>> {\r\n\treturn new Promise<INetLoadResult<A>>((success, error) => {\r\n\r\n\t\t// Create request and set up handlers\r\n\t\tlet xhr = new XMLHttpRequest();\r\n\t\txhr.onload = () => {\r\n\t\t\tif (xhr.status === 200) {\r\n\t\t\t\tlet response: string = xhr.responseText || xhr.response;\r\n\r\n\t\t\t\tsuccess({\r\n\t\t\t\t\txhr: xhr,\r\n\t\t\t\t\terror: false,\r\n\t\t\t\t\tresponse: response,\r\n\t\t\t\t\ttype: xhr.getResponseHeader(\"Content-Type\"),\r\n\t\t\t\t\ttarget: target\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\terror({\r\n\t\t\t\t\txhr: xhr,\r\n\t\t\t\t\terror: true,\r\n\t\t\t\t\ttype: xhr.getResponseHeader(\"Content-Type\"),\r\n\t\t\t\t\ttarget: target\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t\txhr.onerror = () => {\r\n\t\t\terror({\r\n\t\t\t\txhr: xhr,\r\n\t\t\t\terror: true,\r\n\t\t\t\ttype: xhr.getResponseHeader(\"Content-Type\"),\r\n\t\t\t\ttarget: target\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\t// Open request\r\n\t\txhr.open(\"GET\", url);\r\n\r\n\t\t// Process options\r\n\t\tif ($type.hasValue(options) && $type.hasValue(options.requestHeaders)) {\r\n\t\t\tfor(let i = 0; i < options.requestHeaders.length; i++) {\r\n\t\t\t\tlet header = options.requestHeaders[i];\r\n\t\t\t\txhr.setRequestHeader(header.key, header.value);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Send request\r\n\t\txhr.send();\r\n\r\n\t});\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/utils/Net.ts","/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { dataLoader } from \"./DataLoader\";\r\nimport { DataParser } from \"./DataParser\";\r\nimport { JSONParser } from \"./JSONParser\";\r\nimport { CSVParser } from \"./CSVParser\";\r\nimport { BaseObjectEvents, IBaseObjectEvents } from \"../Base\";\r\nimport { Component } from \"../Component\";\r\nimport { Adapter } from \"../utils/Adapter\";\r\nimport { EventDispatcher, AMEvent } from \"../utils/EventDispatcher\";\r\nimport { Language } from \"../utils/Language\";\r\nimport { DateFormatter } from \"../formatters/DateFormatter\";\r\nimport { INetRequestOptions } from \"../utils/Net\";\r\nimport { registry } from \"../Registry\";\r\nimport * as $type from \"../utils/Type\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines events for [[DataSource]].\r\n */\r\nexport interface IDataSourceEvents extends IBaseObjectEvents {\r\n\r\n\t/**\r\n\t * Invoked when loading of the data starts.\r\n\t */\r\n\tstarted: {};\r\n\r\n\t/**\r\n\t * Invoked when loading of the data starts.\r\n\t */\r\n\tloadstarted: {};\r\n\r\n\t/**\r\n\t * Invoked when the loading of the data finishes.\r\n\t */\r\n\tloadended: {};\r\n\r\n\t/**\r\n\t * Invoked when parsing of the loaded data starts.\r\n\t */\r\n\tparsestarted: {};\r\n\r\n\t/**\r\n\t * Invoked when parsing of the loaded data finishes.\r\n\t */\r\n\tparseended: {};\r\n\r\n\t/**\r\n\t * Invoked when loading and parsing finishes.\r\n\t */\r\n\tended: {};\r\n\r\n\t/**\r\n\t * Invoked when data source was successfully loaded and parsed.\r\n\t */\r\n\tdone: {\r\n\t\tdata: any\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when data source encounters a loading error.\r\n\t */\r\n\terror: {\r\n\t\tcode: number,\r\n\t\tmessage: string\r\n\t};\r\n\r\n\t/**\r\n\t * Invoked when data source encounters a parsing error.\r\n\t */\r\n\tparseerror: {\r\n\t\tmessage: string\r\n\t};\r\n\r\n};\r\n\r\n/**\r\n * Defines adapters for [[DataSource]].\r\n */\r\nexport interface IDataSourceAdapters {\r\n\r\n\t/**\r\n\t * Applied to a data source URL before it is loaded.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\turl: string;\r\n\r\n\t/**\r\n\t * Applied to a parser type, before parsing starts.\r\n\t *\r\n\t * Can be used to supply different parser than the one set/determined by\r\n\t * Data Loader.\r\n\t *\r\n\t * @type {DataParser}\r\n\t */\r\n\tparser: DataParser;\r\n\r\n\t/**\r\n\t * Applied to the timeout setting.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\treloadTimeout: number;\r\n\r\n\t/**\r\n\t * Applied to the loaded data **before** it is passed to parser.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tunparsedData: string;\r\n\r\n\t/**\r\n\t * Applied to the loaded data **after** it was parsed by a parser.\r\n\t * @type {any}\r\n\t */\r\n\tparsedData: any;\r\n\r\n\t/**\r\n\t * Applied to `incremental` setting.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tincremental: boolean;\r\n\r\n\t/**\r\n\t * Applied to parser options.\r\n\t *\r\n\t * @type {any}\r\n\t */\r\n\tparserOptions: any;\r\n\r\n\t/**\r\n\t * Applied to the array that lists fields in data that hold date-based values.\r\n\t *\r\n\t * @type {string[]}\r\n\t */\r\n\tdateFields: string[];\r\n\r\n\t/**\r\n\t * Applied to the array that lists fields in data that hold numeric values.\r\n\t *\r\n\t * @type {string[]}\r\n\t */\r\n\tnumberFields: string[];\r\n\r\n\t/**\r\n\t * Applied to the custom request options object.\r\n\t *\r\n\t * @type {INetRequestOptions}\r\n\t */\r\n\trequestOptions: INetRequestOptions;\r\n\r\n};\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Represents a single data source - external file with all of its settings,\r\n * such as format, data parsing, etc.\r\n *\r\n * ```TypeScript\r\n * chart.dataSource.url = \"http://www.myweb.com/data.json\";\r\n * chart.dataSource.parser = am4core.JSONParser;\r\n * ```\r\n * ```JavaScript\r\n * chart.dataSource.url = \"http://www.myweb.com/data.json\";\r\n * chart.dataSource.parser = am4core.JSONParser;\r\n * ```\r\n * ```JSON\r\n * {\r\n *   // ...\r\n *   \"dataSource\": {\r\n *     \"url\": \"http://www.myweb.com/data.json\",\r\n *     \"parser\": \"JSONParser\"\r\n *   },\r\n *   // ...\r\n * }\r\n * ```\r\n *\r\n * @see {@link IDataSourceEvents} for a list of available events\r\n * @see {@link IDataSourceAdapters} for a list of available Adapters\r\n */\r\nexport class DataSource extends BaseObjectEvents {\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IDataSourceEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IDataSourceEvents;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IExportAdapters}\r\n\t */\r\n\tpublic _adapter!: IDataSourceAdapters;\r\n\r\n\t/**\r\n\t * Adapter.\r\n\t *\r\n\t * @type {Adapter<DataSource, IDataSourceAdapters>}\r\n\t */\r\n\tpublic adapter: Adapter<DataSource, IDataSourceAdapters> = new Adapter<DataSource, IDataSourceAdapters>(this);\r\n\r\n\t/**\r\n\t * A [[Component]] recipient of the data.\r\n\t *\r\n\t * @type {Component}\r\n\t */\r\n\tpublic component: Component;\r\n\r\n\t/**\r\n\t * An instance of [[Language]].\r\n\t *\r\n\t * @type {Language}\r\n\t */\r\n\tprotected _language: Language;\r\n\r\n\t/**\r\n\t * An instance of [[DateFormatter]].\r\n\t *\r\n\t * @type {DateFormatter}\r\n\t */\r\n\tprotected _dateFormatter: DateFormatter;\r\n\r\n\t/**\r\n\t * An instance of parser class that can understand and parse data from the\r\n\t * source URL.\r\n\t *\r\n\t * @type {DataParser}\r\n\t */\r\n\tprotected _parser: DataParser;\r\n\r\n\t/**\r\n\t * An URL of the data source.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tprotected _url: string;\r\n\r\n\t/**\r\n\t * Custom options for HTTP(S) request.\r\n\t *\r\n\t * @type {INetRequestOptions}\r\n\t */\r\n\tprotected _requestOptions: INetRequestOptions = {};\r\n\r\n\t/**\r\n\t * Reload full data source every X ms.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tprotected _reloadFrequency: number;\r\n\r\n\t/**\r\n\t * Holds timeout reference for next reload.\r\n\t *\r\n\t * @type {any}\r\n\t */\r\n\tprotected _reloadTimeout: any;\r\n\r\n\t/**\r\n\t * If set to `true`, any subsequent data loads will be considered incremental\r\n\t * (containing only new data points that are supposed to be added to existing\r\n\t * data).\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tprotected _incremental: boolean;\r\n\r\n\t/**\r\n\t * Holds the date of the last load.\r\n\t *\r\n\t * @type {Date}\r\n\t */\r\n\tpublic lastLoad: Date;\r\n\r\n\t/**\r\n\t * If set to `true` it will timestamp all requested URLs to work around\r\n\t * browser cache.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tpublic disableCache: boolean;\r\n\r\n\t/**\r\n\t * Will show loading indicator when loading files.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tpublic showPreloader: boolean = true;\r\n\r\n\t/**\r\n\t * Loaded and parsed data.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tpublic data: any;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor(url?: string, parser?: string | DataParser) {\r\n\r\n\t\t// Init\r\n\t\tsuper();\r\n\t\tthis.className = \"DataSource\";\r\n\r\n\t\t// Set defaults\r\n\t\tif (url) {\r\n\t\t\tthis.url = url;\r\n\t\t}\r\n\r\n\t\t// Set parser\r\n\t\tif (parser) {\r\n\t\t\tif (typeof parser == \"string\") {\r\n\t\t\t\tthis.parser = dataLoader.getParserByType(parser);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.parser = parser;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Processes the loaded data.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {string}  data  Raw (unparsed) data\r\n\t * @param {string}  type  Content type of the loaded data (optional)\r\n\t */\r\n\tpublic processData(data: string, type?: string): void {\r\n\t\t// Parsing started\r\n\t\tthis.dispatchImmediately(\"parsestarted\");\r\n\r\n\t\t// Check if parser is set\r\n\t\tif (!this.parser) {\r\n\r\n\t\t\t// Try to resolve from data\r\n\t\t\tthis.parser = dataLoader.getParserByData(data, type);\r\n\r\n\t\t\tif (!this.parser) {\r\n\t\t\t\t// We have a problem - nobody knows what to do with the data\r\n\t\t\t\t// Raise error\r\n\t\t\t\tif (this.events.isEnabled(\"parseerror\")) {\r\n\t\t\t\t\tconst event: AMEvent<this, IDataSourceEvents>[\"parseerror\"] = {\r\n\t\t\t\t\t\ttype: \"parseerror\",\r\n\t\t\t\t\t\tmessage: this.language.translate(\"No parser available for file: %1\", null, this.url),\r\n\t\t\t\t\t\ttarget: this\r\n\t\t\t\t\t};\r\n\t\t\t\t\tthis.events.dispatchImmediately(\"parseerror\", event);\r\n\t\t\t\t}\r\n\t\t\t\tthis.dispatchImmediately(\"parseended\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Apply options adapters\r\n\t\tthis.parser.options = this.adapter.apply(\"parserOptions\", this.parser.options);\r\n\t\tthis.parser.options.dateFields = this.adapter.apply(\"dateFields\", this.parser.options.dateFields || []);\r\n\t\tthis.parser.options.numberFields = this.adapter.apply(\"numberFields\", this.parser.options.numberFields || []);\r\n\r\n\t\t// Check if we need to pass in date formatter\r\n\t\tif (this.parser.options.dateFields && !this.parser.options.dateFormatter) {\r\n\t\t\tthis.parser.options.dateFormatter = this.dateFormatter;\r\n\t\t}\r\n\r\n\t\t// Parse\r\n\t\tthis.data = this.adapter.apply(\r\n\t\t\t\"parsedData\",\r\n\t\t\tthis.parser.parse(\r\n\t\t\t\tthis.adapter.apply(\"unparsedData\", data)\r\n\t\t\t)\r\n\t\t);\r\n\r\n\t\t// Check for parsing errors\r\n\t\tif (!$type.hasValue(this.data) && this.events.isEnabled(\"parseerror\")) {\r\n\t\t\tconst event: AMEvent<this, IDataSourceEvents>[\"parseerror\"] = {\r\n\t\t\t\ttype: \"parseerror\",\r\n\t\t\t\tmessage: this.language.translate(\"Error parsing file: %1\", null, this.url),\r\n\t\t\t\ttarget: this\r\n\t\t\t};\r\n\t\t\tthis.events.dispatchImmediately(\"parseerror\", event);\r\n\t\t}\r\n\r\n\t\t// Wrap up\r\n\t\tthis.dispatchImmediately(\"parseended\");\r\n\r\n\t\tthis.dispatchImmediately(\"done\", {\r\n\t\t\t\"data\": this.data\r\n\t\t});\r\n\r\n\t\t// Update component\r\n\t\t/*if (this.component) {\r\n\r\n\t\t\t// Set new data\r\n\t\t\tif (this.data && this.incremental) {\r\n\t\t\t\tthis.component.addData(this.data);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.component.data = this.data;\r\n\t\t\t}\r\n\r\n\t\t}*/\r\n\r\n\t\t// Update last data load\r\n\t\tthis.lastLoad = new Date();\r\n\r\n\t\t// Should we schedule a reload?\r\n\t\tif (this.reloadFrequency) {\r\n\t\t\tthis._reloadTimeout = setTimeout(() => {\r\n\t\t\t\tthis.load();\r\n\t\t\t}, this.reloadFrequency);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * URL of the data source.\r\n\t *\r\n\t * @param {string}  value  URL\r\n\t */\r\n\tpublic set url(value: string) {\r\n\t\tthis._url = value;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {string} URL\r\n\t */\r\n\tpublic get url(): string {\r\n\t\treturn this.adapter.apply(\r\n\t\t\t\"url\",\r\n\t\t\tthis.disableCache\r\n\t\t\t\t? this.timestampUrl(this._url)\r\n\t\t\t\t: this._url\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * Custom options for HTTP(S) request.\r\n\t *\r\n\t * At this moment the only option supported is: `requestHeaders`, which holds\r\n\t * an array of objects for custom request headers, e.g.:\r\n\t *\r\n\t * ```TypeScript\r\n\t * chart.dataSource.requestOptions.requestHeaders = [{\r\n\t *   \"key\": \"x-access-token\",\r\n\t *   \"value\": \"123456789\"\r\n\t * }];\r\n\t * ``````JavaScript\r\n\t * chart.dataSource.requestOptions.requestHeaders = [{\r\n\t *   \"key\": \"x-access-token\",\r\n\t *   \"value\": \"123456789\"\r\n\t * }];\r\n\t * ```\r\n\t * ```JSON\r\n\t * {\r\n\t *   // ...\r\n\t *   \"dataSource\": {\r\n\t *     // ...\r\n\t *     \"requestOptions\": {\r\n\t *       \"requestHeaders\": [{\r\n\t *         \"key\": \"x-access-token\",\r\n\t *         \"value\": \"123456789\"\r\n\t *       }]\r\n\t *     }\r\n\t *   }\r\n\t * }\r\n\t * ```\r\n\t *\r\n\t * NOTE: setting this options on an-already loaded DataSource will not\r\n\t * trigger a reload.\r\n\t *\r\n\t * @param {INetRequestOptions}  value  Options\r\n\t */\r\n\tpublic set requestOptions(value: INetRequestOptions) {\r\n\t\tthis._requestOptions = value;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {INetRequestOptions} Options\r\n\t */\r\n\tpublic get requestOptions(): INetRequestOptions {\r\n\t\treturn this.adapter.apply(\"requestOptions\", this._requestOptions);\r\n\t}\r\n\r\n\t/**\r\n\t * A parser to be used to parse data.\r\n\t *\r\n\t * ```TypeScript\r\n\t * chart.dataSource.url = \"http://www.myweb.com/data.json\";\r\n\t * chart.dataSource.parser = am4core.JSONParser;\r\n\t * ```\r\n\t * ```JavaScript\r\n\t * chart.dataSource.url = \"http://www.myweb.com/data.json\";\r\n\t * chart.dataSource.parser = am4core.JSONParser;\r\n\t * ```\r\n\t * ```JSON\r\n\t * {\r\n\t *   // ...\r\n\t *   \"dataSource\": {\r\n\t *     \"url\": \"http://www.myweb.com/data.json\",\r\n\t *     \"parser\": \"JSONParser\"\r\n\t *   },\r\n\t *   // ...\r\n\t * }\r\n\t * ```\r\n\t *\r\n\t * @default JSONParser\r\n\t * @param {DataParser}  value  Data parser\r\n\t */\r\n\tpublic set parser(value: DataParser) {\r\n\t\tthis._parser = value;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {DataParser} Data parser\r\n\t */\r\n\tpublic get parser(): DataParser {\r\n\t\tif (!this._parser) {\r\n\t\t\tthis._parser = new JSONParser();\r\n\t\t}\r\n\t\treturn this.adapter.apply(\"parser\", this._parser);\r\n\t}\r\n\r\n\t/**\r\n\t * Data source reload frequency.\r\n\t *\r\n\t * If set, it will reload the same URL every X milliseconds.\r\n\t *\r\n\t * @param {number} value Reload frequency (ms)\r\n\t */\r\n\tpublic set reloadFrequency(value: number) {\r\n\t\tthis._reloadFrequency = value;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Reload frequency (ms)\r\n\t */\r\n\tpublic get reloadFrequency(): number {\r\n\t\treturn this.adapter.apply(\"reloadTimeout\", this._reloadFrequency);\r\n\t}\r\n\r\n\t/**\r\n\t * Should subsequent reloads be treated as incremental?\r\n\t *\r\n\t * Incremental loads will assume that they contain only new data items\r\n\t * since the last load.\r\n\t *\r\n\t * If `incremental = false` the loader will replace all of the target's\r\n\t * data with each load.\r\n\t *\r\n\t * @default false\r\n\t * @param {boolean} Incremental load?\r\n\t */\r\n\tpublic set incremental(value: boolean) {\r\n\t\tthis._incremental = value;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Incremental load?\r\n\t */\r\n\tpublic get incremental(): boolean {\r\n\t\treturn this.adapter.apply(\"incremental\", this._incremental);\r\n\t}\r\n\r\n\t/**\r\n\t * Language instance to use.\r\n\t *\r\n\t * Will inherit and use chart's language, if not set.\r\n\t *\r\n\t * @param {Language} value An instance of Language\r\n\t */\r\n\tpublic set language(value: Language) {\r\n\t\tthis._language = value;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Language} A [[Language]] instance to be used\r\n\t */\r\n\tpublic get language(): Language {\r\n\t\tif (this._language) {\r\n\t\t\treturn this._language;\r\n\t\t}\r\n\t\telse if (this.component) {\r\n\t\t\tthis._language = this.component.language;\r\n\t\t\treturn this._language;\r\n\t\t}\r\n\t\tthis.language = new Language();\r\n\t\treturn this.language;\r\n\t}\r\n\r\n\t/**\r\n\t * A [[DateFormatter]] to use when parsing dates from string formats.\r\n\t *\r\n\t * Will inherit and use chart's DateFormatter if not ser.\r\n\t *\r\n\t * @param {DateFormatter} value An instance of [[DateFormatter]]\r\n\t */\r\n\tpublic set dateFormatter(value: DateFormatter) {\r\n\t\tthis._dateFormatter = value;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {DateFormatter} A [[DateFormatter]] instance to be used\r\n\t */\r\n\tpublic get dateFormatter(): DateFormatter {\r\n\t\tif (this._dateFormatter) {\r\n\t\t\treturn this._dateFormatter;\r\n\t\t}\r\n\t\telse if (this.component) {\r\n\t\t\tthis._dateFormatter = this.component.dateFormatter;\r\n\t\t\treturn this._dateFormatter;\r\n\t\t}\r\n\t\tthis.dateFormatter = new DateFormatter();\r\n\t\treturn this.dateFormatter;\r\n\t}\r\n\r\n\t/**\r\n\t * Adds current timestamp to the URL.\r\n\t *\r\n\t * @param  {string}  url  Source URL\r\n\t * @return {string}       Timestamped URL\r\n\t */\r\n\tpublic timestampUrl(url: string): string {\r\n\t\tlet p = url.split(\"?\"),\r\n\t\t\ttstamp = new Date().getTime().toString();\r\n\t\tif (1 === p.length) {\r\n\t\t\tp[1] = tstamp;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tp[1] += \"&\" + tstamp;\r\n\t\t}\r\n\t\treturn p.join(\"?\");\r\n\t}\r\n\r\n\t/**\r\n\t * Disposes of this object.\r\n\t */\r\n\tpublic dispose(): void {\r\n\t\tsuper.dispose();\r\n\t\tif (this._reloadTimeout) {\r\n\t\t\tclearTimeout(this._reloadTimeout);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Initiate the load.\r\n\t *\r\n\t * All loading in JavaScript is asynchronous. This function will trigger the\r\n\t * load and will exit immediately.\r\n\t *\r\n\t * Use DataSource's events to watch for loaded data and errors.\r\n\t */\r\n\tpublic load(): void {\r\n\t\tdataLoader.load(this);\r\n\t}\r\n\r\n\t/**\r\n\t * Processes JSON-based config before it is applied to the object.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {object}  config  Config\r\n\t */\r\n\tpublic processConfig(config?: { [index: string]: any }): void {\r\n\r\n\t\tregistry.registeredClasses[\"json\"] = JSONParser;\r\n\t\tregistry.registeredClasses[\"JSONParser\"] = JSONParser;\r\n\t\tregistry.registeredClasses[\"csv\"] = CSVParser;\r\n\t\tregistry.registeredClasses[\"CSVParser\"] = CSVParser;\r\n\r\n\t\tsuper.processConfig(config);\r\n\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/data/DataSource.ts","/**\r\n * Data Loader is responsible for loading and parsing external data\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { DataSource } from \"./DataSource\";\r\nimport { DataParser } from \"./DataParser\";\r\nimport { CSVParser } from \"./CSVParser\";\r\nimport { JSONParser } from \"./JSONParser\";\r\nimport { Adapter } from \"../utils/Adapter\";\r\nimport * as $net from \"../utils/Net\";\r\n\r\n/**\r\n * Represents a list of available adapters for Sprite\r\n */\r\nexport interface IDataLoaderAdapters {\r\n\r\n\t/**\r\n\t * Applied after the Data Loader determines suitable parser type by data\r\n\t * source's URL extension.\r\n\t */\r\n\tgetParserByType: {\r\n\t\tparser: DataParser,\r\n\t\ttype?: string\r\n\t},\r\n\r\n\t/**\r\n\t * Applied after the Data Loader determines suitable parser type based on\r\n\t * its data examination.\r\n\t */\r\n\tgetParserByData: {\r\n\t\tparser: DataParser,\r\n\t\tdata?: string,\r\n\t\ttype?: string\r\n\t}\r\n\r\n};\r\n\r\n/**\r\n * Data Loader is responsible for loading and parsing external data.\r\n *\r\n * There is just one instance of DataLoader per system. Unless you have a\r\n * speicific reason, do not instantiate additional instances.\r\n *\r\n * The global instance of Data Loader is accessible via:\r\n *\r\n * ```TypeScript\r\n * am4core.dataLoader;\r\n * ```\r\n * ```JavaScript\r\n * am4core.dataLoader;\r\n * ```\r\n *\r\n * A loading of specific data source is done via [[DataSource]].\r\n *\r\n \t Please refer to [[DataSource]] for information how to use it.\r\n * \r\n * @see {@link IDataLoaderAdapters} for a list of available Adapters\r\n */\r\nexport class DataLoader {\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IExportAdapters}\r\n\t */\r\n\tpublic _adapter!: IDataLoaderAdapters;\r\n\r\n\t/**\r\n\t * Adapter.\r\n\t * \r\n\t * @type {Adapter<DataLoader, IDataLoaderAdapters>}\r\n\t */\r\n\tpublic adapter: Adapter<DataLoader, IDataLoaderAdapters> = new Adapter<DataLoader, IDataLoaderAdapters>(this);\r\n\r\n\t/**\r\n\t * Loads a supplied [[DataSource]] or an array of data sources, then calls\r\n\t * their respective `parse` methods.\r\n\t * \r\n\t * @param  {DataSource | DataSource[]}  source  A single data source or an array of multiple of data sources\r\n\t */\r\n\tpublic load(source: DataSource | DataSource[]): void {\r\n\t\tlet sources = Array.isArray(source) ? source : [source];\r\n\t\tlet promises = [];\r\n\r\n\t\t// Add each Source to the list to be loaded simultaneously\r\n\t\tfor (let x in sources) {\r\n\r\n\t\t\t// Dispatch events\r\n\t\t\tsources[x].dispatchImmediately(\"started\");\r\n\t\t\tsources[x].dispatchImmediately(\"loadstarted\");\r\n\r\n\t\t\tpromises.push($net.load(sources[x].url, sources[x], sources[x].requestOptions));\r\n\t\t}\r\n\r\n\t\t// Run all promises in parallel\r\n\t\tPromise.all(promises).then((res) => {\r\n\r\n\t\t\t// Process each loaded source\r\n\t\t\tfor (let x in res) {\r\n\r\n\t\t\t\t// Get Source\r\n\t\t\t\tlet result = res[x];\r\n\t\t\t\tlet source = result.target;\r\n\r\n\t\t\t\t// Dispatch events\r\n\t\t\t\tsource.dispatchImmediately(\"loadended\");\r\n\r\n\t\t\t\tif (result.error) {\r\n\t\t\t\t\tif (source.events.isEnabled(\"error\")) {\r\n\t\t\t\t\t\tsource.events.dispatchImmediately(\"error\", {\r\n\t\t\t\t\t\t\ttype: \"error\",\r\n\t\t\t\t\t\t\tcode: result.xhr.status,\r\n\t\t\t\t\t\t\tmessage: source.language.translate(\"Unable to load file: %1\", null, source.url),\r\n\t\t\t\t\t\t\ttarget: source\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\r\n\t\t\t\t\t// Initiate parsing of the loaded data\r\n\t\t\t\t\tsource.processData(result.response, result.type);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsource.dispatchImmediately(\"ended\");\r\n\r\n\t\t\t}\r\n\t\t}).catch((res) => {\r\n\r\n\t\t\tres.target.dispatchImmediately(\"loadended\");\r\n\r\n\t\t\tif (res.target.events.isEnabled(\"error\")) {\r\n\t\t\t\tres.target.events.dispatchImmediately(\"error\", {\r\n\t\t\t\t\ttype: \"error\",\r\n\t\t\t\t\tcode: res.xhr.status,\r\n\t\t\t\t\tmessage: res.target.language.translate(\"Unable to load file: %1\", null, res.target.url),\r\n\t\t\t\t\ttarget: res.target\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tres.target.dispatchImmediately(\"ended\");\r\n\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Instantiates a [[DataParser]] object based on the data type.\r\n\t * Built-in parser types are as follows:\r\n\t * \r\n\t * * \"csv\" or \"text/csv\"\r\n\t * * \"json\" or \"application/json\"\r\n\t * \r\n\t * @param  {string}      type  A format type\r\n\t * @return {DataParser}        A parser object\r\n\t */\r\n\tpublic getParserByType(type: string): DataParser {\r\n\r\n\t\t// Let some plugin decide\r\n\t\tlet parser;\r\n\t\tif (parser = this.adapter.apply(\"getParserByType\", {\r\n\t\t\tparser: null,\r\n\t\t\ttype: type\r\n\t\t}).parser) {\r\n\t\t\treturn parser;\r\n\t\t}\r\n\r\n\t\tif (type == \"csv\" || type == \"text/csv\") {\r\n\t\t\treturn new CSVParser();\r\n\t\t}\r\n\t\tif (type == \"json\" || type == \"application/json\") {\r\n\t\t\treturn new JSONParser();\r\n\t\t}\r\n\t\treturn;\r\n\t}\r\n\r\n\t/**\r\n\t * Tries to determine a parser out of content type and/or actual data.\r\n\t * \r\n\t * @param  {string}      data  Data\r\n\t * @param  {string}      type  Content-type\r\n\t * @return {DataParser}        Parser instance\r\n\t */\r\n\tpublic getParserByData(data: string, type?: string): DataParser {\r\n\r\n\t\t// Let some plugin decide\r\n\t\tlet parser = this.adapter.apply(\"getParserByData\", {\r\n\t\t\tparser: null,\r\n\t\t\tdata: data,\r\n\t\t\ttype: type\r\n\t\t}).parser;\r\n\r\n\t\t// Check if we have parser from outside code\r\n\t\tif (!parser) {\r\n\r\n\t\t\t// No, let's try to figure it out\r\n\t\t\tif (parser = this.getParserByType(type)) {\r\n\t\t\t\t// We're able to figure out parser by conten-type\r\n\t\t\t\treturn parser;\r\n\t\t\t}\r\n\t\t\telse if (JSONParser.isJSON(data)) {\r\n\t\t\t\treturn this.getParserByType(\"json\");\r\n\t\t\t}\r\n\t\t\telse if (CSVParser.isCSV(data)) {\r\n\t\t\t\treturn this.getParserByType(\"csv\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn parser;\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Create instance of Data Loader\r\n */\r\nexport let dataLoader: DataLoader = new DataLoader();\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/data/DataLoader.ts","/**\r\n * Responsive functionality module.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { BaseObjectEvents, IBaseObjectEvents } from \"../Base\";\r\nimport { Sprite, ISpriteProperties, ISpriteAdapters } from \"../Sprite\";\r\nimport { SpriteState } from \"../SpriteState\";\r\nimport { Container } from \"../Container\";\r\nimport { Component } from \"../Component\";\r\nimport { List } from \"../utils/List\";\r\nimport { EventDispatcher, AMEvent } from \"../utils/EventDispatcher\";\r\nimport { Adapter } from \"../utils/Adapter\";\r\nimport { IDisposer } from \"../utils/Disposer\";\r\nimport { registry } from \"../Registry\";\r\nimport { Optional } from \"../utils/Type\";\r\nimport * as $iter from \"../utils/Iterator\";\r\nimport * as $array from \"../utils/Array\";\r\nimport * as $type from \"../utils/Type\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines an interface for the responsive rule, i.e. what overrides need to\r\n * be applied when certain conditions are matched.\r\n *\r\n * @important\r\n */\r\nexport interface IResponsiveRule {\r\n\r\n\t/**\r\n\t * A function which determines if this rule is relevant to current\r\n\t * conditions.\r\n\t *\r\n\t * Whenever the chrt size changes, this function will be run to determine\r\n\t * whether this rule needs to be applied.\r\n\t *\r\n\t * @type {function}\r\n\t */\r\n\trelevant: (target: Container) => boolean;\r\n\r\n\t/**\r\n\t * A function which creates and returns a [[SpriteState]] that needs to be\r\n\t * set whenever rule should be applied.\r\n\t *\r\n\t * This is run only once.\r\n\t *\r\n\t * Once state is created, it is added to the Sprite's available states and\r\n\t * applied as necessary.\r\n\t *\r\n\t * @type {function}\r\n\t */\r\n\tstate: (target: Sprite, stateId: string) => Optional<SpriteState<ISpriteProperties, ISpriteAdapters>>;\r\n\r\n\t/**\r\n\t * ID of the rule.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tid?: string;\r\n\r\n}\r\n\r\n/**\r\n * Defines events for [[Responsive]].\r\n */\r\nexport interface IResponsiveEvents extends IBaseObjectEvents {\r\n\r\n\t/**\r\n\t * Invoked when a list of applicable rules for the current resolution\r\n\t * changes.\r\n\t */\r\n\truleschanged: {},\r\n\r\n\t/**\r\n\t * Invoked after each rule is applied to the actual element.\r\n\t */\r\n\truleapplied: {\r\n\r\n\t\t/**\r\n\t\t * A rule that was just applied.\r\n\t\t *\r\n\t\t * @type {IResponsiveRule}\r\n\t\t */\r\n\t\t\"rule\": IResponsiveRule\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Defines adapters for [[Responsive]] class.\r\n *\r\n * Includes both the [[Adapter]] definitions and properties.\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface IResponsiveAdapters {\r\n\r\n\t/**\r\n\t * Are responsive features enabled?\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tenabled: boolean;\r\n\r\n\t/**\r\n\t * Use default rules?\r\n\t *\r\n\t * If this is set `false`, only user-defined rules will be applied.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tuseDefault: boolean;\r\n\r\n\t/**\r\n\t * A list of user-defined rules.\r\n\t *\r\n\t * @type {List<IResponsiveRule>}\r\n\t */\r\n\trules: List<IResponsiveRule>;\r\n\r\n\t/**\r\n\t * A list of default rules.\r\n\t *\r\n\t * @type {List<IResponsiveRule>}\r\n\t */\r\n\tdefaultRules: List<IResponsiveRule>;\r\n\r\n\t/**\r\n\t * A list of **all** rules - user-defined and default combined.\r\n\t *\r\n\t * @type {List<IResponsiveRule>}\r\n\t */\r\n\tallRules: List<IResponsiveRule>;\r\n\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Responsive is responsible for overriding certain properties when conditions\r\n * are met.\r\n *\r\n * This class is used to dynamically apply and change certain chart properties\r\n * based on the current values of properties.\r\n *\r\n * Mainly, this is used with [[Sprite]]'s dimensional properties, like\r\n * `pixelWidth` and `pixelHeight`. However, it can be used to dynamically\r\n * change any property, based on any other property's value.\r\n *\r\n * A default responsive rules are disabled.\r\n *\r\n * To enable, set `enabled = false`. E.g.:\r\n *\r\n * ```TypeScript\r\n * chart.responsive.enabled = true;\r\n * ```\r\n * ```JavaScript\r\n * chart.responsive.enabled = true;\r\n * ```\r\n *\r\n * @see {@link IResponsiveEvents} for a list of available events\r\n * @see {@link IResponsiveAdapters} for a list of available Adapters\r\n * @todo Add default rules\r\n * @todo Watch for rule modification\r\n * @important\r\n */\r\nexport class Responsive extends BaseObjectEvents {\r\n\r\n\t/**\r\n\t * Holds a list of responsive rules organized by object type.\r\n\t *\r\n\t * @type {List<IResponsiveRule>}\r\n\t */\r\n\tprotected _rules = new List<IResponsiveRule>();\r\n\r\n\t/**\r\n\t * Holds the list of the default responsive rules.\r\n\t *\r\n\t * @type {List<IResponsiveRule>}\r\n\t */\r\n\tprotected _defaultRules = new List<IResponsiveRule>();\r\n\r\n\t/**\r\n\t * Holds the list of currently applied rules.\r\n\t *\r\n\t * @type {object}\r\n\t */\r\n\tprotected _appliedRules: { [index: string]: boolean } = {};\r\n\r\n\t/**\r\n\t * Use default rules in addition to the user-defined ones?\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\tprotected _useDefault = true;\r\n\r\n\t/**\r\n\t * A target object responsive rules apply to.\r\n\t *\r\n\t * @type {Component}\r\n\t */\r\n\tprotected _component: $type.Optional<Component>;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IResponsiveEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IResponsiveEvents;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IExportAdapters}\r\n\t */\r\n\tpublic _adapter!: IResponsiveAdapters;\r\n\r\n\t/**\r\n\t * Adapter.\r\n\t *\r\n\t * @type {Adapter<Responsive, IResponsiveAdapters>}\r\n\t */\r\n\tpublic adapter = new Adapter<this, IResponsiveAdapters>(this);\r\n\r\n\t/**\r\n\t * Indicates of responsive rules application is enabled.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\tprotected _enabled = false;\r\n\r\n\t/**\r\n\t * Holds a disposer for size events.\r\n\t *\r\n\t * @type {IDisposer}\r\n\t */\r\n\tprivate _sizeEventDisposer: $type.Optional<IDisposer>;\r\n\r\n\t/**\r\n\t * Collection of objects and state ids that do not have any properties set.\r\n\t *\r\n\t * @type {string[]}\r\n\t */\r\n\tprivate _noStates: string[] = [];\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\r\n\t\t// Init\r\n\t\tsuper();\r\n\t\tthis.className = \"Responsive\";\r\n\r\n\t\t// Set up rules list events\r\n\t\tthis.rules.events.on(\"inserted\", this.checkRules, true);\r\n\t\tthis.rules.events.on(\"removed\", this.checkRules, true);\r\n\t\tthis._disposers.push(this.rules.events);\r\n\r\n\t\t// Apply theme\r\n\t\tthis.applyTheme();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * A target object that responsive rules will need to be applied to.\r\n\t *\r\n\t * @param {Optional<Component>}  value  Target object\r\n\t */\r\n\tpublic set component(value: $type.Optional<Component>) {\r\n\r\n\t\t// Check if it's the same\r\n\t\tif (value == this._component) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Check if we already have a set up component and remove its events\r\n\t\tif (this._sizeEventDisposer) {\r\n\t\t\tthis.removeDispose(this._sizeEventDisposer);\r\n\t\t}\r\n\r\n\t\t// Set\r\n\t\tthis._component = value;\r\n\r\n\t\t// Set up resize monitoring events\r\n\t\tthis._sizeEventDisposer = $type.getValue(this.component).events.on(\"sizechanged\", this.checkRules, this);\r\n\t\tthis._disposers.push(this._sizeEventDisposer);\r\n\r\n\t\t// Enable resoponsive\r\n\t\tthis.enabled = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Optional<Component>} Target object\r\n\t */\r\n\tpublic get component(): $type.Optional<Component> {\r\n\t\treturn this._component;\r\n\t}\r\n\r\n\t/**\r\n\t * Should responsive rules be checked against and applied?\r\n\t *\r\n\t * @default false\r\n\t * @param {boolean}  value  Apply responsive rules?\r\n\t */\r\n\tpublic set enabled(value: boolean) {\r\n\t\tif (this._enabled != value) {\r\n\t\t\tthis._enabled = true;\r\n\r\n\t\t\t// Run `applyRules` so that any currently applied rules can be reset\r\n\t\t\tthis.applyRules();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Apply responsive rules?\r\n\t */\r\n\tpublic get enabled(): boolean {\r\n\t\treturn this.adapter.apply(\"enabled\", this._enabled);\r\n\t}\r\n\r\n\t/**\r\n\t * Should default responsive rules be applied in addition to user-defined\r\n\t * ones.\r\n\t *\r\n\t * User-defined rules will take precedence over default rules whenever they\r\n\t * produce conflicting settings.\r\n\t *\r\n\t * @default true\r\n\t * @param {boolean}  value  Use default rules?\r\n\t */\r\n\tpublic set useDefault(value: boolean) {\r\n\t\tif (this._useDefault != value) {\r\n\t\t\tthis._useDefault = true;\r\n\r\n\t\t\t// Run `applyRules` so that any currently applied rules can be reset\r\n\t\t\tthis.applyRules();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {boolean} Use default rules?\r\n\t */\r\n\tpublic get useDefault(): boolean {\r\n\t\treturn this.adapter.apply(\"useDefault\", this._useDefault);\r\n\t}\r\n\r\n\t/**\r\n\t * User-defined responsive rules.\r\n\t *\r\n\t * User-defined rules will take precedence over default rules whenever they\r\n\t * produce conflicting settings.\r\n\t *\r\n\t * Use `allRules` to get all applicable rules including default and\r\n\t * user-defined ones.\r\n\t *\r\n\t * @param {List<IResponsiveRule>}  value  User-defined rules\r\n\t */\r\n\tpublic set rules(value: List<IResponsiveRule>) {\r\n\t\tthis._rules = value;\r\n\t\tthis._enabled = true;\r\n\t\tthis.applyRules();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {List<IResponsiveRule>} User-defined rules\r\n\t */\r\n\tpublic get rules(): List<IResponsiveRule> {\r\n\t\treturn this.adapter.apply(\"rules\", this._rules);\r\n\t}\r\n\r\n\t/**\r\n\t * Default responsive rules.\r\n\t *\r\n\t * @readonly\r\n\t * @return {List<IResponsiveRule>} List of responsive rules\r\n\t */\r\n\tpublic get defaultRules(): List<IResponsiveRule> {\r\n\t\treturn this.adapter.apply(\"defaultRules\", this._defaultRules);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns all rules: default rules (if not disabled) combined with\r\n\t * user-defined ones.\r\n\t *\r\n\t * @readonly\r\n\t * @return {List<IResponsiveRule>} List of all applicable rules\r\n\t */\r\n\tpublic get allRules(): List<IResponsiveRule> {\r\n\r\n\t\t// Create empty list\r\n\t\tlet rules = new List<IResponsiveRule>();\r\n\r\n\t\t// Add default rules if not disabled\r\n\t\t// A code, requesting `allRules` must ensure loading of default rules\r\n\t\t// by calling `loadDefaultRules()`\r\n\t\tif (this.useDefault) {\r\n\t\t\trules.copyFrom(this.defaultRules);\r\n\t\t}\r\n\r\n\t\t// Add user-defined ones\r\n\t\trules.copyFrom(this.rules);\r\n\r\n\t\treturn this.adapter.apply(\"allRules\", rules);\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if rule by the particular id currently applied.\r\n\t *\r\n\t * @param  {string}   ruleId  Rule ID\r\n\t * @return {boolean}          Is currently applied?\r\n\t */\r\n\tprotected isApplied(ruleId: string): boolean {\r\n\t\tconst rule = this._appliedRules[ruleId];\r\n\t\treturn $type.hasValue(rule) ? rule : false;\r\n\t}\r\n\r\n\t/**\r\n\t * Checks which responsive rules currently satisfy their conditions and\r\n\t * should be applied, or unapplied.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic checkRules(): void {\r\n\r\n\t\t// Check if default rules need to be loaded\r\n\t\t// If needed, we wait until it's loaded and then call `checkRules` again\r\n\t\tif (this.useDefault && this.defaultRules.length == 0) {\r\n\t\t\tthis.loadDefaultRules().then((res) => {\r\n\t\t\t\tthis._defaultRules.setAll(res.default);\r\n\t\t\t\tthis.checkRules();\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Check if there are any rules\r\n\t\tlet rules = this.allRules;\r\n\t\tif (!rules || rules.length == 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Init a list of rules to be applied\r\n\t\tlet rulesChanged: boolean = false;\r\n\r\n\t\tconst component = $type.getValue(this.component);\r\n\r\n\t\t// Check which rules match\r\n\t\t$iter.each(rules.iterator(), (rule) => {\r\n\r\n\t\t\t// Check if rule has an id\r\n\t\t\tif (!rule.id) {\r\n\t\t\t\trule.id = registry.getUniqueId();\r\n\t\t\t}\r\n\r\n\t\t\t// Init indicator if this rule should be applied\r\n\t\t\tlet apply = rule.relevant(component);\r\n\r\n\t\t\t// Let's check if this rule needs to be applied\r\n\t\t\tif ((apply && !this.isApplied(rule.id)) || (!apply && this.isApplied(rule.id))) {\r\n\t\t\t\trulesChanged = true;\r\n\t\t\t}\r\n\t\t\tthis._appliedRules[rule.id] = apply;\r\n\r\n\t\t});\r\n\r\n\t\t// Check if we need to re-apply the rules\r\n\t\tif (rulesChanged) {\r\n\t\t\tthis.applyRules();\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Applies current rules to the object.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {any} target Target object\r\n\t * @todo Better type check\r\n\t */\r\n\tpublic applyRules(target?: Container): void {\r\n\t\t// If no target supplied, we assume the top-level element\r\n\t\tconst newTarget = ($type.hasValue(target)\r\n\t\t\t? target\r\n\t\t\t: $type.getValue(this.component));\r\n\r\n\t\t// Check each rule\r\n\t\tlet defaultStateApplied = false;\r\n\t\tif (this.enabled) {\r\n\t\t\t$iter.each(this.allRules.iterator(), (rule) => {\r\n\r\n\t\t\t\t// Get relevant state\r\n\t\t\t\tlet state = this.getState(rule, newTarget);\r\n\r\n\t\t\t\t// If there's a state, it means it needs to be applied\r\n\t\t\t\tif (state) {\r\n\r\n\t\t\t\t\t// Check if default state was already applied to this element.\r\n\t\t\t\t\t// We don't want to go resetting default states to ALL element,\r\n\t\t\t\t\t// if they don't have responsive states.\r\n\t\t\t\t\tif (!defaultStateApplied) {\r\n\r\n\t\t\t\t\t\t// Nope, reset states (instantly).\r\n\t\t\t\t\t\t//console.log(\"Applying default state to \" + newTarget.className + \" (\" + newTarget.uid + \"): \" + JSON.stringify(newTarget.defaultState.properties));\r\n\t\t\t\t\t\tnewTarget.applyCurrentState(0);\r\n\t\t\t\t\t\tdefaultStateApplied = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Is this rule currently applied?\r\n\t\t\t\t\tif (this.isApplied($type.getValue(rule.id))) {\r\n\t\t\t\t\t\t// Yes. Apply the responsive state\r\n\t\t\t\t\t\t//console.log(\"Applying state to \" + newTarget.className + \" (\" + newTarget.uid + \"): \" + JSON.stringify(state.properties));\r\n\t\t\t\t\t\tnewTarget.setState(state);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// Apply rules to the children\r\n\t\tif (newTarget.children) {\r\n\t\t\t$iter.each(newTarget.children.iterator(), (child) => {\r\n\t\t\t\tthis.applyRules(<Container>child);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Applies specific oresponsive overrides to the element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {IResponsiveRule}  rule    Responsive rule\r\n\t * @param {any}              target  Target element\r\n\t * @deprecated\r\n\t */\r\n\t/*\tpublic applyRule(rule: IResponsiveRule, target: any): void {\r\n\r\n\t\t\t// Construct state id\r\n\t\t\t//let stateId = \"responsive-\" + rule.id;\r\n\r\n\t\t\t// Check if we need to create a state for the element\r\n\t\t\tlet state = this.getState(rule, target);\r\n\r\n\t\t\t// Apply the state\r\n\t\t\tif (state) {\r\n\t\t\t\t//if (target.className == \"Container\" && target.parent.className == \"ZoomControl\") {\r\n\t\t\t\tconsole.log(\"Applying state to \" + target.className + \" (\" + target.uid + \"): \" + JSON.stringify(state.properties));\r\n\t\t\t\t//}\r\n\t\t\t\ttarget.setState(state);\r\n\t\t\t}\r\n\r\n\t\t}*/\r\n\r\n\t/**\r\n\t * Returns a relative state for the rule/target, or `null` if no state is\r\n\t * needed.\r\n\t *\r\n\t * @param  {IResponsiveRule}  rule    [description]\r\n\t * @param  {any}              target  [description]\r\n\t * @return {Optional}                 [description]\r\n\t */\r\n\tprotected getState(rule: IResponsiveRule, target: any): Optional<SpriteState<any, any>> {\r\n\t\tlet stateId = \"responsive-\" + rule.id;\r\n\t\tlet tmpId = target.uid + \"_\" + stateId;\r\n\t\tif ($array.indexOf(this._noStates, tmpId) !== -1) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\telse if (!target.states.hasKey(stateId)) {\r\n\t\t\tlet state = rule.state(target, stateId);\r\n\t\t\tif (!state) {\r\n\t\t\t\tthis._noStates.push(tmpId);\r\n\t\t\t}\r\n\t\t\treturn state;\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn target.states.getKey(stateId);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Gets a value from an element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {any}     target    Target object\r\n\t * @param  {string}  property  Property\r\n\t * @return {any}               Property value\r\n\t */\r\n\tpublic getValue(target: any, property: string): any {\r\n\t\t// This is a bit hacky, first we check if the property exist.\r\n\t\t// If it doesn't we try accessing target's property directly\r\n\t\tlet value: any = target.getPropertyValue(property);\r\n\t\tif (!$type.hasValue(value) && $type.hasValue(target[property])) {\r\n\t\t\tvalue = target[property];\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\t/**\r\n\t * Loads default responsive rules.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @return {Promise<any>} Responsive rules\r\n\t */\r\n\tpublic loadDefaultRules(): Promise<any> {\r\n\t\treturn import(/* webpackChunkName: \"responsivedefaults\" */ \"./ResponsiveDefaults\");\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/responsive/Responsive.ts","/**\r\n *\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Sprite, ISpriteProperties, ISpriteAdapters, ISpriteEvents, SpriteEventDispatcher, AMEvent } from \"../../core/Sprite\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { color } from \"../../core/utils/Color\";\r\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[AxisLine]].\r\n */\r\nexport interface IAxisLineProperties extends ISpriteProperties { }\r\n\r\n/**\r\n * Defines events for [[AxisLine]].\r\n */\r\nexport interface IAxisLineEvents extends ISpriteEvents { }\r\n\r\n/**\r\n * Defines adapters for [[AxisLine]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface IAxisLineAdapters extends ISpriteAdapters, IAxisLineProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Used to draw Axis line.\r\n *\r\n * @see {@link IAxisLineEvents} for a list of available events\r\n * @see {@link IAxisLineAdapters} for a list of available Adapters\r\n */\r\nexport class AxisLine extends Sprite {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IAxisLineProperties}\r\n\t */\r\n\tpublic _properties!: IAxisLineProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IAxisLineAdapters}\r\n\t */\r\n\tpublic _adapter!: IAxisLineAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IAxisLineEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IAxisLineEvents;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"AxisLine\";\r\n\r\n\t\tthis.element = this.paper.add(\"path\");\r\n\r\n\t\tlet interfaceColors = new InterfaceColorSet();\r\n\t\tthis.stroke = interfaceColors.getFor(\"grid\");\r\n\t\tthis.strokeOpacity = 0.15;\r\n\t\tthis.pixelPerfect = true;\r\n\t\tthis.fill = color();\r\n\t\tthis.applyTheme();\r\n\r\n\t\tthis.interactionsEnabled = false;\r\n\r\n\t\tthis.element.moveTo({ x: 0, y: 0 });\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"AxisLine\"] = AxisLine;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/charts/axes/AxisLine.ts","/**\r\n * Axis Tick module\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Tick, ITickProperties, ITickAdapters, ITickEvents } from \"../elements/Tick\";\r\nimport { SpriteEventDispatcher, AMEvent } from \"../../core/Sprite\";\r\nimport { AxisItemLocation, AxisDataItem } from \"./Axis\";\r\nimport { registry } from \"../../core/Registry\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[AxisTick]].\r\n */\r\nexport interface IAxisTickProperties extends ITickProperties {\r\n\tlocation?: number;\r\n\tinside?: boolean;\r\n}\r\n\r\n/**\r\n * Defines events for [[AxisTick]].\r\n */\r\nexport interface IAxisTickEvents extends ITickEvents {\r\n\r\n}\r\n\r\n/**\r\n * Defines adapter for [[AxisTick]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface IAxisTickAdapters extends ITickAdapters, IAxisTickProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Draws an axis tick\r\n * @see {@link IAxisTickEvents} for a list of available events\r\n * @see {@link IAxisTickAdapters} for a list of available Adapters\r\n */\r\nexport class AxisTick extends Tick {\r\n\r\n\t/**\r\n\t * Defines available properties\r\n\t * @type {AxisTicPkroperties}\r\n\t * @ignore\r\n\t */\r\n\tpublic _properties!: IAxisTickProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters\r\n\t * @type {IAxisTickAdapters}\r\n\t * @ignore\r\n\t */\r\n\tpublic _adapter!: IAxisTickAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IAxisTickEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IAxisTickEvents;\r\n\r\n\tpublic _dataItem: AxisDataItem;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.className = \"AxisTick\";\r\n\r\n\t\tthis.element = this.paper.add(\"path\");\r\n\r\n\t\tthis.location = 0.5;\r\n\r\n\t\tthis.isMeasured = false;\r\n\r\n\t\tthis.pixelPerfect = true;\r\n\r\n\t\tthis.length = 5;\r\n\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\tset location(value: AxisItemLocation) {\r\n\t\tthis.setPropertyValue(\"location\", value, true);\r\n\t}\r\n\r\n\tget location(): AxisItemLocation {\r\n\t\treturn this.getPropertyValue(\"location\");\r\n\t}\r\n\r\n\tset inside(value: boolean) {\r\n\t\tthis.setPropertyValue(\"inside\", value, true);\r\n\t}\r\n\r\n\tget inside(): boolean {\r\n\t\treturn this.getPropertyValue(\"inside\");\r\n\t}\r\n}\r\n\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"AxisTick\"] = AxisTick;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/charts/axes/AxisTick.ts","/**\r\n * Pointed rectangle module.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { PointedShape, IPointedShapeProperties, IPointedShapeAdapters, IPointedShapeEvents } from \"./PointedShape\";\r\nimport { SpriteEventDispatcher, AMEvent } from \"../Sprite\";\r\nimport * as $math from \"../utils/Math\";\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[PointedRectangle]].\r\n */\r\nexport interface IPointedRectangleProperties extends IPointedShapeProperties {\r\n\r\n\t/**\r\n\t * Radius of rectangle's border in pixels.\r\n\t *\r\n\t * @default 0\r\n\t * @type {number}\r\n\t */\r\n\tcornerRadius?: number;\r\n\r\n}\r\n\r\n/**\r\n * Defines events for [[PointedRectangle]].\r\n */\r\nexport interface IPointedRectangleEvents extends IPointedShapeEvents { }\r\n\r\n/**\r\n * Defines adapters for [[PointedRectangle]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface IPointedRectangleAdapters extends IPointedShapeAdapters, IPointedRectangleProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Draws a rectangle with a pointer.\r\n *\r\n * @see {@link IPointedRectangleEvents} for a list of available events\r\n * @see {@link IPointedRectangleAdapters} for a list of available Adapters\r\n */\r\nexport class PointedRectangle extends PointedShape {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IPointedRectangleProperties}\r\n\t */\r\n\tpublic _properties!: IPointedRectangleProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IPointedRectangleAdapters}\r\n\t */\r\n\tpublic _adapter!: IPointedRectangleAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IPointedRectangleEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IPointedRectangleEvents;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"PointedRectangle\";\r\n\t\tthis.element = this.paper.add(\"path\");\r\n\t\tthis.cornerRadius = 0;\r\n\t\tthis.cornerRadius = 6;\r\n\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Draws the element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic draw(): void {\r\n\t\tsuper.draw();\r\n\t\tlet cr = this.cornerRadius;\r\n\t\tlet w = this.innerWidth;\r\n\t\tlet h = this.innerHeight;\r\n\t\tif (w > 0 && h > 0) {\r\n\t\t\tlet x = this.pointerX;\r\n\t\t\tlet y = this.pointerY;\r\n\t\t\tlet bwh = this.pointerBaseWidth / 2;\r\n\r\n\t\t\tlet maxcr: number = $math.min(w / 2, h / 2);\r\n\t\t\tlet crtl: number = $math.fitToRange(cr, 0, maxcr);\r\n\t\t\tlet crtr: number = $math.fitToRange(cr, 0, maxcr);\r\n\t\t\tlet crbr: number = $math.fitToRange(cr, 0, maxcr);\r\n\t\t\tlet crbl: number = $math.fitToRange(cr, 0, maxcr);\r\n\r\n\t\t\t// corner coordinates\r\n\t\t\t// top left\r\n\t\t\tlet xtl = 0;\r\n\t\t\tlet ytl = 0;\r\n\t\t\t// top right\r\n\t\t\tlet xtr = w;\r\n\t\t\tlet ytr = 0;\r\n\t\t\t// bottom right\r\n\t\t\tlet xbr = w;\r\n\t\t\tlet ybr = h;\r\n\t\t\t// bottom left\r\n\t\t\tlet xbl = 0;\r\n\t\t\tlet ybl = h;\r\n\r\n\t\t\tlet lineT;\r\n\t\t\tlet lineR;\r\n\t\t\tlet lineB;\r\n\t\t\tlet lineL;\r\n\r\n\t\t\t// find stem base side: http://$math.stackexchange.com/questions/274712/calculate-on-which-side-of-straign-line-is-dot-located\r\n\t\t\t// d=(xx1)(y2y1)(yy1)(x2x1)\r\n\t\t\tlet d1 = (x - xtl) * (ybr - ytl) - (y - ytl) * (xbr - xtl);\r\n\t\t\tlet d2 = (x - xbl) * (ytr - ybl) - (y - ybl) * (xtr - xbl);\r\n\r\n\t\t\t// top\r\n\t\t\tif (d1 > 0 && d2 > 0) {\r\n\t\t\t\tlet stemX = $math.fitToRange(x, crtl + bwh, w - bwh - crtr);\r\n\t\t\t\ty = $math.fitToRange(y, -Infinity, 0);\r\n\t\t\t\tlineT = \"M\" + crtl + \",0 L\" + (stemX - bwh) + \",0 L\" + x + \",\" + y + \" L\" + (stemX + bwh) + \",0 L\" + (w - crtr) + \",0\";\r\n\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tlineT = \"M\" + crtl + \",0 L\" + (w - crtr) + \",0\";\r\n\t\t\t}\r\n\t\t\t// bottom\r\n\t\t\tif (d1 < 0 && d2 < 0) {\r\n\t\t\t\tlet stemX = $math.fitToRange(x, crbl + bwh, w - bwh - crbr);\r\n\t\t\t\ty = $math.fitToRange(y, h, Infinity);\r\n\t\t\t\tlineB = \" L\" + (w - crbr) + \",\" + h + \" L\" + (stemX + bwh) + \",\" + h + \" L\" + x + \",\" + y + \" L\" + (stemX - bwh) + \",\" + h + \" L\" + crbl + \",\" + h;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tlineB = \" L\" + crbl + \",\" + h;\r\n\t\t\t}\r\n\t\t\t// left\r\n\t\t\tif (d1 < 0 && d2 > 0) {\r\n\t\t\t\tlet stemY = $math.fitToRange(y, crtl + bwh, h - crbl - bwh);\r\n\t\t\t\tx = $math.fitToRange(x, -Infinity, 0);\r\n\t\t\t\tlineL = \" L0,\" + (h - crbl) + \" L0,\" + (stemY + bwh) + \" L\" + x + \",\" + y + \" L0,\" + (stemY - bwh) + \" L0,\" + crtl;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tlineL = \" L0,\" + crtl;\r\n\t\t\t}\r\n\t\t\t// right\r\n\t\t\tif (d1 > 0 && d2 < 0) {\r\n\t\t\t\tlet stemY = $math.fitToRange(y, crtr + bwh, h - bwh - crbr);\r\n\t\t\t\tx = $math.fitToRange(x, w, Infinity);\r\n\t\t\t\tlineR = \" L\" + w + \",\" + crtr + \" L\" + w + \",\" + (stemY - bwh) + \" L\" + x + \",\" + y + \" L\" + w + \",\" + (stemY + bwh) + \" L\" + w + \",\" + (h - crbr);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tlineR = \" L\" + w + \",\" + (h - crbr);\r\n\t\t\t}\r\n\r\n\t\t\tlet arcTR = \" a\" + crtr + \",\" + crtr + \" 0 0 1 \" + crtr + \",\" + crtr;\r\n\t\t\tlet arcBR = \" a\" + crbr + \",\" + crbr + \" 0 0 1 -\" + crbr + \",\" + crbr;\r\n\t\t\tlet arcBL = \" a\" + crbl + \",\" + crbl + \" 0 0 1 -\" + crbl + \",-\" + crbl;\r\n\t\t\tlet arcTL = \" a\" + crtl + \",\" + crtl + \" 0 0 1 \" + crtl + \",-\" + crtl;\r\n\r\n\r\n\t\t\tlet path = lineT + arcTR + lineR + arcBR + lineB + arcBL + lineL + arcTL;\r\n\t\t\tthis.element.attr({ \"d\": path });\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Radius of rectangle's border in pixels.\r\n\t *\r\n\t * @default 0\r\n\t * @param {number}  value  Corner radius (px)\r\n\t */\r\n\tpublic set cornerRadius(value: number) {\r\n\t\tthis.setPropertyValue(\"cornerRadius\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Corner radius (px)\r\n\t */\r\n\tpublic get cornerRadius(): number {\r\n\t\treturn this.getPropertyValue(\"cornerRadius\");\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/elements/PointedRectangle.ts","/**\r\n * Pointed shape module.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Sprite, ISpriteProperties, ISpriteAdapters, ISpriteEvents, SpriteEventDispatcher, AMEvent } from \"../Sprite\";\r\nimport * as $type from \"../utils/Type\";\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[PointedShape]].\r\n */\r\nexport interface IPointedShapeProperties extends ISpriteProperties {\r\n\r\n\t/**\r\n\t * A width of the pinter's (stem's) thick end (base) in pixels.\r\n\t *\r\n\t * @default 15\r\n\t * @type {number}\r\n\t */\r\n\tpointerBaseWidth?: number;\r\n\r\n\t/**\r\n\t * A length of the pinter (stem) in pixels.\r\n\t *\r\n\t * @default 10\r\n\t * @type {number}\r\n\t */\r\n\tpointerLength?: number;\r\n\r\n\t/**\r\n\t * X coordinate the shape is pointing to.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tpointerX?: number;\r\n\r\n\t/**\r\n\t * Y coordinate the shape is pointing to.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tpointerY?: number;\r\n\r\n}\r\n\r\n/**\r\n * Defines events for [[PointedShape]].\r\n */\r\nexport interface IPointedShapeEvents extends ISpriteEvents { }\r\n\r\n/**\r\n * Defines adapters for [[PointedShape]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface IPointedShapeAdapters extends ISpriteAdapters, IPointedShapeProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Draws a shape with a pointer.\r\n *\r\n * @see {@link IPointedShapeEvents} for a list of available events\r\n * @see {@link IPointedShapeAdapters} for a list of available Adapters\r\n */\r\nexport class PointedShape extends Sprite {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IPointedShapeProperties}\r\n\t */\r\n\tpublic _properties!: IPointedShapeProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IPointedShapeAdapters}\r\n\t */\r\n\tpublic _adapter!: IPointedShapeAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IPointedShapeEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IPointedShapeEvents;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"PointedShape\";\r\n\t\tthis.pointerBaseWidth = 15;\r\n\t\tthis.pointerLength = 10;\r\n\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Draws the element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic draw(): void {\r\n\t\tsuper.draw();\r\n\t\tif (!$type.isNumber(this.pointerX)) {\r\n\t\t\tthis.pointerX = this.pixelWidth / 2;\r\n\t\t}\r\n\t\tif (!$type.isNumber(this.pointerY)) {\r\n\t\t\tthis.pointerY = this.pixelHeight + 10;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * A width of the pinter's (stem's) thick end (base) in pixels.\r\n\t *\r\n\t * @default 15\r\n\t * @param {number}  value  Width (px)\r\n\t */\r\n\tpublic set pointerBaseWidth(value: number) {\r\n\t\tthis.setPropertyValue(\"pointerBaseWidth\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * A length of the pinter (stem) in pixels.\r\n\t *\r\n\t * @default 10\r\n\t * @param {number}  value  Length (px)\r\n\t */\r\n\tpublic set pointerLength(value: number) {\r\n\t\tthis.setPropertyValue(\"pointerLength\", value);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Length (px)\r\n\t */\r\n\tpublic get pointerLength(): number {\r\n\t\treturn this.getPropertyValue(\"pointerLength\");\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Width (px)\r\n\t */\r\n\tpublic get pointerBaseWidth(): number {\r\n\t\treturn this.getPropertyValue(\"pointerBaseWidth\");\r\n\t}\r\n\r\n\t/**\r\n\t * X coordinate the shape is pointing to.\r\n\t *\r\n\t * @param {number}  value  X\r\n\t */\r\n\tpublic set pointerX(value: number) {\r\n\t\tthis.setPropertyValue(\"pointerX\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} X\r\n\t */\r\n\tpublic get pointerX(): number {\r\n\t\treturn this.getPropertyValue(\"pointerX\");\r\n\t}\r\n\r\n\t/**\r\n\t * Y coordinate the shape is pointing to.\r\n\t *\r\n\t * @param {number}  value  Y\r\n\t */\r\n\tpublic set pointerY(value: number) {\r\n\t\tthis.setPropertyValue(\"pointerY\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Y\r\n\t */\r\n\tpublic get pointerY(): number {\r\n\t\treturn this.getPropertyValue(\"pointerY\");\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/elements/PointedShape.ts","/**\r\n * Module for \"Drop Shadow\" filter.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Filter, FilterProperties } from \"./Filter\";\r\nimport { AMElement } from \"../AMElement\";\r\nimport { Group } from \"../Group\";\r\nimport { Color } from \"../../utils/Color\";\r\nimport { InterfaceColorSet } from \"../../utils/InterfaceColorSet\";\r\nimport { registry } from \"../../Registry\";\r\nimport * as $type from \"../../utils/Type\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines additional properties relative to the \"Drop Shadow\" filter\r\n */\r\nexport interface DropShadowFilterProperties extends FilterProperties {\r\n\r\n\t/**\r\n\t * Horizontal offset in pixels.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tdx: number;\r\n\r\n\t/**\r\n\t * Vertical offset in pixels.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tdy: number;\r\n\r\n\t/**\r\n\t * Blur.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tblur: number;\r\n\r\n\t/**\r\n\t * Shadow opacity. (0-1)\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\topacity: number;\r\n\r\n\t/**\r\n\t * Shadow color.\r\n\t *\r\n\t * @type {Color}\r\n\t */\r\n\tcolor: Color;\r\n\r\n};\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Creats a \"Drop Shadow\" filter.\r\n */\r\nexport class DropShadowFilter extends Filter {\r\n\r\n\t/**\r\n\t * Defines property types.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {DropShadowFilterProperties}\r\n\t */\r\n\tpublic _properties!: DropShadowFilterProperties;\r\n\r\n\t/**\r\n\t * A storage for Filter property/value pairs.\r\n\t *\r\n\t * @see [@link DropShadowFilterProperties]\r\n\t * @type {Dictionary<DropShadowFilterProperties, any>}\r\n\t */\r\n\t//public propertyValues: Dictionary<DropShadowFilterProperties, any>;\r\n\r\n\r\n\t/**\r\n\t * Reference to the `<feGaussianBlur>` element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {AMElement}\r\n\t */\r\n\tpublic feGaussianBlur: AMElement;\r\n\r\n\t/**\r\n\t * Reference to the `<feOffset>` element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {AMElement}\r\n\t */\r\n\tpublic feOffset: AMElement;\r\n\r\n\t/**\r\n\t * Reference to the `<feFlood>` element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {AMElement}\r\n\t */\r\n\tpublic feFlood: AMElement;\r\n\r\n\t/**\r\n\t * Reference to the `<feFlood>` element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {AMElement}\r\n\t */\r\n\tpublic feComposite: AMElement;\r\n\r\n\t/**\r\n\t * Reference to the `<feMerge>` element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Group}\r\n\t */\r\n\tpublic feMerge: Group;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t * * Creates primitve (effect) elements\r\n\t * * Sets default properties\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.className = \"DropShadowFilter\";\r\n\r\n\t\t// Create elements\r\n\t\t// NOTE: we do not need to add each individual element to `_disposers`\r\n\t\t// because `filterPrimitives` has an event handler which automatically adds\r\n\t\t// anything added to it to `_disposers`\r\n\r\n\t\tthis.feGaussianBlur = this.paper.add(\"feGaussianBlur\");\r\n\t\tthis.feGaussianBlur.attr({ \"result\": \"blurOut\", \"in\": \"SourceGraphic\" });\r\n\t\tthis.filterPrimitives.push(this.feGaussianBlur);\r\n\r\n\t\tthis.feOffset = this.paper.add(\"feOffset\");\r\n\t\tthis.feOffset.attr({ \"result\": \"offsetBlur\" });\r\n\t\tthis.filterPrimitives.push(this.feOffset);\r\n\r\n\t\tthis.feFlood = this.paper.add(\"feFlood\");\r\n\t\tthis.filterPrimitives.push(this.feFlood);\r\n\r\n\t\tthis.feComposite = this.paper.add(\"feComposite\");\r\n\t\tthis.feComposite.attr({ \"in2\": \"offsetBlur\", operator: \"in\" });\r\n\t\tthis.filterPrimitives.push(this.feComposite);\r\n\r\n\t\tthis.feMerge = this.paper.addGroup(\"feMerge\");\r\n\t\tthis.feMerge.add(this.paper.add(\"feMergeNode\"));\r\n\t\tthis.feMerge.add(this.paper.add(\"feMergeNode\").attr({ \"in\": \"SourceGraphic\" }));\r\n\t\tthis.filterPrimitives.push(this.feMerge);\r\n\r\n\t\t// Set default properties\r\n\t\tthis.color = new InterfaceColorSet().getFor(\"alternativeBackground\");\r\n\t\tthis.width = 200;\r\n\t\tthis.height = 200;\r\n\t\tthis.blur = 1.5;\r\n\t\tthis.dx = 3;\r\n\t\tthis.dy = 3;\r\n\t\tthis.opacity = 0.5;\r\n\r\n\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Shadow color.\r\n\t *\r\n\t * @param {Color}  value  Color\r\n\t */\r\n\tpublic set color(value: Color) {\r\n\t\tthis.properties.color = value;\r\n\t\tthis.feFlood.attr({ \"flood-color\": value });\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Color} Color\r\n\t */\r\n\tpublic get color(): Color {\r\n\t\treturn this.properties.color;\r\n\t}\r\n\r\n\t/**\r\n\t * Opacity of the shadow. (0-1)\r\n\t *\r\n\t * @param {number}  value  Opacity (0-1)\r\n\t */\r\n\tpublic set opacity(value: number) {\r\n\t\tthis.properties.opacity = value;\r\n\t\tthis.feFlood.attr({ \"flood-opacity\": value });\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Opacity (0-1)\r\n\t */\r\n\tpublic get opacity(): number {\r\n\t\treturn this.properties.opacity;\r\n\t}\r\n\r\n\t/**\r\n\t * Horizontal offset in pixels.\r\n\t *\r\n\t * @param {number}  value  Horizontal offset (px)\r\n\t */\r\n\tpublic set dx(value: number) {\r\n\t\tthis.properties.dx = value;\r\n\t\tthis.feOffset.attr({ \"dx\": value / this.scale });\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Horizontal offset (px)\r\n\t */\r\n\tpublic get dx(): number {\r\n\t\treturn this.properties.dx;\r\n\t}\r\n\r\n\t/**\r\n\t * Vertical offset in pixels.\r\n\t *\r\n\t * @param {number} value Vertical offset (px)\r\n\t */\r\n\tpublic set dy(value: number) {\r\n\t\tthis.properties.dy = value;\r\n\t\tthis.feOffset.attr({ \"dy\": value / this.scale });\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Vertical offset (px)\r\n\t */\r\n\tpublic get dy(): number {\r\n\t\treturn this.properties.dy;\r\n\t}\r\n\r\n\t/**\r\n\t * Blur.\r\n\t *\r\n\t * @param {number}  value  Blur\r\n\t */\r\n\tpublic set blur(value: number) {\r\n\t\tthis.properties.blur = value;\r\n\t\tthis.feGaussianBlur.attr({ \"stdDeviation\": value / this.scale });\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Blur\r\n\t */\r\n\tpublic get blur(): number {\r\n\t\treturn this.properties.blur;\r\n\t}\r\n\r\n\t/**\r\n\t * [updateScale description]\r\n\t *\r\n\t * @todo Description\r\n\t */\r\n\tprotected updateScale() {\r\n\t\tthis.dx = this.dx;\r\n\t\tthis.dy = this.dy;\r\n\t\tthis.blur = this.blur;\r\n\t}\r\n\r\n}\r\n\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"DropShadowFilter\"] = DropShadowFilter;\n\n\n// WEBPACK FOOTER //\n// ../../../../../../src/.internal/core/rendering/filters/DropShadowFilter.ts","/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { TimeUnit } from \"../defs/TimeUnit\";\r\nimport * as $type from \"../utils/Type\";\r\n\r\n/**\r\n * Maps time period names to their numeric representations in milliseconds.\r\n *\r\n * @ignore Exclude from docs\r\n */\r\nexport var timeUnitDurations: {[Key in TimeUnit]: number } = {\r\n\tmillisecond: 1,\r\n\tsecond: 1000,\r\n\tminute: 60000,\r\n\thour: 3600000,\r\n\tday: 86400000,\r\n\tweek: 604800000,\r\n\tmonth: 2592000000,\r\n\tyear: 31536000000\r\n};\r\n\r\n/**\r\n * Returns the next time unit that goes after source `unit`.\r\n *\r\n * E.g. \"hour\" is the next unit after \"minute\", etc.\r\n *\r\n * @ignore Exclude from docs\r\n * @param  {TimeUnit}            unit  Source time unit\r\n * @return {Optional<TimeUnit>}        Next time unit\r\n */\r\nexport function getNextUnit(unit: TimeUnit): $type.Optional<TimeUnit> {\r\n\tswitch (unit) {\r\n\t\tcase \"year\":\r\n\t\t\treturn\r\n\r\n\t\tcase \"month\":\r\n\t\t\treturn \"year\";\r\n\r\n\t\tcase \"week\":\r\n\t\t\treturn \"month\";\r\n\r\n\t\tcase \"day\":\r\n\t\t\treturn \"month\"; // not a mistake\r\n\r\n\t\tcase \"hour\":\r\n\t\t\treturn \"day\";\r\n\r\n\t\tcase \"minute\":\r\n\t\t\treturn \"hour\";\r\n\r\n\t\tcase \"second\":\r\n\t\t\treturn \"minute\"\r\n\r\n\t\tcase \"millisecond\":\r\n\t\t\treturn \"second\";\r\n\t}\r\n}\r\n\r\n/**\r\n * Returns number of milliseconds in the `count` of time `unit`.\r\n *\r\n * Available units: \"millisecond\", \"second\", \"minute\", \"hour\", \"day\", \"week\",\r\n * \"month\", and \"year\".\r\n *\r\n * @ignore Exclude from docs\r\n * @param  {TimeUnit}  unit   Time unit\r\n * @param  {number}    count  Number of units\r\n * @return {number}           Milliseconds\r\n */\r\nexport function getDuration(unit: TimeUnit, count?: number): number {\r\n\tif (!$type.hasValue(count)) {\r\n\t\tcount = 1;\r\n\t}\r\n\treturn timeUnitDurations[unit] * count;\r\n}\r\n\r\n/**\r\n * Returns a copy of the `Date` object.\r\n *\r\n * @ignore Exclude from docs\r\n * @param  {Date}  date  Source date\r\n * @return {Date}        Copy\r\n */\r\nexport function copy(date: Date): Date {\r\n\treturn new Date(date.getTime()); // todo: check if this is ok. new Date(date) used to strip milliseconds on FF in v3\r\n}\r\n\r\n/**\r\n * Checks if the `unit` part of two `Date` objects do not match. Two dates\r\n * represent a \"range\" of time, rather the same time date.\r\n *\r\n * @ignore Exclude from docs\r\n * @param  {Date}      dateOne  Date 1\r\n * @param  {Date}      dateTwo  Date 2\r\n * @param  {TimeUnit}  unit     Time unit to check\r\n * @return {boolean}            Range?\r\n */\r\nexport function checkChange(dateOne: Date, dateTwo: Date, unit: TimeUnit): boolean {\r\n\r\n\tswitch (unit) {\r\n\t\tcase \"year\":\r\n\t\t\tif (dateOne.getFullYear() != dateTwo.getFullYear()) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase \"month\":\r\n\t\t\tif (dateOne.getMonth() != dateTwo.getMonth()) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"day\":\r\n\t\t\tif (dateOne.getDate() != dateTwo.getDate()) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"hour\":\r\n\t\t\tif (dateOne.getHours() != dateTwo.getHours()) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"minute\":\r\n\t\t\tif (dateOne.getMinutes() != dateTwo.getMinutes()) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"second\":\r\n\t\t\tif (dateOne.getSeconds() != dateTwo.getSeconds()) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"millisecond\":\r\n\t\t\tif (dateOne.getTime() != dateTwo.getTime()) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t}\r\n\r\n\tlet nextUnit: $type.Optional<TimeUnit> = getNextUnit(unit);\r\n\tif (nextUnit) {\r\n\t\treturn checkChange(dateOne, dateTwo, nextUnit);\r\n\t}\r\n\telse {\r\n\t\treturn false;\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Adds `count` of time `unit` to the source date. Returns a new `Date` object.\r\n *\r\n * @ignore Exclude from docs\r\n * @param  {Date}      date   Source date\r\n * @param  {TimeUnit}  unit   Time unit\r\n * @param  {number}    count  Number of units to add\r\n * @return {Date}             New date\r\n */\r\nexport function add(date: Date, unit: TimeUnit, count: number): Date {\r\n\tlet year: number = date.getFullYear();\r\n\tlet month: number = date.getMonth();\r\n\tlet day: number = date.getDate();\r\n\tlet hours: number = date.getHours();\r\n\tlet minutes: number = date.getMinutes();\r\n\tlet seconds: number = date.getSeconds();\r\n\tlet milliseconds: number = date.getMilliseconds();\r\n\t//let weekDay: number = date.getDay();\r\n\r\n\tswitch (unit) {\r\n\t\tcase \"year\":\r\n\t\t\tdate.setFullYear(year + count);\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"month\":\r\n\t\t\tdate.setMonth(month + count);\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"week\":\r\n\t\t\tdate.setDate(day + count * 7);\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"day\":\r\n\t\t\tdate.setDate(day + count);\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"hour\":\r\n\t\t\tdate.setHours(hours + count);\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"minute\":\r\n\t\t\tdate.setMinutes(minutes + count);\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"second\":\r\n\t\t\tdate.setSeconds(seconds + count);\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"millisecond\":\r\n\t\t\tdate.setMilliseconds(milliseconds + count);\r\n\t\t\tbreak;\r\n\t}\r\n\r\n\treturn date;\r\n}\r\n\r\n/**\r\n * \"Rounds\" the date to specific time unit.\r\n *\r\n * @ignore Exclude from docs\r\n * @param  {Date}      date             Source date\r\n * @param  {TimeUnit}  unit             Time unit\r\n * @param  {number}    count            Number of units to round to\r\n * @param  {number}    firstDateOfWeek  First day of week\r\n * @return {Date}                       New date\r\n */\r\nexport function round(date: Date, unit: TimeUnit, count?: number, firstDateOfWeek?: number): Date {\r\n\r\n\tif (!$type.isNumber(count)) {\r\n\t\tcount = 1;\r\n\t}\r\n\r\n\tif (!$type.isNumber(firstDateOfWeek)) {\r\n\t\tfirstDateOfWeek = 1;\r\n\t}\r\n\r\n\tlet year: number = date.getFullYear();\r\n\tlet month: number = date.getMonth();\r\n\tlet day: number = date.getDate();\r\n\tlet hours: number = date.getHours();\r\n\tlet minutes: number = date.getMinutes();\r\n\tlet seconds: number = date.getSeconds();\r\n\tlet milliseconds: number = date.getMilliseconds();\r\n\tlet weekDay: number = date.getDay();\r\n\r\n\tswitch (unit) {\r\n\t\tcase \"year\":\r\n\t\t\tyear = Math.floor(year / count) * count;\r\n\t\t\tmonth = 0;\r\n\t\t\tday = 1;\r\n\t\t\thours = 0;\r\n\t\t\tminutes = 0;\r\n\t\t\tseconds = 0;\r\n\t\t\tmilliseconds = 0;\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"month\":\r\n\t\t\tmonth = Math.floor(month / count) * count;\r\n\t\t\tday = 1;\r\n\t\t\thours = 0;\r\n\t\t\tminutes = 0;\r\n\t\t\tseconds = 0;\r\n\t\t\tmilliseconds = 0;\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"week\":\r\n\t\t\t// todo: rounding when count is not 1\r\n\t\t\tif (weekDay >= firstDateOfWeek) {\r\n\t\t\t\tday = day - weekDay + firstDateOfWeek;\r\n\t\t\t} else {\r\n\t\t\t\tday = day - (7 + weekDay) + firstDateOfWeek;\r\n\t\t\t}\r\n\r\n\t\t\thours = 0;\r\n\t\t\tminutes = 0;\r\n\t\t\tseconds = 0;\r\n\t\t\tmilliseconds = 0;\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"day\":\r\n\t\t\tday = Math.floor(day / count) * count;\r\n\t\t\tday = day;\r\n\t\t\thours = 0;\r\n\t\t\tminutes = 0;\r\n\t\t\tseconds = 0;\r\n\t\t\tmilliseconds = 0;\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"hour\":\r\n\t\t\thours = Math.floor(hours / count) * count;\r\n\t\t\tminutes = 0;\r\n\t\t\tseconds = 0;\r\n\t\t\tmilliseconds = 0;\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"minute\":\r\n\t\t\tminutes = Math.floor(minutes / count) * count;\r\n\t\t\tseconds = 0;\r\n\t\t\tmilliseconds = 0;\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"second\":\r\n\t\t\tseconds = Math.floor(seconds / count) * count;\r\n\t\t\tmilliseconds = 0;\r\n\t\t\tbreak;\r\n\r\n\t\tcase \"millisecond\":\r\n\t\t\tmilliseconds = Math.floor(milliseconds / count) * count;\r\n\t\t\tbreak;\r\n\t}\r\n\r\n\tdate.setFullYear(year, month, day);\r\n\tdate.setHours(hours, minutes, seconds, milliseconds);\r\n\r\n\treturn date;\r\n}\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/utils/Time.ts","/**\r\n * Zoom out button functionality.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Button, IButtonProperties, IButtonAdapters, IButtonEvents } from \"./Button\";\r\nimport { Sprite, SpriteEventDispatcher, AMEvent } from \"../Sprite\";\r\nimport { RoundedRectangle } from \"./RoundedRectangle\";\r\nimport { registry } from \"../Registry\";\r\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\r\nimport * as $path from \"../rendering/Path\";\r\nimport * as $type from \"../../core/utils/Type\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[ZoomOutButton]].\r\n */\r\nexport interface IZoomOutButtonProperties extends IButtonProperties { }\r\n\r\n/**\r\n * Defines events for [[ZoomOutButton]].\r\n */\r\nexport interface IZoomOutButtonEvents extends IButtonEvents { }\r\n\r\n/**\r\n * Defines adapters for [[ZoomOutButton]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface IZoomOutButtonAdapters extends IButtonAdapters, IZoomOutButtonProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Creates a zoom out button.\r\n *\r\n * @see {@link IZoomOutButtonEvents} for a list of available events\r\n * @see {@link IZoomOutButtonAdapters} for a list of available Adapters\r\n */\r\nexport class ZoomOutButton extends Button {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IZoomOutButtonProperties}\r\n\t */\r\n\tpublic _properties!: IZoomOutButtonProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IZoomOutButtonAdapters}\r\n\t */\r\n\tpublic _adapter!: IZoomOutButtonAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IZoomOutButtonEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IZoomOutButtonEvents;\r\n\r\n\t/**\r\n\t * Orientation of the resize direction.\r\n\t *\r\n\t * @deprecated Not used\r\n\t * @type {Orientation}\r\n\t */\r\n\t//protected _orientation: Orientation;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\r\n\t\t// Init\r\n\t\tsuper();\r\n\t\tthis.className = \"ZoomOutButton\";\r\n\r\n\t\tthis.padding(9, 9, 9, 9);\r\n\t\t//this.dx = - 5;\r\n\t\t//this.dy = 5;\r\n\r\n\t\tthis.showSystemTooltip = true;\r\n\r\n\t\tlet interfaceColors = new InterfaceColorSet();\r\n\r\n\t\tlet background: RoundedRectangle = this.background;\r\n\t\tbackground.cornerRadius(20, 20, 20, 20);\r\n\t\tbackground.fill = interfaceColors.getFor(\"primaryButton\");\r\n\t\tbackground.stroke = interfaceColors.getFor(\"primaryButtonStroke\");\r\n\t\tbackground.strokeOpacity = 0;\r\n\r\n\t\tbackground.states.getKey(\"hover\").properties.fill = interfaceColors.getFor(\"primaryButtonHover\");\r\n\t\tbackground.states.getKey(\"down\").properties.fill = interfaceColors.getFor(\"primaryButtonActive\");\r\n\r\n\t\t// Create an icon\r\n\t\tlet icon: Sprite = new Sprite();\r\n\t\ticon.element = this.paper.add(\"path\");\r\n\r\n\t\tlet path = $path.moveTo({ x: 0, y: 0 });\r\n\t\tpath += $path.lineTo({ x: 11, y: 0 });\r\n\t\ticon.element.attr({ \"d\": path });\r\n\r\n\t\ticon.pixelPerfect = true;\r\n\t\ticon.padding(8, 3, 8, 3);\r\n\t\ticon.stroke = interfaceColors.getFor(\"primaryButtonText\");\r\n\t\tthis.icon = icon;\r\n\r\n\t\t// Apply theme\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Sets defaults that instantiate some objects that rely on parent, so they\r\n\t * cannot be set in constructor.\r\n\t */\r\n\tprotected applyInternalDefaults(): void {\r\n\t\tsuper.applyInternalDefaults();\r\n\t\tif (!$type.hasValue(this.readerTitle)) {\r\n\t\t\tthis.readerTitle = this.language.translate(\"Zoom Out\");\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"ZoomOutButton\"] = ZoomOutButton;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/elements/ZoomOutButton.ts","/**\r\n * Functionality for drawing waved circles.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Circle, ICircleProperties, ICircleAdapters, ICircleEvents } from \"./Circle\";\r\nimport { SpriteEventDispatcher, AMEvent } from \"../Sprite\";\r\nimport { IWavedShape } from \"../defs/IWavedShape\";\r\nimport { IPoint } from \"../defs/IPoint\";\r\nimport { Percent } from \"../utils/Percent\";\r\nimport { registry } from \"../Registry\";\r\nimport * as $path from \"../rendering/Path\";\r\nimport * as $math from \"../utils/Math\";\r\nimport * as $utils from \"../utils/Utils\";\r\nimport * as $smoothing from \"../../core/rendering/Smoothing\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[WavedCircle]].\r\n */\r\nexport interface IWavedCircleProperties extends ICircleProperties {\r\n\r\n\t/**\r\n\t * Wave length in pixels.\r\n\t *\r\n\t * @default 16\r\n\t * @type {number}\r\n\t */\r\n\twaveLength?: number;\r\n\r\n\t/**\r\n\t * Wave height in pixels.\r\n\t *\r\n\t * @default 4\r\n\t * @type {number}\r\n\t */\r\n\twaveHeight?: number;\r\n\r\n\t/**\r\n\t * Wave tension.\r\n\t *\r\n\t * @default 0.8\r\n\t * @type {number}\r\n\t */\r\n\ttension?: number;\r\n\r\n\t/**\r\n\t * Inner radius of the circle in pixels.\r\n\t *\r\n\t * @type {number | Percent}\r\n\t */\r\n\tinnerRadius?: number | Percent;\r\n\r\n}\r\n\r\n/**\r\n * Defines events for [[WavedCircle]].\r\n */\r\nexport interface IWavedCircleEvents extends ICircleEvents { }\r\n\r\n/**\r\n * Defines adapters for [[WavedCircle]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface IWavedCircleAdapters extends ICircleAdapters, IWavedCircleProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Draws a waved circle.\r\n *\r\n * @see {@link IWavedCircleEvents} for a list of available events\r\n * @see {@link IWavedCircleAdapters} for a list of available Adapters\r\n */\r\nexport class WavedCircle extends Circle implements IWavedShape {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IWavedCircleProperties}\r\n\t */\r\n\tpublic _properties!: IWavedCircleProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IWavedCircleAdapters}\r\n\t */\r\n\tpublic _adapter!: IWavedCircleAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IWavedCircleEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IWavedCircleEvents;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"WavedCircle\";\r\n\t\tthis.element = this.paper.add(\"path\");\r\n\t\tthis.waveLength = 16;\r\n\t\tthis.waveHeight = 4;\r\n\r\n\t\tthis.fill = undefined;\r\n\t\tthis.fillOpacity = 0;\r\n\t\tthis.tension = 0.8;\r\n\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Draws the waved line.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic draw(): void {\r\n\t\tlet path: string = \"\";\r\n\r\n\t\tlet radius: number = this.pixelRadius;\r\n\r\n\t\tif (radius > 0) {\r\n\t\t\tlet points: IPoint[] = this.getPoints(radius);\r\n\t\t\tpath = $path.moveTo(points[0]) + new $smoothing.Tension(this.tension, this.tension).smooth(points);\r\n\t\t}\r\n\r\n\t\tlet innerRadius: number = this.pixelInnerRadius;\r\n\t\tif (innerRadius > 0) {\r\n\t\t\tlet points: IPoint[] = this.getPoints(innerRadius);\r\n\t\t\tpoints.reverse();\r\n\t\t\tpath += $path.moveTo(points[0]) + new $smoothing.Tension(this.tension, this.tension).smooth(points);\r\n\t\t}\r\n\r\n\t\tthis.element.attr({ \"d\": path });\r\n\t}\r\n\r\n\t/**\r\n\t * Returns points that circle consists of.\r\n\t *\r\n\t * @param  {number}    radius  Radius (px)\r\n\t * @return {IPoint[]}          Points\r\n\t */\r\n\tprotected getPoints(radius: number): IPoint[] {\r\n\t\tlet circleLength: number = radius * Math.PI * 2;\r\n\t\tlet halfWaveHeight: number = this.waveHeight / 2;\r\n\r\n\t\tlet waveLength = circleLength / Math.round(circleLength / this.waveLength);\r\n\t\tlet halfWaveLength: number = waveLength / 2;\r\n\t\tlet points: IPoint[] = [];\r\n\r\n\t\tlet count = circleLength / waveLength;\r\n\t\tfor (let i: number = 0; i <= count; i++) {\r\n\t\t\tlet angle1: number = (i * waveLength) / circleLength * 360;\r\n\t\t\tlet angle2: number = (i * waveLength + halfWaveLength) / circleLength * 360;\r\n\r\n\t\t\tpoints.push({ x: (radius - halfWaveHeight) * $math.cos(angle1), y: (radius - halfWaveHeight) * $math.sin(angle1) });\r\n\t\t\tpoints.push({ x: (radius + halfWaveHeight) * $math.cos(angle2), y: (radius + halfWaveHeight) * $math.sin(angle2) });\r\n\t\t}\r\n\t\tpoints.pop();\r\n\t\treturn points;\r\n\t}\r\n\r\n\t/**\r\n\t * Inner radius of the circle in pixels (absolute) or [[Percent]] (relative).\r\n\t *\r\n\t * @param {number | Percent}  value  Inner radius\r\n\t */\r\n\tpublic set innerRadius(value: number | Percent) {\r\n\t\tthis.setPropertyValue(\"innerRadius\", value, true);\r\n\t\tthis.invalidate();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Inner radius\r\n\t */\r\n\tpublic get innerRadius(): number | Percent {\r\n\t\treturn this.getPropertyValue(\"innerRadius\");\r\n\t}\r\n\r\n\t/**\r\n\t * Calculated inner radius of the circle in pixels.\r\n\t *\r\n\t * @readonly\r\n\t * @return {number} Inner radius (px)\r\n\t */\r\n\tpublic get pixelInnerRadius(): number {\r\n\t\treturn $utils.relativeToValue(this.innerRadius, $math.min(this.innerWidth / 2, this.innerHeight / 2));\r\n\t}\r\n\r\n\t/**\r\n\t * Wave length in pixels.\r\n\t *\r\n\t * @default 16\r\n\t * @param {number}  value  Wave length (px)\r\n\t */\r\n\tpublic set waveLength(value: number) {\r\n\t\tthis.setPropertyValue(\"waveLength\", value);\r\n\t\tthis.invalidate();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Wave length (px)\r\n\t */\r\n\tpublic get waveLength(): number {\r\n\t\treturn this.getPropertyValue(\"waveLength\");\r\n\t}\r\n\r\n\t/**\r\n\t * Wave height in pixels.\r\n\t *\r\n\t * @default 4\r\n\t * @param {number}  value  Wave height (px)\r\n\t */\r\n\tpublic set waveHeight(value: number) {\r\n\t\tthis.setPropertyValue(\"waveHeight\", value);\r\n\t\tthis.invalidate();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Wave height (px)\r\n\t */\r\n\tpublic get waveHeight(): number {\r\n\t\treturn this.getPropertyValue(\"waveHeight\");\r\n\t}\r\n\r\n\t/**\r\n\t * Tension of the wave.\r\n\t *\r\n\t * @default 0.8\r\n\t * @param {number}  value  Tension\r\n\t */\r\n\tpublic set tension(value: number) {\r\n\t\tthis.setPropertyValue(\"tension\", value);\r\n\t\tthis.invalidate();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Tension\r\n\t */\r\n\tpublic get tension(): number {\r\n\t\treturn this.getPropertyValue(\"tension\");\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"WavedCircle\"] = WavedCircle;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/elements/WavedCircle.ts","/**\r\n * Functionality for drawing a trapezoid.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Sprite, ISpriteProperties, ISpriteAdapters, ISpriteEvents, SpriteEventDispatcher, AMEvent } from \"../Sprite\";\r\nimport { Percent, percent } from \"../../core/utils/Percent\";\r\nimport { registry } from \"../Registry\";\r\nimport * as $utils from \"../utils/Utils\";\r\nimport * as $type from \"../utils/Type\";\r\nimport * as $path from \"../rendering/Path\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[Trapezoid]].\r\n */\r\nexport interface ITrapezoidProperties extends ISpriteProperties {\r\n\r\n\t/**\r\n\t * Wdith of the top side. Absolute (px) or relative ([[Percent]]).\r\n\t *\r\n\t * @default Percent(100)\r\n\t * @type {number | Percent}\r\n\t */\r\n\ttopSide?: number | Percent;\r\n\r\n\t/**\r\n\t * Wdith of the bottom side. Absolute (px) or relative ([[Percent]]).\r\n\t *\r\n\t * @default Percent(100)\r\n\t * @type {number | Percent}\r\n\t */\r\n\tbottomSide?: number | Percent;\r\n\r\n\t/**\r\n\t * Height of the left side. Absolute (px) or relative ([[Percent]]).\r\n\t *\r\n\t * @default Percent(100)\r\n\t * @type {number | Percent}\r\n\t */\r\n\tleftSide?: number | Percent;\r\n\r\n\t/**\r\n\t * Height of the right side. Absolute (px) or relative ([[Percent]]).\r\n\t *\r\n\t * @default Percent(100)\r\n\t * @type {number | Percent}\r\n\t */\r\n\trightSide?: number | Percent;\r\n\r\n\t/**\r\n\t * A relative vertical position of the \"neck\". If the top and bottom sides\r\n\t * are of different width, and `horizontalNeck` is set, a choke point\r\n\t * will be created at that position, creating a funnel shape.\r\n\t *\r\n\t * @type {Percent}\r\n\t */\r\n\thorizontalNeck?: Percent;\r\n\r\n\t/**\r\n\t * A relative horizontal position of the \"neck\". If the left and right sides\r\n\t * are of different height, and `verticalNeck` is set, a choke point\r\n\t * will be created at that position, creating a funnel shape.\r\n\t *\r\n\t * @type {Percent}\r\n\t */\r\n\tverticalNeck?: Percent;\r\n\r\n}\r\n\r\n/**\r\n * Defines events for [[Trapezoid]].\r\n */\r\nexport interface ITrapezoidEvents extends ISpriteEvents { }\r\n\r\n/**\r\n * Defines adapters for [[Trapezoid]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface ITrapezoidAdapters extends ISpriteAdapters, ITrapezoidProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Used to draw a Trapezoid.\r\n *\r\n * @see {@link ITrapezoidEvents} for a list of available events\r\n * @see {@link ITrapezoidAdapters} for a list of available Adapters\r\n */\r\nexport class Trapezoid extends Sprite {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ITrapezoidProperties}\r\n\t */\r\n\tpublic _properties!: ITrapezoidProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ITrapezoidAdapters}\r\n\t */\r\n\tpublic _adapter!: ITrapezoidAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {ITrapezoidEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: ITrapezoidEvents;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"Trapezoid\";\r\n\t\tthis.element = this.paper.add(\"path\");\r\n\r\n\t\tthis.topSide = percent(100);\r\n\t\tthis.bottomSide = percent(100);\r\n\t\tthis.leftSide = percent(100);\r\n\t\tthis.rightSide = percent(100);\r\n\r\n\t\tthis.isMeasured = false; // todo: add measureElement\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Draws the element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic draw(): void {\r\n\t\tsuper.draw();\r\n\t\tlet w: number = this.pixelWidth;\r\n\t\tlet h: number = this.pixelHeight;\r\n\r\n\t\tlet ts: number = $utils.relativeToValue(this.topSide, w);\r\n\t\tlet bs: number = $utils.relativeToValue(this.bottomSide, w);\r\n\t\tlet ls: number = $utils.relativeToValue(this.leftSide, h);\r\n\t\tlet rs: number = $utils.relativeToValue(this.rightSide, h);\r\n\r\n\t\t// 1----2\r\n\t\t// |    |\r\n\t\t// 4----3\r\n\r\n\t\tlet x0: number = (w - ts) / 2;\r\n\t\tlet y0: number = (h - ls) / 2;\r\n\r\n\t\tlet x1: number = w - (w - ts) / 2;\r\n\t\tlet y1: number = (h - rs) / 2;\r\n\r\n\t\tlet x2: number = w - (w - bs) / 2;\r\n\t\tlet y2: number = h - (h - rs) / 2;\r\n\r\n\t\tlet x3: number = (w - bs) / 2;\r\n\t\tlet y3: number = h - (h - ls) / 2;\r\n\r\n\t\tlet mt: string = \"\";\r\n\t\tlet mr: string = \"\";\r\n\t\tlet mb: string = \"\";\r\n\t\tlet ml: string = \"\";\r\n\r\n\t\tif ($type.hasValue(this.horizontalNeck)) {\r\n\t\t\tlet hn: number = this.horizontalNeck.value;\r\n\t\t\tmt = $path.lineTo({ x: w * hn, y: Math.max(y0, y1) });\r\n\t\t\tmb = $path.lineTo({ x: w * hn, y: Math.min(y2, y3) });\r\n\t\t}\r\n\r\n\t\tif ($type.hasValue(this.verticalNeck)) {\r\n\t\t\tlet vn: number = this.verticalNeck.value;\r\n\t\t\tmr = $path.lineTo({ x: Math.min(x1, x2), y: h * vn });\r\n\t\t\tml = $path.lineTo({ x: Math.max(x0, x3), y: h * vn });\r\n\t\t}\r\n\r\n\r\n\t\tlet path: string = $path.moveTo({ x: x0, y: y0 })\r\n\t\t\t+ mt\r\n\t\t\t+ $path.lineTo({ x: x1, y: y1 })\r\n\t\t\t+ mr\r\n\t\t\t+ $path.lineTo({ x: x2, y: y2 })\r\n\t\t\t+ mb\r\n\t\t\t+ $path.lineTo({ x: x3, y: y3 })\r\n\t\t\t+ ml\r\n\t\tthis.element.attr({ \"d\": path });\r\n\t}\r\n\r\n\t/**\r\n\t * Wdith of the top side. Absolute (px) or relative ([[Percent]]).\r\n\t *\r\n\t * @default Percent(100)\r\n\t * @param {number | Percent}  value  Width\r\n\t */\r\n\tpublic set topSide(value: number | Percent) {\r\n\t\tthis.setPropertyValue(\"topSide\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Width\r\n\t */\r\n\tpublic get topSide(): number | Percent {\r\n\t\treturn this.getPropertyValue(\"topSide\");\r\n\t}\r\n\r\n\t/**\r\n\t * Wdith of the bottom side. Absolute (px) or relative ([[Percent]]).\r\n\t *\r\n\t * @default Percent(100)\r\n\t * @param {number | Percent}  value  Width\r\n\t */\r\n\tpublic set bottomSide(value: number | Percent) {\r\n\t\tthis.setPropertyValue(\"bottomSide\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Width\r\n\t */\r\n\tpublic get bottomSide(): number | Percent {\r\n\t\treturn this.getPropertyValue(\"bottomSide\");\r\n\t}\r\n\r\n\t/**\r\n\t * Height of the left side. Absolute (px) or relative ([[Percent]]).\r\n\t *\r\n\t * @default Percent(100)\r\n\t * @param {number | Percent}  value  Height\r\n\t */\r\n\tpublic set leftSide(value: number | Percent) {\r\n\t\tthis.setPropertyValue(\"leftSide\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Height\r\n\t */\r\n\tpublic get leftSide(): number | Percent {\r\n\t\treturn this.getPropertyValue(\"leftSide\");\r\n\t}\r\n\r\n\t/**\r\n\t * Height of the right side. Absolute (px) or relative ([[Percent]]).\r\n\t *\r\n\t * @default Percent(100)\r\n\t * @param {number | Percent}  value  Height\r\n\t */\r\n\tpublic set rightSide(value: number | Percent) {\r\n\t\tthis.setPropertyValue(\"rightSide\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Height\r\n\t */\r\n\tpublic get rightSide(): number | Percent {\r\n\t\treturn this.getPropertyValue(\"rightSide\");\r\n\t}\r\n\r\n\t/**\r\n\t * A relative vertical position of the \"neck\". If the top and bottom sides\r\n\t * are of different width, and `horizontalNeck` is set, a choke point\r\n\t * will be created at that position, creating a funnel shape.\r\n\t *\r\n\t * @param {Percent}  value  Horizontal neck position\r\n\t */\r\n\tpublic set horizontalNeck(value: Percent) {\r\n\t\tthis.setPropertyValue(\"horizontalNeck\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Percent} Horizontal neck position\r\n\t */\r\n\tpublic get horizontalNeck(): Percent {\r\n\t\treturn this.getPropertyValue(\"horizontalNeck\");\r\n\t}\r\n\r\n\t/**\r\n\t * A relative horizontal position of the \"neck\". If the left and right sides\r\n\t * are of different height, and `verticalNeck` is set, a choke point\r\n\t * will be created at that position, creating a funnel shape.\r\n\t *\r\n\t * @param {Percent}  value  Vertical neck position\r\n\t */\r\n\tpublic set verticalNeck(value: Percent) {\r\n\t\tthis.setPropertyValue(\"verticalNeck\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Percent} Vertical neck position\r\n\t */\r\n\tpublic get verticalNeck(): Percent {\r\n\t\treturn this.getPropertyValue(\"verticalNeck\");\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"Trapezoid\"] = Trapezoid;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/elements/Trapezoid.ts","/**\r\n * 3D slice module\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Slice, ISliceProperties, ISliceAdapters, ISliceEvents } from \"../Slice\";\r\nimport { Sprite, SpriteEventDispatcher, AMEvent } from \"../../Sprite\";\r\nimport { Container } from \"../../Container\";\r\nimport { IPoint } from \"../../defs/IPoint\";\r\nimport { LightenFilter } from \"../../rendering/filters/LightenFilter\";\r\nimport * as $math from \"../../utils/Math\";\r\nimport * as $path from \"../../rendering/Path\";\r\nimport * as $type from \"../../utils/Type\";\r\n\r\n/**\r\n * Defines properties for [[Slice3D]].\r\n */\r\nexport interface ISlice3DProperties extends ISliceProperties {\r\n\r\n\t/**\r\n\t * Depth (height) of the 3D slice in pixels.\r\n\t *\r\n\t * @default 20\r\n\t * @type {number}\r\n\t */\r\n\tdepth?: number;\r\n\r\n\t/**\r\n\t * Angle of the point of view to the 3D element. (0-360)\r\n\t *\r\n\t * @default 30\r\n\t * @type {number}\r\n\t */\r\n\tangle?: number;\r\n\r\n}\r\n\r\n/**\r\n * Defines events for [[Slice3D]].\r\n */\r\nexport interface ISlice3DEvents extends ISliceEvents { }\r\n\r\n/**\r\n * Defines adapters for [[Slice3D]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface ISlice3DAdapters extends ISliceAdapters, ISlice3DProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Used to draw a 3D slice of a Pie chart.\r\n *\r\n * @see {@link ISlice3DEvents} for a list of available events\r\n * @see {@link ISlice3DAdapters} for a list of available Adapters\r\n */\r\nexport class Slice3D extends Slice {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ISlice3DProperties}\r\n\t */\r\n\tpublic _properties!: ISlice3DProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ISlice3DAdapters}\r\n\t */\r\n\tpublic _adapter!: ISlice3DAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {ISlice3DEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: ISlice3DEvents;\r\n\r\n\t/**\r\n\t * Container element for elements of the 3D sides.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Container}\r\n\t */\r\n\tpublic edge: Container;\r\n\r\n\t/**\r\n\t * Side element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Sprite}\r\n\t */\r\n\tpublic sideA: Sprite;\r\n\r\n\t/**\r\n\t * Side element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Sprite}\r\n\t */\r\n\tpublic sideB: Sprite;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\r\n\t\t// Init\r\n\t\tsuper();\r\n\t\tthis.className = \"Slice3D\";\r\n\t\tthis.layout = \"none\";\r\n\r\n\t\t// Create edge container\r\n\t\tlet edge = this.createChild(Container);\r\n\t\tthis.edge = edge;\r\n\t\tedge.shouldClone = false;\r\n\t\tedge.isMeasured = false;\r\n\r\n\t\tlet lightenFilter: LightenFilter = new LightenFilter();\r\n\t\tlightenFilter.lightness = -0.25;\r\n\t\tedge.filters.push(lightenFilter);\r\n\t\tedge.toBack();\r\n\t\tedge.strokeOpacity = 0;\r\n\t\tthis._disposers.push(edge);\r\n\r\n\t\t// Set defaults\r\n\t\tthis.angle = 30;\r\n\t\tthis.depth = 20;\r\n\r\n\t\t// Create side A element\r\n\t\tlet sideA = this.createChild(Sprite);\r\n\t\tthis.sideA = sideA;\r\n\t\tsideA.shouldClone = false;\r\n\t\tsideA.isMeasured = false;\r\n\t\tsideA.element = this.paper.add(\"path\");\r\n\t\tlet lightenFilterA: LightenFilter = new LightenFilter();\r\n\t\tlightenFilterA.lightness = -0.25;\r\n\t\tsideA.filters.push(lightenFilterA);\r\n\t\tsideA.strokeOpacity = 0;\r\n\t\tthis._disposers.push(sideA);\r\n\r\n\t\t// Crate side B element\r\n\t\tlet sideB = this.createChild(Sprite);\r\n\t\tthis.sideB = sideB;\r\n\t\tsideB.shouldClone = false;\r\n\t\tsideB.isMeasured = false;\r\n\t\tsideB.element = this.paper.add(\"path\");\r\n\t\tlet lightenFilterB: LightenFilter = new LightenFilter();\r\n\t\tlightenFilterB.lightness = -0.25;\r\n\t\tsideB.filters.push(lightenFilterB);\r\n\t\tthis._disposers.push(sideB);\r\n\t\tsideB.strokeOpacity = 0;\r\n\r\n\r\n\t\t// Apply theme\r\n\t\tthis.applyTheme();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Draws the element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic draw(): void {\r\n\t\tsuper.draw();\r\n\r\n\t\t// this should go here to hide 3d slices if arc = 0\r\n\t\tfor (let i: number = 0; i < this.edge.children.length; i++) {\r\n\t\t\tlet slice = this.edge.children.getIndex(i);\r\n\t\t\tif (slice instanceof Slice) {\r\n\t\t\t\tslice.radiusY = this.radiusY;\r\n\t\t\t\tslice.radius = this.radius;\r\n\t\t\t\tslice.fill = this.fill;\r\n\t\t\t\tslice.startAngle = this.startAngle;\r\n\t\t\t\tslice.arc = this.arc;\r\n\t\t\t\tslice.cornerRadius = this.cornerRadius;\r\n\t\t\t\tslice.innerRadius = this.innerRadius;\r\n\t\t\t\tslice.strokeOpacity = 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this.arc !== 0 && this.radius > 0 && this.depth > 0) {\r\n\t\t\tthis.sideB.show(0);\r\n\t\t\tthis.sideA.show(0);\r\n\t\t\tthis.edge.show(0);\r\n\r\n\t\t\tlet startAngle = this.startAngle;\r\n\t\t\tlet arc = this.arc;\r\n\t\t\tlet innerRadius = this.innerRadius;\r\n\t\t\tlet radiusY = this.radiusY;\r\n\t\t\tlet cornerRadius = this.cornerRadius;\r\n\t\t\tlet innerCornerRadius = this.innerCornerRadius;\r\n\t\t\tlet radius = this.radius;\r\n\r\n\t\t\t// this is code duplicate with $path.arc. @todo to think how to avoid it\r\n\r\n\t\t\tlet endAngle = startAngle + arc;\r\n\t\t\tlet crSin = $math.sin($math.min(arc, 45) / 2);\r\n\r\n\t\t\tinnerRadius = innerRadius || 0\r\n\t\t\tradiusY = radiusY || radius;\r\n\t\t\tcornerRadius = cornerRadius || 0;\r\n\t\t\tinnerCornerRadius = innerCornerRadius || cornerRadius;\r\n\r\n\t\t\tlet innerRadiusY = (radiusY / radius) * innerRadius;\r\n\t\t\tlet cornerRadiusY = (radiusY / radius) * cornerRadius;\r\n\t\t\tlet innerCornerRadiusY = (radiusY / radius) * innerCornerRadius;\r\n\r\n\t\t\tcornerRadius = $math.fitToRange(cornerRadius, 0, (radius - innerRadius) / 2);\r\n\t\t\tcornerRadiusY = $math.fitToRange(cornerRadiusY, 0, (radiusY - innerRadiusY) / 2);\r\n\r\n\t\t\tinnerCornerRadius = $math.fitToRange(innerCornerRadius, 0, (radius - innerRadius) / 2);\r\n\t\t\tinnerCornerRadiusY = $math.fitToRange(innerCornerRadiusY, 0, (radiusY - innerRadiusY) / 2);\r\n\r\n\t\t\tcornerRadius = $math.fitToRange(cornerRadius, 0, radius * crSin);\r\n\t\t\tcornerRadiusY = $math.fitToRange(cornerRadiusY, 0, radiusY * crSin);\r\n\r\n\t\t\tinnerCornerRadius = $math.fitToRange(innerCornerRadius, 0, innerRadius * crSin);\r\n\t\t\tinnerCornerRadiusY = $math.fitToRange(innerCornerRadiusY, 0, innerRadiusY * crSin);\r\n\r\n\t\t\t//let crAngle: number = Math.asin(cornerRadius / radius / 2) * $math.DEGREES * 2;\r\n\t\t\t//let crAngleY: number = Math.asin(cornerRadiusY / radiusY / 2) * $math.DEGREES * 2;\r\n\r\n\t\t\tif (innerRadius < innerCornerRadius) {\r\n\t\t\t\tinnerRadius = innerCornerRadius;\r\n\t\t\t}\r\n\r\n\t\t\tif (innerRadiusY < innerCornerRadiusY) {\r\n\t\t\t\tinnerRadiusY = innerCornerRadiusY;\r\n\t\t\t}\r\n\r\n\t\t\tlet crInnerAngle: number = Math.asin(innerCornerRadius / innerRadius / 2) * $math.DEGREES * 2;\r\n\t\t\tlet crInnerAngleY: number = Math.asin(innerCornerRadiusY / innerRadiusY / 2) * $math.DEGREES * 2;\r\n\r\n\t\t\tif (!$type.isNumber(crInnerAngle)) {\r\n\t\t\t\tcrInnerAngle = 0;\r\n\t\t\t}\r\n\t\t\tif (!$type.isNumber(crInnerAngleY)) {\r\n\t\t\t\tcrInnerAngleY = 0;\r\n\t\t\t}\r\n\r\n\t\t\t//let middleAngle = startAngle + arc / 2;\r\n\t\t\t//let mPoint = { x: $math.round($math.cos(middleAngle) * innerRadius, 4), y: $math.round($math.sin(middleAngle) * innerRadiusY, 4) };\r\n\r\n\t\t\tlet a0 = { x: $math.round($math.cos(startAngle) * (innerRadius + innerCornerRadius), 4), y: $math.round($math.sin(startAngle) * (innerRadiusY + innerCornerRadiusY), 4) };\r\n\t\t\tlet b0 = { x: $math.round($math.cos(startAngle) * (radius - cornerRadius), 4), y: $math.round($math.sin(startAngle) * (radiusY - cornerRadiusY), 4) };\r\n\t\t\tlet c0 = { x: $math.round($math.cos(endAngle) * (radius - cornerRadius), 4), y: $math.round($math.sin(endAngle) * (radiusY - cornerRadiusY), 4) };\r\n\t\t\tlet d0 = { x: $math.round($math.cos(endAngle) * (innerRadius + innerCornerRadius), 4), y: $math.round($math.sin(endAngle) * (innerRadiusY + innerCornerRadiusY), 4) };\r\n\t\t\t// end of duplicate\r\n\r\n\t\t\tlet h: number = this.depth;\r\n\t\t\tlet ah: IPoint = { x: a0.x, y: a0.y - h };\r\n\t\t\tlet bh: IPoint = { x: b0.x, y: b0.y - h };\r\n\t\t\tlet ch: IPoint = { x: c0.x, y: c0.y - h };\r\n\t\t\tlet dh: IPoint = { x: d0.x, y: d0.y - h };\r\n\r\n\t\t\tlet pathA: string = $path.moveTo(a0) + $path.lineTo(b0) + $path.lineTo(bh) + $path.lineTo(ah) + $path.closePath();\r\n\t\t\tthis.sideA.element.attr({ \"d\": pathA });\r\n\r\n\t\t\tlet pathB: string = $path.moveTo(c0) + $path.lineTo(d0) + $path.lineTo(dh) + $path.lineTo(ch) + $path.closePath();\r\n\t\t\tthis.sideB.element.attr({ \"d\": pathB });\r\n\r\n\t\t\tif (this.startAngle < 90) {\r\n\t\t\t\tthis.sideA.toBack();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.sideA.toFront();\r\n\t\t\t}\r\n\r\n\t\t\tif (this.startAngle + this.arc > 90) {\r\n\t\t\t\tthis.sideB.toBack();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.sideB.toFront();\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.sideA.hide(0);\r\n\t\t\tthis.sideB.hide(0);\r\n\t\t\tthis.edge.hide(0);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Depth (height) of the 3D slice in pixels.\r\n\t *\r\n\t * @default 20\r\n\t * @param {number}  depth  Depth (px)\r\n\t */\r\n\tpublic set depth(depth: number) {\r\n\t\tif (this.setPropertyValue(\"depth\", depth, true)) {\r\n\t\t\tthis.edge.removeChildren();\r\n\r\n\t\t\tlet d = 10;\r\n\t\t\tif (this.cornerRadius > 2) {\r\n\t\t\t\td = 5;\r\n\t\t\t}\r\n\r\n\t\t\tif (depth > 0) {\r\n\t\t\t\tlet count: number = Math.ceil(this.depth / d);\r\n\t\t\t\tlet step: number = depth / count;\r\n\t\t\t\tfor (let i: number = 0; i <= count; i++) {\r\n\t\t\t\t\tlet slice: Slice = this.edge.createChild(Slice);\r\n\t\t\t\t\tslice.isMeasured = false;\r\n\t\t\t\t\tslice.y = -step * i;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.slice.dy = -this.depth;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Depth (px)\r\n\t */\r\n\tpublic get depth(): number {\r\n\t\treturn this.getPropertyValue(\"depth\");\r\n\t}\r\n\r\n\t/**\r\n\t * Angle of the point of view to the 3D element. (0-360)\r\n\t *\r\n\t * @default 30\r\n\t * @param {number}  value  Angle\r\n\t */\r\n\tpublic set angle(value: number) {\r\n\t\tthis.setPropertyValue(\"angle\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Angle\r\n\t */\r\n\tpublic get angle(): number {\r\n\t\tlet angle: number = this.getPropertyValue(\"angle\");\r\n\t\tif (!$type.isNumber(angle)) {\r\n\t\t\tangle = 0;\r\n\t\t}\r\n\t\treturn angle;\r\n\t}\r\n\r\n\tpublic get radiusY(): number {\r\n\t\tlet radiusY: number = this.getPropertyValue(\"radiusY\");\r\n\t\tif (!$type.isNumber(radiusY)) {\r\n\t\t\tradiusY = this.radius - this.radius * this.angle / 90;\r\n\t\t}\r\n\t\treturn radiusY;\r\n\t}\r\n\r\n\tpublic set radiusY(value: number) {\r\n\t\tthis.setPropertyValue(\"radiusY\", value, true);\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../../src/.internal/core/elements/3d/Slice3D.ts","/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { BaseObject } from \"../../Base\";\r\nimport { LinearGradient } from \"./LinearGradient\";\r\nimport { RadialGradient } from \"./RadialGradient\";\r\nimport { Color } from \"../../utils/Color\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * A base class for color modifiers.\r\n *\r\n * @ignore Exclude from docs\r\n */\r\nexport class ColorModifier extends BaseObject {\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"ColorModifier\";\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Modifies color value.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param  {Color}  value  Original color\r\n\t * @return {Color}         Modified\r\n\t */\r\n\tpublic modify(value: Color): Color | LinearGradient | RadialGradient {\r\n\t\treturn value;\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../../src/.internal/core/rendering/fills/ColorModifier.ts","/**\r\n * Sankey diagram module.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Chart, IChartProperties, IChartDataFields, IChartAdapters, IChartEvents, ChartDataItem } from \"../Chart\";\r\nimport { FlowDiagram, FlowDiagramDataItem, IFlowDiagramAdapters, IFlowDiagramDataFields, IFlowDiagramEvents, IFlowDiagramProperties } from \"./FlowDiagram\";\r\nimport { SpriteEventDispatcher, AMEvent } from \"../../core/Sprite\";\r\nimport { percent } from \"../../core/utils/Percent\";\r\nimport { DataItem, IDataItemEvents } from \"../../core/DataItem\";\r\nimport { ListTemplate, ListDisposer } from \"../../core/utils/List\";\r\nimport { DictionaryTemplate, DictionaryDisposer } from \"../../core/utils/Dictionary\";\r\nimport { Legend, ILegendDataFields, LegendDataItem, ILegendItem } from \"../Legend\";\r\nimport { Container } from \"../../core/Container\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { SankeyNode } from \"../elements/SankeyNode\";\r\nimport { SankeyLink } from \"../elements/SankeyLink\";\r\nimport { LinearGradientModifier } from \"../../core/rendering/fills/LinearGradientModifier\";\r\nimport { ColorSet } from \"../../core/utils/ColorSet\";\r\nimport { toColor, Color } from \"../../core/utils/Color\";\r\nimport { Orientation } from \"../../core/defs/Orientation\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\nimport * as $math from \"../../core/utils/Math\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport * as $number from \"../../core/utils/Number\";\r\nimport * as $order from \"../../core/utils/Order\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n//@todo rearange notes after dragged\r\n\r\n/**\r\n * Defines a [[DataItem]] for [[SankeyDiagram]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nexport class SankeyDiagramDataItem extends FlowDiagramDataItem {\r\n\r\n\t/**\r\n\t * Defines a type of [[Component]] this data item is used for.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {SankeyDiagram}\r\n\t */\r\n\tpublic _component!: SankeyDiagram;\r\n\r\n\t/**\r\n\t * An a link element, connecting two nodes.\r\n\t * @ignore\r\n\t * @type {SankeyLink}\r\n\t */\r\n\tpublic _link: SankeyLink;\r\n\r\n\t/**\r\n\t * An origin node.\r\n\t *\r\n\t * @type {SankeyNode}\r\n\t */\r\n\tpublic fromNode: SankeyNode;\r\n\r\n\t/**\r\n\t * A destination node.\r\n\t *\r\n\t * @type {SankeyNode}\r\n\t */\r\n\tpublic toNode: SankeyNode;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"SankeyDiagramDataItem\";\r\n\t\tthis.applyTheme();\r\n\t}\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines data fields for [[SankeyDiagram]].\r\n */\r\nexport interface ISankeyDiagramDataFields extends IFlowDiagramDataFields {\r\n\r\n\t/**\r\n\t * Name of the source node.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tfromName?: string;\r\n\r\n\t/**\r\n\t * Name of the target node.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\ttoName?: string;\r\n\r\n\t/**\r\n\t * Value of the link between two nodes.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tvalue?: string;\r\n\r\n\t/**\r\n\t * Color of a from node\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\tcolor?: string;\r\n}\r\n\r\n/**\r\n * Defines properties for [[SankeyDiagram]]\r\n */\r\nexport interface ISankeyDiagramProperties extends IFlowDiagramProperties {\r\n\r\n\t/**\r\n\t * Sort nodes by name or value or do not sort at all\r\n\t *\r\n\t * @type {\"top\" | \"bottom\" | \"middle\"}\r\n\t */\r\n\tnodeAlign?: \"top\" | \"bottom\" | \"middle\";\r\n\r\n\r\n\t/**\r\n\t * Orientation of the chart.\r\n\t *\r\n\t * @type {Orientation}\r\n\t */\r\n\torientation?: Orientation;\r\n}\r\n\r\n/**\r\n * Defines events for [[SankeyDiagram]].\r\n */\r\nexport interface ISankeyDiagramEvents extends IFlowDiagramEvents { }\r\n\r\n/**\r\n * Defines adapters for [[SankeyDiagram]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface ISankeyDiagramAdapters extends IFlowDiagramAdapters, ISankeyDiagramProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Creates a Sankey Diagram chart.\r\n *\r\n * @see {@link ISankeyDiagramEvents} for a list of available Events\r\n * @see {@link ISankeyDiagramAdapters} for a list of available Adapters\r\n * @see {@link https://www.amcharts.com/docs/v4/chart-types/sankey-diagram/} for documentation\r\n * @important\r\n */\r\nexport class SankeyDiagram extends FlowDiagram {\r\n\r\n\r\n\t/**\r\n\t * Defines a type for the DataItem.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {SankeyDiagramDataItem}\r\n\t */\r\n\tpublic _dataItem: SankeyDiagramDataItem;\r\n\r\n\t/**\r\n\t * Defines available data fields.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ISankeyDiagramDataFields}\r\n\t */\r\n\tpublic _dataFields: ISankeyDiagramDataFields;\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ISankeyDiagramProperties}\r\n\t */\r\n\tpublic _properties!: ISankeyDiagramProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {SeriesAdapters}\r\n\t */\r\n\tpublic _adapter!: ISankeyDiagramAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {ISankeyDiagramEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: ISankeyDiagramEvents;\r\n\r\n\t/**\r\n\t * A list of Sankey links connecting nodes.\r\n\t *\r\n\t * @param {ListTemplate<SankeyLink>}\r\n\t */\r\n\tpublic links: ListTemplate<SankeyLink>;\r\n\r\n\t/**\r\n\t * @todo Description\r\n\t */\r\n\tprotected _levelSum: { [index: number]: number };\r\n\r\n\t/**\r\n\t * @todo Description\r\n\t */\r\n\tprotected _levelNodesCount: { [index: number]: number };\r\n\r\n\t/**\r\n\t * @ignore\r\n\t */\r\n\tpublic _node:SankeyNode;\r\n\r\n\t/**\r\n\t * [maxSum description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\tpublic maxSum: number;\r\n\r\n\t/**\r\n\t * number of nodes in level with max value, needed for position calculation\r\n\t */\r\n\tprotected maxSumLevelNodeCount: number;\r\n\r\n\t/**\r\n\t * [valueHeight description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\tpublic valueHeight: number = 0;\r\n\r\n\t/**\r\n\t * A total number of levels, present on this chart.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tprotected _levelCount: number;\r\n\r\n\t/**\r\n\t * Sorted nodes iterator.\r\n\t *\r\n\t * @ignore\r\n\t * @type {Iterator}\r\n\t */\r\n\tprotected _sorted: $iter.Iterator<[string, SankeyNode]>;\r\n\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\r\n\t\t// Init\r\n\t\tsuper();\r\n\t\tthis.className = \"SankeyDiagram\";\r\n\t\tthis.orientation = \"horizontal\";\r\n\t\tthis.nodeAlign = \"middle\";\r\n\r\n\t\tthis.nodesContainer.width = percent(100);\r\n\t\tthis.nodesContainer.height = percent(100);\r\n\r\n\t\tthis.linksContainer.width = percent(100);\r\n\t\tthis.linksContainer.height = percent(100);\r\n\r\n\t\t// Apply theme\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * (Re)validates chart's data, effectively causing the chart to redraw.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic validateData(): void {\r\n\t\tsuper.validateData();\r\n\r\n\t\tthis._levelCount = 0;\r\n\r\n\t\t$iter.each(this.nodes.iterator(), (strNode) => {\r\n\t\t\tlet node = strNode[1];\r\n\t\t\tnode.level = this.getNodeLevel(node, 0);\r\n\t\t\tthis._levelCount = $math.max(this._levelCount, node.level);\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Returns node's highest level.\r\n\t *\r\n\t * @param  {SankeyNode}  node   Node\r\n\t * @param  {number}      level  Current level\r\n\t * @return {number}             New level\r\n\t */\r\n\tprotected getNodeLevel(node: SankeyNode, level: number): number {\r\n\t\t//@todo solve circular so\r\n\t\tlet levels: number[] = [level];\r\n\t\t$iter.each(node.incomingDataItems.iterator(), (link: SankeyDiagramDataItem) => {\r\n\t\t\tif (link.fromNode) {\r\n\t\t\t\tlevels.push(this.getNodeLevel(link.fromNode, level + 1));\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn Math.max(...levels);\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Calculates relation between pixel height and total value.\r\n\t *\r\n\t * In Sankey the actual thickness of links and height of nodes will depend\r\n\t * on their values.\r\n\t */\r\n\tprotected calculateValueHeight() {\r\n\t\t// calculate sums of each level\r\n\t\tthis._levelSum = {};\r\n\t\tthis._levelNodesCount = {};\r\n\t\tthis.maxSum = 0;\r\n\r\n\t\t$iter.each(this.nodes.iterator(), (strNode) => {\r\n\t\t\tlet node = strNode[1];\r\n\t\t\tlet level = node.level;\r\n\r\n\t\t\tif ($type.isNumber(this._levelSum[level])) {\r\n\t\t\t\tthis._levelSum[level] += node.value;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._levelSum[level] = node.value;\r\n\t\t\t}\r\n\r\n\t\t\tif ($type.isNumber(this._levelNodesCount[level])) {\r\n\t\t\t\tthis._levelNodesCount[level]++;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._levelNodesCount[level] = 1;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tlet maxSumLevel: number;\r\n\t\tfor (let key in this._levelSum) {\r\n\t\t\tif (this.maxSum < this._levelSum[key]) {\r\n\t\t\t\tthis.maxSum = this._levelSum[key];\r\n\t\t\t\tmaxSumLevel = Number(key);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet maxSumLevelNodeCount = this._levelNodesCount[maxSumLevel];\r\n\r\n\t\tlet availableHeight: number;\r\n\t\tif (this.orientation == \"horizontal\") {\r\n\t\t\tavailableHeight = this.chartContainer.maxHeight - 1;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tavailableHeight = this.chartContainer.maxWidth - 1;\r\n\t\t}\r\n\t\tthis.valueHeight = (availableHeight - (maxSumLevelNodeCount - 1) * this.nodePadding) / this.maxSum;\r\n\r\n\t\tthis.maxSumLevelNodeCount = maxSumLevelNodeCount;\r\n\t}\r\n\r\n\t/**\r\n\t * Redraws the chart.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic validate(): void {\r\n\t\tsuper.validate();\r\n\r\n\r\n\t\tthis.calculateValueHeight();\r\n\r\n\t\tlet container = this.nodesContainer;\r\n\t\tcontainer.removeChildren();\r\n\r\n\t\tlet nextCoordinate: { [index: number]: number } = {};\r\n\r\n\t\tlet nodesInLevel: number[] = [];\r\n\t\t$iter.each(this._sorted, (strNode) => {\r\n\t\t\tlet node = strNode[1];\r\n\t\t\tthis.getNodeValue(node);\r\n\t\t\tlet level = node.level;\r\n\t\t\tif (!$type.isNumber(nodesInLevel[level])) {\r\n\t\t\t\tnodesInLevel[level] = 1;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tnodesInLevel[level]++;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tlet maxSumLevelNodeCount = this.maxSumLevelNodeCount;\r\n\r\n\t\t$iter.each(this._sorted, (strNode) => {\r\n\t\t\tlet node = strNode[1];\r\n\t\t\tlet level = node.level;\r\n\r\n\t\t\tlet levelCoordinate: number = 0;\r\n\r\n\t\t\tswitch (this.nodeAlign) {\r\n\t\t\t\tcase \"bottom\":\r\n\t\t\t\t\tlevelCoordinate = (this.maxSum - this._levelSum[level]) * this.valueHeight - (nodesInLevel[level] - maxSumLevelNodeCount) * this.nodePadding;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"middle\":\r\n\t\t\t\t\tlevelCoordinate = (this.maxSum - this._levelSum[level]) * this.valueHeight / 2 - (nodesInLevel[level] - maxSumLevelNodeCount) * this.nodePadding / 2;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (node.value > 0) {\r\n\t\t\t\tnode.parent = container;\r\n\t\t\t}\r\n\r\n\t\t\tlet delta: number;\r\n\t\t\tlet x: number;\r\n\t\t\tlet y: number;\r\n\r\n\t\t\tif (this.orientation == \"horizontal\") {\r\n\t\t\t\tdelta = (container.pixelWidth - node.pixelWidth) / this._levelCount;\r\n\r\n\t\t\t\tx = delta * node.level;\r\n\t\t\t\ty = nextCoordinate[level] || levelCoordinate;\r\n\r\n\t\t\t\tlet h = node.value * this.valueHeight;\r\n\r\n\t\t\t\tnode.height = h\r\n\t\t\t\tnode.minX = x;\r\n\t\t\t\tnode.maxX = x;\r\n\t\t\t\tnextCoordinate[level] = y + h + this.nodePadding;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tdelta = (container.pixelHeight - node.pixelHeight) / this._levelCount;\r\n\r\n\t\t\t\tx = nextCoordinate[level] || levelCoordinate;\r\n\t\t\t\ty = delta * node.level;\r\n\r\n\t\t\t\tlet w = node.value * this.valueHeight;\r\n\r\n\t\t\t\tnode.width = w;\r\n\t\t\t\tnode.minY = y;\r\n\t\t\t\tnode.maxY = y;\r\n\t\t\t\tnextCoordinate[level] = x + w + this.nodePadding;\r\n\t\t\t}\r\n\r\n\t\t\tnode.x = x;\r\n\t\t\tnode.y = y;\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * [appear description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t */\r\n\tpublic appear(): void {\r\n\r\n\t\tsuper.appear();\r\n\r\n\t\tlet container = this.nodesContainer;\r\n\r\n\t\tlet i: number = 0;\r\n\r\n\t\t$iter.each(this.links.iterator(), (link) => {\r\n\t\t\tlink.hide(0);\r\n\t\t})\r\n\r\n\t\t$iter.each(this._sorted, (strNode) => {\r\n\r\n\t\t\tlet node = strNode[1];\r\n\r\n\t\t\tlet property: \"dx\" | \"dy\";\r\n\r\n\t\t\tif (this.orientation == \"horizontal\") {\r\n\t\t\t\tnode.dx = -(container.pixelWidth - node.pixelWidth) / this._levelCount;\r\n\t\t\t\tproperty = \"dx\";\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tnode.dy = -(container.pixelHeight - node.pixelHeight) / this._levelCount;\r\n\t\t\t\tproperty = \"dy\";\r\n\t\t\t}\r\n\r\n\t\t\tlet delay = 0;\r\n\t\t\tlet duration = this.interpolationDuration;\r\n\t\t\tif (this.sequencedInterpolation) {\r\n\t\t\t\tdelay = this.sequencedInterpolationDelay * i + duration * i / $iter.length(this.nodes.iterator());\r\n\t\t\t}\r\n\r\n\t\t\tnode.opacity = 0;\r\n\t\t\tnode.invalidateLinks();\r\n\r\n\t\t\tnode.animate([{ property: \"opacity\", from: 0, to: 1 }, { property: property, to: 0 }], this.interpolationDuration, this.interpolationEasing).delay(delay);\r\n\r\n\t\t\t$iter.each(node.outgoingDataItems.iterator(), (dataItem) => {\t\t\t\t\r\n\t\t\t\tlet animation = dataItem.link.show(this.interpolationDuration);\r\n\t\t\t\tif (animation) {\r\n\t\t\t\t\tanimation.delay(delay);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\ti++;\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Changes the sort type of the nodes.\r\n\t *\r\n\t * This will actually reshuffle nodes using nice animation.\r\n\t */\r\n\tprotected changeSorting() {\r\n\t\tthis.sortNodes();\r\n\r\n\t\tlet nextCoordinate: { [index: number]: number } = {};\r\n\r\n\t\t$iter.each(this._sorted, (strNode) => {\r\n\t\t\tlet node = strNode[1];\r\n\t\t\tlet level = node.level;\r\n\r\n\t\t\tlet levelCoordinate = (this.maxSum - this._levelSum[level]) * this.valueHeight / 2;\r\n\r\n\t\t\tlet property: \"x\" | \"y\";\r\n\t\t\tlet nodeHeight: number;\r\n\t\t\tif (this.orientation == \"horizontal\") {\r\n\t\t\t\tproperty = \"y\";\r\n\t\t\t\tnodeHeight = node.pixelHeight;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tproperty = \"x\";\r\n\t\t\t\tnodeHeight = node.pixelWidth;\r\n\t\t\t}\r\n\r\n\t\t\tnode.animate({ property: property, to: nextCoordinate[level] || levelCoordinate }, this.interpolationDuration, this.interpolationEasing);\r\n\t\t\tnextCoordinate[level] = (nextCoordinate[level] || levelCoordinate) + nodeHeight + this.nodePadding;\r\n\r\n\t\t\tnode.invalidateLinks();\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Sets defaults that instantiate some objects that rely on parent, so they\r\n\t * cannot be set in constructor.\r\n\t */\r\n\tprotected applyInternalDefaults(): void {\r\n\r\n\t\tsuper.applyInternalDefaults();\r\n\r\n\t\t// Add a default screen reader title for accessibility\r\n\t\t// This will be overridden in screen reader if there are any `titles` set\r\n\t\tif (!$type.hasValue(this.readerTitle)) {\r\n\t\t\tthis.readerTitle = this.language.translate(\"Sankey diagram\");\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Creates and returns a new data item.\r\n\t *\r\n\t * @return {this} Data item\r\n\t */\r\n\tprotected createDataItem(): this[\"_dataItem\"] {\r\n\t\treturn new SankeyDiagramDataItem();\r\n\t}\r\n\r\n\t/**\r\n\t * How to align nodes. In case layout is vertical, top means left and bottom means right\r\n\t *\r\n\t * @param {\"top\" | \"middle\" | \"bottom\"}  value  Node sorting\r\n\t */\r\n\tpublic set nodeAlign(value: \"top\" | \"middle\" | \"bottom\") {\r\n\t\tthis.setPropertyValue(\"nodeAlign\", value);\r\n\t\tthis.changeSorting();\r\n\t}\r\n\r\n\t/**\r\n\t * @returns {\"top\" | \"middle\" | \"bottom\"} Returns nodeAlign value\r\n\t */\r\n\tpublic get nodeAlign(): \"top\" | \"middle\" | \"bottom\" {\r\n\t\treturn this.getPropertyValue(\"nodeAlign\");\r\n\t}\r\n\r\n\t/**\r\n\t * Orientation of the chart: \"horizontal\" or \"vertical\";\r\n\t *\r\n\t * @param {Orientation} value Orientation\r\n\t */\r\n\tpublic set orientation(value: Orientation) {\r\n\t\tthis.setPropertyValue(\"orientation\", value, true);\r\n\t\tlet nameLabel = this.nodes.template.nameLabel;\r\n\t\tif (value == \"vertical\") {\r\n\t\t\tnameLabel.label.horizontalCenter = \"middle\";\r\n\t\t\tnameLabel.locationX = 0.5;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tnameLabel.label.horizontalCenter = \"left\";\r\n\t\t\tnameLabel.locationX = 1;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Orientation} Orientation\r\n\t */\r\n\tpublic get orientation(): Orientation {\r\n\t\treturn this.getPropertyValue(\"orientation\");\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore\r\n\t */ \r\n\tpublic createNode():this[\"_node\"]{\r\n\t\tlet node = new SankeyNode();\r\n\t\tthis._disposers.push(node);\r\n\t\treturn node;\r\n\t}\t\r\n\r\n\t/**\r\n\t * @ignore\r\n\t */ \r\n\tpublic createLink():this[\"_link\"]{\r\n\t\tlet link = new SankeyLink();\r\n\t\tthis._disposers.push(link);\r\n\t\treturn link;\r\n\t}\t\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"SankeyDiagram\"] = SankeyDiagram;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/charts/types/SankeyDiagram.ts","/**\r\n * SankeyNode module\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { FlowDiagramNode, IFlowDiagramNodeAdapters, IFlowDiagramNodeEvents, IFlowDiagramNodeProperties } from \"./FlowDiagramNode\";\r\nimport { SpriteEventDispatcher, AMEvent } from \"../../core/Sprite\";\r\nimport { SankeyDiagram, SankeyDiagramDataItem } from \"../types/SankeyDiagram\";\r\nimport { List } from \"../../core/utils/List\";\r\nimport { LabelBullet } from \"./LabelBullet\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { Color } from \"../../core/utils/Color\";\r\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\nimport * as $string from \"../../core/utils/String\";\r\nimport * as $order from \"../../core/utils/Order\";\r\nimport * as $number from \"../../core/utils/Number\";\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[SankeyNode]].\r\n */\r\nexport interface ISankeyNodeProperties extends IFlowDiagramNodeProperties {\r\n\r\n\t/**\r\n\t * A level node is at. (0 - ...)\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tlevel?: number;\r\n}\r\n\r\n/**\r\n * Defines events for [[SankeyNode]].\r\n */\r\nexport interface ISankeyNodeEvents extends IFlowDiagramNodeEvents { }\r\n\r\n/**\r\n * Defines adapters for [[SankeyNode]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface ISankeyNodeAdapters extends IFlowDiagramNodeAdapters, ISankeyNodeProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Creates a node in a Sankey Diagram.\r\n *\r\n * A Sankey node is a block with a value, which represents its size on the\r\n * diagram.\r\n *\r\n * Nodes are connected via [[SankeyLink]] elements.\r\n *\r\n * @see {@link ISankeyNodeEvents} for a list of available events\r\n * @see {@link ISankeyNodeAdapters} for a list of available Adapters\r\n * @important\r\n */\r\nexport class SankeyNode extends FlowDiagramNode {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ISankeyNodeProperties}\r\n\t */\r\n\tpublic _properties!: ISankeyNodeProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ISankeyNodeAdapters}\r\n\t */\r\n\tpublic _adapter!: ISankeyNodeAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {ISankeyNodeEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: ISankeyNodeEvents;\r\n\r\n\r\n\t/**\r\n\t * [nextInCoord description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\tpublic nextInCoord: number = 0;\r\n\r\n\t/**\r\n\t * [nextOutCoord description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\tpublic nextOutCoord: number = 0;\r\n\r\n\t/**\r\n\t * A chart instance this node is added to.\r\n\t *\r\n\t * @type {SankeyDiagram}\r\n\t */\r\n\tpublic chart: SankeyDiagram;\r\n\r\n\r\n\t/**\r\n\t * Defines the type of the [[SankeyDiagramDataItem]] used in the class.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {SankeyDiagramDataItem}\r\n\t */\r\n\tpublic _dataItem: SankeyDiagramDataItem;\r\n\r\n\t/**\r\n\t * A label element which shows node's value.\r\n\t *\r\n\t * @type {LabelBullet}\r\n\t */\r\n\tpublic valueLabel: LabelBullet;\r\n\r\n\t/**\r\n\t * A label element which shows node's name.\r\n\t *\r\n\t * @type {LabelBullet}\r\n\t */\r\n\tpublic nameLabel: LabelBullet;\t\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"SankeyNode\";\r\n\r\n\t\tthis.width = 10;\r\n\t\tthis.height = 10;\r\n\r\n\t\tlet nameLabel = this.createChild(LabelBullet);\r\n\t\tnameLabel.shouldClone = false;\r\n\t\t//@should we auto update these locations if position is changed?\r\n\t\tnameLabel.locationX = 1;\r\n\t\tnameLabel.locationY = 0.5;\r\n\t\tnameLabel.label.text = \"{name}\";\r\n\r\n\t\t//nameLabel.label.textElement.hideOversized = false;\r\n\t\tnameLabel.width = 150;\r\n\t\tnameLabel.height = 150;\r\n\t\tnameLabel.label.horizontalCenter = \"left\";\r\n\t\tnameLabel.label.padding(0,5,0,5);\r\n\t\tthis.nameLabel = nameLabel;\r\n\r\n\r\n\t\tlet valueLabel = this.createChild(LabelBullet);\r\n\t\tvalueLabel.shouldClone = false;\r\n\t\tvalueLabel.label.hideOversized = false;\r\n\t\tvalueLabel.locationX = 0.5;\r\n\t\tvalueLabel.locationY = 0.5;\r\n\t\tvalueLabel.width = 150;\r\n\t\tvalueLabel.height = 150;\r\n\t\t//valueLabel.label.text = \"{value}\";\r\n\t\tvalueLabel.label.horizontalCenter = \"middle\";\r\n\t\tthis.valueLabel = valueLabel;\t\t\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Invalidates all links, attached to this node.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic invalidateLinks(): void {\r\n\t\tsuper.invalidateLinks();\r\n\t\tthis.nextInCoord = 0;\r\n\t\tthis.nextOutCoord = 0;\r\n\t\tlet chart = this.chart;\r\n\r\n\t\tif (chart) {\r\n\t\t\tlet orientation = chart.orientation;\r\n\t\t\tif (this._incomingSorted) {\r\n\t\t\t\t$iter.each(this._incomingSorted, (dataItem) => {\r\n\t\t\t\t\tlet link = dataItem.link;\r\n\t\t\t\t\tlink.parent = this.chart.linksContainer;\r\n\r\n\t\t\t\t\tlet x: number;\r\n\t\t\t\t\tlet y: number;\r\n\t\t\t\t\tlet angle: number;\r\n\r\n\t\t\t\t\tif (orientation == \"horizontal\") {\r\n\t\t\t\t\t\tx = this.pixelX + this.dx;\r\n\t\t\t\t\t\ty = this.nextInCoord + this.pixelY + this.dy;\r\n\t\t\t\t\t\tangle = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\ty = this.pixelY + this.dy;\r\n\t\t\t\t\t\tx = this.nextInCoord + this.pixelX + this.dx;\r\n\t\t\t\t\t\tangle = 90;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlink.endX = x;\r\n\t\t\t\t\tlink.endY = y;\r\n\t\t\t\t\tlink.startAngle = angle;\r\n\t\t\t\t\tlink.endAngle = angle;\r\n\t\t\t\t\tlink.gradient.rotation = angle;\r\n\r\n\t\t\t\t\tlink.linkWidth = dataItem.getWorkingValue(\"value\") * chart.valueHeight;\r\n\r\n\t\t\t\t\tif (!dataItem.fromNode) {\r\n\r\n\t\t\t\t\t\tif (orientation == \"horizontal\") {\r\n\t\t\t\t\t\t\tlink.startX = this.pixelX + this.dx - link.maxWidth;\r\n\t\t\t\t\t\t\tlink.startY = link.endY;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tlink.startX = link.endX;\r\n\t\t\t\t\t\t\tlink.startY = this.pixelY + this.dy - link.maxHeight;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tlet stop = link.gradient.stops.getIndex(0);\r\n\t\t\t\t\t\tif (stop) {\r\n\t\t\t\t\t\t\tif (link.colorMode == \"gradient\") {\r\n\t\t\t\t\t\t\t\tstop.color = this.color;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tstop.opacity = 0;\r\n\t\t\t\t\t\t\tlink.fill = link.gradient;\r\n\t\t\t\t\t\t\tlink.stroke = link.gradient;\r\n\t\t\t\t\t\t\tlink.gradient.validate();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.nextInCoord += link.linkWidth;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (this._outgoingSorted) {\r\n\t\t\t\t$iter.each(this._outgoingSorted, (dataItem) => {\r\n\t\t\t\t\tlet link = dataItem.link;\r\n\t\t\t\t\tlink.parent = this.chart.linksContainer;\r\n\r\n\t\t\t\t\tlet x: number;\r\n\t\t\t\t\tlet y: number;\r\n\t\t\t\t\tlet angle: number;\r\n\r\n\t\t\t\t\tif (orientation == \"horizontal\") {\r\n\t\t\t\t\t\tangle = 0;\r\n\t\t\t\t\t\tx = this.pixelX + this.pixelWidth + this.dx - 1;\r\n\t\t\t\t\t\ty = this.nextOutCoord + this.pixelY + this.dy;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tangle = 90;\r\n\t\t\t\t\t\tx = this.nextOutCoord + this.pixelX + this.dx;\r\n\t\t\t\t\t\ty = this.pixelY + this.pixelHeight + this.dy - 1;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlink.startX = x;\r\n\t\t\t\t\tlink.startY = y;\r\n\t\t\t\t\tlink.startAngle = angle;\r\n\t\t\t\t\tlink.endAngle = angle;\r\n\t\t\t\t\tlink.gradient.rotation = angle;\r\n\r\n\t\t\t\t\tlink.linkWidth = dataItem.getWorkingValue(\"value\") * this.chart.valueHeight;\r\n\r\n\t\t\t\t\tif (!dataItem.toNode) {\r\n\t\t\t\t\t\tif (orientation == \"horizontal\") {\r\n\t\t\t\t\t\t\tlink.endX = this.pixelX + link.maxWidth + this.dx;\r\n\t\t\t\t\t\t\tlink.endY = link.startY;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tlink.endX = link.startX;\r\n\t\t\t\t\t\t\tlink.endY = this.pixelY + link.maxHeight + this.dy;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tlink.opacity = this.opacity;\r\n\r\n\t\t\t\t\t\tlet stop = link.gradient.stops.getIndex(1);\r\n\t\t\t\t\t\tif (stop) {\r\n\t\t\t\t\t\t\tif (link.colorMode == \"gradient\") {\r\n\t\t\t\t\t\t\t\tstop.color = this.color;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tstop.opacity = 0;\r\n\t\t\t\t\t\t\tlink.fill = link.gradient;\r\n\t\t\t\t\t\t\tlink.stroke = link.gradient;\r\n\t\t\t\t\t\t\tlink.gradient.validate();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.nextOutCoord += link.linkWidth;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.positionBullet(this.nameLabel);\r\n\t\tthis.positionBullet(this.valueLabel);\r\n\t}\r\n\r\n\t/**\r\n\t * Positions the bullet so it is centered within the node element.\r\n\t *\r\n\t * @param {LabelBullet}  bullet  Target bullet\r\n\t */\r\n\tprotected positionBullet(bullet: LabelBullet) {\r\n\t\tif (bullet) {\r\n\t\t\tbullet.x = this.measuredWidth * bullet.locationX;\r\n\t\t\tbullet.y = this.measuredHeight * bullet.locationY;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * A level node is displayed at. (0 - ...)\r\n\t *\r\n\t * Levels are measured from left to right.\r\n\t *\r\n\t * The nodes in the left-most column will have `level = 0`.\r\n\t *\r\n\t * Nodes in second column - `level = 1`, etc.\r\n\t *\r\n\t * @param {number}  value  Level\r\n\t */\r\n\tpublic set level(value: number) {\r\n\t\tthis.setPropertyValue(\"level\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Level\r\n\t */\r\n\tpublic get level(): number {\r\n\t\treturn this.getPropertyValue(\"level\");\r\n\t}\r\n\r\n\t/**\r\n\t * Copies properties and labels from another [[SankeyNode]].\r\n\t *\r\n\t * @param {SankeyNode}  source  Source node\r\n\t */\r\n\tpublic copyFrom(source: this): void {\r\n\t\tsuper.copyFrom(source);\r\n\t\tthis.nameLabel.copyFrom(source.nameLabel);\r\n\t\tthis.valueLabel.copyFrom(source.valueLabel);\r\n\t}\t\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"SankeyNode\"] = SankeyNode;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/charts/elements/SankeyNode.ts","/**\r\n * Bullet module\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Bullet, IBulletProperties, IBulletAdapters, IBulletEvents } from \"./Bullet\";\r\nimport { SpriteEventDispatcher, AMEvent } from \"../../core/Sprite\";\r\nimport { Label } from \"../../core/elements/Label\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { color } from \"../../core/utils/Color\";\r\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[Bullet]]\r\n */\r\nexport interface ILabelBulletProperties extends IBulletProperties { }\r\n\r\n/**\r\n * Defines events for [[Bullet]]\r\n */\r\nexport interface ILabelBulletEvents extends IBulletEvents { }\r\n\r\n/**\r\n * Defines adapters\r\n * Includes both the [[Adapter]] definitions and properties\r\n * @see {@link Adapter}\r\n */\r\nexport interface ILabelBulletAdapters extends IBulletAdapters, ILabelBulletProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Creates a bullet with a textual label.\r\n *\r\n * Uses [[Label]] instance to draw the label, so the label itself is\r\n * configurable.\r\n *\r\n * @see {@link IBulletEvents} for a list of available events\r\n * @see {@link IBulletAdapters} for a list of available Adapters\r\n * @todo Usage example\r\n * @important\r\n */\r\nexport class LabelBullet extends Bullet {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ILabelBulletProperties}\r\n\t */\r\n\tpublic _properties!: ILabelBulletProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ILabelBulletAdapters}\r\n\t */\r\n\tpublic _adapter!: ILabelBulletAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {ILabelBulletEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: ILabelBulletEvents;\r\n\r\n\t/**\r\n\t * A label (textual) element for the bullet.\r\n\t *\r\n\t * @type {Label}\r\n\t */\r\n\tpublic label: Label;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.className = \"LabelBullet\";\r\n\r\n\t\tlet label = this.createChild(Label);\r\n\t\tlabel.shouldClone = false;\r\n\t\tlabel.verticalCenter = \"middle\";\r\n\t\tlabel.horizontalCenter = \"middle\";\r\n\t\tlabel.truncate = true;\r\n\t\tlabel.hideOversized = true;\r\n\r\n\t\tlabel.stroke = color();\r\n\t\tlabel.strokeOpacity = 0;\r\n\t\tlabel.fill = new InterfaceColorSet().getFor(\"text\");\r\n\r\n\t\tthis.events.on(\"maxsizechanged\", () => {\r\n\t\t\tthis.label.maxWidth = this.maxWidth;\r\n\t\t\tthis.label.maxHeight = this.maxHeight;\r\n\t\t}, this);\r\n\r\n\r\n\t\tthis.label = label;\r\n\r\n\t\t// not good, as lineSeries will have labels somewhere in the middle.\r\n\t\t//this.locationX = 0.5;\r\n\t\t//this.locationY = 0.5;\r\n\t}\r\n\r\n\t/**\r\n\t * Copies all proprities and related stuff from another instance of\r\n\t * [[LabelBullet]].\r\n\t *\r\n\t * @param {this}  source  Source element\r\n\t */\r\n\tpublic copyFrom(source: this): void {\r\n\t\tsuper.copyFrom(source);\r\n\t\tthis.label.copyFrom(source.label);\r\n\t}\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"LabelBullet\"] = LabelBullet;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/charts/elements/LabelBullet.ts","/**\r\n * SankeyLink module\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Sprite, SpriteEventDispatcher, AMEvent } from \"../../core/Sprite\";\r\nimport { Container, IContainerProperties, IContainerEvents, IContainerAdapters } from \"../../core/Container\";\r\nimport { SankeyDiagramDataItem } from \"../types/SankeyDiagram\";\r\nimport { FlowDiagramLink, IFlowDiagramLinkAdapters, IFlowDiagramLinkEvents, IFlowDiagramLinkProperties } from \"./FlowDiagramLink\";\r\nimport { LinearGradient } from \"../../core/rendering/fills/LinearGradient\";\r\nimport { RadialGradient } from \"../../core/rendering/fills/RadialGradient\";\r\nimport { Pattern } from \"../../core/rendering/fills/Pattern\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { Bullet } from \"../elements/Bullet\";\r\nimport { Color } from \"../../core/utils/Color\";\r\nimport { ListTemplate } from \"../../core/utils/List\";\r\nimport { Polyspline } from \"../../core/elements/Polyspline\";\r\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\r\nimport * as $math from \"../../core/utils/Math\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport * as $smoothing from \"../../core/rendering/Smoothing\";\r\nimport * as $path from \"../../core/rendering/Path\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[SankeyLink]].\r\n */\r\nexport interface ISankeyLinkProperties extends IFlowDiagramLinkProperties {\r\n\r\n\t/**\r\n\t * [tension description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\ttension?: number;\r\n\r\n\t/**\r\n\t * [startX description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\tstartX?: number;\r\n\r\n\t/**\r\n\t * [startY description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\tstartY?: number;\r\n\r\n\t/**\r\n\t * [endX description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\tendX?: number;\r\n\r\n\t/**\r\n\t * [endY description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\tendY?: number;\r\n\r\n\t/**\r\n\t * [linkWidth description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\tlinkWidth?: number;\r\n\r\n\t/**\r\n\t * [controlPointDistance description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\tcontrolPointDistance?: number;\r\n}\r\n\r\n/**\r\n * Defines events for [[SankeyLink]].\r\n */\r\nexport interface ISankeyLinkEvents extends IFlowDiagramLinkEvents { }\r\n\r\n/**\r\n * Defines adapters for [[SankeyLink]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface ISankeyLinkAdapters extends IFlowDiagramLinkAdapters, ISankeyLinkProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * This class creates a link (waved color-filled line) between two nodes in a\r\n * Sankey Diagram.\r\n *\r\n * @see {@link ISankeyLinkEvents} for a list of available events\r\n * @see {@link ISankeyLinkAdapters} for a list of available Adapters\r\n * @important\r\n */\r\nexport class SankeyLink extends FlowDiagramLink {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ISankeyLinkProperties}\r\n\t */\r\n\tpublic _properties!: ISankeyLinkProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ISankeyLinkAdapters}\r\n\t */\r\n\tpublic _adapter!: ISankeyLinkAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {ISankeyLinkEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: ISankeyLinkEvents;\r\n\r\n\t/**\r\n\t * Defines a type of data item used by this class.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {SankeyDiagramDataItem}\r\n\t */\r\n\tpublic _dataItem: SankeyDiagramDataItem;\r\n\r\n\t/**\r\n\t * Spline which goes through the middle of a link, used to calculate bullet and tooltip positions, invisible by default\r\n\t * @type Polyspline\r\n     */\r\n\tpublic middleLine: Polyspline;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"SankeyLink\";\r\n\r\n\t\tlet interfaceColors = new InterfaceColorSet();\r\n\r\n\t\tthis.tension = 0.8;\r\n\t\tthis.controlPointDistance = 0.2;\r\n\r\n\t\tthis.startAngle = 0;\r\n\t\tthis.endAngle = 0;\r\n\r\n\t\tthis.linkWidth = 0;\r\n\r\n\t\tthis.startX = 0;\r\n\t\tthis.endX = 0;\r\n\r\n\t\tthis.startY = 0;\r\n\t\tthis.endY = 0;\r\n\r\n\t\tthis.middleLine = this.createChild(Polyspline);\r\n\t\tthis.middleLine.shouldClone = false;\r\n\t\tthis.middleLine.strokeOpacity = 0;\r\n\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * (Re)validates (redraws) the link.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic validate() {\r\n\t\tsuper.validate();\r\n\r\n\t\tif (!this.isTemplate) {\r\n\r\n\t\t\tlet x0 = this.startX\r\n\t\t\tlet y0 = this.startY;\r\n\t\t\tlet x1 = this.endX;\r\n\t\t\tlet y1 = this.endY;\r\n\r\n\t\t\tif (!$type.isNumber(x1)) {\r\n\t\t\t\tx1 = x0;\r\n\t\t\t}\r\n\r\n\t\t\tif (!$type.isNumber(y1)) {\r\n\t\t\t\ty1 = y0;\r\n\t\t\t}\r\n\r\n\t\t\tlet startAngle = this.startAngle;\r\n\t\t\tlet endAngle = this.endAngle;\r\n\t\t\tlet w = this.linkWidth;\r\n\r\n\t\t\tlet path = \"\";\r\n\r\n\t\t\tlet xt0 = x0;\r\n\t\t\tlet yt0 = y0;\r\n\r\n\t\t\tlet xt1 = x1;\r\n\t\t\tlet yt1 = y1;\r\n\r\n\t\t\tlet xb0 = x0 + w * $math.sin(startAngle);\r\n\t\t\tlet xb1 = x1 + w * $math.sin(endAngle);\r\n\r\n\t\t\tlet yb0 = y0 + w * $math.cos(startAngle);\r\n\t\t\tlet yb1 = y1 + w * $math.cos(endAngle);\r\n\r\n\t\t\tlet xm0 = x0 + w / 2 * $math.sin(startAngle);\r\n\t\t\tlet xm1 = x1 + w / 2 * $math.sin(endAngle);\r\n\r\n\t\t\tlet ym0 = y0 + w / 2 * $math.cos(startAngle);\r\n\t\t\tlet ym1 = y1 + w / 2 * $math.cos(endAngle);\r\n\r\n\t\t\tthis.zIndex = this.zIndex || this.dataItem.index;\r\n\r\n\t\t\tlet tensionX = this.tension + (1 - this.tension) * $math.sin(startAngle);\r\n\t\t\tlet tensionY = this.tension + (1 - this.tension) * $math.cos(startAngle);\r\n\r\n\t\t\tthis.middleLine.tensionX = tensionX;\r\n\t\t\tthis.middleLine.tensionY = tensionY;\r\n\r\n\t\t\tif ($type.isNumber(w) && ($type.isNumber(x0) && $type.isNumber(x1) && $type.isNumber(y0) && $type.isNumber(y1))) {\r\n\r\n\t\t\t\t// solves issues with gradient fill of straight lines\r\n\t\t\t\tif ($math.round(xt0, 3) == $math.round(xt1, 3)) {\r\n\t\t\t\t\txt1 += 0.01;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ($math.round(yt0, 3) == $math.round(yt1, 3)) {\r\n\t\t\t\t\tyt1 += 0.01;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ($math.round(xb0, 3) == $math.round(xb1, 3)) {\r\n\t\t\t\t\txb1 += 0.01;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ($math.round(yb0, 3) == $math.round(yb1, 3)) {\r\n\t\t\t\t\tyb1 += 0.01;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet minX = Math.min(xb0, xb1, xt0, xt1);\r\n\t\t\t\tlet minY = Math.min(yb0, yb1, yt0, yt1);\r\n\t\t\t\tlet maxX = Math.max(xb0, xb1, xt0, xt1);\r\n\t\t\t\tlet maxY = Math.max(yb0, yb1, yt0, yt1);\r\n\r\n\t\t\t\tthis.bbox = {\r\n\t\t\t\t\tx: minX,\r\n\t\t\t\t\ty: minY,\r\n\t\t\t\t\twidth: maxX - minX,\r\n\t\t\t\t\theight: maxY - minY\r\n\t\t\t\t};\r\n\r\n\t\t\t\tlet cpd = this.controlPointDistance;\r\n\r\n\t\t\t\tlet kxt0 = xt0 + (xt1 - xt0) * cpd * $math.cos(startAngle);\r\n\t\t\t\tlet kyt0 = yt0 + (yt1 - yt0) * cpd * $math.sin(startAngle);\r\n\r\n\t\t\t\tlet kxt1 = xt1 - (xt1 - xt0) * cpd * $math.cos(endAngle);\r\n\t\t\t\tlet kyt1 = yt1 - (yt1 - yt0) * cpd * $math.sin(endAngle);\r\n\r\n\t\t\t\tlet kxm0 = xm0 + (xm1 - xm0) * cpd * $math.cos(startAngle);\r\n\t\t\t\tlet kym0 = ym0 + (ym1 - ym0) * cpd * $math.sin(startAngle);\r\n\r\n\t\t\t\tlet kxm1 = xm1 - (xm1 - xm0) * cpd * $math.cos(endAngle);\r\n\t\t\t\tlet kym1 = ym1 - (ym1 - ym0) * cpd * $math.sin(endAngle);\r\n\r\n\t\t\t\tlet angle = $math.getAngle({ x: kxt0, y: kyt0 }, { x: kxt1, y: kyt1 });\r\n\r\n\t\t\t\tlet dx = (w / $math.cos(angle) - w) / $math.tan(angle) * $math.cos(startAngle);\r\n\t\t\t\tlet dy = (w / $math.sin(angle) - w) * $math.tan(angle) * $math.sin(startAngle);\r\n\r\n\t\t\t\tlet kxb0 = -dx / 2 + xb0 + (xb1 - xb0) * cpd * $math.cos(startAngle);\r\n\t\t\t\tlet kyb0 = -dy / 2 + yb0 + (yb1 - yb0) * cpd * $math.sin(startAngle);\r\n\r\n\t\t\t\tlet kxb1 = -dx / 2 + xb1 - (xb1 - xb0) * cpd * $math.cos(endAngle);\r\n\t\t\t\tlet kyb1 = -dy / 2 + yb1 - (yb1 - yb0) * cpd * $math.sin(endAngle);\r\n\r\n\r\n\t\t\t\tthis.middleLine.segments = [[{ x: xm0, y: ym0 }, { x: kxm0, y: kym0 }, { x: kxm1, y: kym1 }, { x: xm1, y: ym1 }]];\r\n\r\n\t\t\t\tkxt0 += dx / 2;\r\n\t\t\t\tkyt0 += dy / 2;\r\n\r\n\t\t\t\tkxt1 += dx / 2;\r\n\t\t\t\tkyt1 += dy / 2;\r\n\r\n\t\t\t\tpath += $path.moveTo({ x: xt0, y: yt0 });\r\n\t\t\t\tpath += new $smoothing.Tension(tensionX, tensionY).smooth([{ x: xt0, y: yt0 }, { x: kxt0, y: kyt0 }, { x: kxt1, y: kyt1 }, { x: xt1, y: yt1 }]);\r\n\t\t\t\tpath += $path.lineTo({ x: xb1, y: yb1 });\r\n\t\t\t\tpath += new $smoothing.Tension(tensionX, tensionY).smooth([{ x: xb1, y: yb1 }, { x: kxb1, y: kyb1 }, { x: kxb0, y: kyb0 }, { x: xb0, y: yb0 }]);\r\n\t\t\t\tpath += $path.closePath();\r\n\t\t\t}\r\n\r\n\t\t\tthis.link.element.attr({ \"d\": path });\r\n\r\n\t\t\tif (this.maskBullets) {\r\n\t\t\t\tthis.bulletsMask.element.attr({ \"d\": path });\r\n\t\t\t\tthis.bulletsContainer.mask = this.bulletsMask;\r\n\t\t\t}\r\n\t\t\tthis.positionBullets();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * [startX description]\r\n\t *\r\n\t * @todo Description\r\n\t * @param {number}  value  Start X\r\n\t */\r\n\tpublic set startX(value: number) {\r\n\t\tthis.setPropertyValue(\"startX\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Start X\r\n\t */\r\n\tpublic get startX(): number {\r\n\t\treturn this.getPropertyValue(\"startX\");\r\n\t}\r\n\r\n\t/**\r\n\t * [endX description]\r\n\t *\r\n\t * @todo Description\r\n\t * @param {number} value  End X\r\n\t */\r\n\tpublic set endX(value: number) {\r\n\t\tthis.setPropertyValue(\"endX\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} End X\r\n\t */\r\n\tpublic get endX(): number {\r\n\t\treturn this.getPropertyValue(\"endX\");\r\n\t}\r\n\r\n\t/**\r\n\t * [startY description]\r\n\t *\r\n\t * @todo Description\r\n\t * @param {number}  value  Start Y\r\n\t */\r\n\tpublic set startY(value: number) {\r\n\t\tthis.setPropertyValue(\"startY\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Start Y\r\n\t */\r\n\tpublic get startY(): number {\r\n\t\treturn this.getPropertyValue(\"startY\");\r\n\t}\r\n\r\n\t/**\r\n\t * [endY description]\r\n\t *\r\n\t * @todo Description\r\n\t * @param {number} value End Y\r\n\t */\r\n\tpublic set endY(value: number) {\r\n\t\tthis.setPropertyValue(\"endY\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} End Y\r\n\t */\r\n\tpublic get endY(): number {\r\n\t\treturn this.getPropertyValue(\"endY\");\r\n\t}\r\n\r\n\t/**\r\n\t * [linkWidth description]\r\n\t *\r\n\t * @todo Description\r\n\t * @param {number} value [description]\r\n\t */\r\n\tpublic set linkWidth(value: number) {\r\n\t\tthis.setPropertyValue(\"linkWidth\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} [description]\r\n\t */\r\n\tpublic get linkWidth(): number {\r\n\t\treturn this.getPropertyValue(\"linkWidth\");\r\n\t}\r\n\r\n\t/**\r\n\t * Distance of control point of a link, defines relative distance from a node at which linke should bend\r\n\t * @default 0.2\r\n\t * @param {number}  value\r\n\t */\r\n\tpublic set controlPointDistance(value: number) {\r\n\t\tthis.setPropertyValue(\"controlPointDistance\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} relative control point distance\r\n\t */\r\n\tpublic get controlPointDistance(): number {\r\n\t\treturn this.getPropertyValue(\"controlPointDistance\");\r\n\t}\r\n\r\n\t/**\r\n\t * Tension of a spline, 1 would make the link to have sharp edges\r\n\t * @default 0.8\r\n\t * @param {number} value\r\n\t */\r\n\tpublic set tension(value: number) {\r\n\t\tthis.setPropertyValue(\"tension\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} tension value\r\n\t */\r\n\tpublic get tension(): number {\r\n\t\treturn this.getPropertyValue(\"tension\");\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"SankeyLink\"] = SankeyLink;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/charts/elements/SankeyLink.ts","/**\r\n * Creates a 3D rectangle.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Container, IContainerProperties, IContainerAdapters, IContainerEvents } from \"../../Container\";\r\nimport { Sprite, SpriteEventDispatcher, AMEvent } from \"../../Sprite\";\r\nimport { IPoint } from \"../../defs/IPoint\";\r\nimport { LightenFilter } from \"../../rendering/filters/LightenFilter\";\r\nimport * as $math from \"../../utils/Math\";\r\nimport * as $path from \"../../rendering/Path\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[Rectangle3D]].\r\n */\r\nexport interface Rectangle3DProperties extends IContainerProperties {\r\n\r\n\t/**\r\n\t * Depth (Z dimension) of the 3D rectangle in pixels.\r\n\t *\r\n\t * @default 30\r\n\t * @type {number}\r\n\t */\r\n\tdepth?: number;\r\n\r\n\t/**\r\n\t * Angle of the point of view to the 3D element. (0-360)\r\n\t *\r\n\t * @default 30\r\n\t * @type {number}\r\n\t */\r\n\tangle?: number;\r\n\r\n}\r\n\r\n/**\r\n * Defines events for [[Rectangle3D]]\r\n */\r\nexport interface Rectangle3DEvents extends IContainerEvents { }\r\n\r\n/**\r\n * Defines adapters for [[Rectangle3D]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface Rectangle3DAdapters extends IContainerAdapters, Rectangle3DProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Builds a 3D rectangle\r\n * @see {@link IRectangle3DEvents} for a list of available events\r\n * @see {@link IRectangle3DAdapters} for a list of available Adapters\r\n */\r\nexport class Rectangle3D extends Container {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Rectangle3DProperties}\r\n\t */\r\n\tpublic _properties!: Rectangle3DProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Rectangle3DAdapters}\r\n\t */\r\n\tpublic _adapter!: Rectangle3DAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {Rectangle3DEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: Rectangle3DEvents;\r\n\r\n\t/**\r\n\t * Left side element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Sprite}\r\n\t */\r\n\tpublic sideLeft: Sprite;\r\n\r\n\t/**\r\n\t * Right side element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Sprite}\r\n\t */\r\n\tpublic sideRight: Sprite;\r\n\r\n\t/**\r\n\t * Top element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Sprite}\r\n\t */\r\n\tpublic sideTop: Sprite;\r\n\r\n\t/**\r\n\t * Bottom element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Sprite}\r\n\t */\r\n\tpublic sideBottom: Sprite;\r\n\r\n\t/**\r\n\t * Back element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Sprite}\r\n\t */\r\n\tpublic sideBack: Sprite;\r\n\r\n\t/**\r\n\t * Front element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Sprite}\r\n\t */\r\n\tpublic sideFront: Sprite;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.angle = 30;\r\n\t\tthis.depth = 30;\r\n\t\tthis.className = \"Rectangle3D\";\r\n\t\tthis.layout = \"none\";\r\n\r\n\t\tlet sideBack: Sprite = this.createChild(Sprite);\r\n\t\tsideBack.shouldClone = false;\r\n\t\tsideBack.element = this.paper.add(\"path\");\r\n\t\tsideBack.isMeasured = false;\r\n\t\tlet lightenFilterBack: LightenFilter = new LightenFilter();\r\n\t\tlightenFilterBack.lightness = -0.2;\r\n\t\tsideBack.filters.push(lightenFilterBack);\r\n\t\tthis.sideBack = sideBack;\r\n\t\tthis._disposers.push(this.sideBack);\r\n\r\n\t\tlet sideBottom: Sprite = this.createChild(Sprite);\r\n\t\tsideBottom.shouldClone = false;\r\n\t\tsideBottom.element = this.paper.add(\"path\");\r\n\t\tsideBottom.isMeasured = false;\r\n\t\tlet lightenFilterBottom: LightenFilter = new LightenFilter();\r\n\t\tlightenFilterBottom.lightness = -0.5;\r\n\t\tsideBottom.filters.push(lightenFilterBottom);\r\n\t\tthis.sideBottom = sideBottom;\r\n\t\tthis._disposers.push(this.sideBottom);\r\n\r\n\t\tlet sideLeft: Sprite = this.createChild(Sprite);\r\n\t\tsideLeft.shouldClone = false;\r\n\t\tsideLeft.element = this.paper.add(\"path\");\r\n\t\tsideLeft.isMeasured = false;\r\n\t\tlet lightenFilterLeft: LightenFilter = new LightenFilter();\r\n\t\tlightenFilterLeft.lightness = -0.4;\r\n\t\tsideLeft.filters.push(lightenFilterLeft);\r\n\t\tthis.sideLeft = sideLeft;\r\n\t\tthis._disposers.push(this.sideLeft);\r\n\r\n\t\tlet sideRight: Sprite = this.createChild(Sprite);\r\n\t\tsideRight.shouldClone = false;\r\n\t\tsideRight.element = this.paper.add(\"path\");\r\n\t\tsideRight.isMeasured = false;\r\n\t\tlet lightenFilterRight: LightenFilter = new LightenFilter();\r\n\t\tlightenFilterRight.lightness = -0.2;\r\n\t\tsideRight.filters.push(lightenFilterRight);\r\n\t\tthis.sideRight = sideRight;\r\n\t\tthis._disposers.push(this.sideRight);\r\n\r\n\t\tlet sideTop: Sprite = this.createChild(Sprite);\r\n\t\tsideTop.shouldClone = false;\r\n\t\tsideTop.element = this.paper.add(\"path\");\r\n\t\tsideTop.isMeasured = false;\r\n\t\tlet lightenFilterTop: LightenFilter = new LightenFilter();\r\n\t\tlightenFilterTop.lightness = -0.1;\r\n\t\tsideTop.filters.push(lightenFilterTop);\r\n\t\tthis.sideTop = sideTop;\r\n\t\tthis._disposers.push(this.sideTop);\r\n\r\n\t\tlet sideFront: Sprite = this.createChild(Sprite);\r\n\t\tsideFront.shouldClone = false;\r\n\t\tsideFront.element = this.paper.add(\"path\");\r\n\t\tsideFront.isMeasured = false;\r\n\t\tthis.sideFront = sideFront;\r\n\t\tthis._disposers.push(this.sideFront);\r\n\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Draws the element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic draw(): void {\r\n\t\tsuper.draw();\r\n\r\n\t\tlet w: number = this.innerWidth;\r\n\t\tlet h: number = this.innerHeight;\r\n\r\n\t\tlet depth: number = this.depth;\r\n\t\tlet angle: number = this.angle;\r\n\t\tlet sin: number = $math.sin(angle);\r\n\t\tlet cos: number = $math.cos(angle);\r\n\r\n\t\tlet a: IPoint = { x: 0, y: 0 };\r\n\t\tlet b: IPoint = { x: w, y: 0 };\r\n\t\tlet c: IPoint = { x: w, y: h };\r\n\t\tlet d: IPoint = { x: 0, y: h };\r\n\r\n\t\tlet ah: IPoint = { x: depth * cos, y: -depth * sin };\r\n\t\tlet bh: IPoint = { x: depth * cos + w, y: -depth * sin };\r\n\t\tlet ch: IPoint = { x: depth * cos + w, y: -depth * sin + h };\r\n\t\tlet dh: IPoint = { x: depth * cos, y: -depth * sin + h };\r\n\r\n\t\tthis.sideFront.element.attr({ \"d\": $path.moveTo(a) + $path.lineTo(b) + $path.lineTo(c) + $path.lineTo(d) + $path.closePath() });\r\n\t\tthis.sideBack.element.attr({ \"d\": $path.moveTo(ah) + $path.lineTo(bh) + $path.lineTo(ch) + $path.lineTo(dh) + $path.closePath() });\r\n\t\tthis.sideLeft.element.attr({ \"d\": $path.moveTo(a) + $path.lineTo(ah) + $path.lineTo(dh) + $path.lineTo(d) + $path.closePath() });\r\n\t\tthis.sideRight.element.attr({ \"d\": $path.moveTo(b) + $path.lineTo(bh) + $path.lineTo(ch) + $path.lineTo(c) + $path.closePath() });\r\n\t\tthis.sideBottom.element.attr({ \"d\": $path.moveTo(d) + $path.lineTo(dh) + $path.lineTo(ch) + $path.lineTo(c) + $path.closePath() });\r\n\t\tthis.sideTop.element.attr({ \"d\": $path.moveTo(a) + $path.lineTo(ah) + $path.lineTo(bh) + $path.lineTo(b) + $path.closePath() });\r\n\t}\r\n\r\n\t/**\r\n\t * Depth (Z dimension) of the 3D rectangle in pixels.\r\n\t *\r\n\t * @default 30\r\n\t * @param {number}  value  Depth (px)\r\n\t */\r\n\tpublic set depth(value: number) {\r\n\t\tthis.setPropertyValue(\"depth\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Depth (px)\r\n\t */\r\n\tpublic get depth(): number {\r\n\t\treturn this.getPropertyValue(\"depth\");\r\n\t}\r\n\r\n\t/**\r\n\t * Angle of the point of view to the 3D element. (0-360)\r\n\t *\r\n\t * @default 30\r\n\t * @param {number}  value  Angle\r\n\t */\r\n\tpublic set angle(value: number) {\r\n\t\tthis.setPropertyValue(\"angle\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Angle\r\n\t */\r\n\tpublic get angle(): number {\r\n\t\treturn this.getPropertyValue(\"angle\");\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../../src/.internal/core/elements/3d/Rectangle3D.ts","/**\r\n * HeatLegend module\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { SpriteEventDispatcher, AMEvent } from \"../../core/Sprite\";\r\nimport { Container, IContainerProperties, IContainerEvents, IContainerAdapters } from \"../../core/Container\";\r\nimport { Series } from \"../series/Series\";\r\nimport { LinearGradient } from \"../../core/rendering/fills/LinearGradient\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport { toColor, Color } from \"../../core/utils/Color\";\r\nimport { ListTemplate, ListDisposer } from \"../../core/utils/List\";\r\nimport { percent } from \"../../core/utils/Percent\";\r\nimport { ValueAxis } from \"../../charts/axes/ValueAxis\";\r\nimport { AxisRendererX } from \"../../charts/axes/AxisRendererX\";\r\nimport { AxisRendererY } from \"../../charts/axes/AxisRendererY\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport * as $colors from \"../../core/utils/Colors\";\r\nimport { RoundedRectangle } from \"../../core/elements/RoundedRectangle\";\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[HeatLegend]].\r\n */\r\nexport interface IHeatLegendProperties extends IContainerProperties {\r\n\r\n\t/**\r\n\t * Minimum color\r\n\t *\r\n\t * @todo Description\r\n\t * @type {color}\r\n\t */\r\n\tminColor?: Color;\r\n\r\n\t/**\r\n\t * Minimum value\r\n\t *\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\tminValue?: number;\r\n\r\n\t/**\r\n\t * Maximum value\r\n\t *\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\tmaxValue?: number;\r\n\r\n\r\n\t/**\r\n\t * Maximum color\r\n\t *\r\n\t * @todo Description\r\n\t * @type {color}\r\n\t */\r\n\tmaxColor?: Color;\r\n\r\n\t/**\r\n\t * Number of markers (steps)\r\n\t *\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\tmarkerCount?: number;\r\n\r\n\r\n\t/**\r\n\t * Orientation\r\n\t *\r\n\t * @todo Description\r\n\t * @type {\"horizontal\" | \"vertical\"}\r\n\t */\r\n\torientation?: \"horizontal\" | \"vertical\";\r\n\r\n}\r\n\r\n/**\r\n * Defines events for [[HeatLegend]].\r\n */\r\nexport interface IHeatLegendEvents extends IContainerEvents { }\r\n\r\n/**\r\n * Defines adapters for [[HeatLegend]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface IHeatLegendAdapters extends IContainerAdapters, IHeatLegendProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * This class creates a link (waved color-filled line) between two nodes in a\r\n * Sankey Diagram.\r\n *\r\n * @see {@link IHeatLegendEvents} for a list of available events\r\n * @see {@link IHeatLegendAdapters} for a list of available Adapters\r\n * @important\r\n */\r\nexport class HeatLegend extends Container {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IHeatLegendProperties}\r\n\t */\r\n\tpublic _properties!: IHeatLegendProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IHeatLegendAdapters}\r\n\t */\r\n\tpublic _adapter!: IHeatLegendAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IHeatLegendEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IHeatLegendEvents;\r\n\r\n\t/**\r\n\t * List of heat legend markers (color step rectangles).\r\n\t *\r\n\t * @type {ListTemplate<RoundedRectangle>}\r\n\t */\r\n\tpublic markers: ListTemplate<RoundedRectangle>;\r\n\r\n\t/**\r\n\t * Container which holds markers\r\n\t *\r\n\t * @type {Container}\r\n\t */\r\n\tpublic markerContainer: Container;\r\n\r\n\t/**\r\n\t * Value axis of a heat legend\r\n\t * @ignore\r\n\t * @type {ValueAxis}\r\n\t */\r\n\tprotected _valueAxis: ValueAxis;\r\n\r\n\t/**\r\n\t * Series of a heat legend\r\n\t * @ignore\r\n\t * @type {Series}\r\n\t */\r\n\tprotected _series: Series;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"HeatLegend\";\r\n\r\n\t\tthis.markerContainer = this.createChild(Container);\r\n\t\tthis.markerContainer.shouldClone = false;\r\n\r\n\t\tthis.orientation = \"horizontal\";\r\n\r\n\t\tthis.markerCount = 1;\r\n\r\n\t\t// Create a template container and list for the a marker\r\n\t\tlet marker: RoundedRectangle = new RoundedRectangle();\r\n\t\tmarker.minHeight = 20;\r\n\t\tmarker.minWidth = 20;\r\n\t\tmarker.interactionsEnabled = false;\r\n\t\tmarker.fillOpacity = 1;\r\n\t\tmarker.cornerRadius(0, 0, 0, 0);\r\n\r\n\t\tthis.markerContainer.minHeight = 20;\r\n\t\tthis.markerContainer.minWidth = 20;\r\n\r\n\t\tthis.markers = new ListTemplate<RoundedRectangle>(marker);\r\n\t\tthis._disposers.push(new ListDisposer(this.markers));\r\n\t\tthis._disposers.push(this.markers.template);\r\n\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\r\n\tprotected getMinFromRules(property: string, ) {\r\n\t\tlet series = this.series;\r\n\t\tif (series) {\r\n\t\t\tlet minValue;\r\n\t\t\t$iter.eachContinue(series.heatRules.iterator(), (heatRule) => {\r\n\t\t\t\tif (heatRule.property == property) {\r\n\t\t\t\t\tminValue = heatRule.min;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t})\r\n\t\t\treturn minValue;\r\n\t\t}\r\n\t}\r\n\r\n\tprotected getMaxFromRules(property: string, ) {\r\n\t\tlet series = this.series;\r\n\t\tif (series) {\r\n\t\t\tlet maxValue;\r\n\t\t\t$iter.each(series.heatRules.iterator(), (heatRule) => {\r\n\t\t\t\tif (heatRule.property == property) {\r\n\t\t\t\t\tmaxValue = heatRule.max;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\t\t\treturn maxValue;\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\t/**\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic validate() {\r\n\t\tsuper.validate();\r\n\r\n\t\tlet series = this.series;\r\n\r\n\t\tlet minColor = this.minColor;\r\n\t\tlet maxColor = this.maxColor;\r\n\r\n\t\tif (!$type.hasValue(minColor)) {\r\n\t\t\tminColor = toColor(this.getMinFromRules(\"fill\"));\r\n\t\t}\r\n\r\n\t\tif (!$type.hasValue(maxColor)) {\r\n\t\t\tmaxColor = toColor(this.getMaxFromRules(\"fill\"));\r\n\t\t}\r\n\r\n\t\tif (series) {\r\n\t\t\tlet seriesFill = series.fill;\r\n\t\t\tif (!$type.hasValue(minColor) && seriesFill instanceof Color) {\r\n\t\t\t\tminColor = seriesFill;\r\n\t\t\t}\r\n\t\t\tif (!$type.hasValue(maxColor) && seriesFill instanceof Color) {\r\n\t\t\t\tmaxColor = seriesFill;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!$type.hasValue(maxColor)) {\r\n\t\t\tmaxColor = toColor(this.getMaxFromRules(\"fill\"));\r\n\t\t}\r\n\r\n\t\tlet minOpacity = $type.toNumber(this.getMinFromRules(\"fillOpacity\"));\r\n\t\tif (!$type.isNumber(minOpacity)) {\r\n\t\t\tminOpacity = 1;\r\n\t\t}\r\n\t\tlet maxOpacity = $type.toNumber(this.getMaxFromRules(\"fillOpacity\"));\r\n\t\tif (!$type.isNumber(maxOpacity)) {\r\n\t\t\tmaxOpacity = 1;\r\n\t\t}\r\n\r\n\r\n\t\tlet minStrokeOpacity = $type.toNumber(this.getMinFromRules(\"strokeOpacity\"));\r\n\t\tif (!$type.isNumber(minStrokeOpacity)) {\r\n\t\t\tminStrokeOpacity = 1;\r\n\t\t}\r\n\t\tlet maxStrokeOpacity = $type.toNumber(this.getMaxFromRules(\"strokeOpacity\"));\r\n\t\tif (!$type.isNumber(maxStrokeOpacity)) {\r\n\t\t\tmaxStrokeOpacity = 1;\r\n\t\t}\r\n\r\n\t\tlet minStroke = toColor(this.getMinFromRules(\"stroke\"));\r\n\t\tlet maxStroke = toColor(this.getMaxFromRules(\"stroke\"));\r\n\r\n\r\n\t\t//if (series) {\r\n\t\tfor (let i = 0; i < this.markerCount; i++) {\r\n\t\t\tlet marker = this.markers.getIndex(i);\r\n\r\n\t\t\tif (!marker) {\r\n\t\t\t\tmarker = this.markers.create();\r\n\t\t\t\tmarker.parent = this.markerContainer;\r\n\t\t\t\tmarker.height = percent(100);\r\n\t\t\t\tmarker.width = percent(100);\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (this.markerCount == 1) {\r\n\t\t\t\tlet gradient = new LinearGradient();\r\n\t\t\t\tgradient.addColor(minColor, minOpacity);\r\n\t\t\t\tgradient.addColor(maxColor, maxOpacity);\r\n\r\n\t\t\t\tif (this.orientation == \"vertical\") {\r\n\t\t\t\t\tgradient.rotation = -90;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmarker.fill = gradient;\r\n\t\t\t\tif ($type.hasValue(minStroke) && $type.hasValue(maxStroke)) {\r\n\t\t\t\t\tlet strokeGradient = new LinearGradient();\r\n\t\t\t\t\tstrokeGradient.addColor(minStroke, minStrokeOpacity);\r\n\t\t\t\t\tstrokeGradient.addColor(maxStroke, maxStrokeOpacity);\r\n\r\n\t\t\t\t\tif (this.orientation == \"vertical\") {\r\n\t\t\t\t\t\tstrokeGradient.rotation = -90;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmarker.stroke = strokeGradient;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tlet color = new Color($colors.interpolate(minColor.rgb, maxColor.rgb, i / this.markerCount));\r\n\t\t\t\tmarker.fill = color;\r\n\r\n\t\t\t\tlet opacity = minOpacity + (maxOpacity - minOpacity) * i / this.markerCount;\r\n\t\t\t\tmarker.fillOpacity = opacity;\r\n\r\n\t\t\t\tif ($type.hasValue(minStroke) && $type.hasValue(maxStroke)) {\r\n\t\t\t\t\tlet color = new Color($colors.interpolate(minStroke.rgb, maxStroke.rgb, i / this.markerCount));\r\n\t\t\t\t\tmarker.stroke = color;\r\n\r\n\t\t\t\t\tlet opacity = minStrokeOpacity + (maxStrokeOpacity - minStrokeOpacity) * i / this.markerCount;\r\n\t\t\t\t\tmarker.strokeOpacity = opacity;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet renderer = this.valueAxis.renderer;\r\n\t\tif (this.markerCount > 1) {\r\n\t\t\tif (this.orientation == \"horizontal\") {\r\n\t\t\t\trenderer.minGridDistance = this.measuredWidth / this.markerCount;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\trenderer.minGridDistance = this.measuredHeight / this.markerCount;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (let i = this.markerCount; i < this.markers.length; i++) {\r\n\t\t\tthis.markers.getIndex(i).parent = undefined;\r\n\t\t}\r\n\t\t//}\r\n\t}\r\n\r\n\t/**\r\n\t * Min color of a heat legend. If a series is set for the legend, minColor is taken from series.\r\n\t *\r\n\t * @param {Color}\r\n\t */\r\n\tpublic set minColor(value: Color) {\r\n\r\n\t\tif (!$type.isObject(value)) {\r\n\t\t\tvalue = toColor(value);\r\n\t\t}\r\n\r\n\t\tthis.setPropertyValue(\"minColor\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns minColor value\r\n\t * @return {Color}\r\n\t */\r\n\tpublic get minColor(): Color {\r\n\t\treturn this.getPropertyValue(\"minColor\");\r\n\t}\r\n\r\n\t/**\r\n\t * Max color of a heat legend. If a series is set for the legend, maxColor is taken from series.\r\n\t *\r\n\t * @param {Color}\r\n\t */\r\n\tpublic set maxColor(value: Color) {\r\n\r\n\t\tif (!$type.isObject(value)) {\r\n\t\t\tvalue = toColor(value);\r\n\t\t}\r\n\r\n\t\tthis.setPropertyValue(\"maxColor\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns maxColor value\r\n\t * @return {Color}\r\n\t */\r\n\tpublic get maxColor(): Color {\r\n\t\treturn this.getPropertyValue(\"maxColor\");\r\n\t}\r\n\r\n\t/**\r\n\t * Number of color squares (markers) in the heat legend. If only 1 marker is used, it will be filled with gradient.\r\n\t *\r\n\t * @param {number}\r\n\t */\r\n\tpublic set markerCount(value: number) {\r\n\t\tthis.setPropertyValue(\"markerCount\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns number of color squares (markers).\r\n\t * @return {number}\r\n\t */\r\n\tpublic get markerCount(): number {\r\n\t\treturn this.getPropertyValue(\"markerCount\");\r\n\t}\r\n\r\n\t/**\r\n\t * Minimum value of heat legend's value axis. If a series is set for the legend, min is taken from series.\r\n\t *\r\n\t * @param {number}\r\n\t */\r\n\tpublic set minValue(value: number) {\r\n\t\tthis.setPropertyValue(\"minValue\", value);\r\n\t\tthis.valueAxis.min = value;\r\n\t\tthis.valueAxis.invalidateDataRange();\r\n\t}\r\n\r\n\t/**\r\n\t * Returns minimum value of heat legend.\r\n\t * @return {number}\r\n\t */\r\n\tpublic get minValue(): number {\r\n\t\treturn this.getPropertyValue(\"minValue\");\r\n\t}\r\n\r\n\t/**\r\n\t * Maximum value of heat legend's value axis. If a series is set for the legend, max is taken from series.\r\n\t *\r\n\t * @param {number}\r\n\t */\r\n\tpublic set maxValue(value: number) {\r\n\t\tthis.setPropertyValue(\"maxValue\", value);\r\n\t\tthis.valueAxis.max = value;\r\n\t\tthis.valueAxis.invalidateDataRange();\r\n\t}\r\n\r\n\t/**\r\n\t * Returns maximum value of heat legend.\r\n\t * @return {number}\r\n\t */\r\n\tpublic get maxValue(): number {\r\n\t\treturn this.getPropertyValue(\"maxValue\");\r\n\t}\r\n\r\n\t/**\r\n\t* Heat legend orientation. Note, if you change orientation of a heat legend, you must set value axis renderer properties after that, as with orientation renderer changes.\r\n\t*\r\n\t* @param {\"horizontal\" | \"vertical\"}\r\n\t*/\r\n\tpublic set orientation(value: \"horizontal\" | \"vertical\") {\r\n\t\tthis.setPropertyValue(\"orientation\", value, true);\r\n\t\tlet markerContainer = this.markerContainer;\r\n\t\tlet valueAxis = this.valueAxis;\r\n\t\t// HORIZONTAL\r\n\t\tif (value == \"horizontal\") {\r\n\t\t\tif (!$type.hasValue(this.width)) {\r\n\t\t\t\tthis.width = 200;\r\n\t\t\t}\r\n\t\t\tthis.height = undefined;\r\n\r\n\t\t\tvalueAxis.width = percent(100);\r\n\t\t\tvalueAxis.height = undefined;\r\n\r\n\t\t\tthis.layout = \"vertical\";\r\n\t\t\tmarkerContainer.width = percent(100);\r\n\t\t\tmarkerContainer.height = undefined;\r\n\t\t\tif (!(valueAxis.renderer instanceof AxisRendererX)) {\r\n\t\t\t\tvalueAxis.renderer = new AxisRendererX();\r\n\t\t\t}\r\n\t\t}\r\n\t\t// VERTICAL\r\n\t\telse {\r\n\t\t\tif (!$type.hasValue(this.height)) {\r\n\t\t\t\tthis.height = 200;\r\n\t\t\t}\r\n\t\t\tthis.width = undefined;\r\n\t\t\tthis.layout = \"horizontal\";\r\n\t\t\tmarkerContainer.width = undefined;\r\n\t\t\tmarkerContainer.height = percent(100);\r\n\t\t\tvalueAxis.height = percent(100);\r\n\t\t\tvalueAxis.width = undefined;\r\n\r\n\t\t\tif (!(valueAxis.renderer instanceof AxisRendererY)) {\r\n\t\t\t\tvalueAxis.renderer = new AxisRendererY();\r\n\t\t\t}\r\n\t\t\tvalueAxis.renderer.inside = true;\r\n\t\t\tvalueAxis.renderer.labels.template.inside = true;\r\n\t\t}\r\n\r\n\t\tlet renderer = valueAxis.renderer;\r\n\t\trenderer.grid.template.disabled = true;\r\n\t\trenderer.axisFills.template.disabled = true;\r\n\t\trenderer.baseGrid.disabled = true;\r\n\t\trenderer.labels.template.padding(2, 3, 2, 3);\r\n\r\n\t\trenderer.minHeight = undefined;\r\n\t\trenderer.minWidth = undefined;\r\n\r\n\t\tthis.markerContainer.layout = value;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns orientation value.\r\n\t *\r\n\t * @return {\"horizontal\" | \"vertical\"}\r\n\t */\r\n\tpublic get orientation(): \"horizontal\" | \"vertical\" {\r\n\t\treturn this.getPropertyValue(\"orientation\");\r\n\t}\r\n\r\n\t/**\r\n\t * Sets a value axis of heat legend. Value axis for heat legend is created automatically.\r\n\t * @param {ValueAxis}\r\n\t */\r\n\tpublic set valueAxis(valueAxis: ValueAxis) {\r\n\r\n\t\tthis._valueAxis = valueAxis;\r\n\r\n\t\tvalueAxis.parent = this;\r\n\t\tvalueAxis.strictMinMax = true;\r\n\t\tthis.orientation = this.orientation;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns valueAxis value.\r\n\t * @return {ValueAxis}\r\n\t */\r\n\tpublic get valueAxis(): ValueAxis {\r\n\t\tif (!this._valueAxis) {\r\n\t\t\tthis.valueAxis = this.createChild(ValueAxis);\r\n\t\t\tthis.valueAxis.shouldClone = false;\r\n\t\t}\r\n\t\treturn this._valueAxis;\r\n\t}\r\n\r\n\t/**\r\n\t * You can set series for heat legend. It will take min, max, minColor and maxColor values from this series.\r\n\t * @param {Series} series\r\n\t */\r\n\tset series(series: Series) {\r\n\t\tthis._series = series;\r\n\r\n\t\tlet dataField = \"value\";\r\n\r\n\t\ttry {\r\n\t\t\tlet dataFieldDefined = series.heatRules.getIndex(0).dataField;\r\n\t\t\tif (dataFieldDefined) {\r\n\t\t\t\tdataField = dataFieldDefined;\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch (err) {\r\n\r\n\t\t}\r\n\r\n\t\tthis.updateMinMax(series.dataItem.values[dataField].low, series.dataItem.values[dataField].high);\r\n\r\n\t\tseries.dataItem.events.on(\"calculatedvaluechanged\", (event) => {\r\n\t\t\tthis.updateMinMax(series.dataItem.values[dataField].low, series.dataItem.values[dataField].high);\r\n\t\t});\r\n\r\n\t\tseries.heatRules.events.on(\"inserted\", this.invalidate, this);\r\n\t\tseries.heatRules.events.on(\"removed\", this.invalidate, this);\r\n\t}\r\n\r\n\t/**\r\n\t * Returns series value.\r\n\t * @return {Series}\r\n\t */\r\n\tget series(): Series {\r\n\t\treturn this._series;\r\n\t}\r\n\r\n\t/**\r\n\t * Updates min/max of value axis.\r\n\t * @ignore\r\n\t */\r\n\tprotected updateMinMax(min: number, max: number) {\r\n\t\tlet valueAxis = this.valueAxis;\r\n\t\tif (!$type.isNumber(this.minValue)) {\r\n\t\t\tvalueAxis.min = min;\r\n\t\t\tvalueAxis.invalidateDataRange();\r\n\t\t}\r\n\t\tif (!$type.isNumber(this.maxValue)) {\r\n\t\t\tvalueAxis.max = max;\r\n\t\t\tvalueAxis.invalidateDataRange();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Processes JSON-based config before it is applied to the object.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {object}  config  Config\r\n\t */\r\n\tpublic processConfig(config?: { [index: string]: any }): void {\r\n\r\n\t\tif (config) {\r\n\r\n\t\t\t// Set up series\r\n\t\t\tif ($type.hasValue(config.series) && $type.isArray(config.series)) {\r\n\t\t\t\tfor (let i = 0, len = config.series.length; i < len; i++) {\r\n\t\t\t\t\tlet series = config.series[i];\r\n\t\t\t\t\tif ($type.hasValue(series) && $type.isString(series) && this.map.hasKey(series)) {\r\n\t\t\t\t\t\tconfig.series[i] = this.map.getKey(series);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tsuper.processConfig(config);\r\n\r\n\t}\r\n}\r\n\r\n\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"HeatLegend\"] = HeatLegend;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/charts/elements/HeatLegend.ts","/**\r\n * Cone module.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Container, IContainerProperties, IContainerAdapters, IContainerEvents } from \"../../Container\";\r\nimport { Sprite, SpriteEventDispatcher, AMEvent, visualProperties } from \"../../Sprite\";\r\nimport { Ellipse } from \"../../elements/Ellipse\";\r\nimport { LinearGradientModifier } from \"../../rendering/fills/LinearGradientModifier\";\r\nimport { percent, Percent } from \"../../utils/Percent\";\r\nimport * as $object from \"../../utils/Object\";\r\nimport * as $path from \"../../rendering/Path\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[Cone]].\r\n */\r\nexport interface IConeProperties extends IContainerProperties {\r\n\r\n\t/**\r\n\t * Angle of the point of view to the 3D element. (0-360)\r\n\t *\r\n\t * @default 30\r\n\t * @type {number}\r\n\t */\r\n\tangle?: number;\r\n\r\n\t/**\r\n\t * A relative radius of the cone's bottom (base).\r\n\t *\r\n\t * It is relevant to the inner width or height of the element.\r\n\t *\r\n\t * @default Percent(100)\r\n\t * @type {Percent}\r\n\t */\r\n\tradius?: Percent;\r\n\r\n\t/**\r\n\t * A relative radius of the cone's top (tip).\r\n\t *\r\n\t * It is relevant to the inner width or height of the element.\r\n\t *\r\n\t * @default Percent(0)\r\n\t * @type {Percent}\r\n\t */\r\n\ttopRadius?: Percent;\r\n\r\n\t/**\r\n\t * Orientation of the cone: \"horizontal\" or \"vertical\".\r\n\t *\r\n\t * @default \"vertical\"\r\n\t */\r\n\torientation?: \"horizontal\" | \"vertical\";\r\n\r\n}\r\n\r\n/**\r\n * Defines events for [[Cone]].\r\n */\r\nexport interface IConeEvents extends IContainerEvents { }\r\n\r\n/**\r\n * Defines adapters for [[Cone]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface IConeAdapters extends IContainerAdapters, IConeProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Builds a round cone/cylinder.\r\n *\r\n * @see {@link IConeEvents} for a list of available events\r\n * @see {@link IConeAdapters} for a list of available Adapters\r\n */\r\nexport class Cone extends Container {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IConeProperties}\r\n\t */\r\n\tpublic _properties!: IConeProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IConeAdapters}\r\n\t */\r\n\tpublic _adapter!: IConeAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IConeEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IConeEvents;\r\n\r\n\t/**\r\n\t * Bottom ellement.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Ellipse}\r\n\t */\r\n\tpublic bottom: Ellipse;\r\n\r\n\t/**\r\n\t * Top element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Ellipse}\r\n\t */\r\n\tpublic top: Ellipse;\r\n\r\n\t/**\r\n\t * Body element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {Sprite}\r\n\t */\r\n\tpublic body: Sprite;\r\n\r\n\t/**\r\n\t * Gradient for the fill of the body.\r\n\t *\r\n\t * @type {LinearGradientModifier}\r\n\t */\r\n\tpublic bodyFillModifier: LinearGradientModifier;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"Cone\";\r\n\r\n\t\tthis.angle = 30;\r\n\t\tthis.radius = percent(100);\r\n\t\tthis.topRadius = percent(100);\r\n\r\n\t\tthis.top = this.createChild(Ellipse);\r\n\t\tthis.top.shouldClone = false;\r\n\r\n\t\tthis.bottom = this.createChild(Ellipse);\r\n\t\tthis.bottom.shouldClone = false;\r\n\r\n\t\tthis.body = this.createChild(Sprite);\r\n\t\tthis.body.shouldClone = false;\r\n\r\n\t\tthis.body.element = this.paper.add(\"path\");\r\n\t\tthis.layout = \"none\";\r\n\r\n\t\tthis.bodyFillModifier = new LinearGradientModifier();\r\n\t\tthis.bodyFillModifier.lightnesses = [0, -0.25, 0];\r\n\t\tthis.body.fillModifier = this.bodyFillModifier;\r\n\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Draws the element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic draw(): void {\r\n\t\tsuper.draw();\r\n\r\n\t\t$object.copyProperties(this, this.top, visualProperties);\r\n\t\t$object.copyProperties(this, this.bottom, visualProperties);\r\n\t\t$object.copyProperties(this, this.body, visualProperties);\r\n\r\n\t\tlet w: number = this.innerWidth;\r\n\t\tlet h: number = this.innerHeight;\r\n\r\n\t\tlet bottom: Ellipse = this.bottom;\r\n\t\tlet top: Ellipse = this.top;\r\n\r\n\t\tlet angle: number = this.angle;\r\n\t\tlet radiusBase: number;\r\n\t\tlet dx: number;\r\n\t\tlet dy: number;\r\n\r\n\t\tif (this.orientation == \"horizontal\") {\r\n\t\t\tradiusBase = h / 2;\r\n\t\t\tbottom.y = h / 2;\r\n\t\t\ttop.y = h / 2;\r\n\t\t\ttop.x = w;\r\n\t\t\tdx = (90 - angle) / 90;\r\n\t\t\tdy = 0;\r\n\t\t\tthis.bodyFillModifier.gradient.rotation = 90;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tdx = 0;\r\n\t\t\tdy = (90 - angle) / 90;\r\n\r\n\t\t\tradiusBase = w / 2;\r\n\t\t\tbottom.y = h;\r\n\t\t\tbottom.x = w / 2;\r\n\t\t\ttop.x = w / 2;\r\n\t\t\tthis.bodyFillModifier.gradient.rotation = 0;\r\n\t\t}\r\n\r\n\t\tlet radius: number = this.radius.value * radiusBase;\r\n\t\tlet topRadius: number = this.topRadius.value * radiusBase;\r\n\r\n\t\tbottom.radius = radius - radius * dx;\r\n\t\tbottom.radiusY = radius - radius * dy;\r\n\r\n\t\ttop.radius = topRadius - topRadius * dx;\r\n\t\ttop.radiusY = topRadius - topRadius * dy;\r\n\r\n\t\tlet path: string;\r\n\t\tif (this.orientation == \"horizontal\") {\r\n\t\t\tpath = $path.moveTo({ x: 0, y: h / 2 - bottom.radiusY }) + $path.arcTo(-90, -180, bottom.radius, bottom.radiusY) + $path.lineTo({ x: w, y: h / 2 + top.radiusY }) + $path.arcTo(90, 180, top.radius, top.radiusY) + $path.closePath();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tpath = $path.moveTo({ x: w / 2 - top.radius, y: 0 }) + $path.arcTo(180, -180, top.radius, top.radiusY) + $path.lineTo({ x: w / 2 + bottom.radius, y: h }) + $path.arcTo(0, 180, bottom.radius, bottom.radiusY) + $path.closePath();\r\n\t\t}\r\n\r\n\t\tthis.body.element.attr({ \"d\": path });\r\n\t}\r\n\r\n\t/**\r\n\t * Angle of the point of view to the 3D element. (0-360)\r\n\t *\r\n\t * @default 30\r\n\t * @param {number}  value  Angle\r\n\t */\r\n\tpublic set angle(value: number) {\r\n\t\tthis.setPropertyValue(\"angle\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Angle\r\n\t */\r\n\tpublic get angle(): number {\r\n\t\treturn this.getPropertyValue(\"angle\");\r\n\t}\r\n\r\n\t/**\r\n\t * A relative radius of the cone's bottom (base).\r\n\t *\r\n\t * It is relevant to the inner width or height of the element.\r\n\t *\r\n\t * @default Percent(100)\r\n\t * @param {Percent}  value  Bottom radius\r\n\t */\r\n\tpublic set radius(value: Percent) {\r\n\t\tthis.setPropertyValue(\"radius\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Percent} Bottom radius\r\n\t */\r\n\tpublic get radius(): Percent {\r\n\t\treturn this.getPropertyValue(\"radius\");\r\n\t}\r\n\r\n\t/**\r\n\t * A relative radius of the cone's top (tip).\r\n\t *\r\n\t * It is relevant to the inner width or height of the element.\r\n\t *\r\n\t * @default Percent(0)\r\n\t * @param {Percent}  value  Top radius\r\n\t */\r\n\tpublic set topRadius(value: Percent) {\r\n\t\tthis.setPropertyValue(\"topRadius\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Percent} Top radius\r\n\t */\r\n\tpublic get topRadius(): Percent {\r\n\t\treturn this.getPropertyValue(\"topRadius\");\r\n\t}\r\n\r\n\t/**\r\n\t * Orientation of the cone: \"horizontal\" or \"vertical\".\r\n\t *\r\n\t * @default \"vertical\"\r\n\t * @param {\"horizontal\" | \"vertical\"}  value  Orientation\r\n\t */\r\n\tpublic set orientation(value: \"horizontal\" | \"vertical\") {\r\n\t\tthis.setPropertyValue(\"orientation\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @type {\"horizontal\" | \"vertical\"} Orientation\r\n\t */\r\n\tpublic get orientation(): \"horizontal\" | \"vertical\" {\r\n\t\treturn this.getPropertyValue(\"orientation\");\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../../src/.internal/core/elements/3d/Cone.ts","/**\r\n * Ellipse module.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Circle, ICircleProperties, ICircleAdapters, ICircleEvents } from \"./Circle\";\r\nimport { SpriteEventDispatcher, AMEvent } from \"../Sprite\";\r\nimport { registry } from \"../Registry\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[Ellipse]].\r\n */\r\nexport interface IEllipseProperties extends ICircleProperties {\r\n\r\n\t/**\r\n\t * Vertical radius.\r\n\t *\r\n\t * It's a relative size to the `radius`.\r\n\t *\r\n\t * E.g. 0.8 will mean the height of the ellipsis will be 80% of it's\r\n\t * horizontal radius.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tradiusY?: number;\r\n\r\n}\r\n\r\n/**\r\n * Defines events for [[Ellipse]].\r\n */\r\nexport interface IEllipseEvents extends ICircleEvents { }\r\n\r\n/**\r\n * Defines adapters\r\n * Includes both the [[Adapter]] definitions and properties\r\n * @see {@link Adapter}\r\n */\r\nexport interface IEllipseAdapters extends ICircleAdapters, IEllipseProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Draws an ellipse\r\n * @see {@link IEllipseEvents} for a list of available events\r\n * @see {@link IEllipseAdapters} for a list of available Adapters\r\n */\r\nexport class Ellipse extends Circle {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IEllipseProperties}\r\n\t */\r\n\tpublic _properties!: IEllipseProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IEllipseAdapters}\r\n\t */\r\n\tpublic _adapter!: IEllipseAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IEllipseEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IEllipseEvents;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"Ellipse\";\r\n\r\n\t\tthis.element = this.paper.add(\"ellipse\");\r\n\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Draws the ellipsis.\r\n\t */\r\n\tprotected draw() {\r\n\t\tsuper.draw();\r\n\t\tthis.element.attr({ \"rx\": this.radius });\r\n\t\tthis.element.attr({ \"ry\": this.radiusY });\r\n\t}\r\n\r\n\t/**\r\n\t * Vertical radius.\r\n\t *\r\n\t * It's a relative size to the `radius`.\r\n\t *\r\n\t * E.g. 0.8 will mean the height of the ellipsis will be 80% of it's\r\n\t * horizontal radius.\r\n\t *\r\n\t * @param {number}  value  Vertical radius\r\n\t */\r\n\tpublic set radiusY(value: number) {\r\n\t\tthis.height = value * 2;\r\n\t\tthis.invalidate();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Vertical radius\r\n\t */\r\n\tpublic get radiusY(): number {\r\n\t\treturn this.innerHeight / 2;\r\n\t}\r\n\r\n\t/**\r\n\t * Horizontal radius.\r\n\t *\r\n\t * @param {number}  value  Horizontal radius\r\n\t */\r\n\tpublic set radius(value: number) {\r\n\t\tthis.width = value * 2;\r\n\t\tthis.invalidate();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Horizontal radius\r\n\t */\r\n\tpublic get radius(): number {\r\n\t\treturn this.innerWidth / 2;\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"Ellipse\"] = Ellipse;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/elements/Ellipse.ts","/**\r\n * A module that defines Text element used to indicate links.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Label, ILabelProperties, ILabelAdapters, ILabelEvents } from \"../../core/elements/Label\";\r\nimport { SpriteEventDispatcher, AMEvent } from \"../../core/Sprite\";\r\nimport { List, IListEvents } from \"../../core/utils/List\";\r\nimport { IDisposer, MutableValueDisposer } from \"../../core/utils/Disposer\";\r\nimport { MouseCursorStyle } from \"../../core/interaction/Mouse\";\r\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\r\nimport { registry } from \"../Registry\";\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[TextLink]].\r\n */\r\nexport interface ITextLinkProperties extends ILabelProperties { }\r\n\r\n/**\r\n * Defines events for [[TextLink]].\r\n */\r\nexport interface ITextLinkEvents extends ILabelEvents { }\r\n\r\n/**\r\n * Defines adapters for [[TextLink]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface ITextLinkAdapters extends ILabelAdapters, ITextLinkProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Creates a text element with a link.\r\n *\r\n * @see {@link ITextLinkEvents} for a list of available events\r\n * @see {@link ITextLinkAdapters} for a list of available Adapters\r\n */\r\nexport class TextLink extends Label {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ITextLinkProperties}\r\n\t */\r\n\tpublic _properties!: ITextLinkProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ITextLinkAdapters}\r\n\t */\r\n\tpublic _adapter!: ITextLinkAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {ITextLinkEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: ITextLinkEvents;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.className = \"TextLink\";\r\n\t\tthis.selectable = true;\r\n\r\n\t\tlet interfaceColors = new InterfaceColorSet();\r\n\r\n\t\tthis.fill = interfaceColors.getFor(\"primaryButton\").brighten(0.3);\r\n\r\n\t\tlet hoverState = this.states.create(\"hover\");\r\n\t\thoverState.properties.fill = interfaceColors.getFor(\"primaryButtonHover\").brighten(0.3);\r\n\r\n\t\tlet downState = this.states.create(\"down\");\r\n\t\tdownState.properties.fill = interfaceColors.getFor(\"primaryButtonDown\").brighten(0.3);\r\n\r\n\t\tthis.cursorOverStyle = MouseCursorStyle.pointer;\r\n\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"TextLink\"] = TextLink;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/elements/TextLink.ts","module.exports = !require('./_descriptors') && !require('./_fails')(function () {\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_ie8-dom-define.js\n// module id = 264\n// module chunks = 26","exports.f = require('./_wks');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_wks-ext.js\n// module id = 265\n// module chunks = 26","var has = require('./_has');\nvar toIObject = require('./_to-iobject');\nvar arrayIndexOf = require('./_array-includes')(false);\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function (object, names) {\n  var O = toIObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) if (key != IE_PROTO) has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_object-keys-internal.js\n// module id = 266\n// module chunks = 26","var dP = require('./_object-dp');\nvar anObject = require('./_an-object');\nvar getKeys = require('./_object-keys');\n\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = getKeys(Properties);\n  var length = keys.length;\n  var i = 0;\n  var P;\n  while (length > i) dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_object-dps.js\n// module id = 267\n// module chunks = 26","// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./_to-iobject');\nvar gOPN = require('./_object-gopn').f;\nvar toString = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return gOPN(it);\n  } catch (e) {\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_object-gopn-ext.js\n// module id = 268\n// module chunks = 26","'use strict';\n// 19.1.2.1 Object.assign(target, source, ...)\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nvar toObject = require('./_to-object');\nvar IObject = require('./_iobject');\nvar $assign = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || require('./_fails')(function () {\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line no-undef\n  var S = Symbol();\n  var K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function (k) { B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars\n  var T = toObject(target);\n  var aLen = arguments.length;\n  var index = 1;\n  var getSymbols = gOPS.f;\n  var isEnum = pIE.f;\n  while (aLen > index) {\n    var S = IObject(arguments[index++]);\n    var keys = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) if (isEnum.call(S, key = keys[j++])) T[key] = S[key];\n  } return T;\n} : $assign;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_object-assign.js\n// module id = 269\n// module chunks = 26","'use strict';\nvar aFunction = require('./_a-function');\nvar isObject = require('./_is-object');\nvar invoke = require('./_invoke');\nvar arraySlice = [].slice;\nvar factories = {};\n\nvar construct = function (F, len, args) {\n  if (!(len in factories)) {\n    for (var n = [], i = 0; i < len; i++) n[i] = 'a[' + i + ']';\n    // eslint-disable-next-line no-new-func\n    factories[len] = Function('F,a', 'return new F(' + n.join(',') + ')');\n  } return factories[len](F, args);\n};\n\nmodule.exports = Function.bind || function bind(that /* , ...args */) {\n  var fn = aFunction(this);\n  var partArgs = arraySlice.call(arguments, 1);\n  var bound = function (/* args... */) {\n    var args = partArgs.concat(arraySlice.call(arguments));\n    return this instanceof bound ? construct(fn, args.length, args) : invoke(fn, args, that);\n  };\n  if (isObject(fn.prototype)) bound.prototype = fn.prototype;\n  return bound;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_bind.js\n// module id = 270\n// module chunks = 26","// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function (fn, args, that) {\n  var un = that === undefined;\n  switch (args.length) {\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return fn.apply(that, args);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_invoke.js\n// module id = 271\n// module chunks = 26","var $parseInt = require('./_global').parseInt;\nvar $trim = require('./_string-trim').trim;\nvar ws = require('./_string-ws');\nvar hex = /^[-+]?0[xX]/;\n\nmodule.exports = $parseInt(ws + '08') !== 8 || $parseInt(ws + '0x16') !== 22 ? function parseInt(str, radix) {\n  var string = $trim(String(str), 3);\n  return $parseInt(string, (radix >>> 0) || (hex.test(string) ? 16 : 10));\n} : $parseInt;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_parse-int.js\n// module id = 272\n// module chunks = 26","var $parseFloat = require('./_global').parseFloat;\nvar $trim = require('./_string-trim').trim;\n\nmodule.exports = 1 / $parseFloat(require('./_string-ws') + '-0') !== -Infinity ? function parseFloat(str) {\n  var string = $trim(String(str), 3);\n  var result = $parseFloat(string);\n  return result === 0 && string.charAt(0) == '-' ? -0 : result;\n} : $parseFloat;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_parse-float.js\n// module id = 273\n// module chunks = 26","var cof = require('./_cof');\nmodule.exports = function (it, msg) {\n  if (typeof it != 'number' && cof(it) != 'Number') throw TypeError(msg);\n  return +it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_a-number-value.js\n// module id = 274\n// module chunks = 26","// 20.1.2.3 Number.isInteger(number)\nvar isObject = require('./_is-object');\nvar floor = Math.floor;\nmodule.exports = function isInteger(it) {\n  return !isObject(it) && isFinite(it) && floor(it) === it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_is-integer.js\n// module id = 275\n// module chunks = 26","// 20.2.2.20 Math.log1p(x)\nmodule.exports = Math.log1p || function log1p(x) {\n  return (x = +x) > -1e-8 && x < 1e-8 ? x - x * x / 2 : Math.log(1 + x);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_math-log1p.js\n// module id = 276\n// module chunks = 26","// 20.2.2.16 Math.fround(x)\nvar sign = require('./_math-sign');\nvar pow = Math.pow;\nvar EPSILON = pow(2, -52);\nvar EPSILON32 = pow(2, -23);\nvar MAX32 = pow(2, 127) * (2 - EPSILON32);\nvar MIN32 = pow(2, -126);\n\nvar roundTiesToEven = function (n) {\n  return n + 1 / EPSILON - 1 / EPSILON;\n};\n\nmodule.exports = Math.fround || function fround(x) {\n  var $abs = Math.abs(x);\n  var $sign = sign(x);\n  var a, result;\n  if ($abs < MIN32) return $sign * roundTiesToEven($abs / MIN32 / EPSILON32) * MIN32 * EPSILON32;\n  a = (1 + EPSILON32 / EPSILON) * $abs;\n  result = a - (a - $abs);\n  // eslint-disable-next-line no-self-compare\n  if (result > MAX32 || result != result) return $sign * Infinity;\n  return $sign * result;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_math-fround.js\n// module id = 277\n// module chunks = 26","// call something on iterator step with safe closing on error\nvar anObject = require('./_an-object');\nmodule.exports = function (iterator, fn, value, entries) {\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch (e) {\n    var ret = iterator['return'];\n    if (ret !== undefined) anObject(ret.call(iterator));\n    throw e;\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_iter-call.js\n// module id = 278\n// module chunks = 26","var aFunction = require('./_a-function');\nvar toObject = require('./_to-object');\nvar IObject = require('./_iobject');\nvar toLength = require('./_to-length');\n\nmodule.exports = function (that, callbackfn, aLen, memo, isRight) {\n  aFunction(callbackfn);\n  var O = toObject(that);\n  var self = IObject(O);\n  var length = toLength(O.length);\n  var index = isRight ? length - 1 : 0;\n  var i = isRight ? -1 : 1;\n  if (aLen < 2) for (;;) {\n    if (index in self) {\n      memo = self[index];\n      index += i;\n      break;\n    }\n    index += i;\n    if (isRight ? index < 0 : length <= index) {\n      throw TypeError('Reduce of empty array with no initial value');\n    }\n  }\n  for (;isRight ? index >= 0 : length > index; index += i) if (index in self) {\n    memo = callbackfn(memo, self[index], index, O);\n  }\n  return memo;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_array-reduce.js\n// module id = 279\n// module chunks = 26","// 22.1.3.3 Array.prototype.copyWithin(target, start, end = this.length)\n'use strict';\nvar toObject = require('./_to-object');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nvar toLength = require('./_to-length');\n\nmodule.exports = [].copyWithin || function copyWithin(target /* = 0 */, start /* = 0, end = @length */) {\n  var O = toObject(this);\n  var len = toLength(O.length);\n  var to = toAbsoluteIndex(target, len);\n  var from = toAbsoluteIndex(start, len);\n  var end = arguments.length > 2 ? arguments[2] : undefined;\n  var count = Math.min((end === undefined ? len : toAbsoluteIndex(end, len)) - from, len - to);\n  var inc = 1;\n  if (from < to && to < from + count) {\n    inc = -1;\n    from += count - 1;\n    to += count - 1;\n  }\n  while (count-- > 0) {\n    if (from in O) O[to] = O[from];\n    else delete O[to];\n    to += inc;\n    from += inc;\n  } return O;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_array-copy-within.js\n// module id = 280\n// module chunks = 26","module.exports = function (done, value) {\n  return { value: value, done: !!done };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_iter-step.js\n// module id = 281\n// module chunks = 26","// 21.2.5.3 get RegExp.prototype.flags()\nif (require('./_descriptors') && /./g.flags != 'g') require('./_object-dp').f(RegExp.prototype, 'flags', {\n  configurable: true,\n  get: require('./_flags')\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.regexp.flags.js\n// module id = 282\n// module chunks = 26","module.exports = function (exec) {\n  try {\n    return { e: false, v: exec() };\n  } catch (e) {\n    return { e: true, v: e };\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_perform.js\n// module id = 283\n// module chunks = 26","var anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar newPromiseCapability = require('./_new-promise-capability');\n\nmodule.exports = function (C, x) {\n  anObject(C);\n  if (isObject(x) && x.constructor === C) return x;\n  var promiseCapability = newPromiseCapability.f(C);\n  var resolve = promiseCapability.resolve;\n  resolve(x);\n  return promiseCapability.promise;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_promise-resolve.js\n// module id = 284\n// module chunks = 26","'use strict';\nvar strong = require('./_collection-strong');\nvar validate = require('./_validate-collection');\nvar MAP = 'Map';\n\n// 23.1 Map Objects\nmodule.exports = require('./_collection')(MAP, function (get) {\n  return function Map() { return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.1.3.6 Map.prototype.get(key)\n  get: function get(key) {\n    var entry = strong.getEntry(validate(this, MAP), key);\n    return entry && entry.v;\n  },\n  // 23.1.3.9 Map.prototype.set(key, value)\n  set: function set(key, value) {\n    return strong.def(validate(this, MAP), key === 0 ? 0 : key, value);\n  }\n}, strong, true);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.map.js\n// module id = 285\n// module chunks = 26","'use strict';\nvar dP = require('./_object-dp').f;\nvar create = require('./_object-create');\nvar redefineAll = require('./_redefine-all');\nvar ctx = require('./_ctx');\nvar anInstance = require('./_an-instance');\nvar forOf = require('./_for-of');\nvar $iterDefine = require('./_iter-define');\nvar step = require('./_iter-step');\nvar setSpecies = require('./_set-species');\nvar DESCRIPTORS = require('./_descriptors');\nvar fastKey = require('./_meta').fastKey;\nvar validate = require('./_validate-collection');\nvar SIZE = DESCRIPTORS ? '_s' : 'size';\n\nvar getEntry = function (that, key) {\n  // fast case\n  var index = fastKey(key);\n  var entry;\n  if (index !== 'F') return that._i[index];\n  // frozen object case\n  for (entry = that._f; entry; entry = entry.n) {\n    if (entry.k == key) return entry;\n  }\n};\n\nmodule.exports = {\n  getConstructor: function (wrapper, NAME, IS_MAP, ADDER) {\n    var C = wrapper(function (that, iterable) {\n      anInstance(that, C, NAME, '_i');\n      that._t = NAME;         // collection type\n      that._i = create(null); // index\n      that._f = undefined;    // first entry\n      that._l = undefined;    // last entry\n      that[SIZE] = 0;         // size\n      if (iterable != undefined) forOf(iterable, IS_MAP, that[ADDER], that);\n    });\n    redefineAll(C.prototype, {\n      // 23.1.3.1 Map.prototype.clear()\n      // 23.2.3.2 Set.prototype.clear()\n      clear: function clear() {\n        for (var that = validate(this, NAME), data = that._i, entry = that._f; entry; entry = entry.n) {\n          entry.r = true;\n          if (entry.p) entry.p = entry.p.n = undefined;\n          delete data[entry.i];\n        }\n        that._f = that._l = undefined;\n        that[SIZE] = 0;\n      },\n      // 23.1.3.3 Map.prototype.delete(key)\n      // 23.2.3.4 Set.prototype.delete(value)\n      'delete': function (key) {\n        var that = validate(this, NAME);\n        var entry = getEntry(that, key);\n        if (entry) {\n          var next = entry.n;\n          var prev = entry.p;\n          delete that._i[entry.i];\n          entry.r = true;\n          if (prev) prev.n = next;\n          if (next) next.p = prev;\n          if (that._f == entry) that._f = next;\n          if (that._l == entry) that._l = prev;\n          that[SIZE]--;\n        } return !!entry;\n      },\n      // 23.2.3.6 Set.prototype.forEach(callbackfn, thisArg = undefined)\n      // 23.1.3.5 Map.prototype.forEach(callbackfn, thisArg = undefined)\n      forEach: function forEach(callbackfn /* , that = undefined */) {\n        validate(this, NAME);\n        var f = ctx(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3);\n        var entry;\n        while (entry = entry ? entry.n : this._f) {\n          f(entry.v, entry.k, this);\n          // revert to the last existing entry\n          while (entry && entry.r) entry = entry.p;\n        }\n      },\n      // 23.1.3.7 Map.prototype.has(key)\n      // 23.2.3.7 Set.prototype.has(value)\n      has: function has(key) {\n        return !!getEntry(validate(this, NAME), key);\n      }\n    });\n    if (DESCRIPTORS) dP(C.prototype, 'size', {\n      get: function () {\n        return validate(this, NAME)[SIZE];\n      }\n    });\n    return C;\n  },\n  def: function (that, key, value) {\n    var entry = getEntry(that, key);\n    var prev, index;\n    // change existing entry\n    if (entry) {\n      entry.v = value;\n    // create new entry\n    } else {\n      that._l = entry = {\n        i: index = fastKey(key, true), // <- index\n        k: key,                        // <- key\n        v: value,                      // <- value\n        p: prev = that._l,             // <- previous entry\n        n: undefined,                  // <- next entry\n        r: false                       // <- removed\n      };\n      if (!that._f) that._f = entry;\n      if (prev) prev.n = entry;\n      that[SIZE]++;\n      // add to index\n      if (index !== 'F') that._i[index] = entry;\n    } return that;\n  },\n  getEntry: getEntry,\n  setStrong: function (C, NAME, IS_MAP) {\n    // add .keys, .values, .entries, [@@iterator]\n    // 23.1.3.4, 23.1.3.8, 23.1.3.11, 23.1.3.12, 23.2.3.5, 23.2.3.8, 23.2.3.10, 23.2.3.11\n    $iterDefine(C, NAME, function (iterated, kind) {\n      this._t = validate(iterated, NAME); // target\n      this._k = kind;                     // kind\n      this._l = undefined;                // previous\n    }, function () {\n      var that = this;\n      var kind = that._k;\n      var entry = that._l;\n      // revert to the last existing entry\n      while (entry && entry.r) entry = entry.p;\n      // get next entry\n      if (!that._t || !(that._l = entry = entry ? entry.n : that._t._f)) {\n        // or finish the iteration\n        that._t = undefined;\n        return step(1);\n      }\n      // return step by kind\n      if (kind == 'keys') return step(0, entry.k);\n      if (kind == 'values') return step(0, entry.v);\n      return step(0, [entry.k, entry.v]);\n    }, IS_MAP ? 'entries' : 'values', !IS_MAP, true);\n\n    // add [@@species], 23.1.2.2, 23.2.2.2\n    setSpecies(NAME);\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_collection-strong.js\n// module id = 286\n// module chunks = 26","'use strict';\nvar strong = require('./_collection-strong');\nvar validate = require('./_validate-collection');\nvar SET = 'Set';\n\n// 23.2 Set Objects\nmodule.exports = require('./_collection')(SET, function (get) {\n  return function Set() { return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.2.3.1 Set.prototype.add(value)\n  add: function add(value) {\n    return strong.def(validate(this, SET), value = value === 0 ? 0 : value, value);\n  }\n}, strong);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.set.js\n// module id = 287\n// module chunks = 26","'use strict';\nvar each = require('./_array-methods')(0);\nvar redefine = require('./_redefine');\nvar meta = require('./_meta');\nvar assign = require('./_object-assign');\nvar weak = require('./_collection-weak');\nvar isObject = require('./_is-object');\nvar fails = require('./_fails');\nvar validate = require('./_validate-collection');\nvar WEAK_MAP = 'WeakMap';\nvar getWeak = meta.getWeak;\nvar isExtensible = Object.isExtensible;\nvar uncaughtFrozenStore = weak.ufstore;\nvar tmp = {};\nvar InternalMap;\n\nvar wrapper = function (get) {\n  return function WeakMap() {\n    return get(this, arguments.length > 0 ? arguments[0] : undefined);\n  };\n};\n\nvar methods = {\n  // 23.3.3.3 WeakMap.prototype.get(key)\n  get: function get(key) {\n    if (isObject(key)) {\n      var data = getWeak(key);\n      if (data === true) return uncaughtFrozenStore(validate(this, WEAK_MAP)).get(key);\n      return data ? data[this._i] : undefined;\n    }\n  },\n  // 23.3.3.5 WeakMap.prototype.set(key, value)\n  set: function set(key, value) {\n    return weak.def(validate(this, WEAK_MAP), key, value);\n  }\n};\n\n// 23.3 WeakMap Objects\nvar $WeakMap = module.exports = require('./_collection')(WEAK_MAP, wrapper, methods, weak, true, true);\n\n// IE11 WeakMap frozen keys fix\nif (fails(function () { return new $WeakMap().set((Object.freeze || Object)(tmp), 7).get(tmp) != 7; })) {\n  InternalMap = weak.getConstructor(wrapper, WEAK_MAP);\n  assign(InternalMap.prototype, methods);\n  meta.NEED = true;\n  each(['delete', 'has', 'get', 'set'], function (key) {\n    var proto = $WeakMap.prototype;\n    var method = proto[key];\n    redefine(proto, key, function (a, b) {\n      // store frozen objects on internal weakmap shim\n      if (isObject(a) && !isExtensible(a)) {\n        if (!this._f) this._f = new InternalMap();\n        var result = this._f[key](a, b);\n        return key == 'set' ? this : result;\n      // store all the rest on native weakmap\n      } return method.call(this, a, b);\n    });\n  });\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.weak-map.js\n// module id = 288\n// module chunks = 26","'use strict';\nvar redefineAll = require('./_redefine-all');\nvar getWeak = require('./_meta').getWeak;\nvar anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar anInstance = require('./_an-instance');\nvar forOf = require('./_for-of');\nvar createArrayMethod = require('./_array-methods');\nvar $has = require('./_has');\nvar validate = require('./_validate-collection');\nvar arrayFind = createArrayMethod(5);\nvar arrayFindIndex = createArrayMethod(6);\nvar id = 0;\n\n// fallback for uncaught frozen keys\nvar uncaughtFrozenStore = function (that) {\n  return that._l || (that._l = new UncaughtFrozenStore());\n};\nvar UncaughtFrozenStore = function () {\n  this.a = [];\n};\nvar findUncaughtFrozen = function (store, key) {\n  return arrayFind(store.a, function (it) {\n    return it[0] === key;\n  });\n};\nUncaughtFrozenStore.prototype = {\n  get: function (key) {\n    var entry = findUncaughtFrozen(this, key);\n    if (entry) return entry[1];\n  },\n  has: function (key) {\n    return !!findUncaughtFrozen(this, key);\n  },\n  set: function (key, value) {\n    var entry = findUncaughtFrozen(this, key);\n    if (entry) entry[1] = value;\n    else this.a.push([key, value]);\n  },\n  'delete': function (key) {\n    var index = arrayFindIndex(this.a, function (it) {\n      return it[0] === key;\n    });\n    if (~index) this.a.splice(index, 1);\n    return !!~index;\n  }\n};\n\nmodule.exports = {\n  getConstructor: function (wrapper, NAME, IS_MAP, ADDER) {\n    var C = wrapper(function (that, iterable) {\n      anInstance(that, C, NAME, '_i');\n      that._t = NAME;      // collection type\n      that._i = id++;      // collection id\n      that._l = undefined; // leak store for uncaught frozen objects\n      if (iterable != undefined) forOf(iterable, IS_MAP, that[ADDER], that);\n    });\n    redefineAll(C.prototype, {\n      // 23.3.3.2 WeakMap.prototype.delete(key)\n      // 23.4.3.3 WeakSet.prototype.delete(value)\n      'delete': function (key) {\n        if (!isObject(key)) return false;\n        var data = getWeak(key);\n        if (data === true) return uncaughtFrozenStore(validate(this, NAME))['delete'](key);\n        return data && $has(data, this._i) && delete data[this._i];\n      },\n      // 23.3.3.4 WeakMap.prototype.has(key)\n      // 23.4.3.4 WeakSet.prototype.has(value)\n      has: function has(key) {\n        if (!isObject(key)) return false;\n        var data = getWeak(key);\n        if (data === true) return uncaughtFrozenStore(validate(this, NAME)).has(key);\n        return data && $has(data, this._i);\n      }\n    });\n    return C;\n  },\n  def: function (that, key, value) {\n    var data = getWeak(anObject(key), true);\n    if (data === true) uncaughtFrozenStore(that).set(key, value);\n    else data[that._i] = value;\n    return that;\n  },\n  ufstore: uncaughtFrozenStore\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_collection-weak.js\n// module id = 289\n// module chunks = 26","// https://tc39.github.io/ecma262/#sec-toindex\nvar toInteger = require('./_to-integer');\nvar toLength = require('./_to-length');\nmodule.exports = function (it) {\n  if (it === undefined) return 0;\n  var number = toInteger(it);\n  var length = toLength(number);\n  if (number !== length) throw RangeError('Wrong length!');\n  return length;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_to-index.js\n// module id = 290\n// module chunks = 26","// all object keys, includes non-enumerable and symbols\nvar gOPN = require('./_object-gopn');\nvar gOPS = require('./_object-gops');\nvar anObject = require('./_an-object');\nvar Reflect = require('./_global').Reflect;\nmodule.exports = Reflect && Reflect.ownKeys || function ownKeys(it) {\n  var keys = gOPN.f(anObject(it));\n  var getSymbols = gOPS.f;\n  return getSymbols ? keys.concat(getSymbols(it)) : keys;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_own-keys.js\n// module id = 291\n// module chunks = 26","'use strict';\n// https://tc39.github.io/proposal-flatMap/#sec-FlattenIntoArray\nvar isArray = require('./_is-array');\nvar isObject = require('./_is-object');\nvar toLength = require('./_to-length');\nvar ctx = require('./_ctx');\nvar IS_CONCAT_SPREADABLE = require('./_wks')('isConcatSpreadable');\n\nfunction flattenIntoArray(target, original, source, sourceLen, start, depth, mapper, thisArg) {\n  var targetIndex = start;\n  var sourceIndex = 0;\n  var mapFn = mapper ? ctx(mapper, thisArg, 3) : false;\n  var element, spreadable;\n\n  while (sourceIndex < sourceLen) {\n    if (sourceIndex in source) {\n      element = mapFn ? mapFn(source[sourceIndex], sourceIndex, original) : source[sourceIndex];\n\n      spreadable = false;\n      if (isObject(element)) {\n        spreadable = element[IS_CONCAT_SPREADABLE];\n        spreadable = spreadable !== undefined ? !!spreadable : isArray(element);\n      }\n\n      if (spreadable && depth > 0) {\n        targetIndex = flattenIntoArray(target, original, element, toLength(element.length), targetIndex, depth - 1) - 1;\n      } else {\n        if (targetIndex >= 0x1fffffffffffff) throw TypeError();\n        target[targetIndex] = element;\n      }\n\n      targetIndex++;\n    }\n    sourceIndex++;\n  }\n  return targetIndex;\n}\n\nmodule.exports = flattenIntoArray;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_flatten-into-array.js\n// module id = 292\n// module chunks = 26","// https://github.com/tc39/proposal-string-pad-start-end\nvar toLength = require('./_to-length');\nvar repeat = require('./_string-repeat');\nvar defined = require('./_defined');\n\nmodule.exports = function (that, maxLength, fillString, left) {\n  var S = String(defined(that));\n  var stringLength = S.length;\n  var fillStr = fillString === undefined ? ' ' : String(fillString);\n  var intMaxLength = toLength(maxLength);\n  if (intMaxLength <= stringLength || fillStr == '') return S;\n  var fillLen = intMaxLength - stringLength;\n  var stringFiller = repeat.call(fillStr, Math.ceil(fillLen / fillStr.length));\n  if (stringFiller.length > fillLen) stringFiller = stringFiller.slice(0, fillLen);\n  return left ? stringFiller + S : S + stringFiller;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_string-pad.js\n// module id = 293\n// module chunks = 26","var getKeys = require('./_object-keys');\nvar toIObject = require('./_to-iobject');\nvar isEnum = require('./_object-pie').f;\nmodule.exports = function (isEntries) {\n  return function (it) {\n    var O = toIObject(it);\n    var keys = getKeys(O);\n    var length = keys.length;\n    var i = 0;\n    var result = [];\n    var key;\n    while (length > i) if (isEnum.call(O, key = keys[i++])) {\n      result.push(isEntries ? [key, O[key]] : O[key]);\n    } return result;\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_object-to-array.js\n// module id = 294\n// module chunks = 26","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar classof = require('./_classof');\nvar from = require('./_array-from-iterable');\nmodule.exports = function (NAME) {\n  return function toJSON() {\n    if (classof(this) != NAME) throw TypeError(NAME + \"#toJSON isn't generic\");\n    return from(this);\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_collection-to-json.js\n// module id = 295\n// module chunks = 26","var forOf = require('./_for-of');\n\nmodule.exports = function (iter, ITERATOR) {\n  var result = [];\n  forOf(iter, false, result.push, result, ITERATOR);\n  return result;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_array-from-iterable.js\n// module id = 296\n// module chunks = 26","// https://rwaldron.github.io/proposal-math-extensions/\nmodule.exports = Math.scale || function scale(x, inLow, inHigh, outLow, outHigh) {\n  if (\n    arguments.length === 0\n      // eslint-disable-next-line no-self-compare\n      || x != x\n      // eslint-disable-next-line no-self-compare\n      || inLow != inLow\n      // eslint-disable-next-line no-self-compare\n      || inHigh != inHigh\n      // eslint-disable-next-line no-self-compare\n      || outLow != outLow\n      // eslint-disable-next-line no-self-compare\n      || outHigh != outHigh\n  ) return NaN;\n  if (x === Infinity || x === -Infinity) return x;\n  return (x - inLow) * (outHigh - outLow) / (inHigh - inLow) + outLow;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_math-scale.js\n// module id = 297\n// module chunks = 26","/**\r\n * Module for a multi-part arched line.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Polyline, IPolylineProperties, IPolylineAdapters, IPolylineEvents } from \"./Polyline\";\r\nimport { SpriteEventDispatcher, AMEvent } from \"../Sprite\";\r\nimport { IPoint } from \"../../core/defs/IPoint\";\r\nimport { registry } from \"../Registry\";\r\nimport * as $math from \"../../core/utils/Math\";\r\nimport * as $path from \"../../core/rendering/Path\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[Polyarc]].\r\n */\r\nexport interface IPolyarcProperties extends IPolylineProperties {\r\n\r\n\t/**\r\n\t * Relative position along the line the control point is. (0-1)\r\n\t *\r\n\t * @default 0.5\r\n\t * @type {number}\r\n\t */\r\n\tcontrolPointPosition: number;\r\n\r\n\t/**\r\n\t * Relative distance of the control point. (0-1)\r\n\t *\r\n\t * Default is half the length of the line. (0.5)\r\n\t *\r\n\t * @default 0.5\r\n\t * @type {number}\r\n\t */\r\n\tcontrolPointDistance: number;\r\n\r\n}\r\n\r\n/**\r\n * Defines events for [[Polyarc]].\r\n */\r\nexport interface IPolyarcEvents extends IPolylineEvents { }\r\n\r\n/**\r\n * Defines adapters for [[Polyarc]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface IPolyarcAdapters extends IPolylineAdapters, IPolyarcProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Draws a multi-part arched line.\r\n *\r\n * @see {@link IPolyarcEvents} for a list of available events\r\n * @see {@link IPolyarcAdapters} for a list of available Adapters\r\n */\r\nexport class Polyarc extends Polyline {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IPolyarcProperties}\r\n\t */\r\n\tpublic _properties!: IPolyarcProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IPolyarcAdapters}\r\n\t */\r\n\tpublic _adapter!: IPolyarcAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IPolyarcEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IPolyarcEvents;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"Polyarc\";\r\n\r\n\t\tthis.controlPointDistance = 0.5;\r\n\t\tthis.controlPointPosition = 0.5;\r\n\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Creats and adds an SVG path for the arc.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic makePath(): void {\r\n\t\tthis._distance = 0;\r\n\t\tlet segments = this.segments;\r\n\r\n\t\tif (segments && segments.length > 0) {\r\n\t\t\tlet path: string = \"\";\r\n\t\t\tthis._realSegments = [];\r\n\r\n\t\t\tfor (let i = 0; i < segments.length; i++) {\r\n\t\t\t\tlet points: IPoint[] = segments[i];\r\n\t\t\t\tlet realPoints: IPoint[] = [];\r\n\t\t\t\tthis._realSegments.push(realPoints);\r\n\t\t\t\tif (points.length > 0) {\r\n\t\t\t\t\tpath += $path.moveTo(points[0]);\r\n\r\n\t\t\t\t\tfor (let p = 1; p < points.length; p++) {\r\n\t\t\t\t\t\tlet pointA: IPoint = points[p - 1];\r\n\t\t\t\t\t\tlet pointB: IPoint = points[p];\r\n\r\n\t\t\t\t\t\tlet distanceAB: number = $math.getDistance(pointB, pointA);\r\n\t\t\t\t\t\tlet cpDistance: number = distanceAB * this.controlPointDistance;\r\n\t\t\t\t\t\tlet controlPointPosition: number = this.controlPointPosition;\r\n\t\t\t\t\t\tlet angle: number = -$math.getAngle(pointA, pointB);\r\n\r\n\t\t\t\t\t\tlet cpx: number = pointA.x + (pointB.x - pointA.x) * controlPointPosition * 0.5 - cpDistance * $math.sin(angle);\r\n\t\t\t\t\t\tlet cpy: number = pointA.y + (pointB.y - pointA.y) * controlPointPosition * 0.5 - cpDistance * $math.cos(angle);\r\n\t\t\t\t\t\tlet controlPoint1: IPoint = { x: cpx, y: cpy };\r\n\r\n\t\t\t\t\t\tlet cpx2: number = pointA.x + (pointB.x - pointA.x) * controlPointPosition * 1.5 - cpDistance * $math.sin(angle);\r\n\t\t\t\t\t\tlet cpy2: number = pointA.y + (pointB.y - pointA.y) * controlPointPosition * 1.5 - cpDistance * $math.cos(angle);\r\n\t\t\t\t\t\tlet controlPoint2: IPoint = { x: cpx2, y: cpy2 };\r\n\r\n\t\t\t\t\t\tpath += $path.cubicCurveTo(pointB, controlPoint1, controlPoint2);\r\n\r\n\t\t\t\t\t\t// we add a lot of points in order to get the position/angle later\r\n\t\t\t\t\t\tlet stepCount: number = Math.ceil(distanceAB);\r\n\t\t\t\t\t\tlet prevPoint: IPoint = pointA;\r\n\t\t\t\t\t\tfor (let i: number = 0; i <= stepCount; i++) {\r\n\t\t\t\t\t\t\tlet point: IPoint = $math.getPointOnCubicCurve(pointA, pointB, controlPoint1, controlPoint2, i / stepCount);\r\n\t\t\t\t\t\t\trealPoints.push(point);\r\n\t\t\t\t\t\t\tthis._distance += $math.getDistance(prevPoint, point);\r\n\t\t\t\t\t\t\tprevPoint = point;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.element.attr({ \"d\": path });\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Relative position along the line the control point is. (0-1)\r\n\t *\r\n\t * @default 0.5\r\n\t * @param {number}  value  Position (0-1)\r\n\t */\r\n\tpublic set controlPointPosition(value: number) {\r\n\t\tthis.setPropertyValue(\"controlPointPosition\", value);\r\n\t\tthis.makePath();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Position (0-1)\r\n\t */\r\n\tpublic get controlPointPosition(): number {\r\n\t\treturn this.getPropertyValue(\"controlPointPosition\");\r\n\t}\r\n\r\n\t/**\r\n\t * Relative distance of the control point. (0-1)\r\n\t *\r\n\t * Default is half the length of the line. (0.5)\r\n\t *\r\n\t * @default 0.5\r\n\t * @param {number}  value  Distance (0-1)\r\n\t */\r\n\tpublic set controlPointDistance(value: number) {\r\n\t\tthis.setPropertyValue(\"controlPointDistance\", value);\r\n\t\tthis.makePath();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Distance (0-1)\r\n\t */\r\n\tpublic get controlPointDistance(): number {\r\n\t\treturn this.getPropertyValue(\"controlPointDistance\");\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"Polyarc\"] = Polyarc;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/elements/Polyarc.ts","/**\r\n * Polygon module.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Sprite, ISpriteProperties, ISpriteAdapters, ISpriteEvents, SpriteEventDispatcher, AMEvent } from \"../Sprite\";\r\nimport { IPoint } from \"../defs/IPoint\";\r\nimport { Morpher } from \"../utils/Morpher\";\r\nimport { IMorphable } from \"../defs/IMorphable\";\r\nimport { registry } from \"../Registry\";\r\nimport * as $path from \"../rendering/Path\";\r\nimport * as $type from \"../utils/Type\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[Polygon]].\r\n */\r\nexport interface IPolygonProperties extends ISpriteProperties {\r\n\r\n\t/**\r\n\t * An array of X/Y coordinates for each elbow of the polygon.\r\n\t */\r\n\tpoints?: IPoint[][][];\r\n\r\n}\r\n\r\n/**\r\n * Defines events for [[Polygon]].\r\n */\r\nexport interface IPolygonEvents extends ISpriteEvents { }\r\n\r\n/**\r\n * Defines adapters for [[Polygon]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface IPolygonAdapters extends ISpriteAdapters, IPolygonProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Draws a polygon.\r\n *\r\n * @see {@link IPolygonEvents} for a list of available events\r\n * @see {@link IPolygonAdapters} for a list of available Adapters\r\n */\r\nexport class Polygon extends Sprite implements IMorphable {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IPolygonProperties}\r\n\t */\r\n\tpublic _properties!: IPolygonProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IPolygonAdapters}\r\n\t */\r\n\tpublic _adapter!: IPolygonAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IPolygonEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IPolygonEvents;\r\n\r\n\t/**\r\n\t * A morpher instance that is used to morph polygon into some other shape.\r\n\t *\r\n\t * @type {Morpher}\r\n\t */\r\n\tprotected _morpher: Morpher;\r\n\r\n\t/**\r\n\t * A set of points used for morpher.\r\n\t *\r\n\t * @type {IPoint[][][]}\r\n\t */\r\n\tprotected _morphPoints: IPoint[][][];\r\n\r\n\t/**\r\n\t * Current points that morpher uses. This is needed so that we don't\r\n\t * overwrite polygons original points.\r\n\t *\r\n\t * @type {IPoint[][][]}\r\n\t */\r\n\tprotected _currentPoints: IPoint[][][];\r\n\r\n\t/**\r\n\t * @deprecated Not used\r\n\t * @type {number}\r\n\t */\r\n\tprotected _centerX: number;\r\n\r\n\t/**\r\n\t * @deprecated Not used\r\n\t * @type {number}\r\n\t */\r\n\tprotected _centerY: number;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"Polygon\";\r\n\t\tthis.element = this.paper.add(\"path\");\r\n\t\tthis.shapeRendering = \"auto\";\r\n\t\tthis._currentPoints = [];\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * An array of X/Y coordinates for each elbow of the polygon.\r\n\t *\r\n\t * @todo Example\r\n\t * @param {IPoint[][][]}  points  Polygon points\r\n\t */\r\n\tpublic set points(points: IPoint[][][]) {\r\n\t\tthis.setPropertyValue(\"points\", points, true);\r\n\t\tthis._currentPoints = this.points;\r\n\t}\r\n\r\n\t/**\r\n\t * @return {IPoint[]} Polygon points\r\n\t */\r\n\tpublic get points(): IPoint[][][] {\r\n\t\treturn this.getPropertyValue(\"points\");\r\n\t}\r\n\r\n\t/**\r\n\t * Current points. Used when morphing the element, so that original `points`\r\n\t * are not overwritten.\r\n\t *\r\n\t * @param {IPoint[][][]}  points  Polygon points\r\n\t */\r\n\tpublic set currentPoints(points: IPoint[][][]) {\r\n\t\tif (this._currentPoints != points) {\r\n\t\t\tthis._currentPoints = points;\r\n\t\t\tthis.draw();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {IPoint[]} Polygon points\r\n\t */\r\n\tpublic get currentPoints(): IPoint[][][] {\r\n\t\treturn this._currentPoints;\r\n\t}\r\n\r\n\t/**\r\n\t * Draws the element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic draw(): void {\r\n\t\tlet path: string = \"\";\r\n\t\tlet points: IPoint[][][] = this._currentPoints;\r\n\r\n\t\tlet left: number;\r\n\t\tlet right: number;\r\n\t\tlet top: number;\r\n\t\tlet bottom: number;\r\n\r\n\t\tif (points.length > 0) {\r\n\t\t\t// separate areas\r\n\t\t\tfor (let i: number = 0; i < points.length; i++) {\r\n\t\t\t\t// surface\r\n\t\t\t\tlet surface: IPoint[] = points[i][0];\r\n\t\t\t\tlet hole: IPoint[] = points[i][1];\r\n\r\n\t\t\t\tif (surface && surface.length > 0) {\r\n\t\t\t\t\tlet point: IPoint = surface[0];\r\n\r\n\t\t\t\t\tpath += $path.moveTo(point);\r\n\r\n\t\t\t\t\tfor (let s: number = 0; s < surface.length; s++) {\r\n\t\t\t\t\t\tpoint = surface[s];\r\n\t\t\t\t\t\tpath += $path.lineTo(point);\r\n\r\n\t\t\t\t\t\tif ((right < point.x) || !$type.isNumber(right)) {\r\n\t\t\t\t\t\t\tright = point.x;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ((left > point.x) || !$type.isNumber(left)) {\r\n\t\t\t\t\t\t\tleft = point.x;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ((top > point.y) || !$type.isNumber(top)) {\r\n\t\t\t\t\t\t\ttop = point.y;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ((bottom < point.y) || !$type.isNumber(bottom)) {\r\n\t\t\t\t\t\t\tbottom = point.y;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// hole\r\n\t\t\t\tif (hole && hole.length > 0) {\r\n\t\t\t\t\tlet point: IPoint = hole[0];\r\n\t\t\t\t\tpath += $path.moveTo(point);\r\n\r\n\t\t\t\t\tfor (let h: number = 0; h < hole.length; h++) {\r\n\t\t\t\t\t\tpoint = hole[h];\r\n\t\t\t\t\t\tpath += $path.lineTo(point);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(path){\r\n\t\t\t\tpath += $path.closePath();\r\n\t\t\t}\r\n\r\n\t\t\tthis.bbox.x = left;\r\n\t\t\tthis.bbox.y = top;\r\n\t\t\tthis.bbox.width = right - left;\r\n\t\t\tthis.bbox.height = bottom - top;\r\n\t\t}\r\n\r\n\t\tthis.element.attr({ \"d\": path });\r\n\t}\r\n\r\n\t/**\r\n\t * Measures element\r\n\t */\r\n\tprotected measureElement(): void {\r\n\r\n\t\t// Overriding to avoid extra measurement.\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * A calculated center point for the shape.\r\n\t *\r\n\t * @readonly\r\n\t * @return {IPoint} Center\r\n\t */\r\n\tpublic get centerPoint(): IPoint {\r\n\t\treturn { x: this.bbox.x + this.bbox.width / 2, y: this.bbox.y + this.bbox.height / 2 };\r\n\t}\r\n\r\n\t/**\r\n\t * A [[Morpher]] instance that is used to morph polygon into some other\r\n\t * shape.\r\n\t *\r\n\t * @readonly\r\n\t * @return {Morpher} Morpher instance\r\n\t */\r\n\tpublic get morpher(): Morpher {\r\n\t\tif (!this._morpher) {\r\n\t\t\tthis._morpher = new Morpher(this);\r\n\t\t\tthis._disposers.push(this._morpher);\r\n\t\t}\r\n\t\treturn this._morpher;\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"Polygon\"] = Polygon;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/elements/Polygon.ts","/**\r\n * Morpher module contains functionality that allows transforming (morphing)\r\n * SVG shapes like paths, rectangles, circles between one another.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { BaseObject } from \"../Base\";\r\nimport { IPoint } from \"../defs/IPoint\";\r\nimport { IRectangle } from \"../defs/IRectangle\";\r\nimport { IMorphable } from \"../defs/IMorphable\";\r\nimport { IAnimatable, Animation, AnimationDisposer } from \"../utils/Animation\";\r\nimport { MultiDisposer } from \"../utils/Disposer\";\r\nimport * as $math from \"../utils/Math\";\r\nimport * as $ease from \"../utils/Ease\";\r\nimport * as $type from \"../utils/Type\";\r\n\r\n/**\r\n * Morpher class can be used in conjunction with [[Animation]] to transform one\r\n * SVG shape into another.\r\n */\r\nexport class Morpher extends BaseObject implements IAnimatable {\r\n\r\n\t/**\r\n\t * An element that will be a subject for morphing.\r\n\t *\r\n\t * @type {IMorphable}\r\n\t */\r\n\tpublic morphable: IMorphable;\r\n\r\n\t/**\r\n\t * [_morphFromPointsReal description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {Optional<IPoint[][][]>}\r\n\t */\r\n\tprotected _morphFromPointsReal: $type.Optional<IPoint[][][]>;\r\n\r\n\t/**\r\n\t * [_morphToPointsReal description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {Optional<IPoint[][][]>}\r\n\t */\r\n\tprotected _morphToPointsReal: $type.Optional<IPoint[][][]>;\r\n\r\n\t/**\r\n\t * [_morphToPoints description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {Optional<IPoint[][][]>}\r\n\t */\r\n\tprotected _morphToPoints: $type.Optional<IPoint[][][]>;\r\n\r\n\t/**\r\n\t * Morph progress (0-1)\r\n\t *\r\n\t * @type {Optional<number>}\r\n\t */\r\n\tprotected _morphProgress: $type.Optional<number>;\r\n\r\n\t/**\r\n\t * List of animations currently running.\r\n\t *\r\n\t * @type {Optional<Array<Animation>>}\r\n\t */\r\n\tprotected _animations: $type.Optional<Array<Animation>>;\r\n\r\n\t/**\r\n\t * A storage for measurements.\r\n\t *\r\n\t * @type {IRectangle[]}\r\n\t */\r\n\tprotected _bboxes: IRectangle[] = [];\r\n\r\n\t/**\r\n\t * Duration of the morphing animation in milliseconds.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tpublic morphDuration: number = 800;\r\n\r\n\t/**\r\n\t * An easing function to use for morphing animation.\r\n\t *\r\n\t * @see {@link Ease}\r\n\t * @type {Function}\r\n\t */\r\n\tpublic morphEasing: (value: number) => number = $ease.cubicOut;\r\n\r\n\t/**\r\n\t * If set to `true` then all separate parts of the multi-part shape will\r\n\t * morph into a single target shape. Otherwise each separate part will render\r\n\t * into separate target shapes.\r\n\t *\r\n\t * @type {boolean}\r\n\t */\r\n\tpublic morphToSingle: boolean = true;\r\n\r\n\t/**\r\n\t * A ratio to scale morphed object in relation to the source object.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tpublic scaleRatio: number = 1;\r\n\r\n\t/**\r\n\t * Constructor.\r\n\t *\r\n\t * @param {IMorphable} morphable An object to morph\r\n\t */\r\n\tconstructor(morphable: IMorphable) {\r\n\t\tsuper();\r\n\t\tthis.className = \"Morpher\";\r\n\t\tthis.morphable = morphable;\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Morphs shape to polygon.\r\n\t *\r\n\t * @param {IPoint[][][]}        toPoints  Corner points of the target shape\r\n\t * @param {number}              duration  Duration in milliseconds\r\n\t * @param {(number) => number}  easing    Easing function\r\n\t * @return {Animation}                    Animation\r\n\t */\r\n\tpublic morphToPolygon(toPoints: IPoint[][][], duration?: number, easing?: (value: number) => number): Animation {\r\n\t\tlet points: IPoint[][][] = this.morphable.currentPoints;\r\n\r\n\t\tthis.sortPoints(points);\r\n\t\tthis.sortPoints(toPoints);\r\n\r\n\t\tthis._morphFromPointsReal = [];\r\n\t\tthis._morphToPointsReal = [];\r\n\r\n\t\tif (!$type.hasValue(duration)) {\r\n\t\t\tduration = this.morphDuration;\r\n\t\t}\r\n\r\n\t\tif (!$type.hasValue(easing)) {\r\n\t\t\teasing = this.morphEasing;\r\n\t\t}\r\n\r\n\t\tthis._morphFromPointsReal = this.normalizePoints(toPoints, points);\r\n\t\tthis._morphToPointsReal = this.normalizePoints(points, toPoints);\r\n\r\n\t\tthis.morphable.currentPoints = this._morphFromPointsReal;\r\n\r\n\t\tlet animation = new Animation(this, { property: \"morphProgress\", from: 0, to: 1 }, duration, easing);\r\n\t\tthis._disposers.push(animation);\r\n\t\tanimation.start()\r\n\t\treturn animation;\r\n\t}\r\n\r\n\t/**\r\n\t * [normalizePoints description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @param  {IPoint[][][]}  pointsA  Point A\r\n\t * @param  {IPoint[][][]}  pointsB  Point B\r\n\t * @return {IPoint[]}               Normalized points\r\n\t */\r\n\tpublic normalizePoints(pointsA: IPoint[][][], pointsB: IPoint[][][]): IPoint[][][] {\r\n\t\tfor (let i: number = 0; i < pointsA.length; i++) {\r\n\t\t\tlet surfaceA: IPoint[] = pointsA[i][0];\r\n\r\n\t\t\tlet holeA: IPoint[] = pointsA[i][1];\r\n\t\t\tlet bboxA: IRectangle = $type.getValue($math.getBBox(surfaceA));\r\n\r\n\t\t\tlet middleX: number = bboxA.x + bboxA.width;\r\n\t\t\tlet middleY: number = bboxA.y + bboxA.height;\r\n\r\n\t\t\t// check if we have the same in PointsB\r\n\t\t\tif (!pointsB[i]) {\r\n\t\t\t\tpointsB[i] = [];\r\n\t\t\t}\r\n\r\n\t\t\t// check if we have surface in pointsB\r\n\t\t\tif (surfaceA && !pointsB[i][0]) {\r\n\t\t\t\tpointsB[i][0] = [{ x: middleX, y: middleY }, { x: middleX, y: middleY }];\r\n\t\t\t}\r\n\r\n\t\t\tif (pointsB[i][0]) {\r\n\t\t\t\tpointsB[i][0] = this.addPoints(pointsB[i][0], surfaceA.length);\r\n\r\n\t\t\t\tlet distance: number = Infinity;\r\n\t\t\t\tlet splitAt: number = 0;\r\n\r\n\t\t\t\tfor (let a = 0; a < pointsB[i][0].length; a++) {\r\n\t\t\t\t\tlet newDistance = $math.getDistance(pointsB[i][0][a], surfaceA[0]);\r\n\t\t\t\t\tif (newDistance < distance) {\r\n\t\t\t\t\t\tsplitAt = a;\r\n\t\t\t\t\t\tdistance = newDistance;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet partA = pointsB[i][0].slice(0, splitAt);\r\n\t\t\t\tlet partB = pointsB[i][0].slice(splitAt);\r\n\t\t\t\tpointsB[i][0] = partB.concat(partA);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif (holeA) {\r\n\t\t\t\tif (!pointsB[i][1]) {\r\n\t\t\t\t\tpointsB[i][1] = [{ x: middleX, y: middleY }, { x: middleX, y: middleY }];\r\n\t\t\t\t}\r\n\t\t\t\tpointsB[i][1] = this.addPoints(pointsB[i][1], holeA.length);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn pointsB;\r\n\t}\r\n\r\n\t/**\r\n\t * [sortPoints description]\r\n\t *\r\n\t * @ignore Exclude from doc\r\n\t * @todo Description\r\n\t * @param {IPoint[][][]}  points  [description]\r\n\t * @return                        common bbox of points\r\n\t */\r\n\tpublic sortPoints(points: IPoint[][][]): $type.Optional<IRectangle> {\r\n\t\tpoints.sort(function(a, b) {\r\n\t\t\tlet bbox1: IRectangle = $type.getValue($math.getBBox(a[0]));\r\n\t\t\tlet bbox2: IRectangle = $type.getValue($math.getBBox(b[0]));\r\n\r\n\t\t\tif (bbox1.width * bbox1.height > bbox2.width * bbox2.height) {\r\n\t\t\t\treturn -1;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tlet bboxes: IRectangle[] = [];\r\n\t\tfor (let i: number = 0; i < points.length; i++) {\r\n\t\t\tlet surface: IPoint[] = points[i][0];\r\n\t\t\tif (surface) {\r\n\t\t\t\tbboxes.push($type.getValue($math.getBBox(surface)));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn $math.getCommonRectangle(bboxes);\r\n\t}\r\n\r\n\t/**\r\n\t * Morphs shape to a circle.\r\n\t *\r\n\t * @param  {number}              radius    Target circle radius (px)\r\n\t * @param  {number}              duration  Duration (ms)\r\n\t * @param  {(number) => number}  easing    Easing function\r\n\t * @return {Animation}                     Animation\r\n\t */\r\n\tpublic morphToCircle(radius?: number, duration?: number, easing?: (value: number) => number): Animation {\r\n\t\tlet points: IPoint[][][] = this.morphable.points;\r\n\r\n\t\tlet commonBBox = this.sortPoints(points);\r\n\r\n\t\tthis._morphFromPointsReal = [];\r\n\t\tthis._morphToPointsReal = [];\r\n\r\n\t\tif (!$type.hasValue(duration)) {\r\n\t\t\tduration = this.morphDuration;\r\n\t\t}\r\n\r\n\t\tif (!$type.hasValue(easing)) {\r\n\t\t\teasing = this.morphEasing;\r\n\t\t}\r\n\r\n\t\t// surface\r\n\t\tfor (let i: number = 0; i < points.length; i++) {\r\n\t\t\tlet surface: IPoint[] = points[i][0];\r\n\t\t\tlet hole: IPoint[] = points[i][1];\r\n\r\n\t\t\tthis._morphFromPointsReal[i] = [];\r\n\t\t\tthis._morphToPointsReal[i] = [];\r\n\r\n\t\t\tif (surface) {\r\n\r\n\t\t\t\tlet toPoints: IPoint[] = surface;\r\n\t\t\t\tlet fromPoints: IPoint[] = surface;\r\n\t\t\t\tlet bbox: IRectangle = $type.getValue($math.getBBox(fromPoints)) // this._bboxes[i];\r\n\r\n\t\t\t\tif (this.morphToSingle) {\r\n\t\t\t\t\tbbox = $type.getValue(commonBBox);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet middleX: number = bbox.x + bbox.width / 2;\r\n\t\t\t\tlet middleY: number = bbox.y + bbox.height / 2;\r\n\t\t\t\tlet realRadius: $type.Optional<number> = radius;\r\n\t\t\t\tif (!$type.isNumber(realRadius)) {\r\n\t\t\t\t\trealRadius = Math.min(bbox.width / 2, bbox.height / 2);\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttoPoints = [];\r\n\r\n\t\t\t\t// find angle for the first point\r\n\t\t\t\tlet startAngle: number = $math.getAngle({ x: middleX, y: middleY }, surface[0]);\r\n\t\t\t\tlet count: number = 100;\r\n\r\n\t\t\t\tif (surface.length > count) {\r\n\t\t\t\t\tcount = surface.length;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfromPoints = this.addPoints(surface, count);\r\n\t\t\t\tcount = fromPoints.length; // add Points might increase number a bit\r\n\r\n\t\t\t\tlet angle: number = 360 / (count - 1);\r\n\r\n\t\t\t\tfor (let a: number = 0; a < count; a++) {\r\n\t\t\t\t\tlet realAngle: number = angle * a + startAngle;\r\n\t\t\t\t\tlet pointOnCircle: IPoint = { x: middleX + realRadius * $math.cos(realAngle), y: middleY + realRadius * $math.sin(realAngle) };\r\n\t\t\t\t\ttoPoints[a] = pointOnCircle;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (hole && hole.length > 0) {\r\n\t\t\t\t\tfor (let i: number = 0; i < hole.length; i++) {\r\n\t\t\t\t\t\ttoPoints.push({ x: middleX, y: middleY });\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._morphFromPointsReal[i][0] = fromPoints;\r\n\t\t\t\tthis._morphToPointsReal[i][0] = toPoints;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.morphable.currentPoints = this._morphFromPointsReal;\r\n\r\n\t\tlet animation = new Animation(this, { property: \"morphProgress\", from: 0, to: 1 }, duration, easing);\r\n\t\tthis._disposers.push(animation);\r\n\t\tanimation.start()\r\n\t\treturn animation;\r\n\t}\r\n\r\n\t/**\r\n\t * [addPoints description]\r\n\t *\r\n\t * @ignore Exclude from doc\r\n\t * @todo Description\r\n\t * @param  {IPoint[]}  points         [description]\r\n\t * @param  {number}    mustHaveCount  [description]\r\n\t * @return {IPoint[]}                 [description]\r\n\t */\r\n\tpublic addPoints(points: IPoint[], mustHaveCount: number): IPoint[] {\r\n\t\tlet addToSegmentCount: number = Math.round(mustHaveCount / points.length);\r\n\t\tlet newPoints: IPoint[] = [];\r\n\t\tfor (let i: number = 0; i < points.length; i++) {\r\n\t\t\tlet point0: IPoint = points[i];\r\n\t\t\tlet point1: IPoint;\r\n\t\t\tif (i == points.length - 1) {\r\n\t\t\t\tpoint1 = points[0];\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tpoint1 = points[i + 1];\r\n\t\t\t}\r\n\r\n\t\t\tnewPoints.push(point0);\r\n\r\n\t\t\tfor (let p: number = 1; p < addToSegmentCount; p++) {\r\n\t\t\t\tlet percent: number = p / addToSegmentCount;\r\n\t\t\t\tlet extraPoint: IPoint = { x: point0.x + (point1.x - point0.x) * percent, y: point0.y + (point1.y - point0.y) * percent }\r\n\t\t\t\tnewPoints.push(extraPoint);\r\n\t\t\t}\r\n\r\n\t\t\t// stop adding in case we already added more than left in original\r\n\t\t\tif (newPoints.length + points.length - i == mustHaveCount) {\r\n\t\t\t\taddToSegmentCount = 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (newPoints.length < mustHaveCount && points.length > 0) {\r\n\t\t\tlet lastPoint: IPoint = points[points.length - 1];\r\n\t\t\tfor (let p: number = newPoints.length; p < mustHaveCount; p++) {\r\n\t\t\t\t// add same as last\r\n\t\t\t\tnewPoints.push({ x: lastPoint.x, y: lastPoint.y });\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn newPoints;\r\n\t}\r\n\r\n\t/**\r\n\t * Morphs shape into a rectangle.\r\n\t *\r\n\t * @param  {number}              width     Width of the target rectangle (px)\r\n\t * @param  {number}              height    Height of the target rectangle (px)\r\n\t * @param  {number}              duration  Duration (ms)\r\n\t * @param  {(number) => number}  easing    Easing function\r\n\t * @return {Animation}                     Animation\r\n\t */\r\n\tpublic morphToRectangle(width?: number, height?: number, duration?: number, easing?: (value: number) => number): Animation {\r\n\t\tlet points: IPoint[][][] = this.morphable.points;\r\n\r\n\t\tthis.sortPoints(points);\r\n\r\n\t\tthis._morphFromPointsReal = [];\r\n\t\tthis._morphToPointsReal = [];\r\n\r\n\t\tif (!$type.hasValue(duration)) {\r\n\t\t\tduration = this.morphDuration;\r\n\t\t}\r\n\r\n\t\tif (!$type.hasValue(easing)) {\r\n\t\t\teasing = this.morphEasing;\r\n\t\t}\r\n\r\n\t\t//\t\tlet biggestBBox: IRectangle = this._bboxes[this._biggestIndex];\r\n\r\n\t\t// surface\r\n\t\tfor (let i: number = 0; i < points.length; i++) {\r\n\t\t\tlet surface: IPoint[] = points[i][0];\r\n\t\t\tlet hole: IPoint[] = points[i][1];\r\n\r\n\t\t\tthis._morphFromPointsReal[i] = [];\r\n\t\t\tthis._morphToPointsReal[i] = [];\r\n\r\n\t\t\tif (surface) {\r\n\r\n\t\t\t\tlet toPoints: IPoint[] = surface;\r\n\t\t\t\tlet fromPoints: IPoint[] = surface;\r\n\t\t\t\tlet bbox: IRectangle = this._bboxes[i];\r\n\r\n\r\n\t\t\t\t// we only work with first area. TODO: maybe we should find the biggest one?\r\n\t\t\t\tif (this.morphToSingle) {\r\n\t\t\t\t\t//if (i != this._biggestIndex) {\r\n\t\t\t\t\t//\tbbox = { x: biggestBBox.x + biggestBBox.width / 2, y: biggestBBox.y + biggestBBox.height / 2, width: 0, height: 0 };\r\n\t\t\t\t\t//}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet x: number = bbox.x;\r\n\t\t\t\tlet y: number = bbox.y;\r\n\r\n\t\t\t\tlet realWidth: $type.Optional<number> = width;\r\n\t\t\t\tlet realHeight: $type.Optional<number> = height;\r\n\r\n\t\t\t\tif (!$type.isNumber(realWidth)) {\r\n\t\t\t\t\trealWidth = bbox.width;\r\n\t\t\t\t}\r\n\t\t\t\tif (!$type.isNumber(realHeight)) {\r\n\t\t\t\t\trealHeight = bbox.height;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttoPoints = [{ x: x, y: y }, { x: x + realWidth, y: y }, { x: x + realWidth, y: y + realHeight }, { x: x, y: y + realHeight }];\r\n\t\t\t\ttoPoints = this.addPoints(toPoints, surface.length);\r\n\r\n\t\t\t\t// if polygon has less points then count, add\r\n\t\t\t\tif (surface.length < 4) {\r\n\t\t\t\t\tfor (let i: number = surface.length; i < 4; i++) {\r\n\t\t\t\t\t\ttoPoints.push({ x: surface[i].x, y: surface[i].y });\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (hole && hole.length > 0) {\r\n\t\t\t\t\tlet middleX: number = bbox.x + bbox.width / 2;\r\n\t\t\t\t\tlet middleY: number = bbox.y + bbox.height / 2;\r\n\r\n\t\t\t\t\tfor (let i: number = 0; i < hole.length; i++) {\r\n\t\t\t\t\t\ttoPoints.push({ x: middleX, y: middleY });\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._morphFromPointsReal[i][0] = fromPoints;\r\n\t\t\t\tthis._morphToPointsReal[i][0] = toPoints;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.morphable.currentPoints = this._morphFromPointsReal;\r\n\r\n\t\tlet animation = new Animation(this, { property: \"morphProgress\", from: 0, to: 1 }, duration, easing);\r\n\t\tthis._disposers.push(animation);\r\n\t\tanimation.start()\r\n\t\treturn animation;\r\n\t}\r\n\r\n\t/**\r\n\t * Progress of the morph transition.\r\n\t *\r\n\t * Setting this will also trigger actual transformation.\r\n\t *\r\n\t * @param {number}  value  Progress (0-1)\r\n\t */\r\n\tpublic set morphProgress(value: $type.Optional<number>) {\r\n\t\tthis._morphProgress = value;\r\n\r\n\t\tlet currentPoints: IPoint[][][] = [];\r\n\r\n\t\tif (value != null) {\r\n\t\t\tlet fromPoints: $type.Optional<IPoint[][][]> = this._morphFromPointsReal;\r\n\t\t\tlet toPoints: $type.Optional<IPoint[][][]> = this._morphToPointsReal;\r\n\r\n\t\t\tif (fromPoints != null && toPoints != null) {\r\n\r\n\t\t\t\tfor (let i: number = 0; i < fromPoints.length; i++) {\r\n\r\n\t\t\t\t\tlet currentArea: IPoint[][] = [];\r\n\t\t\t\t\tcurrentPoints.push(currentArea);\r\n\r\n\t\t\t\t\tlet surfaceFrom: IPoint[] = fromPoints[i][0];\r\n\t\t\t\t\tlet holeFrom: IPoint[] = fromPoints[i][1];\r\n\r\n\t\t\t\t\tlet surfaceTo: IPoint[] = toPoints[i][0];\r\n\t\t\t\t\tlet holeTo: IPoint[] = toPoints[i][1];\r\n\r\n\t\t\t\t\tif (surfaceFrom && surfaceFrom.length > 0 && surfaceTo && surfaceTo.length > 0) {\r\n\r\n\t\t\t\t\t\tlet currentSurface: IPoint[] = [];\r\n\r\n\t\t\t\t\t\tfor (let i: number = 0; i < surfaceFrom.length; i++) {\r\n\t\t\t\t\t\t\tlet point0: IPoint = surfaceFrom[i];\r\n\t\t\t\t\t\t\tlet point1: IPoint = surfaceTo[i];\r\n\r\n\t\t\t\t\t\t\tlet currentPoint: IPoint = { x: point0.x + (point1.x * this.scaleRatio - point0.x) * value, y: point0.y + (point1.y * this.scaleRatio - point0.y) * value }\r\n\r\n\t\t\t\t\t\t\tcurrentSurface.push(currentPoint);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcurrentArea[0] = currentSurface;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (holeFrom && holeFrom.length > 0 && holeTo && holeTo.length > 0) {\r\n\t\t\t\t\t\tlet currentHole: IPoint[] = [];\r\n\t\t\t\t\t\tfor (let i: number = 0; i < holeFrom.length; i++) {\r\n\t\t\t\t\t\t\tlet point0: IPoint = holeFrom[i];\r\n\t\t\t\t\t\t\tlet point1: IPoint = holeTo[i];\r\n\r\n\t\t\t\t\t\t\tlet currentPoint: IPoint = { x: point0.x + (point1.x * this.scaleRatio - point0.x) * value, y: point0.y + (point1.y * this.scaleRatio - point0.y) * value }\r\n\r\n\t\t\t\t\t\t\tcurrentHole.push(currentPoint);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcurrentArea[1] = currentHole;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.morphable.currentPoints = currentPoints;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the progress of morph transition.\r\n\t *\r\n\t * @return {Optional<number>} Progress (0-1)\r\n\t */\r\n\tpublic get morphProgress(): $type.Optional<number> {\r\n\t\treturn this._morphProgress;\r\n\t}\r\n\r\n\t/**\r\n\t * Restores the shape to its original appearance.\r\n\t *\r\n\t * @param {number}              duration  Duration (ms)\r\n\t * @param {(number) => number}  easing    Easing function\r\n\t * @return {Animation}                    Animation\r\n\t */\r\n\tpublic morphBack(duration?: number, easing?: (value: number) => number): Animation {\r\n\t\tthis._morphToPointsReal = this._morphFromPointsReal;\r\n\t\tthis._morphFromPointsReal = this.morphable.currentPoints;\r\n\r\n\t\tif (!$type.hasValue(duration)) {\r\n\t\t\tduration = this.morphDuration;\r\n\t\t}\r\n\r\n\t\tif (!$type.hasValue(easing)) {\r\n\t\t\teasing = this.morphEasing;\r\n\t\t}\r\n\r\n\t\tlet animation = new Animation(this, { property: \"morphProgress\", from: 0, to: 1 }, duration, easing);\r\n\t\tthis._disposers.push(animation);\r\n\t\tanimation.start()\r\n\t\treturn animation;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a list of morph animations currently being played.\r\n\t *\r\n\t * @return {Array<Animation>} List of animations\r\n\t */\r\n\tpublic get animations(): Array<Animation> {\r\n\t\tif (!this._animations) {\r\n\t\t\tthis._animations = [];\r\n\t\t\tthis._disposers.push(new AnimationDisposer(this._animations));\r\n\t\t}\r\n\t\treturn this._animations;\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/utils/Morpher.ts","/**\r\n * Preloader module.\r\n *\r\n * Preloader is a progress indicator.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Container, IContainerProperties, IContainerAdapters, IContainerEvents } from \"../Container\";\r\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\r\nimport { SpriteEventDispatcher, AMEvent } from \"../Sprite\";\r\nimport { Slice } from \"./Slice\";\r\nimport { Label } from \"./Label\";\r\nimport { registry } from \"../Registry\";\r\nimport { percent } from \"../../core/utils/Percent\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[Preloader]].\r\n */\r\nexport interface IPreloaderProperties extends IContainerProperties {\r\n\r\n\t/**\r\n\t * Current preload progress. (0-1)\r\n\t *\r\n\t * * 0 - 0%\r\n\t * * 0.5 - 50%\r\n\t * * 1 - 100%\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tprogress?: number;\r\n\r\n\t/**\r\n\t * Delay display of preloader by X milliseconds.\r\n\t *\r\n\t * When loading starts (`progress` is set to <1) and finishes (`progress` is\r\n\t * set to 1) before `delay` ms, the loader is never shown.\r\n\t *\r\n\t * This is used to avoid brief flashing of the preload for very quick loads.\r\n\t *\r\n\t * @default 1000\r\n\t * @type {number}\r\n\t */\r\n\tdelay?: number;\r\n\r\n}\r\n\r\n/**\r\n * Defines events for [[Preloader]].\r\n */\r\nexport interface IPreloaderEvents extends IContainerEvents { }\r\n\r\n/**\r\n * Defines adapters for [[Preloader]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface IPreloaderAdapters extends IContainerAdapters, IPreloaderProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * A class used to draw and display progress indicator.\r\n *\r\n * @see {@link IPreloaderEvents} for a list of available events\r\n * @see {@link IPreloaderAdapters} for a list of available Adapters\r\n */\r\nexport class Preloader extends Container {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IPreloaderProperties}\r\n\t */\r\n\tpublic _properties!: IPreloaderProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IPreloaderAdapters}\r\n\t */\r\n\tpublic _adapter!: IPreloaderAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IPreloaderEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IPreloaderEvents;\r\n\r\n\t/**\r\n\t * A [[Slice]] element that indicates load progress.\r\n\t *\r\n\t * This can be used to modify appearance of the preloader elements.\r\n\t *\r\n\t * @type {Slice}\r\n\t */\r\n\tpublic progressSlice: Slice;\r\n\r\n\t/**\r\n\t * A [[Slice]] element that shows the full ring. (background for the\r\n\t * `progressSlice`)\r\n\t *\r\n\t * This can be used to modify appearance of the preloader elements.\r\n\t *\r\n\t * @type {Slice}\r\n\t */\r\n\tpublic backgroundSlice: Slice;\r\n\r\n\t/**\r\n\t * Label that displays progress in percent.\r\n\t *\r\n\t * This can be used to modify appearance of the preloader elements.\r\n\t *\r\n\t * @type {Label}\r\n\t */\r\n\tpublic label: Label;\r\n\r\n\t/**\r\n\t * Logs the timestamp of when the loader was initiated. It will be used to\r\n\t * delay showing of the Preloader so for quick operations it does not even\r\n\t * appear on screen.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tprotected _started: number;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\r\n\t\t// Init\r\n\t\tsuper();\r\n\t\tthis.className = \"Preloader\";\r\n\r\n\t\t// Set dimensions\r\n\t\tthis.width = percent(100);\r\n\t\tthis.height = percent(100);\r\n\r\n\t\tlet interfaceColors = new InterfaceColorSet();\r\n\r\n\t\t// Create main container\r\n\t\tlet sliceContainer: Container = this.createChild(Container);\r\n\t\tsliceContainer.shouldClone = false;\r\n\r\n\t\t// Add background (100%) slice\r\n\t\tlet backgroundSlice: Slice = sliceContainer.createChild(Slice);\r\n\t\tbackgroundSlice.shouldClone = false;\r\n\t\tbackgroundSlice.radius = 53;\r\n\t\tbackgroundSlice.arc = 360;\r\n\t\tbackgroundSlice.fill = interfaceColors.getFor(\"fill\");\r\n\t\tbackgroundSlice.fillOpacity = 0.8;\r\n\t\tbackgroundSlice.innerRadius = 42;\r\n\t\tbackgroundSlice.isMeasured = false;\r\n\t\tthis.backgroundSlice = backgroundSlice;\r\n\r\n\t\t// Add progress slice\r\n\t\tlet progressSlice: Slice = sliceContainer.createChild(Slice);\r\n\t\tprogressSlice.shouldClone = false;\r\n\t\tprogressSlice.radius = 50;\r\n\t\tprogressSlice.innerRadius = 45;\r\n\t\tprogressSlice.fill = interfaceColors.getFor(\"alternativeBackground\");\r\n\t\tprogressSlice.fillOpacity = 0.2;\r\n\t\tprogressSlice.isMeasured = false;\r\n\t\tthis.progressSlice = progressSlice;\r\n\r\n\t\t// Add text label element\r\n\t\tlet label: Label = sliceContainer.createChild(Label);\r\n\t\tlabel.shouldClone = false;\r\n\t\tlabel.horizontalCenter = \"middle\";\r\n\t\tlabel.verticalCenter = \"middle\";\r\n\t\tlabel.isMeasured = false;\r\n\t\tlabel.fill = interfaceColors.getFor(\"text\");\r\n\t\tlabel.align = \"center\";\r\n\t\tlabel.valign = \"middle\";\r\n\t\tlabel.fillOpacity = 0.4;\r\n\t\tthis.label = label;\r\n\r\n\t\t// Set defaults\r\n\t\tthis.background.opacity = 1;\r\n\t\tthis.background.fill = interfaceColors.getFor(\"background\");\r\n\t\tthis.contentAlign = \"center\";\r\n\t\tthis.contentValign = \"middle\";\r\n\t\tthis.delay = 500;\r\n\r\n\t\t// Create hidden state\r\n\t\tlet hiddenState = this.states.create(\"hidden\");\r\n\t\thiddenState.transitionDuration = 2000;\r\n\t\thiddenState.properties.opacity = 0;\r\n\r\n\t\t// Hide by default\r\n\t\tthis.visible = false;\r\n\t\tthis.hide(0);\r\n\r\n\t\t// Make it disposable\r\n\t\t// @todo Maybe it's enough to just dispose `sliceContainer`?\r\n\t\tthis._disposers.push(this.backgroundSlice);\r\n\t\tthis._disposers.push(this.progressSlice);\r\n\t\tthis._disposers.push(this.label);\r\n\t\tthis._disposers.push(sliceContainer);\r\n\t}\r\n\r\n\t/**\r\n\t * Current preload progress. (0-1)\r\n\t *\r\n\t * * 0 - 0%\r\n\t * * 0.5 - 50%\r\n\t * * 1 - 100%\r\n\t *\r\n\t * Setting this to a value less than 1, will automatically reveal the\r\n\t * preloader, while setting it to 1 (100%) will hide it.\r\n\t *\r\n\t * @param {number} value Progress (0-1)\r\n\t */\r\n\tpublic set progress(value: number) {\r\n\t\tthis.setPropertyValue(\"progress\", value);\r\n\r\n\t\t/*if (!this.visible && value == 1) {\r\n\t\t\treturn;\r\n\t\t}*/\r\n\r\n\t\tthis.progressSlice.arc = 360 * value;\r\n\r\n\t\tif (this.label) {\r\n\t\t\tthis.label.text = Math.round(value * 100) + \"%\";\r\n\t\t}\r\n\r\n\t\tif (value >= 1) {\r\n\r\n\t\t\t// Cancel the timeout\r\n\t\t\tif (this._started) {\r\n\t\t\t\tthis._started = undefined;\r\n\t\t\t}\r\n\r\n\t\t\t// TODO remove closure ?\r\n\t\t\tregistry.events.once(\"enterframe\", () => {\r\n\t\t\t\tthis.hide();\r\n\t\t\t});\r\n\t\t\tthis.interactionsEnabled = false;\r\n\t\t}\r\n\t\telse if (value > 0) {\r\n\t\t\tif (this.delay) {\r\n\t\t\t\tif (!this._started) {\r\n\t\t\t\t\tthis._started = new Date().getTime();\r\n\t\t\t\t}\r\n\t\t\t\telse if ((this._started + this.delay) >= new Date().getTime()) {\r\n\t\t\t\t\tthis.show();\r\n\t\t\t\t\tthis.interactionsEnabled = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.show();\r\n\t\t\t\tthis.interactionsEnabled = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Progress (0-1)\r\n\t */\r\n\tpublic get progress(): number {\r\n\t\treturn this.getPropertyValue(\"progress\");\r\n\t}\r\n\r\n\t/**\r\n\t * Delay display of preloader by X milliseconds.\r\n\t *\r\n\t * When loading starts (`progress` is set to <1) and finishes (`progress` is\r\n\t * set to 1) before `delay` ms, the loader is never shown.\r\n\t *\r\n\t * This is used to avoid brief flashing of the preload for very quick loads.\r\n\t *\r\n\t * @default 1000\r\n\t * @param {number}  value  Delay (ms)\r\n\t */\r\n\tpublic set delay(value: number) {\r\n\t\tthis.setPropertyValue(\"delay\", value);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Delay (ms)\r\n\t */\r\n\tpublic get delay(): number {\r\n\t\treturn this.getPropertyValue(\"delay\");\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/elements/Preloader.ts","/**\r\n * Module for \"Focus\" filter.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Sprite } from \"../../Sprite\";\r\nimport { Filter, FilterProperties } from \"./Filter\";\r\nimport { AMElement } from \"../AMElement\";\r\nimport { Color } from \"../../utils/Color\";\r\nimport { InterfaceColorSet } from \"../../utils/InterfaceColorSet\";\r\nimport { StyleRule, StyleClass } from \"../../utils/DOM\";\r\nimport * as $type from \"../../utils/Type\";\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines additional properties relative to the \"Focus\" filter.\r\n */\r\nexport interface FocusFilterProperties extends FilterProperties {\r\n\r\n\t/**\r\n\t * Opacity of the outline. (0-1)\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\topacity?: number;\r\n\r\n\t/**\r\n\t * Stroke (outline) color.\r\n\t *\r\n\t * @type {Color}\r\n\t */\r\n\tstroke?: Color;\r\n\r\n\t/**\r\n\t * Stroke (outline) thickness in pixels.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tstrokeWidth?: number;\r\n\r\n\t/**\r\n\t * Stroke (outline) opacity. (0-1)\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tstrokeOpacity?: number;\r\n\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Creates a \"Focus\" filter.\r\n */\r\nexport class FocusFilter extends Filter {\r\n\r\n\t/**\r\n\t * Defines property types.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {FocusFilterProperties}\r\n\t */\r\n\tpublic _properties!: FocusFilterProperties;\r\n\r\n\t/**\r\n\t * A storage for Filter property/value pairs.\r\n\t * @see [@link FocusFilterProperties]\r\n\t * @type {Dictionary<FocusFilterProperties, any>}\r\n\t */\r\n\t//public propertyValues: Dictionary<FocusFilterProperties, any>;\r\n\r\n\t/**\r\n\t * Reference to the `<feFlood>` element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {AMElement}\r\n\t */\r\n\tpublic feFlood: AMElement;\r\n\r\n\t/**\r\n\t * Reference to the `<feMorphology>` element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {AMElement}\r\n\t */\r\n\tpublic feMorphology: AMElement;\r\n\r\n\t/**\r\n\t * Reference to the `<feFlood>` element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {AMElement}\r\n\t */\r\n\tpublic feColorMatrix: AMElement;\r\n\r\n\t/**\r\n\t * Reference to the `<feComposite>` element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {AMElement}\r\n\t */\r\n\tpublic feComposite: AMElement;\r\n\r\n\t/**\r\n\t * Reference to the `<feFlood>` element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {AMElement}\r\n\t */\r\n\tpublic feBlend: AMElement;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t * * Creates primitve (effect) elements\r\n\t * * Sets default properties\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.className = \"FocusFilter\";\r\n\r\n\t\t// Create elements\r\n\t\t// NOTE: we do not need to add each individual element to `_disposers`\r\n\t\t// because `filterPrimitives` has an event handler which automatically adds\r\n\t\t// anything added to it to `_disposers`\r\n\t\tthis.feFlood = this.paper.add(\"feFlood\");\r\n\t\tthis.feFlood.attr({ \"flood-color\": new InterfaceColorSet().getFor(\"primaryButtonHover\"), \"result\": \"base\" });\r\n\t\tthis.filterPrimitives.push(this.feFlood);\r\n\r\n\t\tthis.feMorphology = this.paper.add(\"feMorphology\");\r\n\t\tthis.feMorphology.attr({ \"result\": \"bigger\", \"in\": \"SourceGraphic\", \"operator\": \"dilate\", \"radius\": \"2\" });\r\n\t\tthis.filterPrimitives.push(this.feMorphology);\r\n\r\n\t\tthis.feColorMatrix = this.paper.add(\"feColorMatrix\");\r\n\t\tthis.feColorMatrix.attr({ \"result\": \"mask\", \"in\": \"bigger\", \"type\": \"matrix\", \"values\": \"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0\" });\r\n\t\tthis.filterPrimitives.push(this.feColorMatrix);\r\n\r\n\t\tthis.feComposite = this.paper.add(\"feComposite\");\r\n\t\tthis.feComposite.attr({ \"result\": \"drop\", \"in\": \"base\", \"in2\": \"mask\", \"operator\": \"in\" });\r\n\t\tthis.filterPrimitives.push(this.feComposite);\r\n\r\n\t\tthis.feBlend = this.paper.add(\"feBlend\");\r\n\t\tthis.feBlend.attr({ \"in\": \"SourceGraphic\", \"in2\": \"drop\", \"mode\": \"normal\" });\r\n\t\tthis.filterPrimitives.push(this.feBlend);\r\n\r\n\t\t// Set default properties\r\n\t\tthis.width = 130;\r\n\t\tthis.height = 130;\r\n\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Stroke (outline) color.\r\n\t *\r\n\t * @param {Color}  value  Color\r\n\t */\r\n\tpublic set stroke(value: $type.Optional<Color>) {\r\n\t\tthis.properties[\"stroke\"] = value;\r\n\t\tthis.feFlood.attr({ \"flood-color\": value });\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Optional<Color>} Color\r\n\t */\r\n\tpublic get stroke(): $type.Optional<Color> {\r\n\t\treturn this.properties[\"stroke\"];\r\n\t}\r\n\r\n\t/**\r\n\t * Stroke (outline) thickness in pixels.\r\n\t *\r\n\t * @param {number}  value  Outline thickness (px)\r\n\t */\r\n\tpublic set strokeWidth(value: $type.Optional<number>) {\r\n\t\tthis.properties[\"strokeWidth\"] = value;\r\n\t\tthis.feMorphology.attr({ \"radius\": value });\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Outline thickness (px)\r\n\t */\r\n\tpublic get strokeWidth(): $type.Optional<number> {\r\n\t\treturn this.properties[\"strokeWidth\"];\r\n\t}\r\n\r\n\t/**\r\n\t * Opacity of the outline. (0-1)\r\n\t *\r\n\t * @param {number}  value  Outline opacity (0-1)\r\n\t */\r\n\tpublic set opacity(value: $type.Optional<number>) {\r\n\t\tthis.properties[\"opacity\"] = value;\r\n\t\tthis.feColorMatrix.attr({ \"values\": \"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 \" + value + \" 0\" });\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Outline opacity (0-1)\r\n\t */\r\n\tpublic get opacity(): $type.Optional<number> {\r\n\t\treturn this.properties[\"opacity\"];\r\n\t}\r\n\r\n\t/**\r\n\t * Sets filter's target element.\r\n\t *\r\n\t * In addition it also disables built-in focus outline on element this\r\n\t * filter is applied to.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param {Sprite}  value  Element filter is being attached to\r\n\t */\r\n\tprotected setSprite(value: Sprite): void {\r\n\t\tif (this._sprite && this._sprite != value) {\r\n\t\t\tthis._sprite.group.removeStyle(\"outline\");\r\n\t\t}\r\n\t\tvalue.group.addStyle({\r\n\t\t\t\"outline\": \"none\"\r\n\t\t});\r\n\t\tsuper.setSprite(value);\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../../src/.internal/core/rendering/filters/FocusFilter.ts","/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { getSystem } from \"../System\";\r\nimport { registry } from \"../Registry\";\r\nimport { Sprite } from \"../Sprite\";\r\nimport { Container } from \"../Container\";\r\nimport { Paper } from \"../rendering/Paper\";\r\nimport { SVGContainer, svgContainers } from \"../rendering/SVGContainer\";\r\nimport { FocusFilter } from \"../rendering/filters/FocusFilter\";\r\nimport { Preloader } from \"../elements/Preloader\";\r\nimport { AmChartsLogo } from \"../elements/AmChartsLogo\";\r\nimport { ITheme } from \"../../themes/ITheme\";\r\nimport { Tooltip } from \"../elements/Tooltip\";\r\nimport { percent } from \"./Percent\";\r\nimport { options } from \"../Options\";\r\nimport * as $array from \"./Array\";\r\nimport * as $type from \"./Type\";\r\nimport * as $dom from \"./DOM\";\r\n\r\n/**\r\n * ============================================================================\r\n * INSTANTIATION FUNCTIONS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Creates all HTML and SVG containers needed for the chart instance, as well\r\n * as the new [[Sprite]] (as specified in `classType` parameter).\r\n *\r\n * @param  {Optional<HTMLElement | string>}  htmlElement  A container to creat elements in\r\n * @param  {T}                               classType    A class definition of the new element to create\r\n * @return {T}                                            Newly-created Sprite object\r\n */\r\nfunction createChild<T extends Sprite>(htmlElement: $type.Optional<HTMLElement | string>, classType: { new(): T; }): T {\r\n\tlet htmlContainer = $dom.getElement(htmlElement);\r\n\r\n\tif (htmlContainer) {\r\n\r\n\t\thtmlContainer.innerHTML = \"\";\r\n\r\n\t\t// we need to create another div with position:absolute in order div elements added inside could be positioned relatively\r\n\t\t/*\r\n\t\tlet innerContainer = document.createElement(\"div\");\r\n\t\tlet style = innerContainer.style;\r\n\t\tstyle.width = \"100%\";\r\n\t\tstyle.height = \"100%\";\r\n\t\tstyle.position = \"relative\";\r\n*/\r\n\t\t//\thtmlContainer.appendChild(innerContainer);\r\n\r\n\t\tlet svgDiv = new SVGContainer(htmlContainer);\r\n\t\tlet paper = new Paper(svgDiv.SVGContainer);\r\n\t\tpaper.id = \"svg-\" + (svgContainers.length - 1);\r\n\r\n\t\t// the approach with masks is chosen because overflow:visible is set on SVG element in order tooltips could go outside\r\n\t\t// svg area - this is often needed when working with small charts.\r\n\r\n\t\t// main container which holds content container and tooltips container\r\n\t\tlet container = new Container();\r\n\t\tcontainer.htmlContainer = htmlContainer;\r\n\t\tcontainer.svgContainer = svgDiv;\r\n\t\tcontainer.width = percent(100);\r\n\t\tcontainer.height = percent(100);\r\n\t\tcontainer.paper = paper;\r\n\t\t// this is set from parent container, but this one doesn't have, so do it manually.\r\n\t\tcontainer.relativeWidth = 1;\r\n\t\tcontainer.relativeHeight = 1;\r\n\r\n\t\tsvgDiv.container = container;\r\n\t\t// content container\r\n\t\t// setting mask directly on classType object would result mask to shift together with object transformations\r\n\t\tlet contentContainer = container.createChild(Container);\r\n\t\tcontentContainer.width = percent(100);\r\n\t\tcontentContainer.height = percent(100);\r\n\r\n\t\t// content mask\r\n\t\tcontentContainer.mask = contentContainer.background;\r\n\r\n\t\t// creating classType instance\r\n\t\tlet sprite = contentContainer.createChild(classType);\r\n\t\tsprite.isBaseSprite = true;\r\n\t\tsprite.focusFilter = new FocusFilter();\r\n\r\n\t\t// tooltip container\r\n\t\tlet tooltipContainer: Container = container.createChild(Container);\r\n\t\ttooltipContainer.width = percent(100);\r\n\t\ttooltipContainer.height = percent(100);\r\n\t\ttooltipContainer.isMeasured = false;\r\n\t\tcontentContainer.tooltipContainer = tooltipContainer;\r\n\r\n\t\tsprite.tooltip = new Tooltip();\r\n\t\tsprite.tooltip.hide(0);\r\n\t\tsprite.tooltip.setBounds({ x: 0, y: 0, width: tooltipContainer.maxWidth, height: tooltipContainer.maxHeight });\r\n\r\n\t\ttooltipContainer.events.on(\"maxsizechanged\", () => {\r\n\t\t\t$type.getValue(sprite.tooltip).setBounds({ x: 0, y: 0, width: tooltipContainer.maxWidth, height: tooltipContainer.maxHeight });\r\n\t\t})\r\n\r\n\t\t//@todo: maybe we don't need to create one by default but only on request?\r\n\t\tcontentContainer.preloader = new Preloader();\r\n\r\n\t\tif (!options.commercialLicense) {\r\n\t\t\ttooltipContainer.createChild(AmChartsLogo);\r\n\t\t}\r\n\r\n\t\tsprite.numberFormatter; // need to create one.\r\n\r\n\t\t// Set this as an autonomouse instance\r\n\t\t// Controls like Preloader, Export will use this.\r\n\t\tcontentContainer.isStandaloneInstance = true;\r\n\r\n\t\treturn sprite;\r\n\t}\r\n\telse {\r\n\t\tgetSystem().log(\"html container not found\");\r\n\t}\r\n}\r\n\r\n/**\r\n * A shortcut to creating a chart instance.\r\n *\r\n * The first argument is either a reference to or an id of a DOM element to be\r\n * used as a container for the chart.\r\n *\r\n * The second argument is the type reference of the chart type. (for plain\r\n * JavaScript users this can also be a string indicating chart type)\r\n *\r\n * ```TypeScript\r\n * let chart = am4core.create(\"chartdiv\", am4charts.PieChart);\r\n * ```\r\n * ```JavaScript\r\n * // Can pass in chart type reference like this:\r\n * var chart = am4core.create(\"chartdiv\", am4charts.PieChart);\r\n *\r\n * // ... or chart class type as a string:\r\n * var chart = am4core.create(\"chartdiv\", \"PieChart\");\r\n * ```\r\n *\r\n * @param  {HTMLElement | string}  htmlElement  Reference or id of the target container element\r\n * @param  {T}                     classType    Class type of the target chart type\r\n * @return {T}                                  Chart instance\r\n */\r\nexport function create<T extends Sprite>(htmlElement: $type.Optional<HTMLElement | string>, classType: { new(): T; }): T {\r\n\r\n\t// This is a nasty hack for the benefit of vanilla JS users, who do not\r\n\t// enjoy benefits of type-check anyway.\r\n\t// We're allowing passing in a name of the class rather than type reference\r\n\t// itself.\r\n\tlet classError: $type.Optional<Error>;\r\n\tif ($type.isString(classType)) {\r\n\t\tif ($type.hasValue(registry.registeredClasses[classType])) {\r\n\t\t\tclassType = registry.registeredClasses[classType];\r\n\t\t}\r\n\t\telse {\r\n\t\t\tclassType = registry.registeredClasses[\"Container\"];\r\n\t\t\tclassError = new Error(\"Class [\" + classType + \"] is not loaded.\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\t// Create the chart\r\n\tlet chart = createChild(htmlElement, classType);\r\n\r\n\t// Error?\r\n\tif (classError) {\r\n\t\tchart.raiseCriticalError(classError);\r\n\t}\r\n\r\n\treturn chart;\r\n\r\n}\r\n\r\n/**\r\n * A shortcut to creating a chart from a config object.\r\n *\r\n * Example:\r\n *\r\n * ```TypeScript\r\n * let chart am4core.createFromConfig({ ... }, \"chartdiv\", am4charts.XYChart );\r\n * ```\r\n * ```JavaScript\r\n * var chart am4core.createFromConfig({ ... }, \"chartdiv\", \"XYChart\" );\r\n * ```\r\n *\r\n * If `chartType` parameter is not supplied it must be set in a config object,\r\n * via reference to chart type, e.g.:\r\n *\r\n * ```TypeScript\r\n * {\r\n *   \"type\": am4charts.XYChart,\r\n *   // ...\r\n * }\r\n * ```\r\n * ```JavaScript\r\n * {\r\n *   \"type\": am4charts.XYChart,\r\n *   // ...\r\n * }\r\n * ```\r\n *\r\n * Or via string: (if you are using JavaScript)\r\n *\r\n * ```TypeScript\r\n * {\r\n *   \"type\": \"XYChart\",\r\n *   // ...\r\n * }\r\n * ```\r\n * ```JavaScript\r\n * {\r\n *   \"type\": \"XYChart\",\r\n *   // ...\r\n * }\r\n * ```\r\n *\r\n * A `container` can either be a reference to an HTML container to put chart\r\n * in, or it's unique id.\r\n *\r\n * If `container` is not specified, it must be included in the config object:\r\n *\r\n * ```TypeScript\r\n * {\r\n *   \"type\": \"XYChart\",\r\n *   \"container\": \"chartdiv\",\r\n *   // ...\r\n * }\r\n * ```\r\n * ```JavaScript\r\n * {\r\n *   \"type\": \"XYChart\",\r\n *   \"container\": \"chartdiv\",\r\n *   // ...\r\n * }\r\n * ```\r\n *\r\n * @param  {any}                   config       Config object in property/value pairs\r\n * @param  {string | HTMLElement}  htmlElement  Container reference or ID\r\n * @param  {typeof Chart}          objectType   Chart type\r\n * @return {Chart}                              A newly created chart instance\r\n * @todo Throw exception if type is not correct\r\n */\r\nexport function createFromConfig(config: { [index: string]: any }, htmlElement?: string | HTMLElement, classType?: { new(): Sprite; } | string): Sprite {\r\n\r\n\t// Extract chart type from config if necessary\r\n\tif (!$type.hasValue(classType)) {\r\n\t\tclassType = config.type;\r\n\t\tdelete config.type;\r\n\t}\r\n\r\n\t// Extract element from config if necessary\r\n\tif (!$type.hasValue(htmlElement)) {\r\n\t\thtmlElement = config.container;\r\n\t\tdelete config.container;\r\n\t}\r\n\r\n\t// Check if we need to extract actual type reference\r\n\tlet finalType;\r\n\tlet classError: $type.Optional<Error>;\r\n\tif ($type.isString(classType) && $type.hasValue(registry.registeredClasses[classType])) {\r\n\t\tfinalType = registry.registeredClasses[classType];\r\n\t}\r\n\telse if (typeof classType !== \"function\") {\r\n\t\tfinalType = Container;\r\n\t\tclassError = new Error(\"Class [\" + classType + \"] is not loaded.\");\r\n\t}\r\n\telse {\r\n\t\tfinalType = classType;\r\n\t}\r\n\r\n\t// Check if maybe we have `geodata` set as string, which would mean that\r\n\t// we need to try to refer to a loaded map with a global variable, like\r\n\t// `am4geodata_xxx`\r\n\tif ($type.hasValue(config[\"geodata\"]) && $type.isString(config[\"geodata\"])) {\r\n\t\t// Check if there's a map loaded by such name\r\n\t\tif ($type.hasValue((<any>window)[\"am4geodata_\" + config[\"geodata\"]])) {\r\n\t\t\tconfig[\"geodata\"] = (<any>window)[\"am4geodata_\" + config[\"geodata\"]];\r\n\t\t}\r\n\t\t// Nope. Let's try maybe we got JSON as string?\r\n\t\telse {\r\n\t\t\ttry {\r\n\t\t\t\tconfig[\"geodata\"] = JSON.parse(config[\"geodata\"]);\r\n\t\t\t}\r\n\t\t\tcatch(e) {\r\n\t\t\t\t// No go again. Error out.\r\n\t\t\t\tclassError = new Error(\"<code>geodata</code> is incorrect or the map file is not loaded.\");\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// Create the chart\r\n\tlet chart = createChild(htmlElement, finalType);\r\n\r\n\t// Set config\r\n\tif (classError) {\r\n\t\tchart.raiseCriticalError(classError);\r\n\t}\r\n\telse {\r\n\t\tchart.config = config;\r\n\t}\r\n\r\n\treturn chart;\r\n\r\n}\r\n\r\n/**\r\n * Applies a theme to System, and subsequently all chart instances created\r\n * from that point forward.\r\n *\r\n * amCharts supports multiple themes. Calling `useTheme` multiple times will\r\n * make the System apply multiple themes, rather than overwrite previously\r\n * set one.\r\n *\r\n * This enables combining features from multiple themes on the same chart.\r\n * E.g.:\r\n *\r\n * ```TypeScript\r\n * am4core.useTheme(am4themes.material);\r\n * am4core.useTheme(am4themes.animated);\r\n * ```\r\n * ```JavaScript\r\n * am4core.useTheme(am4themes.material);\r\n * am4core.useTheme(am4themes.animated);\r\n * ```\r\n *\r\n * The above will apply both the Material color and animation options to all\r\n * charts created.\r\n *\r\n * @param {ITheme}  value  A reference to a theme\r\n */\r\nexport function useTheme(value: ITheme): void {\r\n\tregistry.themes.push(value);\r\n}\r\n\r\n/**\r\n * Removes a theme from \"active themes\" list, so it won't get applied to any\r\n * charts created subsequently.\r\n *\r\n * @param {ITheme}  value  A reference to a theme\r\n */\r\nexport function unuseTheme(value: ITheme): void {\r\n\t$array.remove(registry.themes, value);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/utils/Instance.ts","import { StyleRule } from \"../utils/DOM\";\r\nimport { Dictionary } from \"../utils/Dictionary\";\r\nimport { MultiDisposer, IDisposer, CounterDisposer } from \"../utils/Disposer\";\r\n\r\n\r\nconst rules = new Dictionary<string, CounterDisposer>();\r\n\r\n/**\r\n * Default CSS for Popup.\r\n *\r\n * @ignore Exclude from docs\r\n * @param  {string}     prefix  Prefix for CSS classes\r\n * @return {IDisposer}          Disposer for the CSS definition\r\n */\r\nexport default function(prefix?: string): IDisposer {\r\n\tif (!prefix) {\r\n\t\tprefix = \"ampopup\";\r\n\t}\r\n\r\n\tconst counter = rules.insertKeyIfEmpty(prefix, () => {\r\n\t\tconst disposer = new MultiDisposer([\r\n\t\t\tnew StyleRule(`.${prefix}`, {\r\n\t\t\t\t//\"width\": \"100%\",\r\n\t\t\t\t//\"height\": \"100%\",\r\n\t\t\t\t\"overflow\": \"visible\",\r\n\t\t\t\t\"position\": \"absolute\",\r\n\t\t\t\t\"top\": \"0\",\r\n\t\t\t\t\"left\": \"0\",\r\n\t\t\t\t\"z-index\": \"2000\"\r\n\t\t\t}),\r\n\r\n\t\t\tnew StyleRule(`.${prefix}-curtain`, {\r\n\t\t\t\t\"width\": \"100%\",\r\n\t\t\t\t\"height\": \"100%\",\r\n\t\t\t\t\"position\": \"absolute\",\r\n\t\t\t\t\"top\": \"0\",\r\n\t\t\t\t\"left\": \"0\",\r\n\t\t\t\t\"z-index\": \"2001\",\r\n\t\t\t\t\"background\": \"#fff\",\r\n\t\t\t\t\"opacity\": \"0.5\"\r\n\t\t\t}),\r\n\r\n\t\t\tnew StyleRule(`.${prefix}-title`, {\r\n\t\t\t\t\"font-weight\": \"bold\",\r\n\t\t\t\t\"font-size\": \"120%\"\r\n\t\t\t}),\r\n\r\n\t\t\tnew StyleRule(`.${prefix}-content`, {\r\n\t\t\t\t/*\"width\": \"100%\",\r\n\t\t\t\t\"height\": \"100%\",*/\r\n\t\t\t\t\"padding\": \"1em 2em\",\r\n\t\t\t\t\"background\": \"rgb(255, 255, 255);\",\r\n\t\t\t\t\"background-color\": \"rgba(255, 255, 255, 0.8)\",\r\n\t\t\t\t\"display\": \"inline-block\",\r\n\t\t\t\t\"position\": \"absolute\",\r\n\t\t\t\t\"max-width\": \"90%\",\r\n\t\t\t\t\"max-height\": \"90%\",\r\n\t\t\t\t\"overflow\": \"auto\",\r\n\t\t\t\t\"z-index\": \"2002\"\r\n\t\t\t}),\r\n\r\n\t\t\tnew StyleRule(`.${prefix}-close`, {\r\n\t\t\t\t\"display\": \"block\",\r\n\t\t\t\t\"position\": \"absolute\",\r\n\t\t\t\t\"top\": \"0.3em\",\r\n\t\t\t\t\"right\": \"0.3em\",\r\n\t\t\t\t\"background-color\": \"rgb(100, 100, 100)\",\r\n\t\t\t\t\"background\": \"rgba(100, 100, 100, 0.1) url(data:image/svg+xml;charset=utf-8;base64,PHN2ZyBoZWlnaHQ9IjUxMiIgdmVyc2lvbj0iMSIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHdpZHRoPSI1MTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTQ0NS4yIDEwOS4ybC00Mi40LTQyLjRMMjU2IDIxMy42IDEwOS4yIDY2LjhsLTQyLjQgNDIuNEwyMTMuNiAyNTYgNjYuOCA0MDIuOGw0Mi40IDQyLjRMMjU2IDI5OC40bDE0Ni44IDE0Ni44IDQyLjQtNDIuNEwyOTguNCAyNTYiLz48L3N2Zz4=) no-repeat center\",\r\n\t\t\t\t\"background-size\": \"80%\",\r\n\t\t\t\t\"width\": \"1.2em\",\r\n\t\t\t\t\"height\": \"1.2em\",\r\n\t\t\t\t\"cursor\": \"pointer\"\r\n\t\t\t}),\r\n\r\n\t\t]);\r\n\r\n\t\treturn new CounterDisposer(() => {\r\n\t\t\trules.removeKey(prefix);\r\n\t\t\tdisposer.dispose();\r\n\t\t});\r\n\t});\r\n\r\n\treturn counter.increment();\r\n}\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/elements/PopupCSS.ts","/**\r\n * Translation file\r\n * Locale: en (default international English)\r\n *\r\n * Use this file as a template to create translations. Leave the key part in\r\n * English intact. Fill the value with a translation.\r\n *\r\n * Empty string means no translation, so default \"Internationtional English\"\r\n * will beused.\r\n *\r\n * IMPORTANT:\r\n * When translating make good effort to keep the translation length\r\n * at least the same chartcount as the English, especially for short prompts.\r\n *\r\n * Having significantly longer prompts may distort the actual charts.\r\n *\r\n * NOTE:\r\n * Some prompts - like months or weekdays - come in two versions: full and\r\n * shortened.\r\n *\r\n * If there's no official shortened version of these in your language, and it\r\n * would not be possible to invent such short versions that don't seem weird\r\n * to native speakers of that language, fill those with the same as full\r\n * version.\r\n *\r\n * PLACEHODERS:\r\n * Some prompts have placeholders like \"%1\". Those will be replaced by actual\r\n * values during translation and should be retained in the translated prompts.\r\n *\r\n * Placeholder positions may be changed to better suit structure of the\r\n * sentence.\r\n *\r\n * For example \"From %1 to %2\", when actually used will replace \"%1\" with an\r\n * actual value representing range start, and \"%2\" will be replaced by end\r\n * value.\r\n *\r\n * E.g. in a Scrollbar for Value axis \"From %1 to %2\" will become\r\n * \"From 100 to 200\". You may translate \"From\" and \"to\", as well as re-arrange\r\n * the order of the prompt itself, but make sure the \"%1\" and \"%2\" remain, in\r\n * places where they will make sense.\r\n *\r\n * Save the file as language_LOCALE, i.e. en_GB, fr_FR, etc.\r\n * \r\n * @type {ILocale}\r\n */\r\nexport default {\r\n\t// Number formatting options.\r\n\t// \r\n\t// Please check with the local standards which separator is accepted to be\r\n\t// used for separating decimals, and which for thousands.\r\n\t\"_decimalSeparator\": \".\",\r\n\t\"_thousandSeparator\": \",\",\r\n\r\n\t// Default date formats for various periods.\r\n\t// \r\n\t// This should reflect official or de facto formatting universally accepted\r\n\t// in the country translation is being made for\r\n\t// Available format codes here:\r\n\t// https://www.amcharts.com/docs/v4/concepts/formatters/formatting-date-time/#Format_codes\r\n\t// \r\n\t// This will be used when formatting date/time for particular granularity,\r\n\t// e.g. \"_date_hour\" will be shown whenever we need to show time as hours.\r\n\t\"_date_millisecond\": \"mm:ss SSS\",\r\n\t\"_date_second\": \"HH:mm:ss\",\r\n\t\"_date_minute\": \"HH:mm\",\r\n\t\"_date_hour\": \"HH:mm\",\r\n\t\"_date_day\": \"MMM dd\",\r\n\t\"_date_week\": \"ww\",\r\n\t\"_date_month\": \"MMM\",\r\n\t\"_date_year\": \"yyyy\",\r\n\r\n\t// Default duration formats for various base units.\r\n\t// \r\n\t// This will be used by DurationFormatter to format numeric values into\r\n\t// duration.\r\n\t// \r\n\t// Available codes here:\r\n\t// https://www.amcharts.com/docs/v4/concepts/formatters/formatting-duration/#Available_Codes\r\n\t\"_duration_millisecond\": \"SSS\",\r\n\t\"_duration_second\": \"ss\",\r\n\t\"_duration_minute\": \"mm\",\r\n\t\"_duration_hour\": \"hh\",\r\n\t\"_duration_day\": \"dd\",\r\n\t\"_duration_week\": \"ww\",\r\n\t\"_duration_month\": \"MM\",\r\n\t\"_duration_year\": \"yyyy\",\r\n\r\n\t// Era translations\r\n\t\"_era_ad\": \"AD\",\r\n\t\"_era_bc\": \"BC\",\r\n\r\n\t// Day part, used in 12-hour formats, e.g. 5 P.M.\r\n\t// Please note that these come in 3 variants:\r\n\t// * one letter (e.g. \"A\")\r\n\t// * two letters (e.g. \"AM\")\r\n\t// * two letters with dots (e.g. \"A.M.\")\r\n\t// \r\n\t// All three need to to be translated even if they are all the same. Some\r\n\t// users might use one, some the other.\r\n\t\"A\": \"\",\r\n\t\"P\": \"\",\r\n\t\"AM\": \"\",\r\n\t\"PM\": \"\",\r\n\t\"A.M.\": \"\",\r\n\t\"P.M.\": \"\",\r\n\r\n\t// Date-related stuff.\r\n\t// \r\n\t// When translating months, if there's a difference, use the form which is\r\n\t// best for a full date, e.g. as you would use it in \"2018 January 1\".\r\n\t// \r\n\t// Note that May is listed twice. This is because in English May is the same\r\n\t// in both long and short forms, while in other languages it may not be the\r\n\t// case. Translate \"May\" to full word, while \"May(short)\" to shortened\r\n\t// version.\r\n\t\"January\": \"\",\r\n\t\"February\": \"\",\r\n\t\"March\": \"\",\r\n\t\"April\": \"\",\r\n\t\"May\": \"\",\r\n\t\"June\": \"\",\r\n\t\"July\": \"\",\r\n\t\"August\": \"\",\r\n\t\"September\": \"\",\r\n\t\"October\": \"\",\r\n\t\"November\": \"\",\r\n\t\"December\": \"\",\r\n\t\"Jan\": \"\",\r\n\t\"Feb\": \"\",\r\n\t\"Mar\": \"\",\r\n\t\"Apr\": \"\",\r\n\t\"May(short)\": \"May\",\r\n\t\"Jun\": \"\",\r\n\t\"Jul\": \"\",\r\n\t\"Aug\": \"\",\r\n\t\"Sep\": \"\",\r\n\t\"Oct\": \"\",\r\n\t\"Nov\": \"\",\r\n\t\"Dec\": \"\",\r\n\r\n\t// Weekdays.\r\n\t\"Sunday\": \"\",\r\n\t\"Monday\": \"\",\r\n\t\"Tuesday\": \"\",\r\n\t\"Wednesday\": \"\",\r\n\t\"Thursday\": \"\",\r\n\t\"Friday\": \"\",\r\n\t\"Saturday\": \"\",\r\n\t\"Sun\": \"\",\r\n\t\"Mon\": \"\",\r\n\t\"Tue\": \"\",\r\n\t\"Wed\": \"\",\r\n\t\"Thu\": \"\",\r\n\t\"Fri\": \"\",\r\n\t\"Sat\": \"\",\r\n\r\n\t// Date ordinal function.\r\n\t// \r\n\t// This is used when adding number ordinal when formatting days in dates.\r\n\t// \r\n\t// E.g. \"January 1st\", \"February 2nd\".\r\n\t// \r\n\t// The function accepts day number, and returns a string to be added to the\r\n\t// day, like in default English translation, if we pass in 2, we will receive\r\n\t// \"nd\" back.\r\n\t\"_dateOrd\": function(day: number): string {\r\n\t\tlet res = \"th\";\r\n\t\tif ((day < 11) || (day > 13)) {\r\n\t\t\tswitch (day % 10) {\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\tres = \"st\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tres = \"nd\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\tres = \"rd\"\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\r\n\t// Various chart controls.\r\n\t// Shown as a tooltip on zoom out button.\r\n\t\"Zoom Out\": \"\",\r\n\r\n\t// Timeline buttons\r\n\t\"Play\": \"\",\r\n\t\"Stop\": \"\",\r\n\r\n\t// Chart's Legend screen reader title.\r\n\t\"Legend\": \"\",\r\n\r\n\t// Legend's item screen reader indicator.\r\n\t\"Click, tap or press ENTER to toggle\": \"\",\r\n\r\n\t// Shown when the cahrt is busy loading something.\r\n\t\"Loading\": \"\",\r\n\r\n\t// Shown as the first button in the breadcrumb navigation, e.g.:\r\n\t// Home > First level > ...\r\n\t\"Home\": \"\",\r\n\r\n\t// Chart types.\r\n\t// Those are used as default screen reader titles for the main chart element\r\n\t// unless developer has set some more descriptive title.\r\n\t\"Chart\": \"\",\r\n\t\"Serial chart\": \"\",\r\n\t\"X/Y chart\": \"\",\r\n\t\"Pie chart\": \"\",\r\n\t\"Gauge chart\": \"\",\r\n\t\"Radar chart\": \"\",\r\n\t\"Sankey diagram\": \"\",\r\n\t\"Chord diagram\": \"\",\r\n\t\"Flow diagram\": \"\",\r\n\t\"TreeMap chart\": \"\",\r\n\r\n\t// Series types.\r\n\t// Used to name series by type for screen readers if they do not have their\r\n\t// name set.\r\n\t\"Series\": \"\",\r\n\t\"Candlestick Series\": \"\",\r\n\t\"Column Series\": \"\",\r\n\t\"Line Series\": \"\",\r\n\t\"Pie Slice Series\": \"\",\r\n\t\"X/Y Series\": \"\",\r\n\r\n\t// Map-related stuff.\r\n\t\"Map\": \"\",\r\n\t\"Press ENTER to zoom in\": \"\",\r\n\t\"Press ENTER to zoom out\": \"\",\r\n\t\"Use arrow keys to zoom in and out\": \"\",\r\n\t\"Use plus and minus keys on your keyboard to zoom in and out\": \"\",\r\n\r\n\t// Export-related stuff.\r\n\t// These prompts are used in Export menu labels.\r\n\t// \r\n\t// \"Export\" is the top-level menu item.\r\n\t// \r\n\t// \"Image\", \"Data\", \"Print\" as second-level indicating type of export\r\n\t// operation.\r\n\t// \r\n\t// Leave actual format untranslated, unless you absolutely know that they\r\n\t// would convey more meaning in some other way.\r\n\t\"Export\": \"\",\r\n\t\"Image\": \"\",\r\n\t\"Data\": \"\",\r\n\t\"Print\": \"\",\r\n\t\"Click, tap or press ENTER to open\": \"\",\r\n\t\"Click, tap or press ENTER to print.\": \"\",\r\n\t\"Click, tap or press ENTER to export as %1.\": \"\",\r\n\t'To save the image, right-click this link and choose \"Save picture as...\"': \"\",\r\n\t'To save the image, right-click thumbnail on the left and choose \"Save picture as...\"': \"\",\r\n\t\"(Press ESC to close this message)\": \"\",\r\n\t\"Image Export Complete\": \"\",\r\n\t\"Export operation took longer than expected. Something might have gone wrong.\": \"\",\r\n\t\"Saved from\": \"\",\r\n\t\"PNG\": \"\",\r\n\t\"JPG\": \"\",\r\n\t\"GIF\": \"\",\r\n\t\"SVG\": \"\",\r\n\t\"PDF\": \"\",\r\n\t\"JSON\": \"\",\r\n\t\"CSV\": \"\",\r\n\t\"XLSX\": \"\",\r\n\r\n\t// Scrollbar-related stuff.\r\n\t// \r\n\t// Scrollbar is a control which can zoom and pan the axes on the chart.\r\n\t// \r\n\t// Each scrollbar has two grips: left or right (for horizontal scrollbar) or\r\n\t// upper and lower (for vertical one).\r\n\t// \r\n\t// Prompts change in relation to whether Scrollbar is vertical or horizontal.\r\n\t// \r\n\t// The final section is used to indicate the current range of selection.\r\n\t\"Use TAB to select grip buttons or left and right arrows to change selection\": \"\",\r\n\t\"Use left and right arrows to move selection\": \"\",\r\n\t\"Use left and right arrows to move left selection\": \"\",\r\n\t\"Use left and right arrows to move right selection\": \"\",\r\n\t\"Use TAB select grip buttons or up and down arrows to change selection\": \"\",\r\n\t\"Use up and down arrows to move selection\": \"\",\r\n\t\"Use up and down arrows to move lower selection\": \"\",\r\n\t\"Use up and down arrows to move upper selection\": \"\",\r\n\t\"From %1 to %2\": \"\",\r\n\t\"From %1\": \"\",\r\n\t\"To %1\": \"\",\r\n\r\n\t// Data loader-related.\r\n\t\"No parser available for file: %1\": \"\",\r\n\t\"Error parsing file: %1\": \"\",\r\n\t\"Unable to load file: %1\": \"\",\r\n\t\"Invalid date\": \"\",\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../src/.internal/lang/en.ts","import { StyleRule } from \"../utils/DOM\";\r\nimport { InterfaceColorSet } from \"../utils/InterfaceColorSet\";\r\nimport { Dictionary } from \"../utils/Dictionary\";\r\nimport { MultiDisposer, IDisposer, CounterDisposer } from \"../utils/Disposer\";\r\n\r\nconst rules = new Dictionary<string, CounterDisposer>();\r\n\r\n/**\r\n * A dynamically-loadable CSS module for Export menu.\r\n *\r\n * @ignore Exclude from docs\r\n * @param  {string}     prefix  Prefix to addtach to class names\r\n * @return {IDisposer}          A MultiDisposer with style rules\r\n */\r\nexport default function (prefix?: string): IDisposer {\r\n\tconst newPrefix = (prefix ? prefix : \"amexport\");\r\n\r\n\tlet colorSet = new InterfaceColorSet();\r\n\r\n\tconst counter = rules.insertKeyIfEmpty(newPrefix, () => {\r\n\t\tconst disposer = new MultiDisposer([\r\n\r\n\t\t\t/*new StyleRule(`.${newPrefix}-menu`, {\r\n\t\t\t\t\"opacity\": \"0.3\",\r\n\t\t\t\t\"transition\": \"all 100ms ease-in-out\",\r\n\t\t\t}),\r\n\r\n\t\t\tnew StyleRule(`div:hover .${newPrefix}-menu, .${newPrefix}-menu.active`, {\r\n\t\t\t\t\"opacity\": \"0.9\",\r\n\t\t\t}),*/\r\n\r\n\t\t\tnew StyleRule(`.${newPrefix}-menu-level-0`, {\r\n\t\t\t\t\"position\": \"absolute\",\r\n\t\t\t\t\"top\": \"5px\",\r\n\t\t\t\t\"right\": \"5px\",\r\n\t\t\t}),\r\n\r\n\t\t\tnew StyleRule(`.${newPrefix}-menu-level-0.${newPrefix}-left`, {\r\n\t\t\t\t\"right\": \"auto\",\r\n\t\t\t\t\"left\": \"5px\",\r\n\t\t\t}),\r\n\r\n\t\t\tnew StyleRule(`.${newPrefix}-menu-level-0.${newPrefix}-right`, {\r\n\t\t\t\t\"right\": \"5px\",\r\n\t\t\t\t\"left\": \"auto\",\r\n\t\t\t}),\r\n\r\n\t\t\tnew StyleRule(`.${newPrefix}-menu-level-0.${newPrefix}-top`, {\r\n\t\t\t\t\"top\": \"5px\",\r\n\t\t\t\t\"bottom\": \"auto\",\r\n\t\t\t}),\r\n\r\n\t\t\tnew StyleRule(`.${newPrefix}-menu-level-0.${newPrefix}-bottom`, {\r\n\t\t\t\t\"top\": \"auto\",\r\n\t\t\t\t\"bottom\": \"5px\",\r\n\t\t\t}),\r\n\r\n\t\t\tnew StyleRule(`.${newPrefix}-item.${newPrefix}-item-level-0`, {\r\n\t\t\t\t\"opacity\": \"0.3\",\r\n\t\t\t\t\"width\": \"30px\",\r\n\t\t\t\t\"height\": \"30px\",\r\n\t\t\t\t\"transition\": \"all 100ms ease-in-out\",\r\n\t\t\t\t//\"text-indent\": \"-9999px\",\r\n\t\t\t}),\r\n\r\n\t\t\tnew StyleRule(`div:hover .${newPrefix}-item.${newPrefix}-item-level-0, .${newPrefix}-item.${newPrefix}-item-level-0.active`, {\r\n\t\t\t\t\"opacity\": \"0.9\",\r\n\t\t\t}),\r\n\r\n\t\t\tnew StyleRule(`.${newPrefix}-item.${newPrefix}-item-level-0 > a`, {\r\n\t\t\t\t\"padding\": \"0\",\r\n\t\t\t\t\"text-align\": \"center\"\r\n\t\t\t}),\r\n\r\n\t\t\tnew StyleRule(`.${newPrefix}-item.${newPrefix}-item-level-0:before`, {\r\n\t\t\t\t\"display\": \"block\"\r\n\t\t\t}),\r\n\r\n\t\t\tnew StyleRule(`.${newPrefix}-item`, {\r\n\t\t\t\t\"position\": \"relative\",\r\n\t\t\t\t\"display\": \"block\",\r\n\t\t\t\t\"opacity\": \"0\",\r\n\t\t\t\t\"z-index\": \"1\",\r\n\t\t\t\t\"border-radius\": \"3px\",\r\n\t\t\t\t\"background-color\": colorSet.getFor(\"secondaryButton\").hex,\r\n\t\t\t\t\"padding\": \"0\",\r\n\t\t\t\t\"margin\": \"1px 1px 0 0\",\r\n\t\t\t\t\"color\": colorSet.getFor(\"secondaryButton\").alternative.hex,\r\n\t\t\t\t\"transition\": \"all 100ms ease-in-out, opacity 0.5s ease 0.5s\",\r\n\t\t\t\t//\"width\": \"initial\",\r\n\t\t\t\t//\"height\": \"initial\",\r\n\t\t\t\t//\"text-indent\": \"initial\",\r\n\t\t\t}),\r\n\r\n\t\t\tnew StyleRule(`.${newPrefix}-left .${newPrefix}-item`, {\r\n\t\t\t\t\"margin\": \"1px 0 0 1px\",\r\n\t\t\t}),\r\n\r\n\t\t\tnew StyleRule(`.${newPrefix}-item:hover, .${newPrefix}-item.active`, {\r\n\t\t\t\t\"background\": colorSet.getFor(\"secondaryButtonHover\").hex,\r\n\t\t\t\t\"color\": colorSet.getFor(\"secondaryButtonText\").hex,\r\n\t\t\t}),\r\n\r\n\t\t\tnew StyleRule(`.${newPrefix}-item > .${newPrefix}-menu`, {\r\n\t\t\t\t\"position\": \"absolute\",\r\n\t\t\t\t\"top\": \"-1px\",\r\n\t\t\t\t\"right\": \"0\",\r\n\t\t\t\t\"margin-right\": \"100%\",\r\n\t\t\t}),\r\n\r\n\t\t\tnew StyleRule(`.${newPrefix}-left .${newPrefix}-item > .${newPrefix}-menu`, {\r\n\t\t\t\t\"left\": \"0\",\r\n\t\t\t\t\"right\": \"auto\",\r\n\t\t\t\t\"margin-left\": \"100%\",\r\n\t\t\t\t\"margin-right\": \"auto\",\r\n\t\t\t}),\r\n\r\n\t\t\tnew StyleRule(`.${newPrefix}-right .${newPrefix}-item > .${newPrefix}-menu`, {\r\n\t\t\t\t\"left\": \"auto\",\r\n\t\t\t\t\"right\": \"0\",\r\n\t\t\t\t\"margin-left\": \"auto\",\r\n\t\t\t\t\"margin-right\": \"100%\",\r\n\t\t\t}),\r\n\r\n\t\t\tnew StyleRule(`.${newPrefix}-top .${newPrefix}-item > .${newPrefix}-menu`, {\r\n\t\t\t\t\"top\": \"-1px\",\r\n\t\t\t\t\"bottom\": \"auto\",\r\n\t\t\t}),\r\n\r\n\t\t\tnew StyleRule(`.${newPrefix}-bottom .${newPrefix}-item > .${newPrefix}-menu`, {\r\n\t\t\t\t\"top\": \"auto\",\r\n\t\t\t\t\"bottom\": \"0\",\r\n\t\t\t}),\r\n\r\n\t\t\tnew StyleRule(`.${newPrefix}-item > .${newPrefix}-menu`, {\r\n\t\t\t\t\"display\": \"none\",\r\n\t\t\t}),\r\n\r\n\t\t\tnew StyleRule(`.${newPrefix}-item:hover > .${newPrefix}-menu, .${newPrefix}-item.active > .${newPrefix}-menu`, {\r\n\t\t\t\t\"display\": \"block\",\r\n\t\t\t}),\r\n\r\n\t\t\tnew StyleRule(`.${newPrefix}-item:hover > .${newPrefix}-menu > .${newPrefix}-item, .${newPrefix}-item.active > .${newPrefix}-menu > .${newPrefix}-item`, {\r\n\t\t\t\t\"opacity\": \"1\",\r\n\t\t\t}),\r\n\r\n\t\t\tnew StyleRule(`.${newPrefix}-menu`, {\r\n\t\t\t\t\"display\": \"block\",\r\n\t\t\t\t\"list-style\": \"none\",\r\n\t\t\t\t\"margin\": \"0\",\r\n\t\t\t\t\"padding\": \"0\",\r\n\t\t\t}),\r\n\r\n\t\t\tnew StyleRule(`.${newPrefix}-label`, {\r\n\t\t\t\t\"display\": \"block\",\r\n\t\t\t\t\"cursor\": \"default\",\r\n\t\t\t\t\"padding\": \"0.5em 1em\",\r\n\t\t\t}),\r\n\r\n\t\t\tnew StyleRule(`.${newPrefix}-clickable`, {\r\n\t\t\t\t\"cursor\": \"pointer\",\r\n\t\t\t}),\r\n\t\t]);\r\n\r\n\t\treturn new CounterDisposer(() => {\r\n\t\t\trules.removeKey(newPrefix);\r\n\t\t\tdisposer.dispose();\r\n\t\t});\r\n\t});\r\n\r\n\treturn counter.increment();\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/export/ExportCSS.ts","require('./modules/es6.symbol');\nrequire('./modules/es6.object.create');\nrequire('./modules/es6.object.define-property');\nrequire('./modules/es6.object.define-properties');\nrequire('./modules/es6.object.get-own-property-descriptor');\nrequire('./modules/es6.object.get-prototype-of');\nrequire('./modules/es6.object.keys');\nrequire('./modules/es6.object.get-own-property-names');\nrequire('./modules/es6.object.freeze');\nrequire('./modules/es6.object.seal');\nrequire('./modules/es6.object.prevent-extensions');\nrequire('./modules/es6.object.is-frozen');\nrequire('./modules/es6.object.is-sealed');\nrequire('./modules/es6.object.is-extensible');\nrequire('./modules/es6.object.assign');\nrequire('./modules/es6.object.is');\nrequire('./modules/es6.object.set-prototype-of');\nrequire('./modules/es6.object.to-string');\nrequire('./modules/es6.function.bind');\nrequire('./modules/es6.function.name');\nrequire('./modules/es6.function.has-instance');\nrequire('./modules/es6.parse-int');\nrequire('./modules/es6.parse-float');\nrequire('./modules/es6.number.constructor');\nrequire('./modules/es6.number.to-fixed');\nrequire('./modules/es6.number.to-precision');\nrequire('./modules/es6.number.epsilon');\nrequire('./modules/es6.number.is-finite');\nrequire('./modules/es6.number.is-integer');\nrequire('./modules/es6.number.is-nan');\nrequire('./modules/es6.number.is-safe-integer');\nrequire('./modules/es6.number.max-safe-integer');\nrequire('./modules/es6.number.min-safe-integer');\nrequire('./modules/es6.number.parse-float');\nrequire('./modules/es6.number.parse-int');\nrequire('./modules/es6.math.acosh');\nrequire('./modules/es6.math.asinh');\nrequire('./modules/es6.math.atanh');\nrequire('./modules/es6.math.cbrt');\nrequire('./modules/es6.math.clz32');\nrequire('./modules/es6.math.cosh');\nrequire('./modules/es6.math.expm1');\nrequire('./modules/es6.math.fround');\nrequire('./modules/es6.math.hypot');\nrequire('./modules/es6.math.imul');\nrequire('./modules/es6.math.log10');\nrequire('./modules/es6.math.log1p');\nrequire('./modules/es6.math.log2');\nrequire('./modules/es6.math.sign');\nrequire('./modules/es6.math.sinh');\nrequire('./modules/es6.math.tanh');\nrequire('./modules/es6.math.trunc');\nrequire('./modules/es6.string.from-code-point');\nrequire('./modules/es6.string.raw');\nrequire('./modules/es6.string.trim');\nrequire('./modules/es6.string.iterator');\nrequire('./modules/es6.string.code-point-at');\nrequire('./modules/es6.string.ends-with');\nrequire('./modules/es6.string.includes');\nrequire('./modules/es6.string.repeat');\nrequire('./modules/es6.string.starts-with');\nrequire('./modules/es6.string.anchor');\nrequire('./modules/es6.string.big');\nrequire('./modules/es6.string.blink');\nrequire('./modules/es6.string.bold');\nrequire('./modules/es6.string.fixed');\nrequire('./modules/es6.string.fontcolor');\nrequire('./modules/es6.string.fontsize');\nrequire('./modules/es6.string.italics');\nrequire('./modules/es6.string.link');\nrequire('./modules/es6.string.small');\nrequire('./modules/es6.string.strike');\nrequire('./modules/es6.string.sub');\nrequire('./modules/es6.string.sup');\nrequire('./modules/es6.date.now');\nrequire('./modules/es6.date.to-json');\nrequire('./modules/es6.date.to-iso-string');\nrequire('./modules/es6.date.to-string');\nrequire('./modules/es6.date.to-primitive');\nrequire('./modules/es6.array.is-array');\nrequire('./modules/es6.array.from');\nrequire('./modules/es6.array.of');\nrequire('./modules/es6.array.join');\nrequire('./modules/es6.array.slice');\nrequire('./modules/es6.array.sort');\nrequire('./modules/es6.array.for-each');\nrequire('./modules/es6.array.map');\nrequire('./modules/es6.array.filter');\nrequire('./modules/es6.array.some');\nrequire('./modules/es6.array.every');\nrequire('./modules/es6.array.reduce');\nrequire('./modules/es6.array.reduce-right');\nrequire('./modules/es6.array.index-of');\nrequire('./modules/es6.array.last-index-of');\nrequire('./modules/es6.array.copy-within');\nrequire('./modules/es6.array.fill');\nrequire('./modules/es6.array.find');\nrequire('./modules/es6.array.find-index');\nrequire('./modules/es6.array.species');\nrequire('./modules/es6.array.iterator');\nrequire('./modules/es6.regexp.constructor');\nrequire('./modules/es6.regexp.to-string');\nrequire('./modules/es6.regexp.flags');\nrequire('./modules/es6.regexp.match');\nrequire('./modules/es6.regexp.replace');\nrequire('./modules/es6.regexp.search');\nrequire('./modules/es6.regexp.split');\nrequire('./modules/es6.promise');\nrequire('./modules/es6.map');\nrequire('./modules/es6.set');\nrequire('./modules/es6.weak-map');\nrequire('./modules/es6.weak-set');\nrequire('./modules/es6.typed.array-buffer');\nrequire('./modules/es6.typed.data-view');\nrequire('./modules/es6.typed.int8-array');\nrequire('./modules/es6.typed.uint8-array');\nrequire('./modules/es6.typed.uint8-clamped-array');\nrequire('./modules/es6.typed.int16-array');\nrequire('./modules/es6.typed.uint16-array');\nrequire('./modules/es6.typed.int32-array');\nrequire('./modules/es6.typed.uint32-array');\nrequire('./modules/es6.typed.float32-array');\nrequire('./modules/es6.typed.float64-array');\nrequire('./modules/es6.reflect.apply');\nrequire('./modules/es6.reflect.construct');\nrequire('./modules/es6.reflect.define-property');\nrequire('./modules/es6.reflect.delete-property');\nrequire('./modules/es6.reflect.enumerate');\nrequire('./modules/es6.reflect.get');\nrequire('./modules/es6.reflect.get-own-property-descriptor');\nrequire('./modules/es6.reflect.get-prototype-of');\nrequire('./modules/es6.reflect.has');\nrequire('./modules/es6.reflect.is-extensible');\nrequire('./modules/es6.reflect.own-keys');\nrequire('./modules/es6.reflect.prevent-extensions');\nrequire('./modules/es6.reflect.set');\nrequire('./modules/es6.reflect.set-prototype-of');\nrequire('./modules/es7.array.includes');\nrequire('./modules/es7.array.flat-map');\nrequire('./modules/es7.array.flatten');\nrequire('./modules/es7.string.at');\nrequire('./modules/es7.string.pad-start');\nrequire('./modules/es7.string.pad-end');\nrequire('./modules/es7.string.trim-left');\nrequire('./modules/es7.string.trim-right');\nrequire('./modules/es7.string.match-all');\nrequire('./modules/es7.symbol.async-iterator');\nrequire('./modules/es7.symbol.observable');\nrequire('./modules/es7.object.get-own-property-descriptors');\nrequire('./modules/es7.object.values');\nrequire('./modules/es7.object.entries');\nrequire('./modules/es7.object.define-getter');\nrequire('./modules/es7.object.define-setter');\nrequire('./modules/es7.object.lookup-getter');\nrequire('./modules/es7.object.lookup-setter');\nrequire('./modules/es7.map.to-json');\nrequire('./modules/es7.set.to-json');\nrequire('./modules/es7.map.of');\nrequire('./modules/es7.set.of');\nrequire('./modules/es7.weak-map.of');\nrequire('./modules/es7.weak-set.of');\nrequire('./modules/es7.map.from');\nrequire('./modules/es7.set.from');\nrequire('./modules/es7.weak-map.from');\nrequire('./modules/es7.weak-set.from');\nrequire('./modules/es7.global');\nrequire('./modules/es7.system.global');\nrequire('./modules/es7.error.is-error');\nrequire('./modules/es7.math.clamp');\nrequire('./modules/es7.math.deg-per-rad');\nrequire('./modules/es7.math.degrees');\nrequire('./modules/es7.math.fscale');\nrequire('./modules/es7.math.iaddh');\nrequire('./modules/es7.math.isubh');\nrequire('./modules/es7.math.imulh');\nrequire('./modules/es7.math.rad-per-deg');\nrequire('./modules/es7.math.radians');\nrequire('./modules/es7.math.scale');\nrequire('./modules/es7.math.umulh');\nrequire('./modules/es7.math.signbit');\nrequire('./modules/es7.promise.finally');\nrequire('./modules/es7.promise.try');\nrequire('./modules/es7.reflect.define-metadata');\nrequire('./modules/es7.reflect.delete-metadata');\nrequire('./modules/es7.reflect.get-metadata');\nrequire('./modules/es7.reflect.get-metadata-keys');\nrequire('./modules/es7.reflect.get-own-metadata');\nrequire('./modules/es7.reflect.get-own-metadata-keys');\nrequire('./modules/es7.reflect.has-metadata');\nrequire('./modules/es7.reflect.has-own-metadata');\nrequire('./modules/es7.reflect.metadata');\nrequire('./modules/es7.asap');\nrequire('./modules/es7.observable');\nrequire('./modules/web.timers');\nrequire('./modules/web.immediate');\nrequire('./modules/web.dom.iterable');\nmodule.exports = require('./modules/_core');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/shim.js\n// module id = 327\n// module chunks = 26","'use strict';\n// ECMAScript 6 symbols shim\nvar global = require('./_global');\nvar has = require('./_has');\nvar DESCRIPTORS = require('./_descriptors');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar META = require('./_meta').KEY;\nvar $fails = require('./_fails');\nvar shared = require('./_shared');\nvar setToStringTag = require('./_set-to-string-tag');\nvar uid = require('./_uid');\nvar wks = require('./_wks');\nvar wksExt = require('./_wks-ext');\nvar wksDefine = require('./_wks-define');\nvar enumKeys = require('./_enum-keys');\nvar isArray = require('./_is-array');\nvar anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar createDesc = require('./_property-desc');\nvar _create = require('./_object-create');\nvar gOPNExt = require('./_object-gopn-ext');\nvar $GOPD = require('./_object-gopd');\nvar $DP = require('./_object-dp');\nvar $keys = require('./_object-keys');\nvar gOPD = $GOPD.f;\nvar dP = $DP.f;\nvar gOPN = gOPNExt.f;\nvar $Symbol = global.Symbol;\nvar $JSON = global.JSON;\nvar _stringify = $JSON && $JSON.stringify;\nvar PROTOTYPE = 'prototype';\nvar HIDDEN = wks('_hidden');\nvar TO_PRIMITIVE = wks('toPrimitive');\nvar isEnum = {}.propertyIsEnumerable;\nvar SymbolRegistry = shared('symbol-registry');\nvar AllSymbols = shared('symbols');\nvar OPSymbols = shared('op-symbols');\nvar ObjectProto = Object[PROTOTYPE];\nvar USE_NATIVE = typeof $Symbol == 'function';\nvar QObject = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function () {\n  return _create(dP({}, 'a', {\n    get: function () { return dP(this, 'a', { value: 7 }).a; }\n  })).a != 7;\n}) ? function (it, key, D) {\n  var protoDesc = gOPD(ObjectProto, key);\n  if (protoDesc) delete ObjectProto[key];\n  dP(it, key, D);\n  if (protoDesc && it !== ObjectProto) dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function (tag) {\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D) {\n  if (it === ObjectProto) $defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if (has(AllSymbols, key)) {\n    if (!D.enumerable) {\n      if (!has(it, HIDDEN)) dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if (has(it, HIDDEN) && it[HIDDEN][key]) it[HIDDEN][key] = false;\n      D = _create(D, { enumerable: createDesc(0, false) });\n    } return setSymbolDesc(it, key, D);\n  } return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P) {\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P));\n  var i = 0;\n  var l = keys.length;\n  var key;\n  while (l > i) $defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P) {\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key) {\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if (this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key) {\n  it = toIObject(it);\n  key = toPrimitive(key, true);\n  if (it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return;\n  var D = gOPD(it, key);\n  if (D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it) {\n  var names = gOPN(toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META) result.push(key);\n  } return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it) {\n  var IS_OP = it === ObjectProto;\n  var names = gOPN(IS_OP ? OPSymbols : toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true)) result.push(AllSymbols[key]);\n  } return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif (!USE_NATIVE) {\n  $Symbol = function Symbol() {\n    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function (value) {\n      if (this === ObjectProto) $set.call(OPSymbols, value);\n      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n    if (DESCRIPTORS && setter) setSymbolDesc(ObjectProto, tag, { configurable: true, set: $set });\n    return wrap(tag);\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString() {\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f = $defineProperty;\n  require('./_object-gopn').f = gOPNExt.f = $getOwnPropertyNames;\n  require('./_object-pie').f = $propertyIsEnumerable;\n  require('./_object-gops').f = $getOwnPropertySymbols;\n\n  if (DESCRIPTORS && !require('./_library')) {\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function (name) {\n    return wrap(wks(name));\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Symbol: $Symbol });\n\nfor (var es6Symbols = (\n  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), j = 0; es6Symbols.length > j;)wks(es6Symbols[j++]);\n\nfor (var wellKnownSymbols = $keys(wks.store), k = 0; wellKnownSymbols.length > k;) wksDefine(wellKnownSymbols[k++]);\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function (key) {\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(sym) {\n    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol!');\n    for (var key in SymbolRegistry) if (SymbolRegistry[key] === sym) return key;\n  },\n  useSetter: function () { setter = true; },\n  useSimple: function () { setter = false; }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function () {\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({ a: S }) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it) {\n    var args = [it];\n    var i = 1;\n    var replacer, $replacer;\n    while (arguments.length > i) args.push(arguments[i++]);\n    $replacer = replacer = args[1];\n    if (!isObject(replacer) && it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n    if (!isArray(replacer)) replacer = function (key, value) {\n      if (typeof $replacer == 'function') value = $replacer.call(this, key, value);\n      if (!isSymbol(value)) return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || require('./_hide')($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.symbol.js\n// module id = 328\n// module chunks = 26","// all enumerable object keys, includes symbols\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nmodule.exports = function (it) {\n  var result = getKeys(it);\n  var getSymbols = gOPS.f;\n  if (getSymbols) {\n    var symbols = getSymbols(it);\n    var isEnum = pIE.f;\n    var i = 0;\n    var key;\n    while (symbols.length > i) if (isEnum.call(it, key = symbols[i++])) result.push(key);\n  } return result;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_enum-keys.js\n// module id = 329\n// module chunks = 26","var $export = require('./_export');\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\n$export($export.S, 'Object', { create: require('./_object-create') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.object.create.js\n// module id = 330\n// module chunks = 26","var $export = require('./_export');\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperty: require('./_object-dp').f });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.object.define-property.js\n// module id = 331\n// module chunks = 26","var $export = require('./_export');\n// 19.1.2.3 / 15.2.3.7 Object.defineProperties(O, Properties)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperties: require('./_object-dps') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.object.define-properties.js\n// module id = 332\n// module chunks = 26","// 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\nvar toIObject = require('./_to-iobject');\nvar $getOwnPropertyDescriptor = require('./_object-gopd').f;\n\nrequire('./_object-sap')('getOwnPropertyDescriptor', function () {\n  return function getOwnPropertyDescriptor(it, key) {\n    return $getOwnPropertyDescriptor(toIObject(it), key);\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.object.get-own-property-descriptor.js\n// module id = 333\n// module chunks = 26","// 19.1.2.9 Object.getPrototypeOf(O)\nvar toObject = require('./_to-object');\nvar $getPrototypeOf = require('./_object-gpo');\n\nrequire('./_object-sap')('getPrototypeOf', function () {\n  return function getPrototypeOf(it) {\n    return $getPrototypeOf(toObject(it));\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.object.get-prototype-of.js\n// module id = 334\n// module chunks = 26","// 19.1.2.14 Object.keys(O)\nvar toObject = require('./_to-object');\nvar $keys = require('./_object-keys');\n\nrequire('./_object-sap')('keys', function () {\n  return function keys(it) {\n    return $keys(toObject(it));\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.object.keys.js\n// module id = 335\n// module chunks = 26","// 19.1.2.7 Object.getOwnPropertyNames(O)\nrequire('./_object-sap')('getOwnPropertyNames', function () {\n  return require('./_object-gopn-ext').f;\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.object.get-own-property-names.js\n// module id = 336\n// module chunks = 26","// 19.1.2.5 Object.freeze(O)\nvar isObject = require('./_is-object');\nvar meta = require('./_meta').onFreeze;\n\nrequire('./_object-sap')('freeze', function ($freeze) {\n  return function freeze(it) {\n    return $freeze && isObject(it) ? $freeze(meta(it)) : it;\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.object.freeze.js\n// module id = 337\n// module chunks = 26","// 19.1.2.17 Object.seal(O)\nvar isObject = require('./_is-object');\nvar meta = require('./_meta').onFreeze;\n\nrequire('./_object-sap')('seal', function ($seal) {\n  return function seal(it) {\n    return $seal && isObject(it) ? $seal(meta(it)) : it;\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.object.seal.js\n// module id = 338\n// module chunks = 26","// 19.1.2.15 Object.preventExtensions(O)\nvar isObject = require('./_is-object');\nvar meta = require('./_meta').onFreeze;\n\nrequire('./_object-sap')('preventExtensions', function ($preventExtensions) {\n  return function preventExtensions(it) {\n    return $preventExtensions && isObject(it) ? $preventExtensions(meta(it)) : it;\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.object.prevent-extensions.js\n// module id = 339\n// module chunks = 26","// 19.1.2.12 Object.isFrozen(O)\nvar isObject = require('./_is-object');\n\nrequire('./_object-sap')('isFrozen', function ($isFrozen) {\n  return function isFrozen(it) {\n    return isObject(it) ? $isFrozen ? $isFrozen(it) : false : true;\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.object.is-frozen.js\n// module id = 340\n// module chunks = 26","// 19.1.2.13 Object.isSealed(O)\nvar isObject = require('./_is-object');\n\nrequire('./_object-sap')('isSealed', function ($isSealed) {\n  return function isSealed(it) {\n    return isObject(it) ? $isSealed ? $isSealed(it) : false : true;\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.object.is-sealed.js\n// module id = 341\n// module chunks = 26","// 19.1.2.11 Object.isExtensible(O)\nvar isObject = require('./_is-object');\n\nrequire('./_object-sap')('isExtensible', function ($isExtensible) {\n  return function isExtensible(it) {\n    return isObject(it) ? $isExtensible ? $isExtensible(it) : true : false;\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.object.is-extensible.js\n// module id = 342\n// module chunks = 26","// 19.1.3.1 Object.assign(target, source)\nvar $export = require('./_export');\n\n$export($export.S + $export.F, 'Object', { assign: require('./_object-assign') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.object.assign.js\n// module id = 343\n// module chunks = 26","// 19.1.3.10 Object.is(value1, value2)\nvar $export = require('./_export');\n$export($export.S, 'Object', { is: require('./_same-value') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.object.is.js\n// module id = 344\n// module chunks = 26","// 7.2.9 SameValue(x, y)\nmodule.exports = Object.is || function is(x, y) {\n  // eslint-disable-next-line no-self-compare\n  return x === y ? x !== 0 || 1 / x === 1 / y : x != x && y != y;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_same-value.js\n// module id = 345\n// module chunks = 26","// 19.1.3.19 Object.setPrototypeOf(O, proto)\nvar $export = require('./_export');\n$export($export.S, 'Object', { setPrototypeOf: require('./_set-proto').set });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.object.set-prototype-of.js\n// module id = 346\n// module chunks = 26","'use strict';\n// 19.1.3.6 Object.prototype.toString()\nvar classof = require('./_classof');\nvar test = {};\ntest[require('./_wks')('toStringTag')] = 'z';\nif (test + '' != '[object z]') {\n  require('./_redefine')(Object.prototype, 'toString', function toString() {\n    return '[object ' + classof(this) + ']';\n  }, true);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.object.to-string.js\n// module id = 347\n// module chunks = 26","// 19.2.3.2 / 15.3.4.5 Function.prototype.bind(thisArg, args...)\nvar $export = require('./_export');\n\n$export($export.P, 'Function', { bind: require('./_bind') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.function.bind.js\n// module id = 348\n// module chunks = 26","var dP = require('./_object-dp').f;\nvar FProto = Function.prototype;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// 19.2.4.2 name\nNAME in FProto || require('./_descriptors') && dP(FProto, NAME, {\n  configurable: true,\n  get: function () {\n    try {\n      return ('' + this).match(nameRE)[1];\n    } catch (e) {\n      return '';\n    }\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.function.name.js\n// module id = 349\n// module chunks = 26","'use strict';\nvar isObject = require('./_is-object');\nvar getPrototypeOf = require('./_object-gpo');\nvar HAS_INSTANCE = require('./_wks')('hasInstance');\nvar FunctionProto = Function.prototype;\n// 19.2.3.6 Function.prototype[@@hasInstance](V)\nif (!(HAS_INSTANCE in FunctionProto)) require('./_object-dp').f(FunctionProto, HAS_INSTANCE, { value: function (O) {\n  if (typeof this != 'function' || !isObject(O)) return false;\n  if (!isObject(this.prototype)) return O instanceof this;\n  // for environment w/o native `@@hasInstance` logic enough `instanceof`, but add this:\n  while (O = getPrototypeOf(O)) if (this.prototype === O) return true;\n  return false;\n} });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.function.has-instance.js\n// module id = 350\n// module chunks = 26","var $export = require('./_export');\nvar $parseInt = require('./_parse-int');\n// 18.2.5 parseInt(string, radix)\n$export($export.G + $export.F * (parseInt != $parseInt), { parseInt: $parseInt });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.parse-int.js\n// module id = 351\n// module chunks = 26","var $export = require('./_export');\nvar $parseFloat = require('./_parse-float');\n// 18.2.4 parseFloat(string)\n$export($export.G + $export.F * (parseFloat != $parseFloat), { parseFloat: $parseFloat });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.parse-float.js\n// module id = 352\n// module chunks = 26","'use strict';\nvar global = require('./_global');\nvar has = require('./_has');\nvar cof = require('./_cof');\nvar inheritIfRequired = require('./_inherit-if-required');\nvar toPrimitive = require('./_to-primitive');\nvar fails = require('./_fails');\nvar gOPN = require('./_object-gopn').f;\nvar gOPD = require('./_object-gopd').f;\nvar dP = require('./_object-dp').f;\nvar $trim = require('./_string-trim').trim;\nvar NUMBER = 'Number';\nvar $Number = global[NUMBER];\nvar Base = $Number;\nvar proto = $Number.prototype;\n// Opera ~12 has broken Object#toString\nvar BROKEN_COF = cof(require('./_object-create')(proto)) == NUMBER;\nvar TRIM = 'trim' in String.prototype;\n\n// 7.1.3 ToNumber(argument)\nvar toNumber = function (argument) {\n  var it = toPrimitive(argument, false);\n  if (typeof it == 'string' && it.length > 2) {\n    it = TRIM ? it.trim() : $trim(it, 3);\n    var first = it.charCodeAt(0);\n    var third, radix, maxCode;\n    if (first === 43 || first === 45) {\n      third = it.charCodeAt(2);\n      if (third === 88 || third === 120) return NaN; // Number('+0x1') should be NaN, old V8 fix\n    } else if (first === 48) {\n      switch (it.charCodeAt(1)) {\n        case 66: case 98: radix = 2; maxCode = 49; break; // fast equal /^0b[01]+$/i\n        case 79: case 111: radix = 8; maxCode = 55; break; // fast equal /^0o[0-7]+$/i\n        default: return +it;\n      }\n      for (var digits = it.slice(2), i = 0, l = digits.length, code; i < l; i++) {\n        code = digits.charCodeAt(i);\n        // parseInt parses a string to a first unavailable symbol\n        // but ToNumber should return NaN if a string contains unavailable symbols\n        if (code < 48 || code > maxCode) return NaN;\n      } return parseInt(digits, radix);\n    }\n  } return +it;\n};\n\nif (!$Number(' 0o1') || !$Number('0b1') || $Number('+0x1')) {\n  $Number = function Number(value) {\n    var it = arguments.length < 1 ? 0 : value;\n    var that = this;\n    return that instanceof $Number\n      // check on 1..constructor(foo) case\n      && (BROKEN_COF ? fails(function () { proto.valueOf.call(that); }) : cof(that) != NUMBER)\n        ? inheritIfRequired(new Base(toNumber(it)), that, $Number) : toNumber(it);\n  };\n  for (var keys = require('./_descriptors') ? gOPN(Base) : (\n    // ES3:\n    'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' +\n    // ES6 (in case, if modules with ES6 Number statics required before):\n    'EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,' +\n    'MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger'\n  ).split(','), j = 0, key; keys.length > j; j++) {\n    if (has(Base, key = keys[j]) && !has($Number, key)) {\n      dP($Number, key, gOPD(Base, key));\n    }\n  }\n  $Number.prototype = proto;\n  proto.constructor = $Number;\n  require('./_redefine')(global, NUMBER, $Number);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.number.constructor.js\n// module id = 353\n// module chunks = 26","'use strict';\nvar $export = require('./_export');\nvar toInteger = require('./_to-integer');\nvar aNumberValue = require('./_a-number-value');\nvar repeat = require('./_string-repeat');\nvar $toFixed = 1.0.toFixed;\nvar floor = Math.floor;\nvar data = [0, 0, 0, 0, 0, 0];\nvar ERROR = 'Number.toFixed: incorrect invocation!';\nvar ZERO = '0';\n\nvar multiply = function (n, c) {\n  var i = -1;\n  var c2 = c;\n  while (++i < 6) {\n    c2 += n * data[i];\n    data[i] = c2 % 1e7;\n    c2 = floor(c2 / 1e7);\n  }\n};\nvar divide = function (n) {\n  var i = 6;\n  var c = 0;\n  while (--i >= 0) {\n    c += data[i];\n    data[i] = floor(c / n);\n    c = (c % n) * 1e7;\n  }\n};\nvar numToString = function () {\n  var i = 6;\n  var s = '';\n  while (--i >= 0) {\n    if (s !== '' || i === 0 || data[i] !== 0) {\n      var t = String(data[i]);\n      s = s === '' ? t : s + repeat.call(ZERO, 7 - t.length) + t;\n    }\n  } return s;\n};\nvar pow = function (x, n, acc) {\n  return n === 0 ? acc : n % 2 === 1 ? pow(x, n - 1, acc * x) : pow(x * x, n / 2, acc);\n};\nvar log = function (x) {\n  var n = 0;\n  var x2 = x;\n  while (x2 >= 4096) {\n    n += 12;\n    x2 /= 4096;\n  }\n  while (x2 >= 2) {\n    n += 1;\n    x2 /= 2;\n  } return n;\n};\n\n$export($export.P + $export.F * (!!$toFixed && (\n  0.00008.toFixed(3) !== '0.000' ||\n  0.9.toFixed(0) !== '1' ||\n  1.255.toFixed(2) !== '1.25' ||\n  1000000000000000128.0.toFixed(0) !== '1000000000000000128'\n) || !require('./_fails')(function () {\n  // V8 ~ Android 4.3-\n  $toFixed.call({});\n})), 'Number', {\n  toFixed: function toFixed(fractionDigits) {\n    var x = aNumberValue(this, ERROR);\n    var f = toInteger(fractionDigits);\n    var s = '';\n    var m = ZERO;\n    var e, z, j, k;\n    if (f < 0 || f > 20) throw RangeError(ERROR);\n    // eslint-disable-next-line no-self-compare\n    if (x != x) return 'NaN';\n    if (x <= -1e21 || x >= 1e21) return String(x);\n    if (x < 0) {\n      s = '-';\n      x = -x;\n    }\n    if (x > 1e-21) {\n      e = log(x * pow(2, 69, 1)) - 69;\n      z = e < 0 ? x * pow(2, -e, 1) : x / pow(2, e, 1);\n      z *= 0x10000000000000;\n      e = 52 - e;\n      if (e > 0) {\n        multiply(0, z);\n        j = f;\n        while (j >= 7) {\n          multiply(1e7, 0);\n          j -= 7;\n        }\n        multiply(pow(10, j, 1), 0);\n        j = e - 1;\n        while (j >= 23) {\n          divide(1 << 23);\n          j -= 23;\n        }\n        divide(1 << j);\n        multiply(1, 1);\n        divide(2);\n        m = numToString();\n      } else {\n        multiply(0, z);\n        multiply(1 << -e, 0);\n        m = numToString() + repeat.call(ZERO, f);\n      }\n    }\n    if (f > 0) {\n      k = m.length;\n      m = s + (k <= f ? '0.' + repeat.call(ZERO, f - k) + m : m.slice(0, k - f) + '.' + m.slice(k - f));\n    } else {\n      m = s + m;\n    } return m;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.number.to-fixed.js\n// module id = 354\n// module chunks = 26","'use strict';\nvar $export = require('./_export');\nvar $fails = require('./_fails');\nvar aNumberValue = require('./_a-number-value');\nvar $toPrecision = 1.0.toPrecision;\n\n$export($export.P + $export.F * ($fails(function () {\n  // IE7-\n  return $toPrecision.call(1, undefined) !== '1';\n}) || !$fails(function () {\n  // V8 ~ Android 4.3-\n  $toPrecision.call({});\n})), 'Number', {\n  toPrecision: function toPrecision(precision) {\n    var that = aNumberValue(this, 'Number#toPrecision: incorrect invocation!');\n    return precision === undefined ? $toPrecision.call(that) : $toPrecision.call(that, precision);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.number.to-precision.js\n// module id = 355\n// module chunks = 26","// 20.1.2.1 Number.EPSILON\nvar $export = require('./_export');\n\n$export($export.S, 'Number', { EPSILON: Math.pow(2, -52) });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.number.epsilon.js\n// module id = 356\n// module chunks = 26","// 20.1.2.2 Number.isFinite(number)\nvar $export = require('./_export');\nvar _isFinite = require('./_global').isFinite;\n\n$export($export.S, 'Number', {\n  isFinite: function isFinite(it) {\n    return typeof it == 'number' && _isFinite(it);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.number.is-finite.js\n// module id = 357\n// module chunks = 26","// 20.1.2.3 Number.isInteger(number)\nvar $export = require('./_export');\n\n$export($export.S, 'Number', { isInteger: require('./_is-integer') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.number.is-integer.js\n// module id = 358\n// module chunks = 26","// 20.1.2.4 Number.isNaN(number)\nvar $export = require('./_export');\n\n$export($export.S, 'Number', {\n  isNaN: function isNaN(number) {\n    // eslint-disable-next-line no-self-compare\n    return number != number;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.number.is-nan.js\n// module id = 359\n// module chunks = 26","// 20.1.2.5 Number.isSafeInteger(number)\nvar $export = require('./_export');\nvar isInteger = require('./_is-integer');\nvar abs = Math.abs;\n\n$export($export.S, 'Number', {\n  isSafeInteger: function isSafeInteger(number) {\n    return isInteger(number) && abs(number) <= 0x1fffffffffffff;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.number.is-safe-integer.js\n// module id = 360\n// module chunks = 26","// 20.1.2.6 Number.MAX_SAFE_INTEGER\nvar $export = require('./_export');\n\n$export($export.S, 'Number', { MAX_SAFE_INTEGER: 0x1fffffffffffff });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.number.max-safe-integer.js\n// module id = 361\n// module chunks = 26","// 20.1.2.10 Number.MIN_SAFE_INTEGER\nvar $export = require('./_export');\n\n$export($export.S, 'Number', { MIN_SAFE_INTEGER: -0x1fffffffffffff });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.number.min-safe-integer.js\n// module id = 362\n// module chunks = 26","var $export = require('./_export');\nvar $parseFloat = require('./_parse-float');\n// 20.1.2.12 Number.parseFloat(string)\n$export($export.S + $export.F * (Number.parseFloat != $parseFloat), 'Number', { parseFloat: $parseFloat });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.number.parse-float.js\n// module id = 363\n// module chunks = 26","var $export = require('./_export');\nvar $parseInt = require('./_parse-int');\n// 20.1.2.13 Number.parseInt(string, radix)\n$export($export.S + $export.F * (Number.parseInt != $parseInt), 'Number', { parseInt: $parseInt });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.number.parse-int.js\n// module id = 364\n// module chunks = 26","// 20.2.2.3 Math.acosh(x)\nvar $export = require('./_export');\nvar log1p = require('./_math-log1p');\nvar sqrt = Math.sqrt;\nvar $acosh = Math.acosh;\n\n$export($export.S + $export.F * !($acosh\n  // V8 bug: https://code.google.com/p/v8/issues/detail?id=3509\n  && Math.floor($acosh(Number.MAX_VALUE)) == 710\n  // Tor Browser bug: Math.acosh(Infinity) -> NaN\n  && $acosh(Infinity) == Infinity\n), 'Math', {\n  acosh: function acosh(x) {\n    return (x = +x) < 1 ? NaN : x > 94906265.62425156\n      ? Math.log(x) + Math.LN2\n      : log1p(x - 1 + sqrt(x - 1) * sqrt(x + 1));\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.math.acosh.js\n// module id = 365\n// module chunks = 26","// 20.2.2.5 Math.asinh(x)\nvar $export = require('./_export');\nvar $asinh = Math.asinh;\n\nfunction asinh(x) {\n  return !isFinite(x = +x) || x == 0 ? x : x < 0 ? -asinh(-x) : Math.log(x + Math.sqrt(x * x + 1));\n}\n\n// Tor Browser bug: Math.asinh(0) -> -0\n$export($export.S + $export.F * !($asinh && 1 / $asinh(0) > 0), 'Math', { asinh: asinh });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.math.asinh.js\n// module id = 366\n// module chunks = 26","// 20.2.2.7 Math.atanh(x)\nvar $export = require('./_export');\nvar $atanh = Math.atanh;\n\n// Tor Browser bug: Math.atanh(-0) -> 0\n$export($export.S + $export.F * !($atanh && 1 / $atanh(-0) < 0), 'Math', {\n  atanh: function atanh(x) {\n    return (x = +x) == 0 ? x : Math.log((1 + x) / (1 - x)) / 2;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.math.atanh.js\n// module id = 367\n// module chunks = 26","// 20.2.2.9 Math.cbrt(x)\nvar $export = require('./_export');\nvar sign = require('./_math-sign');\n\n$export($export.S, 'Math', {\n  cbrt: function cbrt(x) {\n    return sign(x = +x) * Math.pow(Math.abs(x), 1 / 3);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.math.cbrt.js\n// module id = 368\n// module chunks = 26","// 20.2.2.11 Math.clz32(x)\nvar $export = require('./_export');\n\n$export($export.S, 'Math', {\n  clz32: function clz32(x) {\n    return (x >>>= 0) ? 31 - Math.floor(Math.log(x + 0.5) * Math.LOG2E) : 32;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.math.clz32.js\n// module id = 369\n// module chunks = 26","// 20.2.2.12 Math.cosh(x)\nvar $export = require('./_export');\nvar exp = Math.exp;\n\n$export($export.S, 'Math', {\n  cosh: function cosh(x) {\n    return (exp(x = +x) + exp(-x)) / 2;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.math.cosh.js\n// module id = 370\n// module chunks = 26","// 20.2.2.14 Math.expm1(x)\nvar $export = require('./_export');\nvar $expm1 = require('./_math-expm1');\n\n$export($export.S + $export.F * ($expm1 != Math.expm1), 'Math', { expm1: $expm1 });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.math.expm1.js\n// module id = 371\n// module chunks = 26","// 20.2.2.16 Math.fround(x)\nvar $export = require('./_export');\n\n$export($export.S, 'Math', { fround: require('./_math-fround') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.math.fround.js\n// module id = 372\n// module chunks = 26","// 20.2.2.17 Math.hypot([value1[, value2[,  ]]])\nvar $export = require('./_export');\nvar abs = Math.abs;\n\n$export($export.S, 'Math', {\n  hypot: function hypot(value1, value2) { // eslint-disable-line no-unused-vars\n    var sum = 0;\n    var i = 0;\n    var aLen = arguments.length;\n    var larg = 0;\n    var arg, div;\n    while (i < aLen) {\n      arg = abs(arguments[i++]);\n      if (larg < arg) {\n        div = larg / arg;\n        sum = sum * div * div + 1;\n        larg = arg;\n      } else if (arg > 0) {\n        div = arg / larg;\n        sum += div * div;\n      } else sum += arg;\n    }\n    return larg === Infinity ? Infinity : larg * Math.sqrt(sum);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.math.hypot.js\n// module id = 373\n// module chunks = 26","// 20.2.2.18 Math.imul(x, y)\nvar $export = require('./_export');\nvar $imul = Math.imul;\n\n// some WebKit versions fails with big numbers, some has wrong arity\n$export($export.S + $export.F * require('./_fails')(function () {\n  return $imul(0xffffffff, 5) != -5 || $imul.length != 2;\n}), 'Math', {\n  imul: function imul(x, y) {\n    var UINT16 = 0xffff;\n    var xn = +x;\n    var yn = +y;\n    var xl = UINT16 & xn;\n    var yl = UINT16 & yn;\n    return 0 | xl * yl + ((UINT16 & xn >>> 16) * yl + xl * (UINT16 & yn >>> 16) << 16 >>> 0);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.math.imul.js\n// module id = 374\n// module chunks = 26","// 20.2.2.21 Math.log10(x)\nvar $export = require('./_export');\n\n$export($export.S, 'Math', {\n  log10: function log10(x) {\n    return Math.log(x) * Math.LOG10E;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.math.log10.js\n// module id = 375\n// module chunks = 26","// 20.2.2.20 Math.log1p(x)\nvar $export = require('./_export');\n\n$export($export.S, 'Math', { log1p: require('./_math-log1p') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.math.log1p.js\n// module id = 376\n// module chunks = 26","// 20.2.2.22 Math.log2(x)\nvar $export = require('./_export');\n\n$export($export.S, 'Math', {\n  log2: function log2(x) {\n    return Math.log(x) / Math.LN2;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.math.log2.js\n// module id = 377\n// module chunks = 26","// 20.2.2.28 Math.sign(x)\nvar $export = require('./_export');\n\n$export($export.S, 'Math', { sign: require('./_math-sign') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.math.sign.js\n// module id = 378\n// module chunks = 26","// 20.2.2.30 Math.sinh(x)\nvar $export = require('./_export');\nvar expm1 = require('./_math-expm1');\nvar exp = Math.exp;\n\n// V8 near Chromium 38 has a problem with very small numbers\n$export($export.S + $export.F * require('./_fails')(function () {\n  return !Math.sinh(-2e-17) != -2e-17;\n}), 'Math', {\n  sinh: function sinh(x) {\n    return Math.abs(x = +x) < 1\n      ? (expm1(x) - expm1(-x)) / 2\n      : (exp(x - 1) - exp(-x - 1)) * (Math.E / 2);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.math.sinh.js\n// module id = 379\n// module chunks = 26","// 20.2.2.33 Math.tanh(x)\nvar $export = require('./_export');\nvar expm1 = require('./_math-expm1');\nvar exp = Math.exp;\n\n$export($export.S, 'Math', {\n  tanh: function tanh(x) {\n    var a = expm1(x = +x);\n    var b = expm1(-x);\n    return a == Infinity ? 1 : b == Infinity ? -1 : (a - b) / (exp(x) + exp(-x));\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.math.tanh.js\n// module id = 380\n// module chunks = 26","// 20.2.2.34 Math.trunc(x)\nvar $export = require('./_export');\n\n$export($export.S, 'Math', {\n  trunc: function trunc(it) {\n    return (it > 0 ? Math.floor : Math.ceil)(it);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.math.trunc.js\n// module id = 381\n// module chunks = 26","var $export = require('./_export');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nvar fromCharCode = String.fromCharCode;\nvar $fromCodePoint = String.fromCodePoint;\n\n// length should be 1, old FF problem\n$export($export.S + $export.F * (!!$fromCodePoint && $fromCodePoint.length != 1), 'String', {\n  // 21.1.2.2 String.fromCodePoint(...codePoints)\n  fromCodePoint: function fromCodePoint(x) { // eslint-disable-line no-unused-vars\n    var res = [];\n    var aLen = arguments.length;\n    var i = 0;\n    var code;\n    while (aLen > i) {\n      code = +arguments[i++];\n      if (toAbsoluteIndex(code, 0x10ffff) !== code) throw RangeError(code + ' is not a valid code point');\n      res.push(code < 0x10000\n        ? fromCharCode(code)\n        : fromCharCode(((code -= 0x10000) >> 10) + 0xd800, code % 0x400 + 0xdc00)\n      );\n    } return res.join('');\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.from-code-point.js\n// module id = 382\n// module chunks = 26","var $export = require('./_export');\nvar toIObject = require('./_to-iobject');\nvar toLength = require('./_to-length');\n\n$export($export.S, 'String', {\n  // 21.1.2.4 String.raw(callSite, ...substitutions)\n  raw: function raw(callSite) {\n    var tpl = toIObject(callSite.raw);\n    var len = toLength(tpl.length);\n    var aLen = arguments.length;\n    var res = [];\n    var i = 0;\n    while (len > i) {\n      res.push(String(tpl[i++]));\n      if (i < aLen) res.push(String(arguments[i]));\n    } return res.join('');\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.raw.js\n// module id = 383\n// module chunks = 26","'use strict';\n// 21.1.3.25 String.prototype.trim()\nrequire('./_string-trim')('trim', function ($trim) {\n  return function trim() {\n    return $trim(this, 3);\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.trim.js\n// module id = 384\n// module chunks = 26","'use strict';\nvar $at = require('./_string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./_iter-define')(String, 'String', function (iterated) {\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var index = this._i;\n  var point;\n  if (index >= O.length) return { value: undefined, done: true };\n  point = $at(O, index);\n  this._i += point.length;\n  return { value: point, done: false };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.iterator.js\n// module id = 385\n// module chunks = 26","'use strict';\nvar $export = require('./_export');\nvar $at = require('./_string-at')(false);\n$export($export.P, 'String', {\n  // 21.1.3.3 String.prototype.codePointAt(pos)\n  codePointAt: function codePointAt(pos) {\n    return $at(this, pos);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.code-point-at.js\n// module id = 386\n// module chunks = 26","// 21.1.3.6 String.prototype.endsWith(searchString [, endPosition])\n'use strict';\nvar $export = require('./_export');\nvar toLength = require('./_to-length');\nvar context = require('./_string-context');\nvar ENDS_WITH = 'endsWith';\nvar $endsWith = ''[ENDS_WITH];\n\n$export($export.P + $export.F * require('./_fails-is-regexp')(ENDS_WITH), 'String', {\n  endsWith: function endsWith(searchString /* , endPosition = @length */) {\n    var that = context(this, searchString, ENDS_WITH);\n    var endPosition = arguments.length > 1 ? arguments[1] : undefined;\n    var len = toLength(that.length);\n    var end = endPosition === undefined ? len : Math.min(toLength(endPosition), len);\n    var search = String(searchString);\n    return $endsWith\n      ? $endsWith.call(that, search, end)\n      : that.slice(end - search.length, end) === search;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.ends-with.js\n// module id = 387\n// module chunks = 26","// 21.1.3.7 String.prototype.includes(searchString, position = 0)\n'use strict';\nvar $export = require('./_export');\nvar context = require('./_string-context');\nvar INCLUDES = 'includes';\n\n$export($export.P + $export.F * require('./_fails-is-regexp')(INCLUDES), 'String', {\n  includes: function includes(searchString /* , position = 0 */) {\n    return !!~context(this, searchString, INCLUDES)\n      .indexOf(searchString, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.includes.js\n// module id = 388\n// module chunks = 26","var $export = require('./_export');\n\n$export($export.P, 'String', {\n  // 21.1.3.13 String.prototype.repeat(count)\n  repeat: require('./_string-repeat')\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.repeat.js\n// module id = 389\n// module chunks = 26","// 21.1.3.18 String.prototype.startsWith(searchString [, position ])\n'use strict';\nvar $export = require('./_export');\nvar toLength = require('./_to-length');\nvar context = require('./_string-context');\nvar STARTS_WITH = 'startsWith';\nvar $startsWith = ''[STARTS_WITH];\n\n$export($export.P + $export.F * require('./_fails-is-regexp')(STARTS_WITH), 'String', {\n  startsWith: function startsWith(searchString /* , position = 0 */) {\n    var that = context(this, searchString, STARTS_WITH);\n    var index = toLength(Math.min(arguments.length > 1 ? arguments[1] : undefined, that.length));\n    var search = String(searchString);\n    return $startsWith\n      ? $startsWith.call(that, search, index)\n      : that.slice(index, index + search.length) === search;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.starts-with.js\n// module id = 390\n// module chunks = 26","'use strict';\n// B.2.3.2 String.prototype.anchor(name)\nrequire('./_string-html')('anchor', function (createHTML) {\n  return function anchor(name) {\n    return createHTML(this, 'a', 'name', name);\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.anchor.js\n// module id = 391\n// module chunks = 26","'use strict';\n// B.2.3.3 String.prototype.big()\nrequire('./_string-html')('big', function (createHTML) {\n  return function big() {\n    return createHTML(this, 'big', '', '');\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.big.js\n// module id = 392\n// module chunks = 26","'use strict';\n// B.2.3.4 String.prototype.blink()\nrequire('./_string-html')('blink', function (createHTML) {\n  return function blink() {\n    return createHTML(this, 'blink', '', '');\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.blink.js\n// module id = 393\n// module chunks = 26","'use strict';\n// B.2.3.5 String.prototype.bold()\nrequire('./_string-html')('bold', function (createHTML) {\n  return function bold() {\n    return createHTML(this, 'b', '', '');\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.bold.js\n// module id = 394\n// module chunks = 26","'use strict';\n// B.2.3.6 String.prototype.fixed()\nrequire('./_string-html')('fixed', function (createHTML) {\n  return function fixed() {\n    return createHTML(this, 'tt', '', '');\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.fixed.js\n// module id = 395\n// module chunks = 26","'use strict';\n// B.2.3.7 String.prototype.fontcolor(color)\nrequire('./_string-html')('fontcolor', function (createHTML) {\n  return function fontcolor(color) {\n    return createHTML(this, 'font', 'color', color);\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.fontcolor.js\n// module id = 396\n// module chunks = 26","'use strict';\n// B.2.3.8 String.prototype.fontsize(size)\nrequire('./_string-html')('fontsize', function (createHTML) {\n  return function fontsize(size) {\n    return createHTML(this, 'font', 'size', size);\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.fontsize.js\n// module id = 397\n// module chunks = 26","'use strict';\n// B.2.3.9 String.prototype.italics()\nrequire('./_string-html')('italics', function (createHTML) {\n  return function italics() {\n    return createHTML(this, 'i', '', '');\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.italics.js\n// module id = 398\n// module chunks = 26","'use strict';\n// B.2.3.10 String.prototype.link(url)\nrequire('./_string-html')('link', function (createHTML) {\n  return function link(url) {\n    return createHTML(this, 'a', 'href', url);\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.link.js\n// module id = 399\n// module chunks = 26","'use strict';\n// B.2.3.11 String.prototype.small()\nrequire('./_string-html')('small', function (createHTML) {\n  return function small() {\n    return createHTML(this, 'small', '', '');\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.small.js\n// module id = 400\n// module chunks = 26","'use strict';\n// B.2.3.12 String.prototype.strike()\nrequire('./_string-html')('strike', function (createHTML) {\n  return function strike() {\n    return createHTML(this, 'strike', '', '');\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.strike.js\n// module id = 401\n// module chunks = 26","'use strict';\n// B.2.3.13 String.prototype.sub()\nrequire('./_string-html')('sub', function (createHTML) {\n  return function sub() {\n    return createHTML(this, 'sub', '', '');\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.sub.js\n// module id = 402\n// module chunks = 26","'use strict';\n// B.2.3.14 String.prototype.sup()\nrequire('./_string-html')('sup', function (createHTML) {\n  return function sup() {\n    return createHTML(this, 'sup', '', '');\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.string.sup.js\n// module id = 403\n// module chunks = 26","// 20.3.3.1 / 15.9.4.4 Date.now()\nvar $export = require('./_export');\n\n$export($export.S, 'Date', { now: function () { return new Date().getTime(); } });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.date.now.js\n// module id = 404\n// module chunks = 26","'use strict';\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar toPrimitive = require('./_to-primitive');\n\n$export($export.P + $export.F * require('./_fails')(function () {\n  return new Date(NaN).toJSON() !== null\n    || Date.prototype.toJSON.call({ toISOString: function () { return 1; } }) !== 1;\n}), 'Date', {\n  // eslint-disable-next-line no-unused-vars\n  toJSON: function toJSON(key) {\n    var O = toObject(this);\n    var pv = toPrimitive(O);\n    return typeof pv == 'number' && !isFinite(pv) ? null : O.toISOString();\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.date.to-json.js\n// module id = 405\n// module chunks = 26","// 20.3.4.36 / 15.9.5.43 Date.prototype.toISOString()\nvar $export = require('./_export');\nvar toISOString = require('./_date-to-iso-string');\n\n// PhantomJS / old WebKit has a broken implementations\n$export($export.P + $export.F * (Date.prototype.toISOString !== toISOString), 'Date', {\n  toISOString: toISOString\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.date.to-iso-string.js\n// module id = 406\n// module chunks = 26","'use strict';\n// 20.3.4.36 / 15.9.5.43 Date.prototype.toISOString()\nvar fails = require('./_fails');\nvar getTime = Date.prototype.getTime;\nvar $toISOString = Date.prototype.toISOString;\n\nvar lz = function (num) {\n  return num > 9 ? num : '0' + num;\n};\n\n// PhantomJS / old WebKit has a broken implementations\nmodule.exports = (fails(function () {\n  return $toISOString.call(new Date(-5e13 - 1)) != '0385-07-25T07:06:39.999Z';\n}) || !fails(function () {\n  $toISOString.call(new Date(NaN));\n})) ? function toISOString() {\n  if (!isFinite(getTime.call(this))) throw RangeError('Invalid time value');\n  var d = this;\n  var y = d.getUTCFullYear();\n  var m = d.getUTCMilliseconds();\n  var s = y < 0 ? '-' : y > 9999 ? '+' : '';\n  return s + ('00000' + Math.abs(y)).slice(s ? -6 : -4) +\n    '-' + lz(d.getUTCMonth() + 1) + '-' + lz(d.getUTCDate()) +\n    'T' + lz(d.getUTCHours()) + ':' + lz(d.getUTCMinutes()) +\n    ':' + lz(d.getUTCSeconds()) + '.' + (m > 99 ? m : '0' + lz(m)) + 'Z';\n} : $toISOString;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_date-to-iso-string.js\n// module id = 407\n// module chunks = 26","var DateProto = Date.prototype;\nvar INVALID_DATE = 'Invalid Date';\nvar TO_STRING = 'toString';\nvar $toString = DateProto[TO_STRING];\nvar getTime = DateProto.getTime;\nif (new Date(NaN) + '' != INVALID_DATE) {\n  require('./_redefine')(DateProto, TO_STRING, function toString() {\n    var value = getTime.call(this);\n    // eslint-disable-next-line no-self-compare\n    return value === value ? $toString.call(this) : INVALID_DATE;\n  });\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.date.to-string.js\n// module id = 408\n// module chunks = 26","var TO_PRIMITIVE = require('./_wks')('toPrimitive');\nvar proto = Date.prototype;\n\nif (!(TO_PRIMITIVE in proto)) require('./_hide')(proto, TO_PRIMITIVE, require('./_date-to-primitive'));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.date.to-primitive.js\n// module id = 409\n// module chunks = 26","'use strict';\nvar anObject = require('./_an-object');\nvar toPrimitive = require('./_to-primitive');\nvar NUMBER = 'number';\n\nmodule.exports = function (hint) {\n  if (hint !== 'string' && hint !== NUMBER && hint !== 'default') throw TypeError('Incorrect hint');\n  return toPrimitive(anObject(this), hint != NUMBER);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_date-to-primitive.js\n// module id = 410\n// module chunks = 26","// 22.1.2.2 / 15.4.3.2 Array.isArray(arg)\nvar $export = require('./_export');\n\n$export($export.S, 'Array', { isArray: require('./_is-array') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.array.is-array.js\n// module id = 411\n// module chunks = 26","'use strict';\nvar ctx = require('./_ctx');\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar call = require('./_iter-call');\nvar isArrayIter = require('./_is-array-iter');\nvar toLength = require('./_to-length');\nvar createProperty = require('./_create-property');\nvar getIterFn = require('./core.get-iterator-method');\n\n$export($export.S + $export.F * !require('./_iter-detect')(function (iter) { Array.from(iter); }), 'Array', {\n  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n  from: function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n    var O = toObject(arrayLike);\n    var C = typeof this == 'function' ? this : Array;\n    var aLen = arguments.length;\n    var mapfn = aLen > 1 ? arguments[1] : undefined;\n    var mapping = mapfn !== undefined;\n    var index = 0;\n    var iterFn = getIterFn(O);\n    var length, result, step, iterator;\n    if (mapping) mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);\n    // if object isn't iterable or it's array with default iterator - use simple case\n    if (iterFn != undefined && !(C == Array && isArrayIter(iterFn))) {\n      for (iterator = iterFn.call(O), result = new C(); !(step = iterator.next()).done; index++) {\n        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);\n      }\n    } else {\n      length = toLength(O.length);\n      for (result = new C(length); length > index; index++) {\n        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);\n      }\n    }\n    result.length = index;\n    return result;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.array.from.js\n// module id = 412\n// module chunks = 26","'use strict';\nvar $export = require('./_export');\nvar createProperty = require('./_create-property');\n\n// WebKit Array.of isn't generic\n$export($export.S + $export.F * require('./_fails')(function () {\n  function F() { /* empty */ }\n  return !(Array.of.call(F) instanceof F);\n}), 'Array', {\n  // 22.1.2.3 Array.of( ...items)\n  of: function of(/* ...args */) {\n    var index = 0;\n    var aLen = arguments.length;\n    var result = new (typeof this == 'function' ? this : Array)(aLen);\n    while (aLen > index) createProperty(result, index, arguments[index++]);\n    result.length = aLen;\n    return result;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.array.of.js\n// module id = 413\n// module chunks = 26","'use strict';\n// 22.1.3.13 Array.prototype.join(separator)\nvar $export = require('./_export');\nvar toIObject = require('./_to-iobject');\nvar arrayJoin = [].join;\n\n// fallback for not array-like strings\n$export($export.P + $export.F * (require('./_iobject') != Object || !require('./_strict-method')(arrayJoin)), 'Array', {\n  join: function join(separator) {\n    return arrayJoin.call(toIObject(this), separator === undefined ? ',' : separator);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.array.join.js\n// module id = 414\n// module chunks = 26","'use strict';\nvar $export = require('./_export');\nvar html = require('./_html');\nvar cof = require('./_cof');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nvar toLength = require('./_to-length');\nvar arraySlice = [].slice;\n\n// fallback for not array-like ES3 strings and DOM objects\n$export($export.P + $export.F * require('./_fails')(function () {\n  if (html) arraySlice.call(html);\n}), 'Array', {\n  slice: function slice(begin, end) {\n    var len = toLength(this.length);\n    var klass = cof(this);\n    end = end === undefined ? len : end;\n    if (klass == 'Array') return arraySlice.call(this, begin, end);\n    var start = toAbsoluteIndex(begin, len);\n    var upTo = toAbsoluteIndex(end, len);\n    var size = toLength(upTo - start);\n    var cloned = new Array(size);\n    var i = 0;\n    for (; i < size; i++) cloned[i] = klass == 'String'\n      ? this.charAt(start + i)\n      : this[start + i];\n    return cloned;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.array.slice.js\n// module id = 415\n// module chunks = 26","'use strict';\nvar $export = require('./_export');\nvar aFunction = require('./_a-function');\nvar toObject = require('./_to-object');\nvar fails = require('./_fails');\nvar $sort = [].sort;\nvar test = [1, 2, 3];\n\n$export($export.P + $export.F * (fails(function () {\n  // IE8-\n  test.sort(undefined);\n}) || !fails(function () {\n  // V8 bug\n  test.sort(null);\n  // Old WebKit\n}) || !require('./_strict-method')($sort)), 'Array', {\n  // 22.1.3.25 Array.prototype.sort(comparefn)\n  sort: function sort(comparefn) {\n    return comparefn === undefined\n      ? $sort.call(toObject(this))\n      : $sort.call(toObject(this), aFunction(comparefn));\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.array.sort.js\n// module id = 416\n// module chunks = 26","'use strict';\nvar $export = require('./_export');\nvar $forEach = require('./_array-methods')(0);\nvar STRICT = require('./_strict-method')([].forEach, true);\n\n$export($export.P + $export.F * !STRICT, 'Array', {\n  // 22.1.3.10 / 15.4.4.18 Array.prototype.forEach(callbackfn [, thisArg])\n  forEach: function forEach(callbackfn /* , thisArg */) {\n    return $forEach(this, callbackfn, arguments[1]);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.array.for-each.js\n// module id = 417\n// module chunks = 26","var isObject = require('./_is-object');\nvar isArray = require('./_is-array');\nvar SPECIES = require('./_wks')('species');\n\nmodule.exports = function (original) {\n  var C;\n  if (isArray(original)) {\n    C = original.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return C === undefined ? Array : C;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/_array-species-constructor.js\n// module id = 418\n// module chunks = 26","'use strict';\nvar $export = require('./_export');\nvar $map = require('./_array-methods')(1);\n\n$export($export.P + $export.F * !require('./_strict-method')([].map, true), 'Array', {\n  // 22.1.3.15 / 15.4.4.19 Array.prototype.map(callbackfn [, thisArg])\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments[1]);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.array.map.js\n// module id = 419\n// module chunks = 26","'use strict';\nvar $export = require('./_export');\nvar $filter = require('./_array-methods')(2);\n\n$export($export.P + $export.F * !require('./_strict-method')([].filter, true), 'Array', {\n  // 22.1.3.7 / 15.4.4.20 Array.prototype.filter(callbackfn [, thisArg])\n  filter: function filter(callbackfn /* , thisArg */) {\n    return $filter(this, callbackfn, arguments[1]);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.array.filter.js\n// module id = 420\n// module chunks = 26","'use strict';\nvar $export = require('./_export');\nvar $some = require('./_array-methods')(3);\n\n$export($export.P + $export.F * !require('./_strict-method')([].some, true), 'Array', {\n  // 22.1.3.23 / 15.4.4.17 Array.prototype.some(callbackfn [, thisArg])\n  some: function some(callbackfn /* , thisArg */) {\n    return $some(this, callbackfn, arguments[1]);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.array.some.js\n// module id = 421\n// module chunks = 26","'use strict';\nvar $export = require('./_export');\nvar $every = require('./_array-methods')(4);\n\n$export($export.P + $export.F * !require('./_strict-method')([].every, true), 'Array', {\n  // 22.1.3.5 / 15.4.4.16 Array.prototype.every(callbackfn [, thisArg])\n  every: function every(callbackfn /* , thisArg */) {\n    return $every(this, callbackfn, arguments[1]);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.array.every.js\n// module id = 422\n// module chunks = 26","'use strict';\nvar $export = require('./_export');\nvar $reduce = require('./_array-reduce');\n\n$export($export.P + $export.F * !require('./_strict-method')([].reduce, true), 'Array', {\n  // 22.1.3.18 / 15.4.4.21 Array.prototype.reduce(callbackfn [, initialValue])\n  reduce: function reduce(callbackfn /* , initialValue */) {\n    return $reduce(this, callbackfn, arguments.length, arguments[1], false);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.array.reduce.js\n// module id = 423\n// module chunks = 26","'use strict';\nvar $export = require('./_export');\nvar $reduce = require('./_array-reduce');\n\n$export($export.P + $export.F * !require('./_strict-method')([].reduceRight, true), 'Array', {\n  // 22.1.3.19 / 15.4.4.22 Array.prototype.reduceRight(callbackfn [, initialValue])\n  reduceRight: function reduceRight(callbackfn /* , initialValue */) {\n    return $reduce(this, callbackfn, arguments.length, arguments[1], true);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.array.reduce-right.js\n// module id = 424\n// module chunks = 26","'use strict';\nvar $export = require('./_export');\nvar $indexOf = require('./_array-includes')(false);\nvar $native = [].indexOf;\nvar NEGATIVE_ZERO = !!$native && 1 / [1].indexOf(1, -0) < 0;\n\n$export($export.P + $export.F * (NEGATIVE_ZERO || !require('./_strict-method')($native)), 'Array', {\n  // 22.1.3.11 / 15.4.4.14 Array.prototype.indexOf(searchElement [, fromIndex])\n  indexOf: function indexOf(searchElement /* , fromIndex = 0 */) {\n    return NEGATIVE_ZERO\n      // convert -0 to +0\n      ? $native.apply(this, arguments) || 0\n      : $indexOf(this, searchElement, arguments[1]);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.array.index-of.js\n// module id = 425\n// module chunks = 26","'use strict';\nvar $export = require('./_export');\nvar toIObject = require('./_to-iobject');\nvar toInteger = require('./_to-integer');\nvar toLength = require('./_to-length');\nvar $native = [].lastIndexOf;\nvar NEGATIVE_ZERO = !!$native && 1 / [1].lastIndexOf(1, -0) < 0;\n\n$export($export.P + $export.F * (NEGATIVE_ZERO || !require('./_strict-method')($native)), 'Array', {\n  // 22.1.3.14 / 15.4.4.15 Array.prototype.lastIndexOf(searchElement [, fromIndex])\n  lastIndexOf: function lastIndexOf(searchElement /* , fromIndex = @[*-1] */) {\n    // convert -0 to +0\n    if (NEGATIVE_ZERO) return $native.apply(this, arguments) || 0;\n    var O = toIObject(this);\n    var length = toLength(O.length);\n    var index = length - 1;\n    if (arguments.length > 1) index = Math.min(index, toInteger(arguments[1]));\n    if (index < 0) index = length + index;\n    for (;index >= 0; index--) if (index in O) if (O[index] === searchElement) return index || 0;\n    return -1;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.array.last-index-of.js\n// module id = 426\n// module chunks = 26","// 22.1.3.3 Array.prototype.copyWithin(target, start, end = this.length)\nvar $export = require('./_export');\n\n$export($export.P, 'Array', { copyWithin: require('./_array-copy-within') });\n\nrequire('./_add-to-unscopables')('copyWithin');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.array.copy-within.js\n// module id = 427\n// module chunks = 26","// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)\nvar $export = require('./_export');\n\n$export($export.P, 'Array', { fill: require('./_array-fill') });\n\nrequire('./_add-to-unscopables')('fill');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.array.fill.js\n// module id = 428\n// module chunks = 26","'use strict';\n// 22.1.3.8 Array.prototype.find(predicate, thisArg = undefined)\nvar $export = require('./_export');\nvar $find = require('./_array-methods')(5);\nvar KEY = 'find';\nvar forced = true;\n// Shouldn't skip holes\nif (KEY in []) Array(1)[KEY](function () { forced = false; });\n$export($export.P + $export.F * forced, 'Array', {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\nrequire('./_add-to-unscopables')(KEY);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.array.find.js\n// module id = 429\n// module chunks = 26","'use strict';\n// 22.1.3.9 Array.prototype.findIndex(predicate, thisArg = undefined)\nvar $export = require('./_export');\nvar $find = require('./_array-methods')(6);\nvar KEY = 'findIndex';\nvar forced = true;\n// Shouldn't skip holes\nif (KEY in []) Array(1)[KEY](function () { forced = false; });\n$export($export.P + $export.F * forced, 'Array', {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\nrequire('./_add-to-unscopables')(KEY);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.array.find-index.js\n// module id = 430\n// module chunks = 26","require('./_set-species')('Array');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.array.species.js\n// module id = 431\n// module chunks = 26","var global = require('./_global');\nvar inheritIfRequired = require('./_inherit-if-required');\nvar dP = require('./_object-dp').f;\nvar gOPN = require('./_object-gopn').f;\nvar isRegExp = require('./_is-regexp');\nvar $flags = require('./_flags');\nvar $RegExp = global.RegExp;\nvar Base = $RegExp;\nvar proto = $RegExp.prototype;\nvar re1 = /a/g;\nvar re2 = /a/g;\n// \"new\" creates a new object, old webkit buggy here\nvar CORRECT_NEW = new $RegExp(re1) !== re1;\n\nif (require('./_descriptors') && (!CORRECT_NEW || require('./_fails')(function () {\n  re2[require('./_wks')('match')] = false;\n  // RegExp constructor can alter flags and IsRegExp works correct with @@match\n  return $RegExp(re1) != re1 || $RegExp(re2) == re2 || $RegExp(re1, 'i') != '/a/i';\n}))) {\n  $RegExp = function RegExp(p, f) {\n    var tiRE = this instanceof $RegExp;\n    var piRE = isRegExp(p);\n    var fiU = f === undefined;\n    return !tiRE && piRE && p.constructor === $RegExp && fiU ? p\n      : inheritIfRequired(CORRECT_NEW\n        ? new Base(piRE && !fiU ? p.source : p, f)\n        : Base((piRE = p instanceof $RegExp) ? p.source : p, piRE && fiU ? $flags.call(p) : f)\n      , tiRE ? this : proto, $RegExp);\n  };\n  var proxy = function (key) {\n    key in $RegExp || dP($RegExp, key, {\n      configurable: true,\n      get: function () { return Base[key]; },\n      set: function (it) { Base[key] = it; }\n    });\n  };\n  for (var keys = gOPN(Base), i = 0; keys.length > i;) proxy(keys[i++]);\n  proto.constructor = $RegExp;\n  $RegExp.prototype = proto;\n  require('./_redefine')(global, 'RegExp', $RegExp);\n}\n\nrequire('./_set-species')('RegExp');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.regexp.constructor.js\n// module id = 432\n// module chunks = 26","'use strict';\nrequire('./es6.regexp.flags');\nvar anObject = require('./_an-object');\nvar $flags = require('./_flags');\nvar DESCRIPTORS = require('./_descriptors');\nvar TO_STRING = 'toString';\nvar $toString = /./[TO_STRING];\n\nvar define = function (fn) {\n  require('./_redefine')(RegExp.prototype, TO_STRING, fn, true);\n};\n\n// 21.2.5.14 RegExp.prototype.toString()\nif (require('./_fails')(function () { return $toString.call({ source: 'a', flags: 'b' }) != '/a/b'; })) {\n  define(function toString() {\n    var R = anObject(this);\n    return '/'.concat(R.source, '/',\n      'flags' in R ? R.flags : !DESCRIPTORS && R instanceof RegExp ? $flags.call(R) : undefined);\n  });\n// FF44- RegExp#toString has a wrong name\n} else if ($toString.name != TO_STRING) {\n  define(function toString() {\n    return $toString.call(this);\n  });\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.regexp.to-string.js\n// module id = 433\n// module chunks = 26","// @@match logic\nrequire('./_fix-re-wks')('match', 1, function (defined, MATCH, $match) {\n  // 21.1.3.11 String.prototype.match(regexp)\n  return [function match(regexp) {\n    'use strict';\n    var O = defined(this);\n    var fn = regexp == undefined ? undefined : regexp[MATCH];\n    return fn !== undefined ? fn.call(regexp, O) : new RegExp(regexp)[MATCH](String(O));\n  }, $match];\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.regexp.match.js\n// module id = 434\n// module chunks = 26","// @@replace logic\nrequire('./_fix-re-wks')('replace', 2, function (defined, REPLACE, $replace) {\n  // 21.1.3.14 String.prototype.replace(searchValue, replaceValue)\n  return [function replace(searchValue, replaceValue) {\n    'use strict';\n    var O = defined(this);\n    var fn = searchValue == undefined ? undefined : searchValue[REPLACE];\n    return fn !== undefined\n      ? fn.call(searchValue, O, replaceValue)\n      : $replace.call(String(O), searchValue, replaceValue);\n  }, $replace];\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.regexp.replace.js\n// module id = 435\n// module chunks = 26","// @@search logic\nrequire('./_fix-re-wks')('search', 1, function (defined, SEARCH, $search) {\n  // 21.1.3.15 String.prototype.search(regexp)\n  return [function search(regexp) {\n    'use strict';\n    var O = defined(this);\n    var fn = regexp == undefined ? undefined : regexp[SEARCH];\n    return fn !== undefined ? fn.call(regexp, O) : new RegExp(regexp)[SEARCH](String(O));\n  }, $search];\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.regexp.search.js\n// module id = 436\n// module chunks = 26","// @@split logic\nrequire('./_fix-re-wks')('split', 2, function (defined, SPLIT, $split) {\n  'use strict';\n  var isRegExp = require('./_is-regexp');\n  var _split = $split;\n  var $push = [].push;\n  var $SPLIT = 'split';\n  var LENGTH = 'length';\n  var LAST_INDEX = 'lastIndex';\n  if (\n    'abbc'[$SPLIT](/(b)*/)[1] == 'c' ||\n    'test'[$SPLIT](/(?:)/, -1)[LENGTH] != 4 ||\n    'ab'[$SPLIT](/(?:ab)*/)[LENGTH] != 2 ||\n    '.'[$SPLIT](/(.?)(.?)/)[LENGTH] != 4 ||\n    '.'[$SPLIT](/()()/)[LENGTH] > 1 ||\n    ''[$SPLIT](/.?/)[LENGTH]\n  ) {\n    var NPCG = /()??/.exec('')[1] === undefined; // nonparticipating capturing group\n    // based on es5-shim implementation, need to rework it\n    $split = function (separator, limit) {\n      var string = String(this);\n      if (separator === undefined && limit === 0) return [];\n      // If `separator` is not a regex, use native split\n      if (!isRegExp(separator)) return _split.call(string, separator, limit);\n      var output = [];\n      var flags = (separator.ignoreCase ? 'i' : '') +\n                  (separator.multiline ? 'm' : '') +\n                  (separator.unicode ? 'u' : '') +\n                  (separator.sticky ? 'y' : '');\n      var lastLastIndex = 0;\n      var splitLimit = limit === undefined ? 4294967295 : limit >>> 0;\n      // Make `global` and avoid `lastIndex` issues by working with a copy\n      var separatorCopy = new RegExp(separator.source, flags + 'g');\n      var separator2, match, lastIndex, lastLength, i;\n      // Doesn't need flags gy, but they don't hurt\n      if (!NPCG) separator2 = new RegExp('^' + separatorCopy.source + '$(?!\\\\s)', flags);\n      while (match = separatorCopy.exec(string)) {\n        // `separatorCopy.lastIndex` is not reliable cross-browser\n        lastIndex = match.index + match[0][LENGTH];\n        if (lastIndex > lastLastIndex) {\n          output.push(string.slice(lastLastIndex, match.index));\n          // Fix browsers whose `exec` methods don't consistently return `undefined` for NPCG\n          // eslint-disable-next-line no-loop-func\n          if (!NPCG && match[LENGTH] > 1) match[0].replace(separator2, function () {\n            for (i = 1; i < arguments[LENGTH] - 2; i++) if (arguments[i] === undefined) match[i] = undefined;\n          });\n          if (match[LENGTH] > 1 && match.index < string[LENGTH]) $push.apply(output, match.slice(1));\n          lastLength = match[0][LENGTH];\n          lastLastIndex = lastIndex;\n          if (output[LENGTH] >= splitLimit) break;\n        }\n        if (separatorCopy[LAST_INDEX] === match.index) separatorCopy[LAST_INDEX]++; // Avoid an infinite loop\n      }\n      if (lastLastIndex === string[LENGTH]) {\n        if (lastLength || !separatorCopy.test('')) output.push('');\n      } else output.push(string.slice(lastLastIndex));\n      return output[LENGTH] > splitLimit ? output.slice(0, splitLimit) : output;\n    };\n  // Chakra, V8\n  } else if ('0'[$SPLIT](undefined, 0)[LENGTH]) {\n    $split = function (separator, limit) {\n      return separator === undefined && limit === 0 ? [] : _split.call(this, separator, limit);\n    };\n  }\n  // 21.1.3.17 String.prototype.split(separator, limit)\n  return [function split(separator, limit) {\n    var O = defined(this);\n    var fn = separator == undefined ? undefined : separator[SPLIT];\n    return fn !== undefined ? fn.call(separator, O, limit) : $split.call(String(O), separator, limit);\n  }, $split];\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.regexp.split.js\n// module id = 437\n// module chunks = 26","'use strict';\nvar LIBRARY = require('./_library');\nvar global = require('./_global');\nvar ctx = require('./_ctx');\nvar classof = require('./_classof');\nvar $export = require('./_export');\nvar isObject = require('./_is-object');\nvar aFunction = require('./_a-function');\nvar anInstance = require('./_an-instance');\nvar forOf = require('./_for-of');\nvar speciesConstructor = require('./_species-constructor');\nvar task = require('./_task').set;\nvar microtask = require('./_microtask')();\nvar newPromiseCapabilityModule = require('./_new-promise-capability');\nvar perform = require('./_perform');\nvar promiseResolve = require('./_promise-resolve');\nvar PROMISE = 'Promise';\nvar TypeError = global.TypeError;\nvar process = global.process;\nvar $Promise = global[PROMISE];\nvar isNode = classof(process) == 'process';\nvar empty = function () { /* empty */ };\nvar Internal, newGenericPromiseCapability, OwnPromiseCapability, Wrapper;\nvar newPromiseCapability = newGenericPromiseCapability = newPromiseCapabilityModule.f;\n\nvar USE_NATIVE = !!function () {\n  try {\n    // correct subclassing with @@species support\n    var promise = $Promise.resolve(1);\n    var FakePromise = (promise.constructor = {})[require('./_wks')('species')] = function (exec) {\n      exec(empty, empty);\n    };\n    // unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n    return (isNode || typeof PromiseRejectionEvent == 'function') && promise.then(empty) instanceof FakePromise;\n  } catch (e) { /* empty */ }\n}();\n\n// helpers\nvar isThenable = function (it) {\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\nvar notify = function (promise, isReject) {\n  if (promise._n) return;\n  promise._n = true;\n  var chain = promise._c;\n  microtask(function () {\n    var value = promise._v;\n    var ok = promise._s == 1;\n    var i = 0;\n    var run = function (reaction) {\n      var handler = ok ? reaction.ok : reaction.fail;\n      var resolve = reaction.resolve;\n      var reject = reaction.reject;\n      var domain = reaction.domain;\n      var result, then, exited;\n      try {\n        if (handler) {\n          if (!ok) {\n            if (promise._h == 2) onHandleUnhandled(promise);\n            promise._h = 1;\n          }\n          if (handler === true) result = value;\n          else {\n            if (domain) domain.enter();\n            result = handler(value); // may throw\n            if (domain) {\n              domain.exit();\n              exited = true;\n            }\n          }\n          if (result === reaction.promise) {\n            reject(TypeError('Promise-chain cycle'));\n          } else if (then = isThenable(result)) {\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch (e) {\n        if (domain && !exited) domain.exit();\n        reject(e);\n      }\n    };\n    while (chain.length > i) run(chain[i++]); // variable length - can't use forEach\n    promise._c = [];\n    promise._n = false;\n    if (isReject && !promise._h) onUnhandled(promise);\n  });\n};\nvar onUnhandled = function (promise) {\n  task.call(global, function () {\n    var value = promise._v;\n    var unhandled = isUnhandled(promise);\n    var result, handler, console;\n    if (unhandled) {\n      result = perform(function () {\n        if (isNode) {\n          process.emit('unhandledRejection', value, promise);\n        } else if (handler = global.onunhandledrejection) {\n          handler({ promise: promise, reason: value });\n        } else if ((console = global.console) && console.error) {\n          console.error('Unhandled promise rejection', value);\n        }\n      });\n      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n      promise._h = isNode || isUnhandled(promise) ? 2 : 1;\n    } promise._a = undefined;\n    if (unhandled && result.e) throw result.v;\n  });\n};\nvar isUnhandled = function (promise) {\n  return promise._h !== 1 && (promise._a || promise._c).length === 0;\n};\nvar onHandleUnhandled = function (promise) {\n  task.call(global, function () {\n    var handler;\n    if (isNode) {\n      process.emit('rejectionHandled', promise);\n    } else if (handler = global.onrejectionhandled) {\n      handler({ promise: promise, reason: promise._v });\n    }\n  });\n};\nvar $reject = function (value) {\n  var promise = this;\n  if (promise._d) return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  promise._v = value;\n  promise._s = 2;\n  if (!promise._a) promise._a = promise._c.slice();\n  notify(promise, true);\n};\nvar $resolve = function (value) {\n  var promise = this;\n  var then;\n  if (promise._d) return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  try {\n    if (promise === value) throw TypeError(\"Promise can't be resolved itself\");\n    if (then = isThenable(value)) {\n      microtask(function () {\n        var wrapper = { _w: promise, _d: false }; // wrap\n        try {\n          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n        } catch (e) {\n          $reject.call(wrapper, e);\n        }\n      });\n    } else {\n      promise._v = value;\n      promise._s = 1;\n      notify(promise, false);\n    }\n  } catch (e) {\n    $reject.call({ _w: promise, _d: false }, e); // wrap\n  }\n};\n\n// constructor polyfill\nif (!USE_NATIVE) {\n  // 25.4.3.1 Promise(executor)\n  $Promise = function Promise(executor) {\n    anInstance(this, $Promise, PROMISE, '_h');\n    aFunction(executor);\n    Internal.call(this);\n    try {\n      executor(ctx($resolve, this, 1), ctx($reject, this, 1));\n    } catch (err) {\n      $reject.call(this, err);\n    }\n  };\n  // eslint-disable-next-line no-unused-vars\n  Internal = function Promise(executor) {\n    this._c = [];             // <- awaiting reactions\n    this._a = undefined;      // <- checked in isUnhandled reactions\n    this._s = 0;              // <- state\n    this._d = false;          // <- done\n    this._v = undefined;      // <- value\n    this._h = 0;              // <- rejection state, 0 - default, 1 - handled, 2 - unhandled\n    this._n = false;          // <- notify\n  };\n  Internal.prototype = require('./_redefine-all')($Promise.prototype, {\n    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n    then: function then(onFulfilled, onRejected) {\n      var reaction = newPromiseCapability(speciesConstructor(this, $Promise));\n      reaction.ok = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail = typeof onRejected == 'function' && onRejected;\n      reaction.domain = isNode ? process.domain : undefined;\n      this._c.push(reaction);\n      if (this._a) this._a.push(reaction);\n      if (this._s) notify(this, false);\n      return reaction.promise;\n    },\n    // 25.4.5.1 Promise.prototype.catch(onRejected)\n    'catch': function (onRejected) {\n      return this.then(undefined, onRejected);\n    }\n  });\n  OwnPromiseCapability = function () {\n    var promise = new Internal();\n    this.promise = promise;\n    this.resolve = ctx($resolve, promise, 1);\n    this.reject = ctx($reject, promise, 1);\n  };\n  newPromiseCapabilityModule.f = newPromiseCapability = function (C) {\n    return C === $Promise || C === Wrapper\n      ? new OwnPromiseCapability(C)\n      : newGenericPromiseCapability(C);\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Promise: $Promise });\nrequire('./_set-to-string-tag')($Promise, PROMISE);\nrequire('./_set-species')(PROMISE);\nWrapper = require('./_core')[PROMISE];\n\n// statics\n$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n  // 25.4.4.5 Promise.reject(r)\n  reject: function reject(r) {\n    var capability = newPromiseCapability(this);\n    var $$reject = capability.reject;\n    $$reject(r);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * (LIBRARY || !USE_NATIVE), PROMISE, {\n  // 25.4.4.6 Promise.resolve(x)\n  resolve: function resolve(x) {\n    return promiseResolve(LIBRARY && this === Wrapper ? $Promise : this, x);\n  }\n});\n$export($export.S + $export.F * !(USE_NATIVE && require('./_iter-detect')(function (iter) {\n  $Promise.all(iter)['catch'](empty);\n})), PROMISE, {\n  // 25.4.4.1 Promise.all(iterable)\n  all: function all(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var resolve = capability.resolve;\n    var reject = capability.reject;\n    var result = perform(function () {\n      var values = [];\n      var index = 0;\n      var remaining = 1;\n      forOf(iterable, false, function (promise) {\n        var $index = index++;\n        var alreadyCalled = false;\n        values.push(undefined);\n        remaining++;\n        C.resolve(promise).then(function (value) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[$index] = value;\n          --remaining || resolve(values);\n        }, reject);\n      });\n      --remaining || resolve(values);\n    });\n    if (result.e) reject(result.v);\n    return capability.promise;\n  },\n  // 25.4.4.4 Promise.race(iterable)\n  race: function race(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var reject = capability.reject;\n    var result = perform(function () {\n      forOf(iterable, false, function (promise) {\n        C.resolve(promise).then(capability.resolve, reject);\n      });\n    });\n    if (result.e) reject(result.v);\n    return capability.promise;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.promise.js\n// module id = 438\n// module chunks = 26","'use strict';\nvar weak = require('./_collection-weak');\nvar validate = require('./_validate-collection');\nvar WEAK_SET = 'WeakSet';\n\n// 23.4 WeakSet Objects\nrequire('./_collection')(WEAK_SET, function (get) {\n  return function WeakSet() { return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.4.3.1 WeakSet.prototype.add(value)\n  add: function add(value) {\n    return weak.def(validate(this, WEAK_SET), value, true);\n  }\n}, weak, false, true);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.weak-set.js\n// module id = 439\n// module chunks = 26","'use strict';\nvar $export = require('./_export');\nvar $typed = require('./_typed');\nvar buffer = require('./_typed-buffer');\nvar anObject = require('./_an-object');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nvar toLength = require('./_to-length');\nvar isObject = require('./_is-object');\nvar ArrayBuffer = require('./_global').ArrayBuffer;\nvar speciesConstructor = require('./_species-constructor');\nvar $ArrayBuffer = buffer.ArrayBuffer;\nvar $DataView = buffer.DataView;\nvar $isView = $typed.ABV && ArrayBuffer.isView;\nvar $slice = $ArrayBuffer.prototype.slice;\nvar VIEW = $typed.VIEW;\nvar ARRAY_BUFFER = 'ArrayBuffer';\n\n$export($export.G + $export.W + $export.F * (ArrayBuffer !== $ArrayBuffer), { ArrayBuffer: $ArrayBuffer });\n\n$export($export.S + $export.F * !$typed.CONSTR, ARRAY_BUFFER, {\n  // 24.1.3.1 ArrayBuffer.isView(arg)\n  isView: function isView(it) {\n    return $isView && $isView(it) || isObject(it) && VIEW in it;\n  }\n});\n\n$export($export.P + $export.U + $export.F * require('./_fails')(function () {\n  return !new $ArrayBuffer(2).slice(1, undefined).byteLength;\n}), ARRAY_BUFFER, {\n  // 24.1.4.3 ArrayBuffer.prototype.slice(start, end)\n  slice: function slice(start, end) {\n    if ($slice !== undefined && end === undefined) return $slice.call(anObject(this), start); // FF fix\n    var len = anObject(this).byteLength;\n    var first = toAbsoluteIndex(start, len);\n    var final = toAbsoluteIndex(end === undefined ? len : end, len);\n    var result = new (speciesConstructor(this, $ArrayBuffer))(toLength(final - first));\n    var viewS = new $DataView(this);\n    var viewT = new $DataView(result);\n    var index = 0;\n    while (first < final) {\n      viewT.setUint8(index++, viewS.getUint8(first++));\n    } return result;\n  }\n});\n\nrequire('./_set-species')(ARRAY_BUFFER);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.typed.array-buffer.js\n// module id = 440\n// module chunks = 26","var $export = require('./_export');\n$export($export.G + $export.W + $export.F * !require('./_typed').ABV, {\n  DataView: require('./_typed-buffer').DataView\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.typed.data-view.js\n// module id = 441\n// module chunks = 26","require('./_typed-array')('Int8', 1, function (init) {\n  return function Int8Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.typed.int8-array.js\n// module id = 442\n// module chunks = 26","require('./_typed-array')('Uint8', 1, function (init) {\n  return function Uint8Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.typed.uint8-array.js\n// module id = 443\n// module chunks = 26","require('./_typed-array')('Uint8', 1, function (init) {\n  return function Uint8ClampedArray(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n}, true);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.typed.uint8-clamped-array.js\n// module id = 444\n// module chunks = 26","require('./_typed-array')('Int16', 2, function (init) {\n  return function Int16Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.typed.int16-array.js\n// module id = 445\n// module chunks = 26","require('./_typed-array')('Uint16', 2, function (init) {\n  return function Uint16Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.typed.uint16-array.js\n// module id = 446\n// module chunks = 26","require('./_typed-array')('Int32', 4, function (init) {\n  return function Int32Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.typed.int32-array.js\n// module id = 447\n// module chunks = 26","require('./_typed-array')('Uint32', 4, function (init) {\n  return function Uint32Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.typed.uint32-array.js\n// module id = 448\n// module chunks = 26","require('./_typed-array')('Float32', 4, function (init) {\n  return function Float32Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.typed.float32-array.js\n// module id = 449\n// module chunks = 26","require('./_typed-array')('Float64', 8, function (init) {\n  return function Float64Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.typed.float64-array.js\n// module id = 450\n// module chunks = 26","// 26.1.1 Reflect.apply(target, thisArgument, argumentsList)\nvar $export = require('./_export');\nvar aFunction = require('./_a-function');\nvar anObject = require('./_an-object');\nvar rApply = (require('./_global').Reflect || {}).apply;\nvar fApply = Function.apply;\n// MS Edge argumentsList argument is optional\n$export($export.S + $export.F * !require('./_fails')(function () {\n  rApply(function () { /* empty */ });\n}), 'Reflect', {\n  apply: function apply(target, thisArgument, argumentsList) {\n    var T = aFunction(target);\n    var L = anObject(argumentsList);\n    return rApply ? rApply(T, thisArgument, L) : fApply.call(T, thisArgument, L);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.reflect.apply.js\n// module id = 451\n// module chunks = 26","// 26.1.2 Reflect.construct(target, argumentsList [, newTarget])\nvar $export = require('./_export');\nvar create = require('./_object-create');\nvar aFunction = require('./_a-function');\nvar anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar fails = require('./_fails');\nvar bind = require('./_bind');\nvar rConstruct = (require('./_global').Reflect || {}).construct;\n\n// MS Edge supports only 2 arguments and argumentsList argument is optional\n// FF Nightly sets third argument as `new.target`, but does not create `this` from it\nvar NEW_TARGET_BUG = fails(function () {\n  function F() { /* empty */ }\n  return !(rConstruct(function () { /* empty */ }, [], F) instanceof F);\n});\nvar ARGS_BUG = !fails(function () {\n  rConstruct(function () { /* empty */ });\n});\n\n$export($export.S + $export.F * (NEW_TARGET_BUG || ARGS_BUG), 'Reflect', {\n  construct: function construct(Target, args /* , newTarget */) {\n    aFunction(Target);\n    anObject(args);\n    var newTarget = arguments.length < 3 ? Target : aFunction(arguments[2]);\n    if (ARGS_BUG && !NEW_TARGET_BUG) return rConstruct(Target, args, newTarget);\n    if (Target == newTarget) {\n      // w/o altered newTarget, optimization for 0-4 arguments\n      switch (args.length) {\n        case 0: return new Target();\n        case 1: return new Target(args[0]);\n        case 2: return new Target(args[0], args[1]);\n        case 3: return new Target(args[0], args[1], args[2]);\n        case 4: return new Target(args[0], args[1], args[2], args[3]);\n      }\n      // w/o altered newTarget, lot of arguments case\n      var $args = [null];\n      $args.push.apply($args, args);\n      return new (bind.apply(Target, $args))();\n    }\n    // with altered newTarget, not support built-in constructors\n    var proto = newTarget.prototype;\n    var instance = create(isObject(proto) ? proto : Object.prototype);\n    var result = Function.apply.call(Target, instance, args);\n    return isObject(result) ? result : instance;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.reflect.construct.js\n// module id = 452\n// module chunks = 26","// 26.1.3 Reflect.defineProperty(target, propertyKey, attributes)\nvar dP = require('./_object-dp');\nvar $export = require('./_export');\nvar anObject = require('./_an-object');\nvar toPrimitive = require('./_to-primitive');\n\n// MS Edge has broken Reflect.defineProperty - throwing instead of returning false\n$export($export.S + $export.F * require('./_fails')(function () {\n  // eslint-disable-next-line no-undef\n  Reflect.defineProperty(dP.f({}, 1, { value: 1 }), 1, { value: 2 });\n}), 'Reflect', {\n  defineProperty: function defineProperty(target, propertyKey, attributes) {\n    anObject(target);\n    propertyKey = toPrimitive(propertyKey, true);\n    anObject(attributes);\n    try {\n      dP.f(target, propertyKey, attributes);\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.reflect.define-property.js\n// module id = 453\n// module chunks = 26","// 26.1.4 Reflect.deleteProperty(target, propertyKey)\nvar $export = require('./_export');\nvar gOPD = require('./_object-gopd').f;\nvar anObject = require('./_an-object');\n\n$export($export.S, 'Reflect', {\n  deleteProperty: function deleteProperty(target, propertyKey) {\n    var desc = gOPD(anObject(target), propertyKey);\n    return desc && !desc.configurable ? false : delete target[propertyKey];\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.reflect.delete-property.js\n// module id = 454\n// module chunks = 26","'use strict';\n// 26.1.5 Reflect.enumerate(target)\nvar $export = require('./_export');\nvar anObject = require('./_an-object');\nvar Enumerate = function (iterated) {\n  this._t = anObject(iterated); // target\n  this._i = 0;                  // next index\n  var keys = this._k = [];      // keys\n  var key;\n  for (key in iterated) keys.push(key);\n};\nrequire('./_iter-create')(Enumerate, 'Object', function () {\n  var that = this;\n  var keys = that._k;\n  var key;\n  do {\n    if (that._i >= keys.length) return { value: undefined, done: true };\n  } while (!((key = keys[that._i++]) in that._t));\n  return { value: key, done: false };\n});\n\n$export($export.S, 'Reflect', {\n  enumerate: function enumerate(target) {\n    return new Enumerate(target);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.reflect.enumerate.js\n// module id = 455\n// module chunks = 26","// 26.1.6 Reflect.get(target, propertyKey [, receiver])\nvar gOPD = require('./_object-gopd');\nvar getPrototypeOf = require('./_object-gpo');\nvar has = require('./_has');\nvar $export = require('./_export');\nvar isObject = require('./_is-object');\nvar anObject = require('./_an-object');\n\nfunction get(target, propertyKey /* , receiver */) {\n  var receiver = arguments.length < 3 ? target : arguments[2];\n  var desc, proto;\n  if (anObject(target) === receiver) return target[propertyKey];\n  if (desc = gOPD.f(target, propertyKey)) return has(desc, 'value')\n    ? desc.value\n    : desc.get !== undefined\n      ? desc.get.call(receiver)\n      : undefined;\n  if (isObject(proto = getPrototypeOf(target))) return get(proto, propertyKey, receiver);\n}\n\n$export($export.S, 'Reflect', { get: get });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.reflect.get.js\n// module id = 456\n// module chunks = 26","// 26.1.7 Reflect.getOwnPropertyDescriptor(target, propertyKey)\nvar gOPD = require('./_object-gopd');\nvar $export = require('./_export');\nvar anObject = require('./_an-object');\n\n$export($export.S, 'Reflect', {\n  getOwnPropertyDescriptor: function getOwnPropertyDescriptor(target, propertyKey) {\n    return gOPD.f(anObject(target), propertyKey);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.reflect.get-own-property-descriptor.js\n// module id = 457\n// module chunks = 26","// 26.1.8 Reflect.getPrototypeOf(target)\nvar $export = require('./_export');\nvar getProto = require('./_object-gpo');\nvar anObject = require('./_an-object');\n\n$export($export.S, 'Reflect', {\n  getPrototypeOf: function getPrototypeOf(target) {\n    return getProto(anObject(target));\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.reflect.get-prototype-of.js\n// module id = 458\n// module chunks = 26","// 26.1.9 Reflect.has(target, propertyKey)\nvar $export = require('./_export');\n\n$export($export.S, 'Reflect', {\n  has: function has(target, propertyKey) {\n    return propertyKey in target;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.reflect.has.js\n// module id = 459\n// module chunks = 26","// 26.1.10 Reflect.isExtensible(target)\nvar $export = require('./_export');\nvar anObject = require('./_an-object');\nvar $isExtensible = Object.isExtensible;\n\n$export($export.S, 'Reflect', {\n  isExtensible: function isExtensible(target) {\n    anObject(target);\n    return $isExtensible ? $isExtensible(target) : true;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.reflect.is-extensible.js\n// module id = 460\n// module chunks = 26","// 26.1.11 Reflect.ownKeys(target)\nvar $export = require('./_export');\n\n$export($export.S, 'Reflect', { ownKeys: require('./_own-keys') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.reflect.own-keys.js\n// module id = 461\n// module chunks = 26","// 26.1.12 Reflect.preventExtensions(target)\nvar $export = require('./_export');\nvar anObject = require('./_an-object');\nvar $preventExtensions = Object.preventExtensions;\n\n$export($export.S, 'Reflect', {\n  preventExtensions: function preventExtensions(target) {\n    anObject(target);\n    try {\n      if ($preventExtensions) $preventExtensions(target);\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.reflect.prevent-extensions.js\n// module id = 462\n// module chunks = 26","// 26.1.13 Reflect.set(target, propertyKey, V [, receiver])\nvar dP = require('./_object-dp');\nvar gOPD = require('./_object-gopd');\nvar getPrototypeOf = require('./_object-gpo');\nvar has = require('./_has');\nvar $export = require('./_export');\nvar createDesc = require('./_property-desc');\nvar anObject = require('./_an-object');\nvar isObject = require('./_is-object');\n\nfunction set(target, propertyKey, V /* , receiver */) {\n  var receiver = arguments.length < 4 ? target : arguments[3];\n  var ownDesc = gOPD.f(anObject(target), propertyKey);\n  var existingDescriptor, proto;\n  if (!ownDesc) {\n    if (isObject(proto = getPrototypeOf(target))) {\n      return set(proto, propertyKey, V, receiver);\n    }\n    ownDesc = createDesc(0);\n  }\n  if (has(ownDesc, 'value')) {\n    if (ownDesc.writable === false || !isObject(receiver)) return false;\n    if (existingDescriptor = gOPD.f(receiver, propertyKey)) {\n      if (existingDescriptor.get || existingDescriptor.set || existingDescriptor.writable === false) return false;\n      existingDescriptor.value = V;\n      dP.f(receiver, propertyKey, existingDescriptor);\n    } else dP.f(receiver, propertyKey, createDesc(0, V));\n    return true;\n  }\n  return ownDesc.set === undefined ? false : (ownDesc.set.call(receiver, V), true);\n}\n\n$export($export.S, 'Reflect', { set: set });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.reflect.set.js\n// module id = 463\n// module chunks = 26","// 26.1.14 Reflect.setPrototypeOf(target, proto)\nvar $export = require('./_export');\nvar setProto = require('./_set-proto');\n\nif (setProto) $export($export.S, 'Reflect', {\n  setPrototypeOf: function setPrototypeOf(target, proto) {\n    setProto.check(target, proto);\n    try {\n      setProto.set(target, proto);\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es6.reflect.set-prototype-of.js\n// module id = 464\n// module chunks = 26","'use strict';\n// https://github.com/tc39/Array.prototype.includes\nvar $export = require('./_export');\nvar $includes = require('./_array-includes')(true);\n\n$export($export.P, 'Array', {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\nrequire('./_add-to-unscopables')('includes');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.array.includes.js\n// module id = 465\n// module chunks = 26","'use strict';\n// https://tc39.github.io/proposal-flatMap/#sec-Array.prototype.flatMap\nvar $export = require('./_export');\nvar flattenIntoArray = require('./_flatten-into-array');\nvar toObject = require('./_to-object');\nvar toLength = require('./_to-length');\nvar aFunction = require('./_a-function');\nvar arraySpeciesCreate = require('./_array-species-create');\n\n$export($export.P, 'Array', {\n  flatMap: function flatMap(callbackfn /* , thisArg */) {\n    var O = toObject(this);\n    var sourceLen, A;\n    aFunction(callbackfn);\n    sourceLen = toLength(O.length);\n    A = arraySpeciesCreate(O, 0);\n    flattenIntoArray(A, O, O, sourceLen, 0, 1, callbackfn, arguments[1]);\n    return A;\n  }\n});\n\nrequire('./_add-to-unscopables')('flatMap');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.array.flat-map.js\n// module id = 466\n// module chunks = 26","'use strict';\n// https://tc39.github.io/proposal-flatMap/#sec-Array.prototype.flatten\nvar $export = require('./_export');\nvar flattenIntoArray = require('./_flatten-into-array');\nvar toObject = require('./_to-object');\nvar toLength = require('./_to-length');\nvar toInteger = require('./_to-integer');\nvar arraySpeciesCreate = require('./_array-species-create');\n\n$export($export.P, 'Array', {\n  flatten: function flatten(/* depthArg = 1 */) {\n    var depthArg = arguments[0];\n    var O = toObject(this);\n    var sourceLen = toLength(O.length);\n    var A = arraySpeciesCreate(O, 0);\n    flattenIntoArray(A, O, O, sourceLen, 0, depthArg === undefined ? 1 : toInteger(depthArg));\n    return A;\n  }\n});\n\nrequire('./_add-to-unscopables')('flatten');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.array.flatten.js\n// module id = 467\n// module chunks = 26","'use strict';\n// https://github.com/mathiasbynens/String.prototype.at\nvar $export = require('./_export');\nvar $at = require('./_string-at')(true);\n\n$export($export.P, 'String', {\n  at: function at(pos) {\n    return $at(this, pos);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.string.at.js\n// module id = 468\n// module chunks = 26","'use strict';\n// https://github.com/tc39/proposal-string-pad-start-end\nvar $export = require('./_export');\nvar $pad = require('./_string-pad');\nvar userAgent = require('./_user-agent');\n\n// https://github.com/zloirock/core-js/issues/280\n$export($export.P + $export.F * /Version\\/10\\.\\d+(\\.\\d+)? Safari\\//.test(userAgent), 'String', {\n  padStart: function padStart(maxLength /* , fillString = ' ' */) {\n    return $pad(this, maxLength, arguments.length > 1 ? arguments[1] : undefined, true);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.string.pad-start.js\n// module id = 469\n// module chunks = 26","'use strict';\n// https://github.com/tc39/proposal-string-pad-start-end\nvar $export = require('./_export');\nvar $pad = require('./_string-pad');\nvar userAgent = require('./_user-agent');\n\n// https://github.com/zloirock/core-js/issues/280\n$export($export.P + $export.F * /Version\\/10\\.\\d+(\\.\\d+)? Safari\\//.test(userAgent), 'String', {\n  padEnd: function padEnd(maxLength /* , fillString = ' ' */) {\n    return $pad(this, maxLength, arguments.length > 1 ? arguments[1] : undefined, false);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.string.pad-end.js\n// module id = 470\n// module chunks = 26","'use strict';\n// https://github.com/sebmarkbage/ecmascript-string-left-right-trim\nrequire('./_string-trim')('trimLeft', function ($trim) {\n  return function trimLeft() {\n    return $trim(this, 1);\n  };\n}, 'trimStart');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.string.trim-left.js\n// module id = 471\n// module chunks = 26","'use strict';\n// https://github.com/sebmarkbage/ecmascript-string-left-right-trim\nrequire('./_string-trim')('trimRight', function ($trim) {\n  return function trimRight() {\n    return $trim(this, 2);\n  };\n}, 'trimEnd');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.string.trim-right.js\n// module id = 472\n// module chunks = 26","'use strict';\n// https://tc39.github.io/String.prototype.matchAll/\nvar $export = require('./_export');\nvar defined = require('./_defined');\nvar toLength = require('./_to-length');\nvar isRegExp = require('./_is-regexp');\nvar getFlags = require('./_flags');\nvar RegExpProto = RegExp.prototype;\n\nvar $RegExpStringIterator = function (regexp, string) {\n  this._r = regexp;\n  this._s = string;\n};\n\nrequire('./_iter-create')($RegExpStringIterator, 'RegExp String', function next() {\n  var match = this._r.exec(this._s);\n  return { value: match, done: match === null };\n});\n\n$export($export.P, 'String', {\n  matchAll: function matchAll(regexp) {\n    defined(this);\n    if (!isRegExp(regexp)) throw TypeError(regexp + ' is not a regexp!');\n    var S = String(this);\n    var flags = 'flags' in RegExpProto ? String(regexp.flags) : getFlags.call(regexp);\n    var rx = new RegExp(regexp.source, ~flags.indexOf('g') ? flags : 'g' + flags);\n    rx.lastIndex = toLength(regexp.lastIndex);\n    return new $RegExpStringIterator(rx, S);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.string.match-all.js\n// module id = 473\n// module chunks = 26","require('./_wks-define')('asyncIterator');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.symbol.async-iterator.js\n// module id = 474\n// module chunks = 26","require('./_wks-define')('observable');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.symbol.observable.js\n// module id = 475\n// module chunks = 26","// https://github.com/tc39/proposal-object-getownpropertydescriptors\nvar $export = require('./_export');\nvar ownKeys = require('./_own-keys');\nvar toIObject = require('./_to-iobject');\nvar gOPD = require('./_object-gopd');\nvar createProperty = require('./_create-property');\n\n$export($export.S, 'Object', {\n  getOwnPropertyDescriptors: function getOwnPropertyDescriptors(object) {\n    var O = toIObject(object);\n    var getDesc = gOPD.f;\n    var keys = ownKeys(O);\n    var result = {};\n    var i = 0;\n    var key, desc;\n    while (keys.length > i) {\n      desc = getDesc(O, key = keys[i++]);\n      if (desc !== undefined) createProperty(result, key, desc);\n    }\n    return result;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.object.get-own-property-descriptors.js\n// module id = 476\n// module chunks = 26","// https://github.com/tc39/proposal-object-values-entries\nvar $export = require('./_export');\nvar $values = require('./_object-to-array')(false);\n\n$export($export.S, 'Object', {\n  values: function values(it) {\n    return $values(it);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.object.values.js\n// module id = 477\n// module chunks = 26","// https://github.com/tc39/proposal-object-values-entries\nvar $export = require('./_export');\nvar $entries = require('./_object-to-array')(true);\n\n$export($export.S, 'Object', {\n  entries: function entries(it) {\n    return $entries(it);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.object.entries.js\n// module id = 478\n// module chunks = 26","'use strict';\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar aFunction = require('./_a-function');\nvar $defineProperty = require('./_object-dp');\n\n// B.2.2.2 Object.prototype.__defineGetter__(P, getter)\nrequire('./_descriptors') && $export($export.P + require('./_object-forced-pam'), 'Object', {\n  __defineGetter__: function __defineGetter__(P, getter) {\n    $defineProperty.f(toObject(this), P, { get: aFunction(getter), enumerable: true, configurable: true });\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.object.define-getter.js\n// module id = 479\n// module chunks = 26","'use strict';\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar aFunction = require('./_a-function');\nvar $defineProperty = require('./_object-dp');\n\n// B.2.2.3 Object.prototype.__defineSetter__(P, setter)\nrequire('./_descriptors') && $export($export.P + require('./_object-forced-pam'), 'Object', {\n  __defineSetter__: function __defineSetter__(P, setter) {\n    $defineProperty.f(toObject(this), P, { set: aFunction(setter), enumerable: true, configurable: true });\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.object.define-setter.js\n// module id = 480\n// module chunks = 26","'use strict';\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar toPrimitive = require('./_to-primitive');\nvar getPrototypeOf = require('./_object-gpo');\nvar getOwnPropertyDescriptor = require('./_object-gopd').f;\n\n// B.2.2.4 Object.prototype.__lookupGetter__(P)\nrequire('./_descriptors') && $export($export.P + require('./_object-forced-pam'), 'Object', {\n  __lookupGetter__: function __lookupGetter__(P) {\n    var O = toObject(this);\n    var K = toPrimitive(P, true);\n    var D;\n    do {\n      if (D = getOwnPropertyDescriptor(O, K)) return D.get;\n    } while (O = getPrototypeOf(O));\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.object.lookup-getter.js\n// module id = 481\n// module chunks = 26","'use strict';\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar toPrimitive = require('./_to-primitive');\nvar getPrototypeOf = require('./_object-gpo');\nvar getOwnPropertyDescriptor = require('./_object-gopd').f;\n\n// B.2.2.5 Object.prototype.__lookupSetter__(P)\nrequire('./_descriptors') && $export($export.P + require('./_object-forced-pam'), 'Object', {\n  __lookupSetter__: function __lookupSetter__(P) {\n    var O = toObject(this);\n    var K = toPrimitive(P, true);\n    var D;\n    do {\n      if (D = getOwnPropertyDescriptor(O, K)) return D.set;\n    } while (O = getPrototypeOf(O));\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.object.lookup-setter.js\n// module id = 482\n// module chunks = 26","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar $export = require('./_export');\n\n$export($export.P + $export.R, 'Map', { toJSON: require('./_collection-to-json')('Map') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.map.to-json.js\n// module id = 483\n// module chunks = 26","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar $export = require('./_export');\n\n$export($export.P + $export.R, 'Set', { toJSON: require('./_collection-to-json')('Set') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.set.to-json.js\n// module id = 484\n// module chunks = 26","// https://tc39.github.io/proposal-setmap-offrom/#sec-map.of\nrequire('./_set-collection-of')('Map');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.map.of.js\n// module id = 485\n// module chunks = 26","// https://tc39.github.io/proposal-setmap-offrom/#sec-set.of\nrequire('./_set-collection-of')('Set');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.set.of.js\n// module id = 486\n// module chunks = 26","// https://tc39.github.io/proposal-setmap-offrom/#sec-weakmap.of\nrequire('./_set-collection-of')('WeakMap');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.weak-map.of.js\n// module id = 487\n// module chunks = 26","// https://tc39.github.io/proposal-setmap-offrom/#sec-weakset.of\nrequire('./_set-collection-of')('WeakSet');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.weak-set.of.js\n// module id = 488\n// module chunks = 26","// https://tc39.github.io/proposal-setmap-offrom/#sec-map.from\nrequire('./_set-collection-from')('Map');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.map.from.js\n// module id = 489\n// module chunks = 26","// https://tc39.github.io/proposal-setmap-offrom/#sec-set.from\nrequire('./_set-collection-from')('Set');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.set.from.js\n// module id = 490\n// module chunks = 26","// https://tc39.github.io/proposal-setmap-offrom/#sec-weakmap.from\nrequire('./_set-collection-from')('WeakMap');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.weak-map.from.js\n// module id = 491\n// module chunks = 26","// https://tc39.github.io/proposal-setmap-offrom/#sec-weakset.from\nrequire('./_set-collection-from')('WeakSet');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.weak-set.from.js\n// module id = 492\n// module chunks = 26","// https://github.com/tc39/proposal-global\nvar $export = require('./_export');\n\n$export($export.G, { global: require('./_global') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.global.js\n// module id = 493\n// module chunks = 26","// https://github.com/tc39/proposal-global\nvar $export = require('./_export');\n\n$export($export.S, 'System', { global: require('./_global') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.system.global.js\n// module id = 494\n// module chunks = 26","// https://github.com/ljharb/proposal-is-error\nvar $export = require('./_export');\nvar cof = require('./_cof');\n\n$export($export.S, 'Error', {\n  isError: function isError(it) {\n    return cof(it) === 'Error';\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.error.is-error.js\n// module id = 495\n// module chunks = 26","// https://rwaldron.github.io/proposal-math-extensions/\nvar $export = require('./_export');\n\n$export($export.S, 'Math', {\n  clamp: function clamp(x, lower, upper) {\n    return Math.min(upper, Math.max(lower, x));\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.math.clamp.js\n// module id = 496\n// module chunks = 26","// https://rwaldron.github.io/proposal-math-extensions/\nvar $export = require('./_export');\n\n$export($export.S, 'Math', { DEG_PER_RAD: Math.PI / 180 });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.math.deg-per-rad.js\n// module id = 497\n// module chunks = 26","// https://rwaldron.github.io/proposal-math-extensions/\nvar $export = require('./_export');\nvar RAD_PER_DEG = 180 / Math.PI;\n\n$export($export.S, 'Math', {\n  degrees: function degrees(radians) {\n    return radians * RAD_PER_DEG;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.math.degrees.js\n// module id = 498\n// module chunks = 26","// https://rwaldron.github.io/proposal-math-extensions/\nvar $export = require('./_export');\nvar scale = require('./_math-scale');\nvar fround = require('./_math-fround');\n\n$export($export.S, 'Math', {\n  fscale: function fscale(x, inLow, inHigh, outLow, outHigh) {\n    return fround(scale(x, inLow, inHigh, outLow, outHigh));\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.math.fscale.js\n// module id = 499\n// module chunks = 26","// https://gist.github.com/BrendanEich/4294d5c212a6d2254703\nvar $export = require('./_export');\n\n$export($export.S, 'Math', {\n  iaddh: function iaddh(x0, x1, y0, y1) {\n    var $x0 = x0 >>> 0;\n    var $x1 = x1 >>> 0;\n    var $y0 = y0 >>> 0;\n    return $x1 + (y1 >>> 0) + (($x0 & $y0 | ($x0 | $y0) & ~($x0 + $y0 >>> 0)) >>> 31) | 0;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.math.iaddh.js\n// module id = 500\n// module chunks = 26","// https://gist.github.com/BrendanEich/4294d5c212a6d2254703\nvar $export = require('./_export');\n\n$export($export.S, 'Math', {\n  isubh: function isubh(x0, x1, y0, y1) {\n    var $x0 = x0 >>> 0;\n    var $x1 = x1 >>> 0;\n    var $y0 = y0 >>> 0;\n    return $x1 - (y1 >>> 0) - ((~$x0 & $y0 | ~($x0 ^ $y0) & $x0 - $y0 >>> 0) >>> 31) | 0;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.math.isubh.js\n// module id = 501\n// module chunks = 26","// https://gist.github.com/BrendanEich/4294d5c212a6d2254703\nvar $export = require('./_export');\n\n$export($export.S, 'Math', {\n  imulh: function imulh(u, v) {\n    var UINT16 = 0xffff;\n    var $u = +u;\n    var $v = +v;\n    var u0 = $u & UINT16;\n    var v0 = $v & UINT16;\n    var u1 = $u >> 16;\n    var v1 = $v >> 16;\n    var t = (u1 * v0 >>> 0) + (u0 * v0 >>> 16);\n    return u1 * v1 + (t >> 16) + ((u0 * v1 >>> 0) + (t & UINT16) >> 16);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.math.imulh.js\n// module id = 502\n// module chunks = 26","// https://rwaldron.github.io/proposal-math-extensions/\nvar $export = require('./_export');\n\n$export($export.S, 'Math', { RAD_PER_DEG: 180 / Math.PI });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.math.rad-per-deg.js\n// module id = 503\n// module chunks = 26","// https://rwaldron.github.io/proposal-math-extensions/\nvar $export = require('./_export');\nvar DEG_PER_RAD = Math.PI / 180;\n\n$export($export.S, 'Math', {\n  radians: function radians(degrees) {\n    return degrees * DEG_PER_RAD;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.math.radians.js\n// module id = 504\n// module chunks = 26","// https://rwaldron.github.io/proposal-math-extensions/\nvar $export = require('./_export');\n\n$export($export.S, 'Math', { scale: require('./_math-scale') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.math.scale.js\n// module id = 505\n// module chunks = 26","// https://gist.github.com/BrendanEich/4294d5c212a6d2254703\nvar $export = require('./_export');\n\n$export($export.S, 'Math', {\n  umulh: function umulh(u, v) {\n    var UINT16 = 0xffff;\n    var $u = +u;\n    var $v = +v;\n    var u0 = $u & UINT16;\n    var v0 = $v & UINT16;\n    var u1 = $u >>> 16;\n    var v1 = $v >>> 16;\n    var t = (u1 * v0 >>> 0) + (u0 * v0 >>> 16);\n    return u1 * v1 + (t >>> 16) + ((u0 * v1 >>> 0) + (t & UINT16) >>> 16);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.math.umulh.js\n// module id = 506\n// module chunks = 26","// http://jfbastien.github.io/papers/Math.signbit.html\nvar $export = require('./_export');\n\n$export($export.S, 'Math', { signbit: function signbit(x) {\n  // eslint-disable-next-line no-self-compare\n  return (x = +x) != x ? x : x == 0 ? 1 / x == Infinity : x > 0;\n} });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.math.signbit.js\n// module id = 507\n// module chunks = 26","// https://github.com/tc39/proposal-promise-finally\n'use strict';\nvar $export = require('./_export');\nvar core = require('./_core');\nvar global = require('./_global');\nvar speciesConstructor = require('./_species-constructor');\nvar promiseResolve = require('./_promise-resolve');\n\n$export($export.P + $export.R, 'Promise', { 'finally': function (onFinally) {\n  var C = speciesConstructor(this, core.Promise || global.Promise);\n  var isFunction = typeof onFinally == 'function';\n  return this.then(\n    isFunction ? function (x) {\n      return promiseResolve(C, onFinally()).then(function () { return x; });\n    } : onFinally,\n    isFunction ? function (e) {\n      return promiseResolve(C, onFinally()).then(function () { throw e; });\n    } : onFinally\n  );\n} });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.promise.finally.js\n// module id = 508\n// module chunks = 26","'use strict';\n// https://github.com/tc39/proposal-promise-try\nvar $export = require('./_export');\nvar newPromiseCapability = require('./_new-promise-capability');\nvar perform = require('./_perform');\n\n$export($export.S, 'Promise', { 'try': function (callbackfn) {\n  var promiseCapability = newPromiseCapability.f(this);\n  var result = perform(callbackfn);\n  (result.e ? promiseCapability.reject : promiseCapability.resolve)(result.v);\n  return promiseCapability.promise;\n} });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.promise.try.js\n// module id = 509\n// module chunks = 26","var metadata = require('./_metadata');\nvar anObject = require('./_an-object');\nvar toMetaKey = metadata.key;\nvar ordinaryDefineOwnMetadata = metadata.set;\n\nmetadata.exp({ defineMetadata: function defineMetadata(metadataKey, metadataValue, target, targetKey) {\n  ordinaryDefineOwnMetadata(metadataKey, metadataValue, anObject(target), toMetaKey(targetKey));\n} });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.reflect.define-metadata.js\n// module id = 510\n// module chunks = 26","var metadata = require('./_metadata');\nvar anObject = require('./_an-object');\nvar toMetaKey = metadata.key;\nvar getOrCreateMetadataMap = metadata.map;\nvar store = metadata.store;\n\nmetadata.exp({ deleteMetadata: function deleteMetadata(metadataKey, target /* , targetKey */) {\n  var targetKey = arguments.length < 3 ? undefined : toMetaKey(arguments[2]);\n  var metadataMap = getOrCreateMetadataMap(anObject(target), targetKey, false);\n  if (metadataMap === undefined || !metadataMap['delete'](metadataKey)) return false;\n  if (metadataMap.size) return true;\n  var targetMetadata = store.get(target);\n  targetMetadata['delete'](targetKey);\n  return !!targetMetadata.size || store['delete'](target);\n} });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.reflect.delete-metadata.js\n// module id = 511\n// module chunks = 26","var metadata = require('./_metadata');\nvar anObject = require('./_an-object');\nvar getPrototypeOf = require('./_object-gpo');\nvar ordinaryHasOwnMetadata = metadata.has;\nvar ordinaryGetOwnMetadata = metadata.get;\nvar toMetaKey = metadata.key;\n\nvar ordinaryGetMetadata = function (MetadataKey, O, P) {\n  var hasOwn = ordinaryHasOwnMetadata(MetadataKey, O, P);\n  if (hasOwn) return ordinaryGetOwnMetadata(MetadataKey, O, P);\n  var parent = getPrototypeOf(O);\n  return parent !== null ? ordinaryGetMetadata(MetadataKey, parent, P) : undefined;\n};\n\nmetadata.exp({ getMetadata: function getMetadata(metadataKey, target /* , targetKey */) {\n  return ordinaryGetMetadata(metadataKey, anObject(target), arguments.length < 3 ? undefined : toMetaKey(arguments[2]));\n} });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.reflect.get-metadata.js\n// module id = 512\n// module chunks = 26","var Set = require('./es6.set');\nvar from = require('./_array-from-iterable');\nvar metadata = require('./_metadata');\nvar anObject = require('./_an-object');\nvar getPrototypeOf = require('./_object-gpo');\nvar ordinaryOwnMetadataKeys = metadata.keys;\nvar toMetaKey = metadata.key;\n\nvar ordinaryMetadataKeys = function (O, P) {\n  var oKeys = ordinaryOwnMetadataKeys(O, P);\n  var parent = getPrototypeOf(O);\n  if (parent === null) return oKeys;\n  var pKeys = ordinaryMetadataKeys(parent, P);\n  return pKeys.length ? oKeys.length ? from(new Set(oKeys.concat(pKeys))) : pKeys : oKeys;\n};\n\nmetadata.exp({ getMetadataKeys: function getMetadataKeys(target /* , targetKey */) {\n  return ordinaryMetadataKeys(anObject(target), arguments.length < 2 ? undefined : toMetaKey(arguments[1]));\n} });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.reflect.get-metadata-keys.js\n// module id = 513\n// module chunks = 26","var metadata = require('./_metadata');\nvar anObject = require('./_an-object');\nvar ordinaryGetOwnMetadata = metadata.get;\nvar toMetaKey = metadata.key;\n\nmetadata.exp({ getOwnMetadata: function getOwnMetadata(metadataKey, target /* , targetKey */) {\n  return ordinaryGetOwnMetadata(metadataKey, anObject(target)\n    , arguments.length < 3 ? undefined : toMetaKey(arguments[2]));\n} });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.reflect.get-own-metadata.js\n// module id = 514\n// module chunks = 26","var metadata = require('./_metadata');\nvar anObject = require('./_an-object');\nvar ordinaryOwnMetadataKeys = metadata.keys;\nvar toMetaKey = metadata.key;\n\nmetadata.exp({ getOwnMetadataKeys: function getOwnMetadataKeys(target /* , targetKey */) {\n  return ordinaryOwnMetadataKeys(anObject(target), arguments.length < 2 ? undefined : toMetaKey(arguments[1]));\n} });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.reflect.get-own-metadata-keys.js\n// module id = 515\n// module chunks = 26","var metadata = require('./_metadata');\nvar anObject = require('./_an-object');\nvar getPrototypeOf = require('./_object-gpo');\nvar ordinaryHasOwnMetadata = metadata.has;\nvar toMetaKey = metadata.key;\n\nvar ordinaryHasMetadata = function (MetadataKey, O, P) {\n  var hasOwn = ordinaryHasOwnMetadata(MetadataKey, O, P);\n  if (hasOwn) return true;\n  var parent = getPrototypeOf(O);\n  return parent !== null ? ordinaryHasMetadata(MetadataKey, parent, P) : false;\n};\n\nmetadata.exp({ hasMetadata: function hasMetadata(metadataKey, target /* , targetKey */) {\n  return ordinaryHasMetadata(metadataKey, anObject(target), arguments.length < 3 ? undefined : toMetaKey(arguments[2]));\n} });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.reflect.has-metadata.js\n// module id = 516\n// module chunks = 26","var metadata = require('./_metadata');\nvar anObject = require('./_an-object');\nvar ordinaryHasOwnMetadata = metadata.has;\nvar toMetaKey = metadata.key;\n\nmetadata.exp({ hasOwnMetadata: function hasOwnMetadata(metadataKey, target /* , targetKey */) {\n  return ordinaryHasOwnMetadata(metadataKey, anObject(target)\n    , arguments.length < 3 ? undefined : toMetaKey(arguments[2]));\n} });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.reflect.has-own-metadata.js\n// module id = 517\n// module chunks = 26","var $metadata = require('./_metadata');\nvar anObject = require('./_an-object');\nvar aFunction = require('./_a-function');\nvar toMetaKey = $metadata.key;\nvar ordinaryDefineOwnMetadata = $metadata.set;\n\n$metadata.exp({ metadata: function metadata(metadataKey, metadataValue) {\n  return function decorator(target, targetKey) {\n    ordinaryDefineOwnMetadata(\n      metadataKey, metadataValue,\n      (targetKey !== undefined ? anObject : aFunction)(target),\n      toMetaKey(targetKey)\n    );\n  };\n} });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.reflect.metadata.js\n// module id = 518\n// module chunks = 26","// https://github.com/rwaldron/tc39-notes/blob/master/es6/2014-09/sept-25.md#510-globalasap-for-enqueuing-a-microtask\nvar $export = require('./_export');\nvar microtask = require('./_microtask')();\nvar process = require('./_global').process;\nvar isNode = require('./_cof')(process) == 'process';\n\n$export($export.G, {\n  asap: function asap(fn) {\n    var domain = isNode && process.domain;\n    microtask(domain ? domain.bind(fn) : fn);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.asap.js\n// module id = 519\n// module chunks = 26","'use strict';\n// https://github.com/zenparsing/es-observable\nvar $export = require('./_export');\nvar global = require('./_global');\nvar core = require('./_core');\nvar microtask = require('./_microtask')();\nvar OBSERVABLE = require('./_wks')('observable');\nvar aFunction = require('./_a-function');\nvar anObject = require('./_an-object');\nvar anInstance = require('./_an-instance');\nvar redefineAll = require('./_redefine-all');\nvar hide = require('./_hide');\nvar forOf = require('./_for-of');\nvar RETURN = forOf.RETURN;\n\nvar getMethod = function (fn) {\n  return fn == null ? undefined : aFunction(fn);\n};\n\nvar cleanupSubscription = function (subscription) {\n  var cleanup = subscription._c;\n  if (cleanup) {\n    subscription._c = undefined;\n    cleanup();\n  }\n};\n\nvar subscriptionClosed = function (subscription) {\n  return subscription._o === undefined;\n};\n\nvar closeSubscription = function (subscription) {\n  if (!subscriptionClosed(subscription)) {\n    subscription._o = undefined;\n    cleanupSubscription(subscription);\n  }\n};\n\nvar Subscription = function (observer, subscriber) {\n  anObject(observer);\n  this._c = undefined;\n  this._o = observer;\n  observer = new SubscriptionObserver(this);\n  try {\n    var cleanup = subscriber(observer);\n    var subscription = cleanup;\n    if (cleanup != null) {\n      if (typeof cleanup.unsubscribe === 'function') cleanup = function () { subscription.unsubscribe(); };\n      else aFunction(cleanup);\n      this._c = cleanup;\n    }\n  } catch (e) {\n    observer.error(e);\n    return;\n  } if (subscriptionClosed(this)) cleanupSubscription(this);\n};\n\nSubscription.prototype = redefineAll({}, {\n  unsubscribe: function unsubscribe() { closeSubscription(this); }\n});\n\nvar SubscriptionObserver = function (subscription) {\n  this._s = subscription;\n};\n\nSubscriptionObserver.prototype = redefineAll({}, {\n  next: function next(value) {\n    var subscription = this._s;\n    if (!subscriptionClosed(subscription)) {\n      var observer = subscription._o;\n      try {\n        var m = getMethod(observer.next);\n        if (m) return m.call(observer, value);\n      } catch (e) {\n        try {\n          closeSubscription(subscription);\n        } finally {\n          throw e;\n        }\n      }\n    }\n  },\n  error: function error(value) {\n    var subscription = this._s;\n    if (subscriptionClosed(subscription)) throw value;\n    var observer = subscription._o;\n    subscription._o = undefined;\n    try {\n      var m = getMethod(observer.error);\n      if (!m) throw value;\n      value = m.call(observer, value);\n    } catch (e) {\n      try {\n        cleanupSubscription(subscription);\n      } finally {\n        throw e;\n      }\n    } cleanupSubscription(subscription);\n    return value;\n  },\n  complete: function complete(value) {\n    var subscription = this._s;\n    if (!subscriptionClosed(subscription)) {\n      var observer = subscription._o;\n      subscription._o = undefined;\n      try {\n        var m = getMethod(observer.complete);\n        value = m ? m.call(observer, value) : undefined;\n      } catch (e) {\n        try {\n          cleanupSubscription(subscription);\n        } finally {\n          throw e;\n        }\n      } cleanupSubscription(subscription);\n      return value;\n    }\n  }\n});\n\nvar $Observable = function Observable(subscriber) {\n  anInstance(this, $Observable, 'Observable', '_f')._f = aFunction(subscriber);\n};\n\nredefineAll($Observable.prototype, {\n  subscribe: function subscribe(observer) {\n    return new Subscription(observer, this._f);\n  },\n  forEach: function forEach(fn) {\n    var that = this;\n    return new (core.Promise || global.Promise)(function (resolve, reject) {\n      aFunction(fn);\n      var subscription = that.subscribe({\n        next: function (value) {\n          try {\n            return fn(value);\n          } catch (e) {\n            reject(e);\n            subscription.unsubscribe();\n          }\n        },\n        error: reject,\n        complete: resolve\n      });\n    });\n  }\n});\n\nredefineAll($Observable, {\n  from: function from(x) {\n    var C = typeof this === 'function' ? this : $Observable;\n    var method = getMethod(anObject(x)[OBSERVABLE]);\n    if (method) {\n      var observable = anObject(method.call(x));\n      return observable.constructor === C ? observable : new C(function (observer) {\n        return observable.subscribe(observer);\n      });\n    }\n    return new C(function (observer) {\n      var done = false;\n      microtask(function () {\n        if (!done) {\n          try {\n            if (forOf(x, false, function (it) {\n              observer.next(it);\n              if (done) return RETURN;\n            }) === RETURN) return;\n          } catch (e) {\n            if (done) throw e;\n            observer.error(e);\n            return;\n          } observer.complete();\n        }\n      });\n      return function () { done = true; };\n    });\n  },\n  of: function of() {\n    for (var i = 0, l = arguments.length, items = new Array(l); i < l;) items[i] = arguments[i++];\n    return new (typeof this === 'function' ? this : $Observable)(function (observer) {\n      var done = false;\n      microtask(function () {\n        if (!done) {\n          for (var j = 0; j < items.length; ++j) {\n            observer.next(items[j]);\n            if (done) return;\n          } observer.complete();\n        }\n      });\n      return function () { done = true; };\n    });\n  }\n});\n\nhide($Observable.prototype, OBSERVABLE, function () { return this; });\n\n$export($export.G, { Observable: $Observable });\n\nrequire('./_set-species')('Observable');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/es7.observable.js\n// module id = 520\n// module chunks = 26","// ie9- setTimeout & setInterval additional parameters fix\nvar global = require('./_global');\nvar $export = require('./_export');\nvar userAgent = require('./_user-agent');\nvar slice = [].slice;\nvar MSIE = /MSIE .\\./.test(userAgent); // <- dirty ie9- check\nvar wrap = function (set) {\n  return function (fn, time /* , ...args */) {\n    var boundArgs = arguments.length > 2;\n    var args = boundArgs ? slice.call(arguments, 2) : false;\n    return set(boundArgs ? function () {\n      // eslint-disable-next-line no-new-func\n      (typeof fn == 'function' ? fn : Function(fn)).apply(this, args);\n    } : fn, time);\n  };\n};\n$export($export.G + $export.B + $export.F * MSIE, {\n  setTimeout: wrap(global.setTimeout),\n  setInterval: wrap(global.setInterval)\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/web.timers.js\n// module id = 521\n// module chunks = 26","var $export = require('./_export');\nvar $task = require('./_task');\n$export($export.G + $export.B, {\n  setImmediate: $task.set,\n  clearImmediate: $task.clear\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/web.immediate.js\n// module id = 522\n// module chunks = 26","var $iterators = require('./es6.array.iterator');\nvar getKeys = require('./_object-keys');\nvar redefine = require('./_redefine');\nvar global = require('./_global');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar wks = require('./_wks');\nvar ITERATOR = wks('iterator');\nvar TO_STRING_TAG = wks('toStringTag');\nvar ArrayValues = Iterators.Array;\n\nvar DOMIterables = {\n  CSSRuleList: true, // TODO: Not spec compliant, should be false.\n  CSSStyleDeclaration: false,\n  CSSValueList: false,\n  ClientRectList: false,\n  DOMRectList: false,\n  DOMStringList: false,\n  DOMTokenList: true,\n  DataTransferItemList: false,\n  FileList: false,\n  HTMLAllCollection: false,\n  HTMLCollection: false,\n  HTMLFormElement: false,\n  HTMLSelectElement: false,\n  MediaList: true, // TODO: Not spec compliant, should be false.\n  MimeTypeArray: false,\n  NamedNodeMap: false,\n  NodeList: true,\n  PaintRequestList: false,\n  Plugin: false,\n  PluginArray: false,\n  SVGLengthList: false,\n  SVGNumberList: false,\n  SVGPathSegList: false,\n  SVGPointList: false,\n  SVGStringList: false,\n  SVGTransformList: false,\n  SourceBufferList: false,\n  StyleSheetList: true, // TODO: Not spec compliant, should be false.\n  TextTrackCueList: false,\n  TextTrackList: false,\n  TouchList: false\n};\n\nfor (var collections = getKeys(DOMIterables), i = 0; i < collections.length; i++) {\n  var NAME = collections[i];\n  var explicit = DOMIterables[NAME];\n  var Collection = global[NAME];\n  var proto = Collection && Collection.prototype;\n  var key;\n  if (proto) {\n    if (!proto[ITERATOR]) hide(proto, ITERATOR, ArrayValues);\n    if (!proto[TO_STRING_TAG]) hide(proto, TO_STRING_TAG, NAME);\n    Iterators[NAME] = ArrayValues;\n    if (explicit) for (key in $iterators) if (!proto[key]) redefine(proto, key, $iterators[key], true);\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/Dropbox/www/amcharts4dev/node_modules/core-js/modules/web.dom.iterable.js\n// module id = 523\n// module chunks = 26","import * as m from \"../es2015/core\";\nwindow.am4core = m;\n\n// TODO move all of this code into a different module and then import it\nfunction getCurrentScript() {\n\tif (document.currentScript) {\n\t\treturn document.currentScript;\n\n\t// Internet Explorer only\n\t} else {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\treturn scripts[scripts.length - 1];\n\t}\n}\n\nfunction dirpath(x) {\n\treturn /(.*\\/)[^\\/]*$/.exec(x)[1];\n}\n\n__webpack_public_path__ = dirpath(getCurrentScript().src);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./core.js\n// module id = 524\n// module chunks = 26","/**\n * This module houses all core/framework functionality and is required for\n * all charting components to work\n */\n\n/**\n * Elements: core\n */\nexport { System, getSystem } from \"./.internal/core/System\";\nexport { BaseObject, IBaseObjectEvents, BaseObjectEvents } from \"./.internal/core/Base\";\nexport { CalculatedValue, IComponentProperties, IComponentDataFields, IComponentEvents, IComponentAdapters, Component } from \"./.internal/core/Component\";\nexport { ContainerLayout, IContainerProperties, IContainerEvents, IContainerAdapters, Container, FontWeight, TextDecoration } from \"./.internal/core/Container\";\nexport { IValues, IDataItemEvents, IDataItemAdapters, DataItem } from \"./.internal/core/DataItem\";\nexport { ISpriteProperties, ISpriteAnimationOptions, ISpriteAdapters, Sprite } from \"./.internal/core/Sprite\";\nexport { SpriteEventDispatcher, SpritePointEvent, SpriteMouseTouchEvent, SpriteShiftEvent, ISpriteEvents } from \"./.internal/core/SpriteEvents\";\nexport { SpriteState } from \"./.internal/core/SpriteState\";\nexport { registry, Registry, IRegistryEvents } from \"./.internal/core/Registry\";\nexport { options, Options } from \"./.internal/core/Options\";\n\n/**\n * Elements: data\n */\nexport { ICSVOptions, CSVParser } from \"./.internal/core/data/CSVParser\";\nexport { IDataLoaderAdapters, DataLoader, dataLoader } from \"./.internal/core/data/DataLoader\";\nexport { IDataParserOptions, DataParser } from \"./.internal/core/data/DataParser\";\nexport { IDataSourceEvents, IDataSourceAdapters, DataSource } from \"./.internal/core/data/DataSource\";\nexport { IJSONOptions, JSONParser } from \"./.internal/core/data/JSONParser\";\n\n/**\n * Elements: defs\n */\nexport { Roles, AriaLive } from \"./.internal/core/defs/Accessibility\";\nexport { Align } from \"./.internal/core/defs/Align\";\nexport { HorizontalCenter } from \"./.internal/core/defs/HorizontalCenter\";\nexport { IGeoPoint } from \"./.internal/core/defs/IGeoPoint\";\nexport { iMinMaxer } from \"./.internal/core/defs/iMinMaxer\";\nexport { IMorphable } from \"./.internal/core/defs/IMorphable\";\nexport { IPoint, IOrientationPoint } from \"./.internal/core/defs/IPoint\";\nexport { IRange } from \"./.internal/core/defs/IRange\";\nexport { IStyleProperty } from \"./.internal/core/defs/IStyleProperty\";\nexport { ITimeInterval } from \"./.internal/core/defs/ITimeInterval\";\nexport { IWavedShape } from \"./.internal/core/defs/IWavedShape\";\nexport { Orientation } from \"./.internal/core/defs/Orientation\";\nexport { ShapeRendering } from \"./.internal/core/defs/ShapeRendering\";\nexport { SVGDefaults } from \"./.internal/core/defs/SVGDefaults\";\nexport { TextAlign } from \"./.internal/core/defs/TextAlign\";\nexport { TextValign } from \"./.internal/core/defs/TextValign\";\nexport { TimeUnit } from \"./.internal/core/defs/TimeUnit\";\nexport { VerticalAlign } from \"./.internal/core/defs/VerticalAlign\";\nexport { VerticalCenter } from \"./.internal/core/defs/VerticalCenter\";\n\n/**\n * Elements: elements\n */\nexport { IButtonProperties, IButtonEvents, IButtonAdapters, Button } from \"./.internal/core/elements/Button\";\nexport { ICircleProperties, ICircleEvents, ICircleAdapters, Circle } from \"./.internal/core/elements/Circle\";\nexport { IEllipseProperties, IEllipseEvents, IEllipseAdapters, Ellipse } from \"./.internal/core/elements/Ellipse\";\nexport { IImageProperties, IImageEvents, IImageAdapters, Image } from \"./.internal/core/elements/Image\";\nexport { ITextLineInfo, ILabelProperties, ILabelEvents, ILabelAdapters, Label } from \"./.internal/core/elements/Label\";\nexport { ILineProperties, ILineEvents, ILineAdapters, Line } from \"./.internal/core/elements/Line\";\nexport { IPopupAdapters, Popup } from \"./.internal/core/elements/Popup\";\nexport { IModalAdapters, Modal } from \"./.internal/core/elements/Modal\";\nexport { IPointedRectangleProperties, IPointedRectangleEvents, IPointedRectangleAdapters, PointedRectangle } from \"./.internal/core/elements/PointedRectangle\";\nexport { IPointedShapeProperties, IPointedShapeEvents, IPointedShapeAdapters, PointedShape } from \"./.internal/core/elements/PointedShape\";\nexport { IPolyarcProperties, IPolyarcEvents, IPolyarcAdapters, Polyarc } from \"./.internal/core/elements/Polyarc\";\nexport { IPolygonProperties, IPolygonEvents, IPolygonAdapters, Polygon } from \"./.internal/core/elements/Polygon\";\nexport { IPolylineProperties, IPolylineEvents, IPolylineAdapters, Polyline } from \"./.internal/core/elements/Polyline\";\nexport { IPolysplineProperties, IPolysplineEvents, IPolysplineAdapters, Polyspline } from \"./.internal/core/elements/Polyspline\";\nexport { IPreloaderProperties, IPreloaderEvents, IPreloaderAdapters, Preloader } from \"./.internal/core/elements/Preloader\";\nexport { IRectangleProperties, IRectangleEvents, IRectangleAdapters, Rectangle } from \"./.internal/core/elements/Rectangle\";\nexport { IResizeButtonProperties, IResizeButtonEvents, IResizeButtonAdapters, ResizeButton } from \"./.internal/core/elements/ResizeButton\";\nexport { IRoundedRectangleProperties, IRoundedRectangleEvents, IRoundedRectangleAdapters, RoundedRectangle } from \"./.internal/core/elements/RoundedRectangle\";\nexport { IScrollbarProperties, IScrollbarEvents, IScrollbarAdapters, Scrollbar } from \"./.internal/core/elements/Scrollbar\";\nexport { ISliderProperties, ISliderEvents, ISliderAdapters, Slider } from \"./.internal/core/elements/Slider\";\nexport { ISliceProperties, ISliceEvents, ISliceAdapters, Slice } from \"./.internal/core/elements/Slice\";\nexport { ITextLinkProperties, ITextLinkEvents, ITextLinkAdapters, TextLink } from \"./.internal/core/elements/TextLink\";\nexport { PointerOrientation, ITooltipProperties, ITooltipEvents, ITooltipAdapters, Tooltip } from \"./.internal/core/elements/Tooltip\";\nexport { ITrapezoidProperties, ITrapezoidEvents, ITrapezoidAdapters, Trapezoid } from \"./.internal/core/elements/Trapezoid\";\nexport { ITriangleProperties, ITriangleEvents, ITriangleAdapters, Triangle } from \"./.internal/core/elements/Triangle\";\nexport { IWavedCircleProperties, IWavedCircleEvents, IWavedCircleAdapters, WavedCircle } from \"./.internal/core/elements/WavedCircle\";\nexport { IWavedLineProperties, IWavedLineEvents, IWavedLineAdapters, WavedLine } from \"./.internal/core/elements/WavedLine\";\nexport { IWavedRectangleProperties, IWavedRectangleEvents, IWavedRectangleAdapters, WavedRectangle } from \"./.internal/core/elements/WavedRectangle\";\nexport { IZoomOutButtonProperties, IZoomOutButtonEvents, IZoomOutButtonAdapters, ZoomOutButton } from \"./.internal/core/elements/ZoomOutButton\";\nexport { IPlayButtonProperties, IPlayButtonEvents, IPlayButtonAdapters, PlayButton } from \"./.internal/core/elements/PlayButton\";\n\n/**\n * Elements: 3d\n */\nexport { IConeProperties, IConeEvents, IConeAdapters, Cone } from \"./.internal/core/elements/3d/Cone\";\nexport { Rectangle3DProperties, Rectangle3DEvents, Rectangle3DAdapters, Rectangle3D } from \"./.internal/core/elements/3d/Rectangle3D\";\nexport { ISlice3DProperties, ISlice3DEvents, ISlice3DAdapters, Slice3D } from \"./.internal/core/elements/3d/Slice3D\";\n\n/**\n * Elements: export\n */\nexport { ExportOperation, imageFormats, IExportImageOptions, IExportSVGOptions, pageSizes, IExportPDFOptions, IExportCSVOptions, IExportJSONOptions, IExportExcelOptions, IExportPrintOptions, IExportRemovedObject, IExportOptions, ExportOptions, IExportEvents, Keys, IExportAdapters, Export } from \"./.internal/core/export/Export\";\nexport { IExportMenuItem, IExportMenuEvents, IExportMenuAdapters, ExportMenu } from \"./.internal/core/export/ExportMenu\";\n\n/**\n * Elements: formatters\n */\nexport { DateFormatInfo, DateFormatter } from \"./.internal/core/formatters/DateFormatter\";\nexport { DurationFormatter } from \"./.internal/core/formatters/DurationFormatter\";\nexport { NumberFormatter } from \"./.internal/core/formatters/NumberFormatter\";\nexport { ITextChunk, ITextFormatterAdapters, TextFormatter, getTextFormatter } from \"./.internal/core/formatters/TextFormatter\";\n\n/**\n * Elements: interaction\n */\nexport { InertiaTypes, Inertia } from \"./.internal/core/interaction/Inertia\";\nexport { IInteractionEvents, Interaction, getInteraction } from \"./.internal/core/interaction/Interaction\";\nexport { InteractionKeyboardObject } from \"./.internal/core/interaction/InteractionKeyboardObject\";\nexport { InteractionObject } from \"./.internal/core/interaction/InteractionObject\";\nexport { PointEvent, PointerEvent, ShiftEvent, AngleEvent, ScaleEvent, CenterEvent, MouseTouchEvent, SimulatedKeyboardEvent, IInteractionObjectEvents, InteractionObjectEventDispatcher } from \"./.internal/core/interaction/InteractionObjectEvents\";\nexport { IInertiaOptions, IHitOptions, ISwipeOptions, ICursorOptions, IKeyboardOptions } from \"./.internal/core/interaction/InteractionOptions\";\nexport { MouseCursorStyle } from \"./.internal/core/interaction/Mouse\";\nexport { IPointer, IBreadcrumb } from \"./.internal/core/interaction/Pointer\";\n\n/**\n * Elements: rendering\n */\nexport { SVGAttribute, ISVGAttribute, AMElement } from \"./.internal/core/rendering/AMElement\";\nexport { Group } from \"./.internal/core/rendering/Group\";\nexport { SVGElementNames, Paper } from \"./.internal/core/rendering/Paper\";\nexport { ISmoothing, Tension, Basis } from \"./.internal/core/rendering/Smoothing\";\nexport { SVGContainer } from \"./.internal/core/rendering/SVGContainer\";\n\n/**\n * Elements: fills\n */\nexport { ColorModifier } from \"./.internal/core/rendering/fills/ColorModifier\";\nexport { IGradientStop, LinearGradient } from \"./.internal/core/rendering/fills/LinearGradient\";\nexport { LinearGradientModifier } from \"./.internal/core/rendering/fills/LinearGradientModifier\";\nexport { LinePattern } from \"./.internal/core/rendering/fills/LinePattern\";\nexport { PatternUnits, PatternProperties, Pattern } from \"./.internal/core/rendering/fills/Pattern\";\nexport { RadialGradient } from \"./.internal/core/rendering/fills/RadialGradient\";\nexport { RectPatternProperties, RectPattern } from \"./.internal/core/rendering/fills/RectPattern\";\n\n/**\n * Elements: filters\n */\nexport { ColorizeFilterProperties, ColorizeFilter } from \"./.internal/core/rendering/filters/ColorizeFilter\";\nexport { DesaturateFilterProperties, DesaturateFilter } from \"./.internal/core/rendering/filters/DesaturateFilter\";\nexport { DropShadowFilterProperties, DropShadowFilter } from \"./.internal/core/rendering/filters/DropShadowFilter\";\nexport { BlurFilterProperties, BlurFilter } from \"./.internal/core/rendering/filters/BlurFilter\";\nexport { FilterProperties, Filter } from \"./.internal/core/rendering/filters/Filter\";\nexport { FocusFilterProperties, FocusFilter } from \"./.internal/core/rendering/filters/FocusFilter\";\nexport { LightenFilterProperties, LightenFilter } from \"./.internal/core/rendering/filters/LightenFilter\";\n\n/**\n * Elements: responsive\n */\nexport { IResponsiveRule, IResponsiveEvents, IResponsiveAdapters, Responsive } from \"./.internal/core/responsive/Responsive\";\n\n/**\n * Elements: utils\n */\nexport { GlobalAdapter, globalAdapter, Adapter } from \"./.internal/core/utils/Adapter\";\nexport { IAnimationObject, IAnimatable, IAnimationOptions, IPercentAnimationOptions, IColorAnimationOptions, IAnimationEvents, Animation, animate } from \"./.internal/core/utils/Animation\";\nexport { SortResult } from \"./.internal/core/utils/Array\";\nexport { Listener, nextFrame, readFrame, writeFrame, whenIdle, triggerIdle } from \"./.internal/core/utils/AsyncPending\";\nexport { Cache, cache } from \"./.internal/core/utils/Cache\";\nexport { IClone } from \"./.internal/core/utils/Clone\";\nexport { Color, iRGB, iHSL, iHSV, color, isColor, castColor } from \"./.internal/core/utils/Color\";\nexport { iColorSetStepOptions, ColorSet } from \"./.internal/core/utils/ColorSet\";\nexport { ColorPurpose, InterfaceColorSet } from \"./.internal/core/utils/InterfaceColorSet\";\nexport { Constructor } from \"./.internal/core/utils/Constructor\";\nexport { IDictionaryEvents, DictionaryLike, DictionaryDisposer, Dictionary, DictionaryTemplate } from \"./.internal/core/utils/Dictionary\";\nexport { IDisposer, Disposer, MultiDisposer, MutableValueDisposer, CounterDisposer } from \"./.internal/core/utils/Disposer\";\nexport { StyleRule, StyleClass, getElement, addClass, removeClass, blur, focus, outerHTML, isElement, copyAttributes, fixPixelPerfect, ready } from \"./.internal/core/utils/DOM\";\nexport { AMEvent, EventListener, EventDispatcher, TargetedEventDispatcher } from \"./.internal/core/utils/EventDispatcher\";\nexport { Iterator, Iterable, ListIterator, min, max, join } from \"./.internal/core/utils/Iterator\";\nexport { KeyboardKeys, Keyboard, keyboard } from \"./.internal/core/utils/Keyboard\";\nexport { ILanguageEvents, ILanguageAdapters, Language } from \"./.internal/core/utils/Language\";\nexport { IndexedIterable, IListEvents, ListGrouper, ListLike, ListDisposer, List, ListTemplate } from \"./.internal/core/utils/List\";\nexport { Morpher } from \"./.internal/core/utils/Morpher\";\nexport { INetLoadResult } from \"./.internal/core/utils/Net\";\nexport { Ordering, reverse, or } from \"./.internal/core/utils/Order\";\nexport { Percent, percent, isPercent } from \"./.internal/core/utils/Percent\";\nexport { ISortedListEvents, OrderedList, SortedList, OrderedListTemplate, SortedListTemplate } from \"./.internal/core/utils/SortedList\";\nexport { PX, STRING, NUMBER, DATE, DURATION, PLACEHOLDER, PLACEHOLDER2, PLACEHOLDER3, PLACEHOLDER4, PLACEHOLDER5 } from \"./.internal/core/utils/Strings\";\nexport { Public, Optional, isNaN, checkString, checkBoolean, checkNumber, checkObject, castString, castNumber, isString, isNumber, isObject, isArray } from \"./.internal/core/utils/Type\";\nexport { Validatable } from \"./.internal/core/utils/Validatable\";\n\n  /**\n   * Functions: rendering\n   */\nimport * as path from \"./.internal/core/rendering/Path\";\nexport { path }\n\n\n  /**\n   * Functions: utils\n   */\nimport * as colors from \"./.internal/core/utils/Colors\";\nexport { colors }\n\nimport * as ease from \"./.internal/core/utils/Ease\";\nexport { ease }\n\nimport * as math from \"./.internal/core/utils/Math\";\nexport { math }\n\nimport * as number from \"./.internal/core/utils/Number\";\nexport { number }\n\nimport * as object from \"./.internal/core/utils/Object\";\nexport { object }\n\nimport * as string from \"./.internal/core/utils/String\";\nexport { string }\n\nimport * as time from \"./.internal/core/utils/Time\";\nexport { time }\n\nimport * as utils from \"./.internal/core/utils/Utils\";\nexport { utils }\n\nimport * as iter from \"./.internal/core/utils/Iterator\";\nexport { iter }\n\nimport * as type from \"./.internal/core/utils/Type\";\nexport { type }\n\nexport { ITheme } from \"./.internal/themes/ITheme\";\nexport { create, createFromConfig } from \"./.internal/core/utils/Instance\";\nexport { useTheme, unuseTheme } from \"./.internal/core/utils/Instance\";\n\n\n\n// WEBPACK FOOTER //\n// ../../src/core.ts","/**\r\n * Functionality for adding images in SVG tree.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Sprite, ISpriteProperties, ISpriteAdapters, ISpriteEvents, SpriteEventDispatcher, AMEvent } from \"../Sprite\";\r\nimport { registry } from \"../Registry\";\r\nimport * as $dom from \"../utils/DOM\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[Image]].\r\n */\r\nexport interface IImageProperties extends ISpriteProperties {\r\n\r\n\t/**\r\n\t * A URI of the image.\r\n\t *\r\n\t * @type {string}\r\n\t */\r\n\thref?: string;\r\n\r\n}\r\n\r\n/**\r\n * Defines events for [[Image]].\r\n */\r\nexport interface IImageEvents extends ISpriteEvents { }\r\n\r\n/**\r\n * Defines adapters for [[Image]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface IImageAdapters extends ISpriteAdapters, IImageProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Used to add `<image>` elements to SVG.\r\n *\r\n * @see {@link IImageEvents} for a list of available events\r\n * @see {@link IImageAdapters} for a list of available Adapters\r\n */\r\nexport class Image extends Sprite {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IImageProperties}\r\n\t */\r\n\tpublic _properties!: IImageProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IImageAdapters}\r\n\t */\r\n\tpublic _adapter!: IImageAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IImageEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IImageEvents;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"Image\";\r\n\t\tthis.element = this.paper.add(\"image\");\r\n\t\tthis.applyTheme();\r\n\r\n\t\tthis.width = 50;\r\n\t\tthis.height = 50;\r\n\t}\r\n\r\n\t/**\r\n\t * Draws an `<image>` element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic draw(): void {\r\n\t\tsuper.draw();\r\n\t\tthis.element.attr({\r\n\t\t\t\"width\": this.innerWidth,\r\n\t\t\t\"height\": this.innerHeight\r\n\t\t});\r\n\t\tthis.element.attrNS($dom.XLINK, \"xlink:href\", this.href);\r\n\t}\r\n\r\n\t/**\r\n\t * An image URI.\r\n\t *\r\n\t * @param {string}  value  Image URI\r\n\t */\r\n\tpublic set href(value: string) {\r\n\t\tthis.setPropertyValue(\"href\", value, true);\r\n\t}\r\n\r\n\t/**\r\n\t * @return {string} Image URI\r\n\t */\r\n\tpublic get href(): string {\r\n\t\treturn this.getPropertyValue(\"href\");\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"Image\"] = Image;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/elements/Image.ts","/**\r\n * Slider is a scrollbar with just one selection grip.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Scrollbar, IScrollbarProperties, IScrollbarAdapters, IScrollbarEvents } from \"../../core/elements/Scrollbar\";\r\nimport { SpriteEventDispatcher, AMEvent } from \"../../core/Sprite\";\r\nimport { List, IListEvents } from \"../../core/utils/List\";\r\nimport { IDisposer, MutableValueDisposer } from \"../../core/utils/Disposer\";\r\nimport { registry } from \"../Registry\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[Slider]].\r\n */\r\nexport interface ISliderProperties extends IScrollbarProperties { }\r\n\r\n/**\r\n * Defines events for [[Slider]].\r\n */\r\nexport interface ISliderEvents extends IScrollbarEvents { }\r\n\r\n/**\r\n * Defines adapters for [[Slider]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface ISliderAdapters extends IScrollbarAdapters, ISliderProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Creates a slider - a version of scrollbar with just one grip.\r\n *\r\n * @see {@link ISliderEvents} for a list of available events\r\n * @see {@link ISliderAdapters} for a list of available Adapters\r\n */\r\nexport class Slider extends Scrollbar {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ISliderProperties}\r\n\t */\r\n\tpublic _properties!: ISliderProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ISliderAdapters}\r\n\t */\r\n\tpublic _adapter!: ISliderAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {ISliderEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: ISliderEvents;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"Slider\";\r\n\r\n\t\tthis.thumb.opacity = 0;\r\n\t\tthis.thumb.interactionsEnabled = false;\r\n\t\tthis.endGrip.opacity = 0;\r\n\t\tthis.endGrip.interactionsEnabled = false;\r\n\r\n\t\tthis.startGrip.events.on(\"drag\", () => {\r\n\t\t\tthis.endGrip.x = this.startGrip.x;\r\n\t\t\tthis.endGrip.y = this.startGrip.y;\r\n\t\t})\r\n\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * @return {number} [description]\r\n\t */\r\n\tprotected get __end(): number {\r\n\t\treturn this._start;\r\n\t}\r\n\r\n\tprotected set __end(value: number) {\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} [description]\r\n\t */\r\n\tpublic get end(): number {\r\n\t\treturn this._start;\r\n\t}\r\n\r\n\t/**\r\n\t * Relative position (0-1) of the end grip.\r\n\t *\r\n\t * @param {number}  position  Position (0-1)\r\n\t */\r\n\tpublic set end(position: number) {\r\n\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Relative position (0-1) of the start grip.\r\n\t *\r\n\t * @param {number}  position  Position (0-1)\r\n\t */\r\n\tpublic set start(position: number) {\r\n\t\tif (!this._isBusy) {\r\n\t\t\tthis.__start = position;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Position (0-1)\r\n\t */\r\n\tpublic get start(): number {\r\n\t\treturn this._start;\r\n\t}\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"Slider\"] = Slider;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/elements/Slider.ts","/**\r\n * Play button functionality.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Button, IButtonProperties, IButtonAdapters, IButtonEvents } from \"./Button\";\r\nimport { SpriteEventDispatcher, AMEvent } from \"../Sprite\";\r\nimport { RoundedRectangle } from \"./RoundedRectangle\";\r\nimport { registry } from \"../Registry\";\r\nimport { InterfaceColorSet } from \"../../core/utils/InterfaceColorSet\";\r\nimport { Triangle } from \"./Triangle\";\r\nimport * as $type from \"../../core/utils/Type\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for [[PlayButton]].\r\n */\r\nexport interface IPlayButtonProperties extends IButtonProperties { }\r\n\r\n/**\r\n * Defines events for [[PlayButton]].\r\n */\r\nexport interface IPlayButtonEvents extends IButtonEvents { }\r\n\r\n/**\r\n * Defines adapters for [[PlayButton]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface IPlayButtonAdapters extends IButtonAdapters, IPlayButtonProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Creates a zoom out button.\r\n *\r\n * @see {@link IPlayButtonEvents} for a list of available events\r\n * @see {@link IPlayButtonAdapters} for a list of available Adapters\r\n */\r\nexport class PlayButton extends Button {\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IPlayButtonProperties}\r\n\t */\r\n\tpublic _properties!: IPlayButtonProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {IPlayButtonAdapters}\r\n\t */\r\n\tpublic _adapter!: IPlayButtonAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t *\r\n\t * @type {IPlayButtonEvents}\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic _events!: IPlayButtonEvents;\r\n\r\n\t/**\r\n\t * Orientation of the resize direction.\r\n\t *\r\n\t * @deprecated Not used\r\n\t * @type {Orientation}\r\n\t */\r\n\t//protected _orientation: Orientation;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\r\n\t\t// Init\r\n\t\tsuper();\r\n\t\tthis.className = \"PlayButton\";\r\n\r\n\t\tthis.padding(12, 12, 12, 12);\r\n\r\n\t\tthis.showSystemTooltip = true;\r\n\r\n\t\tlet interfaceColors = new InterfaceColorSet();\r\n\r\n\t\tlet background: RoundedRectangle = this.background;\r\n\t\tbackground.cornerRadius(25, 25, 25, 25);\r\n\t\tbackground.fill = interfaceColors.getFor(\"primaryButton\");\r\n\t\tbackground.stroke = interfaceColors.getFor(\"primaryButtonStroke\");\r\n\t\tbackground.strokeOpacity = 0;\r\n\r\n\t\tbackground.states.getKey(\"hover\").properties.fill = interfaceColors.getFor(\"primaryButtonHover\");\r\n\t\tbackground.states.getKey(\"down\").properties.fill = interfaceColors.getFor(\"primaryButtonActive\");\r\n\r\n\t\t// Create a play icon\r\n\t\tlet playIcon: Triangle = new Triangle();\r\n\t\tplayIcon.direction = \"right\";\r\n\t\tplayIcon.width = 9;\r\n\t\tplayIcon.height = 11;\r\n\t\tplayIcon.marginLeft = 1;\r\n\t\tplayIcon.marginRight = 1;\r\n\t\tplayIcon.horizontalCenter = \"middle\";\r\n\t\tplayIcon.verticalCenter = \"middle\";\r\n\r\n\t\tplayIcon.stroke = interfaceColors.getFor(\"primaryButtonText\");\r\n\t\tplayIcon.fill = playIcon.stroke;\r\n\t\tthis.icon = playIcon;\r\n\r\n\t\t// Create a play icon\r\n\t\tlet stopIcon: RoundedRectangle = new RoundedRectangle();\r\n\t\tstopIcon.width = 11;\r\n\t\tstopIcon.height = 11;\r\n\t\tstopIcon.horizontalCenter = \"middle\";\r\n\t\tstopIcon.verticalCenter = \"middle\";\r\n\t\tstopIcon.cornerRadius(0, 0, 0, 0);\r\n\r\n\t\tstopIcon.stroke = interfaceColors.getFor(\"primaryButtonText\");\r\n\t\tstopIcon.fill = playIcon.stroke;\r\n\r\n\t\tthis.togglable = true;\r\n\r\n\t\tlet activeState = this.states.create(\"active\");\r\n\t\tactiveState.transitionDuration = 0;\r\n\t\tactiveState.properties.icon = stopIcon;\r\n\r\n\t\tthis.defaultState.transitionDuration = 0;\r\n\r\n\t\t// Apply theme\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Sets defaults that instantiate some objects that rely on parent, so they\r\n\t * cannot be set in constructor.\r\n\t */\r\n\tprotected applyInternalDefaults(): void {\r\n\t\tsuper.applyInternalDefaults();\r\n\t\tif (!$type.hasValue(this.readerTitle)) {\r\n\t\t\tthis.readerTitle = this.language.translate(\"Play\");\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"PlayButton\"] = PlayButton;\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../src/.internal/core/elements/PlayButton.ts","/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Pattern } from \"./Pattern\";\r\nimport { AMElement } from \"../AMElement\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Line pattern.\r\n */\r\nexport class LinePattern extends Pattern {\r\n\r\n\t/**\r\n\t * SVG `<line>` element used for pattern.\r\n\t * \r\n\t * @type {AMElement}\r\n\t */\r\n\tprotected _line: AMElement;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis._line = this.paper.add(\"line\");\r\n\t\tthis.addElement(this._line);\r\n\t}\r\n\r\n\t/**\r\n\t * Draws the pattern.\r\n\t */\r\n\tprotected draw(): void {\r\n\t\tsuper.draw();\r\n\t\tif (this._line) {\r\n\t\t\tthis._line.attr({ \"x2\": this.width * 2 }); // to solve rotation\r\n\t\t}\r\n\t}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ../../../../../../src/.internal/core/rendering/fills/LinePattern.ts","/**\r\n * Rectangular pattern module.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Pattern, PatternProperties } from \"./Pattern\";\r\nimport { AMElement } from \"../AMElement\";\r\nimport * as $type from \"../../utils/Type\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines properties for rectangular pattern\r\n * @type {[type]}\r\n */\r\nexport interface RectPatternProperties extends PatternProperties {\r\n\trectWidth: number;\r\n\trectHeight: number;\r\n};\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Rectangular pattern\r\n */\r\nexport class RectPattern extends Pattern {\r\n\r\n\t/**\r\n\t * Reference to `<rect>` element used in pattern.\r\n\t *\r\n\t * @type {Optional<AMElement>}\r\n\t */\r\n\tprotected _rect: $type.Optional<AMElement>;\r\n\r\n\t/**\r\n\t * Defines property types.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {RectPatternProperties}\r\n\t */\r\n\tpublic _properties!: RectPatternProperties;\r\n\r\n\t/**\r\n\t * Collection of property values for the pattern\r\n\t *\r\n\t * @todo Remove?\r\n\t * @deprecated\r\n\t * @type {Dictionary<RectPatternProperties, any>}\r\n\t */\r\n\t//public propertyValues: Dictionary<RectPatternProperties, any>;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.rectHeight = 1;\r\n\t\tthis.rectWidth = 1;\r\n\t}\r\n\r\n\t/**\r\n\t * Draws the rectangular element.\r\n\t */\r\n\tprotected draw(): void {\r\n\t\tif (this._rect) {\r\n\t\t\tthis.removeElement(this._rect);\r\n\t\t}\r\n\r\n\t\tthis._rect = this.paper.add(\"rect\");\r\n\t\tthis._rect.attr({ \"width\": this.rectWidth, \"height\": this.rectHeight });\r\n\t\tthis.addElement(this._rect);\r\n\r\n\t\tsuper.draw();\r\n\t}\r\n\r\n\t/**\r\n\t * Rectangle width in pixels.\r\n\t *\r\n\t * @param {number} value Width (px)\r\n\t */\r\n\tpublic set rectWidth(value: number) {\r\n\t\tthis.properties[\"rectWidth\"] = value;\r\n\t\tthis.draw();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Width (px)\r\n\t */\r\n\tpublic get rectWidth(): number {\r\n\t\treturn this.properties[\"rectWidth\"];\r\n\t}\r\n\r\n\t/**\r\n\t * Rectangle height in pixels.\r\n\t *\r\n\t * @param {number} value Height (px)\r\n\t */\r\n\tpublic set rectHeight(value: number) {\r\n\t\tthis.properties[\"rectHeight\"] = value;\r\n\t\tthis.draw();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Height (px)\r\n\t */\r\n\tpublic get rectHeight(): number {\r\n\t\treturn this.properties[\"rectHeight\"];\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../../../../../src/.internal/core/rendering/fills/RectPattern.ts","/**\r\n * Module for \"Colorize\" filter.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Filter, FilterProperties } from \"./Filter\";\r\nimport { AMElement } from \"../AMElement\";\r\nimport { Color } from \"../../utils/Color\";\r\nimport { registry } from \"../../Registry\";\r\nimport * as $type from \"../../utils/Type\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines additional properties relative to the \"Colorize\" filter.\r\n */\r\nexport interface ColorizeFilterProperties extends FilterProperties {\r\n\r\n\t/**\r\n\t * Color.\r\n\t *\r\n\t * @type {Color}\r\n\t */\r\n\tcolor?: Color;\r\n\r\n\t/**\r\n\t * Intensity. (0-1)\r\n\t *\r\n\t * @default 1\r\n\t * @type {number}\r\n\t */\r\n\tintensity: number;\r\n\r\n};\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Creates a \"Colorize\" filter.\r\n */\r\nexport class ColorizeFilter extends Filter {\r\n\r\n\t/**\r\n\t * Defines property types.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {ColorizeFilterProperties}\r\n\t */\r\n\tpublic _properties!: ColorizeFilterProperties;\r\n\r\n\t/**\r\n\t * A storage for Filter property/value pairs.\r\n\t * @see [@link ColorizeFilterProperties]\r\n\t * @type {Dictionary<ColorizeFilterProperties, any>}\r\n\t */\r\n\t//public propertyValues: Dictionary<ColorizeFilterProperties, any>;\r\n\r\n\t/**\r\n\t * Reference to the `<feColorMatrix>` element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {AMElement}\r\n\t */\r\n\tpublic feColorMatrix: AMElement;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t * * Creates primitve (effect) elements\r\n\t * * Sets default properties\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"ColorizeFilter\";\r\n\r\n\t\t// Create elements\r\n\t\t// NOTE: we do not need to add each individual element to `_disposers`\r\n\t\t// because `filterPrimitives` has an event handler which automatically adds\r\n\t\t// anything added to it to `_disposers`\r\n\t\tthis.feColorMatrix = this.paper.add(\"feColorMatrix\");\r\n\t\tthis.feColorMatrix.attr({ \"type\": \"matrix\" });\r\n\t\t//this.feColorMatrix.setAttribute(\"in\", \"SourceAlpha\");\r\n\t\tthis.filterPrimitives.push(this.feColorMatrix);\r\n\r\n\t\t// Set default properties\r\n\t\tthis.intensity = 1;\r\n\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * (Re)applies colors to the already existing filter by modifying filyer's\r\n\t * color matrix element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic applyFilter(): void {\r\n\r\n\t\tlet i: number = this.intensity;\r\n\t\tlet ii = 1 - i;\r\n\r\n\t\tlet r: number;\r\n\t\tlet g: number;\r\n\t\tlet b: number;\r\n\r\n\t\tconst color = this.color;\r\n\r\n\t\tif (!color) {\r\n\t\t\tr = 0;\r\n\t\t\tg = 0;\r\n\t\t\tb = 0;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tr = color.rgb.r / 255 * i;\r\n\t\t\tg = color.rgb.g / 255 * i;\r\n\t\t\tb = color.rgb.b / 255 * i;\r\n\t\t}\r\n\r\n\t\tthis.feColorMatrix.attr({ \"values\": ii + \" 0 0 0 \" + r + \" 0 \" + ii + \" 0 0 \" + g + \" 0 0 \" + ii + \" 0 \" + b + \" 0 0 0 1 0\" });\r\n\t}\r\n\r\n\t/**\r\n\t * Color.\r\n\t *\r\n\t * @param {Color}  value  Color\r\n\t */\r\n\tpublic set color(value: $type.Optional<Color>) {\r\n\t\tthis.properties[\"color\"] = value;\r\n\t\tthis.applyFilter();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {Color} Color\r\n\t */\r\n\tpublic get color(): $type.Optional<Color> {\r\n\t\treturn this.properties[\"color\"];\r\n\t}\r\n\r\n\t/**\r\n\t * Intensity of the color. (0-1)\r\n\t *\r\n\t * @default 1\r\n\t * @param {number} value Intensity (0-1)\r\n\t * @todo Describe possible values\r\n\t */\r\n\tpublic set intensity(value: number) {\r\n\t\tthis.properties.intensity = value;\r\n\t\tthis.applyFilter();\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Intensity (0-1)\r\n\t */\r\n\tpublic get intensity(): number {\r\n\t\treturn this.properties.intensity;\r\n\t}\r\n\r\n}\r\n\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"ColorizeFilter\"] = ColorizeFilter;\n\n\n// WEBPACK FOOTER //\n// ../../../../../../src/.internal/core/rendering/filters/ColorizeFilter.ts","/**\r\n * Module for \"Blur\" filter.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Filter, FilterProperties } from \"./Filter\";\r\nimport { AMElement } from \"../AMElement\";\r\nimport { Color } from \"../../utils/Color\";\r\nimport { registry } from \"../../Registry\";\r\nimport * as $type from \"../../utils/Type\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines additional properties relative to the \"Blur\" filter.\r\n */\r\nexport interface BlurFilterProperties extends FilterProperties {\r\n\r\n\t/**\r\n\t * Horizontal offset in pixels.\r\n\t *\r\n\t * @type {number}\r\n\t * @ignore Deprecated\r\n\t * @deprecated ?\r\n\t * @todo Remove?\r\n\t */\r\n\tdx?: number;\r\n\r\n\t/**\r\n\t * Vertical offset in pixels.\r\n\t *\r\n\t * @type {number}\r\n\t * @ignore Deprecated\r\n\t * @deprecated ?\r\n\t * @todo Remove?\r\n\t */\r\n\tdy?: number;\r\n\r\n\t/**\r\n\t * Blur value.\r\n\t *\r\n\t * @type {number}\r\n\t */\r\n\tblur: number;\r\n\r\n\t/**\r\n\t * Opacity. (0-1)\r\n\t *\r\n\t * @type {number}\r\n\t * @ignore Deprecated\r\n\t * @deprecated ?\r\n\t * @todo Remove?\r\n\t */\r\n\topacity?: number;\r\n\r\n\t/**\r\n\t * Color.\r\n\t *\r\n\t * @type {Color}\r\n\t * @ignore Deprecated\r\n\t * @deprecated ?\r\n\t * @todo Remove?\r\n\t */\r\n\tcolor?: Color;\r\n\r\n};\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Creates a \"Blur\" filter.\r\n */\r\nexport class BlurFilter extends Filter {\r\n\r\n\t/**\r\n\t * Defines property types.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {BlurFilterProperties}\r\n\t */\r\n\tpublic _properties!: BlurFilterProperties;\r\n\r\n\t/**\r\n\t * A storage for Filter property/value pairs.\r\n\t * @see [@link BlurFilterProperties]\r\n\t * @type {Dictionary<BlurFilterProperties, any>}\r\n\t */\r\n\t//public propertyValues: Dictionary<BlurFilterProperties, any>;\r\n\r\n\t/**\r\n\t * Reference to the `<feGaussianBlur>` element.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @type {AMElement}\r\n\t */\r\n\tpublic feGaussianBlur: AMElement;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t * * Creates primitve (effect) elements\r\n\t * * Sets default properties\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.className = \"BlurFilter\";\r\n\r\n\t\t// Create elements\r\n\t\t// NOTE: we do not need to add each individual element to `_disposers`\r\n\t\t// because `filterPrimitives` has an event handler which automatically adds\r\n\t\t// anything added to it to `_disposers`\r\n\r\n\t\tthis.feGaussianBlur = this.paper.add(\"feGaussianBlur\");\r\n\t\tthis.feGaussianBlur.attr({ \"result\": \"blurOut\", \"in\": \"SourceGraphic\" });\r\n\t\tthis.filterPrimitives.push(this.feGaussianBlur);\r\n\r\n\t\t// Set default properties\r\n\t\tthis.width = 200;\r\n\t\tthis.height = 200;\r\n\t\tthis.blur = 1.5;\r\n\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Blur value.\r\n\t *\r\n\t * @default 1.5\r\n\t * @param {number} value Blur\r\n\t */\r\n\tpublic set blur(value: number) {\r\n\t\tthis.properties.blur = value;\r\n\t\tthis.feGaussianBlur.attr({ \"stdDeviation\": value / this.scale });\r\n\t}\r\n\r\n\t/**\r\n\t * @return {number} Blur\r\n\t */\r\n\tpublic get blur(): number {\r\n\t\treturn this.properties.blur;\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"BlurFilter\"] = BlurFilter;\n\n\n// WEBPACK FOOTER //\n// ../../../../../../src/.internal/core/rendering/filters/BlurFilter.ts","module.exports = jsdom;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jsdom\"\n// module id = 618\n// module chunks = 26","module.exports = xmldom;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"xmldom\"\n// module id = 619\n// module chunks = 26"],"sourceRoot":""}