{"version":3,"file":"Smoothing.js","sourceRoot":"","sources":["../../../../../src/.internal/core/rendering/Smoothing.ts"],"names":[],"mappings":"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","sourcesContent":["/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { registry } from \"../Registry\";\r\nimport * as $path from \"./Path\";\r\nimport * as $array from \"../utils/Array\";\r\nimport * as $utils from \"../utils/Utils\";\r\nimport * as $math from \"../utils/Math\";\r\nimport { IPoint } from \"../defs/IPoint\";\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * PATH FUNCTIONS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n */\r\nexport interface ISmoothing {\r\n\tsmooth(points: Array<IPoint>): string;\r\n}\r\n\r\n/**\r\n * [sign description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @todo Move this someplace else\r\n * @param {number} x [description]\r\n */\r\nfunction sign(x: number): -1 | 1 {\r\n\treturn x < 0 ? -1 : 1;\r\n}\r\n\r\n/**\r\n * [slope2 description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @param  {number} x0 [description]\r\n * @param  {number} x1 [description]\r\n * @param  {number} y0 [description]\r\n * @param  {number} y1 [description]\r\n * @param  {number} t  [description]\r\n * @return {number}    [description]\r\n */\r\nfunction slope2(x0: number, x1: number, y0: number, y1: number, t: number): number {\r\n\tconst h = x1 - x0;\r\n\treturn h ? (3 * (y1 - y0) / h - t) / 2 : t;\r\n}\r\n\r\n/**\r\n * [slope3 description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @param  {number} x0 [description]\r\n * @param  {number} x1 [description]\r\n * @param  {number} y0 [description]\r\n * @param  {number} y1 [description]\r\n * @param  {number} x2 [description]\r\n * @param  {number} y2 [description]\r\n * @return {number}    [description]\r\n */\r\nfunction slope3(x0: number, x1: number, y0: number, y1: number, x2: number, y2: number): number {\r\n\tconst h0 = x1 - x0;\r\n\tconst h1 = x2 - x1;\r\n\tconst s0 = (y1 - y0) / (h0 || h1 < 0 && -0);\r\n\tconst s1 = (y2 - y1) / (h1 || h0 < 0 && -0);\r\n\tconst p = (s0 * h1 + s1 * h0) / (h0 + h1);\r\n\treturn (sign(s0) + sign(s1)) * Math.min(Math.abs(s0), Math.abs(s1), 0.5 * Math.abs(p)) || 0;\r\n}\r\n\r\n/**\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n */\r\nexport class Tension implements ISmoothing {\r\n\r\n\t/**\r\n\t * [_tensionX description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\tprivate _tensionX: number;\r\n\r\n\t/**\r\n\t * [_tensionY description]\r\n\t *\r\n\t * @todo Description\r\n\t * @type {number}\r\n\t */\r\n\tprivate _tensionY: number;\r\n\r\n\t/**\r\n\t * Constructor.\r\n\t *\r\n\t * @param {number} tensionX [description]\r\n\t * @param {number} tensionY [description]\r\n\t */\r\n\tconstructor(tensionX: number, tensionY: number) {\r\n\t\tthis._tensionX = tensionX;\r\n\t\tthis._tensionY = tensionY;\r\n\t}\r\n\r\n\t/**\r\n\t * [smooth description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @param  {Array<IPoint>}  points  [description]\r\n\t * @return {string}                 [description]\r\n\t */\r\n\tpublic smooth(points: Array<IPoint>): string {\r\n\t\tlet tensionX = this._tensionX;\r\n\t\tlet tensionY = this._tensionY;\r\n\r\n\t\tif (points.length < 3 || (tensionX >= 1 && tensionY >= 1)) {\r\n\t\t\treturn $path.polyline(points);\r\n\t\t}\r\n\r\n\t\tlet first: IPoint = points[0];\r\n\t\tlet last: IPoint = points[points.length - 1];\r\n\r\n\t\tlet closed: boolean = false;\r\n\r\n\t\tif ($math.round(first.x, 3) == $math.round(last.x) && $math.round(first.y) == $math.round(last.y)) {\r\n\t\t\tclosed = true;\r\n\t\t}\r\n\r\n\t\t// Can't moveTo here, as it wont be possible to have fill then.\r\n\t\tlet path: string = \"\";\r\n\r\n\t\tfor (let i: number = 0; i < points.length - 1; i++) {\r\n\t\t\tlet p0: IPoint = points[i - 1];\r\n\r\n\t\t\tlet p1: IPoint = points[i];\r\n\r\n\t\t\tlet p2: IPoint = points[i + 1];\r\n\r\n\t\t\tlet p3: IPoint = points[i + 2];\r\n\r\n\t\t\tif (i === 0) {\r\n\t\t\t\tif (closed) {\r\n\t\t\t\t\tp0 = points[points.length - 2];\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tp0 = points[i];\r\n\t\t\t\t}\r\n\t\t\t} else if (i == points.length - 2) {\r\n\t\t\t\tif (closed) {\r\n\t\t\t\t\tp3 = points[1];\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tp3 = points[i + 1];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tlet controlPointA: IPoint = $math.getCubicControlPointA(p0, p1, p2, p3, tensionX, tensionY);\r\n\t\t\tlet controlPointB: IPoint = $math.getCubicControlPointB(p0, p1, p2, p3, tensionX, tensionY);\r\n\r\n\t\t\tpath += $path.cubicCurveTo(p2, controlPointA, controlPointB);\r\n\t\t}\r\n\r\n\t\treturn path;\r\n\t}\r\n}\r\n\r\n\r\n/**\r\n * Returns a waved line SVG path between two points.\r\n *\r\n * @ignore Exclude from docs\r\n * @param  {IPoint}   point1            Starting point\r\n * @param  {IPoint}   point2            Ending point\r\n * @param  {number}   waveLength        Wave length\r\n * @param  {number}   waveHeight        Wave height\r\n * @param  {boolean}  adjustWaveLength  Adjust wave length based on the actual line length\r\n * @return {string}                     SVG path\r\n */\r\nexport function wavedLine(point1: IPoint, point2: IPoint, waveLength: number, waveHeight: number, tension: number, adjustWaveLength?: boolean): string {\r\n\r\n\tlet x1: number = point1.x;\r\n\tlet y1: number = point1.y;\r\n\r\n\tlet x2: number = point2.x;\r\n\tlet y2: number = point2.y;\r\n\r\n\tlet distance: number = $math.getDistance(point1, point2);\r\n\r\n\tif (adjustWaveLength) {\r\n\t\twaveLength = distance / Math.round(distance / waveLength);\r\n\t}\r\n\r\n\tlet d: string = registry.getCache($utils.stringify([\"wavedLine\", point1.x, point2.x, point1.y, point2.y, waveLength, waveHeight]));\r\n\tif (!d) {\r\n\t\tif (distance > 0) {\r\n\t\t\tlet angle: number = Math.atan2(y2 - y1, x2 - x1);\r\n\r\n\t\t\tlet cos: number = Math.cos(angle);\r\n\t\t\tlet sin: number = Math.sin(angle);\r\n\r\n\t\t\tlet waveLengthX: number = waveLength * cos;\r\n\t\t\tlet waveLengthY: number = waveLength * sin;\r\n\r\n\t\t\tif (waveLength <= 1 || waveHeight <= 1) {\r\n\t\t\t\td = $path.lineTo(point2);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tlet halfWaveCount: number = Math.round(2 * distance / waveLength);\r\n\r\n\t\t\t\tlet points: IPoint[] = [];\r\n\t\t\t\tlet sign: number = 1;\r\n\r\n\t\t\t\tif (x2 < x1) {\r\n\t\t\t\t\tsign *= -1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (y2 < y1) {\r\n\t\t\t\t\tsign *= -1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (let i: number = 0; i <= halfWaveCount; i++) {\r\n\t\t\t\t\tsign *= -1;\r\n\t\t\t\t\tlet x: number = x1 + i * waveLengthX / 2 + sign * waveHeight / 2 * sin;\r\n\t\t\t\t\tlet y: number = y1 + i * waveLengthY / 2 - sign * waveHeight / 2 * cos;\r\n\t\t\t\t\tpoints.push({ x: x, y: y });\r\n\t\t\t\t}\r\n\r\n\t\t\t\td = new Tension(tension, tension).smooth(points);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\td = \"\";\r\n\t\t}\r\n\r\n\t\tregistry.setCache($utils.stringify([\"wavedLine\", point1.x, point2.x, point1.y, point2.y, waveLength, waveHeight]), d);\r\n\t}\r\n\r\n\treturn d;\r\n}\r\n\r\n\r\n/**\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n */\r\nexport class Basis implements ISmoothing {\r\n\r\n\t/**\r\n\t * [_closed description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @type {boolean}\r\n\t */\r\n\tprivate _closed: boolean;\r\n\r\n\t/**\r\n\t * Constructor.\r\n\t *\r\n\t * @param {object}  info  [description]\r\n\t */\r\n\tconstructor(info: { closed: boolean }) {\r\n\t\tthis._closed = info.closed;\r\n\t}\r\n\r\n\t/**\r\n\t * [smooth description]\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @todo Description\r\n\t * @param  {Array<IPoint>}  points  [description]\r\n\t * @return {string}                 [description]\r\n\t */\r\n\tpublic smooth(points: Array<IPoint>): string {\r\n\t\tlet x0: number = NaN;\r\n\t\tlet x1: number = NaN;\r\n\t\tlet x2: number = NaN;\r\n\t\tlet x3: number = NaN;\r\n\t\tlet x4: number = NaN;\r\n\t\tlet y0: number = NaN;\r\n\t\tlet y1: number = NaN;\r\n\t\tlet y2: number = NaN;\r\n\t\tlet y3: number = NaN;\r\n\t\tlet y4: number = NaN;\r\n\t\tlet point: number = 0;\r\n\r\n\t\tlet output = \"\";\r\n\r\n\t\tconst pushCurve = (x: number, y: number): void => {\r\n\t\t\toutput += $path.cubicCurveTo(\r\n\t\t\t\t{\r\n\t\t\t\t\tx: (x0 + 4 * x1 + x) / 6\r\n\t\t\t\t\t, y: (y0 + 4 * y1 + y) / 6\r\n\t\t\t\t},\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tx: (2 * x0 + x1) / 3\r\n\t\t\t\t\t, y: (2 * y0 + y1) / 3\r\n\t\t\t\t},\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tx: (x0 + 2 * x1) / 3\r\n\t\t\t\t\t, y: (y0 + 2 * y1) / 3\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t};\r\n\r\n\t\tconst pushPoint = ({ x, y }: IPoint): void => {\r\n\t\t\tswitch (point) {\r\n\t\t\t\tcase 0:\r\n\t\t\t\t\tpoint = 1;\r\n\r\n\t\t\t\t\tif (this._closed) {\r\n\t\t\t\t\t\tx2 = x;\r\n\t\t\t\t\t\ty2 = y;\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\toutput += $path.lineTo({ x, y });\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\tpoint = 2;\r\n\r\n\t\t\t\t\tif (this._closed) {\r\n\t\t\t\t\t\tx3 = x;\r\n\t\t\t\t\t\ty3 = y;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tpoint = 3;\r\n\r\n\t\t\t\t\tif (this._closed) {\r\n\t\t\t\t\t\tx4 = x;\r\n\t\t\t\t\t\ty4 = y;\r\n\t\t\t\t\t\toutput += $path.moveTo({ x: (x0 + 4 * x1 + x) / 6, y: (y0 + 4 * y1 + y) / 6 });\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\toutput += $path.lineTo({ x: (5 * x0 + x1) / 6, y: (5 * y0 + y1) / 6 });\r\n\t\t\t\t\t\t// fall-through\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tpushCurve(x, y);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tx0 = x1;\r\n\t\t\tx1 = x;\r\n\t\t\ty0 = y1;\r\n\t\t\ty1 = y;\r\n\t\t};\r\n\r\n\t\t$array.each(points, pushPoint);\r\n\r\n\t\tif (this._closed) {\r\n\t\t\tswitch (point) {\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\toutput += $path.moveTo({ x: x2, y: y2 });\r\n\t\t\t\t\toutput += $path.closePath();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\toutput += $path.moveTo({ x: (x2 + 2 * x3) / 3, y: (y2 + 2 * y3) / 3 });\r\n\t\t\t\t\toutput += $path.lineTo({ x: (x3 + 2 * x2) / 3, y: (y3 + 2 * y2) / 3 });\r\n\t\t\t\t\toutput += $path.closePath();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\tpushPoint({ x: x2, y: y2 });\r\n\t\t\t\t\tpushPoint({ x: x3, y: y3 });\r\n\t\t\t\t\tpushPoint({ x: x4, y: y4 });\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\tswitch (point) {\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\tpushCurve(x1, y1);\r\n\t\t\t\t// fall-through\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\toutput += $path.lineTo({ x: x1, y: y1 });\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\toutput += $path.closePath();\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n}\r\n"]}